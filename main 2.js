/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  InstallingModal: () => InstallingModal2,
  default: () => VVunderloreToolkitPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian7 = require("obsidian");

// src/settings.ts
var import_obsidian5 = require("obsidian");

// src/firstinstallconfirm.ts
var import_obsidian3 = require("obsidian");

// src/editions.ts
var AVAILABLE_EDITIONS = [
  {
    id: "5e-2014",
    label: "D&D 5E (2014)",
    repo: "5etools-mirror-3/5etools-2014-src/tree/main/data",
    parser: "5e-json",
    sourceUrl: "",
    categories: [""]
  },
  {
    id: "5e-2025",
    label: "D&D 5E (2025)",
    repo: "5etools-mirror-3/5etools-src/tree/main/data",
    parser: "5e-json"
  },
  {
    id: "test",
    label: "Test Ruleset",
    repo: "5etools-mirror-3/5etools-2014-src",
    parser: "5e-json",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-2014-src/main/data",
    categories: ["spells", "bestiary"]
  }
];

// src/parsers/5e-json/installer.ts
var installer_exports = {};
__export(installer_exports, {
  importEditionData: () => importEditionData
});
var import_obsidian = require("obsidian");

// src/parsers/5e-json/helpers/sourceMap.ts
var SOURCE_NAME_MAP = {
  // Core rulebooks
  PHB: "Player's Handbook",
  MM: "Monster Manual",
  DMG: "Dungeon Master's Guide",
  // Official expansions & adventure modules
  CoS: "Curse of Strahd",
  OotA: "Out of the Abyss",
  PotA: "Princes of the Apocalypse",
  HotDQ: "Hoard of the Dragon Queen",
  RoT: "Rise of Tiamat",
  SKT: "Storm King's Thunder",
  TftYP: "Tales from the Yawning Portal",
  ToA: "Tomb of Annihilation",
  // Supplemental guides
  XGE: "Xanathar's Guide to Everything",
  VGM: "Volo's Guide to Monsters",
  TCE: "Tasha's Cauldron of Everything",
  EGW: "Eberron: Rising from the Last War",
  ERLW: "Explorer's Guide to Wildemount",
  MTF: "Monsters of the Multiverse",
  VRGR: "Van Richten's Guide to Ravenloft",
  // Additional sourcebooks
  AAG: "Astral Adventurer\u2019s Guide",
  AI: "Acquisitions Incorporated",
  AitFRAVFT: "Adventures in the Forgotten Realms: A Visual Field Test",
  BMT: "Big Monster Tome",
  DoDk: "Dragon of Darkkeep",
  FTD: "Fizban\u2019s Treasury of Dragons",
  GGR: "Guildmaster\u2019s Guide to Ravnica",
  GHLoE: "Ghosts of the Horizon: Light Over Elensaria",
  IDRotF: "Icewind Dale: Rime of the Frostmaiden",
  LLK: "Lost Laboratory of Kwalish",
  SatO: "Sapphire of Truth",
  SCC: "Strixhaven: Curriculum of Chaos",
  TDCSR: "The Dungeon Coach\u2019s Rulebook"
};
function getFullSourceName(abbrev, editionId) {
  let name = SOURCE_NAME_MAP[abbrev] ?? abbrev;
  if (abbrev === "PHB") {
    if (editionId?.includes("2014")) name += " (2014)";
    else if (editionId?.includes("2025")) name += " (2025)";
  }
  return name;
}

// src/parsers/5e-json/helpers/tagReplacer.ts
function replace5eTags(input) {
  let text;
  if (Array.isArray(input)) {
    text = input.join(" ");
  } else if (typeof input === "string") {
    text = input;
  } else {
    text = String(input ?? "");
  }
  return text.replace(
    /\{@(spell|item|creature|race) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, __, name) => `[[${capitalizeEach(name)}]]`
  ).replace(
    /\{@(condition|status|action|skill) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, tag, name) => `[[${capitalize(tag)}s#${name}|${capitalizeEach(name)}]]`
  ).replace(
    /\{@classFeature ([^|}]+)\|([^|}]+)(?:\|[^}]+)?\}/g,
    (_, feature, cls) => `[[${cls}#${feature}]]`
  ).replace(/\{@(book|filter) ([^|}]+)(?:\|[^}]+)?\}/g, (_, __, txt) => txt).replace(/\{@note ([^}]+)\}/g, (_, note) => `*${note}*`).replace(/\{@(damage|dice|dc|hit|sense) ([^}]+)\}/g, (_, __, value) => value).replace(/\{@chance ([^|}]+)(?:\|[^}]+)?\}/g, (_, value) => `${value}%`).replace(/\{@quickref ([^|}]+)(?:\|[^|]*\|[^}]*)?\}/g, (_, term) => {
    const known = [
      "difficult terrain",
      "total cover",
      "half cover",
      "three-quarters cover",
      "heavily obscured",
      "lightly obscured"
    ];
    return known.includes(term.toLowerCase()) ? `[[Rules#${capitalizeEach(term)}]]` : term;
  }).replace(/\{@recharge\s*([^}]+)\}/g, (_, num) => `(recharge: ${num.trim()})`).replace(/\{@(scaledice|scaledamage)[^}]*\|([^|}]+)\}/g, (_, __, value) => value).replace(/\{@d20[^}]*\}/g, "").replace(/\{@[^}]+\}/g, "");
}
function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
function capitalizeEach(str) {
  return str.split(" ").map(capitalize).join(" ");
}

// src/parsers/5e-json/helpers/markdownTable.ts
function renderMarkdownTable(entry) {
  if (entry.type !== "table" || !Array.isArray(entry.rows)) return "";
  const caption = entry.caption ? `##### ${entry.caption}
` : "";
  const headers = (entry.colLabels ?? []).map((h) => replace5eTags(h.trim()));
  const headerRow = `| ${headers.join(" | ")} |`;
  const dividerRow = `| ${headers.map(() => ":--").join(" | ")} |`;
  const bodyRows = entry.rows.map((row) => {
    const cells = row.map((cell) => {
      if (typeof cell === "string") return replace5eTags(cell);
      if (typeof cell === "object") {
        if (cell.roll?.exact !== void 0) return `${cell.roll.exact}`;
        if (cell.roll?.min !== void 0 && cell.roll?.max !== void 0) {
          return `${cell.roll.min}\u2013${cell.roll.max}`;
        }
        return replace5eTags(JSON.stringify(cell));
      }
      return replace5eTags(String(cell));
    });
    return `| ${cells.join(" | ")} |`;
  });
  return `${caption}${headerRow}
${dividerRow}
${bodyRows.join("\n")}`;
}

// src/parsers/5e-json/helpers/formatEntry.ts
function formatEntry(entry) {
  if (typeof entry === "string") {
    const cleaned = entry.trim();
    if (!cleaned || cleaned === "}") return "";
    return replace5eTags(cleaned);
  }
  if (entry.type === "entries" && Array.isArray(entry.entries)) {
    const body = entry.entries.map(formatEntry).filter((str) => str.trim().length > 0).join("\n\n");
    return entry.name ? `##### ${entry.name}
${body}` : body;
  }
  if (entry.type === "list" && Array.isArray(entry.items)) {
    return entry.items.map((i) => `- ${replace5eTags(typeof i === "string" ? i : JSON.stringify(i))}`).join("\n");
  }
  if (entry.type === "table" && Array.isArray(entry.rows)) {
    return renderMarkdownTable(entry);
  }
  if (entry.type === "quote" && Array.isArray(entry.entries)) {
    const quote = entry.entries.map(formatEntry).join(" ").trim();
    const author = entry.by ? ` \u2014 ${entry.by}` : "";
    return `*"${quote}${author}"*`;
  }
  if (entry.type === "inset" && Array.isArray(entry.entries)) {
    const inset = entry.entries.map(formatEntry).join("\n").trim();
    return `> ${inset.replace(/\n/g, "\n> ")}`;
  }
  if (entry.type === "refClassFeature" && typeof entry.classFeature === "string") {
    const [name] = entry.classFeature.split("|");
    const anchor = name.replace(/[^\w\s-]/g, "").replace(/\s+/g, "-").toLowerCase();
    return `[[#${anchor}]]`;
  }
  return "";
}

// src/parsers/5e-json/bestiary.ts
var SIZE_MAP = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var ALIGNMENT_MAP = {
  L: "Lawful",
  N: "Neutral",
  C: "Chaotic",
  G: "Good",
  E: "Evil",
  U: "Unaligned"
};
function capitalizeFirst(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function formatSizeAbbrev(abbrev) {
  return SIZE_MAP[abbrev] || abbrev;
}
function formatAlignmentAbbrev(abbrev) {
  return abbrev.trim().split(/\s+/).map((letter) => ALIGNMENT_MAP[letter] || letter).join(" ");
}
var NON_BEAST_NPCS = /* @__PURE__ */ new Set([
  "Abjurer",
  "Acolyte",
  "Apprentice Wizard",
  "Archdruid",
  "Archer",
  "Archmage",
  "Assassin",
  "Bandit",
  "Bandit Captain",
  "Bard",
  "Berserker",
  "Blackguard",
  "Champion",
  "Commoner",
  "Conjurer",
  "Cult Fanatic",
  "Cultist",
  "Diviner",
  "Druid (NPC)",
  "Druid NPC",
  "Enchanter",
  "Evoker",
  "Gladiator",
  "Guard",
  "Illusionist",
  "Knight",
  "Kraken Priest",
  "Mage",
  "Martial Arts Adept",
  "Master Thief",
  "Necromancer",
  "Noble",
  "Priest",
  "Scout",
  "Spy",
  "Swashbuckler",
  "Thug",
  "Transmuter",
  "Tribal Warrior",
  "Veteran",
  "War Priest",
  "Warlock of the Archfey",
  "Warlock of the Fiend",
  "Warlock of the Great Old One",
  "Warlord"
]);
function categorizeCreature(typeValue, name) {
  const t = String(typeValue).toLowerCase();
  if (t === "beast") return "Beasts";
  if (t === "humanoid" && NON_BEAST_NPCS.has(name)) return "Non-Beasts";
  if (t === "humanoid") return "Monsters";
  return "Monsters";
}
function renderAbilitiesTable(str, dex, con, int, wis, cha) {
  return [
    `| STR | DEX | CON | INT | WIS | CHA |`,
    `| --- | --- | --- | --- | --- | --- |`,
    `| ${str} | ${dex} | ${con} | ${int} | ${wis} | ${cha} |`
  ].join("\n");
}
function renderEntry(entry) {
  const name = entry.name;
  let descriptions = [];
  if (Array.isArray(entry.entries)) {
    descriptions = entry.entries;
  } else if (typeof entry.entries === "string") {
    descriptions = [entry.entries];
  } else if (Array.isArray(entry.desc)) {
    descriptions = entry.desc;
  } else if (typeof entry.desc === "string") {
    descriptions = [entry.desc];
  }
  const raw = descriptions.join(" ");
  const desc = replace5eTags(raw);
  return `***${name}.*** ${desc}`;
}
function parseBestiaryFile(json, editionId) {
  if (!json.monster) return [];
  json._editionId = editionId;
  const validMonsters = json.monster.filter((m) => {
    const acVal = Array.isArray(m.ac) ? m.ac[0]?.ac : m.ac;
    const hpVal = m.hp?.average ?? m.hp;
    return acVal != null && hpVal != null;
  });
  return validMonsters.map((monster) => {
    const name = monster.name;
    const safeName = name.replace(/\//g, "-");
    const rawSize = monster.size || "M";
    const rawAlignment = Array.isArray(monster.alignment) ? monster.alignment.join(" ") : monster.alignment || "N";
    let rawType = typeof monster.type === "string" ? monster.type : monster.type?.name || monster.type?.type || String(monster.type);
    rawType = capitalizeFirst(rawType);
    const ac = Array.isArray(monster.ac) ? monster.ac[0].ac : monster.ac;
    const hp = monster.hp?.average ?? monster.hp;
    const cr = monster.cr;
    const abilities = Array.isArray(monster.ability) ? monster.ability : [monster.str, monster.dex, monster.con, monster.int, monster.wis, monster.cha];
    const [str = 10, dex = 10, con = 10, int = 10, wis = 10, cha = 10] = abilities;
    const speedList = [];
    if (typeof monster.speed === "object") {
      for (const [mode, val] of Object.entries(monster.speed)) {
        if (mode === "canHover") continue;
        if (val && typeof val === "object" && "number" in val) {
          const num = val.number;
          const cond = val.condition ? ` ${val.condition}` : "";
          speedList.push(`${mode} ${num} ft.${cond}`);
        } else {
          speedList.push(`${mode} ${val} ft.`);
        }
      }
    } else {
      speedList.push(`${monster.speed} ft.`);
    }
    const speed = speedList.join(", ");
    const senses = [];
    if (monster.senses) {
      if (Array.isArray(monster.senses)) {
        monster.senses.forEach((s) => {
          const clean = s.replace(/^\d+\s*/, "");
          senses.push(capitalizeFirst(clean));
        });
      } else {
        Object.entries(monster.senses).forEach(([sense, val]) => {
          senses.push(`${capitalizeFirst(sense)} ${val}`);
        });
      }
    }
    const savingThrows = monster.save ? Object.keys(monster.save).map((k) => k.toUpperCase()) : [];
    const skills = monster.skill ? Object.keys(monster.skill).map((s) => capitalizeFirst(s)) : [];
    const languages = Array.isArray(monster.languages) ? monster.languages : monster.languages ? [monster.languages] : [];
    let source = getFullSourceName(monster.source, editionId);
    source = source.replace(/:/g, " -");
    const category = categorizeCreature(rawType, name);
    const fm = buildFM(monster, BESTIARY_FIELD_DEFS);
    const yaml = serializeFrontmatter(fm);
    let body = `# ${name}

${formatSizeAbbrev(rawSize)} ${rawType}, ${formatAlignmentAbbrev(rawAlignment)}

**Armor Class**: ${ac}
**Hit Points**: ${hp}
**Speed**: ${speed}
` + (savingThrows.length ? `**Saving Throws**: ${savingThrows.join(", ")}
` : "") + (skills.length ? `**Skills**: ${skills.join(", ")}
` : "") + (senses.length ? `**Senses**: ${senses.join(", ")}
` : "") + (languages.length ? `**Languages**: ${languages.join(", ")}
` : "") + `**Challenge**: ${cr}

` + renderAbilitiesTable(str, dex, con, int, wis, cha);
    if (monster.trait) body += `

### Traits
${monster.trait.map(renderEntry).join("\n\n")}`;
    if (monster.action) body += `

### Actions
${monster.action.map(renderEntry).join("\n\n")}`;
    if (monster.reaction) body += `

### Reactions
${monster.reaction.map(renderEntry).join("\n\n")}`;
    if (monster.legendary) body += `

### Legendary Actions
${monster.legendary.map(renderEntry).join("\n\n")}`;
    const content = `---
${yaml}
---

${body}`;
    return {
      path: `${category}/${safeName}.md`,
      content
    };
  });
}

// src/parsers/5e-json/items.ts
function capitalizeFirst2(s) {
  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
var DAMAGE_TYPE_MAP = {
  P: "Piercing",
  B: "Bludgeoning",
  S: "Slashing",
  N: "Necrotic",
  R: "Radiant",
  F: "Fire",
  C: "Cold",
  L: "Lightning",
  T: "Thunder",
  A: "Acid",
  H: "Healing",
  U: "Force",
  V: "Psychic"
};
var PROPERTY_MAP = {
  A: "Ammunition",
  F: "Finesse",
  H: "Heavy",
  L: "Light",
  R: "Reload",
  S: "Special",
  "2H": "Two-Handed",
  T: "Thrown"
};
var codeFolderMap = {
  "A": "Weapons and Armor/Ammunition",
  "M": "Weapons and Armor/Weapons",
  "R": "Weapons and Armor/Ranged Weapons",
  "S": "Weapons and Armor/Shields",
  "LA": "Weapons and Armor/Armor/Light Armor",
  "MA": "Weapons and Armor/Armor/Medium Armor",
  "HA": "Weapons and Armor/Armor/Heavy Armor",
  "EXP": "Weapons and Armor/Weapons/Explosives",
  "RD": "Magical Items/Rods",
  "RG": "Magical Items/Rings",
  "SC": "Magical Items/Scrolls",
  "SCF": "Magical Items/Spell Casting Focus",
  "WD": "Magical Items/Wands",
  "$G": "Valuables/Gems",
  "TG": "Valuables/Trade Goods",
  "AT": "Artisan Goods/Tools",
  "T": "Artisan Goods/Tools",
  "INS": "Artisan Goods/Instruments",
  "GS": "Artisan Goods/Games",
  "G": "Gear",
  "MNT": "Gear/Mounts and Vehicles",
  "TAH": "Gear/Mounts and Vehicles",
  "VEH": "Gear/Mounts and Vehicles",
  "P": "Consumables"
};
function parseItemsFile(json, editionId) {
  const rawItems = [];
  if (Array.isArray(json.baseitem)) rawItems.push(...json.baseitem);
  if (Array.isArray(json.item)) rawItems.push(...json.item);
  if (Array.isArray(json.object)) rawItems.push(...json.object);
  if (Array.isArray(json.vehicle)) rawItems.push(...json.vehicle);
  if (!rawItems.length) return [];
  const baseNames = new Set(
    Array.isArray(json.baseitem) ? json.baseitem.map((b) => b.name) : []
  );
  const out = [];
  for (const it of rawItems) {
    const name = it.name;
    const safeName = name.replace(/[\/\\:]/g, "-");
    const rawCode = (it.type || "").split("|")[0];
    let folder = codeFolderMap[rawCode] ?? "Miscellaneous";
    if (it.bonusWeapon) {
      folder = `${folder}/Variants`;
    } else {
      const isMagic = !!it.wondrous || !!it.reqAttune || !!it.req_attune || String(it.rarity).toLowerCase().includes("magic");
      if (isMagic) {
        const [, ...rest] = folder.split("/");
        folder = ["Magical Items", ...rest].join("/");
      }
    }
    if ((folder.startsWith("Weapons and Armor/Weapons") || folder.startsWith("Weapons and Armor/Ranged Weapons")) && it.weaponCategory) {
      folder = `${folder}/${capitalizeFirst2(it.weaponCategory)}`;
    }
    json._editionId = editionId;
    const fm = buildFM(it, ITEM_FIELD_DEFS);
    let yaml = serializeFrontmatter(fm);
    if (Array.isArray(it.packContents)) {
      yaml += "\npackContents:";
      for (const pc of it.packContents) {
        yaml += `
  - item: "${pc.item}"
    quantity: ${pc.quantity}`;
      }
    }
    const frontmatter = `---
${yaml}
---`;
    const lines = [];
    lines.push(`# ${name}`);
    lines.push("");
    const subtitle = it.weapon ? `${capitalizeFirst2(it.weaponCategory)} Weapon` : it.armor ? folder.split("/").pop() || "Armor" : "";
    if (subtitle) lines.push(`### *${subtitle}*`);
    if (it.weapon) {
      lines.push(`**Category**: ${capitalizeFirst2(it.weaponCategory)}`);
      lines.push(`**Damage**: ${it.dmg1 ?? ""}${it.dmg2 ? ` / ${it.dmg2}` : ""}`);
      const typesBody = (Array.isArray(it.dmgType) ? it.dmgType : [it.dmgType]).filter((t) => Boolean(t)).map((t) => DAMAGE_TYPE_MAP[t] || t);
      lines.push(`**Damage Type**: ${typesBody.join(", ")}`);
      lines.push(`**Range**: ${it.range ?? "\u2014"}`);
      lines.push(`**Reload**: ${it.reload ?? "\u2014"}`);
      if (it.ammoType) lines.push(`**Ammo Type**: ${it.ammoType}`);
      if (Array.isArray(it.property) && it.property.length) {
        const propsBody = it.property.map((p) => PROPERTY_MAP[p] || p);
        lines.push(`**Properties**: ${propsBody.join(", ")}`);
      }
    }
    if (it.armor) {
      lines.push(`**Armor Class**: ${it.ac}`);
      if (it.stealth) lines.push(`**Stealth Disadvantage**: true`);
      lines.push("");
    }
    const desc = it.entries ?? it.desc;
    if (desc) {
      for (const p of Array.isArray(desc) ? desc : [desc]) {
        if (typeof p === "string") {
          for (const line of replace5eTags(p).split("\n")) {
            lines.push(line);
          }
          lines.push("");
        } else if (p && typeof p === "object") {
          if (lines[lines.length - 1] === "") {
            lines.pop();
          }
          lines.push(`#### ${p.name}`);
          const sub = Array.isArray(p.entries) ? p.entries : [];
          for (const sp of sub) {
            for (const line of replace5eTags(sp).split("\n")) {
              lines.push(line);
            }
          }
          lines.push("");
        }
      }
    }
    const body = lines.join("\n");
    out.push({ path: `Items/${folder}/${safeName}.md`, content: `${frontmatter}

${body}` });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-json/helpers/frontmatter.ts
var FM_FIELDS = {
  ABILITY_BONUSES: "ability_bonuses",
  AC: "ac",
  ALIGNMENT: "alignment",
  AMMO_TYPE: "ammoType",
  ARMOR_PROFICIENCIES: "armor-prof",
  ATTACK_TYPE: "attack_type",
  CASTING_TIME: "casting_time",
  CHARISMA: "charisma",
  CHA_MOD: "cha_mod",
  CONCENTRATION: "concentration",
  CONDITION_IMM: "cond_immunity",
  CONSTITUTION: "constitution",
  CON_MOD: "con_mod",
  COST: "cost",
  CR: "cr",
  DAMAGE_TYPE: "damage_type",
  DAMAGE_TYPES: "damageTypes",
  DAMAGE: "damage",
  DAMAGE_RES: "dmg_resistance",
  DAMAGE_IMM: "dmg_immunity",
  DEXTERITY: "dexterity",
  DEX_MOD: "dex_mod",
  DURATION: "duration",
  HIT_DICE: "hit-die",
  HP: "hp",
  INTELLIGENCE: "intelligence",
  INT_MOD: "int_mod",
  LANGUAGES: "languages",
  LEVEL: "level",
  MAGICAL: "magical",
  MATERIAL: "material",
  NAME: "name",
  PROPERTIES: "properties",
  RANGE: "range",
  RARITY: "rarity",
  RELOAD: "reload",
  RITUAL: "ritual",
  SAVE: "save",
  SAVING_THROWS: "saving_throws",
  SCHOOL: "school",
  SENSES: "senses",
  SIZE: "size",
  SKILLS: "skills",
  SOMATIC: "somatic",
  SOURCE: "source",
  SPECIES: "species",
  SPEED: "speed",
  STEALTH_DISADVANTAGE: "stealthDisadvantage",
  STRENGTH: "strength",
  STR_MOD: "str_mod",
  SUBRACES: "subraces",
  TOOL_PROFICIENCIES: "tool-prof",
  TRAITS: "traits",
  TYPE: "type",
  VARIANT: "variant",
  VERBAL: "verbal",
  WEAPON_CATEGORY: "weaponCategory",
  WEAPON_PROFICIENCIES: "weapon-prof",
  WEIGHT: "weight",
  WISDOM: "wisdom",
  WIS_MOD: "wis_mod"
  // size, speed, languages already above
};
function buildFM(json, defs) {
  const fm = {};
  for (const { callSign, jsonKey, conv } of defs) {
    if (json[jsonKey] == null) continue;
    const raw = json[jsonKey];
    const val = conv ? conv(raw, json) : raw;
    fm[FM_FIELDS[callSign]] = val;
  }
  return fm;
}
function cap(str) {
  if (typeof str !== "string") return "";
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function serializeFrontmatter(fm) {
  return Object.entries(fm).map(([k, v]) => {
    if (Array.isArray(v)) {
      return `${k}:
${v.map((i) => `  - ${i}`).join("\n")}`;
    }
    if (typeof v === "string") {
      return `${k}: "${v}"`;
    }
    return `${k}: ${v}`;
  }).join("\n");
}
var SPELL_FIELD_DEFS = [
  { callSign: "NAME", jsonKey: "name" },
  { callSign: "LEVEL", jsonKey: "level" },
  {
    callSign: "SCHOOL",
    jsonKey: "school",
    conv: (s) => SCHOOL_MAP[s] ?? s
  },
  { callSign: "CASTING_TIME", jsonKey: "time", conv: formatTime },
  { callSign: "RANGE", jsonKey: "range", conv: formatRange },
  { callSign: "DURATION", jsonKey: "duration", conv: formatDuration },
  { callSign: "VERBAL", jsonKey: "components", conv: (c) => !!c.v },
  { callSign: "SOMATIC", jsonKey: "components", conv: (c) => !!c.s },
  { callSign: "MATERIAL", jsonKey: "components", conv: (c) => !!c.m },
  { callSign: "ATTACK_TYPE", jsonKey: "attackType" },
  {
    callSign: "DAMAGE_TYPE",
    jsonKey: "damageInflict",
    conv: (d) => Array.isArray(d) ? d[0] : d
  },
  { callSign: "RITUAL", jsonKey: "ritual" },
  {
    callSign: "CONCENTRATION",
    jsonKey: "duration",
    conv: (ds) => Array.isArray(ds) && ds.some((x) => x.concentration)
  },
  { callSign: "SAVE", jsonKey: "saveAttr" },
  {
    callSign: "SOURCE",
    jsonKey: "source",
    conv: (s, all) => {
      const arr = Array.isArray(s) ? s : [s];
      return arr.map((src) => getFullSourceName(src, all._editionId));
    }
  }
];
var SPECIES_FIELD_DEFS = [
  { callSign: "SPECIES", jsonKey: "name" },
  {
    callSign: "SIZE",
    jsonKey: "size",
    conv: formatSizeAbbrev
  },
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (v) => typeof v === "number" ? v : (v?.walk ?? v?.base) || 0
  },
  {
    callSign: "LANGUAGES",
    jsonKey: "languageProficiencies",
    conv: (arr) => {
      if (!Array.isArray(arr)) return [];
      const out = [];
      for (const lp of arr) {
        if (typeof lp === "string") {
          out.push(cap(lp));
        } else if (typeof lp === "object") {
          for (const [lang, val] of Object.entries(lp)) {
            if (val === true) {
              out.push(cap(lang));
            }
          }
        }
      }
      return [...new Set(out)];
    }
  },
  {
    callSign: "TRAITS",
    jsonKey: "entries",
    conv: (ents) => {
      if (!Array.isArray(ents)) return [];
      try {
        return ents.filter((e) => e && typeof e === "object" && typeof e.name === "string").map((e) => e.name);
      } catch {
        return [];
      }
    }
  },
  {
    callSign: "SENSES",
    jsonKey: "senses",
    conv: (v) => Array.isArray(v) ? v : typeof v === "string" ? [v] : []
  },
  {
    callSign: "SKILLS",
    jsonKey: "skillProficiencies",
    conv: (arr) => {
      if (!Array.isArray(arr)) return [];
      const out = [];
      for (const s of arr) {
        if (typeof s === "string") {
          out.push(cap(s));
        } else if (s.name || s.proficiency) {
          out.push(cap(s.name || s.proficiency));
        } else if (typeof s === "object") {
          for (const [skill, val] of Object.entries(s)) {
            if (val === true) {
              out.push(cap(skill));
            } else if (typeof val === "number") {
              out.push(`Choose ${val} from ${cap(skill)}`);
            }
          }
        }
      }
      return [...new Set(out)];
    }
  },
  {
    callSign: "TOOL_PROFICIENCIES",
    jsonKey: "toolProficiencies",
    conv: (arr) => {
      if (!Array.isArray(arr)) return [];
      const out = [];
      for (const s of arr) {
        if (typeof s === "string") out.push(cap(s));
        else if (s.name || s.proficiency) out.push(cap(s.name || s.proficiency));
      }
      return [...new Set(out)];
    }
  },
  {
    callSign: "WEAPON_PROFICIENCIES",
    jsonKey: "weaponProficiencies",
    conv: (arr) => {
      if (!Array.isArray(arr)) return [];
      const out = [];
      for (const s of arr) {
        if (typeof s === "string") out.push(cap(s));
        else if (s.name || s.proficiency) out.push(cap(s.name || s.proficiency));
        else if (typeof s === "object") {
          for (const k of Object.keys(s)) {
            if (s[k] === true) out.push(k.split("|")[0]);
          }
        }
      }
      return [...new Set(out)];
    }
  },
  {
    callSign: "ARMOR_PROFICIENCIES",
    jsonKey: "armorProficiencies",
    conv: (arr) => {
      if (!Array.isArray(arr)) return [];
      const out = [];
      for (const s of arr) {
        if (typeof s === "string") out.push(cap(s));
        else if (s.name || s.proficiency) out.push(cap(s.name || s.proficiency));
      }
      return [...new Set(out)];
    }
  },
  {
    callSign: "DAMAGE_RES",
    jsonKey: "resist",
    conv: (v) => Array.isArray(v) ? v.map(cap) : []
  },
  {
    callSign: "SOURCE",
    jsonKey: "source",
    conv: (raw, all) => {
      const out = /* @__PURE__ */ new Set();
      out.add(getFullSourceName(raw, all._editionId));
      for (const os of all.otherSources ?? []) {
        out.add(getFullSourceName(os.source, all._editionId));
      }
      for (const rep of all.reprintedAs ?? []) {
        const [, src] = rep.split("|");
        out.add(getFullSourceName(src, all._editionId));
      }
      return [...out];
    }
  }
];
var ITEM_FIELD_DEFS = [
  // Basic
  { callSign: "NAME", jsonKey: "name" },
  { callSign: "TYPE", jsonKey: "type" },
  {
    callSign: "RARITY",
    jsonKey: "rarity",
    conv: (r) => {
      const s = String(r || "").toLowerCase();
      return s && s !== "none" ? s[0].toUpperCase() + s.slice(1) : void 0;
    }
  },
  { callSign: "COST", jsonKey: "value" },
  { callSign: "WEIGHT", jsonKey: "weight" },
  {
    callSign: "SOURCE",
    jsonKey: "source",
    conv: (s) => Array.isArray(s) ? s : [s]
  },
  // Flags
  {
    callSign: "MAGICAL",
    jsonKey: "wondrous",
    conv: (_w, all) => !!all.wondrous || !!all.reqAttune
  },
  {
    callSign: "VARIANT",
    jsonKey: "bonusWeapon",
    conv: (b) => typeof b === "string" && b.startsWith("+")
  },
  // Weapon
  { callSign: "WEAPON_CATEGORY", jsonKey: "weaponCategory" },
  {
    callSign: "PROPERTIES",
    jsonKey: "property",
    conv: (arr) => Array.isArray(arr) ? arr.map((p) => PROPERTY_MAP[p] || p) : []
  },
  {
    callSign: "DAMAGE",
    jsonKey: "dmg1",
    conv: (d, all) => {
      if (!d) return void 0;
      return all.dmg2 ? `${d} / ${all.dmg2}` : `${d}`;
    }
  },
  {
    callSign: "DAMAGE_TYPES",
    jsonKey: "dmgType",
    conv: (dt) => dt == null ? [] : Array.isArray(dt) ? dt : [dt]
  },
  { callSign: "RANGE", jsonKey: "range" },
  { callSign: "RELOAD", jsonKey: "reload" },
  { callSign: "AMMO_TYPE", jsonKey: "ammoType" },
  // Armor
  { callSign: "AC", jsonKey: "ac" },
  { callSign: "STEALTH_DISADVANTAGE", jsonKey: "stealth" }
];
var BESTIARY_FIELD_DEFS = [
  // Identity
  { callSign: "NAME", jsonKey: "name" },
  { callSign: "SIZE", jsonKey: "size", conv: formatSizeAbbrev },
  { callSign: "TYPE", jsonKey: "type" },
  {
    callSign: "ALIGNMENT",
    jsonKey: "alignment",
    conv: (a) => {
      const raw = Array.isArray(a) ? a.join(" ") : typeof a === "string" ? a : String(a);
      return formatAlignmentAbbrev(raw);
    }
  },
  { callSign: "AC", jsonKey: "ac", conv: (a) => Array.isArray(a) ? a[0].ac : a },
  { callSign: "HP", jsonKey: "hp", conv: (hp) => hp?.average ?? hp },
  // Mobility
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (sp) => {
      if (sp && typeof sp === "object") {
        return Object.entries(sp).filter(([k]) => k !== "canHover").map(([k, v]) => {
          const num = v?.number ?? v;
          return `${k} ${num} ft.`;
        });
      }
      return [`${sp} ft.`];
    }
  },
  // Challenge
  { callSign: "CR", jsonKey: "cr" },
  // Abilities
  { callSign: "STRENGTH", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[0] : arr?.str ?? 0 },
  { callSign: "DEXTERITY", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[1] : arr?.dex ?? 0 },
  { callSign: "CONSTITUTION", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[2] : arr?.con ?? 0 },
  { callSign: "INTELLIGENCE", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[3] : arr?.int ?? 0 },
  { callSign: "WISDOM", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[4] : arr?.wis ?? 0 },
  { callSign: "CHARISMA", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[5] : arr?.cha ?? 0 },
  // Misc
  { callSign: "SAVING_THROWS", jsonKey: "save", conv: (s) => s ? Object.keys(s).map((k) => k.toUpperCase()) : [] },
  { callSign: "SKILLS", jsonKey: "skill", conv: (sk) => sk ? Object.keys(sk).map((k) => k[0].toUpperCase() + k.slice(1)) : [] },
  {
    callSign: "SENSES",
    jsonKey: "senses",
    conv: (sen) => {
      if (Array.isArray(sen)) {
        return sen.map((s) => s.replace(/^\d+\s*/, "").replace(/^./, (c) => c.toUpperCase()));
      } else if (sen && typeof sen === "object") {
        return Object.entries(sen).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)} ${v}`);
      }
      return [];
    }
  },
  { callSign: "LANGUAGES", jsonKey: "languages", conv: (ln) => Array.isArray(ln) ? ln : ln ? [ln] : [] },
  // Source
  {
    callSign: "SOURCE",
    jsonKey: "source",
    conv: (s, all) => {
      const arr = Array.isArray(s) ? s : [s];
      return arr.map((src) => getFullSourceName(src, all._editionId));
    }
  }
];
var CLASS_FIELD_DEFS = [
  { callSign: "NAME", jsonKey: "name" },
  { callSign: "SOURCE", jsonKey: "source" },
  { callSign: "HIT_DICE", jsonKey: "hd" },
  // e.g. "1d12"
  { callSign: "ARMOR_PROFICIENCIES", jsonKey: "armorProfs" },
  { callSign: "WEAPON_PROFICIENCIES", jsonKey: "weaponProfs" },
  { callSign: "TOOL_PROFICIENCIES", jsonKey: "toolProfs" },
  { callSign: "SAVING_THROWS", jsonKey: "save", conv: (s) => s ? Object.keys(s).map((k) => k.toUpperCase()) : [] },
  { callSign: "SKILLS", jsonKey: "skillProf" }
];

// src/parsers/5e-json/spells.ts
var SCHOOL_MAP = {
  A: "Abjuration",
  C: "Conjuration",
  D: "Divination",
  E: "Enchantment",
  V: "Evocation",
  I: "Illusion",
  N: "Necromancy",
  T: "Transmutation"
};
function ordinal(n) {
  const suffix = n === 1 ? "st" : n === 2 ? "nd" : n === 3 ? "rd" : "th";
  return `${n}${suffix}`;
}
function formatRange(range) {
  if (!range) return "";
  if (typeof range === "string") return range;
  if (range.type === "special") return "Special";
  if (range.type === "point" && range.distance) {
    const dist = range.distance;
    if (dist.type === "touch") return "Touch";
    if (dist.type === "self") return "Self";
    if (dist.type === "sight") return "Sight";
    if (dist.amount) return `${dist.amount} ${dist.type}`;
  }
  return "Varies";
}
function formatTime(time) {
  if (!Array.isArray(time)) return "";
  return time.map((t) => `${t.number} ${t.unit}`).join(", ");
}
function formatDuration(duration) {
  if (!Array.isArray(duration)) return "";
  return duration.map((d) => {
    if (d.type === "instant") return "Instantaneous";
    if (d.type === "timed" && d.duration) {
      return `${d.duration.amount} ${d.duration.type}${d.concentration ? " (concentration)" : ""}`;
    }
    if (d.type === "permanent") return "Permanent";
    return "Special";
  }).join(", ");
}
function formatComponents(components) {
  if (!components) return "";
  const out = [];
  if (components.v) out.push("V");
  if (components.s) out.push("S");
  if (components.m) out.push("M");
  return out.join(", ");
}
function parseSpellsFile(json, editionId) {
  if (!json.spell) return [];
  json._editionId = editionId;
  return json.spell.map((spell) => {
    const sources = spell.source ? Array.isArray(spell.source) ? spell.source : [spell.source] : ["unknown"];
    const name = spell.name;
    const school = SCHOOL_MAP[spell.school] ?? spell.school;
    const level = spell.level;
    const range = formatRange(spell.range);
    const castingTime = formatTime(spell.time);
    const duration = formatDuration(spell.duration);
    const formattedSources = sources.map((s) => getFullSourceName(s, editionId));
    const attackType = spell.attackType || "";
    const damageType = spell.damageInflict?.[0] || "Teleportation";
    const ritual = spell.ritual === true;
    const concentration = spell.duration?.some((d) => d.concentration) ?? false;
    const fm = buildFM(spell, SPELL_FIELD_DEFS);
    const yaml = serializeFrontmatter(fm);
    const safeName = name.replace(/\//g, "-");
    const title = `# ${name}`;
    const levelLabel = level === 0 ? `${school} Cantrip` : `${ordinal(level)}-level ${school} Spell`;
    const subtitle = `### *${levelLabel}*${concentration ? " *(Concentration)*" : ""}`;
    const headerLines = [
      title,
      subtitle,
      `**Casting Time:** ${castingTime}`,
      `**Range:** ${range}`,
      `**Components:** ${formatComponents(spell.components)}`,
      `**Duration:** ${duration}`
    ];
    const bodyLines = [
      ...(spell.entries ?? []).map((e) => formatEntry(e)),
      ...(spell.entriesHigherLevel ?? []).map((e) => formatEntry(e))
    ];
    const footerLines = [
      `---`,
      `**Source:** ${formattedSources.join(", ")}`
    ];
    return {
      path: `${safeName}.md`,
      content: [
        `---
${yaml}
---`,
        headerLines.join("\n"),
        ``,
        bodyLines.join("\n\n"),
        ``,
        footerLines.join("\n")
      ].join("\n")
    };
  });
}

// src/parsers/5e-json/species.ts
function slug(name) {
  return name.replace(/[\/:"]/g, "-");
}
var SIZE_MAP2 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var BLOCKED_TRAITS = ["Age", "Size", "Languages", "Creature Type", "Speed"];
function parseSpeciesFile(json, editionId) {
  if (!Array.isArray(json.race)) return [];
  json._editionId = editionId;
  const rawVariants = json.race.filter(
    (r) => !("reprintedAs" in r) && !/\((?:Kaladesh|Zendikar|Amonkhet|Innistrad|Ixalan)\)$/.test(r.name)
  );
  const byName = /* @__PURE__ */ new Map();
  for (const r of rawVariants) {
    const list = byName.get(r.name) ?? [];
    list.push(r);
    byName.set(r.name, list);
  }
  const out = [];
  for (const [name, variants] of byName.entries()) {
    const safeName = slug(name);
    const primary = variants.reduce(
      (best, cur) => Object.keys(cur).length > Object.keys(best).length ? cur : best,
      variants[0]
    );
    const fm = buildFM(primary, SPECIES_FIELD_DEFS);
    const senses = [];
    if (primary.darkvision) senses.push(`Darkvision ${primary.darkvision} ft.`);
    if (primary.blindsight) senses.push(`Blindsight ${primary.blindsight} ft.`);
    if (primary.tremorsense) senses.push(`Tremorsense ${primary.tremorsense} ft.`);
    if (primary.truesight) senses.push(`Truesight ${primary.truesight} ft.`);
    if (senses.length) fm.senses = senses;
    if (Array.isArray(fm.traits)) {
      fm.traits = fm.traits.filter((t) => !BLOCKED_TRAITS.includes(t));
    }
    const yaml = serializeFrontmatter(fm);
    const lines = [];
    lines.push(`# ${name}`);
    lines.push(`## Stats`);
    const size = Array.isArray(primary.size) ? primary.size.map((s) => SIZE_MAP2[s] || s).join("/") : SIZE_MAP2[primary.size] ?? primary.size;
    lines.push(`**Size:** ${size}`);
    const speedVal = typeof primary.speed === "number" ? primary.speed : primary.speed?.walk ?? primary.speed?.base ?? 0;
    lines.push(`**Speed:** ${speedVal} ft. walking`);
    const rawAb = primary.ability;
    if (Array.isArray(rawAb)) {
      const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
      let choose = null;
      for (const obj of rawAb) {
        for (const [key, val] of Object.entries(obj)) {
          if (key === "choose") {
            choose = val;
          } else {
            bonuses[key] += val;
          }
        }
      }
      const parts = Object.entries(bonuses).filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
      if (choose?.count && choose?.from) {
        const opts = choose.from.map((s) => s.toUpperCase());
        parts.push(`CHOOSE ${choose.count} from ${opts.join(", ")}`);
      }
      if (parts.length) lines.push(`**Ability Scores:** ${parts.join(", ")}`);
    }
    const langs = fm["languages"];
    if (langs && Array.isArray(langs) && langs.length) {
      lines.push(`**Languages:** ${langs.join(", ")}`);
    }
    const addIfArray = (label, field) => {
      if (Array.isArray(field) && field.length) {
        const out2 = [];
        let hasChoice = false;
        for (const s of field) {
          if (typeof s === "string") {
            out2.push(s.charAt(0).toUpperCase() + s.slice(1));
          } else if (s.name || s.proficiency) {
            const val = s.name || s.proficiency;
            if (val) out2.push(val.charAt(0).toUpperCase() + val.slice(1));
          } else if (s.choose?.from) {
            hasChoice = true;
            const count = s.choose.count || 1;
            const list = s.choose.from.map((s2) => s2.charAt(0).toUpperCase() + s2.slice(1)).join(", ");
            lines.push(`**${label}:** Choose ${count} from: ${list}`);
          }
        }
        if (hasChoice) out2.push("Choice");
      }
    };
    const rawSkills = primary.skillProficiencies;
    if (Array.isArray(rawSkills) && rawSkills.length) {
      const skillLabels = [];
      for (const entry of rawSkills) {
        if (entry?.choose?.from) {
          const from = entry.choose.from.map((s) => s.charAt(0).toUpperCase() + s.slice(1));
          skillLabels.push(`Choose from: ${from.join(", ")}`);
        } else {
          const val = entry?.proficiency || entry?.name || entry;
          if (typeof val === "string") {
            skillLabels.push(val.charAt(0).toUpperCase() + val.slice(1));
          }
        }
      }
      if (skillLabels.length) lines.push(`**Skill Proficiencies:** ${skillLabels.join("; ")}`);
    }
    const toolProfs = fm[FM_FIELDS.TOOL_PROFICIENCIES];
    const weaponProfs = fm[FM_FIELDS.WEAPON_PROFICIENCIES];
    const armorProfs = fm[FM_FIELDS.ARMOR_PROFICIENCIES];
    if (toolProfs?.length) lines.push(`**Tool Proficiencies:**   ${toolProfs.join(", ")}`);
    if (weaponProfs?.length) lines.push(`**Weapon Proficiencies:** ${weaponProfs.join(", ")}`);
    if (armorProfs?.length) lines.push(`**Armor Proficiencies:**  ${armorProfs.join(", ")}`);
    lines.push(`## Traits`);
    const seen = /* @__PURE__ */ new Set();
    for (const trait of fm.traits || []) {
      lines.push(`##### ${trait}`);
      const entry = primary.entries?.find(
        (e) => typeof e !== "string" && e.name === trait
      );
      if (entry && Array.isArray(entry.entries)) {
        ;
        entry.entries.forEach((sub, idx) => {
          let block;
          if (sub.type === "table") {
            block = renderMarkdownTable(sub);
          } else if (sub.type === "list") {
            block = sub.items.map((item) => {
              if (typeof item === "string") {
                return `- ${replace5eTags(item).trim()}`;
              }
              const label = item.name?.trim() ?? "";
              const entry2 = item.entry ? replace5eTags(item.entry).trim() : "";
              return label || entry2 ? `- ${label}${entry2 ? " " + entry2 : ""}` : "";
            }).filter(Boolean).join("\n");
          } else if (typeof sub === "string") {
            block = replace5eTags(sub).trim();
          }
          if (block && !seen.has(block)) {
            lines.push(block);
            seen.add(block);
            if (entry.entries.length > 1 && idx < entry.entries.length - 1) {
              lines.push("");
            }
          }
        });
      }
    }
    const body = lines.join("\n");
    out.push({
      path: `Species/${safeName}.md`,
      content: `---
${yaml}
---

${body}`
    });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-json/classes.ts
function formatFeatureLink(name) {
  const ignore = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
  if (ignore.some((sub) => name.toLowerCase().includes(sub.toLowerCase()))) {
    return name;
  }
  const anchor = name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
  return `[[#${anchor}]]`;
}
function parseClassFile(json, editionId, fileName) {
  json._editionId = editionId;
  const cls = Array.isArray(json.class) ? json.class[0] : json;
  const className = typeof cls.name === "string" ? cls.name : fileName ? fileName.replace(/^class-/, "").replace(/\.json$/, "") : "Unknown";
  const subclassFiles = [];
  const PROF_BONUS_BY_LEVEL = [
    "+2",
    "+2",
    "+2",
    "+2",
    "+3",
    "+3",
    "+3",
    "+3",
    "+4",
    "+4",
    "+4",
    "+4",
    "+5",
    "+5",
    "+5",
    "+5",
    "+6",
    "+6",
    "+6",
    "+6"
  ];
  const hdNum = cls.hd?.number ?? 1;
  const hdFaces = cls.hd?.faces ?? 6;
  const hdStr = `${hdNum}d${hdFaces}`;
  const hdMax = hdNum * hdFaces;
  const hdAvg = Math.ceil((hdFaces + 1) / 2);
  const baseFM = buildFM(cls, CLASS_FIELD_DEFS);
  const fm = { ...baseFM, hd: hdStr };
  const yaml = serializeFrontmatter(fm);
  const lines = [];
  lines.push(`# ${className}`);
  if (cls.source) lines.push(`**Source:** ${cls.source}`);
  lines.push(``);
  lines.push(`## Hit Points`);
  lines.push(`**Hit Dice:** ${hdStr} per ${className} level`);
  lines.push(`**Hit Points at 1st Level:** ${hdMax} + your Constitution modifier`);
  lines.push(
    `**Hit Points at Higher Levels:** ${hdStr} (or ${hdAvg}) + your Constitution modifier per level after 1st`
  );
  lines.push(`
### Proficiencies`);
  const sp = cls.startingProficiencies ?? {};
  if (Array.isArray(sp.armor) && sp.armor.length) lines.push(`**Armor:** ${sp.armor.join(", ")}`);
  if (Array.isArray(sp.weapons) && sp.weapons.length) lines.push(`**Weapons:** ${sp.weapons.join(", ")}`);
  if (Array.isArray(sp.tools) && sp.tools.length) lines.push(`**Tools:** ${sp.tools.join(", ")}`);
  const saves = Array.isArray(cls.proficiency) ? cls.proficiency.map(
    (k) => ({
      str: "Strength",
      dex: "Dexterity",
      con: "Constitution",
      int: "Intelligence",
      wis: "Wisdom",
      cha: "Charisma"
    })[k] || k.toUpperCase()
  ) : [];
  if (saves.length) lines.push(`**Saving Throws:** ${saves.join(", ")}`);
  const skillChoices = sp.skills ?? [];
  if (skillChoices.length) {
    const skillText = skillChoices.map(
      (s) => s.choose ? `Choose ${s.choose.count} from: ${s.choose.from.map((o) => o.replace(/([A-Z])/g, " $1").trim()).join(", ")}` : s.name ?? s
    ).join("; ");
    lines.push(`**Skills:** ${skillText}`);
  }
  if (Array.isArray(cls.startingEquipment)) {
    lines.push(`
### Equipment`);
    cls.startingEquipment.filter((e) => typeof e === "string").forEach((item) => lines.push(`- ${item}`));
  }
  const progGroups = cls.classTableGroups ?? [];
  const maxLevel = 20;
  lines.push(`
## Class Progression`);
  if (!progGroups.length) {
    lines.push(`*(No class table provided for this class.)*`);
  } else {
    const featuresByLevel2 = {};
    for (const feat of cls.classFeatures ?? []) {
      const raw = typeof feat === "object" && feat.classFeature ? feat.classFeature : String(feat);
      const [name, , , lvlStr] = raw.split("|");
      const lvl = Number(lvlStr ?? 0);
      if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
      featuresByLevel2[lvl].push(name);
    }
    const allLabelsSet = /* @__PURE__ */ new Set();
    const rowMaps = {};
    for (const group of progGroups) {
      const labels = Array.isArray(group.colLabels) ? group.colLabels.map((l) => replace5eTags(l)) : [];
      const rows = Array.isArray(group.rows) ? group.rows : Array.isArray(group.rowsSpellProgression) ? group.rowsSpellProgression : [];
      if (!labels.length || !rows.length) continue;
      for (let lvl = 0; lvl < rows.length; lvl++) {
        const levelNum = lvl + 1;
        if (!rowMaps[levelNum]) rowMaps[levelNum] = {};
        const rowMap = rowMaps[levelNum];
        const cells = rows[lvl];
        for (let i = 0; i < labels.length; i++) {
          const label = labels[i];
          const cell = cells[i];
          allLabelsSet.add(label);
          let val = "";
          if (Array.isArray(cell)) {
            val = cell.join(", ");
          } else if (typeof cell === "object" && cell !== null && "value" in cell) {
            val = String(cell.value);
          } else {
            val = String(cell ?? "");
          }
          rowMap[label] = val;
        }
      }
    }
    const allLabels = Array.from(allLabelsSet);
    const mergedLabels = ["Level", "Proficiency Bonus", "Class Features", ...allLabels];
    const mergedRows = [];
    for (let lvl = 1; lvl <= maxLevel; lvl++) {
      const featureList = (featuresByLevel2[lvl] ?? []).map(formatFeatureLink);
      const rowMap = rowMaps[lvl] ?? {};
      const row = [
        lvl.toString(),
        PROF_BONUS_BY_LEVEL[lvl - 1],
        featureList.join(", ").replace(/\|/g, "&#124;"),
        ...allLabels.map((label) => rowMap[label] ?? "")
      ];
      mergedRows.push(row);
    }
    lines.push(renderMarkdownTable({
      type: "table",
      caption: "",
      colLabels: mergedLabels,
      rows: mergedRows
    }));
  }
  const subs = Array.isArray(json.subclass) ? json.subclass : [];
  const subclassFeatures = Array.isArray(json.subclassFeature) ? json.subclassFeature : json.lookup?.subclassFeature ?? [];
  for (const sc of subs) {
    const subclassName = sc.name;
    const subLines = [];
    const featuresByLevel2 = {};
    const introEntry = subclassFeatures.find(
      (f) => f.name === sc.name && f.level === 3 && f.subclassShortName === sc.shortName && f.subclassSource === sc.source
    );
    if (introEntry?.entries?.length) {
      subLines.push(formatEntry(introEntry.entries));
    }
    for (const feat of subclassFeatures) {
      if (feat.subclassShortName === sc.shortName && feat.subclassSource === sc.source && feat.className === className) {
        const lvl = feat.level ?? 0;
        if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
        featuresByLevel2[lvl].push(feat);
      }
    }
    subLines.push(`# ${subclassName}`);
    subLines.push(`**Parent Class:** [[${className}]]`);
    if (sc.source) subLines.push(`**Source:** ${sc.source}`);
    const progGroups2 = sc.subclassTableGroups ?? [];
    if (progGroups2.length) {
      const allLabelsSet = /* @__PURE__ */ new Set();
      const rowMaps = {};
      for (const group of progGroups2) {
        const labels = (group.colLabels ?? []).map(replace5eTags);
        const rows = group.rows ?? group.rowsSpellProgression ?? [];
        for (let i = 0; i < rows.length; i++) {
          const row = rows[i];
          if (!rowMaps[i + 1]) rowMaps[i + 1] = {};
          row.forEach((cell, j) => {
            const label = labels[j];
            if (!label) return;
            allLabelsSet.add(label);
            rowMaps[i + 1][label] = typeof cell === "object" && "value" in cell ? String(cell.value) : String(cell ?? "");
          });
        }
      }
      const allLabels = Array.from(allLabelsSet);
      const mergedLabels = ["Level", ...allLabels];
      const mergedRows = [];
      for (let lvl = 1; lvl <= 20; lvl++) {
        const row = rowMaps[lvl] ?? {};
        const finalRow = [String(lvl), ...allLabels.map((label) => row[label] ?? "")];
        mergedRows.push(finalRow);
      }
      subLines.push(`## Subclass Progression`);
      subLines.push(renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels: mergedLabels,
        rows: mergedRows
      }));
    }
    for (const lvl of Object.keys(featuresByLevel2).sort((a, b) => +a - +b)) {
      subLines.push(`---`);
      subLines.push(`## Level ${lvl}`);
      for (const feat of featuresByLevel2[+lvl]) {
        subLines.push(`### ${feat.name}`);
        const desc = Array.isArray(feat.entries) ? feat.entries.map(formatEntry).join("\n\n") : formatEntry(feat.entries);
        subLines.push(desc);
      }
    }
    let subclassContent = subLines.join("\n\n");
    subclassContent = subclassContent.replace(/\n{3,}/g, "\n\n");
    subclassFiles.push({
      path: `Classes/${className}/Subclasses/${subclassName}.md`,
      content: subclassContent
    });
  }
  if (subs.length) {
    lines.push(`
## Subclasses`);
    for (const sc of subs) {
      lines.push(`- [[Subclasses/${sc.name.replace(/[\/\\]/g, "-")}]]`);
    }
  }
  const allFeatures = Array.isArray(json.classFeature) ? json.classFeature : json.lookup?.classFeature ?? [];
  const featuresByLevel = {};
  for (const entry of allFeatures) {
    if (entry.className !== className) continue;
    const lvl = entry.level ?? 0;
    if (!featuresByLevel[lvl]) featuresByLevel[lvl] = [];
    featuresByLevel[lvl].push(entry);
  }
  for (const lvl of Object.keys(featuresByLevel).sort((a, b) => +a - +b)) {
    lines.push(`## Level ${lvl}`);
    for (const feat of featuresByLevel[+lvl]) {
      lines.push(`### ${feat.name}`);
      const desc = Array.isArray(feat.entries) ? feat.entries.filter(
        (e) => !(typeof e === "string" && e.trim() === "}") && !(typeof e === "object" && Object.keys(e).length === 0)
      ).map(replace5eTags).join("\n\n") : typeof feat.entries === "string" ? replace5eTags(feat.entries) : "";
      if (desc.trim()) {
        lines.push(desc);
      }
      lines.push("");
    }
    lines.push("---");
  }
  let content = `---
${yaml}
---

${lines.join("\n")}`;
  content = replace5eTags(content);
  content = content.replace(/\n{3,}/g, "\n\n").replace(/\n +\n/g, "\n\n");
  return [
    {
      path: `Classes/${className}/${className}.md`,
      content
    },
    ...subclassFiles
  ];
}

// src/parsers/5e-json/rules.ts
function parseActionsFile(json, editionId) {
  if (!Array.isArray(json.action)) return [];
  const lines = [];
  for (const action of json.action) {
    lines.push(`## ${action.name}`);
    const entries = Array.isArray(action.entries) ? action.entries : [action.entries];
    for (const entry of entries) {
      if (!entry) continue;
      const text = typeof entry === "string" ? entry : Array.isArray(entry) ? entry.join(" ") : "";
      const paragraphs = text.split(/\n{2,}/);
      for (const para of paragraphs) {
        const trimmed = para.trim();
        if (trimmed) {
          lines.push(replace5eTags(trimmed));
          lines.push("");
        }
      }
    }
    lines.push("");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length > 0 && acc[acc.length - 1] === "") {
      return acc;
    }
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Actions.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseConditionsDiseasesFile(json, editionId) {
  const items = [];
  if (Array.isArray(json.condition)) {
    for (const cond of json.condition) items.push(cond);
  }
  if (Array.isArray(json.disease)) {
    for (const dis of json.disease) items.push(dis);
  }
  const lines = [];
  for (const item of items) {
    lines.push(`## ${item.name}`);
    const entries = Array.isArray(item.entries) ? item.entries : [item.entries];
    for (const entry of entries) {
      if (!entry) continue;
      const text = typeof entry === "string" ? entry : Array.isArray(entry) ? entry.join(" ") : "";
      const paragraphs = text.split(/\n{2,}/);
      for (const para of paragraphs) {
        const trimmed = para.trim();
        if (trimmed) {
          lines.push(replace5eTags(trimmed));
          lines.push("");
        }
      }
    }
    lines.push("");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length > 0 && acc[acc.length - 1] === "") {
      return acc;
    }
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Conditions and Diseases.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}

// src/parsers/5e-json/installer.ts
var import_obsidian2 = require("obsidian");
async function listSpellFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/spells`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && item.name.startsWith("spells-") && item.name.endsWith(".json")).map((item) => item.name);
}
async function listBestiaryFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/bestiary`;
  const res = await fetch(url);
  const list = await res.json();
  const CORE_SOURCES = [
    "bestiary-phb.json",
    "bestiary-mm.json",
    "bestiary-dmg.json",
    "bestiary-xge.json",
    "bestiary-vgm.json",
    "bestiary-tce.json",
    "bestiary-egw.json",
    "bestiary-erlw.json",
    "bestiary-mtf.json",
    "bestiary-vrgr.json",
    "bestiary-cos.json",
    "bestiary-oota.json",
    "bestiary-pota.json",
    "bestiary-hotdq.json",
    "bestiary-rot.json",
    "bestiary-skt.json",
    "bestiary-tftyp.json",
    "bestiary-toa.json"
  ];
  return list.filter((item) => item.type === "file" && CORE_SOURCES.includes(item.name)).map((item) => item.name);
}
var ITEM_JSON_FILES = [
  "items-base.json",
  "items.json",
  "objects.json",
  "vehicles.json",
  "decks.json"
];
async function listItemFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && ITEM_JSON_FILES.includes(item.name)).map((item) => item.name);
}
async function listClassFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/class`;
  const res = await fetch(url);
  const listing = await res.json();
  return listing.filter(
    (item) => item.type === "file" && item.name.startsWith("class-") && item.name.endsWith(".json")
  ).map((item) => item.name);
}
async function ensureFolder(app, folderPath) {
  const parts = folderPath.split("/");
  let curr = "";
  for (const p of parts) {
    curr = curr ? `${curr}/${p}` : p;
    try {
      await app.vault.createFolder(curr);
    } catch {
    }
  }
}
async function importEditionData(params) {
  const { app, edition, targetPath } = params;
  const repo = edition.repo ?? "";
  {
    const spellFiles = await listSpellFilesFromGitHub(repo);
    for (const fileName of spellFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/spells/${fileName}`);
        const json = await res.json();
        const files = parseSpellsFile(json, edition.id);
        for (const md of files) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Spells/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import spell ${fileName}:`, e);
      }
    }
  }
  {
    const bestiaryFiles = await listBestiaryFilesFromGitHub(repo);
    for (const fileName of bestiaryFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/bestiary/${fileName}`);
        const json = await res.json();
        const parsed = parseBestiaryFile(json, edition.id);
        for (const md of parsed) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Bestiary/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import bestiary ${fileName}:`, e);
      }
    }
  }
  {
    const itemFiles = await listItemFilesFromGitHub(repo);
    for (const fn of itemFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/${fn}`);
        const json = await res.json();
        const mdFiles = parseItemsFile(json, edition.id);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import items from ${fn}:`, e);
      }
    }
  }
  {
    const res = await fetch(`${edition.sourceUrl}/races.json`);
    const json = await res.json();
    const mdFiles = parseSpeciesFile(json, edition.id);
    for (const md of mdFiles) {
      const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
      await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
      await app.vault.adapter.write(fullPath, md.content);
    }
  }
  {
    const classFiles = await listClassFilesFromGitHub(repo);
    for (const fileName of classFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/class/${fileName}`);
        const json = await res.json();
        const mdFiles = parseClassFile(json, edition.id, fileName);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
          await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
          const existing = app.vault.getAbstractFileByPath(fullPath);
          if (existing instanceof import_obsidian2.TFile) {
            await app.vault.modify(existing, md.content);
          } else {
            await app.vault.create(fullPath, md.content);
          }
        }
      } catch (e) {
        console.warn(`Failed to import class ${fileName}:`, e);
      }
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/actions.json`);
      const json = await res.json();
      const mdFiles = parseActionsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import actions.json:", e);
    }
  }
  {
    try {
      const res = await fetch(
        `${edition.sourceUrl}/conditionsdiseases.json`
      );
      const json = await res.json();
      const mdFiles = parseConditionsDiseasesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import conditionsdiseases.json:", e);
    }
  }
}

// src/rulesetInstaller.ts
async function importRulesetData(params) {
  const { app, editionKey, targetPath } = params;
  const edition = AVAILABLE_EDITIONS.find((e) => e.id === editionKey);
  if (!edition) return;
  if (!edition.parser) {
    console.warn("No parser defined for:", editionKey);
    return;
  }
  let installerModule;
  switch (edition.parser) {
    case "5e-json":
      installerModule = installer_exports;
      break;
    // case "other-parser":
    //   installerModule = anotherInstaller;
    //   break;
    default:
      throw new Error(`Unknown parser: ${edition.parser}`);
  }
  await installerModule.importEditionData({ app, edition, targetPath });
}

// src/firstinstallconfirm.ts
var ConfirmFreshInstallModal = class extends import_obsidian3.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    this.contentEl.empty();
    this.titleEl.setText("\u26A0\uFE0F Warning: Fresh Vault Recommended");
    this.contentEl.createEl("div", {
      text: "The full VVunderlore install is intended for a fresh, empty Obsidian vault. If you install in a vault that already has files, any file whose path matches a VVunderlore Toolkit file will be overwritten.\n\nAlso things could just get messy.\n\nMake a perception check and proceed with caution!"
    }).style.cssText = `
        white-space: pre-wrap;
        margin-bottom: 1em;
        line-height: 1.4em;
      `;
    const buttonRow = this.contentEl.createEl("div");
    buttonRow.style.cssText = `
      display: flex;
      justify-content: flex-end;
      gap: 0.5em;
    `;
    new import_obsidian3.ButtonComponent(buttonRow).setButtonText("Oh god, cancel!").onClick(() => {
      this.close();
    });
    new import_obsidian3.ButtonComponent(buttonRow).setButtonText("Install!!").setCta().onClick(async () => {
      this.close();
      const opts = {
        compendium: this.plugin.settings.rulesetCompendium,
        references: [...this.plugin.settings.rulesetReference]
      };
      new import_obsidian3.Notice("\u23F3 Installing toolkit\u2026");
      const compendium = this.plugin.settings.rulesetCompendium;
      const references = [...this.plugin.settings.rulesetReference];
      try {
        await this.plugin.installFullToolkit({ compendium, references });
        if (compendium) {
          await importRulesetData({
            app: this.app,
            editionKey: compendium,
            targetPath: "Compendium"
          });
        }
      } catch (err) {
        console.error("\u274C installToolkit() failed:", err);
        new import_obsidian3.Notice("\u274C Toolkit installation failed. See console.");
      }
      this.plugin.settings.needsInstall = false;
      await this.plugin.saveSettings();
      this.plugin.settingsTab.display();
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/customInstallModal.ts
var import_obsidian4 = require("obsidian");
var InstallingModal = class extends import_obsidian4.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.contentEl.empty();
    this.contentEl.createDiv({ text: "Installing\u2026", cls: "mod-quiet" }).style.cssText = "font-style: italic; color: var(--text-muted); text-align: center; padding: 1em;";
  }
  onClose() {
    this.contentEl.empty();
  }
};
function showCustomInstallModal(app, plugin) {
  const fullPathToKey = {};
  for (const f of plugin.manifestCache.folders) {
    fullPathToKey[f.path] = f.key;
  }
  for (const f of plugin.manifestCache.files) {
    fullPathToKey[f.path] = f.key;
  }
  const root = { name: "", fullPath: "", isFolder: true, children: {} };
  function ensureFolderNode(segments) {
    let cursor = root;
    let builtSoFar = "";
    for (const seg of segments) {
      builtSoFar = builtSoFar ? `${builtSoFar}/${seg}` : seg;
      if (!cursor.children[seg]) {
        cursor.children[seg] = {
          name: seg,
          fullPath: builtSoFar,
          isFolder: true,
          children: {}
        };
      }
      cursor = cursor.children[seg];
    }
    return cursor;
  }
  for (const folderEntry of plugin.manifestCache.folders) {
    const segments = folderEntry.path.split("/");
    ensureFolderNode(segments);
  }
  for (const fileEntry of plugin.manifestCache.files) {
    const segments = fileEntry.path.split("/");
    const fileName = segments.pop();
    const parentNode = segments.length ? ensureFolderNode(segments) : root;
    parentNode.children[fileName] = {
      name: fileName,
      fullPath: fileEntry.path,
      isFolder: false,
      children: {}
    };
  }
  class CustomInstallModal extends import_obsidian4.Modal {
    constructor(app2) {
      super(app2);
      this.checkboxMap = {};
      // <div> that holds “dependency console”
      this.currentBatchLines = [];
    }
    onOpen() {
      this.contentEl.empty();
      this.titleEl.setText("Custom Install");
      const descriptionEl = this.contentEl.createDiv();
      descriptionEl.textContent = "All checked items will be installed. Dependencies will be managed automatically.";
      descriptionEl.style.cssText = `
        font-size: 0.9em;
        color: var(--text-muted);
        margin-top: 0.25em;
        margin-bottom: 0.75em;
      `;
      const optionsBox = this.contentEl.createDiv();
      Object.assign(optionsBox.style, {
        maxHeight: "480px",
        // Enough space for checkboxes + tree
        overflowY: "auto",
        // Everything inside optionsBox will scroll
        margin: "0.5em 0",
        border: "1px solid var(--divider-color)",
        borderRadius: "4px",
        padding: "0.5em"
      });
      const checkboxSection = optionsBox.createDiv();
      Object.assign(checkboxSection.style, {
        display: "flex",
        flexDirection: "column",
        gap: "0.5em",
        marginBottom: "0.75em"
      });
      const pluginRow = checkboxSection.createDiv();
      pluginRow.style.display = "flex";
      pluginRow.style.alignItems = "center";
      this.pluginCheckbox = pluginRow.createEl("input", { type: "checkbox" });
      this.pluginCheckbox.checked = true;
      this.pluginCheckbox.id = "vvunderlore-checkbox-plugins";
      this.pluginCheckbox.style.marginRight = "0.5em";
      pluginRow.createEl("label", {
        text: "Community Plugins",
        attr: { for: this.pluginCheckbox.id }
      });
      const demoRow = checkboxSection.createDiv();
      demoRow.style.display = "flex";
      demoRow.style.alignItems = "center";
      this.demoCheckbox = demoRow.createEl("input", { type: "checkbox" });
      this.demoCheckbox.checked = true;
      this.demoCheckbox.id = "vvunderlore-checkbox-demo";
      this.demoCheckbox.style.marginRight = "0.5em";
      demoRow.createEl("label", {
        text: "VVunderlore Demo Files",
        attr: { for: this.demoCheckbox.id }
      });
      const settingsRow = checkboxSection.createDiv();
      settingsRow.style.display = "flex";
      settingsRow.style.alignItems = "center";
      this.settingsCheckbox = settingsRow.createEl("input", { type: "checkbox" });
      this.settingsCheckbox.checked = true;
      this.settingsCheckbox.id = "vvunderlore-checkbox-settings";
      this.settingsCheckbox.style.marginRight = "0.5em";
      settingsRow.createEl("label", {
        text: "Vault Settings (apperance, hotkeys, graph setup, etc.)",
        attr: { for: this.settingsCheckbox.id }
      });
      const divider = optionsBox.createDiv();
      Object.assign(divider.style, {
        borderTop: "1px solid var(--divider-color)",
        margin: "0.5em 0"
      });
      const container = optionsBox.createDiv();
      Object.assign(container.style, {
        // We no longer give this inner div its own scrollbar.
        // Instead, container will expand inside optionsBox, and
        // optionsBox will scroll everything (checkboxes + tree) together.
        margin: "0",
        padding: "0",
        border: "none"
      });
      const INDENT_PX = 16;
      const lookupEntry = (fullPath) => {
        return plugin.manifestCache.folders.find((f) => f.path === fullPath) || plugin.manifestCache.files.find((f) => f.path === fullPath);
      };
      const renderTree = () => {
        container.empty();
        this.checkboxMap = {};
        this.currentBatchLines = [];
        const demoAllowed = this.demoCheckbox.checked;
        const renderNode = (node, parentEl, indent = 0) => {
          if (node.fullPath) {
            const entry = lookupEntry(node.fullPath);
            if (entry && entry.optional && !demoAllowed) {
              return;
            }
          }
          if (node.isFolder) {
            const details = parentEl.createEl("details");
            details.open = true;
            details.style.margin = "4px 0";
            const summary = details.createEl("summary");
            Object.assign(summary.style, {
              display: "flex",
              alignItems: "center",
              marginLeft: `${indent * INDENT_PX}px`,
              cursor: "pointer",
              padding: "2px 6px",
              borderRadius: "4px",
              userSelect: "none"
            });
            summary.addEventListener("mouseenter", () => {
              summary.style.backgroundColor = "var(--background-modifier-hover)";
            });
            summary.addEventListener("mouseleave", () => {
              summary.style.backgroundColor = "transparent";
            });
            const cb = summary.createEl("input", { type: "checkbox" });
            cb.style.marginRight = "0.5em";
            cb.checked = true;
            cb.style.cursor = "pointer";
            this.checkboxMap[node.fullPath] = cb;
            const iconEl = summary.createDiv({ cls: "suggestion-icon" });
            (0, import_obsidian4.setIcon)(iconEl, "folder");
            iconEl.style.marginRight = "0.3em";
            iconEl.style.transform = "scale(0.9)";
            iconEl.style.opacity = "0.75";
            const label = summary.createEl("span", { text: node.name });
            label.style.fontWeight = "600";
            label.style.fontSize = "0.95em";
            cb.onchange = () => {
              this.toggleDescendants(node, cb.checked);
              this.enforceDependencies(node.fullPath, cb.checked);
              this.fadeAllExceptCurrentBatch();
            };
            const childrenContainer = details.createDiv();
            childrenContainer.style.marginTop = "4px";
            for (const childName of Object.keys(node.children).sort()) {
              renderNode(node.children[childName], childrenContainer, indent + 1);
            }
          } else {
            const row = parentEl.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "center",
              marginLeft: `${indent * INDENT_PX}px`,
              padding: "2px 6px",
              borderRadius: "4px",
              marginTop: "2px",
              marginBottom: "2px",
              userSelect: "none"
            });
            row.addEventListener("mouseenter", () => {
              row.style.backgroundColor = "var(--background-modifier-hover)";
            });
            row.addEventListener("mouseleave", () => {
              row.style.backgroundColor = "transparent";
            });
            const cb = row.createEl("input", { type: "checkbox" });
            cb.style.marginRight = "0.5em";
            cb.checked = true;
            cb.style.cursor = "pointer";
            this.checkboxMap[node.fullPath] = cb;
            const iconEl = row.createDiv({ cls: "suggestion-icon" });
            (0, import_obsidian4.setIcon)(iconEl, "document");
            iconEl.style.marginRight = "0.3em";
            iconEl.style.transform = "scale(0.8)";
            iconEl.style.opacity = "0.5";
            const label = row.createEl("label", { text: node.name });
            label.style.fontSize = "0.9em";
            cb.onchange = () => {
              this.enforceDependencies(node.fullPath, cb.checked);
              this.fadeAllExceptCurrentBatch();
            };
          }
        };
        for (const topName of Object.keys(root.children).sort()) {
          renderNode(root.children[topName], container, 0);
        }
      };
      renderTree();
      this.consoleEl = this.contentEl.createDiv({ cls: "custom-console" });
      Object.assign(this.consoleEl.style, {
        height: "140px",
        margin: "0.5em 0",
        padding: "8px",
        backgroundColor: "var(--background-secondary)",
        border: "1px solid var(--divider-color)",
        borderRadius: "4px",
        fontFamily: "monospace",
        fontSize: "0.82em",
        lineHeight: "1.4em",
        color: "var(--text-normal)",
        overflowY: "auto",
        whiteSpace: "pre-wrap"
      });
      const placeholder = this.consoleEl.createDiv({
        text: "> Dependency errors and warnings will appear here\u2026"
      });
      Object.assign(placeholder.style, {
        opacity: "0.4",
        fontStyle: "italic",
        marginBottom: "4px"
      });
      this.pluginCheckbox.onchange = () => {
        const WARNING_CLASS = "vvunderlore-warning";
        if (!this.pluginCheckbox.checked) {
          if (this.consoleEl.children.length === 1 && this.consoleEl.children[0].textContent?.startsWith(
            "> Dependency console"
          )) {
            this.consoleEl.empty();
          }
          const warningLine = this.consoleEl.createDiv({
            text: "WARNING: The VVunderlore Toolkit will not function without all included plugins! You probably want to re-check that one."
          });
          warningLine.addClass(WARNING_CLASS);
          warningLine.style.color = "#FF0000";
          this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
        } else {
          const existingWarnings = this.consoleEl.querySelectorAll(`.${WARNING_CLASS}`);
          existingWarnings.forEach((el) => el.remove());
          if (this.consoleEl.children.length === 0) {
            const ph = this.consoleEl.createDiv({
              text: "> Dependency console output will appear here\u2026"
            });
            Object.assign(ph.style, {
              opacity: "0.4",
              fontStyle: "italic",
              marginBottom: "4px"
            });
          }
          this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
        }
      };
      this.demoCheckbox.onchange = () => {
        renderTree();
      };
      const buttonRow = this.contentEl.createDiv();
      Object.assign(buttonRow.style, {
        display: "flex",
        justifyContent: "space-between",
        // push left vs right
        alignItems: "center",
        paddingTop: "8px",
        borderTop: "1px solid var(--divider-color)",
        marginTop: "8px"
      });
      const resetBtn = buttonRow.createEl("button", { text: "Reset Selection" });
      resetBtn.style.cssText = `
        font-size: 0.9em;
        color: var(--text-normal);
      `;
      resetBtn.onclick = () => {
        const warnings = Array.from(
          this.consoleEl.querySelectorAll(".vvunderlore-warning")
        );
        this.consoleEl.empty();
        warnings.forEach((warningEl) => {
          this.consoleEl.appendChild(warningEl);
        });
        Object.values(this.checkboxMap).forEach((cb) => {
          cb.checked = true;
        });
      };
      const rightGroup = buttonRow.createDiv();
      Object.assign(rightGroup.style, {
        display: "flex",
        gap: "0.5em"
      });
      const installBtn = rightGroup.createEl("button", {
        text: "Install Selected",
        cls: "mod-cta"
      });
      installBtn.onclick = async () => {
        installBtn.setAttribute("disabled", "");
        this.close();
        const installing = new InstallingModal(app);
        installing.open();
        const toInstall = [];
        for (const [fp, checkbox] of Object.entries(this.checkboxMap)) {
          if (checkbox.checked) {
            const isFolder = plugin.manifestCache.folders.some((f) => f.path === fp);
            toInstall.push({ path: fp, isFolder });
          }
        }
        if (this.pluginCheckbox.checked) {
          try {
            const apiUrl = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/.obsidian/plugins?ref=main";
            const resp = await fetch(apiUrl);
            if (resp.ok) {
              const pluginFiles = await resp.json();
              for (const item of pluginFiles) {
                const localPath = `.obsidian/plugins/${item.name}`;
                const existsLocally = await this.app.vault.adapter.exists(localPath);
                if (!existsLocally) {
                  if (item.type === "dir") {
                    toInstall.push({ path: localPath, isFolder: true });
                  } else {
                    toInstall.push({ path: localPath, isFolder: false });
                  }
                }
              }
            }
          } catch (e) {
            console.error("Failed to enumerate .obsidian/plugins from GitHub:", e);
          }
          toInstall.push({ path: ".obsidian/community-plugins.json", isFolder: false });
        }
        if (this.settingsCheckbox.checked) {
          const vaultSettingsPaths = [
            ".obsidian/app.json",
            ".obsidian/appearance.json",
            ".obsidian/graph.json",
            ".obsidian/hotkeys.json"
          ];
          for (const vs of vaultSettingsPaths) {
            toInstall.push({ path: vs, isFolder: false });
          }
        }
        try {
          await plugin.performCustomInstall(toInstall);
        } catch (err) {
          console.error("\u274C performCustomInstall() threw:", err);
          new import_obsidian4.Notice("\u274C Custom install failed\u2014see console");
        } finally {
          installing.close();
        }
      };
      const cancelBtn = rightGroup.createEl("button", { text: "Cancel" });
      cancelBtn.onclick = () => this.close();
    }
    onClose() {
      this.contentEl.empty();
    }
    /** Recursively toggle descendants’ checked‐state without logging each one. */
    toggleDescendants(node, checked) {
      for (const child of Object.values(node.children)) {
        const cb = this.checkboxMap[child.fullPath];
        if (cb) cb.checked = checked;
        if (child.isFolder) {
          this.toggleDescendants(child, checked);
        }
      }
    }
    /**
     * Enforce dependency logic (auto‐check prerequisites, auto‐uncheck dependents).
     * Each time we flip a box “because of a dependency,” we log one line to the console.
     */
    enforceDependencies(changedPath, isChecked) {
      const changedKey = fullPathToKey[changedPath];
      if (!changedKey) return;
      const fullPathToDisplay = {};
      for (const f of plugin.manifestCache.folders) {
        fullPathToDisplay[f.path] = f.displayName ?? f.path.split("/").pop();
      }
      for (const f of plugin.manifestCache.files) {
        fullPathToDisplay[f.path] = f.displayName ?? f.path.split("/").pop();
      }
      const changedName = fullPathToDisplay[changedPath] ?? changedPath.split("/").pop();
      this.currentBatchLines = [];
      if (isChecked) {
        const stack = [changedKey];
        while (stack.length) {
          const cur = stack.pop();
          const deps = plugin.requiresGraph.get(cur) ?? [];
          for (const depKey of deps) {
            const depEntry = plugin.manifestCache.files.find((x) => x.key === depKey) || plugin.manifestCache.folders.find((x) => x.key === depKey);
            if (depEntry) {
              const depPath = depEntry.path;
              const cb = this.checkboxMap[depPath];
              if (cb && !cb.checked) {
                cb.checked = true;
                const depName = fullPathToDisplay[depPath] ?? depPath.split("/").pop();
                const lineEl = this.appendLogLine(
                  depPath,
                  `> ${depName} automatically checked (required by ${changedName})`
                );
                this.currentBatchLines.push(lineEl);
                stack.push(depKey);
              }
            }
          }
        }
      } else {
        const dependentsOf = (targetKey) => Array.from(plugin.requiresGraph.entries()).filter(([, deps]) => deps.includes(targetKey)).map(([k]) => k);
        const stack = [changedKey];
        while (stack.length) {
          const cur = stack.pop();
          for (const childKey of dependentsOf(cur)) {
            const childEntry = plugin.manifestCache.files.find((x) => x.key === childKey) || plugin.manifestCache.folders.find((x) => x.key === childKey);
            if (childEntry) {
              const childPath = childEntry.path;
              const cb = this.checkboxMap[childPath];
              if (cb && cb.checked) {
                cb.checked = false;
                const childName = fullPathToDisplay[childPath] ?? childPath.split("/").pop();
                const lineEl = this.appendLogLine(
                  childPath,
                  `> ${childName} automatically unchecked (depends on ${changedName})`
                );
                this.currentBatchLines.push(lineEl);
                stack.push(childKey);
              }
            }
          }
        }
      }
      this.fadeAllExceptCurrentBatch();
    }
    /**
     * Append one “mono” line plus a tiny undo button. Returns the new <div>.
     */
    appendLogLine(fullPath, text) {
      const line = this.consoleEl.createDiv();
      Object.assign(line.style, {
        display: "flex",
        justifyContent: "space-between",
        alignItems: "center",
        margin: "2px 0",
        opacity: "1.0",
        transition: "opacity 0.2s ease"
      });
      line.createSpan({ text });
      const undoBtn = line.createEl("button", { text: "undo", cls: "mod-small" });
      Object.assign(undoBtn.style, {
        marginLeft: "0.5em",
        fontSize: "0.75em",
        padding: "2px 4px",
        cursor: "pointer"
      });
      undoBtn.onclick = () => {
        const cb = this.checkboxMap[fullPath];
        if (cb) {
          cb.checked = !cb.checked;
          this.enforceDependencies(fullPath, cb.checked);
          this.fadeAllExceptCurrentBatch();
        }
      };
      this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
      return line;
    }
    /** Fade out every console line that is *not* part of currentBatchLines. */
    fadeAllExceptCurrentBatch() {
      const total = this.consoleEl.children.length;
      for (let i = 0; i < total; i++) {
        const child = this.consoleEl.children[i];
        if (this.currentBatchLines.includes(child)) {
          child.style.opacity = "1.0";
        } else {
          child.style.opacity = "0.6";
        }
      }
    }
  }
  new CustomInstallModal(app).open();
}

// src/settings.ts
var path = __toESM(require("path"));
var FilePathSuggester = class extends import_obsidian5.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.paths = [];
    this.currentSuggestions = [];
    this.renderedSuggestions = /* @__PURE__ */ new Map();
    this.inputEl = inputEl;
    const folders = Object.values(app.vault.getAllLoadedFiles()).filter((f) => f instanceof import_obsidian5.TFolder).map((f) => ({ path: f.path, isFolder: true }));
    const files = app.vault.getMarkdownFiles().map((f) => ({ path: f.path, isFolder: false }));
    this.paths = [...folders, ...files];
    this.inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        setTimeout(() => {
          const container = this.containerEl;
          if (!container) return;
          const selectedEl = container.querySelector(".suggestion-item.is-selected");
          if (selectedEl) {
            const selectedPath = this.renderedSuggestions.get(selectedEl);
            if (selectedPath) {
              this.selectSuggestion(selectedPath);
            }
          }
        }, 0);
      }
    });
  }
  getSuggestions(inputStr) {
    const query = inputStr.toLowerCase();
    this.currentSuggestions = this.paths.filter(({ path: path2 }) => path2.toLowerCase().includes(query)).map((p) => p.path);
    return this.currentSuggestions;
  }
  renderSuggestion(path2, el) {
    const isFolder = this.paths.find((p) => p.path === path2)?.isFolder;
    el.addClass("mod-complex");
    const iconEl = el.createDiv({ cls: "suggestion-icon" });
    (0, import_obsidian5.setIcon)(iconEl, isFolder ? "folder" : "document");
    const name = path2.split("/").pop();
    const displayName = isFolder ? name : name.replace(/\.md$/, "");
    el.createDiv({ text: displayName, cls: "suggestion-title" });
    const parentPath = path2.split("/").slice(0, -1).join("/");
    el.createDiv({ text: parentPath, cls: "search-suggest-info-text" });
    el.addEventListener("click", (e) => {
      e.stopPropagation();
      this.selectSuggestion(path2);
    });
    this.renderedSuggestions.set(el, path2);
  }
  selectSuggestion(path2) {
    this.inputEl.value = path2;
    this.inputEl.dispatchEvent(new Event("input"));
    this.close();
  }
};
var MarkdownPreviewModal = class extends import_obsidian5.Modal {
  constructor(app, content) {
    super(app);
    this.content = content;
  }
  onOpen() {
    this.contentEl.addEventListener("click", (e) => e.stopPropagation());
    this.contentEl.empty();
    this.contentEl.createEl("h2", { text: "Toolkit Changelog" });
    const md = this.contentEl.createDiv();
    const dummyComponent = new class extends import_obsidian5.Component {
    }();
    import_obsidian5.MarkdownRenderer.renderMarkdown(this.content, md, "/", dummyComponent);
  }
  onClose() {
    this.contentEl.empty();
  }
};
var ToolkitSettingsTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.versionValueEl = null;
    this.forceWarningEl = null;
    this.plugin = plugin;
  }
  renderHeader(root) {
    const header = root.createDiv();
    header.style.display = "flex";
    header.style.justifyContent = "space-between";
    header.style.alignItems = "center";
    header.style.borderBottom = "1px solid var(--divider-color)";
    header.style.marginBottom = "2em";
    header.style.paddingBottom = "0.5em";
    header.createEl("h3", { text: "VVunderlore Toolkit Settings" });
    const headerBtns = header.createDiv();
    headerBtns.style.display = "flex";
    headerBtns.style.gap = "0.5em";
    const docsBtn = headerBtns.createEl("button", { text: "Docs" });
    docsBtn.onclick = () => window.open("http://vvunderlore.com", "_blank");
    const githubBtn = headerBtns.createEl("button", { text: "GitHub" });
    githubBtn.onclick = () => window.open("https://github.com/slamwise0001/VVunderlore-Toolkit-Full", "_blank");
    const kofiBtn = headerBtns.createEl("button", {
      text: "\u2615 Ko-fi",
      cls: "mod-cta"
    });
    kofiBtn.style.backgroundColor = "#ff5900";
    kofiBtn.style.color = "white";
    kofiBtn.onclick = () => window.open("https://ko-fi.com/vvunderlore", "_blank");
  }
  renderFirstRunCard(root) {
    if (this.plugin.settings.needsInstall) {
      this.plugin.settings.rulesetCompendium = "";
      this.plugin.settings.rulesetReference = [];
    }
    const card = root.createEl("div", { cls: "vvunderlore-first-run" });
    Object.assign(card.style, {
      display: "flex",
      flexDirection: "column",
      alignItems: "center",
      textAlign: "center",
      /* 
      	Push the card a bit down from the top of the settings pane.
      	You can adjust "2em" to move it higher or lower.
      */
      marginTop: "2em",
      /* Optional: add some padding so it doesn't hug the edges */
      padding: "1em",
      border: "2px solid var(--divider-color)",
      borderRadius: "18px",
      /* (optional) round the corners slightly */
      backgroundColor: "var(--background-primary)"
      /* (optional) white/gray background */
    });
    const title = card.createEl("h2", {
      text: "\u{1F3F0} Welcome to VVunderlore",
      cls: "vv-card-title"
    });
    title.style.marginBottom = "0.5em";
    const desc = card.createEl("p", {
      text: "Get started by installing the default toolkit\u2014\nor choose individual pieces to suit your vault.",
      cls: "vv-card-desc"
    });
    desc.style.marginBottom = "1.25em";
    const plugin = this.plugin;
    const grid = card.createDiv();
    Object.assign(grid.style, {
      display: "grid",
      gridTemplateColumns: "max-content max-content",
      columnGap: "1rem",
      rowGap: "0.25rem",
      justifyContent: "center",
      justifyItems: "center",
      marginBottom: "1rem"
    });
    const labelRs = grid.createEl("div", { text: "Ruleset" });
    labelRs.style.fontWeight = "bold";
    const labelRef = grid.createEl("div", { text: "Reference (optional)" });
    labelRef.style.fontWeight = "bold";
    const rsCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const refCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const summaryBar = grid.createDiv();
    Object.assign(summaryBar.style, {
      gridColumn: "1 / span 2",
      display: "flex",
      alignItems: "center",
      flexWrap: "wrap",
      gap: "0.5rem",
      fontSize: "0.85em",
      color: "var(--text-muted)",
      fontStyle: "italic",
      marginTop: "0.25rem",
      marginBottom: "1rem"
    });
    const rulesetSpan = summaryBar.createSpan({
      text: `Ruleset: ${plugin.settings.rulesetCompendium ? `D&D 5E (${plugin.settings.rulesetCompendium})` : ""}`
    });
    rulesetSpan.style.fontWeight = "bold";
    summaryBar.createSpan({ text: "References:" });
    const chipsWrapper = summaryBar.createDiv();
    Object.assign(chipsWrapper.style, { display: "flex", gap: "4px" });
    function addChip(id) {
      const ed = AVAILABLE_EDITIONS.find((e) => e.id === id);
      const chip = chipsWrapper.createDiv({
        attr: {
          style: "background: var(--interactive-accent); color: white; padding:2px 6px; border-radius:4px; display:inline-flex; align-items:center; gap:4px;"
        }
      });
      chip.createSpan({ text: ed.label });
      const rem = chip.createSpan({
        text: "\xD7",
        attr: { style: "cursor:pointer; margin-left:4px;" }
      });
      rem.onclick = async () => {
        plugin.settings.rulesetReference = plugin.settings.rulesetReference.filter((x) => x !== id);
        await plugin.saveSettings();
        chip.remove();
        updateInstallButtons();
      };
    }
    ;
    plugin.settings.rulesetReference.forEach((e) => addChip(e));
    const rsDropdown = new import_obsidian5.DropdownComponent(rsCell);
    rsDropdown.addOption("", "Select edition\u2026");
    AVAILABLE_EDITIONS.forEach((ed) => {
      rsDropdown.addOption(ed.id, ed.label);
    });
    rsDropdown.setValue(this.plugin.settings.rulesetCompendium).onChange(async (val) => {
      this.plugin.settings.rulesetCompendium = val;
      await this.plugin.saveSettings();
      const chosen = AVAILABLE_EDITIONS.find((e) => e.id === val);
      rulesetSpan.textContent = chosen ? chosen.label : "";
      chipsWrapper.empty();
      updateInstallButtons();
    });
    const searchWrapperEl = refCell.createDiv({ attr: { style: "text-align:center;" } });
    const searchComp = new import_obsidian5.SearchComponent(searchWrapperEl);
    searchComp.setPlaceholder("Add reference rules\u2026");
    const suggestionInputEl = searchComp.inputEl;
    new class extends import_obsidian5.AbstractInputSuggest {
      constructor(app, inputEl) {
        super(app, inputEl);
      }
      // 1) Propose edition IDs (minus the one they picked as the main ruleset)
      getSuggestions(input) {
        return AVAILABLE_EDITIONS.filter((ed) => ed.id !== plugin.settings.rulesetCompendium).filter((ed) => ed.label.toLowerCase().includes(input.toLowerCase())).map((ed) => ed.id);
      }
      // 2) Render the human-readable label
      renderSuggestion(item, el) {
        const ed = AVAILABLE_EDITIONS.find((e) => e.id === item);
        el.createDiv({ text: ed.label });
      }
      // 3) When they pick one, store its ID and add a chip
      selectSuggestion(item) {
        if (!plugin.settings.rulesetReference.includes(item)) {
          plugin.settings.rulesetReference.push(item);
          plugin.saveSettings();
          addChip(item);
        }
        this.close();
        suggestionInputEl.value = "";
        updateInstallButtons();
      }
    }(this.app, suggestionInputEl);
    const btnRow1 = card.createEl("div", { cls: "vv-button-row" });
    Object.assign(btnRow1.style, {
      display: "flex",
      gap: "0.75em",
      justifyContent: "center",
      marginBottom: "1.5em"
    });
    const installBtn1 = btnRow1.createEl("button", {
      text: "Install Toolkit",
      cls: "mod-cta"
    });
    installBtn1.onClickEvent(
      () => new ConfirmFreshInstallModal(this.app, this.plugin).open()
    );
    const customBtn1 = btnRow1.createEl("button", {
      text: "Custom Install",
      cls: "mod-cta"
    });
    Object.assign(customBtn1.style, {
      background: "none",
      border: "1px solid var(--interactive-accent)",
      color: "var(--text-normal)"
    });
    customBtn1.onClickEvent(() => showCustomInstallModal(this.app, this.plugin));
    const updateInstallButtons = () => {
      const hasRuleset = Boolean(this.plugin.settings.rulesetCompendium);
      installBtn1.toggleAttribute("disabled", !hasRuleset);
      customBtn1.toggleAttribute("disabled", !hasRuleset);
    };
    updateInstallButtons();
    const skipPara = card.createEl("p", { cls: "vv-skip-link" });
    Object.assign(skipPara.style, {
      textAlign: "center",
      marginTop: "0.25em"
    });
    skipPara.createEl("a", {
      text: "Already have the Toolkit? Show me the settings \u2192"
    }).onClickEvent(async () => {
      const markerPath = ".vvunderlore_installed";
      try {
        if (!await this.app.vault.adapter.exists(markerPath)) {
          await this.app.vault.create(markerPath, "");
        }
      } catch (e) {
        console.error("\u274C Failed to create marker file:", e);
      }
      this.plugin.settings.needsInstall = false;
      await this.plugin.saveSettings();
      this.display();
    });
  }
  display() {
    console.log("\u{1F527} display() called, needsInstall =", this.plugin.settings.needsInstall);
    const { containerEl } = this;
    const savedScrollTop = containerEl.scrollTop;
    containerEl.empty();
    this.renderHeader(containerEl);
    if (this.plugin.settings.needsInstall) {
      console.log("\u{1F9EA} Showing first-run card");
      this.renderFirstRunCard(containerEl);
      containerEl.scrollTop = savedScrollTop;
      return;
    }
    ;
    (async () => {
      const versionRow = containerEl.createDiv();
      versionRow.style.marginBottom = "1em";
      versionRow.style.display = "flex";
      versionRow.style.justifyContent = "space-between";
      versionRow.style.alignItems = "flex-start";
      versionRow.style.gap = "2em";
      versionRow.style.flexWrap = "wrap";
      versionRow.style.borderBottom = "1px solid var(--divider-color)";
      const versionInfo = versionRow.createDiv();
      versionInfo.style.display = "flex";
      versionInfo.style.flexDirection = "column";
      versionInfo.style.gap = "0.25em";
      let installed = "Not installed";
      try {
        const verContent = await this.app.vault.adapter.read(".version.json");
        const json = JSON.parse(verContent);
        installed = json.version ?? "Not installed";
      } catch (err) {
        console.warn("Could not read .version.json from vault:", err);
      }
      const latest = this.plugin.settings.latestToolkitVersion ?? "Could not fetch";
      const isMatch = installed === latest;
      const vaultRow = versionInfo.createDiv();
      vaultRow.appendText("Vault Toolkit Version: ");
      this.versionValueEl = vaultRow.createSpan();
      this.versionValueEl.textContent = installed;
      this.versionValueEl.style.fontWeight = "bold";
      this.versionValueEl.style.color = isMatch ? "var(--text-success)" : "var(--text-error)";
      const latestRow = versionInfo.createEl("div", { text: "Latest Official Version: " });
      latestRow.createSpan({
        text: latest,
        attr: { style: "font-weight: bold; color: var(--text-success);" }
      });
      const versionControls = versionRow.createDiv();
      versionControls.style.display = "flex";
      versionControls.style.flexDirection = "column";
      versionControls.style.alignItems = "flex-end";
      versionControls.style.gap = "0.5em";
      const buttonRow = versionControls.createDiv();
      buttonRow.style.display = "flex";
      buttonRow.style.gap = "0.5em";
      const checkBtn = buttonRow.createEl("button", {
        text: installed !== latest ? "Preview Update" : "Check for Updates",
        cls: "mod-cta"
      });
      checkBtn.addEventListener("click", async () => {
        if (installed !== latest) {
          this.plugin.previewUpdatesModal();
        } else {
          await this.plugin.checkForUpdates();
        }
      });
      const changelogBtn = buttonRow.createEl("button", { text: "\u{1F4D6} View Changelog" });
      changelogBtn.addEventListener("click", () => {
        new MarkdownPreviewModal(this.app, this.plugin.changelog).open();
      });
      if (this.plugin.settings.lastChecked) {
        const lastChecked = versionControls.createDiv();
        lastChecked.style.fontSize = "11px";
        lastChecked.style.color = "var(--text-muted)";
        lastChecked.textContent = `Last checked: ${new Date(this.plugin.settings.lastChecked).toLocaleString()}`;
      }
      const fixDetails = containerEl.createEl("details", { cls: "vk-section" });
      const fixHeader = fixDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(fixHeader.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const fixHeaderRow = fixHeader.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const fixTitleBlock = fixHeaderRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      fixTitleBlock.createEl("h5", { text: "Fix Your Vault" });
      fixTitleBlock.createEl("div", {
        text: "Fix and broken, deleted, or misplaced files in your toolkit.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const fixToggleIcon = fixHeaderRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(fixToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        // Rotate around its own center
        userSelect: "none",
        transform: fixDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      fixDetails.ontoggle = () => {
        fixToggleIcon.style.transform = fixDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const fixBody = fixDetails.createDiv({ cls: "vk-section-body" });
      fixBody.style.paddingLeft = "1em";
      const fixButtonRow = fixBody.createDiv();
      fixButtonRow.style.display = "flex";
      fixButtonRow.style.justifyContent = "space-between";
      fixButtonRow.style.alignItems = "center";
      fixButtonRow.style.marginTop = "0.5em";
      const warningContainer = fixButtonRow.createDiv();
      this.forceWarningEl = warningContainer;
      let installedVersionStr = "";
      try {
        const versionFile = await this.plugin.app.vault.adapter.read(".version.json");
        const parsed = JSON.parse(versionFile);
        installedVersionStr = (parsed.version ?? "").trim();
      } catch {
        installedVersionStr = "";
      }
      const latestVersionStr = (this.plugin.settings.latestToolkitVersion ?? "").trim();
      console.log("\u{1F9EA} Comparing versions:", installedVersionStr, latestVersionStr);
      if (installedVersionStr && latestVersionStr && installedVersionStr !== latestVersionStr) {
        const warn = warningContainer.createEl("div", {
          text: `\u26A0\uFE0F New version available (${installedVersionStr} \u2192 ${latestVersionStr}) \u2014 use regular update instead`
        });
        warn.style.fontSize = "0.85em";
        warn.style.color = "var(--text-muted)";
        warn.style.fontStyle = "italic";
        warn.setAttr(
          "title",
          "Force updating while a new version is available may skip important changes."
        );
      }
      const buttonGroup = fixButtonRow.createDiv();
      buttonGroup.style.display = "flex";
      buttonGroup.style.gap = "0.5em";
      buttonGroup.createEl("button", {
        text: "Force Update Vault",
        cls: "mod-cta"
      }).onclick = async () => {
        await this.plugin.forceUpdatePreviewAndConfirm();
      };
      buttonGroup.createEl("button", {
        text: "Undo Update"
      }).onclick = async () => {
        await this.plugin.undoForceUpdate();
      };
      const fixTimestampRow = fixBody.createDiv();
      Object.assign(fixTimestampRow.style, {
        textAlign: "right",
        fontSize: "11px",
        color: "var(--text-muted)",
        marginTop: "0.25em"
      });
      fixTimestampRow.textContent = `Last forced: ${this.plugin.settings.lastForceUpdate ? new Date(this.plugin.settings.lastForceUpdate).toLocaleString() : "Not forced yet"}`;
      const backupDetails = containerEl.createEl("details", { cls: "vk-section" });
      const backupSummary = backupDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(backupSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const backupTitleRow = backupSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const titleBlock = backupTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      titleBlock.createEl("h5", { text: "Vault Backups" });
      titleBlock.createEl("div", {
        text: "The Toolkit will back up your vault automatically before updates. You can also back up manually anytime.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const backupVvIcon = backupTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(backupVvIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: backupDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      backupDetails.ontoggle = () => {
        backupVvIcon.style.transform = backupDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const backupBody = backupDetails.createDiv({ cls: "vk-section-body" });
      backupBody.style.paddingLeft = "1em";
      new import_obsidian5.Setting(backupBody).setName("Auto-Backup Before Update").setDesc("Create a full .zip of the vault before applying version updates. Force updates will only back up the files that will be modified or removed.").addToggle(
        (t) => t.setValue(this.plugin.settings.autoBackupBeforeUpdate).onChange(async (v) => {
          this.plugin.settings.autoBackupBeforeUpdate = v;
          await this.plugin.saveSettings();
        })
      );
      new import_obsidian5.Setting(backupBody).setName("Manual Backup").setDesc("Immediately create a zip backup of your vault").addButton(
        (b) => b.setButtonText("Backup Vault Now").setCta().onClick(async () => {
          const path2 = await this.plugin.backupManager.backupVaultToZip("manual");
          new import_obsidian5.Notice(`Backup created: ${path2}`);
        })
      );
      new import_obsidian5.Setting(backupBody).setName("Open Backups Folder").setDesc("Open the backups folder on disk. MacOS: Cant see it? Hit Shift+Cmd+(period).").addButton(
        (b) => b.setButtonText("Open Folder").onClick(async () => {
          try {
            const vaultBasePath = this.plugin.app.vault.adapter.getBasePath();
            const backupFolderPath = path.join(
              vaultBasePath,
              ".vault-backups"
            );
            const { shell } = window.require("electron");
            const result = await shell.openPath(backupFolderPath);
            if (typeof result === "string" && result.length > 0) {
              console.error("\u274C shell.openPath error:", result);
              new import_obsidian5.Notice("Could not open backups folder. See console.");
            }
          } catch (err) {
            console.error("\u274C Could not open backups folder:", err);
            new import_obsidian5.Notice("Could not open backups folder. See console.");
          }
        })
      );
      backupBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin-top: 1.5em;"
        }
      });
      const customizationDetails = containerEl.createEl("details", { cls: "vk-section" });
      const customizationSummary = customizationDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(customizationSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "flex-start",
        padding: "0.5em 0",
        cursor: "pointer"
      });
      const titleRow = customizationSummary.createDiv({
        attr: {
          style: `
			display: flex;
			width: 100%;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const customizationTitleBlock = titleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      const h5 = customizationTitleBlock.createEl("h5");
      h5.appendText("Custom File Management ");
      customizationTitleBlock.createEl("div", {
        text: "Skip updates on certain files or remap relocated Toolkit files so they can update.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const customVvIcon = titleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(customVvIcon.style, {
        fontWeight: "bold",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: customizationDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      customizationDetails.ontoggle = () => {
        customVvIcon.style.transform = customizationDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const customizationBodyWrapper = customizationDetails.createDiv({
        attr: { style: "padding-left: 1em; padding-right: 1em;" }
      });
      const customizationBody = customizationBodyWrapper.createDiv({ cls: "vk-section-body" });
      const skipSection = customizationBody.createDiv();
      const settingItem = skipSection.createDiv({ cls: "setting-item" });
      const info = settingItem.createDiv({ cls: "setting-item-info" });
      info.createDiv({ text: "Skip Toolkit Items", cls: "setting-item-name" });
      info.createDiv({
        text: "Files listed here will be ignored during toolkit updates.",
        cls: "setting-item-description"
      });
      const control = settingItem.createDiv({ cls: "setting-item-control" });
      const dropdown = new import_obsidian5.DropdownComponent(control);
      dropdown.selectEl.style.minWidth = "220px";
      dropdown.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, f.displayName ?? f.path.split("/").pop()));
      this.plugin.manifestCache.folders.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)"));
      new import_obsidian5.ButtonComponent(control).setButtonText("Add").setCta().onClick(async () => {
        const key = dropdown.getValue();
        if (!key) return new import_obsidian5.Notice("Pick something to skip.");
        if (!this.plugin.settings.customPaths.some((c) => c.manifestKey === key)) {
          this.plugin.settings.customPaths.push({ vaultPath: key, manifestKey: key, doUpdate: false });
          await this.plugin.saveSettings();
          renderSkipTable();
        }
      });
      const skipTableWrapper = skipSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top:0.75em" } });
      const renderSkipTable = () => {
        skipTableWrapper.empty();
        const items = this.plugin.settings.customPaths.filter((c) => !c.doUpdate);
        if (items.length === 0) {
          const emptyMsg = skipTableWrapper.createEl("div", { text: "No items skipped." });
          emptyMsg.style.textAlign = "center";
          emptyMsg.style.opacity = "0.6";
          emptyMsg.style.padding = "0.5em";
          return;
        }
        const table = skipTableWrapper.createEl("table", { cls: "setting-table" });
        const header = table.createTHead().insertRow();
        header.insertCell().textContent = "Skipped Files/Folders";
        const body = table.createTBody();
        items.forEach((entry) => {
          const row = body.insertRow();
          const contentCell = row.insertCell();
          contentCell.colSpan = 1;
          contentCell.style.display = "flex";
          contentCell.style.justifyContent = "space-between";
          contentCell.style.paddingLeft = "4em";
          contentCell.style.alignItems = "center";
          contentCell.style.gap = "1em";
          contentCell.style.fontWeight = "bold";
          contentCell.createSpan({ text: entry.manifestKey });
          const removeLink = contentCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.style.fontSize = "0.8em";
          removeLink.style.color = "var(--text-faint)";
          removeLink.style.textDecoration = "underline";
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderSkipTable();
          };
        });
      };
      renderSkipTable();
      customizationBody.createEl("div", {
        attr: { style: "height: 1em; border-top: 1px solid var(--divider-color); margin: 1em 0;" }
      });
      const remapSection = customizationBody.createDiv();
      const remapSetting = remapSection.createDiv({ cls: "setting-item" });
      const remapInfo = remapSetting.createDiv({ cls: "setting-item-info" });
      remapInfo.createDiv({ text: "Remap File Paths", cls: "setting-item-name" });
      remapInfo.createDiv({
        text: "Remap toolkit files vault paths if you chose to move anything. Moving files without remapping will result in duplicate and/or out-of-date files after update.",
        cls: "setting-item-description"
      });
      const remapControlBlock = remapSection.createDiv({ cls: "vk-inline-add-controls" });
      remapControlBlock.style.flexWrap = "wrap";
      remapControlBlock.style.marginTop = "0.5em";
      let remapDrop;
      let remapInput;
      remapDrop = new import_obsidian5.DropdownComponent(remapControlBlock);
      remapDrop.selectEl.style.minWidth = "220px";
      remapDrop.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.forEach(
        (f) => remapDrop.addOption(f.path, f.displayName ?? f.path.split("/").pop())
      );
      this.plugin.manifestCache.folders.forEach(
        (f) => remapDrop.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)")
      );
      const searchWrapper = remapControlBlock.createDiv();
      const searchComponent = new import_obsidian5.SearchComponent(searchWrapper);
      searchComponent.setPlaceholder("Search vault path\u2026");
      new FilePathSuggester(this.app, searchComponent.inputEl);
      remapInput = searchComponent.inputEl;
      new import_obsidian5.ButtonComponent(remapControlBlock).setButtonText("Add Remap").setCta().onClick(async () => {
        const key = remapDrop.getValue();
        const vp = remapInput.value.trim();
        if (!key || !vp) return new import_obsidian5.Notice("Select an item and enter a vault path.");
        if (!this.app.vault.getAbstractFileByPath(vp)) return new import_obsidian5.Notice("Vault path not found.");
        this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => c.manifestKey !== key);
        this.plugin.settings.customPaths.push({ manifestKey: key, vaultPath: vp, doUpdate: true });
        await this.plugin.saveSettings();
        remapInput.value = "";
        remapDrop.setValue("");
        renderRemapPanel();
      });
      const remapTableWrapper = remapSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top: 0.75em" } });
      const renderRemapPanel = () => {
        remapTableWrapper.empty();
        const toRemap = this.plugin.settings.customPaths.filter((c) => c.doUpdate);
        if (toRemap.length === 0) {
          const emptyMsg = remapTableWrapper.createEl("div", { text: "No custom paths defined." });
          emptyMsg.style.textAlign = "center";
          emptyMsg.style.opacity = "0.6";
          emptyMsg.style.padding = "0.5em";
          return;
        }
        const table = remapTableWrapper.createEl("table", { cls: "setting-table" });
        const head = table.createTHead().insertRow();
        ["Toolit Item", "New Vault Path", ""].forEach((txt) => head.insertCell().textContent = txt);
        const body = table.createTBody();
        toRemap.forEach((entry) => {
          const row = body.insertRow();
          row.insertCell().textContent = entry.manifestKey;
          row.insertCell().textContent = entry.vaultPath;
          const removeCell = row.insertCell();
          const removeLink = removeCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.style.fontSize = "0.8em";
          removeLink.style.color = "var(--text-faint)";
          removeLink.style.textDecoration = "underline";
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderRemapPanel();
          };
        });
      };
      renderRemapPanel();
      customizationBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin: 0.5em 0;"
        }
      });
      const highlightDetails = containerEl.createEl("details", { cls: "vk-section" });
      const highlightSummary = highlightDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(highlightSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const highlightTitleRow = highlightSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const hlTitleBlock = highlightTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      hlTitleBlock.createEl("h5", { text: "File Highlights" });
      hlTitleBlock.createEl("div", {
        text: "Toggle on/off the highlighting of Toolkit-specific files. Also make the highlights cool colors.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const hlToggleIcon = highlightTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(hlToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: highlightDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      highlightDetails.ontoggle = () => {
        hlToggleIcon.style.transform = highlightDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const highlightBody = highlightDetails.createDiv({ cls: "vk-section-body" });
      highlightBody.style.paddingLeft = "1em";
      new import_obsidian5.Setting(highlightBody).setName("Enable File/Folder Highlighting").setDesc("Any file/folder installed by VVunderlore will have this background.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.highlightEnabled).onChange(async (enabled) => {
          this.plugin.settings.highlightEnabled = enabled;
          await this.plugin.saveSettings();
          if (enabled) {
            this.plugin.enableHighlight();
          } else {
            this.plugin.disableHighlight();
          }
          renderHighlightColorPickers();
        });
      });
      const colorPickerWrapper = highlightBody.createDiv();
      const renderHighlightColorPickers = () => {
        colorPickerWrapper.empty();
        if (!this.plugin.settings.highlightEnabled) {
          return;
        }
        new import_obsidian5.Setting(colorPickerWrapper).setName("Light Mode Highlight Color").setDesc("Choose the background color for files/folders in Light mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorLight).onChange(async (newColor) => {
            this.plugin.settings.highlightColorLight = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
        new import_obsidian5.Setting(colorPickerWrapper).setName("Dark Mode Highlight Color").setDesc("Choose the background color for files/folders in Dark mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorDark).onChange(async (newColor) => {
            this.plugin.settings.highlightColorDark = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
      };
      renderHighlightColorPickers();
      renderSkipTable();
      renderRemapPanel();
      const removeDemoSetting = new import_obsidian5.Setting(containerEl);
      removeDemoSetting.settingEl.style.borderTop = "none";
      removeDemoSetting.setName("Remove Demo Files").setDesc("Delete every \u201Coptional\u201D demo file and folder from your vault.").addButton(
        (button) => button.setButtonText("Remove Demo Files").onClick(async () => {
          const optionalFileEntries = this.plugin.manifestCache.files.filter((f) => f.optional);
          const optionalFolderEntries = this.plugin.manifestCache.folders.filter((f) => f.optional);
          const totalCountFiles = optionalFileEntries.length;
          const totalCountFolders = optionalFolderEntries.length;
          const totalCount = totalCountFiles + totalCountFolders;
          if (totalCount === 0) {
            new import_obsidian5.Notice("No \u201Coptional\u201D demo files or folders to remove.");
            return;
          }
          const userConfirmed = await new Promise((resolve) => {
            const confirmModal = new class extends import_obsidian5.Modal {
              constructor(app) {
                super(app);
              }
              onOpen() {
                this.contentEl.empty();
                this.contentEl.createEl("h2", { text: "Confirm Removal" });
                this.contentEl.createEl("p", {
                  text: `This will permanently delete ${totalCountFiles} file(s) and ${totalCountFolders} folder(s). Continue?`
                });
                const btnRow = this.contentEl.createEl("div");
                Object.assign(btnRow.style, {
                  display: "flex",
                  justifyContent: "flex-end",
                  gap: "0.5em",
                  marginTop: "1.5em"
                });
                btnRow.createEl("button", { text: "Cancel" }).onclick = () => {
                  resolve(false);
                  this.close();
                };
                btnRow.createEl("button", { text: "Yes, Remove", cls: "mod-danger" }).onclick = () => {
                  resolve(true);
                  this.close();
                };
              }
              onClose() {
                this.contentEl.empty();
              }
            }(this.app);
            confirmModal.open();
          });
          if (!userConfirmed) {
            return;
          }
          let filesDeleted = 0;
          for (const fileEntry of optionalFileEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === fileEntry.key);
            const vaultPath = mapped?.vaultPath ?? fileEntry.path;
            if (await this.app.vault.adapter.exists(vaultPath)) {
              try {
                await this.app.vault.adapter.remove(vaultPath);
                filesDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional file ${vaultPath}`, err);
              }
            }
          }
          let foldersDeleted = 0;
          for (const folderEntry of optionalFolderEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === folderEntry.key);
            const vaultFolderPath = mapped?.vaultPath ?? folderEntry.path;
            if (await this.app.vault.adapter.exists(vaultFolderPath)) {
              try {
                await this.app.vault.adapter.rmdir(vaultFolderPath, true);
                foldersDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional folder ${vaultFolderPath}`, err);
              }
            }
          }
          this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => {
            const isOptFile = optionalFileEntries.some((f) => f.key === c.manifestKey);
            const isOptFolder = optionalFolderEntries.some((f) => f.key === c.manifestKey);
            return !isOptFile && !isOptFolder;
          });
          await this.plugin.saveSettings();
          new import_obsidian5.Notice(`Deleted ${filesDeleted} file(s) and ${foldersDeleted} folder(s).`);
          this.display();
        })
      );
      const footer = containerEl.createDiv({ cls: "setting-item" });
      Object.assign(footer.style, {
        fontSize: "0.85em",
        color: "var(--text-muted)",
        marginTop: "2em"
      });
      footer.createEl("span", {
        text: `VVunderlore Toolkit Plugin v${this.plugin.manifest.version} \u2022 `
      });
      footer.createEl("a", {
        text: "View on GitHub",
        href: "https://github.com/slamwise0001/vvunderlore-toolkit-plugin",
        attr: { target: "_blank" }
      });
      containerEl.scrollTop = savedScrollTop;
    })();
  }
  async updateVersionDisplay() {
    if (!this.versionValueEl || !this.forceWarningEl) return;
    let installed = "";
    try {
      const ver = await this.plugin.app.vault.adapter.read(".version.json");
      installed = JSON.parse(ver).version ?? "";
    } catch {
    }
    const latest = (this.plugin.settings.latestToolkitVersion ?? "").trim();
    const isMatch = installed === latest;
    this.versionValueEl.textContent = installed || "Not installed";
    this.versionValueEl.style.color = isMatch ? "var(--text-success)" : "var(--text-error)";
    this.forceWarningEl.empty();
    if (installed && latest && installed !== latest) {
      const warn = this.forceWarningEl.createDiv({
        text: `\u26A0\uFE0F New version available (${installed} \u2192 ${latest}) \u2014 use regular update instead`
      });
      warn.style.cssText = `
			font-size: 0.85em;
			color: var(--text-muted);
			font-style: italic;
		  `;
      warn.setAttr("title", "Force updating while a new version is available may skip important changes.");
    }
  }
};

// src/fileCacheManager.ts
var import_crypto = require("crypto");
var ToolkitFileCacheManager = class {
  constructor(vault, initialCache, saveCallback) {
    this.vault = vault;
    this.cache = initialCache || {};
    this.save = saveCallback;
  }
  hashContent(content) {
    return (0, import_crypto.createHash)("sha256").update(content).digest("hex");
  }
  async isUpToDate(vaultPath) {
    const entry = this.cache[vaultPath];
    if (!entry) {
      return false;
    }
    const exists = await this.vault.adapter.exists(vaultPath);
    if (!exists) {
      return false;
    }
    const content = await this.vault.adapter.read(vaultPath);
    const localHash = this.hashContent(content);
    const isSame = localHash === entry.hash;
    return isSame;
  }
  async updateCache(vaultPath, content, githubPath, saveNow = true) {
    this.cache[vaultPath] = {
      hash: this.hashContent(content),
      githubPath
    };
    if (saveNow) await this.save();
  }
  getCache() {
    return this.cache;
  }
  getTrackedFiles() {
    return Object.keys(this.cache);
  }
  getGitHubPath(vaultPath) {
    return this.cache[vaultPath]?.githubPath;
  }
  resetCache() {
    this.cache = {};
  }
  async removeFromCache(vaultPath) {
    delete this.cache[vaultPath];
    await this.save();
  }
};

// src/backup/BackupManager.ts
var import_obsidian6 = require("obsidian");
var import_path = require("path");
var import_fs = require("fs");
var BackupManager = class {
  constructor(vault) {
    this.vault = vault;
  }
  /**
   * Mirror every vault file (excluding .obsidian & backups) into a timestamped folder,
   * then prune to keep only the latest N full snapshots.
   * @param label Optional suffix for the backup folder name
   * @param maxFullBackups Number of full snapshots to retain (default: 5)
   */
  async backupVaultMirror(label, maxFullBackups = 5) {
    const ts = (/* @__PURE__ */ new Date()).toISOString().replace(/[:.]/g, "-");
    const tag = label ? `-${label}` : "";
    const base = (0, import_obsidian6.normalizePath)(`.vault-backups/full/${ts}${tag}`);
    console.log(`[BackupManager] Starting mirror backup: ${base}`);
    await this.ensureFolderExists(base);
    for (const file of this.vault.getFiles()) {
      if (file.path.startsWith(".vault-backups/") || file.path.startsWith(".obsidian/")) {
        continue;
      }
      const content = await this.vault.read(file);
      const target = (0, import_obsidian6.normalizePath)(`${base}/${file.path}`);
      await this.ensureFolderExists((0, import_path.dirname)(target));
      await this.vault.create(target, content);
    }
    console.log("[BackupManager] Mirror backup complete. Pruning old backups...");
    await this.pruneFullBackups(base, maxFullBackups);
    return base;
  }
  /**
   * Legacy alias for mirror-based backups
   */
  async backupVaultToZip(label) {
    return this.backupVaultMirror(label);
  }
  /**
   * Deletes oldest full backup folders, keeping only the most recent `keep` snapshots.
   */
  async pruneFullBackups(currentPath, keep) {
    const root = (0, import_obsidian6.normalizePath)(".vault-backups/full");
    await this.ensureFolderExists(root);
    if (!await this.vault.adapter.exists(root)) {
      return;
    }
    const listing = await this.vault.adapter.list(root);
    const rawFolders = Array.isArray(listing) ? listing : "folders" in listing ? listing.folders : [];
    const folders = rawFolders.map((f) => (0, import_path.basename)(f));
    const sorted = [...folders].sort((a, b) => b.localeCompare(a));
    const adapterAny = this.vault.adapter;
    const fsRoot = adapterAny.basePath ? (0, import_path.join)(adapterAny.basePath, root) : null;
    if (!fsRoot) {
      return;
    }
    for (let i = keep; i < sorted.length; i++) {
      const name = sorted[i];
      const vaultPath = (0, import_obsidian6.normalizePath)(`${root}/${name}`);
      if (vaultPath === currentPath) {
        continue;
      }
      const removePath = (0, import_path.join)(fsRoot, name);
      try {
        await import_fs.promises.rm(removePath, { recursive: true, force: true });
      } catch (e) {
      }
      const af = this.vault.getAbstractFileByPath(vaultPath);
      if (af) {
        await this.vault.delete(af);
      }
    }
  }
  /**
   * Recursively ensures that a directory exists in the vault.
   */
  async ensureFolderExists(folderPath) {
    if (!folderPath || await this.vault.adapter.exists(folderPath)) {
      return;
    }
    const parent = (0, import_path.dirname)(folderPath);
    await this.ensureFolderExists(parent);
    await this.vault.createFolder(folderPath);
  }
};

// src/main.ts
var loadingIcon = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANEAAADRCAYAAABSOlfvAAAACXBIWXMAABcRAAAXEQHKJvM/AAAL5klEQVR4nO3dT6wdZRnH8V9hyguFYltKSgXxFAhoQqUUQiBGuBgxETG6qUFctBpN3NbEuDCR28T4Jy5AjQkLE0t0oSZGdOXC2INKMBrN3YALGzkQIEqUXrFCX5wWF2dMjM7znN73mZl7zu33k5zNPJl33nvP/fVMnvP2nU3C/6lSOiTpYMfDHq5zXul4TMyBar0nMKdGkpY6HnNbx+NhTpy33hMAFh0hAoIIERBEiIAgQgQE0Z1bu6OSHjVqByUdMmoPVSmt9jGhNnXOdw91rXMdIVq7Z+ucx22FKqUl57x9vcwG647bOSCIEAFBhAgIIkRAECECgujODeewpJJV3LdI2m7UDki6qq1QpXSs4Fq0xgsQouGsWK1xT5VSJWmXUf6HpNNGbWmt10IZbueAIEIEBBEiIIgQAUGECAiiO9ehOudlScsdD/s5lXXarJXmkvQHq1Cl9EbBtcbncmucTyIgiBABQYQICCJEQBAhAoIIERC0ab0nsGiqlJYlPdjxsPdIetyo1XXOrW3nZqX2knHeW5zrfdOpvdOpPWwc3yPp40Ztw7e/+SQCgggREESIgCBCBAQRIiCIEAFBG7rF3WzrW7Rhxxy5u2RvBk+V0nVWrc75uHPeAaskaYtRu0HSZ4zahmh/80kEBBEiIIgQAUGECAgiREDQQuyxUKW0TWUPyRpJGnc6mX46mjdJ2mbU9lUpWeet1DmXPH3vtYJzpOmOq20uknSZUXtV9nswcR6MtlrnXLLt8uAWosUdaFV33kKtUjpP9u/N+32ekWRtAnJM0l0F0+m8/e2pUhoZpd2S7jNqz9Q5f8sYb0n2+7ow7W9u54AgQgQEESIgiBABQYQICJqbFveMNvZIZa1qs0XadJpGBWNukt+Fs2pnnHPe5NRWJFlt7JL2tqqU3uaUTzm1S4zjm525nHTGW1VZ+3tS5zxxxh3U3LS4h2539rThSB/6WMX9baf8nFP7nXH8jKTXjdqJOuffntXE/suMv4cjzb7nc4HbOSCIEAFBhAgIIkRAECECggZvcTtty5HsdqfXqi5d4S3nep6RylrjHq+NnaqUrjZqJyXVbYU651ec63nv+8ipWVsdn9Z0tXYbbx4er/3t/R0N3v4evMXtPM6wqI0dWOFd1CbtqTVutrGrlD4qyQqRGb465yeti1UpPebM5YNObWQcP1Xn/BfnvE7NeA8Gb39zOwcEESIgiBABQYQICCJEQFAvLW6n/Sh138YeOWN6JgXn/Oc863oj2R2s0tXYuyVdY9TOyFglXSV7dxNJO53aE07tduP4S5IG687Nm76+JzJbznXOJW31fc6Yg25oUed8VNLRttqM1uvhwtXY75f9SMk+WLv2SNLfjONjLf6e58W4nQOCCBEQRIiAIEIEBBEiIKiXBajOIlOzO1eltFXTp6q1uUXSI0ZtbrabbVr71lzM38lZsN6nyJiWrzi1zxaMN2k6mmvStOgvN8r7m9dajfvYdnludvuRtFXSrUbt+iEnEvC4pF8YtZ+rbL/td8v+Lwhv1Dn3ESTLctvBWZvMyPhKYIYk6Sqj9vs6558Yc1mWv8p+XDAXF7dzQBAhAoIIERBEiIAgQgQEFXfnmi6I5YhzntWuvUz209ZOSvqSUXvGmcd6sLplR1W+2twac8jOnGci/z1fts5z2t9Z0vNG7ZIqJauTu9uaR1+Kvycq+S6oOc+qLWnaBm7zK0n3GrXTdc7WTjNYZ33ssd4E6BajfJ/sf4x72cSE2zkgiBABQYQICCJEQBAhAoLWYwHqknHc20/bexKb9xhHbEwvSzpu1CaSXjBq+512+9HSPbznKUQj55wzdc65+6lgQb2s6Sb6bZ6V/f3SfkkfMGpjFe4Axe0cEESIgCBCBAQRIiCIEAFBbncusFL7Ruc8a5+BVWfMiTMezj2nnNrTkn5m1O6UdGXXk5nV4jY3fJixUvt+Z0wrROOhHxOIxVTnfEpGkKqUnpb9/NirJL2r6/lwOwcEESIgiBABQYQICCJEQFBfC1CtPbVx7lmRvT/5qErJ2n9hpc75cFuhSumQpIPGeRc2rzZXWJOM6CtEW3saFwumznlVxi5HzSYmSwXDjgrP6wW3c0AQIQKCCBEQRIiAIEIEBPXVnbuzp3EByd/X/Kbm1WafpJuN2kNVSqtG7XCd84o1mb5CtLOncQE1u/JM2mrNHvGXGqeOnGG93aa2efPhdg4IIkRAECECgggREESIgKC+unMnexoXmOWM7C2G/+Scd7NmdOEsfYWo7mlc4GxYj0L9p6SXjJr1wISZuJ0DgggREESIgCBCBAQRIiCor+6ctY0r0Lf9kj5p1DZLusCobS+9YF8hsvr0QN+2S9oz5AW5nQOCCBEQRIiAIEIEBBEiIKiv7twPnRqbmKBPX5f0HaN2uez9P74oaW/JBfkkAoIIERBEiIAgQgQEESIgiBABQX21uH/k1L5gHL+t2QK2zbjO2XpkIeZY8zQ865GS4zrnTR1fcqukK43axyQd6vh6fBIBUYQICCJEQBAhAoIIERBEiIAgt8XttR+ddvSs835glHZLuteoXVCltMuovV7nfMK6HjaeKqVlSQ92POzddc7jkhP5JAKCCBEQRIiAIEIEBBEiIIgQAUF9reI21Tl/onUiKV0t6QHjtGsk/dmojSWxwnsd9bFSu0pJkqzznpL0faO2U9JlRu2K5tUpPomAIEIEBBEiIIgQAUGECAiKdOfG5qDTbk0rZ5FflvScUfuXc72Jc73VOucVay5YG+f3PJL9/pT+/i+QtMOobZN0kVHbIukSZ8zOdb1JhKTyFd6F11qS316l/d2RITeSaVbt32OU75B0u1Hb3bzWilXcwHohREAQIQKCCBEQRIiAoL4WoP7SvGD37ehVlbW/PZM650nBeQtvxu9rbBw337cqpW2S9hVMZbuktxu13ZIuNmqbnTEnzavN6lnNqkVfLW7rB5Skk8bxPtqkS7Lb354jdc7LXc5lUXT99UTgPfCcllRbl5R0vlHr5X3ldg4IIkRAECECgggREESIgKC+WtynndrYOO61o1+V9LxRe73O+a9GzWt/uxahNV6ltE/TFc1dGnc83inZq/PP13TVdZtK06feWawPgBckvWjUrL+hkF5a3CVmtEL/KOkho/ZinfOPO57Lssr2eh60NV6ldEzSUpdj9rDKfo+k1s1pNA3JDUZth6RbCy75NUkPG7XVOufi74Ms3M4BQYQICCJEQBAhAoIIERA0+DbCjlck/dqpXW/UdlQp/b3gel47eqJhW+OlJuq+JW0q/Nl2yd6692LZm5F47e2J7NXYxzVtq7exFq2GzFOL+0JNf+Ftbpf0vY4v2Xk7uqfHIHqKN9co4a3wdmRJ1vd4SdO9s9dqrlbZczsHBBEiIIgQAUGECAgiREDQPLW4a0lWq/opSUeM2lslHTJqL0v6jVWrUrLa5nubV5ux0xGzjvdlUnJS00VsNaPr9V3juLflbyXpUqNm7YUgTX+2R43a2DlvcHPT4i41Y/X3cUnfMGonmlebByR9xKjNVXu1ROlmJFVK7zVK75D01ei8/sfC7KPO7RwQRIiAIEIEBBEiIIgQAUHz1OIuNZHd/t4q6X1G7TXZq31vLJlIldIO2auS75G9wPZoyQYnVUqHNH3UY5tH1jpeM+ayU7a6etYcZpnIbmNPCscc3MKHqPnjW26rNe3vTw84nR2SrjVqn9K0FdxmrLI/moOyNyp5rGA8yV+F/lPjuPUPxyyTRf+6QOJ2DggjREAQIQKCCBEQRIiAoIXvzs0wkd3+luwFuHc1r9aa0wb29iCwVjJL0pYqJav+Htmt8Tc7Y3p7dHv7Vdzv1K4zjl/knDPRBmhjexZ+FXepKqVNsn/+ByV9vmDY482rzW2yW8EflvSkUfuy7P+Wca3sZ5d+yDgu+WHvdF9zLdBq7FLczgFBhAgIIkRAECECgggRELTRW9yzWF2qY07Ns1f2IlOvDXxA0h3OmFaLe7MzpteqLuV9XWCZdD2JeXPOtrj7sA57cQ+q60dRbhTczgFBhAgIIkRAECECgggREHSut7i7Nl7vCWB4/wYRBbn198/rpAAAAABJRU5ErkJggg==";
var InstallingModal2 = class extends import_obsidian7.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.contentEl.empty();
    const img = this.contentEl.createEl("img", {
      attr: { src: loadingIcon, alt: "Installing\u2026" }
    });
    Object.assign(img.style, {
      display: "block",
      margin: "1em auto 0.5em",
      width: "100px",
      height: "100px"
    });
    img.animate(
      [
        { transform: "rotate(0deg)" },
        { transform: "rotate(-360deg)" }
      ],
      {
        duration: 1500,
        // one and a half seconds per revolution
        iterations: Infinity,
        easing: "linear"
      }
    );
    const txt = this.contentEl.createDiv({ text: "Installing\u2026", cls: "mod-quiet" });
    txt.style.cssText = "font-style: italic; color: var(--text-muted); text-align: center; padding: 1em;";
  }
  onClose() {
    this.contentEl.empty();
  }
};
var DEFAULT_SETTINGS = {
  installedVersion: "1.0.0",
  customizeUpdates: false,
  updateTargets: {
    tools: true,
    toolsPath: "Tools",
    templates: true,
    templatesPath: "Extras/Templates",
    omninomicon: true,
    omninomiconPath: "Adventures/Omninomicon.md",
    spellbook: true,
    spellbookPath: "Compendium/Spells/_Spellbook.md"
  },
  latestDefaults: void 0,
  pathOverrides: {},
  backupFiles: {},
  backupPath: "",
  autoBackup: false,
  lastBackupTime: "",
  backupError: "",
  customPaths: [],
  autoBackupBeforeUpdate: true,
  needsInstall: true,
  highlightEnabled: false,
  highlightColorLight: "rgb(107, 146, 120)",
  highlightColorDark: "rgb( 50,  70,  50)",
  rulesetCompendium: "",
  rulesetReference: []
};
var VVunderloreToolkitPlugin = class extends import_obsidian7.Plugin {
  constructor() {
    super(...arguments);
    this.manifestCache = { files: [], folders: [] };
    this.changelog = "";
    this.autoCheckInterval = null;
    this.oldPathsByGithub = {};
    this.styleEl = null;
    this.excludedPaths = [
      ".obsidian",
      ".DS_Store",
      ".gitignore",
      ".gitattributes",
      ".github",
      "README.md",
      ".version.json",
      "plugins",
      "Compendium"
    ];
  }
  // ─── HELPERS ────────────────────────────────────────────────────────
  /** Given a GitHub path, return the overridden vault path or the original. */
  resolveVaultPath(githubPath) {
    const custom = this.settings.customPaths.find(
      (c) => c.manifestKey === githubPath || c.manifestKey === this.keyFor(githubPath)
    );
    return custom?.vaultPath ?? githubPath;
  }
  /** Convert “some/folder/file.md” → “some-folder-file” (lowercased, no extension). */
  keyFor(path2) {
    return path2.replace(/[/\\]/g, "-").replace(/\.[^.]+$/, "").toLowerCase();
  }
  isExcluded(path2) {
    return this.excludedPaths.some(
      (ex) => path2 === ex || path2.startsWith(`${ex}/`) || path2.includes(`/${ex}/`) || path2.endsWith(`/${ex}`) || path2.includes(`/${ex}`)
    );
  }
  // ─── CUSTOM INSTALL LOGIC ───────────────────────────────────────────
  async performCustomInstall(toInstall) {
    const allFiles = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian7.TFile).map((f) => f.path);
    const nonMarkerFiles = allFiles.filter((p) => p !== ".vvunderlore_installed");
    if (nonMarkerFiles.length > 0 && this.settings.autoBackupBeforeUpdate) {
      const folder = await this.backupManager.backupVaultMirror("pre-custom-install");
      new import_obsidian7.Notice(`Backup before custom\u2010install created at: ${folder}`);
    }
    for (const entry of toInstall) {
      if (entry.isFolder) {
        if (!await this.app.vault.adapter.exists(entry.path)) {
          await this.app.vault.createFolder(entry.path);
          console.log(`Created folder: ${entry.path}`);
        }
      } else {
        const manifestEntry = this.manifestCache.files.find(
          (f) => f.path === entry.path
        );
        if (!manifestEntry) {
          console.warn(`Could not find manifest entry for file: ${entry.path}`);
          continue;
        }
        await this.updateEntryFromManifest(manifestEntry, true);
      }
    }
    await this.updateVersionFile();
    this.settings.installedVersion = this.settings.latestToolkitVersion ?? this.settings.installedVersion;
    this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
    this.settings.needsInstall = false;
    await this.saveSettings();
    const markerPath = ".vvunderlore_installed";
    if (!await this.app.vault.adapter.exists(markerPath)) {
      await this.app.vault.create(markerPath, "");
    }
    this.settings.needsInstall = false;
    this.settings.highlightEnabled = true;
    await this.saveSettings();
    this.enableHighlight();
    if (this.settingsTab) {
      this.settingsTab.display();
    }
    new import_obsidian7.Notice("\u2705 Custom install complete \u2026");
  }
  // ─── HIGHLIGHTING (Light + Dark Mode) ──────────────────────────────
  get highlightCSS() {
    const light = this.settings.highlightColorLight.trim() || "rgba(107,146,120,1)";
    const dark = this.settings.highlightColorDark.trim() || "rgba( 50, 70, 50,1)";
    const fileSelectors = this.manifestCache.files.map((f) => {
      const escaped = f.path.replace(/"/g, '\\"');
      return `.nav-file-title[data-path="${escaped}"]`;
    });
    const folderSelectors = this.manifestCache.folders.map((f) => {
      const escaped = f.path.replace(/"/g, '\\"');
      return `.nav-folder-title[data-path="${escaped}"]`;
    });
    const lines = [
      `:root {`,
      `  --vvunderlore-toolkit-highlight: ${light};`,
      `}`,
      ``,
      `body.theme-dark {`,
      `  --vvunderlore-toolkit-highlight: ${dark};`,
      `}`,
      ``
    ];
    if (fileSelectors.length) {
      lines.push(`${fileSelectors.join(", ")} {`);
      lines.push(`  background-color: var(--vvunderlore-toolkit-highlight);`);
      lines.push(`  border-radius: 3px;`);
      lines.push(`}`);
      lines.push(``);
    }
    if (folderSelectors.length) {
      lines.push(`${folderSelectors.join(", ")} {`);
      lines.push(`  background-color: var(--vvunderlore-toolkit-highlight);`);
      lines.push(`  border-radius: 3px;`);
      lines.push(`}`);
      lines.push(``);
    }
    return lines.join("\n");
  }
  enableHighlight() {
    if (this.styleEl) return;
    this.styleEl = document.createElement("style");
    this.styleEl.id = "vvunderlore-highlight-inject";
    this.styleEl.textContent = this.highlightCSS;
    document.head.appendChild(this.styleEl);
  }
  disableHighlight() {
    if (!this.styleEl) return;
    this.styleEl.remove();
    this.styleEl = null;
  }
  // ─── REMOTE BASELINE CACHING ─────────────────────────────────────────
  async fetchRemoteBaseline() {
    console.log("\u{1F501} fetchRemoteBaseline() called");
    if (!this.manifestCache || !Array.isArray(this.manifestCache.files)) {
      console.warn("\u26A0\uFE0F manifestCache is missing or invalid");
      return;
    }
    for (const entry of this.manifestCache.files) {
      try {
        const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${entry.path}`;
        const remoteText = await (await fetch(rawUrl)).text();
        const resolved = this.resolveVaultPath(entry.path);
        if (resolved !== entry.path) {
          await this.fileCacheManager.removeFromCache(entry.path);
        }
        await this.fileCacheManager.updateCache(
          resolved,
          remoteText,
          entry.path,
          false
        );
      } catch (e) {
        console.error(`Failed to fetch raw baseline for ${entry.path}`, e);
      }
    }
    console.log("\u{1F4E6} Final cache:", this.fileCacheManager.getCache());
  }
  // ─── MARKER FILE CHECKS (first‐run detection) ───────────────────────
  async checkMarkerFile() {
    const devForce = window.forceNeedsInstall;
    if (devForce) {
      this.settings.needsInstall = true;
      console.log("\u{1F9EA} DEV MODE: Forcing needsInstall = true");
      await this.saveSettings();
      if (this.settingsTab) this.settingsTab.display();
      return;
    }
    const markerPath = ".TEST_vvunderlore_installed";
    const markerExists = await this.app.vault.adapter.exists(markerPath);
    this.settings.needsInstall = !markerExists;
    console.log(
      markerExists ? "\u2705 Marker file found \u2192 needsInstall = false" : "\u{1F7E1} Marker file NOT found \u2192 needsInstall = true"
    );
    await this.saveSettings();
    if (this.settingsTab) {
      this.settingsTab.display();
    }
  }
  // ─── MANIFEST SYNC ────────────────────────────────────────────────────
  async syncManifest() {
    try {
      const res = await fetch(
        "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/manifest.json"
      );
      if (!res.ok) throw new Error(`Failed to fetch manifest: ${res.statusText}`);
      const manifest = await res.json();
      this.settings.latestDefaults = manifest.defaultPaths || {};
      this.manifestCache = manifest;
      const manifestContent = JSON.stringify(manifest, null, 2);
      await this.app.vault.adapter.write("manifest.json", manifestContent);
      await this.saveSettings();
      console.log("Manifest synced and local manifest updated.");
    } catch (error) {
      console.error("Error syncing manifest:", error);
      new import_obsidian7.Notice("Failed to sync manifest.");
    }
  }
  // ─── PLUGIN LIFECYCLE ─────────────────────────────────────────────────
  async onload() {
    await this.loadSettings();
    this.backupManager = new BackupManager(this.app.vault);
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      this.settings.fileCache ?? {},
      async () => await this.saveSettings()
    );
    this.settingsTab = new ToolkitSettingsTab(this.app, this);
    this.addSettingTab(this.settingsTab);
    try {
      const content = await this.app.vault.adapter.read("manifest.json");
      this.manifestCache = JSON.parse(content);
      console.log("\u2705 Loaded manifest from vault:", this.manifestCache);
    } catch (err) {
      console.warn("Manifest not found in vault; will fetch from GitHub shortly.");
    }
    if (this.settings.highlightEnabled && !this.settings.needsInstall) {
      this.enableHighlight();
    }
    setTimeout(async () => {
      await this.syncManifest();
      await this.showIndexingModal();
      await this.checkForUpdates();
      this.oldPathsByGithub = Object.entries(
        this.fileCacheManager.getCache()
      ).reduce((map, [vaultPath, entry]) => {
        map[entry.githubPath] = vaultPath;
        return map;
      }, {});
      console.log("\u{1F4E6} Cached Files:", this.fileCacheManager.getCache());
    }, 250);
    this.scheduleAutoUpdateCheck();
    if (!this.settings.customPaths) {
      this.settings.customPaths = [];
    }
    try {
      const raw = await this.app.vault.adapter.read("manifest.json");
      const manifest = JSON.parse(raw);
      const entries = [...manifest.folders || [], ...manifest.files || []];
      this.requiresGraph = /* @__PURE__ */ new Map();
      for (const e of entries) {
        this.requiresGraph.set(e.key, e.requires ?? []);
      }
    } catch (e) {
      console.warn("Could not build requiresGraph (manifest.json missing or invalid).");
      this.requiresGraph = /* @__PURE__ */ new Map();
    }
  }
  onunload() {
    this.disableHighlight();
    if (this.autoCheckInterval) {
      clearInterval(this.autoCheckInterval);
    }
  }
  scheduleAutoUpdateCheck() {
    this.autoCheckInterval = window.setInterval(() => {
      this.checkForUpdates();
    }, 60 * 60 * 1e3);
  }
  // ─── BACKUP & UNDO ────────────────────────────────────────────────────
  async backupFile(filePath, content) {
    this.settings.backupFiles = this.settings.backupFiles || {};
    this.settings.backupFiles[filePath] = content;
    await this.saveSettings();
    console.log(`Backup stored for ${filePath}`);
  }
  async undoForceUpdate() {
    if (!this.settings.backupFiles || Object.keys(this.settings.backupFiles).length === 0) {
      new import_obsidian7.Notice("No backups available to restore.");
      return;
    }
    for (const [filePath, backupContent] of Object.entries(this.settings.backupFiles)) {
      if (await this.app.vault.adapter.exists(filePath)) {
        await this.app.vault.adapter.write(filePath, backupContent);
        console.log(`Restored ${filePath}`);
      } else {
        await this.app.vault.create(filePath, backupContent);
        console.log(`Recreated and restored ${filePath}`);
      }
    }
    new import_obsidian7.Notice("\u2705 Force update undone.");
    this.settings.backupFiles = {};
    await this.saveSettings();
  }
  // ─── FOLDER SYNC ───────────────────────────────────────────────────────
  async syncMissingFolders() {
    if (this.manifestCache && this.manifestCache.folders) {
      for (const folderEntry of this.manifestCache.folders) {
        const folderPath = folderEntry.path;
        if (!await this.app.vault.adapter.exists(folderPath)) {
          await this.app.vault.createFolder(folderPath);
          console.log(`\u{1F4C1} Created missing folder: ${folderPath}`);
        }
      }
    }
  }
  // ─── FORCE-UPDATE PREVIEW ──────────────────────────────────────────────
  async buildForceUpdatePreview() {
    const previewList = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          previewList.push({
            filePath: vp,
            action: "deny-listed \u2013 will not update",
            selected: false
          });
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.key);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        if (!exists) {
          previewList.push({
            filePath: vp,
            action: `new file${tag}`,
            selected: true
          });
        } else if (!await this.fileCacheManager.isUpToDate(vp)) {
          previewList.push({
            filePath: vp,
            action: `will be overwritten${tag}`,
            selected: true
          });
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        if (!await this.app.vault.adapter.exists(fld.path) && !isDenyFolder) {
          previewList.push({
            filePath: fld.path,
            action: "missing folder (will be created)",
            selected: true,
            isFolder: true
          });
        }
      }
      return previewList;
    }
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
      const exists = await this.app.vault.adapter.exists(vaultPath);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vaultPath);
      let tag = "";
      if (vaultPath !== entry.path) tag = " (remapped)";
      if (!exists) {
        previewList.push({
          filePath: vaultPath,
          action: `new file${tag}`,
          selected: true
        });
      } else if (!upToDate) {
        previewList.push({
          filePath: vaultPath,
          action: `will be overwritten${tag}`,
          selected: true
        });
      }
    }
    for (const entry of this.manifestCache.folders) {
      if (entry.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(entry.path);
      if (!await this.app.vault.adapter.exists(entry.path) && !isDenyFolder) {
        previewList.push({
          filePath: entry.path,
          action: "missing folder (will be created)",
          selected: true,
          isFolder: true
        });
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        previewList.push({
          filePath: prevPath,
          action: `moved \u2192 ${manifestPath}`,
          selected: true
        });
      }
    }
    return previewList;
  }
  async forceUpdatePreviewAndConfirm() {
    const previewList = await this.buildForceUpdatePreview();
    const denyItems = [];
    const normalItems = [];
    for (const item of previewList) {
      if (item.action.startsWith("deny-listed")) {
        denyItems.push(item);
      } else {
        normalItems.push(item);
      }
    }
    const modal = new class extends import_obsidian7.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.contentEl.empty();
        this.titleEl.setText("Force Update Preview");
        this.contentEl.createEl("p", {
          text: 'The following items will be updated. Uncheck any items you do NOT want to change, then click "Confirm and Update".'
        });
        if (this.normal.length) {
          const normalContainer = this.contentEl.createEl("div");
          Object.assign(normalContainer.style, {
            maxHeight: "300px",
            overflowY: "auto",
            marginTop: "1em"
          });
          this.normal.forEach((item) => {
            const row = normalContainer.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace"
            });
            const label = row.createDiv();
            label.style.flexGrow = "1";
            label.style.display = "flex";
            label.style.flexDirection = "column";
            const labelWrapper = label.createDiv();
            labelWrapper.textContent = item.filePath;
            const note = label.createDiv({ text: item.action });
            note.style.fontSize = "13px";
            note.style.color = "var(--text-muted)";
            note.style.fontStyle = "italic";
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.onchange = () => {
              item.selected = checkbox.checked;
            };
          });
        } else {
          const noCandidates = this.contentEl.createEl("div");
          Object.assign(noCandidates.style, {
            display: "inline-block",
            fontFamily: "monospace",
            fontStyle: "italic",
            marginTop: "0.5em"
          });
          noCandidates.textContent = "No force-update candidates.";
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em",
            marginTop: "1em"
          });
          summary.createEl("span", { text: `Deny-List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.style.transform = denyDetails.open ? "rotate(0deg)" : "rotate(180deg)";
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.style.paddingLeft = "1em";
          this.denied.forEach((item) => {
            const row = denyBody.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace",
              color: "var(--text-faint)",
              fontStyle: "italic"
            });
            const labelWrapper = row.createDiv();
            labelWrapper.textContent = item.filePath;
            labelWrapper.style.textDecoration = "line-through";
            const note = row.createDiv({ text: item.action });
            note.style.fontSize = "13px";
            note.style.color = "var(--text-faint)";
            note.style.fontStyle = "italic";
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.disabled = true;
            checkbox.title = "This item is deny-listed";
          });
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          gap: "0.5em",
          marginTop: "1.5em"
        });
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm and Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          this.close();
          await this.plugin.performForceUpdateWithSelection([...this.normal, ...this.denied]);
        };
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalItems, denyItems);
    modal.plugin = this;
    modal.open();
  }
  async updateEntryFromManifest(entry, force = false) {
    const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
    if (custom?.doUpdate === false) {
      console.log(`\u23ED\uFE0F Skipping ${entry.key} (${entry.displayName}) \u2014 blacklisted`);
      return;
    }
    const finalVaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
    if (!force && await this.fileCacheManager.isUpToDate(finalVaultPath)) {
      console.log(`\u2714\uFE0F Already up to date: ${entry.displayName}`);
      return;
    }
    const url = `https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/${entry.path}`;
    try {
      const res = await fetch(url);
      const text = await res.text();
      await this.app.vault.adapter.write(finalVaultPath, text);
      await this.fileCacheManager.updateCache(finalVaultPath, text, entry.path);
      console.log(`\u2705 Updated ${entry.displayName} \u2192 ${finalVaultPath}`);
    } catch (e) {
      console.error(`\u274C Error updating ${entry.displayName}:`, e);
    }
  }
  async performForceUpdateWithSelection(previewList) {
    if (this.settings.autoBackupBeforeUpdate) {
    }
    this.settings.backupFiles = {};
    await this.saveSettings();
    try {
      const toUpdate = previewList.filter(
        (item) => item.selected && !item.isFolder && !this.settings.customPaths.some(
          (c) => c.vaultPath === item.filePath && c.doUpdate === false
        )
      );
      for (const item of toUpdate) {
        const entry = this.manifestCache.files.find(
          (f) => this.resolveVaultPath(f.path) === item.filePath
        );
        if (!entry) {
          console.warn(`\u26A0\uFE0F Could not match preview item to manifest: ${item.filePath}`);
          continue;
        }
        await this.updateEntryFromManifest(entry, true);
      }
      for (const entry of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(entry.path)) {
          await this.app.vault.createFolder(entry.path);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion ?? "unknown";
      this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
      new import_obsidian7.Notice("\u2705 Toolkit force\u2010updated with your selections.");
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C Force update failed. Version not changed.", err);
      new import_obsidian7.Notice("\u274C One or more files failed. Version NOT updated.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  // ─── SINGLE-FILE UPDATE (with GitHub API + raw fallback) ──────────────
  async updateSingleFileFromGitHub({ githubPath, vaultPath }, force = false) {
    if (this.settings.customizeUpdates) {
      vaultPath = this.resolveVaultPath(githubPath);
      const custom = this.settings.customPaths.find((c) => c.manifestKey === githubPath);
      if (custom?.doUpdate === false) {
        return;
      }
    } else {
      vaultPath = githubPath;
    }
    if (!vaultPath) {
      console.error(`\u274C No valid vault path resolved for ${githubPath}`);
      return;
    }
    const oldVault = this.oldPathsByGithub[githubPath];
    if (oldVault && oldVault !== vaultPath) {
      if (await this.app.vault.adapter.exists(vaultPath)) {
        const stray = await this.app.vault.adapter.read(vaultPath);
        await this.backupFile(vaultPath, stray);
        await this.app.vault.adapter.remove(vaultPath);
      }
      const oldFile = this.app.vault.getAbstractFileByPath(oldVault);
      if (oldFile instanceof import_obsidian7.TFile) {
        await this.app.vault.rename(oldFile, vaultPath);
        const newContent = await this.app.vault.adapter.read(vaultPath);
        await this.fileCacheManager.updateCache(vaultPath, newContent, githubPath);
        return;
      }
    }
    const fileExists = await this.app.vault.adapter.exists(vaultPath);
    if (force && fileExists) {
      const current = await this.app.vault.adapter.read(vaultPath);
      await this.backupFile(vaultPath, current);
    }
    if (!force && fileExists && await this.fileCacheManager.isUpToDate(vaultPath)) {
      return;
    }
    const apiUrl = encodeURI(
      `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubPath}?ref=main`
    );
    try {
      let res = await fetch(apiUrl);
      if (res.status === 404) {
        const rawUrl = encodeURI(
          `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${githubPath}`
        );
        res = await fetch(rawUrl);
        if (!res.ok) throw new Error(`Raw fetch failed: ${res.statusText}`);
        const content2 = await res.text();
        if (fileExists) {
          await this.app.vault.adapter.write(vaultPath, content2);
        } else {
          await this.app.vault.create(vaultPath, content2);
        }
        await this.fileCacheManager.updateCache(vaultPath, content2, githubPath);
        return;
      }
      if (!res.ok) throw new Error(`GitHub API error: ${res.statusText}`);
      const { download_url } = await res.json();
      const content = await (await fetch(download_url)).text();
      if (fileExists) {
        await this.app.vault.adapter.write(vaultPath, content);
      } else {
        await this.app.vault.create(vaultPath, content);
      }
      await this.fileCacheManager.updateCache(vaultPath, content, githubPath);
    } catch (e) {
      console.error(`\u274C Failed to update ${vaultPath}`, e);
    }
  }
  // ─── PREVIEW + REMOTE-BASELINE + DIFF ─────────────────────────────────
  async previewUpdatesModal() {
    const loading = new class extends import_obsidian7.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.empty();
        this.contentEl.createDiv({
          text: "\u{1F504} Checking for updates\u2026",
          cls: "mod-warning"
        }).addEventListener("click", (e) => e.stopPropagation());
      }
    }(this.app);
    loading.open();
    await this.syncManifest();
    await this.fetchRemoteBaseline();
    const diffs = await this.buildUpdatePreview();
    loading.close();
    const denyListedLines = [];
    const normalLines = [];
    for (const d of diffs) {
      if (d.startsWith("\u274C deny\u2010listed")) {
        denyListedLines.push(d);
      } else {
        normalLines.push(d);
      }
    }
    const modal = new class extends import_obsidian7.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.empty();
        this.titleEl.setText("Update Preview");
        this.contentEl.createEl("p", {
          text: "Only files whose contents differ from GitHub will be updated:"
        });
        if (this.normal.length) {
          const ul = this.contentEl.createEl("ul");
          this.normal.forEach((line) => {
            const li = ul.createEl("li", { text: line });
          });
        } else {
          this.contentEl.createEl("div", {
            text: "\u2705 Everything is already up to date!",
            cls: "mod-info"
          });
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em"
          });
          summary.createEl("span", { text: `Deny\u2010List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.style.transform = denyDetails.open ? "rotate(0deg)" : "rotate(180deg)";
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.style.paddingLeft = "1em";
          const denyUl = denyBody.createEl("ul");
          this.denied.forEach((line) => {
            const li = denyUl.createEl("li", { text: line });
            li.style.color = "var(--text-faint)";
            li.style.fontStyle = "italic";
          });
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          marginTop: "1.25em"
          // tweak spacing as you like
        });
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm & Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          await this.plugin.updateSelectedToolkitContent();
          this.close();
        };
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalLines, denyListedLines);
    modal.plugin = this;
    modal.open();
  }
  async buildUpdatePreview() {
    const changes = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          changes.push(`\u274C deny\u2010listed \u2013 will not update: ${vp}`);
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists) {
          changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
        } else if (!upToDate) {
          changes.push(`\u{1F501} Will update: ${vp}${tag}`);
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        const exists = await this.app.vault.adapter.exists(fld.path);
        if (!exists && !isDenyFolder) {
          changes.push(`\u{1F4C1} New folder: ${fld.path}`);
        }
      }
      return changes.length ? changes : ["\u2705 Everything is already up to date!"];
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
      let tag = "";
      if (vp !== f.path) tag = " (remapped)";
      const exists = await this.app.vault.adapter.exists(vp);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
      if (!exists) {
        changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
      } else if (!upToDate) {
        changes.push(`\u{1F501} Will update: ${vp}${tag}`);
      }
    }
    for (const fld of this.manifestCache.folders) {
      if (fld.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(fld.path);
      const exists = await this.app.vault.adapter.exists(fld.path);
      if (!exists && !isDenyFolder) {
        changes.push(`\u{1F4C1} New folder: ${fld.path}`);
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        changes.push(`\u27A1\uFE0F Moved: ${prevPath} \u2192 ${manifestPath}`);
      }
    }
    return changes.length ? changes : ["\u2705 Everything is already up to date!"];
  }
  // ─── VERSION-CHECK / UPDATE FLOW ─────────────────────────────────────
  async checkForUpdates() {
    const isNewerVersion = (remote, local) => {
      const pa = remote.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      const pb = local.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      for (let i = 0; i < Math.max(pa.length, pb.length); i++) {
        if ((pa[i] || 0) > (pb[i] || 0)) return true;
        if ((pa[i] || 0) < (pb[i] || 0)) return false;
      }
      return false;
    };
    const toolkitPath = ".version.json";
    const toolkitUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/.version.json";
    const pluginUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-plugin/main/version.json";
    const changelogUrl = "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/README.md";
    let localTK = "0.0.0";
    try {
      const content = await this.app.vault.adapter.read(toolkitPath);
      const json = JSON.parse(content);
      localTK = json.version || localTK;
    } catch (err) {
      console.error("\u274C Failed to read local toolkit version:", err);
    }
    let remoteTK = "0.0.0";
    try {
      const res = await fetch(toolkitUrl);
      const data = await res.json();
      remoteTK = data.version || remoteTK;
      this.settings.latestToolkitVersion = remoteTK;
      if (data.defaultPaths) {
        this.settings.latestDefaults = data.defaultPaths;
      }
      this.settings.lastChecked = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
    } catch (err) {
      console.error("\u274C Failed to fetch remote toolkit version:", err);
    }
    console.log({ localTK, remoteTK });
    if (isNewerVersion(remoteTK, localTK)) {
      new import_obsidian7.Notice(`\u26A0\uFE0F Toolkit update available! Installed: v${localTK}, Latest: v${remoteTK}`);
      await this.fetchRemoteBaseline();
    } else {
      new import_obsidian7.Notice(`\u2705 Toolkit is up to date (v${localTK})`);
    }
    const localPL = this.manifest.version;
    let remotePL = localPL;
    try {
      const res = await fetch(pluginUrl);
      const data = await res.json();
      remotePL = data.version || remotePL;
    } catch (err) {
      console.error("\u274C Failed to fetch remote plugin version:", err);
    }
    console.log({ localPL, remotePL });
    if (isNewerVersion(remotePL, localPL)) {
      new import_obsidian7.Notice(`\u2699\uFE0F Plugin update available! Installed: v${localPL}, Latest: v${remotePL}`);
    } else {
      new import_obsidian7.Notice(`\u2705 Plugin is up to date (v${localPL})`);
    }
    try {
      const changelogRes = await fetch(changelogUrl);
      this.changelog = await changelogRes.text();
    } catch (err) {
      console.error("\u274C Failed to fetch changelog:", err);
    }
  }
  async loadSettings() {
    const loaded = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loaded);
    if (typeof this.settings.rulesetCompendium !== "string") {
      this.settings.rulesetCompendium = "";
    }
    if (!Array.isArray(this.settings.rulesetReference)) {
      this.settings.rulesetReference = [];
    }
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      loaded?.fileCache ?? {},
      async () => await this.saveSettings()
    );
    setTimeout(() => this.checkMarkerFile(), 500);
  }
  async saveSettings() {
    await this.saveData({
      ...this.settings,
      fileCache: this.fileCacheManager.getCache()
    });
  }
  async getLocalToolkitVersion() {
    try {
      const content = await this.app.vault.adapter.read(".version.json");
      const json = JSON.parse(content);
      return json.version || null;
    } catch (err) {
      console.error("\u274C Failed to read .version.json:", err);
      return null;
    }
  }
  async updateFullToolkitRepo() {
    const excluded = [
      ".obsidian",
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    const fetchRepoRoot = async () => {
      const apiUrl = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/";
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch repo root`);
      return await response.json();
    };
    try {
      const contents = await fetchRepoRoot();
      const filtered = contents.filter(
        (item) => !excluded.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      );
      filtered.sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const item of filtered) {
        if (item.type === "dir") {
          await this.updateFolderFromGitHub(item.path, item.path);
        }
        if (item.type === "file") {
          const response = await fetch(item.download_url);
          const content = await response.text();
          const filePath = item.path;
          const exists = await this.app.vault.adapter.exists(filePath);
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, item.path, false);
        }
      }
      await this.saveSettings();
      const markerPath = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(markerPath)) {
        await this.app.vault.create(markerPath, "");
      }
      this.settings.needsInstall = false;
      await this.saveSettings();
      if (this.settingsTab) {
        this.settingsTab.display();
      }
      if (this.settings.highlightEnabled) {
        this.enableHighlight();
      }
      new import_obsidian7.Notice("\u2705 VVunderlore Toolkit successfully installed!");
    } catch (err) {
      console.error("\u274C updateFullToolkitRepo() error:", err);
      new import_obsidian7.Notice("\u274C Failed to install toolkit. See console for details.");
    }
  }
  async updateSelectedToolkitContent() {
    if (this.settings.autoBackupBeforeUpdate) {
      const folder = await this.backupManager.backupVaultMirror("pre-update");
      new import_obsidian7.Notice(`Vault mirror backup created at: ${folder}`);
    }
    if (!this.settings.latestDefaults) {
      new import_obsidian7.Notice("\u274C GitHub defaults not loaded yet.");
      return;
    }
    const allManifestFiles = this.manifestCache.files.map((f) => f.path);
    const fileOverrides = Object.fromEntries(
      this.settings.customPaths.map((c) => [c.manifestKey, c])
    );
    try {
      for (const ghPath of allManifestFiles) {
        const override = fileOverrides[ghPath];
        if (override?.doUpdate === false) {
          console.log(`\u23ED\uFE0F Skipping deny-listed: ${ghPath}`);
          continue;
        }
        const vaultPath = this.settings.customizeUpdates ? this.resolveVaultPath(ghPath) : ghPath;
        const entry = this.manifestCache.files.find((f) => f.path === ghPath);
        if (!entry) continue;
        await this.updateEntryFromManifest(entry, false);
      }
      for (const folder of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(folder.path)) {
          await this.app.vault.createFolder(folder.path);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion;
      await this.saveSettings();
      new import_obsidian7.Notice("\u2705 Toolkit content updated.");
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C Update failed. Version not updated.", err);
      new import_obsidian7.Notice("\u274C Update failed. See console for details. Version file NOT changed.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  async updateFolderFromGitHub(githubFolderPath, vaultFolderPath) {
    const excluded = [
      ".obsidian",
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    if (excluded.some((ex) => githubFolderPath === ex || githubFolderPath.startsWith(`${ex}/`))) {
      return;
    }
    const apiUrl = `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubFolderPath}`;
    try {
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch folder: ${githubFolderPath}`);
      const files = await response.json();
      if (!await this.app.vault.adapter.exists(vaultFolderPath)) {
        await this.app.vault.createFolder(vaultFolderPath);
      }
      for (const file of files) {
        if (excluded.some((ex) => file.path === ex || file.path.startsWith(`${ex}/`))) {
          continue;
        }
        const filePath = `${vaultFolderPath}/${file.name}`;
        if (file.type === "file") {
          const fileResponse = await fetch(file.download_url);
          const content = await fileResponse.text();
          const exists = await this.app.vault.adapter.exists(filePath);
          if (exists) {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.backupFile(filePath, current);
            }
          }
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            if (await this.app.vault.adapter.read(filePath) !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, file.path, false);
        } else if (file.type === "dir") {
          await this.updateFolderFromGitHub(file.path, `${vaultFolderPath}/${file.name}`);
        }
      }
      await this.saveSettings();
      new import_obsidian7.Notice(`\u2705 Folder synced: ${vaultFolderPath}`);
    } catch (error) {
      console.error(`\u274C Failed to sync folder: ${vaultFolderPath}`, error);
      new import_obsidian7.Notice(`\u274C Failed to update folder: ${vaultFolderPath}`);
    }
  }
  async rebuildFileCache() {
    const cache = this.fileCacheManager;
    const tasks = [];
    for (const entry of this.manifestCache.files) {
      const vaultPath = this.resolveVaultPath(entry.path);
      if (await this.app.vault.adapter.exists(vaultPath)) {
        tasks.push((async () => {
          const content = await this.app.vault.adapter.read(vaultPath);
          await cache.updateCache(vaultPath, content, entry.path, false);
        })());
      }
    }
    for (const folderEntry of this.manifestCache.folders) {
      const folderPath = folderEntry.path;
      const folder = this.app.vault.getAbstractFileByPath(folderPath);
      if (folder instanceof import_obsidian7.TFolder) {
        import_obsidian7.Vault.recurseChildren(folder, (file) => {
          if (file instanceof import_obsidian7.TFile && file.extension === "md") {
            const filePath = file.path;
            tasks.push((async () => {
              const content = await this.app.vault.adapter.read(filePath);
              await cache.updateCache(filePath, content, filePath, false);
            })());
          }
        });
      }
    }
    const batchSize = 10;
    for (let i = 0; i < tasks.length; i += batchSize) {
      await Promise.all(tasks.slice(i, i + batchSize));
    }
    await this.saveSettings();
  }
  async showIndexingModal() {
    const modal = new class extends import_obsidian7.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.titleEl.setText("\u{1F504} Indexing Toolkit Files...");
        this.contentEl.createEl("p", {
          text: "Indexing and caching your VVunderlore Vault for faster updates and safer syncing."
        });
      }
    }(this.app);
    modal.open();
    await this.rebuildFileCache();
    modal.close();
    new import_obsidian7.Notice("\u2705 VVunderlore caching complete.");
  }
  async updateVersionFile() {
    if (!this.settings.latestToolkitVersion) {
      console.warn("No latest version found; skipping version file update.");
      return;
    }
    const versionPath = ".version.json";
    const content = JSON.stringify({ version: this.settings.latestToolkitVersion }, null, 2);
    const exists = await this.app.vault.adapter.exists(versionPath);
    if (exists) {
      await this.app.vault.adapter.write(versionPath, content);
    } else {
      await this.app.vault.create(versionPath, content);
    }
  }
  /** main.ts **/
  /** 
   * Install the selected compendium and zero or more reference editions.
   */
  async installFullToolkit(opts = { compendium: "", references: [] }) {
    const { compendium, references } = opts;
    if (!compendium) {
      throw new Error("No compendium edition selected");
    }
    const placeholder = new InstallingModal2(this.app);
    placeholder.open();
    let installSucceeded = false;
    try {
      const treeApi = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/git/trees/main?recursive=1";
      const resp = await fetch(treeApi);
      if (!resp.ok) {
        throw new Error(`Failed to list repo tree: ${resp.statusText}`);
      }
      const json = await resp.json();
      const items = Array.isArray(json.tree) ? json.tree : [];
      const staticEntries = items.filter(
        (item) => !this.excludedPaths.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      ).sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const entry of staticEntries) {
        if (entry.type === "tree") {
          if (!await this.app.vault.adapter.exists(entry.path)) {
            await this.app.vault.createFolder(entry.path);
          }
        } else {
          const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${encodeURIComponent(entry.path)}`;
          const fileResp = await fetch(rawUrl);
          if (!fileResp.ok) continue;
          const text = await fileResp.text();
          if (await this.app.vault.adapter.exists(entry.path)) {
            const old = await this.app.vault.adapter.read(entry.path);
            if (old !== text) {
              await this.app.vault.adapter.write(entry.path, text);
            }
          } else {
            await this.app.vault.create(entry.path, text);
          }
        }
      }
      const parseJobs = [
        importRulesetData({
          app: this.app,
          editionKey: compendium,
          targetPath: `Compendium`
        }),
        ...references.map(
          (refKey) => importRulesetData({
            app: this.app,
            editionKey: refKey,
            targetPath: `${refKey}`
          })
        )
      ];
      await Promise.all(parseJobs);
      const marker = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(marker)) {
        await this.app.vault.create(marker, "");
      }
      this.settings.needsInstall = false;
      this.settings.highlightEnabled = true;
      await this.saveSettings();
      this.enableHighlight();
      installSucceeded = true;
    } catch (err) {
      console.error("\u274C installFullToolkit()", err);
    } finally {
      placeholder.close();
      if (this.settingsTab) this.settingsTab.display();
      new import_obsidian7.Notice(
        installSucceeded ? "\u2705 VVunderlore Toolkit successfully installed!" : "\u274C Failed to install toolkit. See console for details."
      );
    }
  }
};
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  InstallingModal
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9maXJzdGluc3RhbGxjb25maXJtLnRzIiwgInNyYy9lZGl0aW9ucy50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2luc3RhbGxlci50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvc291cmNlTWFwLnRzIiwgInNyYy9wYXJzZXJzLzVlLWpzb24vaGVscGVycy90YWdSZXBsYWNlci50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvbWFya2Rvd25UYWJsZS50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvZm9ybWF0RW50cnkudHMiLCAic3JjL3BhcnNlcnMvNWUtanNvbi9iZXN0aWFyeS50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2l0ZW1zLnRzIiwgInNyYy9wYXJzZXJzLzVlLWpzb24vaGVscGVycy9mcm9udG1hdHRlci50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL3NwZWxscy50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL3NwZWNpZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtanNvbi9jbGFzc2VzLnRzIiwgInNyYy9wYXJzZXJzLzVlLWpzb24vcnVsZXMudHMiLCAic3JjL3J1bGVzZXRJbnN0YWxsZXIudHMiLCAic3JjL2N1c3RvbUluc3RhbGxNb2RhbC50cyIsICJzcmMvZmlsZUNhY2hlTWFuYWdlci50cyIsICJzcmMvYmFja3VwL0JhY2t1cE1hbmFnZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7XG4gIEFwcCxcbiAgUGx1Z2luLFxuICBOb3RpY2UsXG4gIE1vZGFsLFxuICBTZXR0aW5nLFxuICBURm9sZGVyLFxuICBURmlsZSxcbiAgVmF1bHRcbn0gZnJvbSAnb2JzaWRpYW4nOyBcblxuaW1wb3J0IHsgVG9vbGtpdFNldHRpbmdzVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBUb29sa2l0RmlsZUNhY2hlTWFuYWdlciB9IGZyb20gJy4vZmlsZUNhY2hlTWFuYWdlcic7XG5pbXBvcnQgdHlwZSB7IFRvb2xraXRGaWxlQ2FjaGVFbnRyeSB9IGZyb20gJy4vZmlsZUNhY2hlTWFuYWdlcic7XG5pbXBvcnQgeyBCYWNrdXBNYW5hZ2VyIH0gZnJvbSAnLi9iYWNrdXAvQmFja3VwTWFuYWdlcic7XG5pbXBvcnQgeyBzaG93Q3VzdG9tSW5zdGFsbE1vZGFsIH0gZnJvbSAnLi9jdXN0b21JbnN0YWxsTW9kYWwnO1xuaW1wb3J0IHsgQVZBSUxBQkxFX0VESVRJT05TIH0gZnJvbSAnLi9lZGl0aW9ucyc7XG5pbXBvcnQgeyBpbXBvcnRSdWxlc2V0RGF0YSB9IGZyb20gJy4vcnVsZXNldEluc3RhbGxlcic7XG5cbmNvbnN0IGxvYWRpbmdJY29uID0gXG4nZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgK1xuJ2lWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFORUFBQURSQ0FZQUFBQlNPbGZ2QUFBQUNYQklXWE1BQUJjUkFBQVhFUUhLSnZNL0FBQUw1a2xFUVZSNG5PM2RUNndkWlJuSDhWOWh5Z3VGWWx0S1NnWHhGQWhvUXFVVVFpQkd1Qmd4RVRHNnFVRmN0QnBOM05iRXVEQ1IyOFQ0Snk1QWpRa0xFMHQwb1NaR2RPWEMySU5LTUJyTjNZQUxHemtRSUVxVVhyRkNYNXdXRjJkTWpNN3puTjczbVpsN3p1MzNrNXpOUEpsMzNudlAvZlZNbnZQMm5VM0MvNmxTT2lUcFlNZkRIcTV6WHVsNFRNeUJhcjBuTUtkR2twWTZIbk5ieCtOaFRweTMzaE1BRmgwaEFvSUlFUkJFaUlBZ1FnUUUwWjFidTZPU0hqVnFCeVVkTW1vUFZTbXQ5akdoTm5YT2R3OTFyWE1kSVZxN1ordWN4MjJGS3FVbDU3eDl2Y3dHNjQ3Yk9TQ0lFQUZCaEFnSUlrUkFFQ0VDZ3VqT0RlZXdwSkpWM0xkSTJtN1VEa2k2cXExUXBYU3M0RnEweGdzUW91R3NXSzF4VDVWU0pXbVhVZjZIcE5OR2JXbXQxMElaYnVlQUlFSUVCQkVpSUlnUUFVR0VDQWlpTzllaE91ZGxTY3NkRC9zNWxYWGFySlhta3ZRSHExQ2w5RWJCdGNibmNtdWNUeUlnaUJBQlFZUUlDQ0pFUUJBaEFvSUlFUkMwYWIwbnNHaXFsSllsUGRqeHNQZElldHlvMVhYT3JXM25acVgya25IZVc1enJmZE9wdmRPcFBXd2MzeVBwNDBadHc3ZS8rU1FDZ2dnUkVFU0lnQ0JDQkFRUklpQ0lFQUZCRzdyRjNXenJXN1JoeHh5NXUyUnZCaytWMG5WV3JjNzV1SFBlQWFza2FZdFJ1MEhTWjR6YWhtaC84MGtFQkJFaUlJZ1FBVUdFQ0FnaVJFRFFRdXl4VUtXMFRXVVB5UnBKR25jNm1YNDZtamRKMm1iVTlsVXBXZWV0MURtWFBIM3Z0WUp6cE9tT3EyMHVrblNaVVh0Vjluc3djUjZNdGxyblhMTHQ4dUFXb3NVZGFGVjMza0t0VWpwUDl1L04rMzJla1dSdEFuSk0wbDBGMCttOC9lMnBVaG9acGQyUzdqTnF6OVE1ZjhzWWIwbjIrN293N1c5dTU0QWdRZ1FFRVNJZ2lCQUJRWVFJQ0pxYkZ2ZU1OdlpJWmExcXMwWGFkSnBHQldOdWt0K0ZzMnBubkhQZTVOUldKRmx0N0pMMnRxcVUzdWFVVHptMVM0emptNTI1bkhUR1cxVlorM3RTNXp4eHhoM1UzTFM0aDI1MzlyVGhTQi82V01YOWJhZjhuRlA3blhIOGpLVFhqZHFKT3VmZm50WEUvc3VNdjRjanpiN25jNEhiT1NDSUVBRkJoQWdJSWtSQUVDRUNnZ1p2Y1R0dHk1SHNkcWZYcWk1ZDRTM25lcDZSeWxyakhxK05uYXFVcmpacUp5WFZiWVU2NTFlYzYzbnYrOGlwV1ZzZG45WjB0WFliYng0ZXIvM3QvUjBOM3Y0ZXZNWHRQTTZ3cUkwZFdPRmQxQ2J0cVRWdXRyR3JsRDRxeVFxUkdiNDY1eWV0aTFVcFBlYk01WU5PYldRY1AxWG4vQmZudkU3TmVBOEdiMzl6T3djRUVTSWdpQkFCUVlRSUNDSkVRRkF2TFc2bi9TaDEzOFllT1dONkpnWG4vT2M4NjNvajJSMnMwdFhZdXlWZFk5VE95RmdsWFNWN2R4TkpPNTNhRTA3dGR1UDRTNUlHNjg3Tm03NitKekpiem5YT0pXMzFmYzZZZzI1b1VlZDhWTkxSdHRxTTF1dmh3dFhZNzVmOVNNaytXTHYyU05MZmpPTmpMZjZlNThXNG5RT0NDQkVRUklpQUlFSUVCQkVpSUtpWEJhak9JbE96TzFlbHRGWFRwNnExdVVYU0kwWnRicmFiYlZyNzFsek0zOGxac042bnlKaVdyemkxenhhTU4yazZtbXZTdE9ndk44cjdtOWRhamZ2WWRubHVkdnVSdEZYU3JVYnQraUVuRXZDNHBGOFl0WityYkwvdGQ4ditMd2h2MURuM0VTVExjdHZCV1p2TXlQaEtZSVlrNlNxajl2czY1NThZYzFtV3Y4cCtYREFYRjdkelFCQWhBb0lJRVJCRWlJQWdRZ1FFRlhmbm1pNkk1WWh6bnRXdXZVejIwOVpPU3ZxU1VYdkdtY2Q2c0xwbFIxVysydHdhYzhqT25HY2kvejFmdHM1ejJ0OVowdk5HN1pJcUphdVR1OXVhUjErS3Z5Y3ErUzZvT2MrcUxXbmFCbTd6SzBuM0dyWFRkYzdXVGpOWVozM3NzZDRFNkJhamZKL3NmNHg3MmNTRTJ6a2dpQkFCUVlRSUNDSkVRQkFoQW9MV1l3SHFrbkhjMjAvYmV4S2I5eGhIYkV3dlN6cHUxQ2FTWGpCcSs1MTIrOUhTUGJ6bktVUWo1NXd6ZGM2NSs2bGdRYjJzNlNiNmJaNlYvZjNTZmtrZk1HcGpGZTRBeGUwY0VFU0lnQ0JDQkFRUklpQ0lFQUZCYm5jdXNGTDdSdWM4YTUrQlZXZk1pVE1lemoybm5OclRrbjVtMU82VWRHWFhrNW5WNGpZM2ZKaXhVdnQrWjB3clJPT2hIeE9JeFZUbmZFcEdrS3FVbnBiOS9OaXJKTDJyNi9sd093Y0VFU0lnaUJBQlFZUUlDQ0pFUUZCZkMxQ3RQYlZ4N2xtUnZULzVxRXJKMm45aHBjNzVjRnVoU3VtUXBJUEdlUmMycnpaWFdKT002Q3RFVzNzYUZ3dW16bmxWeGk1SHpTWW1Td1hEamdyUDZ3VzNjMEFRSVFLQ0NCRVFSSWlBSUVJRUJQWFZuYnV6cDNFQnlkL1gvS2JtMVdhZnBKdU4ya05WU3F0RzdYQ2Q4NG8xbWI1Q3RMT25jUUUxdS9KTTJtck5IdkdYR3FlT25HRzkzYWEyZWZQaGRnNElJa1JBRUNFQ2dnZ1JFRVNJZ0tDK3VuTW5leG9YbU9XTTdDMkcvK1NjZDdObWRPRXNmWVdvN21sYzRHeFlqMEw5cDZTWGpKcjF3SVNadUowRGdnZ1JFRVNJZ0NCQ0JBUVJJaUNvcis2Y3RZMHIwTGY5a2o1cDFEWkx1c0NvYlMrOVlGOGhzdnIwUU4rMlM5b3o1QVc1blFPQ0NCRVFSSWlBSUVJRUJCRWlJS2l2N3R3UG5ScWJtS0JQWDVmMEhhTjJ1ZXo5UDc0b2FXL0pCZmtrQW9JSUVSQkVpSUFnUWdRRUVTSWdpQkFCUVgyMXVIL2sxTDVnSEwrdDJRSzJ6YmpPMlhwa0llWlk4elE4NjVHUzR6cm5UUjFmY3F1a0s0M2F4eVFkNnZoNmZCSUJVWVFJQ0NKRVFCQWhBb0lJRVJCRWlJQWd0OFh0dFIrZGR2U3M4MzVnbEhaTHV0ZW9YVkNsdE11b3ZWN25mTUs2SGphZUtxVmxTUTkyUE96ZGRjN2praFA1SkFLQ0NCRVFSSWlBSUVJRUJCRWlJSWdRQVVGOXJlSTIxVGwvb25VaUtWMHQ2UUhqdEdzay9kbW9qU1d4d25zZDliRlN1MHBKa3F6em5wTDBmYU8yVTlKbFJ1Mks1dFVwUG9tQUlFSUVCQkVpSUlnUUFVR0VDQWlLZE9mRzVxRFRiazByWjVGZmx2U2NVZnVYYzcySmM3M1ZPdWNWYXk1WUcrZjNQSkw5L3BUKy9pK1F0TU9vYlpOMGtWSGJJdWtTWjh6T2RiMUpoS1R5RmQ2RjExcVMzMTZsL2QyUklUZVNhVmJ0MzJPVTc1QjB1MUhiM2J6V2lsWGN3SG9oUkVBUUlRS0NDQkVRUklpQW9MNFdvUDdTdkdEMzdlaFZsYlcvUFpNNjUwbkJlUXR2eHU5cmJCdzMzN2NxcFcyUzloVk1aYnVrdHh1MTNaSXVObXFiblRFbnphdk42bG5OcWtWZkxXN3JCNVNrazhieFB0cWtTN0xiMzU0amRjN0xYYzVsVVhUOTlVVGdQZkNjbGxSYmw1UjB2bEhyNVgzbGRnNElJa1JBRUNFQ2dnZ1JFRVNJZ0tDK1d0eW5uZHJZT082MW8xK1Y5THhSZTczTythOUd6V3QvdXhhaE5WNmx0RS9URmMxZEduYzgzaW5acS9QUDEzVFZkWnRLMDZmZVdhd1BnQmNrdldqVXJMK2hrRjVhM0NWbXRFTC9LT2toby9aaW5mT1BPNTdMc3NyMmVoNjBOVjZsZEV6U1VwZGo5ckRLZm8razFzMXBOQTNKRFVadGg2UmJDeTc1TlVrUEc3WFZPdWZpNzRNczNNNEJRWVFJQ0NKRVFCQWhBb0lJRVJBMCtEYkNqbGNrL2RxcFhXL1VkbFFwL2IzZ2VsNDdlcUpoVytPbEp1cStKVzBxL05sMnlkNjY5MkxabTVGNDdlMko3TlhZeHpWdHE3ZXhGcTJHekZPTCswSk5mK0Z0YnBmMHZZNHYyWGs3dXFmSElIcUtOOWNvNGEzd2RtUkoxdmQ0U2RPOXM5ZHFybGJaY3pzSEJCRWlJSWdRQVVHRUNBZ2lSRURRUExXNGEwbFdxL29wU1VlTTJsc2xIVEpxTDB2NmpWV3JVckxhNW51YlY1dXgweEd6anZkbFVuSlMwMFZzTmFQcjlWM2p1TGZsYnlYcFVxTm03WVVnVFgrMlI0M2EyRGx2Y0hQVDRpNDFZL1gzY1VuZk1Hb25tbGViQnlSOXhLak5WWHUxUk9sbUpGVks3elZLNzVEMDFlaTgvc2ZDN0tQTzdSd1FSSWlBSUVJRUJCRWlJSWdRQVVIejFPSXVOWkhkL3Q0cTZYMUc3VFhacTMxdkxKbElsZElPMmF1Uzc1Rzl3UFpveVFZblZVcUhOSDNVWTV0SDFqcGVNK2F5VTdhNmV0WWNacG5JYm1OUENzY2MzTUtIcVBualcyNnJOZTN2VHc4NG5SMlNyalZxbjlLMEZkeG1yTEkvbW9PeU55cDVyR0E4eVYrRi9sUGp1UFVQeHl5VFJmKzZRT0oyRGdnalJFQVFJUUtDQ0JFUVJJaUFvSVh2enMwd2tkMytsdXdGdUhjMXI5YWEwd2IyOWlDd1ZqSkwwcFlxSmF2K0h0bXQ4VGM3WTNwN2RIdjdWZHp2MUs0empsL2tuRFBSQm1oamV4WitGWGVwS3FWTnNuLytCeVY5dm1EWTQ4MnJ6VzJ5VzhFZmx2U2tVZnV5N1ArV2NhM3NaNWQreURndStXSHZkRjl6TGRCcTdGTGN6Z0ZCaEFnSUlrUkFFQ0VDZ2dnUkVMVFJXOXl6V0YycVkwN05zMWYySWxPdkRYeEEwaDNPbUZhTGU3TXpwdGVxTHVWOVhXQ1pkRDJKZVhQT3RyajdzQTU3Y1ErcTYwZFJiaFRjemdGQmhBZ0lJa1JBRUNFQ2dnZ1JFSFN1dDdpN05sN3ZDV0I0L3dZUkJibjE5OC9ycEFBQUFBQkpSVTVFcmtKZ2dnPT0nXG4gXG5jbGFzcyBJbnN0YWxsaW5nTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7IHN1cGVyKGFwcCk7IH1cbiAgb25PcGVuKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29uc3QgaW1nID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2ltZycsIHtcbiAgICAgIGF0dHI6IHsgc3JjOiBsb2FkaW5nSWNvbiwgYWx0OiAnSW5zdGFsbGluZ1x1MjAyNicgfSxcbiAgICB9KTtcbiAgICBPYmplY3QuYXNzaWduKGltZy5zdHlsZSwge1xuICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgIG1hcmdpbjogJzFlbSBhdXRvIDAuNWVtJyxcbiAgICAgIHdpZHRoOiAnMTAwcHgnLFxuICAgICAgaGVpZ2h0OiAnMTAwcHgnLFxuICAgIH0pO1xuICAgIGltZy5hbmltYXRlKFxuICAgICAgW1xuICAgICAgICB7IHRyYW5zZm9ybTogJ3JvdGF0ZSgwZGVnKScgfSxcbiAgICAgICAgeyB0cmFuc2Zvcm06ICdyb3RhdGUoLTM2MGRlZyknIH1cbiAgICAgIF0sXG4gICAgICB7XG4gICAgICAgIGR1cmF0aW9uOiAxNTAwLCAgICAgIC8vIG9uZSBhbmQgYSBoYWxmIHNlY29uZHMgcGVyIHJldm9sdXRpb25cbiAgICAgICAgaXRlcmF0aW9uczogSW5maW5pdHksXG4gICAgICAgIGVhc2luZzogJ2xpbmVhcidcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IHR4dCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IHRleHQ6ICdJbnN0YWxsaW5nXHUyMDI2JywgY2xzOiAnbW9kLXF1aWV0JyB9KTtcbiAgICB0eHQuc3R5bGUuY3NzVGV4dCA9XG4gICAgICAnZm9udC1zdHlsZTogaXRhbGljOyBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMWVtOyc7XG4gIH1cbiAgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICB9IFxufVxuXG5cbmludGVyZmFjZSBQcmV2aWV3SXRlbSB7XG4gIGZpbGVQYXRoOiBzdHJpbmc7XG4gIGFjdGlvbjogc3RyaW5nO1xuICBzZWxlY3RlZDogYm9vbGVhbjsgXG4gIGlzRm9sZGVyPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFRvb2xraXRTZXR0aW5ncyB7XG4gIGluc3RhbGxlZFZlcnNpb246IHN0cmluZztcbiAgbGF0ZXN0VG9vbGtpdFZlcnNpb24/OiBzdHJpbmc7XG4gIGN1c3RvbWl6ZVVwZGF0ZXM6IGJvb2xlYW47XG4gIHVwZGF0ZVRhcmdldHM6IHtcbiAgICB0b29sczogYm9vbGVhbjtcbiAgICB0b29sc1BhdGg/OiBzdHJpbmc7XG4gICAgdGVtcGxhdGVzOiBib29sZWFuO1xuICAgIHRlbXBsYXRlc1BhdGg/OiBzdHJpbmc7XG4gICAgb21uaW5vbWljb246IGJvb2xlYW47XG4gICAgb21uaW5vbWljb25QYXRoPzogc3RyaW5nO1xuICAgIHNwZWxsYm9vazogYm9vbGVhbjtcbiAgICBzcGVsbGJvb2tQYXRoOiBzdHJpbmc7XG4gIH07XG4gIGxhdGVzdERlZmF1bHRzPzoge1xuICAgIHRvb2xzPzogc3RyaW5nO1xuICAgIHRlbXBsYXRlcz86IHN0cmluZztcbiAgICBvbW5pbm9taWNvbj86IHN0cmluZztcbiAgICBzcGVsbGJvb2s/OiBzdHJpbmc7XG4gIH07XG4gIGxhc3RDaGVja2VkPzogc3RyaW5nO1xuICBsYXN0Rm9yY2VVcGRhdGU/OiBzdHJpbmc7XG4gIGZpbGVDYWNoZT86IFJlY29yZDxzdHJpbmcsIFRvb2xraXRGaWxlQ2FjaGVFbnRyeT47XG4gIHBhdGhPdmVycmlkZXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBiYWNrdXBGaWxlcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGJhY2t1cFBhdGg/OiBzdHJpbmc7XG4gIGF1dG9CYWNrdXA/OiBib29sZWFuO1xuICBsYXN0QmFja3VwVGltZT86IHN0cmluZztcbiAgYmFja3VwRXJyb3I/OiBzdHJpbmc7XG4gIGN1c3RvbVBhdGhzOiBDdXN0b21QYXRoRW50cnlbXTtcbiAgYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZTogYm9vbGVhbjtcbiAgbmVlZHNJbnN0YWxsOiBib29sZWFuO1xuICBoaWdobGlnaHRFbmFibGVkOiBib29sZWFuO1xuICBoaWdobGlnaHRDb2xvckxpZ2h0OiBzdHJpbmc7XG4gIGhpZ2hsaWdodENvbG9yRGFyazogc3RyaW5nO1xuICBydWxlc2V0Q29tcGVuZGl1bTogc3RyaW5nO1xuICBydWxlc2V0UmVmZXJlbmNlOiBzdHJpbmdbXTtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogVG9vbGtpdFNldHRpbmdzID0ge1xuICBpbnN0YWxsZWRWZXJzaW9uOiAnMS4wLjAnLFxuICBjdXN0b21pemVVcGRhdGVzOiBmYWxzZSxcbiAgdXBkYXRlVGFyZ2V0czoge1xuICAgIHRvb2xzOiB0cnVlLFxuICAgIHRvb2xzUGF0aDogJ1Rvb2xzJyxcbiAgICB0ZW1wbGF0ZXM6IHRydWUsXG4gICAgdGVtcGxhdGVzUGF0aDogJ0V4dHJhcy9UZW1wbGF0ZXMnLFxuICAgIG9tbmlub21pY29uOiB0cnVlLFxuICAgIG9tbmlub21pY29uUGF0aDogJ0FkdmVudHVyZXMvT21uaW5vbWljb24ubWQnLFxuICAgIHNwZWxsYm9vazogdHJ1ZSxcbiAgICBzcGVsbGJvb2tQYXRoOiAnQ29tcGVuZGl1bS9TcGVsbHMvX1NwZWxsYm9vay5tZCcsXG4gIH0sXG4gIGxhdGVzdERlZmF1bHRzOiB1bmRlZmluZWQsXG4gIHBhdGhPdmVycmlkZXM6IHt9LFxuICBiYWNrdXBGaWxlczoge30sXG4gIGJhY2t1cFBhdGg6ICcnLFxuICBhdXRvQmFja3VwOiBmYWxzZSxcbiAgbGFzdEJhY2t1cFRpbWU6ICcnLFxuICBiYWNrdXBFcnJvcjogJycsXG4gIGN1c3RvbVBhdGhzOiBbXSxcbiAgYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZTogdHJ1ZSxcbiAgbmVlZHNJbnN0YWxsOiB0cnVlLFxuICBoaWdobGlnaHRFbmFibGVkOiBmYWxzZSxcbiAgaGlnaGxpZ2h0Q29sb3JMaWdodDogJ3JnYigxMDcsIDE0NiwgMTIwKScsXG4gIGhpZ2hsaWdodENvbG9yRGFyazogJ3JnYiggNTAsICA3MCwgIDUwKScsXG4gIHJ1bGVzZXRDb21wZW5kaXVtOiBcIlwiLFxuICBydWxlc2V0UmVmZXJlbmNlOiBbXSxcbn07XG5cbmludGVyZmFjZSBDdXN0b21QYXRoRW50cnkge1xuICB2YXVsdFBhdGg6IHN0cmluZztcbiAgbWFuaWZlc3RLZXk6IHN0cmluZztcbiAgZG9VcGRhdGU6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFuaWZlc3RGaWxlRW50cnkge1xuICBwYXRoOiBzdHJpbmc7XG4gIGtleTogc3RyaW5nO1xuICBjdXN0b21PdmVycmlkZT86IGJvb2xlYW47XG4gIGRpc3BsYXlOYW1lPzogc3RyaW5nO1xuICBvcHRpb25hbD86IGJvb2xlYW47IC8vIFx1MjE5MCBtYXJrIG9wdGlvbmFsIGZpbGVzL2ZvbGRlcnMgaWYgeW91IHdpc2hcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnN0YWxsT3B0aW9ucyB7XG5cdGNvbXBlbmRpdW06IHN0cmluZztcblx0cmVmZXJlbmNlczogc3RyaW5nW107XG4gIH1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgcmVxdWlyZXNHcmFwaDogTWFwPHN0cmluZywgc3RyaW5nW10+O1xuICBwdWJsaWMgc2V0dGluZ3NUYWI6IFRvb2xraXRTZXR0aW5nc1RhYjtcbiAgc2V0dGluZ3M6IFRvb2xraXRTZXR0aW5ncztcbiAgZmlsZUNhY2hlTWFuYWdlcjogVG9vbGtpdEZpbGVDYWNoZU1hbmFnZXI7XG4gIG1hbmlmZXN0Q2FjaGU6IHtcbiAgICBmaWxlczogTWFuaWZlc3RGaWxlRW50cnlbXTtcbiAgICBmb2xkZXJzOiBNYW5pZmVzdEZpbGVFbnRyeVtdO1xuICB9ID0geyBmaWxlczogW10sIGZvbGRlcnM6IFtdIH07XG4gIGNoYW5nZWxvZzogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgYXV0b0NoZWNrSW50ZXJ2YWw6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG9sZFBhdGhzQnlHaXRodWI6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgcHJpdmF0ZSBzdHlsZUVsOiBIVE1MU3R5bGVFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgYmFja3VwTWFuYWdlcjogQmFja3VwTWFuYWdlcjtcbiAgZXhjbHVkZWRQYXRocyA9IFtcbiAgICAnLm9ic2lkaWFuJyxcbiAgICAnLkRTX1N0b3JlJyxcbiAgICAnLmdpdGlnbm9yZScsXG4gICAgJy5naXRhdHRyaWJ1dGVzJyxcbiAgICAnLmdpdGh1YicsXG4gICAgJ1JFQURNRS5tZCcsXG4gICAgJy52ZXJzaW9uLmpzb24nLFxuICAgICdwbHVnaW5zJyxcbiAgICAnQ29tcGVuZGl1bSdcbiAgXTtcbiAgXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIRUxQRVJTIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIC8qKiBHaXZlbiBhIEdpdEh1YiBwYXRoLCByZXR1cm4gdGhlIG92ZXJyaWRkZW4gdmF1bHQgcGF0aCBvciB0aGUgb3JpZ2luYWwuICovXG4gIHJlc29sdmVWYXVsdFBhdGgoZ2l0aHViUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoXG4gICAgICAoYykgPT5cbiAgICAgICAgYy5tYW5pZmVzdEtleSA9PT0gZ2l0aHViUGF0aCB8fFxuICAgICAgICBjLm1hbmlmZXN0S2V5ID09PSB0aGlzLmtleUZvcihnaXRodWJQYXRoKVxuICAgICk7XG4gICAgcmV0dXJuIGN1c3RvbT8udmF1bHRQYXRoID8/IGdpdGh1YlBhdGg7XG4gIH1cblxuICAvKiogQ29udmVydCBcdTIwMUNzb21lL2ZvbGRlci9maWxlLm1kXHUyMDFEIFx1MjE5MiBcdTIwMUNzb21lLWZvbGRlci1maWxlXHUyMDFEIChsb3dlcmNhc2VkLCBubyBleHRlbnNpb24pLiAqL1xuICBrZXlGb3IocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gcGF0aFxuICAgICAgLnJlcGxhY2UoL1svXFxcXF0vZywgJy0nKVxuICAgICAgLnJlcGxhY2UoL1xcLlteLl0rJC8sICcnKVxuICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICBpc0V4Y2x1ZGVkKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmV4Y2x1ZGVkUGF0aHMuc29tZShcbiAgICAgIChleCkgPT5cbiAgICAgICAgcGF0aCA9PT0gZXggfHxcbiAgICAgICAgcGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKSB8fFxuICAgICAgICBwYXRoLmluY2x1ZGVzKGAvJHtleH0vYCkgfHxcbiAgICAgICAgcGF0aC5lbmRzV2l0aChgLyR7ZXh9YCkgfHxcbiAgICAgICAgcGF0aC5pbmNsdWRlcyhgLyR7ZXh9YClcbiAgICApO1xuICB9XG4gIFxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQ1VTVE9NIElOU1RBTEwgTE9HSUMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgcHVibGljIGFzeW5jIHBlcmZvcm1DdXN0b21JbnN0YWxsKFxuICAgIHRvSW5zdGFsbDogeyBwYXRoOiBzdHJpbmc7IGlzRm9sZGVyOiBib29sZWFuIH1bXVxuICApOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRcblx0Ly8gb3B0aW9uYWwgYmFja3VwIC8vXG5cdGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKVxuXHQuZmlsdGVyKChmKTogZiBpcyBURmlsZSA9PiBmIGluc3RhbmNlb2YgVEZpbGUpXG5cdC5tYXAoKGYpID0+IGYucGF0aCk7XG5cdGNvbnN0IG5vbk1hcmtlckZpbGVzID0gYWxsRmlsZXMuZmlsdGVyKChwKSA9PiBwICE9PSAnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCcpO1xuXG5cdGlmIChub25NYXJrZXJGaWxlcy5sZW5ndGggPiAwICYmIHRoaXMuc2V0dGluZ3MuYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZSkge1xuXHRjb25zdCBmb2xkZXIgPSBhd2FpdCB0aGlzLmJhY2t1cE1hbmFnZXIuYmFja3VwVmF1bHRNaXJyb3IoJ3ByZS1jdXN0b20taW5zdGFsbCcpO1xuXHRuZXcgTm90aWNlKGBCYWNrdXAgYmVmb3JlIGN1c3RvbVx1MjAxMGluc3RhbGwgY3JlYXRlZCBhdDogJHtmb2xkZXJ9YCk7XG5cdH1cbiAgICAvLyAyKSBMb29wIG92ZXIgZWFjaCBzZWxlY3RlZCBwYXRoXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0b0luc3RhbGwpIHtcbiAgICAgIGlmIChlbnRyeS5pc0ZvbGRlcikge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZW50cnkucGF0aCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYENyZWF0ZWQgZm9sZGVyOiAke2VudHJ5LnBhdGh9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpbGUgXHUyMTkyIGZpbmQgTWFuaWZlc3RGaWxlRW50cnlcbiAgICAgICAgY29uc3QgbWFuaWZlc3RFbnRyeSA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5maW5kKFxuICAgICAgICAgIChmKSA9PiBmLnBhdGggPT09IGVudHJ5LnBhdGhcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFtYW5pZmVzdEVudHJ5KSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgZmluZCBtYW5pZmVzdCBlbnRyeSBmb3IgZmlsZTogJHtlbnRyeS5wYXRofWApO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJldXNlIHlvdXIgZXhpc3RpbmcgXHUyMDFDdXBkYXRlRW50cnlGcm9tTWFuaWZlc3RcdTIwMUQgKGZvcmNlID0gdHJ1ZSlcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVFbnRyeUZyb21NYW5pZmVzdChtYW5pZmVzdEVudHJ5LCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG5cdFx0Ly8gMykgVXBkYXRlIC52ZXJzaW9uLmpzb24gYW5kIHNldHRpbmdzXG5cdFx0YXdhaXQgdGhpcy51cGRhdGVWZXJzaW9uRmlsZSgpO1xuXHRcdHRoaXMuc2V0dGluZ3MuaW5zdGFsbGVkVmVyc2lvbiA9XG5cdFx0dGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiA/PyB0aGlzLnNldHRpbmdzLmluc3RhbGxlZFZlcnNpb247XG5cdFx0dGhpcy5zZXR0aW5ncy5sYXN0Rm9yY2VVcGRhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cdFx0dGhpcy5zZXR0aW5ncy5uZWVkc0luc3RhbGwgPSBmYWxzZTtcblx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0Ly8gNCkgQ3JlYXRlIHRoZSBoaWRkZW4gbWFya2VyIGZpbGVcblx0XHRjb25zdCBtYXJrZXJQYXRoID0gJy52dnVuZGVybG9yZV9pbnN0YWxsZWQnO1xuXHRcdGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlclBhdGgpKSkge1xuXHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShtYXJrZXJQYXRoLCAnJyk7XG5cdFx0fVxuXG5cdFx0Ly8gNSkgUmVcdTIwMTBlbmFibGUgaGlnaGxpZ2h0aW5nIChhbHdheXMgdHVybiBpdCBiYWNrIG9uKVxuXHRcdHRoaXMuc2V0dGluZ3MubmVlZHNJbnN0YWxsID0gZmFsc2U7XG5cdFx0dGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkID0gdHJ1ZTtcblx0XHRhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG5cdFx0XG5cdFx0aWYgKHRoaXMuc2V0dGluZ3NUYWIpIHtcblx0XHQgIHRoaXMuc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xuXHRcdH1cblx0XHRuZXcgTm90aWNlKCdcdTI3MDUgQ3VzdG9tIGluc3RhbGwgY29tcGxldGUgXHUyMDI2Jyk7XG5cdH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSElHSExJR0hUSU5HIChMaWdodCArIERhcmsgTW9kZSkgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgcHJpdmF0ZSBnZXQgaGlnaGxpZ2h0Q1NTKCk6IHN0cmluZyB7XG4gICAgY29uc3QgbGlnaHQgPSB0aGlzLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yTGlnaHQudHJpbSgpIHx8ICdyZ2JhKDEwNywxNDYsMTIwLDEpJztcbiAgICBjb25zdCBkYXJrID0gdGhpcy5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckRhcmsudHJpbSgpIHx8ICdyZ2JhKCA1MCwgNzAsIDUwLDEpJztcblxuICAgIGNvbnN0IGZpbGVTZWxlY3RvcnMgPSB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMubWFwKChmKSA9PiB7XG4gICAgICBjb25zdCBlc2NhcGVkID0gZi5wYXRoLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKTtcbiAgICAgIHJldHVybiBgLm5hdi1maWxlLXRpdGxlW2RhdGEtcGF0aD1cIiR7ZXNjYXBlZH1cIl1gO1xuICAgIH0pO1xuXG4gICAgY29uc3QgZm9sZGVyU2VsZWN0b3JzID0gdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMubWFwKChmKSA9PiB7XG4gICAgICBjb25zdCBlc2NhcGVkID0gZi5wYXRoLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKTtcbiAgICAgIHJldHVybiBgLm5hdi1mb2xkZXItdGl0bGVbZGF0YS1wYXRoPVwiJHtlc2NhcGVkfVwiXWA7XG4gICAgfSk7XG5cbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXG4gICAgICBgOnJvb3Qge2AsXG4gICAgICBgICAtLXZ2dW5kZXJsb3JlLXRvb2xraXQtaGlnaGxpZ2h0OiAke2xpZ2h0fTtgLFxuICAgICAgYH1gLFxuICAgICAgYGAsXG4gICAgICBgYm9keS50aGVtZS1kYXJrIHtgLFxuICAgICAgYCAgLS12dnVuZGVybG9yZS10b29sa2l0LWhpZ2hsaWdodDogJHtkYXJrfTtgLFxuICAgICAgYH1gLFxuICAgICAgYGAsXG4gICAgXTtcblxuICAgIGlmIChmaWxlU2VsZWN0b3JzLmxlbmd0aCkge1xuICAgICAgbGluZXMucHVzaChgJHtmaWxlU2VsZWN0b3JzLmpvaW4oJywgJyl9IHtgKTtcbiAgICAgIGxpbmVzLnB1c2goYCAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdnZ1bmRlcmxvcmUtdG9vbGtpdC1oaWdobGlnaHQpO2ApO1xuICAgICAgbGluZXMucHVzaChgICBib3JkZXItcmFkaXVzOiAzcHg7YCk7XG4gICAgICBsaW5lcy5wdXNoKGB9YCk7XG4gICAgICBsaW5lcy5wdXNoKGBgKTtcbiAgICB9XG5cbiAgICBpZiAoZm9sZGVyU2VsZWN0b3JzLmxlbmd0aCkge1xuICAgICAgbGluZXMucHVzaChgJHtmb2xkZXJTZWxlY3RvcnMuam9pbignLCAnKX0ge2ApO1xuICAgICAgbGluZXMucHVzaChgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS12dnVuZGVybG9yZS10b29sa2l0LWhpZ2hsaWdodCk7YCk7XG4gICAgICBsaW5lcy5wdXNoKGAgIGJvcmRlci1yYWRpdXM6IDNweDtgKTtcbiAgICAgIGxpbmVzLnB1c2goYH1gKTtcbiAgICAgIGxpbmVzLnB1c2goYGApO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHB1YmxpYyBlbmFibGVIaWdobGlnaHQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3R5bGVFbCkgcmV0dXJuO1xuICAgIHRoaXMuc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgdGhpcy5zdHlsZUVsLmlkID0gJ3Z2dW5kZXJsb3JlLWhpZ2hsaWdodC1pbmplY3QnO1xuICAgIHRoaXMuc3R5bGVFbC50ZXh0Q29udGVudCA9IHRoaXMuaGlnaGxpZ2h0Q1NTO1xuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodGhpcy5zdHlsZUVsKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNhYmxlSGlnaGxpZ2h0KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5zdHlsZUVsKSByZXR1cm47XG4gICAgdGhpcy5zdHlsZUVsLnJlbW92ZSgpO1xuICAgIHRoaXMuc3R5bGVFbCA9IG51bGw7XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUkVNT1RFIEJBU0VMSU5FIENBQ0hJTkcgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgcHVibGljIGFzeW5jIGZldGNoUmVtb3RlQmFzZWxpbmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc29sZS5sb2coJ1x1RDgzRFx1REQwMSBmZXRjaFJlbW90ZUJhc2VsaW5lKCkgY2FsbGVkJyk7XG5cbiAgICBpZiAoIXRoaXMubWFuaWZlc3RDYWNoZSB8fCAhQXJyYXkuaXNBcnJheSh0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1x1MjZBMFx1RkUwRiBtYW5pZmVzdENhY2hlIGlzIG1pc3Npbmcgb3IgaW52YWxpZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByYXdVcmwgPSBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvbWFpbi8ke2VudHJ5LnBhdGh9YDtcbiAgICAgICAgY29uc3QgcmVtb3RlVGV4dCA9IGF3YWl0IChhd2FpdCBmZXRjaChyYXdVcmwpKS50ZXh0KCk7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkID0gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuXG4gICAgICAgIC8vIElmIHJlbWFwcGVkLCByZW1vdmUgdGhlIG9sZCBjYWNoZSBlbnRyeVxuICAgICAgICBpZiAocmVzb2x2ZWQgIT09IGVudHJ5LnBhdGgpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIucmVtb3ZlRnJvbUNhY2hlKGVudHJ5LnBhdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKFxuICAgICAgICAgIHJlc29sdmVkLFxuICAgICAgICAgIHJlbW90ZVRleHQsXG4gICAgICAgICAgZW50cnkucGF0aCxcbiAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggcmF3IGJhc2VsaW5lIGZvciAke2VudHJ5LnBhdGh9YCwgZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1x1RDgzRFx1RENFNiBGaW5hbCBjYWNoZTonLCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuZ2V0Q2FjaGUoKSk7XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgTUFSS0VSIEZJTEUgQ0hFQ0tTIChmaXJzdFx1MjAxMHJ1biBkZXRlY3Rpb24pIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tNYXJrZXJGaWxlKCkge1xuICAgIGNvbnN0IGRldkZvcmNlID0gKHdpbmRvdyBhcyBhbnkpLmZvcmNlTmVlZHNJbnN0YWxsO1xuICAgIGlmIChkZXZGb3JjZSkge1xuICAgICAgdGhpcy5zZXR0aW5ncy5uZWVkc0luc3RhbGwgPSB0cnVlO1xuICAgICAgY29uc29sZS5sb2coJ1x1RDgzRVx1RERFQSBERVYgTU9ERTogRm9yY2luZyBuZWVkc0luc3RhbGwgPSB0cnVlJyk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3NUYWIpIHRoaXMuc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG1hcmtlclBhdGggPSAnLlRFU1RfdnZ1bmRlcmxvcmVfaW5zdGFsbGVkJztcbiAgICBjb25zdCBtYXJrZXJFeGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhtYXJrZXJQYXRoKTtcbiAgICB0aGlzLnNldHRpbmdzLm5lZWRzSW5zdGFsbCA9ICFtYXJrZXJFeGlzdHM7XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIG1hcmtlckV4aXN0c1xuICAgICAgICA/ICdcdTI3MDUgTWFya2VyIGZpbGUgZm91bmQgXHUyMTkyIG5lZWRzSW5zdGFsbCA9IGZhbHNlJ1xuICAgICAgICA6ICdcdUQ4M0RcdURGRTEgTWFya2VyIGZpbGUgTk9UIGZvdW5kIFx1MjE5MiBuZWVkc0luc3RhbGwgPSB0cnVlJ1xuICAgICk7XG5cbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIGlmICh0aGlzLnNldHRpbmdzVGFiKSB7XG4gICAgICB0aGlzLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcbiAgICB9XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgTUFOSUZFU1QgU1lOQyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBzeW5jTWFuaWZlc3QoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFxuICAgICAgICAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvbWFpbi9tYW5pZmVzdC5qc29uJ1xuICAgICAgKTtcbiAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBtYW5pZmVzdDogJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgIGNvbnN0IG1hbmlmZXN0ID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIHRoaXMuc2V0dGluZ3MubGF0ZXN0RGVmYXVsdHMgPSBtYW5pZmVzdC5kZWZhdWx0UGF0aHMgfHwge307XG4gICAgICB0aGlzLm1hbmlmZXN0Q2FjaGUgPSBtYW5pZmVzdDtcblxuICAgICAgY29uc3QgbWFuaWZlc3RDb250ZW50ID0gSlNPTi5zdHJpbmdpZnkobWFuaWZlc3QsIG51bGwsIDIpO1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZSgnbWFuaWZlc3QuanNvbicsIG1hbmlmZXN0Q29udGVudCk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICBjb25zb2xlLmxvZygnTWFuaWZlc3Qgc3luY2VkIGFuZCBsb2NhbCBtYW5pZmVzdCB1cGRhdGVkLicpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzeW5jaW5nIG1hbmlmZXN0OicsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBzeW5jIG1hbmlmZXN0LicpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQTFVHSU4gTElGRUNZQ0xFIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgdGhpcy5iYWNrdXBNYW5hZ2VyID0gbmV3IEJhY2t1cE1hbmFnZXIodGhpcy5hcHAudmF1bHQpO1xuXG4gICAgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyID0gbmV3IFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyKFxuICAgICAgdGhpcy5hcHAudmF1bHQsXG4gICAgICB0aGlzLnNldHRpbmdzLmZpbGVDYWNoZSA/PyB7fSxcbiAgICAgIGFzeW5jICgpID0+IGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKClcbiAgICApO1xuXG4gICAgdGhpcy5zZXR0aW5nc1RhYiA9IG5ldyBUb29sa2l0U2V0dGluZ3NUYWIodGhpcy5hcHAsIHRoaXMpO1xuICAgIHRoaXMuYWRkU2V0dGluZ1RhYih0aGlzLnNldHRpbmdzVGFiKTtcblxuICAgIC8vIEltbWVkaWF0ZWx5IGxvYWQgYW55IGNhY2hlZCBtYW5pZmVzdC5qc29uLiBJZiBub3QgcHJlc2VudCwgd2UnbGwgZmV0Y2ggaW4gYSBtb21lbnQuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJ21hbmlmZXN0Lmpzb24nKTtcbiAgICAgIHRoaXMubWFuaWZlc3RDYWNoZSA9IEpTT04ucGFyc2UoY29udGVudCk7XG4gICAgICBjb25zb2xlLmxvZygnXHUyNzA1IExvYWRlZCBtYW5pZmVzdCBmcm9tIHZhdWx0OicsIHRoaXMubWFuaWZlc3RDYWNoZSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ01hbmlmZXN0IG5vdCBmb3VuZCBpbiB2YXVsdDsgd2lsbCBmZXRjaCBmcm9tIEdpdEh1YiBzaG9ydGx5LicpO1xuICAgIH1cblxuICAgIC8vIElmIGhpZ2hsaWdodGluZyB3YXMgT04gYmVmb3JlLCByZXN0b3JlIGl0IG5vdzpcblx0aWYgKHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCAmJiAhdGhpcy5zZXR0aW5ncy5uZWVkc0luc3RhbGwpIHtcblx0XHR0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuXHQgIH1cblxuICAgIC8vIERlZmVyIGhlYXZpZXIgdGFza3Mgc2xpZ2h0bHkgc28gVUkgaXNuXHUyMDE5dCBibG9ja2VkOlxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5zeW5jTWFuaWZlc3QoKTtcbiAgICAgIGF3YWl0IHRoaXMuc2hvd0luZGV4aW5nTW9kYWwoKTtcbiAgICAgIGF3YWl0IHRoaXMuY2hlY2tGb3JVcGRhdGVzKCk7XG5cbiAgICAgIC8vIEJ1aWxkIHJldmVyc2UgY2FjaGUgZm9yIFx1MjAxQ21vdmVkXHUyMDFEIGRldGVjdGlvblxuICAgICAgdGhpcy5vbGRQYXRoc0J5R2l0aHViID0gT2JqZWN0LmVudHJpZXMoXG4gICAgICAgIHRoaXMuZmlsZUNhY2hlTWFuYWdlci5nZXRDYWNoZSgpIGFzIFJlY29yZDxzdHJpbmcsIFRvb2xraXRGaWxlQ2FjaGVFbnRyeT5cbiAgICAgICkucmVkdWNlKChtYXAsIFt2YXVsdFBhdGgsIGVudHJ5XSkgPT4ge1xuICAgICAgICBtYXBbZW50cnkuZ2l0aHViUGF0aF0gPSB2YXVsdFBhdGg7XG4gICAgICAgIHJldHVybiBtYXA7XG4gICAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTtcblxuICAgICAgY29uc29sZS5sb2coJ1x1RDgzRFx1RENFNiBDYWNoZWQgRmlsZXM6JywgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmdldENhY2hlKCkpO1xuICAgIH0sIDI1MCk7XG5cbiAgICB0aGlzLnNjaGVkdWxlQXV0b1VwZGF0ZUNoZWNrKCk7XG5cbiAgICAvLyBEZWZlbnNpdmU6IGVuc3VyZSBzZXR0aW5ncy5jdXN0b21QYXRocyBleGlzdHNcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMpIHtcbiAgICAgIHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMgPSBbXTtcbiAgICB9XG5cbiAgICAvLyBCdWlsZCB0aGUgcmVxdWlyZXNHcmFwaCBmcm9tIG1hbmlmZXN0Lmpzb25cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmF3ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCdtYW5pZmVzdC5qc29uJyk7XG4gICAgICBjb25zdCBtYW5pZmVzdCA9IEpTT04ucGFyc2UocmF3KSBhcyB7XG4gICAgICAgIGZpbGVzOiBBcnJheTx7IGtleTogc3RyaW5nOyByZXF1aXJlcz86IHN0cmluZ1tdIH0+O1xuICAgICAgICBmb2xkZXJzOiBBcnJheTx7IGtleTogc3RyaW5nOyByZXF1aXJlcz86IHN0cmluZ1tdIH0+O1xuICAgICAgfTtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBbLi4uKG1hbmlmZXN0LmZvbGRlcnMgfHwgW10pLCAuLi4obWFuaWZlc3QuZmlsZXMgfHwgW10pXTtcbiAgICAgIHRoaXMucmVxdWlyZXNHcmFwaCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmdbXT4oKTtcbiAgICAgIGZvciAoY29uc3QgZSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIHRoaXMucmVxdWlyZXNHcmFwaC5zZXQoZS5rZXksIGUucmVxdWlyZXMgPz8gW10pO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGJ1aWxkIHJlcXVpcmVzR3JhcGggKG1hbmlmZXN0Lmpzb24gbWlzc2luZyBvciBpbnZhbGlkKS4nKTtcbiAgICAgIHRoaXMucmVxdWlyZXNHcmFwaCA9IG5ldyBNYXAoKTtcbiAgICB9XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgICB0aGlzLmRpc2FibGVIaWdobGlnaHQoKTtcbiAgICBpZiAodGhpcy5hdXRvQ2hlY2tJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmF1dG9DaGVja0ludGVydmFsKTtcbiAgICB9XG4gIH1cblxuICBzY2hlZHVsZUF1dG9VcGRhdGVDaGVjaygpIHtcbiAgICB0aGlzLmF1dG9DaGVja0ludGVydmFsID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMuY2hlY2tGb3JVcGRhdGVzKCk7XG4gICAgfSwgNjAgKiA2MCAqIDEwMDApO1xuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEJBQ0tVUCAmIFVORE8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgYmFja3VwRmlsZShmaWxlUGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzID0gdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcyB8fCB7fTtcbiAgICB0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzW2ZpbGVQYXRoXSA9IGNvbnRlbnQ7XG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICBjb25zb2xlLmxvZyhgQmFja3VwIHN0b3JlZCBmb3IgJHtmaWxlUGF0aH1gKTtcbiAgfVxuXG4gIGFzeW5jIHVuZG9Gb3JjZVVwZGF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgfHwgT2JqZWN0LmtleXModGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcykubGVuZ3RoID09PSAwKSB7XG4gICAgICBuZXcgTm90aWNlKCdObyBiYWNrdXBzIGF2YWlsYWJsZSB0byByZXN0b3JlLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtmaWxlUGF0aCwgYmFja3VwQ29udGVudF0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcykpIHtcbiAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlUGF0aCwgYmFja3VwQ29udGVudCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBSZXN0b3JlZCAke2ZpbGVQYXRofWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBiYWNrdXBDb250ZW50KTtcbiAgICAgICAgY29uc29sZS5sb2coYFJlY3JlYXRlZCBhbmQgcmVzdG9yZWQgJHtmaWxlUGF0aH1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgbmV3IE5vdGljZSgnXHUyNzA1IEZvcmNlIHVwZGF0ZSB1bmRvbmUuJyk7XG4gICAgdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcyA9IHt9O1xuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRk9MREVSIFNZTkMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgc3luY01pc3NpbmdGb2xkZXJzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLm1hbmlmZXN0Q2FjaGUgJiYgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgIGZvciAoY29uc3QgZm9sZGVyRW50cnkgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IGZvbGRlckVudHJ5LnBhdGg7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZvbGRlclBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVEQ0MxIENyZWF0ZWQgbWlzc2luZyBmb2xkZXI6ICR7Zm9sZGVyUGF0aH1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgRk9SQ0UtVVBEQVRFIFBSRVZJRVcgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbmFzeW5jIGJ1aWxkRm9yY2VVcGRhdGVQcmV2aWV3KCk6IFByb21pc2U8UHJldmlld0l0ZW1bXT4ge1xuXHRjb25zdCBwcmV2aWV3TGlzdDogUHJldmlld0l0ZW1bXSA9IFtdO1xuXG5cdC8vIDApIENvbGxlY3QgYWxsIGJsYWNrbGlzdGVkIGZvbGRlcnMgKG1hbmlmZXN0S2V5IHZhbHVlcyB3aGVyZSBkb1VwZGF0ZSA9PT0gZmFsc2UpXG5cdGNvbnN0IGRlbnlMaXN0ZWRGb2xkZXJzID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRoc1xuXHQgIC5maWx0ZXIoKGMpID0+IGMuZG9VcGRhdGUgPT09IGZhbHNlKVxuXHQgIC5tYXAoKGMpID0+IGMubWFuaWZlc3RLZXkpO1xuXG5cdC8vIDEpIERlbnktbGlzdGVkIGZpbGVzIGZpcnN0XHUyMDE0YnV0IG9ubHkgaWYgdGhleSB3b3VsZCBhY3R1YWxseSBiZSBcIm5ld1wiIG9yIFwib3V0IG9mIGRhdGVcIlxuXHRmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0ICBpZiAoZW50cnkub3B0aW9uYWwpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGVudHJ5LmtleSk7XG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0ZW50cnkucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcblx0ICApO1xuXHQgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuXHRcdC8vIFJlc29sdmUgdmF1bHQgcGF0aCAoYWNjb3VudGluZyBmb3IgYW55IHJlbWFwcGluZylcblx0XHRjb25zdCB2cCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChlbnRyeS5wYXRoKTtcblxuXHRcdC8vIENoZWNrOiBkb2VzIHRoZSBmaWxlIGV4aXN0IGxvY2FsbHk/IEFuZCBpcyBpdCB1cC10by1kYXRlP1xuXHRcdGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZwKTtcblx0XHRjb25zdCB1cFRvRGF0ZSA9IGV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodnApKTtcblxuXHRcdC8vIE9ubHkgc2hvdyBhcyBkZW55LWxpc3RlZCBpZiBpdCB3b3VsZCBoYXZlIGJlZW4gXHUyMDFDbmV3XHUyMDFEIChtaXNzaW5nKSBvciBcdTIwMUNvdXQtb2YtZGF0ZVx1MjAxRFxuXHRcdGlmICghZXhpc3RzIHx8ICF1cFRvRGF0ZSkge1xuXHRcdCAgcHJldmlld0xpc3QucHVzaCh7XG5cdFx0XHRmaWxlUGF0aDogdnAsXG5cdFx0XHRhY3Rpb246ICdkZW55LWxpc3RlZCBcdTIwMTMgd2lsbCBub3QgdXBkYXRlJyxcblx0XHRcdHNlbGVjdGVkOiBmYWxzZSxcblx0XHQgIH0pO1xuXHRcdH1cblx0ICB9XG5cdH1cblxuXHQvLyAyKSBGVUxMLVNZTkMgbW9kZSAoc2tpcCBhbnkgZmlsZS9mb2xkZXIgdGhhdCBpcyBibGFja2xpc3RlZClcblx0aWYgKCF0aGlzLnNldHRpbmdzLmN1c3RvbWl6ZVVwZGF0ZXMpIHtcblx0ICBmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdFx0Ly8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHRcdGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0ICBjb250aW51ZTtcblx0XHR9XG5cblx0XHRjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYua2V5KTtcblx0XHRjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cblx0XHQgIGYucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcblx0XHQpO1xuXHRcdGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgdnAgPSB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZi5wYXRoKTtcblx0XHRsZXQgdGFnID0gJyc7XG5cdFx0aWYgKHZwICE9PSBmLnBhdGgpIHRhZyA9ICcgKHJlbWFwcGVkKSc7XG5cblx0XHRjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2cCk7XG5cdFx0aWYgKCFleGlzdHMpIHtcblx0XHQgIHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdFx0ZmlsZVBhdGg6IHZwLFxuXHRcdFx0YWN0aW9uOiBgbmV3IGZpbGUke3RhZ31gLFxuXHRcdFx0c2VsZWN0ZWQ6IHRydWUsXG5cdFx0ICB9KTtcblx0XHR9IGVsc2UgaWYgKCEoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodnApKSkge1xuXHRcdCAgcHJldmlld0xpc3QucHVzaCh7XG5cdFx0XHRmaWxlUGF0aDogdnAsXG5cdFx0XHRhY3Rpb246IGB3aWxsIGJlIG92ZXJ3cml0dGVuJHt0YWd9YCxcblx0XHRcdHNlbGVjdGVkOiB0cnVlLFxuXHRcdCAgfSk7XG5cdFx0fVxuXHQgIH1cblxuXHQgIGZvciAoY29uc3QgZmxkIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG5cdFx0Ly8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZm9sZGVyXG5cdFx0aWYgKGZsZC5vcHRpb25hbCkge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgaXNEZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuaW5jbHVkZXMoZmxkLnBhdGgpO1xuXHRcdGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZsZC5wYXRoKSkgJiYgIWlzRGVueUZvbGRlcikge1xuXHRcdCAgcHJldmlld0xpc3QucHVzaCh7XG5cdFx0XHRmaWxlUGF0aDogZmxkLnBhdGgsXG5cdFx0XHRhY3Rpb246ICdtaXNzaW5nIGZvbGRlciAod2lsbCBiZSBjcmVhdGVkKScsXG5cdFx0XHRzZWxlY3RlZDogdHJ1ZSxcblx0XHRcdGlzRm9sZGVyOiB0cnVlLFxuXHRcdCAgfSk7XG5cdFx0fVxuXHQgIH1cblxuXHQgIHJldHVybiBwcmV2aWV3TGlzdDtcblx0fVxuXG5cdC8vIDMpIENVU1RPTS1TWU5DIG1vZGUgKHNraXAgYW55IGZpbGUvZm9sZGVyIHRoYXQgaXMgYmxhY2tsaXN0ZWQpXG5cdGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHQgIGlmIChlbnRyeS5vcHRpb25hbCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblxuXHQgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZW50cnkua2V5KTtcblx0ICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cblx0XHRlbnRyeS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHQgICk7XG5cdCAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuXG5cdCAgY29uc3QgdmF1bHRQYXRoID0gY3VzdG9tPy52YXVsdFBhdGggPz8gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuXHQgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0UGF0aCk7XG5cdCAgY29uc3QgdXBUb0RhdGUgPSBleGlzdHMgJiYgKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKHZhdWx0UGF0aCkpO1xuXG5cdCAgbGV0IHRhZyA9ICcnO1xuXHQgIGlmICh2YXVsdFBhdGggIT09IGVudHJ5LnBhdGgpIHRhZyA9ICcgKHJlbWFwcGVkKSc7XG5cblx0ICBpZiAoIWV4aXN0cykge1xuXHRcdHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdCAgZmlsZVBhdGg6IHZhdWx0UGF0aCxcblx0XHQgIGFjdGlvbjogYG5ldyBmaWxlJHt0YWd9YCxcblx0XHQgIHNlbGVjdGVkOiB0cnVlLFxuXHRcdH0pO1xuXHQgIH0gZWxzZSBpZiAoIXVwVG9EYXRlKSB7XG5cdFx0cHJldmlld0xpc3QucHVzaCh7XG5cdFx0ICBmaWxlUGF0aDogdmF1bHRQYXRoLFxuXHRcdCAgYWN0aW9uOiBgd2lsbCBiZSBvdmVyd3JpdHRlbiR7dGFnfWAsXG5cdFx0ICBzZWxlY3RlZDogdHJ1ZSxcblx0XHR9KTtcblx0ICB9XG5cdH1cblxuXHRmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZm9sZGVyXG5cdCAgaWYgKGVudHJ5Lm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuXG5cdCAgY29uc3QgaXNEZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuaW5jbHVkZXMoZW50cnkucGF0aCk7XG5cdCAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZW50cnkucGF0aCkpICYmICFpc0RlbnlGb2xkZXIpIHtcblx0XHRwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHQgIGZpbGVQYXRoOiBlbnRyeS5wYXRoLFxuXHRcdCAgYWN0aW9uOiAnbWlzc2luZyBmb2xkZXIgKHdpbGwgYmUgY3JlYXRlZCknLFxuXHRcdCAgc2VsZWN0ZWQ6IHRydWUsXG5cdFx0ICBpc0ZvbGRlcjogdHJ1ZSxcblx0XHR9KTtcblx0ICB9XG5cdH1cblxuXHQvLyAzYykgXHUyMDFDTW92ZWRcdTIwMUQgZGV0ZWN0aW9uIChza2lwIGJsYWNrbGlzdGVkKVxuXHRmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHQgIGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuXG5cdCAgY29uc3QgbWFuaWZlc3RLZXkgPSBmLmtleTtcblx0ICBjb25zdCBtYW5pZmVzdFBhdGggPSBmLnBhdGg7XG5cdCAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBtYW5pZmVzdEtleSk7XG5cdCAgY29uc3QgcHJldlBhdGggPSB0aGlzLm9sZFBhdGhzQnlHaXRodWJbbWFuaWZlc3RQYXRoXTtcblxuXHQgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuXHRcdG1hbmlmZXN0UGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcblx0ICApO1xuXHQgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblx0ICBpZiAoY3VzdG9tICYmIGN1c3RvbS52YXVsdFBhdGggJiYgY3VzdG9tLnZhdWx0UGF0aCAhPT0gbWFuaWZlc3RQYXRoKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuXHQgIGlmIChcblx0XHRwcmV2UGF0aCAmJlxuXHRcdHByZXZQYXRoICE9PSBtYW5pZmVzdFBhdGggJiZcblx0XHQoIWN1c3RvbSB8fCBjdXN0b20udmF1bHRQYXRoID09PSBtYW5pZmVzdFBhdGgpXG5cdCAgKSB7XG5cdFx0cHJldmlld0xpc3QucHVzaCh7XG5cdFx0ICBmaWxlUGF0aDogcHJldlBhdGgsXG5cdFx0ICBhY3Rpb246IGBtb3ZlZCBcdTIxOTIgJHttYW5pZmVzdFBhdGh9YCxcblx0XHQgIHNlbGVjdGVkOiB0cnVlLFxuXHRcdH0pO1xuXHQgIH1cblx0fVxuXG5cdHJldHVybiBwcmV2aWV3TGlzdDtcbiAgfVxuXG4gIFxuICBcbiAgXG4gIGFzeW5jIGZvcmNlVXBkYXRlUHJldmlld0FuZENvbmZpcm0oKSB7XG5cdC8vIDEpIEJ1aWxkIHRoZSBmbGF0IGxpc3Qgb2YgUHJldmlld0l0ZW0gb2JqZWN0c1xuXHRjb25zdCBwcmV2aWV3TGlzdCA9IGF3YWl0IHRoaXMuYnVpbGRGb3JjZVVwZGF0ZVByZXZpZXcoKTtcbiAgXG5cdC8vIDIpIFNwbGl0IHRoZSBpdGVtcyBpbnRvIFx1MjAxQ2RlbnktbGlzdGVkXHUyMDFEIHZzLiBcdTIwMUNub3JtYWxcdTIwMUQgaXRlbXNcblx0Ly8gICAgKGJ1aWxkRm9yY2VVcGRhdGVQcmV2aWV3IHVzZXMgYWN0aW9uID0gJ2RlbnktbGlzdGVkIFx1MjAxMyB3aWxsIG5vdCB1cGRhdGUnKVxuXHRjb25zdCBkZW55SXRlbXM6IFByZXZpZXdJdGVtW10gPSBbXTtcblx0Y29uc3Qgbm9ybWFsSXRlbXM6IFByZXZpZXdJdGVtW10gPSBbXTtcblx0Zm9yIChjb25zdCBpdGVtIG9mIHByZXZpZXdMaXN0KSB7XG5cdCAgaWYgKGl0ZW0uYWN0aW9uLnN0YXJ0c1dpdGgoJ2RlbnktbGlzdGVkJykpIHtcblx0XHRkZW55SXRlbXMucHVzaChpdGVtKTtcblx0ICB9IGVsc2Uge1xuXHRcdG5vcm1hbEl0ZW1zLnB1c2goaXRlbSk7XG5cdCAgfVxuXHR9XG4gIFxuXHQvLyAzKSBDcmVhdGUgYW5kIG9wZW4gdGhlIG1vZGFsIHdpdGggYm90aCBsaXN0c1xuXHRjb25zdCBtb2RhbCA9IG5ldyAoY2xhc3MgZXh0ZW5kcyBNb2RhbCB7XG5cdCAgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW47XG5cdCAgbm9ybWFsOiBQcmV2aWV3SXRlbVtdO1xuXHQgIGRlbmllZDogUHJldmlld0l0ZW1bXTtcbiAgXG5cdCAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG5vcm1hbDogUHJldmlld0l0ZW1bXSwgZGVuaWVkOiBQcmV2aWV3SXRlbVtdKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLm5vcm1hbCA9IG5vcm1hbDtcblx0XHR0aGlzLmRlbmllZCA9IGRlbmllZDtcblx0ICB9XG4gIFxuXHQgIG9uT3BlbigpIHtcblx0XHQvLyBQcmV2ZW50IGNsaWNrcyBmcm9tIGNsb3NpbmcgYW55dGhpbmcgYmVoaW5kXG5cdFx0dGhpcy5jb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLnRpdGxlRWwuc2V0VGV4dCgnRm9yY2UgVXBkYXRlIFByZXZpZXcnKTtcbiAgXG5cdFx0Ly8gSW50cm8gcGFyYWdyYXBoXG5cdFx0dGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG5cdFx0ICB0ZXh0OlxuXHRcdFx0J1RoZSBmb2xsb3dpbmcgaXRlbXMgd2lsbCBiZSB1cGRhdGVkLiBVbmNoZWNrIGFueSBpdGVtcyB5b3UgZG8gTk9UIHdhbnQgdG8gY2hhbmdlLCB0aGVuIGNsaWNrIFwiQ29uZmlybSBhbmQgVXBkYXRlXCIuJyxcblx0XHR9KTtcbiAgXG5cdFx0Ly8gNCkgUmVuZGVyIFx1MjAxQ25vcm1hbFx1MjAxRCAobm9uLWRlbnkpIGl0ZW1zIHdpdGggY2hlY2tib3hlc1xuXHRcdGlmICh0aGlzLm5vcm1hbC5sZW5ndGgpIHtcblx0XHQgIGNvbnN0IG5vcm1hbENvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcblx0XHQgIE9iamVjdC5hc3NpZ24obm9ybWFsQ29udGFpbmVyLnN0eWxlLCB7XG5cdFx0XHRtYXhIZWlnaHQ6ICczMDBweCcsXG5cdFx0XHRvdmVyZmxvd1k6ICdhdXRvJyxcblx0XHRcdG1hcmdpblRvcDogJzFlbScsXG5cdFx0ICB9KTtcbiAgXG5cdFx0ICB0aGlzLm5vcm1hbC5mb3JFYWNoKChpdGVtKSA9PiB7XG5cdFx0XHRjb25zdCByb3cgPSBub3JtYWxDb250YWluZXIuY3JlYXRlRGl2KCk7XG5cdFx0XHRPYmplY3QuYXNzaWduKHJvdy5zdHlsZSwge1xuXHRcdFx0ICBkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHQgIGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0Jyxcblx0XHRcdCAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcblx0XHRcdCAgcGFkZGluZzogJzZweCAwJyxcblx0XHRcdCAgZm9udEZhbWlseTogJ21vbm9zcGFjZScsXG5cdFx0XHR9KTtcbiAgXG5cdFx0XHQvLyBMZWZ0OiBmaWxlIHBhdGggKyBhY3Rpb24gbm90ZVxuXHRcdFx0Y29uc3QgbGFiZWwgPSByb3cuY3JlYXRlRGl2KCk7XG5cdFx0XHRsYWJlbC5zdHlsZS5mbGV4R3JvdyA9ICcxJztcblx0XHRcdGxhYmVsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0XHRsYWJlbC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XG4gIFxuXHRcdFx0Y29uc3QgbGFiZWxXcmFwcGVyID0gbGFiZWwuY3JlYXRlRGl2KCk7XG5cdFx0XHRsYWJlbFdyYXBwZXIudGV4dENvbnRlbnQgPSBpdGVtLmZpbGVQYXRoO1xuICBcblx0XHRcdGNvbnN0IG5vdGUgPSBsYWJlbC5jcmVhdGVEaXYoeyB0ZXh0OiBpdGVtLmFjdGlvbiB9KTtcblx0XHRcdG5vdGUuc3R5bGUuZm9udFNpemUgPSAnMTNweCc7XG5cdFx0XHRub3RlLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblx0XHRcdG5vdGUuc3R5bGUuZm9udFN0eWxlID0gJ2l0YWxpYyc7XG4gIFxuXHRcdFx0Ly8gUmlnaHQ6IGNoZWNrYm94XG5cdFx0XHRjb25zdCBjaGVja2JveCA9IHJvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG5cdFx0XHRjaGVja2JveC5jaGVja2VkID0gaXRlbS5zZWxlY3RlZDtcblx0XHRcdGNoZWNrYm94Lm9uY2hhbmdlID0gKCkgPT4ge1xuXHRcdFx0ICBpdGVtLnNlbGVjdGVkID0gY2hlY2tib3guY2hlY2tlZDtcblx0XHRcdH07XG5cdFx0ICB9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3Qgbm9DYW5kaWRhdGVzID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihub0NhbmRpZGF0ZXMuc3R5bGUsIHtcblx0XHRcdCAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0XHQgIGZvbnRGYW1pbHk6ICdtb25vc3BhY2UnLFxuXHRcdFx0ICBmb250U3R5bGU6ICdpdGFsaWMnLFxuXHRcdFx0ICBtYXJnaW5Ub3A6ICcwLjVlbScsXG5cdFx0XHR9KTtcblx0XHRcdG5vQ2FuZGlkYXRlcy50ZXh0Q29udGVudCA9ICdObyBmb3JjZS11cGRhdGUgY2FuZGlkYXRlcy4nO1xuXHRcdH1cbiAgXG5cdFx0Ly8gNSkgUmVuZGVyIFx1MjAxQ2RlbnktbGlzdGVkXHUyMDFEIGl0ZW1zIGluc2lkZSBhIGNvbGxhcHNlZCA8ZGV0YWlscz5cblx0XHRpZiAodGhpcy5kZW5pZWQubGVuZ3RoKSB7XG5cdFx0ICBjb25zdCBkZW55RGV0YWlscyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblx0XHQgIGRlbnlEZXRhaWxzLm9wZW4gPSBmYWxzZTtcbiAgXG5cdFx0ICBjb25zdCBzdW1tYXJ5ID0gZGVueURldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcblx0XHQgIE9iamVjdC5hc3NpZ24oc3VtbWFyeS5zdHlsZSwge1xuXHRcdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRjb2xvcjogJ3ZhcigtLXRleHQtZmFpbnQpJyxcblx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxuXHRcdFx0Z2FwOiAnMC41ZW0nLFxuXHRcdFx0bWFyZ2luVG9wOiAnMWVtJyxcblx0XHQgIH0pO1xuXHRcdCAgc3VtbWFyeS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYERlbnktTGlzdCBGaWxlcyAoJHt0aGlzLmRlbmllZC5sZW5ndGh9KWAgfSk7XG4gIFxuXHRcdCAgLy8gUm90YXRpbmcgXHUyMDFDVlZcdTIwMUQgaWNvbiBvbiBleHBhbmQvY29sbGFwc2Vcblx0XHQgIGNvbnN0IHRvZ2dsZUljb24gPSBzdW1tYXJ5LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnVlYnLCBjbHM6ICd2ay10b2dnbGUtaWNvbicgfSk7XG5cdFx0ICBPYmplY3QuYXNzaWduKHRvZ2dsZUljb24uc3R5bGUsIHtcblx0XHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHRcdGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuXHRcdFx0dHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuXHRcdFx0dHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsXG5cdFx0XHR1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFx0XHR0cmFuc2Zvcm06ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0ICB9KTtcblx0XHQgIGRlbnlEZXRhaWxzLm9udG9nZ2xlID0gKCkgPT4ge1xuXHRcdFx0dG9nZ2xlSWNvbi5zdHlsZS50cmFuc2Zvcm0gPSBkZW55RGV0YWlscy5vcGVuID8gJ3JvdGF0ZSgwZGVnKScgOiAncm90YXRlKDE4MGRlZyknO1xuXHRcdCAgfTtcbiAgXG5cdFx0ICAvLyBCb2R5IG9mIDxkZXRhaWxzPiBcdTIwMTQgZWFjaCBkZW55LWxpc3RlZCBpdGVtIGlzIGZhaW50IGFuZCBkaXNhYmxlZFxuXHRcdCAgY29uc3QgZGVueUJvZHkgPSBkZW55RGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXHRcdCAgZGVueUJvZHkuc3R5bGUucGFkZGluZ0xlZnQgPSAnMWVtJztcbiAgXG5cdFx0ICB0aGlzLmRlbmllZC5mb3JFYWNoKChpdGVtKSA9PiB7XG5cdFx0XHRjb25zdCByb3cgPSBkZW55Qm9keS5jcmVhdGVEaXYoKTtcblx0XHRcdE9iamVjdC5hc3NpZ24ocm93LnN0eWxlLCB7XG5cdFx0XHQgIGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdCAgYWxpZ25JdGVtczogJ2ZsZXgtc3RhcnQnLFxuXHRcdFx0ICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLFxuXHRcdFx0ICBwYWRkaW5nOiAnNnB4IDAnLFxuXHRcdFx0ICBmb250RmFtaWx5OiAnbW9ub3NwYWNlJyxcblx0XHRcdCAgY29sb3I6ICd2YXIoLS10ZXh0LWZhaW50KScsXG5cdFx0XHQgIGZvbnRTdHlsZTogJ2l0YWxpYycsXG5cdFx0XHR9KTtcbiAgXG5cdFx0XHRjb25zdCBsYWJlbFdyYXBwZXIgPSByb3cuY3JlYXRlRGl2KCk7XG5cdFx0XHRsYWJlbFdyYXBwZXIudGV4dENvbnRlbnQgPSBpdGVtLmZpbGVQYXRoO1xuXHRcdFx0bGFiZWxXcmFwcGVyLnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ2xpbmUtdGhyb3VnaCc7XG4gIFxuXHRcdFx0Y29uc3Qgbm90ZSA9IHJvdy5jcmVhdGVEaXYoeyB0ZXh0OiBpdGVtLmFjdGlvbiB9KTtcblx0XHRcdG5vdGUuc3R5bGUuZm9udFNpemUgPSAnMTNweCc7XG5cdFx0XHRub3RlLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtZmFpbnQpJztcblx0XHRcdG5vdGUuc3R5bGUuZm9udFN0eWxlID0gJ2l0YWxpYyc7XG4gIFxuXHRcdFx0Ly8gRGVueS1saXN0ZWQgY2hlY2tib3ggaXMgZGlzYWJsZWRcblx0XHRcdGNvbnN0IGNoZWNrYm94ID0gcm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KTtcblx0XHRcdGNoZWNrYm94LmNoZWNrZWQgPSBpdGVtLnNlbGVjdGVkO1xuXHRcdFx0Y2hlY2tib3guZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0Y2hlY2tib3gudGl0bGUgPSAnVGhpcyBpdGVtIGlzIGRlbnktbGlzdGVkJztcblx0XHQgIH0pO1xuXHRcdH1cbiAgXG5cdFx0Ly8gNikgQnV0dG9ucyBhdCB0aGUgYm90dG9tXG5cdFx0Y29uc3QgYnV0dG9uUm93ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuXHRcdE9iamVjdC5hc3NpZ24oYnV0dG9uUm93LnN0eWxlLCB7XG5cdFx0ICBkaXNwbGF5OiAnZmxleCcsXG5cdFx0ICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJyxcblx0XHQgIGdhcDogJzAuNWVtJyxcblx0XHQgIG1hcmdpblRvcDogJzEuNWVtJyxcblx0XHR9KTtcbiAgXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuXHRcdGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuICBcblx0XHRjb25zdCBjb25maXJtQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0ICB0ZXh0OiAnQ29uZmlybSBhbmQgVXBkYXRlJyxcblx0XHQgIGNsczogJ21vZC1jdGEnLFxuXHRcdH0pO1xuXHRcdGNvbmZpcm1CdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHQgIHRoaXMuY2xvc2UoKTtcblx0XHQgIC8vIFBhc3MgZXZlcnl0aGluZyBpbnRvIHBlcmZvcm1Gb3JjZVVwZGF0ZVdpdGhTZWxlY3Rpb247IGRlbnktbGlzdGVkIGl0ZW1zIHdpbGwgYmUgc2tpcHBlZFxuXHRcdCAgYXdhaXQgdGhpcy5wbHVnaW4ucGVyZm9ybUZvcmNlVXBkYXRlV2l0aFNlbGVjdGlvbihbLi4udGhpcy5ub3JtYWwsIC4uLnRoaXMuZGVuaWVkXSk7XG5cdFx0fTtcblx0ICB9XG4gIFxuXHQgIG9uQ2xvc2UoKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0ICB9XG5cdH0pKHRoaXMuYXBwLCBub3JtYWxJdGVtcywgZGVueUl0ZW1zKTtcbiAgXG5cdC8vIEF0dGFjaCBwbHVnaW4gcG9pbnRlciBhbmQgb3BlblxuXHQobW9kYWwgYXMgYW55KS5wbHVnaW4gPSB0aGlzO1xuXHRtb2RhbC5vcGVuKCk7XG4gIH1cbiAgXG5cbiAgYXN5bmMgdXBkYXRlRW50cnlGcm9tTWFuaWZlc3QoZW50cnk6IE1hbmlmZXN0RmlsZUVudHJ5LCBmb3JjZTogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBlbnRyeS5rZXkpO1xuICAgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSkge1xuICAgICAgY29uc29sZS5sb2coYFx1MjNFRFx1RkUwRiBTa2lwcGluZyAke2VudHJ5LmtleX0gKCR7ZW50cnkuZGlzcGxheU5hbWV9KSBcdTIwMTQgYmxhY2tsaXN0ZWRgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmaW5hbFZhdWx0UGF0aCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChlbnRyeS5wYXRoKTtcbiAgICBpZiAoIWZvcmNlICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZShmaW5hbFZhdWx0UGF0aCkpKSB7XG4gICAgICBjb25zb2xlLmxvZyhgXHUyNzE0XHVGRTBGIEFscmVhZHkgdXAgdG8gZGF0ZTogJHtlbnRyeS5kaXNwbGF5TmFtZX1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS92dnVuZGVybG9yZS10b29sa2l0LWZ1bGwvbWFpbi8ke2VudHJ5LnBhdGh9YDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaW5hbFZhdWx0UGF0aCwgdGV4dCk7XG4gICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUoZmluYWxWYXVsdFBhdGgsIHRleHQsIGVudHJ5LnBhdGgpO1xuICAgICAgY29uc29sZS5sb2coYFx1MjcwNSBVcGRhdGVkICR7ZW50cnkuZGlzcGxheU5hbWV9IFx1MjE5MiAke2ZpbmFsVmF1bHRQYXRofWApO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFx1Mjc0QyBFcnJvciB1cGRhdGluZyAke2VudHJ5LmRpc3BsYXlOYW1lfTpgLCBlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBwZXJmb3JtRm9yY2VVcGRhdGVXaXRoU2VsZWN0aW9uKHByZXZpZXdMaXN0OiBQcmV2aWV3SXRlbVtdKSB7XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZSkge1xuICAgICAgLy8gXHUyMDI2ICh5b3VyIGV4aXN0aW5nIGJhY2t1cCBjb2RlKSBcdTIwMjZcbiAgICB9XG5cbiAgICB0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzID0ge307XG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgIHRyeSB7XG4gICAgICAvLyBcdTI0NjAgRmlsdGVyIG91dCBmb2xkZXJzLCB1bmNoZWNrZWQsIGFuZCBkZW55LWxpc3RlZDpcbiAgICAgIGNvbnN0IHRvVXBkYXRlID0gcHJldmlld0xpc3QuZmlsdGVyKFxuICAgICAgICAoaXRlbSkgPT5cbiAgICAgICAgICBpdGVtLnNlbGVjdGVkICYmXG4gICAgICAgICAgIWl0ZW0uaXNGb2xkZXIgJiZcbiAgICAgICAgICAhdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5zb21lKFxuICAgICAgICAgICAgKGMpID0+IGMudmF1bHRQYXRoID09PSBpdGVtLmZpbGVQYXRoICYmIGMuZG9VcGRhdGUgPT09IGZhbHNlXG4gICAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgLy8gXHUyNDYxIFVwZGF0ZSBlYWNoIHNlbGVjdGVkIGZpbGVcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0b1VwZGF0ZSkge1xuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5maW5kKFxuICAgICAgICAgIChmKSA9PiB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZi5wYXRoKSA9PT0gaXRlbS5maWxlUGF0aFxuICAgICAgICApO1xuICAgICAgICBpZiAoIWVudHJ5KSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBcdTI2QTBcdUZFMEYgQ291bGQgbm90IG1hdGNoIHByZXZpZXcgaXRlbSB0byBtYW5pZmVzdDogJHtpdGVtLmZpbGVQYXRofWApO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRW50cnlGcm9tTWFuaWZlc3QoZW50cnksIHRydWUpO1xuICAgICAgfVxuXG4gICAgICAvLyBcdTI0NjIgRW5zdXJlIGFsbCBtYW5pZmVzdCBmb2xkZXJzIGV4aXN0XG4gICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihlbnRyeS5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyA0KSBCdW1wIHZlcnNpb25cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlVmVyc2lvbkZpbGUoKTtcbiAgICAgIHRoaXMuc2V0dGluZ3MuaW5zdGFsbGVkVmVyc2lvbiA9IHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gJ3Vua25vd24nO1xuICAgICAgdGhpcy5zZXR0aW5ncy5sYXN0Rm9yY2VVcGRhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICBuZXcgTm90aWNlKCdcdTI3MDUgVG9vbGtpdCBmb3JjZVx1MjAxMHVwZGF0ZWQgd2l0aCB5b3VyIHNlbGVjdGlvbnMuJyk7XG5cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzVGFiKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NUYWIudXBkYXRlVmVyc2lvbkRpc3BsYXkoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGb3JjZSB1cGRhdGUgZmFpbGVkLiBWZXJzaW9uIG5vdCBjaGFuZ2VkLicsIGVycik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgT25lIG9yIG1vcmUgZmlsZXMgZmFpbGVkLiBWZXJzaW9uIE5PVCB1cGRhdGVkLicpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQpIHtcbiAgICAgIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNJTkdMRS1GSUxFIFVQREFURSAod2l0aCBHaXRIdWIgQVBJICsgcmF3IGZhbGxiYWNrKSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyB1cGRhdGVTaW5nbGVGaWxlRnJvbUdpdEh1YihcbiAgICB7IGdpdGh1YlBhdGgsIHZhdWx0UGF0aCB9OiB7IGdpdGh1YlBhdGg6IHN0cmluZzsgdmF1bHRQYXRoOiBzdHJpbmcgfSxcbiAgICBmb3JjZTogYm9vbGVhbiA9IGZhbHNlXG4gICkge1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmN1c3RvbWl6ZVVwZGF0ZXMpIHtcbiAgICAgIHZhdWx0UGF0aCA9IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChnaXRodWJQYXRoKTtcbiAgICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZ2l0aHViUGF0aCk7XG4gICAgICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXVsdFBhdGggPSBnaXRodWJQYXRoO1xuICAgIH1cblxuICAgIGlmICghdmF1bHRQYXRoKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdTI3NEMgTm8gdmFsaWQgdmF1bHQgcGF0aCByZXNvbHZlZCBmb3IgJHtnaXRodWJQYXRofWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDEpIEhhbmRsZSBsb2NhbCByZW5hbWVzIGZpcnN0XG4gICAgY29uc3Qgb2xkVmF1bHQgPSB0aGlzLm9sZFBhdGhzQnlHaXRodWJbZ2l0aHViUGF0aF07XG4gICAgaWYgKG9sZFZhdWx0ICYmIG9sZFZhdWx0ICE9PSB2YXVsdFBhdGgpIHtcbiAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpKSB7XG4gICAgICAgIGNvbnN0IHN0cmF5ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHZhdWx0UGF0aCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYmFja3VwRmlsZSh2YXVsdFBhdGgsIHN0cmF5KTtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZW1vdmUodmF1bHRQYXRoKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9sZEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2xkVmF1bHQpO1xuICAgICAgaWYgKG9sZEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZW5hbWUob2xkRmlsZSwgdmF1bHRQYXRoKTtcbiAgICAgICAgY29uc3QgbmV3Q29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuICAgICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUodmF1bHRQYXRoLCBuZXdDb250ZW50LCBnaXRodWJQYXRoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDIpIEV4aXN0ZW5jZSwgYmFja3VwICYgc2tpcCBsb2dpY1xuICAgIGNvbnN0IGZpbGVFeGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpO1xuICAgIGlmIChmb3JjZSAmJiBmaWxlRXhpc3RzKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHZhdWx0UGF0aCk7XG4gICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUodmF1bHRQYXRoLCBjdXJyZW50KTtcbiAgICB9XG4gICAgaWYgKCFmb3JjZSAmJiBmaWxlRXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2YXVsdFBhdGgpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDMpIEZldGNoIHZpYSBHaXRIdWIgQVBJLCBmYWxsYmFjayB0byByYXdcbiAgICBjb25zdCBhcGlVcmwgPSBlbmNvZGVVUkkoXG4gICAgICBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL2NvbnRlbnRzLyR7Z2l0aHViUGF0aH0/cmVmPW1haW5gXG4gICAgKTtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlcyA9IGF3YWl0IGZldGNoKGFwaVVybCk7XG4gICAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgIGNvbnN0IHJhd1VybCA9IGVuY29kZVVSSShcbiAgICAgICAgICBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvbWFpbi8ke2dpdGh1YlBhdGh9YFxuICAgICAgICApO1xuICAgICAgICByZXMgPSBhd2FpdCBmZXRjaChyYXdVcmwpO1xuICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBSYXcgZmV0Y2ggZmFpbGVkOiAke3Jlcy5zdGF0dXNUZXh0fWApO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICAgICAgaWYgKGZpbGVFeGlzdHMpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKHZhdWx0UGF0aCwgY29udGVudCwgZ2l0aHViUGF0aCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgR2l0SHViIEFQSSBlcnJvcjogJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgIGNvbnN0IHsgZG93bmxvYWRfdXJsIH0gPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgeyBkb3dubG9hZF91cmw6IHN0cmluZyB9O1xuICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IChhd2FpdCBmZXRjaChkb3dubG9hZF91cmwpKS50ZXh0KCk7XG4gICAgICBpZiAoZmlsZUV4aXN0cykge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUodmF1bHRQYXRoLCBjb250ZW50KTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGdpdGh1YlBhdGgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFx1Mjc0QyBGYWlsZWQgdG8gdXBkYXRlICR7dmF1bHRQYXRofWAsIGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQUkVWSUVXICsgUkVNT1RFLUJBU0VMSU5FICsgRElGRiBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBwcmV2aWV3VXBkYXRlc01vZGFsKCkge1xuXHQvLyBcdTIwMUNMb2FkaW5nXHUyMDI2XHUyMDFEIHBsYWNlaG9sZGVyIHdoaWxlIHN5bmNpbmdcblx0Y29uc3QgbG9hZGluZyA9IG5ldyAoY2xhc3MgZXh0ZW5kcyBNb2RhbCB7XG5cdCAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcblx0XHRzdXBlcihhcHApO1xuXHQgIH1cblx0ICBvbk9wZW4oKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLmNvbnRlbnRFbFxuXHRcdCAgLmNyZWF0ZURpdih7XG5cdFx0XHR0ZXh0OiAnXHVEODNEXHVERDA0IENoZWNraW5nIGZvciB1cGRhdGVzXHUyMDI2Jyxcblx0XHRcdGNsczogJ21vZC13YXJuaW5nJyxcblx0XHQgIH0pXG5cdFx0ICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdCAgfVxuXHR9KSh0aGlzLmFwcCk7XG4gIFxuXHRsb2FkaW5nLm9wZW4oKTtcblx0YXdhaXQgdGhpcy5zeW5jTWFuaWZlc3QoKTtcblx0YXdhaXQgdGhpcy5mZXRjaFJlbW90ZUJhc2VsaW5lKCk7XG5cdC8vIGJ1aWxkVXBkYXRlUHJldmlldygpIG5vdyByZXR1cm5zIG9ubHkgXHUyMDFDcmVhbFx1MjAxRCBkaWZmcyAobm8gc3RhbGUgZGVueVx1MjAxMGxpc3QpXG5cdGNvbnN0IGRpZmZzID0gYXdhaXQgdGhpcy5idWlsZFVwZGF0ZVByZXZpZXcoKTtcblx0bG9hZGluZy5jbG9zZSgpO1xuICBcblx0Ly8gU3BsaXQgb3V0IGRlbnlcdTIwMTBsaXN0ZWQgbGluZXMgdnMuIGV2ZXJ5dGhpbmcgZWxzZVxuXHRjb25zdCBkZW55TGlzdGVkTGluZXM6IHN0cmluZ1tdID0gW107XG5cdGNvbnN0IG5vcm1hbExpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBcblx0Zm9yIChjb25zdCBkIG9mIGRpZmZzKSB7XG5cdCAgaWYgKGQuc3RhcnRzV2l0aCgnXHUyNzRDIGRlbnlcdTIwMTBsaXN0ZWQnKSkge1xuXHRcdGRlbnlMaXN0ZWRMaW5lcy5wdXNoKGQpO1xuXHQgIH0gZWxzZSB7XG5cdFx0bm9ybWFsTGluZXMucHVzaChkKTtcblx0ICB9XG5cdH1cbiAgXG5cdC8vIE5vdyBjcmVhdGUgdGhlIG1vZGFsXG5cdGNvbnN0IG1vZGFsID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcblx0ICBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcblx0ICBub3JtYWw6IHN0cmluZ1tdO1xuXHQgIGRlbmllZDogc3RyaW5nW107XG4gIFxuXHQgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBub3JtYWw6IHN0cmluZ1tdLCBkZW5pZWQ6IHN0cmluZ1tdKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLm5vcm1hbCA9IG5vcm1hbDtcblx0XHR0aGlzLmRlbmllZCA9IGRlbmllZDtcblx0ICB9XG4gIFxuXHQgIG9uT3BlbigpIHtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHRcdHRoaXMudGl0bGVFbC5zZXRUZXh0KCdVcGRhdGUgUHJldmlldycpO1xuICBcblx0XHQvLyBJbnRybyBwYXJhZ3JhcGhcblx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcblx0XHQgIHRleHQ6ICdPbmx5IGZpbGVzIHdob3NlIGNvbnRlbnRzIGRpZmZlciBmcm9tIEdpdEh1YiB3aWxsIGJlIHVwZGF0ZWQ6Jyxcblx0XHR9KTtcbiAgXG5cdFx0Ly8gMSkgSWYgdGhlcmUgYXJlIGFueSBcdTIwMUNub3JtYWxcdTIwMUQgZGlmZnMsIHJlbmRlciB0aGVtIGluIGEgYnVsbGV0IGxpc3Rcblx0XHRpZiAodGhpcy5ub3JtYWwubGVuZ3RoKSB7XG5cdFx0ICBjb25zdCB1bCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCd1bCcpO1xuXHRcdCAgdGhpcy5ub3JtYWwuZm9yRWFjaCgobGluZSkgPT4ge1xuXHRcdFx0Y29uc3QgbGkgPSB1bC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IGxpbmUgfSk7XG5cdFx0XHQvLyBObyBzcGVjaWFsIHN0eWxpbmcgZm9yIHRoZXNlOyB0aGV5IHNob3cgdXAgbm9ybWFsbHkuXG5cdFx0ICB9KTtcblx0XHR9IGVsc2Uge1xuXHRcdCAgLy8gSWYgbm8gbm9ybWFsIGRpZmZzLCBzYXkgXHUyMDFDVXAgdG8gZGF0ZVx1MjAxRFxuXHRcdCAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdHRleHQ6ICdcdTI3MDUgRXZlcnl0aGluZyBpcyBhbHJlYWR5IHVwIHRvIGRhdGUhJyxcblx0XHRcdGNsczogJ21vZC1pbmZvJyxcblx0XHQgIH0pO1xuXHRcdH1cbiAgXG5cdFx0Ly8gMikgSWYgdGhlcmUgYXJlIGFueSBkZW55XHUyMDEwbGlzdGVkIGxpbmVzLCB0dWNrIHRoZW0gaW50byBhIDxkZXRhaWxzPiBibG9ja1xuXHRcdGlmICh0aGlzLmRlbmllZC5sZW5ndGgpIHtcblx0XHQgIGNvbnN0IGRlbnlEZXRhaWxzID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXHRcdCAgLy8gQWx3YXlzIHN0YXJ0IGNvbGxhcHNlZCBieSBkZWZhdWx0XG5cdFx0ICBkZW55RGV0YWlscy5vcGVuID0gZmFsc2U7XG4gIFxuXHRcdCAgLy8gU3VtbWFyeSBsaW5lOiBzaG93cyBcdTIwMUNEZW55XHUyMDEwTGlzdCBGaWxlcyAobilcdTIwMURcblx0XHQgIGNvbnN0IHN1bW1hcnkgPSBkZW55RGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXHRcdCAgT2JqZWN0LmFzc2lnbihzdW1tYXJ5LnN0eWxlLCB7XG5cdFx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdGNvbG9yOiAndmFyKC0tdGV4dC1mYWludCknLFxuXHRcdFx0YWxpZ25JdGVtczogJ2NlbnRlcicsXG5cdFx0XHRnYXA6ICcwLjVlbScsXG5cdFx0ICB9KTtcblx0XHQgIHN1bW1hcnkuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGBEZW55XHUyMDEwTGlzdCBGaWxlcyAoJHt0aGlzLmRlbmllZC5sZW5ndGh9KWAgfSk7XG4gIFxuXHRcdCAgLy8gUmlnaHRcdTIwMTBzaWRlIGljb24gcm90YXRpbmcgb24gZXhwYW5kL2NvbGxhcHNlXG5cdFx0ICBjb25zdCB0b2dnbGVJY29uID0gc3VtbWFyeS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdCAgT2JqZWN0LmFzc2lnbih0b2dnbGVJY29uLnN0eWxlLCB7XG5cdFx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuXHRcdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdFx0dHJhbnNmb3JtOiAncm90YXRlKDE4MGRlZyknLFxuXHRcdCAgfSk7XG5cdFx0ICBkZW55RGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRcdHRvZ2dsZUljb24uc3R5bGUudHJhbnNmb3JtID0gZGVueURldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHQgIH07XG4gIFxuXHRcdCAgLy8gQm9keSBvZiB0aGUgZGV0YWlsczogYSBzaW1wbGUgPHVsPiBjb250YWluaW5nIG9ubHkgZGVueVx1MjAxMGxpc3RlZCBsaW5lc1xuXHRcdCAgY29uc3QgZGVueUJvZHkgPSBkZW55RGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXHRcdCAgZGVueUJvZHkuc3R5bGUucGFkZGluZ0xlZnQgPSAnMWVtJztcblx0XHQgIGNvbnN0IGRlbnlVbCA9IGRlbnlCb2R5LmNyZWF0ZUVsKCd1bCcpO1xuXHRcdCAgdGhpcy5kZW5pZWQuZm9yRWFjaCgobGluZSkgPT4ge1xuXHRcdFx0Y29uc3QgbGkgPSBkZW55VWwuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBsaW5lIH0pO1xuXHRcdFx0bGkuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1mYWludCknO1xuXHRcdFx0bGkuc3R5bGUuZm9udFN0eWxlID0gJ2l0YWxpYyc7XG5cdFx0ICB9KTtcblx0XHR9XG4gIFxuXHRcdGNvbnN0IGJ1dHRvblJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcblx0XHRPYmplY3QuYXNzaWduKGJ1dHRvblJvdy5zdHlsZSwge1xuXHRcdCAgZGlzcGxheTogJ2ZsZXgnLFxuXHRcdCAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LWVuZCcsXG5cdFx0ICBtYXJnaW5Ub3A6ICcxLjI1ZW0nLCAgICAgICAvLyB0d2VhayBzcGFjaW5nIGFzIHlvdSBsaWtlXG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gXHUyMDFDQ29uZmlybSAmIFVwZGF0ZVx1MjAxRCBidXR0b25cblx0XHRjb25zdCBjb25maXJtQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0ICB0ZXh0OiAnQ29uZmlybSAmIFVwZGF0ZScsXG5cdFx0ICBjbHM6ICdtb2QtY3RhJyxcblx0XHR9KTtcblx0XHRjb25maXJtQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0ICBhd2FpdCAodGhpcyBhcyBhbnkpLnBsdWdpbi51cGRhdGVTZWxlY3RlZFRvb2xraXRDb250ZW50KCk7XG5cdFx0ICB0aGlzLmNsb3NlKCk7XG5cdFx0fTtcblx0XHRcblx0XHQvLyBcdTIwMUNDYW5jZWxcdTIwMUQgYnV0dG9uXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuXHRcdGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuXHQgIH1cbiAgXG5cdCAgb25DbG9zZSgpIHtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHQgIH1cblx0fSkodGhpcy5hcHAsIG5vcm1hbExpbmVzLCBkZW55TGlzdGVkTGluZXMpO1xuICBcblx0Ly8gQXR0YWNoIHBsdWdpbiBwb2ludGVyIGFuZCBvcGVuXG5cdChtb2RhbCBhcyBhbnkpLnBsdWdpbiA9IHRoaXM7XG5cdG1vZGFsLm9wZW4oKTtcbiAgfVxuICBcblxuICBhc3luYyBidWlsZFVwZGF0ZVByZXZpZXcoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuXHRjb25zdCBjaGFuZ2VzOiBzdHJpbmdbXSA9IFtdO1xuICBcblx0Ly8gMCkgQ29sbGVjdCBhbGwgYmxhY2tsaXN0ZWQgZm9sZGVycyAobWFuaWZlc3RLZXkgdmFsdWVzIHdoZXJlIGRvVXBkYXRlID09PSBmYWxzZSlcblx0Y29uc3QgZGVueUxpc3RlZEZvbGRlcnMgPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzXG5cdCAgLmZpbHRlcigoYykgPT4gYy5kb1VwZGF0ZSA9PT0gZmFsc2UpXG5cdCAgLm1hcCgoYykgPT4gYy5tYW5pZmVzdEtleSk7XG4gIFxuXHQvLyAxKSBEZW55XHUyMDEwbGlzdGVkIGVudHJpZXNcdTIwMTRidXQgb25seSBpZiB0aGV5XHUyMDE5ZCBhY3R1YWxseSBiZSBcdTIwMUNuZXdcdTIwMUQgKG1pc3NpbmcpIG9yIFx1MjAxQ291dFx1MjAxMG9mXHUyMDEwZGF0ZVx1MjAxRFxuXHRmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHQgIGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYucGF0aCk7XG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0Zi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHQgICk7XG5cdCAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0Ly8gUmVzb2x2ZSB0aGUgdmF1bHQgcGF0aCAoaGFuZGxlcyByZW1hcHBpbmcgaWYgcHJlc2VudClcblx0XHRjb25zdCB2cCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuICBcblx0XHQvLyBDaGVjayBpZiBmaWxlIGV4aXN0cyBsb2NhbGx5IGFuZCBpZiBpdFx1MjAxOXMgdXBcdTIwMTB0b1x1MjAxMGRhdGVcblx0XHRjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2cCk7XG5cdFx0Y29uc3QgdXBUb0RhdGUgPSBleGlzdHMgJiYgKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKHZwKSk7XG4gIFxuXHRcdC8vIE9ubHkgc2hvdyBhIGRlbnlcdTIwMTBsaXN0ZWQgZW50cnkgaWYgaXQgd291bGQgb3RoZXJ3aXNlIGJlIGNyZWF0ZWQgb3Igb3ZlcndyaXR0ZW5cblx0XHRpZiAoIWV4aXN0cyB8fCAhdXBUb0RhdGUpIHtcblx0XHQgIGNoYW5nZXMucHVzaChgXHUyNzRDIGRlbnlcdTIwMTBsaXN0ZWQgXHUyMDEzIHdpbGwgbm90IHVwZGF0ZTogJHt2cH1gKTtcblx0XHR9XG5cdCAgfVxuXHR9XG4gIFxuXHQvLyAyKSBGVUxMXHUyMDEwU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0XHUyMDE5cyBibGFja2xpc3RlZClcblx0aWYgKCF0aGlzLnNldHRpbmdzLmN1c3RvbWl6ZVVwZGF0ZXMpIHtcblx0ICBmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdFx0Ly8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHRcdGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0ICBjb250aW51ZTtcblx0XHR9XG4gIFxuXHRcdGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZi5wYXRoKTtcblx0XHRjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cblx0XHQgIGYucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcblx0XHQpO1xuXHRcdGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuICBcblx0XHRjb25zdCB2cCA9IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuXHRcdGxldCB0YWcgPSAnJztcblx0XHRpZiAodnAgIT09IGYucGF0aCkgdGFnID0gJyAocmVtYXBwZWQpJztcbiAgXG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuXHRcdGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpO1xuICBcblx0XHRpZiAoIWV4aXN0cykge1xuXHRcdCAgY2hhbmdlcy5wdXNoKGBcdUQ4M0RcdURDQzQgTmV3IGZpbGU6ICR7dnB9JHt0YWd9YCk7XG5cdFx0fSBlbHNlIGlmICghdXBUb0RhdGUpIHtcblx0XHQgIGNoYW5nZXMucHVzaChgXHVEODNEXHVERDAxIFdpbGwgdXBkYXRlOiAke3ZwfSR7dGFnfWApO1xuXHRcdH1cblx0ICB9XG4gIFxuXHQgIGZvciAoY29uc3QgZmxkIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG5cdFx0Ly8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZm9sZGVyXG5cdFx0aWYgKGZsZC5vcHRpb25hbCkge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuICBcblx0XHRjb25zdCBpc0RlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5pbmNsdWRlcyhmbGQucGF0aCk7XG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmxkLnBhdGgpO1xuXHRcdGlmICghZXhpc3RzICYmICFpc0RlbnlGb2xkZXIpIHtcblx0XHQgIGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0MxIE5ldyBmb2xkZXI6ICR7ZmxkLnBhdGh9YCk7XG5cdFx0fVxuXHQgIH1cbiAgXG5cdCAgcmV0dXJuIGNoYW5nZXMubGVuZ3RoID8gY2hhbmdlcyA6IFsnXHUyNzA1IEV2ZXJ5dGhpbmcgaXMgYWxyZWFkeSB1cCB0byBkYXRlISddO1xuXHR9XG4gIFxuXHQvLyAzKSBDVVNUT01cdTIwMTBTWU5DIG1vZGUgKHNraXAgYW55IGZpbGUvZm9sZGVyIHRoYXRcdTIwMTlzIGJsYWNrbGlzdGVkKVxuXHRmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHQgIGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYucGF0aCk7XG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0Zi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHQgICk7XG5cdCAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCB2cCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuXHQgIGxldCB0YWcgPSAnJztcblx0ICBpZiAodnAgIT09IGYucGF0aCkgdGFnID0gJyAocmVtYXBwZWQpJztcbiAgXG5cdCAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuXHQgIGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpO1xuICBcblx0ICBpZiAoIWV4aXN0cykge1xuXHRcdGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0M0IE5ldyBmaWxlOiAke3ZwfSR7dGFnfWApO1xuXHQgIH0gZWxzZSBpZiAoIXVwVG9EYXRlKSB7XG5cdFx0Y2hhbmdlcy5wdXNoKGBcdUQ4M0RcdUREMDEgV2lsbCB1cGRhdGU6ICR7dnB9JHt0YWd9YCk7XG5cdCAgfVxuXHR9XG4gIFxuXHRmb3IgKGNvbnN0IGZsZCBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuXHQgIGlmIChmbGQub3B0aW9uYWwpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG4gIFxuXHQgIGNvbnN0IGlzRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLmluY2x1ZGVzKGZsZC5wYXRoKTtcblx0ICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmbGQucGF0aCk7XG5cdCAgaWYgKCFleGlzdHMgJiYgIWlzRGVueUZvbGRlcikge1xuXHRcdGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0MxIE5ldyBmb2xkZXI6ICR7ZmxkLnBhdGh9YCk7XG5cdCAgfVxuXHR9XG4gIFxuXHQvLyAzYykgXHUyMDFDTW92ZWRcdTIwMUQgZGV0ZWN0aW9uIChza2lwIGJsYWNrbGlzdGVkKVxuXHRmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHQgIGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCBtYW5pZmVzdEtleSA9IGYua2V5O1xuXHQgIGNvbnN0IG1hbmlmZXN0UGF0aCA9IGYucGF0aDtcblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IG1hbmlmZXN0S2V5KTtcblx0ICBjb25zdCBwcmV2UGF0aCA9IHRoaXMub2xkUGF0aHNCeUdpdGh1YlttYW5pZmVzdFBhdGhdO1xuICBcblx0ICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cblx0XHRtYW5pZmVzdFBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdCAgKTtcblx0ICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cdCAgaWYgKGN1c3RvbSAmJiBjdXN0b20udmF1bHRQYXRoICYmIGN1c3RvbS52YXVsdFBhdGggIT09IG1hbmlmZXN0UGF0aCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblx0ICBpZiAoXG5cdFx0cHJldlBhdGggJiZcblx0XHRwcmV2UGF0aCAhPT0gbWFuaWZlc3RQYXRoICYmXG5cdFx0KCFjdXN0b20gfHwgY3VzdG9tLnZhdWx0UGF0aCA9PT0gbWFuaWZlc3RQYXRoKVxuXHQgICkge1xuXHRcdGNoYW5nZXMucHVzaChgXHUyN0ExXHVGRTBGIE1vdmVkOiAke3ByZXZQYXRofSBcdTIxOTIgJHttYW5pZmVzdFBhdGh9YCk7XG5cdCAgfVxuXHR9XG4gIFxuXHRyZXR1cm4gY2hhbmdlcy5sZW5ndGggPyBjaGFuZ2VzIDogWydcdTI3MDUgRXZlcnl0aGluZyBpcyBhbHJlYWR5IHVwIHRvIGRhdGUhJ107XG4gIH1cbiAgXG4gIFxuICBcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFZFUlNJT04tQ0hFQ0sgLyBVUERBVEUgRkxPVyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBjaGVja0ZvclVwZGF0ZXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgaXNOZXdlclZlcnNpb24gPSAocmVtb3RlOiBzdHJpbmcsIGxvY2FsOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICAgIGNvbnN0IHBhID0gcmVtb3RlXG4gICAgICAgIC5yZXBsYWNlKC9edi8sICcnKVxuICAgICAgICAuc3BsaXQoJy4nKVxuICAgICAgICAubWFwKChuKSA9PiBwYXJzZUludChuLCAxMCkgfHwgMCk7XG4gICAgICBjb25zdCBwYiA9IGxvY2FsXG4gICAgICAgIC5yZXBsYWNlKC9edi8sICcnKVxuICAgICAgICAuc3BsaXQoJy4nKVxuICAgICAgICAubWFwKChuKSA9PiBwYXJzZUludChuLCAxMCkgfHwgMCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGgubWF4KHBhLmxlbmd0aCwgcGIubGVuZ3RoKTsgaSsrKSB7XG4gICAgICAgIGlmICgocGFbaV0gfHwgMCkgPiAocGJbaV0gfHwgMCkpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoKHBhW2ldIHx8IDApIDwgKHBiW2ldIHx8IDApKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIGNvbnN0IHRvb2xraXRQYXRoID0gJy52ZXJzaW9uLmpzb24nO1xuICAgIGNvbnN0IHRvb2xraXRVcmwgPVxuICAgICAgJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvdnZ1bmRlcmxvcmUtdG9vbGtpdC1mdWxsL21haW4vLnZlcnNpb24uanNvbic7XG4gICAgY29uc3QgcGx1Z2luVXJsID1cbiAgICAgICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL3Z2dW5kZXJsb3JlLXRvb2xraXQtcGx1Z2luL21haW4vdmVyc2lvbi5qc29uJztcbiAgICBjb25zdCBjaGFuZ2Vsb2dVcmwgPVxuICAgICAgJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vUkVBRE1FLm1kJztcblxuICAgIC8vIDEpIFJlYWQgbG9jYWwgdG9vbGtpdCB2ZXJzaW9uXG4gICAgbGV0IGxvY2FsVEsgPSAnMC4wLjAnO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHRvb2xraXRQYXRoKTtcbiAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgbG9jYWxUSyA9IGpzb24udmVyc2lvbiB8fCBsb2NhbFRLO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byByZWFkIGxvY2FsIHRvb2xraXQgdmVyc2lvbjonLCBlcnIpO1xuICAgIH1cblxuICAgIC8vIDIpIEZldGNoIHJlbW90ZSB0b29sa2l0IHZlcnNpb24gJiBkZWZhdWx0c1xuICAgIGxldCByZW1vdGVUSyA9ICcwLjAuMCc7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHRvb2xraXRVcmwpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICByZW1vdGVUSyA9IGRhdGEudmVyc2lvbiB8fCByZW1vdGVUSztcblxuICAgICAgdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiA9IHJlbW90ZVRLO1xuICAgICAgaWYgKGRhdGEuZGVmYXVsdFBhdGhzKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MubGF0ZXN0RGVmYXVsdHMgPSBkYXRhLmRlZmF1bHRQYXRocztcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0dGluZ3MubGFzdENoZWNrZWQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byBmZXRjaCByZW1vdGUgdG9vbGtpdCB2ZXJzaW9uOicsIGVycik7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coeyBsb2NhbFRLLCByZW1vdGVUSyB9KTtcbiAgICBpZiAoaXNOZXdlclZlcnNpb24ocmVtb3RlVEssIGxvY2FsVEspKSB7XG4gICAgICBuZXcgTm90aWNlKGBcdTI2QTBcdUZFMEYgVG9vbGtpdCB1cGRhdGUgYXZhaWxhYmxlISBJbnN0YWxsZWQ6IHYke2xvY2FsVEt9LCBMYXRlc3Q6IHYke3JlbW90ZVRLfWApO1xuICAgICAgYXdhaXQgdGhpcy5mZXRjaFJlbW90ZUJhc2VsaW5lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBUb29sa2l0IGlzIHVwIHRvIGRhdGUgKHYke2xvY2FsVEt9KWApO1xuICAgIH1cblxuICAgIC8vIDQpIFJlYWQgbG9jYWwgcGx1Z2luIHZlcnNpb25cbiAgICBjb25zdCBsb2NhbFBMID0gdGhpcy5tYW5pZmVzdC52ZXJzaW9uO1xuXG4gICAgLy8gNSkgRmV0Y2ggcmVtb3RlIHBsdWdpbiB2ZXJzaW9uICYgY29tcGFyZVxuICAgIGxldCByZW1vdGVQTCA9IGxvY2FsUEw7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHBsdWdpblVybCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIHJlbW90ZVBMID0gZGF0YS52ZXJzaW9uIHx8IHJlbW90ZVBMO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byBmZXRjaCByZW1vdGUgcGx1Z2luIHZlcnNpb246JywgZXJyKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyh7IGxvY2FsUEwsIHJlbW90ZVBMIH0pO1xuICAgIGlmIChpc05ld2VyVmVyc2lvbihyZW1vdGVQTCwgbG9jYWxQTCkpIHtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjY5OVx1RkUwRiBQbHVnaW4gdXBkYXRlIGF2YWlsYWJsZSEgSW5zdGFsbGVkOiB2JHtsb2NhbFBMfSwgTGF0ZXN0OiB2JHtyZW1vdGVQTH1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IE5vdGljZShgXHUyNzA1IFBsdWdpbiBpcyB1cCB0byBkYXRlICh2JHtsb2NhbFBMfSlgKTtcbiAgICB9XG5cbiAgICAvLyA2KSBGZXRjaCBjaGFuZ2Vsb2cgZm9yIFVJIGRpc3BsYXlcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2hhbmdlbG9nUmVzID0gYXdhaXQgZmV0Y2goY2hhbmdlbG9nVXJsKTtcbiAgICAgIHRoaXMuY2hhbmdlbG9nID0gYXdhaXQgY2hhbmdlbG9nUmVzLnRleHQoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gZmV0Y2ggY2hhbmdlbG9nOicsIGVycik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRjb25zdCBsb2FkZWQgPSAoYXdhaXQgdGhpcy5sb2FkRGF0YSgpKSBhcyBQYXJ0aWFsPFRvb2xraXRTZXR0aW5ncz47XG5cdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBsb2FkZWQpO1xuICBcblx0Ly8gQmFja2ZpbGwgb3VyIG5ldyBmaWVsZHMgaWYgdGhlIHN0b3JlZCBkYXRhIHdhcyBtaXNzaW5nIHRoZW1cblx0aWYgKHR5cGVvZiB0aGlzLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtICE9PSBcInN0cmluZ1wiKSB7XG5cdCAgdGhpcy5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSA9IFwiXCI7XG5cdH1cblx0aWYgKCFBcnJheS5pc0FycmF5KHRoaXMuc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZSkpIHtcblx0ICB0aGlzLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UgPSBbXTtcblx0fVxuICBcblx0dGhpcy5maWxlQ2FjaGVNYW5hZ2VyID0gbmV3IFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyKFxuXHQgIHRoaXMuYXBwLnZhdWx0LFxuXHQgIGxvYWRlZD8uZmlsZUNhY2hlID8/IHt9LFxuXHQgIGFzeW5jICgpID0+IGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKClcblx0KTtcblxuXHQvLyBHaXZlIHZhdWx0IGEgbW9tZW50IHRvIHNldHRsZSwgdGhlbiBjaGVjayBmb3IgbWFya2VyXG5cdHNldFRpbWVvdXQoKCkgPT4gdGhpcy5jaGVja01hcmtlckZpbGUoKSwgNTAwKTtcbiAgfSBcblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh7XG4gICAgICAuLi50aGlzLnNldHRpbmdzLFxuICAgICAgZmlsZUNhY2hlOiB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuZ2V0Q2FjaGUoKSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldExvY2FsVG9vbGtpdFZlcnNpb24oKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJy52ZXJzaW9uLmpzb24nKTtcbiAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgcmV0dXJuIGpzb24udmVyc2lvbiB8fCBudWxsO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byByZWFkIC52ZXJzaW9uLmpzb246JywgZXJyKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUZ1bGxUb29sa2l0UmVwbygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBleGNsdWRlZCA9IFtcbiAgICAgICcub2JzaWRpYW4nLFxuICAgICAgJy5naXRpZ25vcmUnLFxuICAgICAgJy5naXRhdHRyaWJ1dGVzJyxcbiAgICAgICcuRFNfU3RvcmUnLFxuICAgICAgJ3BsdWdpbnMnLFxuICAgICAgJ0NvbXBlbmRpdW0nLFxuICAgICAgJ1JFQURNRS5tZCcsXG4gICAgICAnLnZlcnNpb24uanNvbicsXG4gICAgICAnLmdpdGh1YidcbiAgICBdO1xuXG4gICAgY29uc3QgZmV0Y2hSZXBvUm9vdCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFwaVVybCA9XG4gICAgICAgICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvY29udGVudHMvJztcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBpVXJsKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHJlcG8gcm9vdGApO1xuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgZmV0Y2hSZXBvUm9vdCgpO1xuICAgICAgLy8gZmlsdGVyIG91dCBleGNsdWRlZCB0b3AtbGV2ZWwgaXRlbXNcbiAgICAgIGNvbnN0IGZpbHRlcmVkID0gY29udGVudHMuZmlsdGVyKFxuICAgICAgICAoaXRlbTogYW55KSA9PlxuICAgICAgICAgICFleGNsdWRlZC5zb21lKFxuICAgICAgICAgICAgKGV4KSA9PlxuICAgICAgICAgICAgICBpdGVtLnBhdGggPT09IGV4IHx8XG4gICAgICAgICAgICAgIGl0ZW0ucGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKVxuICAgICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIC8vIFNvcnQgc28gXHUyMDFDdHJlZVx1MjAxRCAoZm9sZGVycykgY29tZSBiZWZvcmUgXHUyMDFDYmxvYlx1MjAxRCAoZmlsZXMpXG4gICAgICBmaWx0ZXJlZC5zb3J0KChhOiBhbnksIGI6IGFueSkgPT4gKGEudHlwZSA9PT0gYi50eXBlID8gMCA6IGEudHlwZSA9PT0gJ3RyZWUnID8gLTEgOiAxKSk7XG5cbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBmaWx0ZXJlZCkge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZGlyJykge1xuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRm9sZGVyRnJvbUdpdEh1YihpdGVtLnBhdGgsIGl0ZW0ucGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChpdGVtLmRvd25sb2FkX3VybCk7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGl0ZW0ucGF0aDtcbiAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQgIT09IGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZShmaWxlUGF0aCwgY29udGVudCwgaXRlbS5wYXRoLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgY29uc3QgbWFya2VyUGF0aCA9ICcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJztcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlclBhdGgpKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobWFya2VyUGF0aCwgJycpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldHRpbmdzLm5lZWRzSW5zdGFsbCA9IGZhbHNlO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzVGFiKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG4gICAgICB9XG5cbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBWVnVuZGVybG9yZSBUb29sa2l0IHN1Y2Nlc3NmdWxseSBpbnN0YWxsZWQhJyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgdXBkYXRlRnVsbFRvb2xraXRSZXBvKCkgZXJyb3I6JywgZXJyKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBGYWlsZWQgdG8gaW5zdGFsbCB0b29sa2l0LiBTZWUgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVTZWxlY3RlZFRvb2xraXRDb250ZW50KCkge1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmF1dG9CYWNrdXBCZWZvcmVVcGRhdGUpIHtcbiAgICAgIGNvbnN0IGZvbGRlciA9IGF3YWl0IHRoaXMuYmFja3VwTWFuYWdlci5iYWNrdXBWYXVsdE1pcnJvcigncHJlLXVwZGF0ZScpO1xuICAgICAgbmV3IE5vdGljZShgVmF1bHQgbWlycm9yIGJhY2t1cCBjcmVhdGVkIGF0OiAke2ZvbGRlcn1gKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubGF0ZXN0RGVmYXVsdHMpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBHaXRIdWIgZGVmYXVsdHMgbm90IGxvYWRlZCB5ZXQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWxsTWFuaWZlc3RGaWxlcyA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5tYXAoKGYpID0+IGYucGF0aCk7XG4gICAgY29uc3QgZmlsZU92ZXJyaWRlcyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMubWFwKChjKSA9PiBbYy5tYW5pZmVzdEtleSwgY10pXG4gICAgKTtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKGNvbnN0IGdoUGF0aCBvZiBhbGxNYW5pZmVzdEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlID0gZmlsZU92ZXJyaWRlc1tnaFBhdGhdO1xuICAgICAgICBpZiAob3ZlcnJpZGU/LmRvVXBkYXRlID09PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTIzRURcdUZFMEYgU2tpcHBpbmcgZGVueS1saXN0ZWQ6ICR7Z2hQYXRofWApO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmF1bHRQYXRoID0gdGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzXG4gICAgICAgICAgPyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZ2hQYXRoKVxuICAgICAgICAgIDogZ2hQYXRoO1xuXG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoKGYpID0+IGYucGF0aCA9PT0gZ2hQYXRoKTtcbiAgICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRW50cnlGcm9tTWFuaWZlc3QoZW50cnksIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBmb2xkZXIgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZm9sZGVyLnBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXIucGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVWZXJzaW9uRmlsZSgpO1xuICAgICAgdGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uID0gdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiE7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFRvb2xraXQgY29udGVudCB1cGRhdGVkLicpO1xuXG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzVGFiLnVwZGF0ZVZlcnNpb25EaXNwbGF5KCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgVXBkYXRlIGZhaWxlZC4gVmVyc2lvbiBub3QgdXBkYXRlZC4nLCBlcnIpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFVwZGF0ZSBmYWlsZWQuIFNlZSBjb25zb2xlIGZvciBkZXRhaWxzLiBWZXJzaW9uIGZpbGUgTk9UIGNoYW5nZWQuJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCkge1xuICAgICAgdGhpcy5lbmFibGVIaWdobGlnaHQoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVGb2xkZXJGcm9tR2l0SHViKGdpdGh1YkZvbGRlclBhdGg6IHN0cmluZywgdmF1bHRGb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgICBjb25zdCBleGNsdWRlZCA9IFtcbiAgICAgICcub2JzaWRpYW4nLFxuICAgICAgJy5naXRpZ25vcmUnLFxuICAgICAgJy5naXRhdHRyaWJ1dGVzJyxcbiAgICAgICcuRFNfU3RvcmUnLFxuICAgICAgJ3BsdWdpbnMnLFxuICAgICAgJ0NvbXBlbmRpdW0nLFxuICAgICAgJ1JFQURNRS5tZCcsXG4gICAgICAnLnZlcnNpb24uanNvbicsXG4gICAgICAnLmdpdGh1YidcbiAgICBdO1xuICAgIGlmIChleGNsdWRlZC5zb21lKChleCkgPT4gZ2l0aHViRm9sZGVyUGF0aCA9PT0gZXggfHwgZ2l0aHViRm9sZGVyUGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYXBpVXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9jb250ZW50cy8ke2dpdGh1YkZvbGRlclBhdGh9YDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggZm9sZGVyOiAke2dpdGh1YkZvbGRlclBhdGh9YCk7XG4gICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0Rm9sZGVyUGF0aCkpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih2YXVsdEZvbGRlclBhdGgpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgIGlmIChleGNsdWRlZC5zb21lKChleCkgPT4gZmlsZS5wYXRoID09PSBleCB8fCBmaWxlLnBhdGguc3RhcnRzV2l0aChgJHtleH0vYCkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt2YXVsdEZvbGRlclBhdGh9LyR7ZmlsZS5uYW1lfWA7XG4gICAgICAgIGlmIChmaWxlLnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIGNvbnN0IGZpbGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKGZpbGUuZG93bmxvYWRfdXJsKTtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZmlsZVJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgICAgICAgaWYgKGV4aXN0cykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoY3VycmVudCAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUoZmlsZVBhdGgsIGN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpKSAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKGZpbGVQYXRoLCBjb250ZW50LCBmaWxlLnBhdGgsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChmaWxlLnR5cGUgPT09ICdkaXInKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVGb2xkZXJGcm9tR2l0SHViKGZpbGUucGF0aCwgYCR7dmF1bHRGb2xkZXJQYXRofS8ke2ZpbGUubmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGb2xkZXIgc3luY2VkOiAke3ZhdWx0Rm9sZGVyUGF0aH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIEZhaWxlZCB0byBzeW5jIGZvbGRlcjogJHt2YXVsdEZvbGRlclBhdGh9YCwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShgXHUyNzRDIEZhaWxlZCB0byB1cGRhdGUgZm9sZGVyOiAke3ZhdWx0Rm9sZGVyUGF0aH1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZWJ1aWxkRmlsZUNhY2hlKCkge1xuICAgIGNvbnN0IGNhY2hlID0gdGhpcy5maWxlQ2FjaGVNYW5hZ2VyO1xuICAgIGNvbnN0IHRhc2tzOiBQcm9taXNlPHZvaWQ+W10gPSBbXTtcblxuICAgIC8vIDEpIEluZGV4IGV4YWN0bHkgdGhlIGZpbGVzIGxpc3RlZCBpbiB0aGUgbWFuaWZlc3RcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgY29uc3QgdmF1bHRQYXRoID0gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0UGF0aCkpIHtcbiAgICAgICAgdGFza3MucHVzaCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodmF1bHRQYXRoKTtcbiAgICAgICAgICBhd2FpdCBjYWNoZS51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGVudHJ5LnBhdGgsIGZhbHNlKTtcbiAgICAgICAgfSkoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMikgSW5kZXggYW55IG1hcmtkb3duIGNoaWxkcmVuIHVuZGVyIG1hbmlmZXN0IGZvbGRlcnNcbiAgICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICBjb25zdCBmb2xkZXJQYXRoID0gZm9sZGVyRW50cnkucGF0aDtcbiAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgIFZhdWx0LnJlY3Vyc2VDaGlsZHJlbihmb2xkZXIsIChmaWxlKSA9PiB7XG4gICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnBhdGg7XG4gICAgICAgICAgICB0YXNrcy5wdXNoKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgICAgICAgICAgICBhd2FpdCBjYWNoZS51cGRhdGVDYWNoZShmaWxlUGF0aCwgY29udGVudCwgZmlsZVBhdGgsIGZhbHNlKTtcbiAgICAgICAgICAgIH0pKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXNrcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCh0YXNrcy5zbGljZShpLCBpICsgYmF0Y2hTaXplKSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgfVxuXG4gIGFzeW5jIHNob3dJbmRleGluZ01vZGFsKCkge1xuICAgIGNvbnN0IG1vZGFsID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcbiAgICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICB9XG4gICAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCgnXHVEODNEXHVERDA0IEluZGV4aW5nIFRvb2xraXQgRmlsZXMuLi4nKTtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgdGV4dDogJ0luZGV4aW5nIGFuZCBjYWNoaW5nIHlvdXIgVlZ1bmRlcmxvcmUgVmF1bHQgZm9yIGZhc3RlciB1cGRhdGVzIGFuZCBzYWZlciBzeW5jaW5nLidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSkodGhpcy5hcHApO1xuXG4gICAgbW9kYWwub3BlbigpO1xuICAgIGF3YWl0IHRoaXMucmVidWlsZEZpbGVDYWNoZSgpO1xuICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgbmV3IE5vdGljZSgnXHUyNzA1IFZWdW5kZXJsb3JlIGNhY2hpbmcgY29tcGxldGUuJyk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVWZXJzaW9uRmlsZSgpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24pIHtcbiAgICAgIGNvbnNvbGUud2FybignTm8gbGF0ZXN0IHZlcnNpb24gZm91bmQ7IHNraXBwaW5nIHZlcnNpb24gZmlsZSB1cGRhdGUuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHZlcnNpb25QYXRoID0gJy52ZXJzaW9uLmpzb24nO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gfSwgbnVsbCwgMik7XG4gICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmVyc2lvblBhdGgpO1xuICAgIGlmIChleGlzdHMpIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUodmVyc2lvblBhdGgsIGNvbnRlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUodmVyc2lvblBhdGgsIGNvbnRlbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBtYWluLnRzICoqL1xuXG4vKiogXG4gKiBJbnN0YWxsIHRoZSBzZWxlY3RlZCBjb21wZW5kaXVtIGFuZCB6ZXJvIG9yIG1vcmUgcmVmZXJlbmNlIGVkaXRpb25zLlxuICovXG5wdWJsaWMgYXN5bmMgaW5zdGFsbEZ1bGxUb29sa2l0KFxuICBvcHRzOiB7IGNvbXBlbmRpdW06IHN0cmluZzsgcmVmZXJlbmNlczogc3RyaW5nW10gfSA9IHsgY29tcGVuZGl1bTogXCJcIiwgcmVmZXJlbmNlczogW10gfVxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHsgY29tcGVuZGl1bSwgcmVmZXJlbmNlcyB9ID0gb3B0cztcbiAgaWYgKCFjb21wZW5kaXVtKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY29tcGVuZGl1bSBlZGl0aW9uIHNlbGVjdGVkXCIpO1xuICB9XG5cbiAgLy8gMSkgU2hvdyB0aGUgXHUyMDFDSW5zdGFsbGluZ1x1MjAyNlx1MjAxRCBzcGlubmVyXG4gIGNvbnN0IHBsYWNlaG9sZGVyID0gbmV3IEluc3RhbGxpbmdNb2RhbCh0aGlzLmFwcCk7XG4gIHBsYWNlaG9sZGVyLm9wZW4oKTtcblxuICBsZXQgaW5zdGFsbFN1Y2NlZWRlZCA9IGZhbHNlO1xuICB0cnkge1xuICAgIC8vIDIpIFN0YXRpYyBjb3B5IG9mIGV2ZXJ5dGhpbmcgaW4gdGhlIHJlcG8gRVhDRVBUIGFueSBDb21wZW5kaXVtLypcbiAgICBjb25zdCB0cmVlQXBpID1cbiAgICAgIFwiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL2dpdC90cmVlcy9tYWluP3JlY3Vyc2l2ZT0xXCI7XG4gICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKHRyZWVBcGkpO1xuICAgIGlmICghcmVzcC5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbGlzdCByZXBvIHRyZWU6ICR7cmVzcC5zdGF0dXNUZXh0fWApO1xuICAgIH1cbiAgICBjb25zdCBqc29uOiBhbnkgPSBhd2FpdCByZXNwLmpzb24oKTtcbiAgICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkoanNvbi50cmVlKSA/IGpzb24udHJlZSA6IFtdO1xuXG4gICAgLy8gVXNlIHlvdXIgZXhjbHVkZWRQYXRocyAod2hpY2ggYWxyZWFkeSBjb250YWlucyBcIkNvbXBlbmRpdW1cIilcbiAgICBjb25zdCBzdGF0aWNFbnRyaWVzID0gKGl0ZW1zIGFzIEFycmF5PHsgcGF0aDogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT4pXG4gICAgICAuZmlsdGVyKChpdGVtKSA9PlxuICAgICAgICAhdGhpcy5leGNsdWRlZFBhdGhzLnNvbWUoZXggPT5cbiAgICAgICAgICBpdGVtLnBhdGggPT09IGV4IHx8IGl0ZW0ucGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKVxuICAgICAgICApXG4gICAgICApXG4gICAgICAuc29ydCgoYSwgYikgPT4gKGEudHlwZSA9PT0gYi50eXBlID8gMCA6IGEudHlwZSA9PT0gXCJ0cmVlXCIgPyAtMSA6IDEpKTtcblxuICAgIGZvciAoY29uc3QgZW50cnkgb2Ygc3RhdGljRW50cmllcykge1xuICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwidHJlZVwiKSB7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihlbnRyeS5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcmF3VXJsID0gXG4gICAgICAgICAgYGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vJHtlbmNvZGVVUklDb21wb25lbnQoZW50cnkucGF0aCl9YDtcbiAgICAgICAgY29uc3QgZmlsZVJlc3AgPSBhd2FpdCBmZXRjaChyYXdVcmwpO1xuICAgICAgICBpZiAoIWZpbGVSZXNwLm9rKSBjb250aW51ZTtcbiAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IGZpbGVSZXNwLnRleHQoKTtcbiAgICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSB7XG4gICAgICAgICAgY29uc3Qgb2xkID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGVudHJ5LnBhdGgpO1xuICAgICAgICAgIGlmIChvbGQgIT09IHRleHQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZW50cnkucGF0aCwgdGV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShlbnRyeS5wYXRoLCB0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDMpIEtpY2sgb2ZmIHlvdXIgSlNPTlx1MjE5Mk1EIHBhcnNlcnMgaW4gcGFyYWxsZWxcbiAgICBjb25zdCBwYXJzZUpvYnMgPSBbXG4gICAgICBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICAgIGFwcDogdGhpcy5hcHAsXG4gICAgICAgIGVkaXRpb25LZXk6IGNvbXBlbmRpdW0sXG4gICAgICAgIHRhcmdldFBhdGg6IGBDb21wZW5kaXVtYCxcbiAgICAgIH0pLFxuICAgICAgLi4ucmVmZXJlbmNlcy5tYXAocmVmS2V5ID0+XG4gICAgICAgIGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICAgICAgICBhcHA6IHRoaXMuYXBwLFxuICAgICAgICAgIGVkaXRpb25LZXk6IHJlZktleSxcbiAgICAgICAgICB0YXJnZXRQYXRoOiBgJHtyZWZLZXl9YCxcbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgXTtcbiAgICAvLyB0aGlzIHdvblx1MjAxOXQgcmVzb2x2ZSB1bnRpbCBfYWxsXyBwYXJzZXJzIGhhdmUgZmluaXNoZWQgd3JpdGluZyB0aGVpciBNRCBmaWxlc1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHBhcnNlSm9icyk7XG5cbiAgICAvLyA0KSBQb3N0LWluc3RhbGwgaG91c2VrZWVwaW5nXG4gICAgY29uc3QgbWFya2VyID0gXCIudnZ1bmRlcmxvcmVfaW5zdGFsbGVkXCI7XG4gICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobWFya2VyKSkpIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShtYXJrZXIsIFwiXCIpO1xuICAgIH1cbiAgICB0aGlzLnNldHRpbmdzLm5lZWRzSW5zdGFsbCAgICAgPSBmYWxzZTtcbiAgICB0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQgPSB0cnVlO1xuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgdGhpcy5lbmFibGVIaWdobGlnaHQoKTtcblxuICAgIGluc3RhbGxTdWNjZWVkZWQgPSB0cnVlO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiXHUyNzRDIGluc3RhbGxGdWxsVG9vbGtpdCgpXCIsIGVycik7XG4gIH0gZmluYWxseSB7XG4gICAgLy8gb25seSBub3cgY2xvc2UgdGhlIHNwaW5uZXIgJiByZWRyYXcgdGhlIFVJXG4gICAgcGxhY2Vob2xkZXIuY2xvc2UoKTtcbiAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikgdGhpcy5zZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG4gICAgbmV3IE5vdGljZShcbiAgICAgIGluc3RhbGxTdWNjZWVkZWRcbiAgICAgICAgPyBcIlx1MjcwNSBWVnVuZGVybG9yZSBUb29sa2l0IHN1Y2Nlc3NmdWxseSBpbnN0YWxsZWQhXCJcbiAgICAgICAgOiBcIlx1Mjc0QyBGYWlsZWQgdG8gaW5zdGFsbCB0b29sa2l0LiBTZWUgY29uc29sZSBmb3IgZGV0YWlscy5cIlxuICAgICk7XG4gIH1cbn1cblxuXG5cbn1cbmV4cG9ydCB7IEluc3RhbGxpbmdNb2RhbCB9OyIsICJpbXBvcnQge1xuXHRQbHVnaW5TZXR0aW5nVGFiLFxuXHRTZXR0aW5nLFxuXHRBcHAsXG5cdFRGaWxlLFxuXHRURm9sZGVyLFxuXHRBYnN0cmFjdElucHV0U3VnZ2VzdCxcblx0c2V0SWNvbixcblx0TW9kYWwsXG5cdE1hcmtkb3duUmVuZGVyZXIsXG5cdENvbXBvbmVudCxcblx0Tm90aWNlLFxuXHRUZXh0Q29tcG9uZW50LFxuXHRUb2dnbGVDb21wb25lbnQsXG5cdEJ1dHRvbkNvbXBvbmVudCxcblx0RHJvcGRvd25Db21wb25lbnQsXG5cdFNlYXJjaENvbXBvbmVudFxufSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IENvbmZpcm1GcmVzaEluc3RhbGxNb2RhbCB9IGZyb20gJy4vZmlyc3RpbnN0YWxsY29uZmlybSc7XG5pbXBvcnQgeyBzaG93Q3VzdG9tSW5zdGFsbE1vZGFsIH0gZnJvbSBcIi4vY3VzdG9tSW5zdGFsbE1vZGFsXCI7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgQVZBSUxBQkxFX0VESVRJT05TLCBFZGl0aW9uIH0gZnJvbSAnLi9lZGl0aW9ucydcblxuXG4vLyBEZWZpbmUgeW91ciBDdXN0b21QYXRoRW50cnkgaW50ZXJmYWNlLlxuaW50ZXJmYWNlIEN1c3RvbVBhdGhFbnRyeSB7XG5cdHZhdWx0UGF0aDogc3RyaW5nO1xuXHRtYW5pZmVzdEtleTogc3RyaW5nO1xuXHRkb1VwZGF0ZTogYm9vbGVhbjtcbn1cblxuLy8gRmlsZVBhdGhTdWdnZXN0ZXIgZm9yIGxpdmUgc2VhcmNoIG9uIHZhdWx0IGZpbGVzLlxuY2xhc3MgRmlsZVBhdGhTdWdnZXN0ZXIgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxzdHJpbmc+IHtcblx0cHJpdmF0ZSBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50O1xuXHRwcml2YXRlIHBhdGhzOiB7IHBhdGg6IHN0cmluZzsgaXNGb2xkZXI6IGJvb2xlYW4gfVtdID0gW107XG5cdHByaXZhdGUgY3VycmVudFN1Z2dlc3Rpb25zOiBzdHJpbmdbXSA9IFtdO1xuXHRwcml2YXRlIHJlbmRlcmVkU3VnZ2VzdGlvbnM6IE1hcDxIVE1MRWxlbWVudCwgc3RyaW5nPiA9IG5ldyBNYXAoKTtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudCkge1xuXHRcdHN1cGVyKGFwcCwgaW5wdXRFbCk7XG5cdFx0dGhpcy5pbnB1dEVsID0gaW5wdXRFbDtcblxuXHRcdC8vIEdldCBmb2xkZXJzIGFuZCBtYXJrZG93biBmaWxlcyBmcm9tIHRoZSB2YXVsdC5cblx0XHRjb25zdCBmb2xkZXJzID0gT2JqZWN0LnZhbHVlcyhhcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKSlcblx0XHRcdC5maWx0ZXIoKGYpOiBmIGlzIFRGb2xkZXIgPT4gZiBpbnN0YW5jZW9mIFRGb2xkZXIpXG5cdFx0XHQubWFwKGYgPT4gKHsgcGF0aDogZi5wYXRoLCBpc0ZvbGRlcjogdHJ1ZSB9KSk7XG5cdFx0Y29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpXG5cdFx0XHQubWFwKGYgPT4gKHsgcGF0aDogZi5wYXRoLCBpc0ZvbGRlcjogZmFsc2UgfSkpO1xuXHRcdHRoaXMucGF0aHMgPSBbLi4uZm9sZGVycywgLi4uZmlsZXNdO1xuXG5cdFx0dGhpcy5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0aWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGNvbnRhaW5lciA9ICh0aGlzIGFzIGFueSkuY29udGFpbmVyRWwgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdFx0aWYgKCFjb250YWluZXIpIHJldHVybjtcblx0XHRcdFx0XHRjb25zdCBzZWxlY3RlZEVsID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zdWdnZXN0aW9uLWl0ZW0uaXMtc2VsZWN0ZWQnKSBhcyBIVE1MRWxlbWVudDtcblx0XHRcdFx0XHRpZiAoc2VsZWN0ZWRFbCkge1xuXHRcdFx0XHRcdFx0Y29uc3Qgc2VsZWN0ZWRQYXRoID0gdGhpcy5yZW5kZXJlZFN1Z2dlc3Rpb25zLmdldChzZWxlY3RlZEVsKTtcblx0XHRcdFx0XHRcdGlmIChzZWxlY3RlZFBhdGgpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zZWxlY3RTdWdnZXN0aW9uKHNlbGVjdGVkUGF0aCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LCAwKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdGdldFN1Z2dlc3Rpb25zKGlucHV0U3RyOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG5cdFx0Y29uc3QgcXVlcnkgPSBpbnB1dFN0ci50b0xvd2VyQ2FzZSgpO1xuXHRcdHRoaXMuY3VycmVudFN1Z2dlc3Rpb25zID0gdGhpcy5wYXRoc1xuXHRcdFx0LmZpbHRlcigoeyBwYXRoIH0pID0+IHBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkpXG5cdFx0XHQubWFwKHAgPT4gcC5wYXRoKTtcblx0XHRyZXR1cm4gdGhpcy5jdXJyZW50U3VnZ2VzdGlvbnM7XG5cdH1cblxuXHRyZW5kZXJTdWdnZXN0aW9uKHBhdGg6IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cdFx0Y29uc3QgaXNGb2xkZXIgPSB0aGlzLnBhdGhzLmZpbmQocCA9PiBwLnBhdGggPT09IHBhdGgpPy5pc0ZvbGRlcjtcblx0XHRlbC5hZGRDbGFzcyhcIm1vZC1jb21wbGV4XCIpO1xuXHRcdGNvbnN0IGljb25FbCA9IGVsLmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24taWNvbicgfSk7XG5cdFx0c2V0SWNvbihpY29uRWwsIGlzRm9sZGVyID8gJ2ZvbGRlcicgOiAnZG9jdW1lbnQnKTtcblxuXHRcdGNvbnN0IG5hbWUgPSBwYXRoLnNwbGl0KCcvJykucG9wKCkhO1xuXHRcdGNvbnN0IGRpc3BsYXlOYW1lID0gaXNGb2xkZXIgPyBuYW1lIDogbmFtZS5yZXBsYWNlKC9cXC5tZCQvLCAnJyk7XG5cdFx0ZWwuY3JlYXRlRGl2KHsgdGV4dDogZGlzcGxheU5hbWUsIGNsczogJ3N1Z2dlc3Rpb24tdGl0bGUnIH0pO1xuXHRcdGNvbnN0IHBhcmVudFBhdGggPSBwYXRoLnNwbGl0KCcvJykuc2xpY2UoMCwgLTEpLmpvaW4oJy8nKTtcblx0XHRlbC5jcmVhdGVEaXYoeyB0ZXh0OiBwYXJlbnRQYXRoLCBjbHM6ICdzZWFyY2gtc3VnZ2VzdC1pbmZvLXRleHQnIH0pO1xuXHRcdGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZTogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdHRoaXMuc2VsZWN0U3VnZ2VzdGlvbihwYXRoKTtcblx0XHR9KTtcblx0XHR0aGlzLnJlbmRlcmVkU3VnZ2VzdGlvbnMuc2V0KGVsLCBwYXRoKTtcblx0fVxuXG5cdHNlbGVjdFN1Z2dlc3Rpb24ocGF0aDogc3RyaW5nKTogdm9pZCB7XG5cdFx0dGhpcy5pbnB1dEVsLnZhbHVlID0gcGF0aDtcblx0XHR0aGlzLmlucHV0RWwuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJpbnB1dFwiKSk7XG5cdFx0dGhpcy5jbG9zZSgpO1xuXHR9XG59XG5cbi8vIE1vZGFsIGZvciBkaXNwbGF5aW5nIHRoZSBjaGFuZ2Vsb2cuXG5jbGFzcyBNYXJrZG93blByZXZpZXdNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHByaXZhdGUgY29udGVudDogc3RyaW5nKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0fVxuXG5cdG9uT3BlbigpOiB2b2lkIHtcblx0XHR0aGlzLmNvbnRlbnRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHRcdHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1Rvb2xraXQgQ2hhbmdlbG9nJyB9KTtcblx0XHRjb25zdCBtZCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpO1xuXHRcdGNvbnN0IGR1bW15Q29tcG9uZW50ID0gbmV3IGNsYXNzIGV4dGVuZHMgQ29tcG9uZW50IHt9KCk7XG5cdFx0TWFya2Rvd25SZW5kZXJlci5yZW5kZXJNYXJrZG93bih0aGlzLmNvbnRlbnQsIG1kLCAnLycsIGR1bW15Q29tcG9uZW50KTtcblx0fVxuXG5cdG9uQ2xvc2UoKTogdm9pZCB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG4vLyBUaGUgZnVsbCBzZXR0aW5ncyB0YWIuXG5leHBvcnQgY2xhc3MgVG9vbGtpdFNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjsgIFxuXHR9ICAgXG5cdHByaXZhdGUgcmVuZGVySGVhZGVyKHJvb3Q6IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cdFx0Y29uc3QgaGVhZGVyID0gcm9vdC5jcmVhdGVEaXYoKTtcblx0XHRoZWFkZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRoZWFkZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7XG5cdFx0aGVhZGVyLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcblx0XHRoZWFkZXIuc3R5bGUuYm9yZGVyQm90dG9tID0gJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKSc7XG5cdFx0aGVhZGVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcyZW0nO1xuXHRcdGhlYWRlci5zdHlsZS5wYWRkaW5nQm90dG9tID0gJzAuNWVtJztcblx0ICBcblx0XHRoZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnVlZ1bmRlcmxvcmUgVG9vbGtpdCBTZXR0aW5ncycgfSk7XG5cdCAgXG5cdFx0Y29uc3QgaGVhZGVyQnRucyA9IGhlYWRlci5jcmVhdGVEaXYoKTtcblx0XHRoZWFkZXJCdG5zLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0aGVhZGVyQnRucy5zdHlsZS5nYXAgPSAnMC41ZW0nO1xuXHQgIFxuXHRcdGNvbnN0IGRvY3NCdG4gPSBoZWFkZXJCdG5zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdEb2NzJyB9KTtcblx0XHRkb2NzQnRuLm9uY2xpY2sgPSAoKSA9PiB3aW5kb3cub3BlbignaHR0cDovL3Z2dW5kZXJsb3JlLmNvbScsICdfYmxhbmsnKTtcblx0ICBcblx0XHRjb25zdCBnaXRodWJCdG4gPSBoZWFkZXJCdG5zLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdHaXRIdWInIH0pO1xuXHRcdGdpdGh1YkJ0bi5vbmNsaWNrID0gKCkgPT5cblx0XHQgIHdpbmRvdy5vcGVuKCdodHRwczovL2dpdGh1Yi5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbCcsICdfYmxhbmsnKTtcblx0ICBcblx0XHRjb25zdCBrb2ZpQnRuID0gaGVhZGVyQnRucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdCAgdGV4dDogJ1x1MjYxNSBLby1maScsXG5cdFx0ICBjbHM6ICdtb2QtY3RhJyxcblx0XHR9KTtcblx0XHRrb2ZpQnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjZmY1OTAwJztcblx0XHRrb2ZpQnRuLnN0eWxlLmNvbG9yID0gJ3doaXRlJztcblx0XHRrb2ZpQnRuLm9uY2xpY2sgPSAoKSA9PiB3aW5kb3cub3BlbignaHR0cHM6Ly9rby1maS5jb20vdnZ1bmRlcmxvcmUnLCAnX2JsYW5rJyk7XG5cdCAgfVxuXHQgIFxuXHRcdHByaXZhdGUgcmVuZGVyRmlyc3RSdW5DYXJkKHJvb3Q6IEhUTUxFbGVtZW50KXtcblx0XHRcdFxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm5lZWRzSW5zdGFsbCkge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSAgPSAnJztcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZSAgICA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0Ly8gMSkgT3V0ZXIgd3JhcHBlclxuXHRcdFx0Y29uc3QgY2FyZCA9IHJvb3QuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndnZ1bmRlcmxvcmUtZmlyc3QtcnVuJyB9KTtcblx0XHRcdC8vIE1ha2UgdGhlIGNhcmQgYSBmbGV4XHUyMDEwY29sdW1uIGFuZCBjZW50ZXIgZXZlcnl0aGluZzpcblx0XHRcdE9iamVjdC5hc3NpZ24oY2FyZC5zdHlsZSwge1xuXHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0ZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG5cdFx0XHRhbGlnbkl0ZW1zOiAnY2VudGVyJyxcblx0XHRcdHRleHRBbGlnbjogJ2NlbnRlcicsXG5cdFx0XHQvKiBcblx0XHRcdFx0UHVzaCB0aGUgY2FyZCBhIGJpdCBkb3duIGZyb20gdGhlIHRvcCBvZiB0aGUgc2V0dGluZ3MgcGFuZS5cblx0XHRcdFx0WW91IGNhbiBhZGp1c3QgXCIyZW1cIiB0byBtb3ZlIGl0IGhpZ2hlciBvciBsb3dlci5cblx0XHRcdCovXG5cdFx0XHRtYXJnaW5Ub3A6ICcyZW0nLFxuXHRcdFx0LyogT3B0aW9uYWw6IGFkZCBzb21lIHBhZGRpbmcgc28gaXQgZG9lc24ndCBodWcgdGhlIGVkZ2VzICovXG5cdFx0XHRwYWRkaW5nOiAnMWVtJyxcblx0XHRcdGJvcmRlcjogJzJweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG5cdFx0XHRib3JkZXJSYWRpdXM6ICcxOHB4JywgICAgICAgIC8qIChvcHRpb25hbCkgcm91bmQgdGhlIGNvcm5lcnMgc2xpZ2h0bHkgKi9cblx0XHRcdGJhY2tncm91bmRDb2xvcjogJ3ZhcigtLWJhY2tncm91bmQtcHJpbWFyeSknLCAvKiAob3B0aW9uYWwpIHdoaXRlL2dyYXkgYmFja2dyb3VuZCAqL1xuXHRcdFx0fSk7XG5cdFx0XG5cdFx0XHQvLyAyKSBIZWFkZXJcblx0XHRcdGNvbnN0IHRpdGxlID0gY2FyZC5jcmVhdGVFbCgnaDInLCB7XG5cdFx0XHR0ZXh0OiAnXHVEODNDXHVERkYwIFdlbGNvbWUgdG8gVlZ1bmRlcmxvcmUnLFxuXHRcdFx0Y2xzOiAndnYtY2FyZC10aXRsZScsXG5cdFx0XHR9KTtcblx0XHRcdC8vIEdpdmUgdGhlIHRpdGxlIGEgbGl0dGxlIGJvdHRvbSBtYXJnaW5cblx0XHRcdHRpdGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwLjVlbSc7XG5cdFx0XG5cdFx0XHQvLyAzKSBJbnN0cnVjdGlvbmFsIGNvcHlcblx0XHRcdGNvbnN0IGRlc2MgPSBjYXJkLmNyZWF0ZUVsKCdwJywge1xuXHRcdFx0dGV4dDpcblx0XHRcdFx0J0dldCBzdGFydGVkIGJ5IGluc3RhbGxpbmcgdGhlIGRlZmF1bHQgdG9vbGtpdFx1MjAxNFxcbm9yIGNob29zZSBpbmRpdmlkdWFsIHBpZWNlcyB0byBzdWl0IHlvdXIgdmF1bHQuJyxcblx0XHRcdGNsczogJ3Z2LWNhcmQtZGVzYycsXG5cdFx0XHR9KTtcblx0XHRcdC8vIFNsaWdodCBib3R0b20gbWFyZ2luIHNvIGl0IGRvZXNuJ3QgYnV0dCByaWdodCB1cCBhZ2FpbnN0IHRoZSBidXR0b25zXG5cdFx0XHRkZXNjLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxLjI1ZW0nO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgUlVMRVNFVCAvIFJFRkVSRU5DRSBHUklEIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgcGx1Z2luID0gdGhpcy5wbHVnaW47XG5cbi8vIDEpIEdyaWQgY29udGFpbmVyXG5jb25zdCBncmlkID0gY2FyZC5jcmVhdGVEaXYoKTtcbk9iamVjdC5hc3NpZ24oZ3JpZC5zdHlsZSwge1xuICBkaXNwbGF5OiAnZ3JpZCcsXG4gIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICdtYXgtY29udGVudCBtYXgtY29udGVudCcsXG4gIGNvbHVtbkdhcDogJzFyZW0nLFxuICByb3dHYXA6ICcwLjI1cmVtJyxcbiAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICBqdXN0aWZ5SXRlbXM6ICdjZW50ZXInLFxuICBtYXJnaW5Cb3R0b206ICcxcmVtJyxcbn0pO1xuXG4vLyAyKSBIZWFkZXIgcm93XG5jb25zdCBsYWJlbFJzID0gZ3JpZC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnUnVsZXNldCcgfSk7XG5sYWJlbFJzLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG5jb25zdCBsYWJlbFJlZiA9IGdyaWQuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ1JlZmVyZW5jZSAob3B0aW9uYWwpJyB9KTtcbmxhYmVsUmVmLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG5cbi8vIDMpIElucHV0IGNlbGxzXG5jb25zdCByc0NlbGwgPSBncmlkLmNyZWF0ZURpdih7IGF0dHI6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOmNlbnRlcicgfSB9KTtcbmNvbnN0IHJlZkNlbGwgPSBncmlkLmNyZWF0ZURpdih7IGF0dHI6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOmNlbnRlcicgfSB9KTtcblxuLy8gNCkgTXV0ZWQsIGl0YWxpYyBzdW1tYXJ5IGJhciAoc3BhbnMgYm90aCBjb2x1bW5zKVxuY29uc3Qgc3VtbWFyeUJhciA9IGdyaWQuY3JlYXRlRGl2KCk7XG5PYmplY3QuYXNzaWduKHN1bW1hcnlCYXIuc3R5bGUsIHtcbiAgZ3JpZENvbHVtbjogJzEgLyBzcGFuIDInLFxuICBkaXNwbGF5OiAnZmxleCcsXG4gIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICBmbGV4V3JhcDogJ3dyYXAnLFxuICBnYXA6ICcwLjVyZW0nLFxuICBmb250U2l6ZTogJzAuODVlbScsXG4gIGNvbG9yOiAndmFyKC0tdGV4dC1tdXRlZCknLFxuICBmb250U3R5bGU6ICdpdGFsaWMnLFxuICBtYXJnaW5Ub3A6ICcwLjI1cmVtJyxcbiAgbWFyZ2luQm90dG9tOiAnMXJlbScsXG59KTtcbmNvbnN0IHJ1bGVzZXRTcGFuID0gc3VtbWFyeUJhci5jcmVhdGVTcGFuKHtcbiAgdGV4dDogYFJ1bGVzZXQ6ICR7XG4gICAgcGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtXG4gICAgICA/IGBEJkQgNUUgKCR7cGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtfSlgXG4gICAgICA6ICcnXG4gIH1gLFxufSk7XG5ydWxlc2V0U3Bhbi5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuc3VtbWFyeUJhci5jcmVhdGVTcGFuKHsgdGV4dDogJ1JlZmVyZW5jZXM6JyB9KTtcbmNvbnN0IGNoaXBzV3JhcHBlciA9IHN1bW1hcnlCYXIuY3JlYXRlRGl2KCk7XG5PYmplY3QuYXNzaWduKGNoaXBzV3JhcHBlci5zdHlsZSwgeyBkaXNwbGF5OiAnZmxleCcsIGdhcDogJzRweCcgfSk7XG5cbi8vIEhlbHBlciB0byByZW5kZXIgYSBjaGlwXG5mdW5jdGlvbiBhZGRDaGlwKGlkOiBzdHJpbmcpIHtcblx0Y29uc3QgZWQgPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZChlID0+IGUuaWQgPT09IGlkKSE7XG5cdGNvbnN0IGNoaXAgPSBjaGlwc1dyYXBwZXIuY3JlYXRlRGl2KHtcblx0ICBhdHRyOiB7XG5cdFx0c3R5bGU6XG5cdFx0ICAnYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOjJweCA2cHg7ICcgK1xuXHRcdCAgJ2JvcmRlci1yYWRpdXM6NHB4OyBkaXNwbGF5OmlubGluZS1mbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGdhcDo0cHg7J1xuXHQgIH1cblx0fSk7XG5cdGNoaXAuY3JlYXRlU3Bhbih7IHRleHQ6IGVkLmxhYmVsIH0pO1xuXHRjb25zdCByZW0gPSBjaGlwLmNyZWF0ZVNwYW4oe1xuXHQgIHRleHQ6ICdcdTAwRDcnLFxuXHQgIGF0dHI6IHsgc3R5bGU6ICdjdXJzb3I6cG9pbnRlcjsgbWFyZ2luLWxlZnQ6NHB4OycgfVxuXHR9KTtcblx0cmVtLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdCAgcGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UgPSBwbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZS5maWx0ZXIoeCA9PiB4ICE9PSBpZCk7XG5cdCAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHQgIGNoaXAucmVtb3ZlKCk7XG5cdCAgdXBkYXRlSW5zdGFsbEJ1dHRvbnMoKTtcblx0fTtcbiAgfVxuICA7XG5cbi8vIEluaXRpYWwgY2hpcHMgZHJhd1xucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UuZm9yRWFjaChlID0+IGFkZENoaXAoZSkpO1xuXG4vLyA1KSBSdWxlc2V0IGRyb3Bkb3duXG5jb25zdCByc0Ryb3Bkb3duID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KHJzQ2VsbCk7XG5yc0Ryb3Bkb3duLmFkZE9wdGlvbignJywgJ1NlbGVjdCBlZGl0aW9uXHUyMDI2Jyk7XG5BVkFJTEFCTEVfRURJVElPTlMuZm9yRWFjaCgoZWQ6IEVkaXRpb24pID0+IHtcbiAgcnNEcm9wZG93bi5hZGRPcHRpb24oZWQuaWQsIGVkLmxhYmVsKTtcbn0pO1xucnNEcm9wZG93blxuICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0pXG4gIC5vbkNoYW5nZShhc3luYyAodmFsKSA9PiB7XG4gICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0gPSB2YWw7XG4gICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAvLyBMaXZlXHUyMDEwdXBkYXRlIHlvdXIgc3VtbWFyeSBiYXI6XG4gICAgY29uc3QgY2hvc2VuID0gQVZBSUxBQkxFX0VESVRJT05TLmZpbmQoZSA9PiBlLmlkID09PSB2YWwpO1xuICAgIHJ1bGVzZXRTcGFuLnRleHRDb250ZW50ID0gY2hvc2VuID8gY2hvc2VuLmxhYmVsIDogJyc7XG5cbiAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgcmVmZXJlbmNlIGNoaXBzOlxuICAgIGNoaXBzV3JhcHBlci5lbXB0eSgpO1xuXG4gICAgdXBkYXRlSW5zdGFsbEJ1dHRvbnMoKTtcbiAgfSk7XG5cbiAgY29uc3Qgc2VhcmNoV3JhcHBlckVsID0gcmVmQ2VsbC5jcmVhdGVEaXYoeyBhdHRyOiB7IHN0eWxlOiAndGV4dC1hbGlnbjpjZW50ZXI7JyB9IH0pO1xuICBjb25zdCBzZWFyY2hDb21wID0gbmV3IFNlYXJjaENvbXBvbmVudChzZWFyY2hXcmFwcGVyRWwpO1xuICBzZWFyY2hDb21wLnNldFBsYWNlaG9sZGVyKCdBZGQgcmVmZXJlbmNlIHJ1bGVzXHUyMDI2Jyk7XG4gIGNvbnN0IHN1Z2dlc3Rpb25JbnB1dEVsID0gc2VhcmNoQ29tcC5pbnB1dEVsO1xuICBcbiAgbmV3IGNsYXNzIGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8c3RyaW5nPiB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50KSB7XG5cdCAgc3VwZXIoYXBwLCBpbnB1dEVsKTtcblx0fVxuICBcblx0Ly8gMSkgUHJvcG9zZSBlZGl0aW9uIElEcyAobWludXMgdGhlIG9uZSB0aGV5IHBpY2tlZCBhcyB0aGUgbWFpbiBydWxlc2V0KVxuXHRnZXRTdWdnZXN0aW9ucyhpbnB1dDogc3RyaW5nKTogc3RyaW5nW10ge1xuXHQgIHJldHVybiBBVkFJTEFCTEVfRURJVElPTlNcblx0XHQuZmlsdGVyKGVkID0+IGVkLmlkICE9PSBwbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0pICAgICAgICAgICAgLy8gZmlsdGVyIG91dCB0aGUgY2hvc2VuIHJ1bGVzZXRcblx0XHQuZmlsdGVyKGVkID0+IGVkLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoaW5wdXQudG9Mb3dlckNhc2UoKSkpICAgICAvLyBtYXRjaCBvbiBsYWJlbCB0ZXh0XG5cdFx0Lm1hcChlZCA9PiBlZC5pZCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSBJRCBmb3IgZWFjaFxuXHR9XG4gIFxuXHQvLyAyKSBSZW5kZXIgdGhlIGh1bWFuLXJlYWRhYmxlIGxhYmVsXG5cdHJlbmRlclN1Z2dlc3Rpb24oaXRlbTogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcblx0ICBjb25zdCBlZCA9IEFWQUlMQUJMRV9FRElUSU9OUy5maW5kKGUgPT4gZS5pZCA9PT0gaXRlbSkhO1xuXHQgIGVsLmNyZWF0ZURpdih7IHRleHQ6IGVkLmxhYmVsIH0pO1xuXHR9XG4gIFxuXHQvLyAzKSBXaGVuIHRoZXkgcGljayBvbmUsIHN0b3JlIGl0cyBJRCBhbmQgYWRkIGEgY2hpcFxuXHRzZWxlY3RTdWdnZXN0aW9uKGl0ZW06IHN0cmluZyk6IHZvaWQge1xuXHQgIGlmICghcGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UuaW5jbHVkZXMoaXRlbSkpIHtcblx0XHRwbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZS5wdXNoKGl0ZW0pO1xuXHRcdHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRhZGRDaGlwKGl0ZW0pO1xuXHQgIH1cblx0ICB0aGlzLmNsb3NlKCk7XG5cdCAgc3VnZ2VzdGlvbklucHV0RWwudmFsdWUgPSAnJztcblx0ICB1cGRhdGVJbnN0YWxsQnV0dG9ucygpO1xuXHR9XG4gIH0odGhpcy5hcHAsIHN1Z2dlc3Rpb25JbnB1dEVsKTtcbiAgXG5cblxuXG5cblx0XHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBCdXR0b24gcm93IFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0Y29uc3QgYnRuUm93MSA9IGNhcmQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAndnYtYnV0dG9uLXJvdycgfSk7XG5cdFx0XHRPYmplY3QuYXNzaWduKGJ0blJvdzEuc3R5bGUsIHtcblx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdGdhcDogJzAuNzVlbScsXG5cdFx0XHRqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG5cdFx0XHRtYXJnaW5Cb3R0b206ICcxLjVlbScsXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc3QgaW5zdGFsbEJ0bjEgPSBidG5Sb3cxLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHR0ZXh0OiAnSW5zdGFsbCBUb29sa2l0Jyxcblx0XHRcdGNsczogJ21vZC1jdGEnLFxuXHRcdFx0fSk7XG5cdFx0XHRpbnN0YWxsQnRuMS5vbkNsaWNrRXZlbnQoKCkgPT5cblx0XHRcdG5ldyBDb25maXJtRnJlc2hJbnN0YWxsTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKS5vcGVuKClcblx0XHRcdCk7XG5cblx0XHRcdGNvbnN0IGN1c3RvbUJ0bjEgPSBidG5Sb3cxLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHR0ZXh0OiAnQ3VzdG9tIEluc3RhbGwnLFxuXHRcdFx0Y2xzOiAnbW9kLWN0YScsXG5cdFx0XHR9KTtcblx0XHRcdE9iamVjdC5hc3NpZ24oY3VzdG9tQnRuMS5zdHlsZSwge1xuXHRcdFx0YmFja2dyb3VuZDogJ25vbmUnLFxuXHRcdFx0Ym9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCknLFxuXHRcdFx0Y29sb3I6ICd2YXIoLS10ZXh0LW5vcm1hbCknLFxuXHRcdFx0fSk7XG5cdFx0XHRjdXN0b21CdG4xLm9uQ2xpY2tFdmVudCgoKSA9PiBzaG93Q3VzdG9tSW5zdGFsbE1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikpO1xuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSGVscGVyIHRvIGVuYWJsZS9kaXNhYmxlIHRoZSBidXR0b25zIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdFx0Y29uc3QgdXBkYXRlSW5zdGFsbEJ1dHRvbnMgPSAoKSA9PiB7XG5cdFx0XHRjb25zdCBoYXNSdWxlc2V0ID0gQm9vbGVhbih0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSk7XG5cdFx0XHRpbnN0YWxsQnRuMS50b2dnbGVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgIWhhc1J1bGVzZXQpO1xuXHRcdFx0Y3VzdG9tQnRuMS50b2dnbGVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgIWhhc1J1bGVzZXQpO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly8gNykgSW5pdGlhbCBjYWxsLCBpbiBjYXNlIHdlXHUyMDE5cmUgcmUtcmVuZGVyaW5nXG5cdFx0XHR1cGRhdGVJbnN0YWxsQnV0dG9ucygpO1xuXG5cdFx0XG5cdFx0XHQvLyA1KSBcdTIwMUNTa2lwXHUyMDFEIGxpbmtcblx0XHRcdGNvbnN0IHNraXBQYXJhID0gY2FyZC5jcmVhdGVFbCgncCcsIHsgY2xzOiAndnYtc2tpcC1saW5rJyB9KTtcblx0XHRcdC8vIENlbnRlciBpdCBhbmQgZ2l2ZSBpdCBhIHRpbnkgdG9wIG1hcmdpblxuXHRcdFx0T2JqZWN0LmFzc2lnbihza2lwUGFyYS5zdHlsZSwge1xuXHRcdFx0dGV4dEFsaWduOiAnY2VudGVyJyxcblx0XHRcdG1hcmdpblRvcDogJzAuMjVlbScsXG5cdFx0XHR9KTtcblx0XHRcdHNraXBQYXJhXG5cdFx0XHQuY3JlYXRlRWwoJ2EnLCB7XG5cdFx0XHR0ZXh0OiAnQWxyZWFkeSBoYXZlIHRoZSBUb29sa2l0PyBTaG93IG1lIHRoZSBzZXR0aW5ncyBcdTIxOTInLFxuXHRcdFx0fSlcblx0XHRcdC5vbkNsaWNrRXZlbnQoYXN5bmMgKCkgPT4ge1xuXHRcdFx0Ly8gMSkgQ3JlYXRlIHRoZSBoaWRkZW4gbWFya2VyIGZpbGUgc28gXCJmaXJzdFx1MjAxMHJ1blwiIG5ldmVyIHNob3dzIGFnYWluOlxuXHRcdFx0Y29uc3QgbWFya2VyUGF0aCA9ICcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJztcblx0XHRcdHRyeSB7XG5cdFx0XHRcdC8vIE9ubHkgd3JpdGUgaXQgaWYgaXQgZG9lcyBub3QgZXhpc3QgeWV0XG5cdFx0XHRcdGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlclBhdGgpKSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobWFya2VyUGF0aCwgJycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gY3JlYXRlIG1hcmtlciBmaWxlOicsIGUpO1xuXHRcdFx0fVxuXHRcdFxuXHRcdFx0Ly8gMikgRmxpcCBuZWVkc0luc3RhbGwgdG8gZmFsc2UgKHNvIHRoZSBmaXJzdFx1MjAxMHJ1biBjYXJkIGlzIGdvbmUpXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZWVkc0luc3RhbGwgPSBmYWxzZTtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFxuXHRcdFx0Ly8gMykgUmVcdTIwMTByZW5kZXIgdGhlIG5vcm1hbCBzZXR0aW5ncyBVSVxuXHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdCAgXG5cdCAgXG5cdHByaXZhdGUgdmVyc2lvblZhbHVlRWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgZm9yY2VXYXJuaW5nRWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zb2xlLmxvZyhcIlx1RDgzRFx1REQyNyBkaXNwbGF5KCkgY2FsbGVkLCBuZWVkc0luc3RhbGwgPVwiLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZWVkc0luc3RhbGwpO1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29uc3Qgc2F2ZWRTY3JvbGxUb3AgPSBjb250YWluZXJFbC5zY3JvbGxUb3A7XG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblx0XG5cdFx0dGhpcy5yZW5kZXJIZWFkZXIoY29udGFpbmVyRWwpOyAvLyBcdUQ4M0RcdURDNDhcdTAwQTBBbHdheXMgcmVuZGVyIGhlYWRlciBmaXJzdFxuXHRcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubmVlZHNJbnN0YWxsKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcIlx1RDgzRVx1RERFQSBTaG93aW5nIGZpcnN0LXJ1biBjYXJkXCIpO1xuXHRcdFx0dGhpcy5yZW5kZXJGaXJzdFJ1bkNhcmQoY29udGFpbmVyRWwpO1xuXHRcdFx0Y29udGFpbmVyRWwuc2Nyb2xsVG9wID0gc2F2ZWRTY3JvbGxUb3A7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHQ7KGFzeW5jICgpID0+IHtcdFxuXHRcdFxuXHRcdC8qKiBcdTI1MDBcdTI1MDBcdTI1MDAgVkVSU0lPTiBTRUNUSU9OIFx1MjUwMFx1MjUwMFx1MjUwMCAqL1xuXHRcdGNvbnN0IHZlcnNpb25Sb3cgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoKTtcblx0XHR2ZXJzaW9uUm93LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxZW0nO1xuXHRcdHZlcnNpb25Sb3cuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHR2ZXJzaW9uUm93LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nO1xuXHRcdHZlcnNpb25Sb3cuc3R5bGUuYWxpZ25JdGVtcyA9ICdmbGV4LXN0YXJ0Jztcblx0XHR2ZXJzaW9uUm93LnN0eWxlLmdhcCA9ICcyZW0nO1xuXHRcdHZlcnNpb25Sb3cuc3R5bGUuZmxleFdyYXAgPSAnd3JhcCc7XG5cdFx0dmVyc2lvblJvdy5zdHlsZS5ib3JkZXJCb3R0b20gPSAnMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJztcblxuXHRcdGNvbnN0IHZlcnNpb25JbmZvID0gdmVyc2lvblJvdy5jcmVhdGVEaXYoKTtcblx0XHR2ZXJzaW9uSW5mby5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdHZlcnNpb25JbmZvLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcblx0XHR2ZXJzaW9uSW5mby5zdHlsZS5nYXAgPSAnMC4yNWVtJztcblxuXHRcdGxldCBpbnN0YWxsZWQgPSAnTm90IGluc3RhbGxlZCc7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHZlckNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJy52ZXJzaW9uLmpzb24nKTtcblx0XHRcdGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKHZlckNvbnRlbnQpO1xuXHRcdFx0aW5zdGFsbGVkID0ganNvbi52ZXJzaW9uID8/ICdOb3QgaW5zdGFsbGVkJztcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUud2FybignQ291bGQgbm90IHJlYWQgLnZlcnNpb24uanNvbiBmcm9tIHZhdWx0OicsIGVycik7XG5cdFx0fVxuXHRcdGNvbnN0IGxhdGVzdCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uID8/ICdDb3VsZCBub3QgZmV0Y2gnO1xuXHRcdGNvbnN0IGlzTWF0Y2ggPSBpbnN0YWxsZWQgPT09IGxhdGVzdDtcblxuXHRcdGNvbnN0IHZhdWx0Um93ID0gdmVyc2lvbkluZm8uY3JlYXRlRGl2KCk7XG5cdFx0dmF1bHRSb3cuYXBwZW5kVGV4dCgnVmF1bHQgVG9vbGtpdCBWZXJzaW9uOiAnKTtcblx0XHRcblx0XHR0aGlzLnZlcnNpb25WYWx1ZUVsID0gdmF1bHRSb3cuY3JlYXRlU3BhbigpOyAgLy8gXHVEODNEXHVERDI1IHNhdmUgcmVmXG5cdFx0dGhpcy52ZXJzaW9uVmFsdWVFbC50ZXh0Q29udGVudCA9IGluc3RhbGxlZDtcblx0XHR0aGlzLnZlcnNpb25WYWx1ZUVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG5cdFx0dGhpcy52ZXJzaW9uVmFsdWVFbC5zdHlsZS5jb2xvciA9IGlzTWF0Y2ggPyAndmFyKC0tdGV4dC1zdWNjZXNzKScgOiAndmFyKC0tdGV4dC1lcnJvciknO1xuXHRcdFxuXHRcdGNvbnN0IGxhdGVzdFJvdyA9IHZlcnNpb25JbmZvLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdMYXRlc3QgT2ZmaWNpYWwgVmVyc2lvbjogJyB9KTtcblx0XHRsYXRlc3RSb3cuY3JlYXRlU3Bhbih7XG5cdFx0XHR0ZXh0OiBsYXRlc3QsXG5cdFx0XHRhdHRyOiB7IHN0eWxlOiAnZm9udC13ZWlnaHQ6IGJvbGQ7IGNvbG9yOiB2YXIoLS10ZXh0LXN1Y2Nlc3MpOycgfVxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgdmVyc2lvbkNvbnRyb2xzID0gdmVyc2lvblJvdy5jcmVhdGVEaXYoKTtcblx0XHR2ZXJzaW9uQ29udHJvbHMuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHR2ZXJzaW9uQ29udHJvbHMuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuXHRcdHZlcnNpb25Db250cm9scy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2ZsZXgtZW5kJztcblx0XHR2ZXJzaW9uQ29udHJvbHMuc3R5bGUuZ2FwID0gJzAuNWVtJztcblxuXHRcdGNvbnN0IGJ1dHRvblJvdyA9IHZlcnNpb25Db250cm9scy5jcmVhdGVEaXYoKTtcblx0XHRidXR0b25Sb3cuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRidXR0b25Sb3cuc3R5bGUuZ2FwID0gJzAuNWVtJztcblxuXHRcdGNvbnN0IGNoZWNrQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0XHR0ZXh0OiBpbnN0YWxsZWQgIT09IGxhdGVzdCA/ICdQcmV2aWV3IFVwZGF0ZScgOiAnQ2hlY2sgZm9yIFVwZGF0ZXMnLFxuXHRcdFx0Y2xzOiAnbW9kLWN0YSdcblx0XHR9KTtcblx0XHRjaGVja0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcblx0XHRcdGlmIChpbnN0YWxsZWQgIT09IGxhdGVzdCkge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5wcmV2aWV3VXBkYXRlc01vZGFsKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5jaGVja0ZvclVwZGF0ZXMoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRjb25zdCBjaGFuZ2Vsb2dCdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1x1RDgzRFx1RENENiBWaWV3IENoYW5nZWxvZycgfSk7XG5cdFx0Y2hhbmdlbG9nQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0bmV3IE1hcmtkb3duUHJldmlld01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbi5jaGFuZ2Vsb2cpLm9wZW4oKTtcblx0XHR9KTtcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdENoZWNrZWQpIHtcblx0XHRcdGNvbnN0IGxhc3RDaGVja2VkID0gdmVyc2lvbkNvbnRyb2xzLmNyZWF0ZURpdigpO1xuXHRcdFx0bGFzdENoZWNrZWQuc3R5bGUuZm9udFNpemUgPSAnMTFweCc7XG5cdFx0XHRsYXN0Q2hlY2tlZC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG5cdFx0XHRsYXN0Q2hlY2tlZC50ZXh0Q29udGVudCA9IGBMYXN0IGNoZWNrZWQ6ICR7bmV3IERhdGUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdENoZWNrZWQpLnRvTG9jYWxlU3RyaW5nKCl9YDtcblx0XHR9XG5cblx0XHRcblxuXHRcdC8qKiBcdTI1MDBcdTI1MDBcdTI1MDAgRklYIFlPVVIgVkFVTFQgU0VDVElPTiAoY29sbGFwc2libGUsIGZpeGVkXHUyMDEwaWNvbikgXHUyNTAwXHUyNTAwXHUyNTAwICovXG5cdFx0Y29uc3QgZml4RGV0YWlscyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSZXBsYWNlIHlvdXIgb2xkIGZpeEhlYWRlciB3aXRoIHRoaXMgPHN1bW1hcnk+IFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGZpeEhlYWRlciA9IGZpeERldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcblx0XHRPYmplY3QuYXNzaWduKGZpeEhlYWRlci5zdHlsZSwge1xuXHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcblx0XHRhbGlnbkl0ZW1zOiAnc3RyZXRjaCcsXG5cdFx0cGFkZGluZzogJzAuNWVtIDAnLFxuXHRcdGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG5cdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0fSk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDAgQ3JlYXRlIGEgc2luZ2xlIGZsZXhcdTIwMTByb3cgaW5zaWRlIHRoZSBzdW1tYXJ5IGZvciB0aXRsZStpY29uIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGZpeEhlYWRlclJvdyA9IGZpeEhlYWRlci5jcmVhdGVEaXYoe1xuXHRcdGF0dHI6IHtcblx0XHRcdHN0eWxlOiBgXG5cdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuXHRcdFx0YCxcblx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwIExlZnQgc2lkZTogdGl0bGUgKyBkZXNjcmlwdGlvbiBibG9jayBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBmaXhUaXRsZUJsb2NrID0gZml4SGVhZGVyUm93LmNyZWF0ZURpdih7XG5cdFx0YXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47JyB9XG5cdFx0fSk7XG5cdFx0Zml4VGl0bGVCbG9jay5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdGaXggWW91ciBWYXVsdCcgfSk7XG5cdFx0Zml4VGl0bGVCbG9jay5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdHRleHQ6ICdGaXggYW5kIGJyb2tlbiwgZGVsZXRlZCwgb3IgbWlzcGxhY2VkIGZpbGVzIGluIHlvdXIgdG9vbGtpdC4nLFxuXHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXG5cdFx0YXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDAuMjVlbTsnIH0sXG5cdFx0fSk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDAgUmlnaHQgc2lkZTogc3RhdGljIHRvZ2dsZSBpY29uIChyb3RhdGVzIGluIHBsYWNlIG9ubHkpIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGZpeFRvZ2dsZUljb24gPSBmaXhIZWFkZXJSb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcblx0XHRPYmplY3QuYXNzaWduKGZpeFRvZ2dsZUljb24uc3R5bGUsIHtcblx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0ZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0dHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuXHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLCAvLyBSb3RhdGUgYXJvdW5kIGl0cyBvd24gY2VudGVyXG5cdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdHRyYW5zZm9ybTogZml4RGV0YWlscy5vcGVuID8gJ3JvdGF0ZSgwZGVnKScgOiAncm90YXRlKDE4MGRlZyknLFxuXHRcdH0pO1xuXHRcdGZpeERldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG5cdFx0Zml4VG9nZ2xlSWNvbi5zdHlsZS50cmFuc2Zvcm0gPSBmaXhEZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKSc7XG5cdFx0fTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBCb2R5IChzYW1lIGFzIGJlZm9yZSwganVzdCBpbmRlbnRlZCB1bmRlciA8ZGV0YWlscz4pIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGZpeEJvZHkgPSBmaXhEZXRhaWxzLmNyZWF0ZURpdih7IGNsczogJ3ZrLXNlY3Rpb24tYm9keScgfSk7XG5cdFx0Zml4Qm9keS5zdHlsZS5wYWRkaW5nTGVmdCA9ICcxZW0nO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwIEJ1dHRvbiArIHdhcm5pbmcgcm93IFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGZpeEJ1dHRvblJvdyA9IGZpeEJvZHkuY3JlYXRlRGl2KCk7XG5cdFx0Zml4QnV0dG9uUm93LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0Zml4QnV0dG9uUm93LnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nO1xuXHRcdGZpeEJ1dHRvblJvdy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG5cdFx0Zml4QnV0dG9uUm93LnN0eWxlLm1hcmdpblRvcCA9ICcwLjVlbSc7XG5cblx0XHRjb25zdCB3YXJuaW5nQ29udGFpbmVyID0gZml4QnV0dG9uUm93LmNyZWF0ZURpdigpO1xuXHRcdHRoaXMuZm9yY2VXYXJuaW5nRWwgPSB3YXJuaW5nQ29udGFpbmVyO1xuXG5cdFx0bGV0IGluc3RhbGxlZFZlcnNpb25TdHIgPSAnJztcblx0XHR0cnkge1xuXHRcdGNvbnN0IHZlcnNpb25GaWxlID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnLnZlcnNpb24uanNvbicpO1xuXHRcdGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UodmVyc2lvbkZpbGUpO1xuXHRcdGluc3RhbGxlZFZlcnNpb25TdHIgPSAocGFyc2VkLnZlcnNpb24gPz8gJycpLnRyaW0oKTtcblx0XHR9IGNhdGNoIHtcblx0XHRpbnN0YWxsZWRWZXJzaW9uU3RyID0gJyc7XG5cdFx0fVxuXG5cdFx0Y29uc3QgbGF0ZXN0VmVyc2lvblN0ciA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiA/PyAnJykudHJpbSgpO1xuXG5cdFx0Y29uc29sZS5sb2coXCJcdUQ4M0VcdURERUEgQ29tcGFyaW5nIHZlcnNpb25zOlwiLCBpbnN0YWxsZWRWZXJzaW9uU3RyLCBsYXRlc3RWZXJzaW9uU3RyKTtcblxuXHRcdGlmIChpbnN0YWxsZWRWZXJzaW9uU3RyICYmIGxhdGVzdFZlcnNpb25TdHIgJiYgaW5zdGFsbGVkVmVyc2lvblN0ciAhPT0gbGF0ZXN0VmVyc2lvblN0cikge1xuXHRcdGNvbnN0IHdhcm4gPSB3YXJuaW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHR0ZXh0OiBgXHUyNkEwXHVGRTBGIE5ldyB2ZXJzaW9uIGF2YWlsYWJsZSAoJHtpbnN0YWxsZWRWZXJzaW9uU3RyfSBcdTIxOTIgJHtsYXRlc3RWZXJzaW9uU3RyfSkgXHUyMDE0IHVzZSByZWd1bGFyIHVwZGF0ZSBpbnN0ZWFkYCxcblx0XHR9KTtcblx0XHR3YXJuLnN0eWxlLmZvbnRTaXplID0gJzAuODVlbSc7XG5cdFx0d2Fybi5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG5cdFx0d2Fybi5zdHlsZS5mb250U3R5bGUgPSAnaXRhbGljJztcblx0XHR3YXJuLnNldEF0dHIoXG5cdFx0XHQndGl0bGUnLFxuXHRcdFx0J0ZvcmNlIHVwZGF0aW5nIHdoaWxlIGEgbmV3IHZlcnNpb24gaXMgYXZhaWxhYmxlIG1heSBza2lwIGltcG9ydGFudCBjaGFuZ2VzLidcblx0XHQpO1xuXHRcdH1cblxuXHRcdC8vIFx1MjdBMVx1RkUwRiBSaWdodCBzaWRlOiBhY3Rpb24gYnV0dG9uc1xuXHRcdGNvbnN0IGJ1dHRvbkdyb3VwID0gZml4QnV0dG9uUm93LmNyZWF0ZURpdigpO1xuXHRcdGJ1dHRvbkdyb3VwLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0YnV0dG9uR3JvdXAuc3R5bGUuZ2FwID0gJzAuNWVtJztcblxuXHRcdGJ1dHRvbkdyb3VwLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0dGV4dDogJ0ZvcmNlIFVwZGF0ZSBWYXVsdCcsXG5cdFx0Y2xzOiAnbW9kLWN0YSdcblx0XHR9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdGF3YWl0IHRoaXMucGx1Z2luLmZvcmNlVXBkYXRlUHJldmlld0FuZENvbmZpcm0oKTtcblx0XHR9O1xuXG5cdFx0YnV0dG9uR3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHR0ZXh0OiAnVW5kbyBVcGRhdGUnXG5cdFx0fSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi51bmRvRm9yY2VVcGRhdGUoKTtcblx0XHR9O1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwIFRpbWVzdGFtcCByb3cgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4VGltZXN0YW1wUm93ID0gZml4Qm9keS5jcmVhdGVEaXYoKTtcblx0XHRPYmplY3QuYXNzaWduKGZpeFRpbWVzdGFtcFJvdy5zdHlsZSwge1xuXHRcdHRleHRBbGlnbjogJ3JpZ2h0Jyxcblx0XHRmb250U2l6ZTogJzExcHgnLFxuXHRcdGNvbG9yOiAndmFyKC0tdGV4dC1tdXRlZCknLFxuXHRcdG1hcmdpblRvcDogJzAuMjVlbSdcblx0XHR9KTtcblx0XHRmaXhUaW1lc3RhbXBSb3cudGV4dENvbnRlbnQgPSBgTGFzdCBmb3JjZWQ6ICR7XG5cdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdEZvcmNlVXBkYXRlXG5cdFx0XHQ/IG5ldyBEYXRlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RGb3JjZVVwZGF0ZSkudG9Mb2NhbGVTdHJpbmcoKVxuXHRcdFx0OiAnTm90IGZvcmNlZCB5ZXQnXG5cdFx0fWA7XG5cblxuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIEJBQ0tVUCBTRUNUSU9OIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGJhY2t1cERldGFpbHMgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGV0YWlscycsIHsgY2xzOiAndmstc2VjdGlvbicgfSk7XG5cblx0XHQvLyBTdW1tYXJ5IGJsb2NrOiBzdGFja2VkIGNvbHVtbiBsYXlvdXRcblx0XHRjb25zdCBiYWNrdXBTdW1tYXJ5ID0gYmFja3VwRGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXG5cdFx0T2JqZWN0LmFzc2lnbihiYWNrdXBTdW1tYXJ5LnN0eWxlLCB7XG5cdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdGFsaWduSXRlbXM6ICdzdHJldGNoJyxcblx0XHRwYWRkaW5nOiAnMC41ZW0gMCcsXG5cdFx0Ym9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcblx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHR9KTtcblxuXHRcdC8vIENyZWF0ZSB0aXRsZSArIGljb24gcm93XG5cdFx0Y29uc3QgYmFja3VwVGl0bGVSb3cgPSBiYWNrdXBTdW1tYXJ5LmNyZWF0ZURpdih7XG5cdFx0YXR0cjoge1xuXHRcdFx0c3R5bGU6IGBcblx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG5cdFx0XHRhbGlnbi1pdGVtczogZmxleC1lbmQ7XG5cdFx0XHRgLFxuXHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvLyBMZWZ0OiBoZWFkZXIgYmxvY2sgKHRpdGxlICsgZGVzY3JpcHRpb24gdG9nZXRoZXIpIFxuXHRcdGNvbnN0IHRpdGxlQmxvY2sgPSBiYWNrdXBUaXRsZVJvdy5jcmVhdGVEaXYoe1xuXHRcdGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOycgfVxuXHRcdH0pO1xuXG5cdFx0dGl0bGVCbG9jay5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdWYXVsdCBCYWNrdXBzJyB9KTtcblxuXHRcdHRpdGxlQmxvY2suY3JlYXRlRWwoJ2RpdicsIHtcblx0XHR0ZXh0OiAnVGhlIFRvb2xraXQgd2lsbCBiYWNrIHVwIHlvdXIgdmF1bHQgYXV0b21hdGljYWxseSBiZWZvcmUgdXBkYXRlcy4gWW91IGNhbiBhbHNvIGJhY2sgdXAgbWFudWFsbHkgYW55dGltZS4nLFxuXHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXG5cdFx0YXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDAuMjVlbTsnIH0sXG5cdFx0fSk7XG5cblx0XHQvLyBSaWdodDogY29sbGFwc2UgaWNvblxuXHRcdGNvbnN0IGJhY2t1cFZ2SWNvbiA9IGJhY2t1cFRpdGxlUm93LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnVlYnLCBjbHM6ICd2ay10b2dnbGUtaWNvbicgfSk7XG5cblx0XHRPYmplY3QuYXNzaWduKGJhY2t1cFZ2SWNvbi5zdHlsZSwge1xuXHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHR0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMnMgZWFzZScsXG5cdFx0dHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsXG5cdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdHRyYW5zZm9ybTogYmFja3VwRGV0YWlscy5vcGVuID8gJ3JvdGF0ZSgwZGVnKScgOiAncm90YXRlKDE4MGRlZyknLFxuXHRcdH0pO1xuXG5cdFx0Ly8gQ29sbGFwc2Ugcm90YXRpb24gYmVoYXZpb3Jcblx0XHRiYWNrdXBEZXRhaWxzLm9udG9nZ2xlID0gKCkgPT4ge1xuXHRcdGJhY2t1cFZ2SWNvbi5zdHlsZS50cmFuc2Zvcm0gPSBiYWNrdXBEZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKSc7XG5cdFx0fTtcblxuXHRcdC8vIDIpIEJvZHlcblx0XHRjb25zdCBiYWNrdXBCb2R5ID0gYmFja3VwRGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXHRcdGJhY2t1cEJvZHkuc3R5bGUucGFkZGluZ0xlZnQgPSAnMWVtJztcblxuXHRcdG5ldyBTZXR0aW5nKGJhY2t1cEJvZHkpXG5cdFx0LnNldE5hbWUoJ0F1dG8tQmFja3VwIEJlZm9yZSBVcGRhdGUnKVxuXHRcdC5zZXREZXNjKCdDcmVhdGUgYSBmdWxsIC56aXAgb2YgdGhlIHZhdWx0IGJlZm9yZSBhcHBseWluZyB2ZXJzaW9uIHVwZGF0ZXMuIEZvcmNlIHVwZGF0ZXMgd2lsbCBvbmx5IGJhY2sgdXAgdGhlIGZpbGVzIHRoYXQgd2lsbCBiZSBtb2RpZmllZCBvciByZW1vdmVkLicpXG5cdFx0LmFkZFRvZ2dsZSh0ID0+XG5cdFx0XHR0XG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZSlcblx0XHRcdC5vbkNoYW5nZShhc3luYyB2ID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZSA9IHY7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoYmFja3VwQm9keSlcblx0XHQuc2V0TmFtZSgnTWFudWFsIEJhY2t1cCcpXG5cdFx0LnNldERlc2MoJ0ltbWVkaWF0ZWx5IGNyZWF0ZSBhIHppcCBiYWNrdXAgb2YgeW91ciB2YXVsdCcpXG5cdFx0LmFkZEJ1dHRvbihiID0+XG5cdFx0XHRiXG5cdFx0XHQuc2V0QnV0dG9uVGV4dCgnQmFja3VwIFZhdWx0IE5vdycpXG5cdFx0XHQuc2V0Q3RhKClcblx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0Y29uc3QgcGF0aCA9IGF3YWl0IHRoaXMucGx1Z2luLmJhY2t1cE1hbmFnZXIuYmFja3VwVmF1bHRUb1ppcCgnbWFudWFsJyk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoYEJhY2t1cCBjcmVhdGVkOiAke3BhdGh9YCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhiYWNrdXBCb2R5KVxuXHRcdC5zZXROYW1lKCdPcGVuIEJhY2t1cHMgRm9sZGVyJylcblx0XHQuc2V0RGVzYygnT3BlbiB0aGUgYmFja3VwcyBmb2xkZXIgb24gZGlzay4gTWFjT1M6IENhbnQgc2VlIGl0PyBIaXQgU2hpZnQrQ21kKyhwZXJpb2QpLicpXG5cdFx0LmFkZEJ1dHRvbihiID0+XG5cdFx0ICBiXG5cdFx0XHQuc2V0QnV0dG9uVGV4dCgnT3BlbiBGb2xkZXInKVxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0ICB0cnkge1xuXG5cdFx0XHRcdGNvbnN0IHZhdWx0QmFzZVBhdGg6IHN0cmluZyA9ICh0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlciBhcyBhbnkpLmdldEJhc2VQYXRoKCk7XG5cblx0XHRcdFx0Y29uc3QgYmFja3VwRm9sZGVyUGF0aCA9IHBhdGguam9pbihcblx0XHRcdFx0ICB2YXVsdEJhc2VQYXRoLFxuXHRcdFx0XHQgICcudmF1bHQtYmFja3Vwcydcblx0XHRcdFx0KTtcblxuXHRcdFx0XHRjb25zdCB7IHNoZWxsIH0gPSAod2luZG93IGFzIGFueSkucmVxdWlyZSgnZWxlY3Ryb24nKTtcblx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgc2hlbGwub3BlblBhdGgoYmFja3VwRm9sZGVyUGF0aCk7XG5cdFx0XHRcdGlmICh0eXBlb2YgcmVzdWx0ID09PSAnc3RyaW5nJyAmJiByZXN1bHQubGVuZ3RoID4gMCkge1xuXHRcdFx0XHQgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBzaGVsbC5vcGVuUGF0aCBlcnJvcjonLCByZXN1bHQpO1xuXHRcdFx0XHQgIG5ldyBOb3RpY2UoJ0NvdWxkIG5vdCBvcGVuIGJhY2t1cHMgZm9sZGVyLiBTZWUgY29uc29sZS4nKTtcblx0XHRcdFx0fVxuXHRcdFx0ICB9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcignXHUyNzRDIENvdWxkIG5vdCBvcGVuIGJhY2t1cHMgZm9sZGVyOicsIGVycik7XG5cdFx0XHRcdG5ldyBOb3RpY2UoJ0NvdWxkIG5vdCBvcGVuIGJhY2t1cHMgZm9sZGVyLiBTZWUgY29uc29sZS4nKTtcblx0XHRcdCAgfVxuXHRcdFx0fSlcblx0XHQpO1xuXHRcdGJhY2t1cEJvZHkuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdGF0dHI6IHtcblx0XHRcdCAgc3R5bGU6ICdib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7IG1hcmdpbi10b3A6IDEuNWVtOydcblx0XHRcdH1cblx0XHQgIH0pO1xuXG5cblx0XHQgIFxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMCBDVVNUT00gVVBEQVRFUyBTRUNUSU9OIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGN1c3RvbWl6YXRpb25EZXRhaWxzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXG5cdFx0Y29uc3QgY3VzdG9taXphdGlvblN1bW1hcnkgPSBjdXN0b21pemF0aW9uRGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXG5cdFx0T2JqZWN0LmFzc2lnbihjdXN0b21pemF0aW9uU3VtbWFyeS5zdHlsZSwge1xuXHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcblx0XHRhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXG5cdFx0cGFkZGluZzogJzAuNWVtIDAnLFxuXHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgdGl0bGVSb3cgPSBjdXN0b21pemF0aW9uU3VtbWFyeS5jcmVhdGVEaXYoe1xuXHRcdGF0dHI6IHtcblx0XHRcdHN0eWxlOiBgXG5cdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0d2lkdGg6IDEwMCU7XG5cdFx0XHRqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG5cdFx0XHRhbGlnbi1pdGVtczogZmxleC1lbmQ7XG5cdFx0XHRgLFxuXHRcdH0sXG5cdFx0fSk7XG5cblx0XHRjb25zdCBjdXN0b21pemF0aW9uVGl0bGVCbG9jayA9IHRpdGxlUm93LmNyZWF0ZURpdih7XG5cdFx0YXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47JyB9XG5cdFx0fSk7XG5cblx0XHRjb25zdCBoNSA9IGN1c3RvbWl6YXRpb25UaXRsZUJsb2NrLmNyZWF0ZUVsKCdoNScpO1xuXHRcdGg1LmFwcGVuZFRleHQoJ0N1c3RvbSBGaWxlIE1hbmFnZW1lbnQgJyk7XG5cblx0XHRjdXN0b21pemF0aW9uVGl0bGVCbG9jay5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdHRleHQ6ICdTa2lwIHVwZGF0ZXMgb24gY2VydGFpbiBmaWxlcyBvciByZW1hcCByZWxvY2F0ZWQgVG9vbGtpdCBmaWxlcyBzbyB0aGV5IGNhbiB1cGRhdGUuJyxcblx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOiAwLjI1ZW07JyB9LFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgY3VzdG9tVnZJY29uID0gdGl0bGVSb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcblxuXHRcdE9iamVjdC5hc3NpZ24oY3VzdG9tVnZJY29uLnN0eWxlLCB7XG5cdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHR1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFx0dHJhbnNmb3JtOiBjdXN0b21pemF0aW9uRGV0YWlscy5vcGVuID8gJ3JvdGF0ZSgwZGVnKScgOiAncm90YXRlKDE4MGRlZyknLFxuXHRcdH0pO1xuXG5cdFx0Y3VzdG9taXphdGlvbkRldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG5cdFx0Y3VzdG9tVnZJY29uLnN0eWxlLnRyYW5zZm9ybSA9IGN1c3RvbWl6YXRpb25EZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKSc7XG5cdFx0fTtcblxuXHRcdGNvbnN0IGN1c3RvbWl6YXRpb25Cb2R5V3JhcHBlciA9IGN1c3RvbWl6YXRpb25EZXRhaWxzLmNyZWF0ZURpdih7XG5cdFx0XHRhdHRyOiB7IHN0eWxlOiAncGFkZGluZy1sZWZ0OiAxZW07IHBhZGRpbmctcmlnaHQ6IDFlbTsnIH1cblx0XHQgIH0pO1xuXHRcdCAgY29uc3QgY3VzdG9taXphdGlvbkJvZHkgPSBjdXN0b21pemF0aW9uQm9keVdyYXBwZXIuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblxuXG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU0tJUC1MSVNUIFBBTkVMIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG5cdFx0Y29uc3Qgc2tpcFNlY3Rpb24gPSBjdXN0b21pemF0aW9uQm9keS5jcmVhdGVEaXYoKTtcblxuXHRcdC8vIDEuIENyZWF0ZSBzZXR0aW5nIGJsb2NrIChtYXRjaGVzIE9ic2lkaWFuIG5hdGl2ZSBVSSBsYXlvdXQpXG5cdFx0Y29uc3Qgc2V0dGluZ0l0ZW0gPSBza2lwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0nIH0pO1xuXG5cdFx0Ly8gMi4gTGVmdCBjb2x1bW46IHRpdGxlICsgZGVzY3JpcHRpb25cblx0XHRjb25zdCBpbmZvID0gc2V0dGluZ0l0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtLWluZm8nIH0pO1xuXHRcdGluZm8uY3JlYXRlRGl2KHsgdGV4dDogJ1NraXAgVG9vbGtpdCBJdGVtcycsIGNsczogJ3NldHRpbmctaXRlbS1uYW1lJyB9KTtcblx0XHRpbmZvLmNyZWF0ZURpdih7XG5cdFx0dGV4dDogJ0ZpbGVzIGxpc3RlZCBoZXJlIHdpbGwgYmUgaWdub3JlZCBkdXJpbmcgdG9vbGtpdCB1cGRhdGVzLicsXG5cdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHR9KTtcblxuXHRcdC8vIDMuIFJpZ2h0IGNvbHVtbjogZHJvcGRvd24gKyBidXR0b25cblx0XHRjb25zdCBjb250cm9sID0gc2V0dGluZ0l0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtLWNvbnRyb2wnIH0pO1xuXG5cdFx0Y29uc3QgZHJvcGRvd24gPSBuZXcgRHJvcGRvd25Db21wb25lbnQoY29udHJvbCk7XG5cdFx0ZHJvcGRvd24uc2VsZWN0RWwuc3R5bGUubWluV2lkdGggPSAnMjIwcHgnO1xuXHRcdGRyb3Bkb3duLmFkZE9wdGlvbignJywgJ1NlbGVjdCBhbiBpdGVtXHUyMDI2Jyk7XG5cdFx0dGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlc1xuXHRcdC5maWx0ZXIoZiA9PiAhZi5vcHRpb25hbClcblx0XHQuZm9yRWFjaChmID0+IGRyb3Bkb3duLmFkZE9wdGlvbihmLnBhdGgsIGYuZGlzcGxheU5hbWUgPz8gZi5wYXRoLnNwbGl0KCcvJykucG9wKCkhKSk7XG5cdFx0dGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzXG5cdFx0LmZpbHRlcihmID0+ICFmLm9wdGlvbmFsKVxuXHRcdC5mb3JFYWNoKGYgPT4gZHJvcGRvd24uYWRkT3B0aW9uKGYucGF0aCwgKGYuZGlzcGxheU5hbWUgPz8gZi5wYXRoLnNwbGl0KCcvJykucG9wKCkhKSArICcvIChmb2xkZXIpJykpO1xuXG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChjb250cm9sKVxuXHRcdC5zZXRCdXR0b25UZXh0KCdBZGQnKVxuXHRcdC5zZXRDdGEoKVxuXHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IGtleSA9IGRyb3Bkb3duLmdldFZhbHVlKCk7XG5cdFx0XHRpZiAoIWtleSkgcmV0dXJuIG5ldyBOb3RpY2UoJ1BpY2sgc29tZXRoaW5nIHRvIHNraXAuJyk7XG5cdFx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnNvbWUoYyA9PiBjLm1hbmlmZXN0S2V5ID09PSBrZXkpKSB7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5wdXNoKHsgdmF1bHRQYXRoOiBrZXksIG1hbmlmZXN0S2V5OiBrZXksIGRvVXBkYXRlOiBmYWxzZSB9KTtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0cmVuZGVyU2tpcFRhYmxlKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyA0LiBUYWJsZSB3cmFwcGVyIGZvciBza2lwcGVkIGl0ZW1zXG5cdFx0Y29uc3Qgc2tpcFRhYmxlV3JhcHBlciA9IHNraXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ3ZrLXRhYmxlLXdyYXBwZXInLCBhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDowLjc1ZW0nIH0gfSk7XG5cblx0XHRjb25zdCByZW5kZXJTa2lwVGFibGUgPSAoKSA9PiB7XG5cdFx0c2tpcFRhYmxlV3JhcHBlci5lbXB0eSgpO1xuXG5cdFx0Y29uc3QgaXRlbXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5maWx0ZXIoYyA9PiAhYy5kb1VwZGF0ZSk7XG5cblx0XHRpZiAoaXRlbXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHQvLyBObyB0YWJsZSBpZiBub3RoaW5nIHRvIHNob3cgXHUyMDE0IGp1c3QgYW4gZW1wdHkgc3RhdGUgbWVzc2FnZVxuXHRcdFx0Y29uc3QgZW1wdHlNc2cgPSBza2lwVGFibGVXcmFwcGVyLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdObyBpdGVtcyBza2lwcGVkLicgfSk7XG5cdFx0XHRlbXB0eU1zZy5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcblx0XHRcdGVtcHR5TXNnLnN0eWxlLm9wYWNpdHkgPSAnMC42Jztcblx0XHRcdGVtcHR5TXNnLnN0eWxlLnBhZGRpbmcgPSAnMC41ZW0nO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFJlbmRlciB0YWJsZSBvbmx5IGlmIGl0ZW1zIGV4aXN0XG5cdFx0Y29uc3QgdGFibGUgPSBza2lwVGFibGVXcmFwcGVyLmNyZWF0ZUVsKCd0YWJsZScsIHsgY2xzOiAnc2V0dGluZy10YWJsZScgfSk7XG5cblx0XHRjb25zdCBoZWFkZXIgPSB0YWJsZS5jcmVhdGVUSGVhZCgpLmluc2VydFJvdygpO1xuXHRcdGhlYWRlci5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSAnU2tpcHBlZCBGaWxlcy9Gb2xkZXJzJztcblxuXHRcdGNvbnN0IGJvZHkgPSB0YWJsZS5jcmVhdGVUQm9keSgpO1xuXG5cdFx0aXRlbXMuZm9yRWFjaCgoZW50cnkpID0+IHtcblx0XHRcdGNvbnN0IHJvdyA9IGJvZHkuaW5zZXJ0Um93KCk7XG5cdFx0XHRjb25zdCBjb250ZW50Q2VsbCA9IHJvdy5pbnNlcnRDZWxsKCk7XG5cdFx0XHRjb250ZW50Q2VsbC5jb2xTcGFuID0gMTtcblx0XHRcdGNvbnRlbnRDZWxsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0XHRjb250ZW50Q2VsbC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdzcGFjZS1iZXR3ZWVuJztcblx0XHRcdGNvbnRlbnRDZWxsLnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzRlbSc7XG5cdFx0XHRjb250ZW50Q2VsbC5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG5cdFx0XHRjb250ZW50Q2VsbC5zdHlsZS5nYXAgPSAnMWVtJztcblx0XHRcdGNvbnRlbnRDZWxsLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG5cblx0XHRcdGNvbnRlbnRDZWxsLmNyZWF0ZVNwYW4oeyB0ZXh0OiBlbnRyeS5tYW5pZmVzdEtleSB9KTtcblxuXHRcdFx0Y29uc3QgcmVtb3ZlTGluayA9IGNvbnRlbnRDZWxsLmNyZWF0ZUVsKCdhJywgeyB0ZXh0OiAnUmVtb3ZlIGVudHJ5JywgaHJlZjogJyMnIH0pO1xuXHRcdFx0cmVtb3ZlTGluay5zdHlsZS5mb250U2l6ZSA9ICcwLjhlbSc7XG5cdFx0XHRyZW1vdmVMaW5rLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtZmFpbnQpJztcblx0XHRcdHJlbW92ZUxpbmsuc3R5bGUudGV4dERlY29yYXRpb24gPSAndW5kZXJsaW5lJztcblx0XHRcdHJlbW92ZUxpbmsub25jbGljayA9IGFzeW5jIChlKSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5yZW1vdmUoZW50cnkpO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRyZW5kZXJTa2lwVGFibGUoKTtcblx0XHRcdH07XG5cdFx0fSk7XG5cdFx0fTtcblxuXHRcdHJlbmRlclNraXBUYWJsZSgpO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwIFNwYWNlciAmIERpdmlkZXIgQmVmb3JlIFJlbWFwIFBhbmVsIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGN1c3RvbWl6YXRpb25Cb2R5LmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRhdHRyOiB7IHN0eWxlOiAnaGVpZ2h0OiAxZW07IGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTsgbWFyZ2luOiAxZW0gMDsnIH1cblx0XHR9KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMCBSRU1BUCBQQU5FTCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCByZW1hcFNlY3Rpb24gPSBjdXN0b21pemF0aW9uQm9keS5jcmVhdGVEaXYoKTtcblxuXG5cdFx0Ly8gU2V0dGluZy1zdHlsZSB3cmFwcGVyXG5cdFx0Y29uc3QgcmVtYXBTZXR0aW5nID0gcmVtYXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbScgfSk7XG5cblx0XHQvLyBMZWZ0OiBoZWFkZXIgKyBkZXNjcmlwdGlvbiAodW5jaGFuZ2VkIHN0eWxlKVxuXHRcdGNvbnN0IHJlbWFwSW5mbyA9IHJlbWFwU2V0dGluZy5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0taW5mbycgfSk7XG5cdFx0cmVtYXBJbmZvLmNyZWF0ZURpdih7IHRleHQ6ICdSZW1hcCBGaWxlIFBhdGhzJywgY2xzOiAnc2V0dGluZy1pdGVtLW5hbWUnIH0pO1xuXHRcdHJlbWFwSW5mby5jcmVhdGVEaXYoe1xuXHRcdFx0dGV4dDogJ1JlbWFwIHRvb2xraXQgZmlsZXMgdmF1bHQgcGF0aHMgaWYgeW91IGNob3NlIHRvIG1vdmUgYW55dGhpbmcuIE1vdmluZyBmaWxlcyB3aXRob3V0IHJlbWFwcGluZyB3aWxsIHJlc3VsdCBpbiBkdXBsaWNhdGUgYW5kL29yIG91dC1vZi1kYXRlIGZpbGVzIGFmdGVyIHVwZGF0ZS4nLFxuXHRcdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJ1xuXHRcdH0pO1xuXG5cdFx0Ly8gTmV3IGZ1bGwtd2lkdGggYmxvY2sgYmVsb3cgZm9yIGNvbnRyb2xzXG5cdFx0Y29uc3QgcmVtYXBDb250cm9sQmxvY2sgPSByZW1hcFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAndmstaW5saW5lLWFkZC1jb250cm9scycgfSk7XG5cdFx0cmVtYXBDb250cm9sQmxvY2suc3R5bGUuZmxleFdyYXAgPSAnd3JhcCc7XG5cdFx0cmVtYXBDb250cm9sQmxvY2suc3R5bGUubWFyZ2luVG9wID0gJzAuNWVtJztcblxuXHRcdGxldCByZW1hcERyb3A6IERyb3Bkb3duQ29tcG9uZW50O1xuXHRcdGxldCByZW1hcElucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuXG5cdFx0cmVtYXBEcm9wID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KHJlbWFwQ29udHJvbEJsb2NrKTtcblx0XHRyZW1hcERyb3Auc2VsZWN0RWwuc3R5bGUubWluV2lkdGggPSAnMjIwcHgnO1xuXHRcdHJlbWFwRHJvcC5hZGRPcHRpb24oJycsICdTZWxlY3QgYW4gaXRlbVx1MjAyNicpO1xuXHRcdHRoaXMucGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMuZm9yRWFjaChmID0+XG5cdFx0XHRyZW1hcERyb3AuYWRkT3B0aW9uKGYucGF0aCwgZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpXG5cdFx0KTtcblx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMuZm9yRWFjaChmID0+XG5cdFx0XHRyZW1hcERyb3AuYWRkT3B0aW9uKGYucGF0aCwgKGYuZGlzcGxheU5hbWUgPz8gZi5wYXRoLnNwbGl0KCcvJykucG9wKCkhKSArICcvIChmb2xkZXIpJylcblx0XHQpO1xuXG5cdFx0Y29uc3Qgc2VhcmNoV3JhcHBlciA9IHJlbWFwQ29udHJvbEJsb2NrLmNyZWF0ZURpdigpO1xuXHRcdGNvbnN0IHNlYXJjaENvbXBvbmVudCA9IG5ldyBTZWFyY2hDb21wb25lbnQoc2VhcmNoV3JhcHBlcik7XG5cdFx0c2VhcmNoQ29tcG9uZW50LnNldFBsYWNlaG9sZGVyKCdTZWFyY2ggdmF1bHQgcGF0aFx1MjAyNicpO1xuXHRcdG5ldyBGaWxlUGF0aFN1Z2dlc3Rlcih0aGlzLmFwcCwgc2VhcmNoQ29tcG9uZW50LmlucHV0RWwpO1xuXHRcdHJlbWFwSW5wdXQgPSBzZWFyY2hDb21wb25lbnQuaW5wdXRFbDtcblxuXHRcdG5ldyBCdXR0b25Db21wb25lbnQocmVtYXBDb250cm9sQmxvY2spXG5cdFx0XHQuc2V0QnV0dG9uVGV4dCgnQWRkIFJlbWFwJylcblx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBrZXkgPSByZW1hcERyb3AuZ2V0VmFsdWUoKTtcblx0XHRcdFx0Y29uc3QgdnAgPSByZW1hcElucHV0LnZhbHVlLnRyaW0oKTtcblx0XHRcdFx0aWYgKCFrZXkgfHwgIXZwKSByZXR1cm4gbmV3IE5vdGljZSgnU2VsZWN0IGFuIGl0ZW0gYW5kIGVudGVyIGEgdmF1bHQgcGF0aC4nKTtcblx0XHRcdFx0aWYgKCF0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodnApKSByZXR1cm4gbmV3IE5vdGljZSgnVmF1bHQgcGF0aCBub3QgZm91bmQuJyk7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmlsdGVyKGMgPT4gYy5tYW5pZmVzdEtleSAhPT0ga2V5KTtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMucHVzaCh7IG1hbmlmZXN0S2V5OiBrZXksIHZhdWx0UGF0aDogdnAsIGRvVXBkYXRlOiB0cnVlIH0pO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0cmVtYXBJbnB1dC52YWx1ZSA9ICcnO1xuXHRcdFx0XHRyZW1hcERyb3Auc2V0VmFsdWUoJycpO1xuXHRcdFx0XHRyZW5kZXJSZW1hcFBhbmVsKCk7XG5cdFx0XHR9KTtcblxuXG5cdFx0Ly8gNC4gVGFibGUgd3JhcHBlclxuXHRcdGNvbnN0IHJlbWFwVGFibGVXcmFwcGVyID0gcmVtYXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ3ZrLXRhYmxlLXdyYXBwZXInLCBhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC43NWVtJyB9IH0pO1xuXG5cdFx0Y29uc3QgcmVuZGVyUmVtYXBQYW5lbCA9ICgpID0+IHtcblx0XHRyZW1hcFRhYmxlV3JhcHBlci5lbXB0eSgpO1xuXG5cdFx0Y29uc3QgdG9SZW1hcCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbHRlcihjID0+IGMuZG9VcGRhdGUpO1xuXG5cdFx0aWYgKHRvUmVtYXAubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb25zdCBlbXB0eU1zZyA9IHJlbWFwVGFibGVXcmFwcGVyLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdObyBjdXN0b20gcGF0aHMgZGVmaW5lZC4nIH0pO1xuXHRcdFx0ZW1wdHlNc2cuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG5cdFx0XHRlbXB0eU1zZy5zdHlsZS5vcGFjaXR5ID0gJzAuNic7XG5cdFx0XHRlbXB0eU1zZy5zdHlsZS5wYWRkaW5nID0gJzAuNWVtJztcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCB0YWJsZSA9IHJlbWFwVGFibGVXcmFwcGVyLmNyZWF0ZUVsKCd0YWJsZScsIHsgY2xzOiAnc2V0dGluZy10YWJsZScgfSk7XG5cdFx0Y29uc3QgaGVhZCA9IHRhYmxlLmNyZWF0ZVRIZWFkKCkuaW5zZXJ0Um93KCk7XG5cdFx0WydUb29saXQgSXRlbScsICdOZXcgVmF1bHQgUGF0aCcsICcnXS5mb3JFYWNoKHR4dCA9PiBoZWFkLmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IHR4dCk7XG5cblx0XHRjb25zdCBib2R5ID0gdGFibGUuY3JlYXRlVEJvZHkoKTtcblx0XHR0b1JlbWFwLmZvckVhY2goZW50cnkgPT4ge1xuXHRcdFx0Y29uc3Qgcm93ID0gYm9keS5pbnNlcnRSb3coKTtcblxuXHRcdFx0Ly8gTWFuaWZlc3QgS2V5XG5cdFx0XHRyb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gZW50cnkubWFuaWZlc3RLZXk7XG5cblx0XHRcdC8vIFZhdWx0IFBhdGhcblx0XHRcdHJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSBlbnRyeS52YXVsdFBhdGg7XG5cblx0XHRcdC8vIFJlbW92ZSBsaW5rXG5cdFx0XHRjb25zdCByZW1vdmVDZWxsID0gcm93Lmluc2VydENlbGwoKTtcblx0XHRcdGNvbnN0IHJlbW92ZUxpbmsgPSByZW1vdmVDZWxsLmNyZWF0ZUVsKCdhJywgeyB0ZXh0OiAnUmVtb3ZlIGVudHJ5JywgaHJlZjogJyMnIH0pO1xuXHRcdFx0cmVtb3ZlTGluay5zdHlsZS5mb250U2l6ZSA9ICcwLjhlbSc7XG5cdFx0XHRyZW1vdmVMaW5rLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtZmFpbnQpJztcblx0XHRcdHJlbW92ZUxpbmsuc3R5bGUudGV4dERlY29yYXRpb24gPSAndW5kZXJsaW5lJztcblx0XHRcdHJlbW92ZUxpbmsub25jbGljayA9IGFzeW5jIChlKSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5yZW1vdmUoZW50cnkpO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRyZW5kZXJSZW1hcFBhbmVsKCk7XG5cdFx0XHR9O1xuXHRcdH0pO1xuXHRcdH07XG5cblx0XHRyZW5kZXJSZW1hcFBhbmVsKCk7XG5cblx0XHQvLyBBZGQgZGl2aWRlciBpbnNpZGUgdGhlIGJvZHksIGF0IHRoZSB0b3Bcblx0XHRjdXN0b21pemF0aW9uQm9keS5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0YXR0cjoge1xuXHRcdFx0c3R5bGU6ICdib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7IG1hcmdpbjogMC41ZW0gMDsnXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgSElHSExJR0hUIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgaGlnaGxpZ2h0RGV0YWlscyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblxuXHRcdC8vIDEpIEJ1aWxkIHRoZSA8c3VtbWFyeT4gZm9yIGhpZ2hsaWdodCwgbWF0Y2hpbmcgYmFja3VwIHN0eWxlOlxuXHRcdGNvbnN0IGhpZ2hsaWdodFN1bW1hcnkgPSBoaWdobGlnaHREZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG5cdFx0T2JqZWN0LmFzc2lnbihoaWdobGlnaHRTdW1tYXJ5LnN0eWxlLCB7XG5cdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdGFsaWduSXRlbXM6ICdzdHJldGNoJyxcblx0XHRwYWRkaW5nOiAnMC41ZW0gMCcsXG5cdFx0Ym9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcblx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHR9KTtcblxuXHRcdC8vIDFhKSBDcmVhdGUgdGhlIHRpdGxlICsgaWNvbiByb3cgKGZsZXggcm93IGp1c3RpZnkgc3BhY2UtYmV0d2Vlbik6XG5cdFx0Y29uc3QgaGlnaGxpZ2h0VGl0bGVSb3cgPSBoaWdobGlnaHRTdW1tYXJ5LmNyZWF0ZURpdih7XG5cdFx0YXR0cjoge1xuXHRcdFx0c3R5bGU6IGBcblx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG5cdFx0XHRhbGlnbi1pdGVtczogZmxleC1lbmQ7XG5cdFx0XHRgLFxuXHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvLyAxYikgTGVmdCBzaWRlOiB0aXRsZSArIGRlc2NyaXB0aW9uXG5cdFx0Y29uc3QgaGxUaXRsZUJsb2NrID0gaGlnaGxpZ2h0VGl0bGVSb3cuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsnIH1cblx0XHR9KTtcblx0XHRobFRpdGxlQmxvY2suY3JlYXRlRWwoJ2g1JywgeyB0ZXh0OiAnRmlsZSBIaWdobGlnaHRzJyB9KTtcblx0XHRobFRpdGxlQmxvY2suY3JlYXRlRWwoJ2RpdicsIHtcblx0XHR0ZXh0OiAnVG9nZ2xlIG9uL29mZiB0aGUgaGlnaGxpZ2h0aW5nIG9mIFRvb2xraXQtc3BlY2lmaWMgZmlsZXMuIEFsc28gbWFrZSB0aGUgaGlnaGxpZ2h0cyBjb29sIGNvbG9ycy4nLFxuXHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXG5cdFx0YXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDAuMjVlbTsnIH0sXG5cdFx0fSk7XG5cblx0XHQvLyAxYykgUmlnaHQgc2lkZTogY29sbGFwc2luZyBhcnJvdy9pY29uXG5cdFx0Y29uc3QgaGxUb2dnbGVJY29uID0gaGlnaGxpZ2h0VGl0bGVSb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcblx0XHRPYmplY3QuYXNzaWduKGhsVG9nZ2xlSWNvbi5zdHlsZSwge1xuXHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHR0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMnMgZWFzZScsXG5cdFx0dHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsXG5cdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdHRyYW5zZm9ybTogaGlnaGxpZ2h0RGV0YWlscy5vcGVuID8gJ3JvdGF0ZSgwZGVnKScgOiAncm90YXRlKDE4MGRlZyknLFxuXHRcdH0pO1xuXG5cdFx0Ly8gMWQpIE1ha2UgdGhlIGljb24gcm90YXRlIHdoZW4gdGhlIDxkZXRhaWxzPiBvcGVucy9jbG9zZXM6XG5cdFx0aGlnaGxpZ2h0RGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRobFRvZ2dsZUljb24uc3R5bGUudHJhbnNmb3JtID0gaGlnaGxpZ2h0RGV0YWlscy5vcGVuID8gJ3JvdGF0ZSgwZGVnKScgOiAncm90YXRlKDE4MGRlZyknO1xuXHRcdH07XG5cblx0XHQvLyAyKSBDcmVhdGUgdGhlIGJvZHkgY29udGFpbmVyIChpbmRlbnRlZCwgc2FtZSBhcyBiYWNrdXApXG5cdFx0Y29uc3QgaGlnaGxpZ2h0Qm9keSA9IGhpZ2hsaWdodERldGFpbHMuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblx0XHRoaWdobGlnaHRCb2R5LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzFlbSc7XG5cblx0XHQvLyAzKSBcdTIwMUNFbmFibGUgSGlnaGxpZ2h0XHUyMDFEIHRvZ2dsZSBhcyBhIFNldHRpbmcgaW5zaWRlIGhpZ2hsaWdodEJvZHk6XG5cdFx0bmV3IFNldHRpbmcoaGlnaGxpZ2h0Qm9keSlcblx0XHQuc2V0TmFtZSgnRW5hYmxlIEZpbGUvRm9sZGVyIEhpZ2hsaWdodGluZycpXG5cdFx0LnNldERlc2MoJ0FueSBmaWxlL2ZvbGRlciBpbnN0YWxsZWQgYnkgVlZ1bmRlcmxvcmUgd2lsbCBoYXZlIHRoaXMgYmFja2dyb3VuZC4nKVxuXHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcblx0XHRcdHRvZ2dsZVxuXHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQpXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgKGVuYWJsZWQpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCA9IGVuYWJsZWQ7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdGlmIChlbmFibGVkKSB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLmVuYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5kaXNhYmxlSGlnaGxpZ2h0KCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZVx1MjAxMHJlbmRlciB0aGUgY29sb3IgcGlja2VycyB3aGVuZXZlciB0aGUgdG9nZ2xlIGNoYW5nZXM6XG5cdFx0XHRcdHJlbmRlckhpZ2hsaWdodENvbG9yUGlja2VycygpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyA0KSBXcmFwcGVyIGZvciBMaWdodC9EYXJrIGNvbG9yIHBpY2tlcnM6XG5cdFx0Y29uc3QgY29sb3JQaWNrZXJXcmFwcGVyID0gaGlnaGxpZ2h0Qm9keS5jcmVhdGVEaXYoKTtcblxuXHRcdC8vIDUpIEEgZnVuY3Rpb24gdG8gcmVuZGVyIG9yIGNsZWFyIHRoZSB0d28gQ29sb3JQaWNrZXIgc2V0dGluZ3M6XG5cdFx0Y29uc3QgcmVuZGVySGlnaGxpZ2h0Q29sb3JQaWNrZXJzID0gKCkgPT4ge1xuXHRcdGNvbG9yUGlja2VyV3JhcHBlci5lbXB0eSgpO1xuXG5cdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKSB7XG5cdFx0XHRyZXR1cm47IC8vIGRvIG5vdCBzaG93IHBpY2tlcnMgaWYgaGlnaGxpZ2h0aW5nIGlzIGRpc2FibGVkXG5cdFx0fVxuXG5cdFx0Ly8gNWEpIExpZ2h0IG1vZGUgY29sb3IgcGlja2VyXG5cdFx0bmV3IFNldHRpbmcoY29sb3JQaWNrZXJXcmFwcGVyKVxuXHRcdFx0LnNldE5hbWUoJ0xpZ2h0IE1vZGUgSGlnaGxpZ2h0IENvbG9yJylcblx0XHRcdC5zZXREZXNjKCdDaG9vc2UgdGhlIGJhY2tncm91bmQgY29sb3IgZm9yIGZpbGVzL2ZvbGRlcnMgaW4gTGlnaHQgbW9kZS4nKVxuXHRcdFx0LmFkZENvbG9yUGlja2VyKHBpY2tlciA9PiB7XG5cdFx0XHRwaWNrZXJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yTGlnaHQpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAobmV3Q29sb3IpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JMaWdodCA9IG5ld0NvbG9yO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdFx0XHQvLyBSZVx1MjAxMGluamVjdCBDU1Mgc28gdGhlIG5ldyBjb2xvciB0YWtlcyBlZmZlY3QgaW1tZWRpYXRlbHk6XG5cdFx0XHRcdHRoaXMucGx1Z2luLmRpc2FibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0dGhpcy5wbHVnaW4uZW5hYmxlSGlnaGxpZ2h0KCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHQvLyA1YikgRGFyayBtb2RlIGNvbG9yIHBpY2tlclxuXHRcdG5ldyBTZXR0aW5nKGNvbG9yUGlja2VyV3JhcHBlcilcblx0XHRcdC5zZXROYW1lKCdEYXJrIE1vZGUgSGlnaGxpZ2h0IENvbG9yJylcblx0XHRcdC5zZXREZXNjKCdDaG9vc2UgdGhlIGJhY2tncm91bmQgY29sb3IgZm9yIGZpbGVzL2ZvbGRlcnMgaW4gRGFyayBtb2RlLicpXG5cdFx0XHQuYWRkQ29sb3JQaWNrZXIocGlja2VyID0+IHtcblx0XHRcdHBpY2tlclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JEYXJrKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKG5ld0NvbG9yKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yRGFyayA9IG5ld0NvbG9yO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdFx0XHQvLyBSZVx1MjAxMGluamVjdCBDU1Mgc28gdGhlIG5ldyBjb2xvciB0YWtlcyBlZmZlY3QgaW1tZWRpYXRlbHk6XG5cdFx0XHRcdHRoaXMucGx1Z2luLmRpc2FibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0dGhpcy5wbHVnaW4uZW5hYmxlSGlnaGxpZ2h0KCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdC8vIDYpIENhbGwgb25jZSBvbiBpbml0aWFsIHJlbmRlciBzbyB0aGF0IGlmIGhpZ2hsaWdodEVuYWJsZWQgPT09IHRydWUsIHRoZSBwaWNrZXJzIHNob3cgdXAuXG5cdFx0cmVuZGVySGlnaGxpZ2h0Q29sb3JQaWNrZXJzKCk7XG5cblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBJTklUSUFMIERSQVcgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0cmVuZGVyU2tpcFRhYmxlKCk7XG5cdFx0cmVuZGVyUmVtYXBQYW5lbCgpO1xuXG5cblx0XHQvL1JFTU9WRSBERU1PIEZJTEVTXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIFJFTU9WRSBERU1PIEZJTEVTICh1cGRhdGVkKSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuLy8gMSkgQ3JlYXRlIGEgU2V0dGluZyByb3csIGJ1dCBpbW1lZGlhdGVseSBzdHJpcCBvZmYgaXRzIGRlZmF1bHQgdG9wXHUyMDEwYm9yZGVyOlxuY29uc3QgcmVtb3ZlRGVtb1NldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCk7XG4ocmVtb3ZlRGVtb1NldHRpbmcuc2V0dGluZ0VsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5ib3JkZXJUb3AgPSAnbm9uZSc7XG5cbnJlbW92ZURlbW9TZXR0aW5nXG4gIC5zZXROYW1lKCdSZW1vdmUgRGVtbyBGaWxlcycpXG4gIC5zZXREZXNjKCdEZWxldGUgZXZlcnkgXHUyMDFDb3B0aW9uYWxcdTIwMUQgZGVtbyBmaWxlIGFuZCBmb2xkZXIgZnJvbSB5b3VyIHZhdWx0LicpXG4gIC5hZGRCdXR0b24oKGJ1dHRvbikgPT5cbiAgICBidXR0b25cbiAgICAgIC5zZXRCdXR0b25UZXh0KCdSZW1vdmUgRGVtbyBGaWxlcycpXG5cbiAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3Qgb3B0aW9uYWxGaWxlRW50cmllcyA9IHRoaXMucGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMuZmlsdGVyKChmKSA9PiBmLm9wdGlvbmFsKTtcbiAgICAgICAgY29uc3Qgb3B0aW9uYWxGb2xkZXJFbnRyaWVzID0gdGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzLmZpbHRlcigoZikgPT4gZi5vcHRpb25hbCk7XG5cbiAgICAgICAgY29uc3QgdG90YWxDb3VudEZpbGVzID0gb3B0aW9uYWxGaWxlRW50cmllcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRvdGFsQ291bnRGb2xkZXJzID0gb3B0aW9uYWxGb2xkZXJFbnRyaWVzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgdG90YWxDb3VudCA9IHRvdGFsQ291bnRGaWxlcyArIHRvdGFsQ291bnRGb2xkZXJzO1xuXG4gICAgICAgIGlmICh0b3RhbENvdW50ID09PSAwKSB7XG4gICAgICAgICAgbmV3IE5vdGljZSgnTm8gXHUyMDFDb3B0aW9uYWxcdTIwMUQgZGVtbyBmaWxlcyBvciBmb2xkZXJzIHRvIHJlbW92ZS4nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0gMikgQXNrIGZvciBjb25maXJtYXRpb24gaW4gYSBzbWFsbCBNb2RhbCAtLS1cbiAgICAgICAgY29uc3QgdXNlckNvbmZpcm1lZCA9IGF3YWl0IG5ldyBQcm9taXNlPGJvb2xlYW4+KChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgY29uc3QgY29uZmlybU1vZGFsID0gbmV3IGNsYXNzIGV4dGVuZHMgTW9kYWwge1xuICAgICAgICAgICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9uT3BlbigpIHtcbiAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQ29uZmlybSBSZW1vdmFsJyB9KTtcbiAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogYFRoaXMgd2lsbCBwZXJtYW5lbnRseSBkZWxldGUgJHt0b3RhbENvdW50RmlsZXN9IGZpbGUocykgYW5kICR7dG90YWxDb3VudEZvbGRlcnN9IGZvbGRlcihzKS4gQ29udGludWU/YCxcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgY29uc3QgYnRuUm93ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGJ0blJvdy5zdHlsZSwge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2ZsZXgtZW5kJyxcbiAgICAgICAgICAgICAgICBnYXA6ICcwLjVlbScsXG4gICAgICAgICAgICAgICAgbWFyZ2luVG9wOiAnMS41ZW0nLFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBidG5Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSkub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgYnRuUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdZZXMsIFJlbW92ZScsIGNsczogJ21vZC1kYW5nZXInIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvbkNsb3NlKCkge1xuICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0odGhpcy5hcHApO1xuXG4gICAgICAgICAgY29uZmlybU1vZGFsLm9wZW4oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCF1c2VyQ29uZmlybWVkKSB7XG4gICAgICAgICAgcmV0dXJuOyAvLyB1c2VyIGNsaWNrZWQgXHUyMDFDQ2FuY2VsXHUyMDFEXG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0gMykgRGVsZXRlIG9wdGlvbmFsIGZpbGVzIG9uZSBieSBvbmUgLS0tXG4gICAgICAgIGxldCBmaWxlc0RlbGV0ZWQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGZpbGVFbnRyeSBvZiBvcHRpb25hbEZpbGVFbnRyaWVzKSB7XG4gICAgICAgICAgLy8gM2EpIFJlc3BlY3QgYW55IHJlbWFwcGluZyBpbiBjdXN0b21QYXRoc1xuICAgICAgICAgIGNvbnN0IG1hcHBlZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGZpbGVFbnRyeS5rZXkpO1xuICAgICAgICAgIGNvbnN0IHZhdWx0UGF0aCA9IG1hcHBlZD8udmF1bHRQYXRoID8/IGZpbGVFbnRyeS5wYXRoO1xuXG4gICAgICAgICAgLy8gM2IpIElmIGl0IGFjdHVhbGx5IGV4aXN0cywgcmVtb3ZlIGl0XG4gICAgICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0UGF0aCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVtb3ZlKHZhdWx0UGF0aCk7XG4gICAgICAgICAgICAgIGZpbGVzRGVsZXRlZCsrO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBkZWxldGUgb3B0aW9uYWwgZmlsZSAke3ZhdWx0UGF0aH1gLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSA0KSBEZWxldGUgb3B0aW9uYWwgZm9sZGVycyByZWN1cnNpdmVseSAtLS1cbiAgICAgICAgbGV0IGZvbGRlcnNEZWxldGVkID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBmb2xkZXJFbnRyeSBvZiBvcHRpb25hbEZvbGRlckVudHJpZXMpIHtcbiAgICAgICAgICBjb25zdCBtYXBwZWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBmb2xkZXJFbnRyeS5rZXkpO1xuICAgICAgICAgIGNvbnN0IHZhdWx0Rm9sZGVyUGF0aCA9IG1hcHBlZD8udmF1bHRQYXRoID8/IGZvbGRlckVudHJ5LnBhdGg7XG5cbiAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRGb2xkZXJQYXRoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgLy8gVGhlIHNlY29uZCBhcmd1bWVudCBgdHJ1ZWAgZW5zdXJlcyByZWN1cnNpdmUgZGVsZXRlXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucm1kaXIodmF1bHRGb2xkZXJQYXRoLCB0cnVlKTtcbiAgICAgICAgICAgICAgZm9sZGVyc0RlbGV0ZWQrKztcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIG9wdGlvbmFsIGZvbGRlciAke3ZhdWx0Rm9sZGVyUGF0aH1gLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSA1KSBDbGVhbiB1cCBhbnkgXHUyMDFDY3VzdG9tUGF0aHNcdTIwMUQgZW50cmllcyBmb3Igb3B0aW9uYWwgaXRlbXMgLS0tXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmlsdGVyKChjKSA9PiB7XG4gICAgICAgICAgLy8gSWYgdGhpcyBtYXBwaW5nXHUyMDE5cyBtYW5pZmVzdEtleSB3YXMgb3B0aW9uYWwsIGRyb3AgaXRcbiAgICAgICAgICBjb25zdCBpc09wdEZpbGUgPSBvcHRpb25hbEZpbGVFbnRyaWVzLnNvbWUoKGYpID0+IGYua2V5ID09PSBjLm1hbmlmZXN0S2V5KTtcbiAgICAgICAgICBjb25zdCBpc09wdEZvbGRlciA9IG9wdGlvbmFsRm9sZGVyRW50cmllcy5zb21lKChmKSA9PiBmLmtleSA9PT0gYy5tYW5pZmVzdEtleSk7XG4gICAgICAgICAgcmV0dXJuICFpc09wdEZpbGUgJiYgIWlzT3B0Rm9sZGVyO1xuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgICAgLy8gLS0tIDYpIFNob3cgYSBub3RpY2UgYW5kIHJlLXJlbmRlciB0aGUgc2V0dGluZ3MgcGFnZSAtLS1cbiAgICAgICAgbmV3IE5vdGljZShgRGVsZXRlZCAke2ZpbGVzRGVsZXRlZH0gZmlsZShzKSBhbmQgJHtmb2xkZXJzRGVsZXRlZH0gZm9sZGVyKHMpLmApO1xuICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgIH0pXG4gICk7XG5cblxuXG5cblx0XHQvKiogXHUyNTAwXHUyNTAwXHUyNTAwIEZPT1RFUiBTRUNUSU9OIFx1MjUwMFx1MjUwMFx1MjUwMCAqL1xuXHRcdGNvbnN0IGZvb3RlciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbScgfSk7XG5cdFx0T2JqZWN0LmFzc2lnbihmb290ZXIuc3R5bGUsIHtcblx0XHRmb250U2l6ZTogJzAuODVlbScsXG5cdFx0Y29sb3I6ICd2YXIoLS10ZXh0LW11dGVkKScsXG5cdFx0bWFyZ2luVG9wOiAnMmVtJyxcblx0XHR9KTtcblx0XHRmb290ZXIuY3JlYXRlRWwoJ3NwYW4nLCB7XG5cdFx0XHR0ZXh0OiBgVlZ1bmRlcmxvcmUgVG9vbGtpdCBQbHVnaW4gdiR7dGhpcy5wbHVnaW4ubWFuaWZlc3QudmVyc2lvbn0gXHUyMDIyIGBcblx0XHR9KTtcblx0XHRmb290ZXIuY3JlYXRlRWwoJ2EnLCB7XG5cdFx0XHR0ZXh0OiAnVmlldyBvbiBHaXRIdWInLFxuXHRcdFx0aHJlZjogJ2h0dHBzOi8vZ2l0aHViLmNvbS9zbGFtd2lzZTAwMDEvdnZ1bmRlcmxvcmUtdG9vbGtpdC1wbHVnaW4nLFxuXHRcdFx0YXR0cjogeyB0YXJnZXQ6ICdfYmxhbmsnIH1cblx0XHR9KTtcblxuXHRcdGNvbnRhaW5lckVsLnNjcm9sbFRvcCA9IHNhdmVkU2Nyb2xsVG9wO1xuXHR9KSgpO1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlVmVyc2lvbkRpc3BsYXkoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLnZlcnNpb25WYWx1ZUVsIHx8ICF0aGlzLmZvcmNlV2FybmluZ0VsKSByZXR1cm47XG5cdCAgXG5cdFx0Ly8gcmVhZCAudmVyc2lvbi5qc29uXG5cdFx0bGV0IGluc3RhbGxlZCA9ICcnO1xuXHRcdHRyeSB7XG5cdFx0ICBjb25zdCB2ZXIgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCcudmVyc2lvbi5qc29uJyk7XG5cdFx0ICBpbnN0YWxsZWQgPSBKU09OLnBhcnNlKHZlcikudmVyc2lvbiA/PyAnJztcblx0XHR9IGNhdGNoIHt9XG5cdFx0Y29uc3QgbGF0ZXN0ID0gKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uID8/ICcnKS50cmltKCk7XG5cdFx0Y29uc3QgaXNNYXRjaCA9IGluc3RhbGxlZCA9PT0gbGF0ZXN0O1xuXHQgIFxuXHRcdC8vIHVwZGF0ZSBqdXN0IHRoZSB2ZXJzaW9uIHNwYW5cblx0XHR0aGlzLnZlcnNpb25WYWx1ZUVsLnRleHRDb250ZW50ID0gaW5zdGFsbGVkIHx8ICdOb3QgaW5zdGFsbGVkJztcblx0XHR0aGlzLnZlcnNpb25WYWx1ZUVsLnN0eWxlLmNvbG9yID0gaXNNYXRjaFxuXHRcdCAgPyAndmFyKC0tdGV4dC1zdWNjZXNzKSdcblx0XHQgIDogJ3ZhcigtLXRleHQtZXJyb3IpJztcblx0ICBcblx0XHQvLyBjbGVhciBhbmQgcmUtcmVuZGVyIGp1c3QgdGhlIHdhcm5pbmcgY29udGFpbmVyXG5cdFx0dGhpcy5mb3JjZVdhcm5pbmdFbC5lbXB0eSgpO1xuXHRcdGlmIChpbnN0YWxsZWQgJiYgbGF0ZXN0ICYmIGluc3RhbGxlZCAhPT0gbGF0ZXN0KSB7XG5cdFx0ICBjb25zdCB3YXJuID0gdGhpcy5mb3JjZVdhcm5pbmdFbC5jcmVhdGVEaXYoe1xuXHRcdFx0dGV4dDogYFx1MjZBMFx1RkUwRiBOZXcgdmVyc2lvbiBhdmFpbGFibGUgKCR7aW5zdGFsbGVkfSBcdTIxOTIgJHtsYXRlc3R9KSBcdTIwMTQgdXNlIHJlZ3VsYXIgdXBkYXRlIGluc3RlYWRgLFxuXHRcdCAgfSk7XG5cdFx0ICB3YXJuLnN0eWxlLmNzc1RleHQgPSBgXG5cdFx0XHRmb250LXNpemU6IDAuODVlbTtcblx0XHRcdGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcblx0XHRcdGZvbnQtc3R5bGU6IGl0YWxpYztcblx0XHQgIGA7XG5cdFx0ICB3YXJuLnNldEF0dHIoJ3RpdGxlJywgJ0ZvcmNlIHVwZGF0aW5nIHdoaWxlIGEgbmV3IHZlcnNpb24gaXMgYXZhaWxhYmxlIG1heSBza2lwIGltcG9ydGFudCBjaGFuZ2VzLicpO1xuXHRcdH1cblx0ICB9XG5cdCAgXG59ICBcbiIsICIvLyBzcmMvZmlyc3RpbnN0YWxsY29uZmlybS50c1xuaW1wb3J0IHsgQXBwLCBNb2RhbCwgQnV0dG9uQ29tcG9uZW50LCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IEluc3RhbGxPcHRpb25zIH0gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IGltcG9ydFJ1bGVzZXREYXRhIH0gZnJvbSBcIi4vcnVsZXNldEluc3RhbGxlclwiO1xuXG5leHBvcnQgY2xhc3MgQ29uZmlybUZyZXNoSW5zdGFsbE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIHBsdWdpbjogVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbikge1xuICAgIHN1cGVyKGFwcCk7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBvbk9wZW4oKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblxuICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KFwiXHUyNkEwXHVGRTBGIFdhcm5pbmc6IEZyZXNoIFZhdWx0IFJlY29tbWVuZGVkXCIpO1xuXG4gICAgLy8gRGlzY2xhaW1lciB0ZXh0XG4gICAgdGhpcy5jb250ZW50RWxcbiAgICAgIC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICB0ZXh0OlxuICAgICAgICAgIFwiVGhlIGZ1bGwgVlZ1bmRlcmxvcmUgaW5zdGFsbCBpcyBpbnRlbmRlZCBmb3IgYSBmcmVzaCwgZW1wdHkgT2JzaWRpYW4gdmF1bHQuIFwiICtcbiAgICAgICAgICBcIklmIHlvdSBpbnN0YWxsIGluIGEgdmF1bHQgdGhhdCBhbHJlYWR5IGhhcyBmaWxlcywgYW55IGZpbGUgd2hvc2UgcGF0aCBtYXRjaGVzIGEgXCIgK1xuICAgICAgICAgIFwiVlZ1bmRlcmxvcmUgVG9vbGtpdCBmaWxlIHdpbGwgYmUgb3ZlcndyaXR0ZW4uXFxuXFxuXCIgK1xuICAgICAgICAgIFwiQWxzbyB0aGluZ3MgY291bGQganVzdCBnZXQgbWVzc3kuXFxuXFxuXCIgK1xuICAgICAgICAgIFwiTWFrZSBhIHBlcmNlcHRpb24gY2hlY2sgYW5kIHByb2NlZWQgd2l0aCBjYXV0aW9uIVwiLFxuICAgICAgfSlcbiAgICAgIC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDFlbTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDEuNGVtO1xuICAgICAgYDtcblxuICAgIC8vIEJ1dHRvbiByb3cgY29udGFpbmVyXG4gICAgY29uc3QgYnV0dG9uUm93ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuICAgIGJ1dHRvblJvdy5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICBnYXA6IDAuNWVtO1xuICAgIGA7XG5cbiAgICAvLyBcIk9oIGdvZCwgY2FuY2VsIVwiIGJ1dHRvblxuICAgIG5ldyBCdXR0b25Db21wb25lbnQoYnV0dG9uUm93KVxuICAgICAgLnNldEJ1dHRvblRleHQoXCJPaCBnb2QsIGNhbmNlbCFcIilcbiAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSk7XG5cbiAgICAvLyBcIkluc3RhbGwhIVwiIGJ1dHRvblxuICAgIG5ldyBCdXR0b25Db21wb25lbnQoYnV0dG9uUm93KVxuICAgICAgLnNldEJ1dHRvblRleHQoXCJJbnN0YWxsISFcIilcbiAgICAgIC5zZXRDdGEoKSAvLyBtYWtlcyBpdCBsb29rIGxpa2UgYSBwcmltYXJ5IGFjdGlvblxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBjbG9zZSB0aGlzIG1vZGFsIGltbWVkaWF0ZWx5XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgXG4gICAgICAgIGNvbnN0IG9wdHM6IEluc3RhbGxPcHRpb25zID0ge1xuICAgICAgICAgIGNvbXBlbmRpdW06IHRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtLFxuICAgICAgICAgIHJlZmVyZW5jZXM6IFsuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlXSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBsZXQgdGhlIHVzZXIga25vdyB3ZSdyZSB3b3JraW5nXG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdTIzRjMgSW5zdGFsbGluZyB0b29sa2l0XHUyMDI2XCIpO1xuICBcbiAgICAgICAgLy8gZ3JhYiB0aGUgc2VsZWN0aW9ucyBmcm9tIHNldHRpbmdzXG4gICAgICAgIGNvbnN0IGNvbXBlbmRpdW0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bTtcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlcyA9IFsuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlXTtcbiAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gcnVuIHlvdXIgbmV3IGluc3RhbGxlclxuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmluc3RhbGxGdWxsVG9vbGtpdCh7IGNvbXBlbmRpdW0sIHJlZmVyZW5jZXMgfSk7XG5cblxuICAgICAgICAgIGlmIChjb21wZW5kaXVtKSB7XG4gICAgICAgICAgICBhd2FpdCBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICAgICAgICAgIGFwcDogdGhpcy5hcHAsXG4gICAgICAgICAgICAgIGVkaXRpb25LZXk6IGNvbXBlbmRpdW0sXG4gICAgICAgICAgICAgIHRhcmdldFBhdGg6IFwiQ29tcGVuZGl1bVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcdTI3NEMgaW5zdGFsbFRvb2xraXQoKSBmYWlsZWQ6XCIsIGVycik7XG4gICAgICAgICAgbmV3IE5vdGljZShcIlx1Mjc0QyBUb29sa2l0IGluc3RhbGxhdGlvbiBmYWlsZWQuIFNlZSBjb25zb2xlLlwiKTtcbiAgICAgICAgfVxuICBcbiAgICAgICAgLy8gbWFyayBmaXJzdFx1MjAxMHJ1biBjb21wbGV0ZSBzbyB0aGUgY2FyZCBuZXZlciBzaG93cyBhZ2FpblxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZWVkc0luc3RhbGwgPSBmYWxzZTtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gIFxuICAgICAgICAvLyByZVx1MjAxMGRyYXcgdGhlIHNldHRpbmdzIFVJIG5vdyB0aGF0IHdlJ3JlIHBhc3QgZmlyc3RcdTIwMTBydW5cbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xuICAgICAgfSlcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuIiwgIi8vIEZVVFVSRSBTWVNURU1TOiBcbi8vIENhbGwgb2YgQ3RodWx1IFxuLy8gTW90aGVyc2hpcFxuLy8gUEYyRVxuLy8gTVx1MDBGNnJrIEJvcmdcbi8vIEJsYWRlcyBpbiB0aGUgRGFya1xuLy8gRGVsdGEgR3JlZW5cbi8vIFN0YXJmaW5kZXJcbi8vIFRoZSBPbmUgUmluZ1xuLy8gRmF0ZSBcbi8vIEN5YmVycHVua1xuLy8gTGFuY2VyXG4vLyBQb3dlcmVkIGJ5IHRoZSBBcG9jYWx5cHNlXG4vLyBTdGFyIFdhcnMgUlBHXG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdGlvbiB7XG4gICAgaWQ6IHN0cmluZzsgICAgICAgICAgICAgIC8vIGUuZy4gXCI1ZS0yMDE0XCJcbiAgICBsYWJlbDogc3RyaW5nOyAgICAgICAgICAgLy8gZS5nLiBcIkQmRCA1RSAoMjAxNClcIlxuICAgIHJlcG8/OiBzdHJpbmc7ICAgICAgICAgICAgLy8gZS5nLiBcIjVldG9vbHMtbWlycm9yLTMvNWV0b29scy0yMDE0LXNyY1wiXG4gICAgcGFyc2VyPzogc3RyaW5nOyAgICAgICAvLyB5b3VyIHBhcnNlclx1MjAxMHNlbGVjdG9yXG4gICAgc291cmNlVXJsPzogc3RyaW5nO1xuICAgIGNhdGVnb3JpZXM/OiBzdHJpbmdbXTtcbiAgfVxuICBcbiAgZXhwb3J0IGNvbnN0IEFWQUlMQUJMRV9FRElUSU9OUzogRWRpdGlvbltdID0gW1xuICAgIHtcbiAgICAgIGlkOiAnNWUtMjAxNCcsXG4gICAgICBsYWJlbDogJ0QmRCA1RSAoMjAxNCknLFxuICAgICAgcmVwbzogJzVldG9vbHMtbWlycm9yLTMvNWV0b29scy0yMDE0LXNyYy90cmVlL21haW4vZGF0YScsXG4gICAgICBwYXJzZXI6ICc1ZS1qc29uJyxcbiAgICAgIHNvdXJjZVVybDogJycsXG4gICAgICBjYXRlZ29yaWVzOiBbJyddLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICc1ZS0yMDI1JyxcbiAgICAgIGxhYmVsOiAnRCZEIDVFICgyMDI1KScsXG4gICAgICByZXBvOiAnNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLXNyYy90cmVlL21haW4vZGF0YScsXG4gICAgICBwYXJzZXI6ICc1ZS1qc29uJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndGVzdCcsXG4gICAgICBsYWJlbDogJ1Rlc3QgUnVsZXNldCcsXG4gICAgICByZXBvOiAnNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLTIwMTQtc3JjJyxcbiAgICAgIHBhcnNlcjogJzVlLWpzb24nLFxuICAgICAgc291cmNlVXJsOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLzVldG9vbHMtbWlycm9yLTMvNWV0b29scy0yMDE0LXNyYy9tYWluL2RhdGEnLFxuICAgICAgY2F0ZWdvcmllczogWydzcGVsbHMnLCAnYmVzdGlhcnknXSxcbiAgICB9LCBcbiAgICBcblxuICBdO1xuXG4gICAgLy8ge1xuICAgIC8vICAgaWQ6ICcnLFxuICAgIC8vICAgbGFiZWw6ICcnLFxuICAgIC8vICAgcmVwbzogJycsXG4gICAgLy8gICBwYXJzZXI6ICcnLFxuICAgIC8vICAgc291cmNlVXJsOiAnJyxcbiAgICAvLyAgIGNhdGVnb3JpZXM6IFsnJ10sXG4gICAgLy8gfSwgICIsICJpbXBvcnQgeyBBcHAsIG5vcm1hbGl6ZVBhdGggfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIHsgRWRpdGlvbiB9IGZyb20gXCIuLi8uLi9lZGl0aW9uc1wiO1xuaW1wb3J0IHsgcGFyc2VTcGVsbHNGaWxlIH0gZnJvbSBcIi4vc3BlbGxzXCI7XG5pbXBvcnQgeyBwYXJzZUJlc3RpYXJ5RmlsZSB9IGZyb20gXCIuL2Jlc3RpYXJ5XCI7XG5pbXBvcnQgeyBwYXJzZUl0ZW1zRmlsZSB9IGZyb20gXCIuL2l0ZW1zXCI7XG5pbXBvcnQgeyBwYXJzZVNwZWNpZXNGaWxlIH0gZnJvbSBcIi4vc3BlY2llc1wiO1xuaW1wb3J0IHsgcGFyc2VDbGFzc0ZpbGUgfSBmcm9tIFwiLi9jbGFzc2VzXCI7XG5pbXBvcnQgeyBwYXJzZUFjdGlvbnNGaWxlIH0gZnJvbSBcIi4vcnVsZXNcIjtcbmltcG9ydCB7IHBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZSB9IGZyb20gXCIuL3J1bGVzXCI7XG5pbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5cbi8vIFx1MjAxNCBHaXRIdWIgbGlzdGluZ3MgXHUyMDE0XG5hc3luYyBmdW5jdGlvbiBsaXN0U3BlbGxGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvc3BlbGxzYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gZGF0YVxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIGl0ZW0ubmFtZS5zdGFydHNXaXRoKFwic3BlbGxzLVwiKSAmJiBpdGVtLm5hbWUuZW5kc1dpdGgoXCIuanNvblwiKSlcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdEJlc3RpYXJ5RmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL2Jlc3RpYXJ5YDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgbGlzdCA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICBjb25zdCBDT1JFX1NPVVJDRVMgPSBbXG4gICAgXCJiZXN0aWFyeS1waGIuanNvblwiLCBcImJlc3RpYXJ5LW1tLmpzb25cIiwgXCJiZXN0aWFyeS1kbWcuanNvblwiLFxuICAgIFwiYmVzdGlhcnkteGdlLmpzb25cIiwgXCJiZXN0aWFyeS12Z20uanNvblwiLCBcImJlc3RpYXJ5LXRjZS5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1lZ3cuanNvblwiLCBcImJlc3RpYXJ5LWVybHcuanNvblwiLCBcImJlc3RpYXJ5LW10Zi5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS12cmdyLmpzb25cIiwgXCJiZXN0aWFyeS1jb3MuanNvblwiLCBcImJlc3RpYXJ5LW9vdGEuanNvblwiLFxuICAgIFwiYmVzdGlhcnktcG90YS5qc29uXCIsIFwiYmVzdGlhcnktaG90ZHEuanNvblwiLCBcImJlc3RpYXJ5LXJvdC5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1za3QuanNvblwiLCBcImJlc3RpYXJ5LXRmdHlwLmpzb25cIiwgXCJiZXN0aWFyeS10b2EuanNvblwiXG4gIF07XG4gIHJldHVybiBsaXN0XG4gICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiYgQ09SRV9TT1VSQ0VTLmluY2x1ZGVzKGl0ZW0ubmFtZSkpXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbmNvbnN0IElURU1fSlNPTl9GSUxFUyA9IFtcbiAgXCJpdGVtcy1iYXNlLmpzb25cIixcbiAgXCJpdGVtcy5qc29uXCIsXG4gIFwib2JqZWN0cy5qc29uXCIsXG4gIFwidmVoaWNsZXMuanNvblwiLFxuICBcImRlY2tzLmpzb25cIixcbl07XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RJdGVtRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gZGF0YVxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIElURU1fSlNPTl9GSUxFUy5pbmNsdWRlcyhpdGVtLm5hbWUpKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBsaXN0Q2xhc3NGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvY2xhc3NgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBsaXN0aW5nID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIHJldHVybiBsaXN0aW5nXG4gICAgLmZpbHRlcihpdGVtID0+XG4gICAgICBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmXG4gICAgICBpdGVtLm5hbWUuc3RhcnRzV2l0aChcImNsYXNzLVwiKSAmJlxuICAgICAgaXRlbS5uYW1lLmVuZHNXaXRoKFwiLmpzb25cIilcbiAgICApXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbi8vIFx1MjAxNCBlbnN1cmUgdGhlIHZhdWx0IGZvbGRlciBleGlzdHMgXHUyMDE0XG5hc3luYyBmdW5jdGlvbiBlbnN1cmVGb2xkZXIoYXBwOiBBcHAsIGZvbGRlclBhdGg6IHN0cmluZykge1xuICBjb25zdCBwYXJ0cyA9IGZvbGRlclBhdGguc3BsaXQoXCIvXCIpO1xuICBsZXQgY3VyciA9IFwiXCI7XG4gIGZvciAoY29uc3QgcCBvZiBwYXJ0cykge1xuICAgIGN1cnIgPSBjdXJyID8gYCR7Y3Vycn0vJHtwfWAgOiBwO1xuICAgIHRyeSB7IGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIoY3Vycik7IH1cbiAgICBjYXRjaCB7fSAvLyBhbHJlYWR5IGV4aXN0c1xuICB9XG59XG5cbi8vIFx1MjAxNCB0aGUgb25lIGVudHJ5LXBvaW50IHRoYXQgeW91ciB0b3AtbGV2ZWwgY2FsbHMgXHUyMDE0XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW1wb3J0RWRpdGlvbkRhdGEocGFyYW1zOiB7XG4gIGFwcDogQXBwO1xuICBlZGl0aW9uOiBFZGl0aW9uO1xuICB0YXJnZXRQYXRoOiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHsgYXBwLCBlZGl0aW9uLCB0YXJnZXRQYXRoIH0gPSBwYXJhbXM7XG4gIGNvbnN0IHJlcG8gPSBlZGl0aW9uLnJlcG8gPz8gXCJcIjtcblxuICAvLyBcdUQ4M0RcdUREMzkgU1BFTExTXG4gIHtcbiAgICBjb25zdCBzcGVsbEZpbGVzID0gYXdhaXQgbGlzdFNwZWxsRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZmlsZU5hbWUgb2Ygc3BlbGxGaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9zcGVsbHMvJHtmaWxlTmFtZX1gKTtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gcGFyc2VTcGVsbHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgICBmb3IgKGNvbnN0IG1kIG9mIGZpbGVzKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1NwZWxscy8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBzcGVsbCAke2ZpbGVOYW1lfTpgLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdUQ4M0RcdUREMzkgQkVTVElBUllcbiAge1xuICAgIGNvbnN0IGJlc3RpYXJ5RmlsZXMgPSBhd2FpdCBsaXN0QmVzdGlhcnlGaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBiZXN0aWFyeUZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgICAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYmVzdGlhcnkvJHtmaWxlTmFtZX1gKTtcbiAgICAgICAgY29uc3QganNvbiAgID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VCZXN0aWFyeUZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgcGFyc2VkKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L0Jlc3RpYXJ5LyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGJlc3RpYXJ5ICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1RDgzRFx1REQzOSBJVEVNU1xuICB7XG4gICAgY29uc3QgaXRlbUZpbGVzID0gYXdhaXQgbGlzdEl0ZW1GaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmbiBvZiBpdGVtRmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vJHtmbn1gKTtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUl0ZW1zRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGl0ZW1zIGZyb20gJHtmbn06YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4vLyBcdUQ4M0RcdUREMzkgU1BFQ0lFU1xue1xuICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3JhY2VzLmpzb25gKTtcbiAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNwZWNpZXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vUGxheWVyIEJ1aWxkLyR7bWQucGF0aH1gKTtcbiAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpKTtcbiAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gIH1cbn1cbi8vIFx1RDgzRFx1REQzOSBDTEFTU0VTXG57XG4gIGNvbnN0IGNsYXNzRmlsZXMgPSBhd2FpdCBsaXN0Q2xhc3NGaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gIGZvciAoY29uc3QgZmlsZU5hbWUgb2YgY2xhc3NGaWxlcykge1xuICAgIHRyeSB7XG4gICAgICAvLyBmZXRjaCB0aGUgcmF3IGNsYXNzIEpTT05cbiAgICAgIGNvbnN0IHJlcyAgICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9jbGFzcy8ke2ZpbGVOYW1lfWApO1xuICAgICAgY29uc3QganNvbiAgID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgLy8gcGFyc2UgaW50byBvbmUgb3IgbW9yZSBtYXJrZG93biBmaWxlc1xuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQ2xhc3NGaWxlKGpzb24sIGVkaXRpb24uaWQsIGZpbGVOYW1lKTtcblxuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9QbGF5ZXIgQnVpbGQvJHttZC5wYXRofWApO1xuICAgICAgICAvLyAxKSBlbnN1cmUgdGhlIGZvbGRlciBleGlzdHNcbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKSk7XG5cbiAgICAgICAgLy8gMikgd3JpdGUgdmlhIE9ic2lkaWFuXHUyMDE5cyBBUEkgc28gbm90ZXMgcmVmcmVzaFxuICAgICAgICBjb25zdCBleGlzdGluZyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbFBhdGgpO1xuICAgICAgICBpZiAoZXhpc3RpbmcgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgIC8vIE92ZXJ3cml0ZSBhbiBleGlzdGluZyBub3RlIGFuZCBmaXJlIHRoZSBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQubW9kaWZ5KGV4aXN0aW5nLCBtZC5jb250ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDcmVhdGUgYSBicmFuZC1uZXcgbm90ZSAoYWxzbyBmaXJlcyB0aGUgY2hhbmdlIGV2ZW50KVxuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGNsYXNzICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgIH1cbiAgfVxufVxuXG5cbiAvLyBcdUQ4M0RcdUREMzkgUlVMRVM6IEFDVElPTlNcbiAge1xuICAgIHRyeSB7XG4gICAgICAvLyAxLiBmZXRjaCB0aGUgcmF3IEpTT05cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYWN0aW9ucy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcblxuICAgICAgLy8gMi4gaW52b2tlIHlvdXIgcGFyc2VyIHdpdGggYm90aCBhcmdzXG4gICAgICAvLyAgICB0aGlzIHJldHVybnMgUGFyc2VkTWFya2Rvd25GaWxlW11cbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUFjdGlvbnNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuXG4gICAgICAvLyAzLiB3cml0ZSBlYWNoIHJlc3VsdGluZyBub3RlIChyaWdodCBub3cgeW91IG9ubHkgcHJvZHVjZSBvbmUpXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgYWN0aW9ucy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuICAvLyBcdUQ4M0RcdUREMzkgUlVMRVM6IENPTkRJVElPTlMgJiBESVNFQVNFU1xuICB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2NvbmRpdGlvbnNkaXNlYXNlcy5qc29uYFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcblxuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGNvbmRpdGlvbnNkaXNlYXNlcy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuXG5cbn0iLCAiLy8gaGVscGVycy9zb3VyY2VNYXAudHNcblxuLy8gTWFwIG9mIDVlIHNvdXJjZSBhYmJyZXZpYXRpb25zIHRvIHRoZWlyIGZ1bGwgdGl0bGVzXG5jb25zdCBTT1VSQ0VfTkFNRV9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIC8vIENvcmUgcnVsZWJvb2tzXG4gIFBIQjogXCJQbGF5ZXIncyBIYW5kYm9va1wiLFxuICBNTTogIFwiTW9uc3RlciBNYW51YWxcIixcbiAgRE1HOiBcIkR1bmdlb24gTWFzdGVyJ3MgR3VpZGVcIixcblxuICAvLyBPZmZpY2lhbCBleHBhbnNpb25zICYgYWR2ZW50dXJlIG1vZHVsZXNcbiAgQ29TOiAgXCJDdXJzZSBvZiBTdHJhaGRcIixcbiAgT290QTogXCJPdXQgb2YgdGhlIEFieXNzXCIsXG4gIFBvdEE6IFwiUHJpbmNlcyBvZiB0aGUgQXBvY2FseXBzZVwiLFxuICBIb3REUTogXCJIb2FyZCBvZiB0aGUgRHJhZ29uIFF1ZWVuXCIsXG4gIFJvVDogIFwiUmlzZSBvZiBUaWFtYXRcIixcbiAgU0tUOiAgXCJTdG9ybSBLaW5nJ3MgVGh1bmRlclwiLFxuICBUZnRZUDpcIlRhbGVzIGZyb20gdGhlIFlhd25pbmcgUG9ydGFsXCIsXG4gIFRvQTogIFwiVG9tYiBvZiBBbm5paGlsYXRpb25cIixcblxuICAvLyBTdXBwbGVtZW50YWwgZ3VpZGVzXG4gIFhHRTogXCJYYW5hdGhhcidzIEd1aWRlIHRvIEV2ZXJ5dGhpbmdcIixcbiAgVkdNOiBcIlZvbG8ncyBHdWlkZSB0byBNb25zdGVyc1wiLFxuICBUQ0U6IFwiVGFzaGEncyBDYXVsZHJvbiBvZiBFdmVyeXRoaW5nXCIsXG4gIEVHVzogXCJFYmVycm9uOiBSaXNpbmcgZnJvbSB0aGUgTGFzdCBXYXJcIixcbiAgRVJMVzpcIkV4cGxvcmVyJ3MgR3VpZGUgdG8gV2lsZGVtb3VudFwiLFxuICBNVEY6IFwiTW9uc3RlcnMgb2YgdGhlIE11bHRpdmVyc2VcIixcbiAgVlJHUjpcIlZhbiBSaWNodGVuJ3MgR3VpZGUgdG8gUmF2ZW5sb2Z0XCIsXG5cbiAgLy8gQWRkaXRpb25hbCBzb3VyY2Vib29rc1xuICBBQUc6ICAgICAgXCJBc3RyYWwgQWR2ZW50dXJlclx1MjAxOXMgR3VpZGVcIixcbiAgQUk6ICAgICAgIFwiQWNxdWlzaXRpb25zIEluY29ycG9yYXRlZFwiLFxuICBBaXRGUkFWRlQ6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBBIFZpc3VhbCBGaWVsZCBUZXN0XCIsXG4gIEJNVDogICAgICBcIkJpZyBNb25zdGVyIFRvbWVcIixcbiAgRG9EazogICAgIFwiRHJhZ29uIG9mIERhcmtrZWVwXCIsXG4gIEZURDogICAgICBcIkZpemJhblx1MjAxOXMgVHJlYXN1cnkgb2YgRHJhZ29uc1wiLFxuICBHR1I6ICAgICAgXCJHdWlsZG1hc3Rlclx1MjAxOXMgR3VpZGUgdG8gUmF2bmljYVwiLFxuICBHSExvRTogICAgXCJHaG9zdHMgb2YgdGhlIEhvcml6b246IExpZ2h0IE92ZXIgRWxlbnNhcmlhXCIsXG4gIElEUm90RjogICBcIkljZXdpbmQgRGFsZTogUmltZSBvZiB0aGUgRnJvc3RtYWlkZW5cIixcbiAgTExLOiAgICAgIFwiTG9zdCBMYWJvcmF0b3J5IG9mIEt3YWxpc2hcIixcbiAgU2F0TzogICAgIFwiU2FwcGhpcmUgb2YgVHJ1dGhcIixcbiAgU0NDOiAgICAgIFwiU3RyaXhoYXZlbjogQ3VycmljdWx1bSBvZiBDaGFvc1wiLFxuICBURENTUjogICAgXCJUaGUgRHVuZ2VvbiBDb2FjaFx1MjAxOXMgUnVsZWJvb2tcIlxufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBmdWxsIHNvdXJjZSBuYW1lIGZvciBhIGdpdmVuIGFiYnJldmlhdGlvbi5cbiAqIE9wdGlvbmFsbHkgYXBwZW5kcyB5ZWFyIGZvciBQSEIgdmFyaWFudHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGdWxsU291cmNlTmFtZShhYmJyZXY6IHN0cmluZywgZWRpdGlvbklkPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgbGV0IG5hbWUgPSBTT1VSQ0VfTkFNRV9NQVBbYWJicmV2XSA/PyBhYmJyZXY7XG5cbiAgLy8gQXBwZW5kIHllYXIgZm9yIFBIQiBpZiB0aGUgZWRpdGlvbiBjb250ZXh0IGlzIGtub3duXG4gIGlmIChhYmJyZXYgPT09IFwiUEhCXCIpIHtcbiAgICBpZiAoZWRpdGlvbklkPy5pbmNsdWRlcyhcIjIwMTRcIikpIG5hbWUgKz0gXCIgKDIwMTQpXCI7XG4gICAgZWxzZSBpZiAoZWRpdGlvbklkPy5pbmNsdWRlcyhcIjIwMjVcIikpIG5hbWUgKz0gXCIgKDIwMjUpXCI7XG4gIH1cblxuICByZXR1cm4gbmFtZTtcbn1cbiIsICIvLyBwYXJzZXJzLzVlLWpzb24vaGVscGVycy90YWdSZXBsYWNlci50c1xuXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZTVlVGFncyhpbnB1dDogdW5rbm93bik6IHN0cmluZyB7XG4gIC8vIDEpIFR1cm4gYXJyYXlzIGludG8gc3BhY2Utam9pbmVkIHN0cmluZ3NcbiAgLy8gMikgTGVhdmUgc3RyaW5ncyBhbG9uZVxuICAvLyAzKSBDb2VyY2UgZXZlcnl0aGluZyBlbHNlIHRvIHN0cmluZyAob3IgZW1wdHkpXG4gIGxldCB0ZXh0OiBzdHJpbmc7XG4gIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgIHRleHQgPSBpbnB1dC5qb2luKFwiIFwiKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIHtcbiAgICB0ZXh0ID0gaW5wdXQ7XG4gIH0gZWxzZSB7XG4gICAgdGV4dCA9IFN0cmluZyhpbnB1dCA/PyBcIlwiKTtcbiAgfVxuXG4gIC8vIG5vdyBydW4gYWxsIHlvdXIgQC10YWcgcmVwbGFjZW1lbnRzIG9uIHRoYXQgdGV4dFxuICByZXR1cm4gdGV4dFxuICAgIC5yZXBsYWNlKC9cXHtAKHNwZWxsfGl0ZW18Y3JlYXR1cmV8cmFjZSkgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCBfXywgbmFtZSkgPT5cbiAgICAgIGBbWyR7Y2FwaXRhbGl6ZUVhY2gobmFtZSl9XV1gXG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAKGNvbmRpdGlvbnxzdGF0dXN8YWN0aW9ufHNraWxsKSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIHRhZywgbmFtZSkgPT5cbiAgICAgIGBbWyR7Y2FwaXRhbGl6ZSh0YWcpfXMjJHtuYW1lfXwke2NhcGl0YWxpemVFYWNoKG5hbWUpfV1dYFxuICAgIClcbiAgICAucmVwbGFjZSgvXFx7QGNsYXNzRmVhdHVyZSAoW158fV0rKVxcfChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgZmVhdHVyZSwgY2xzKSA9PlxuICAgICAgYFtbJHtjbHN9IyR7ZmVhdHVyZX1dXWBcbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0AoYm9va3xmaWx0ZXIpIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgX18sIHR4dCkgPT4gdHh0KVxuICAgIC5yZXBsYWNlKC9cXHtAbm90ZSAoW159XSspXFx9L2csIChfLCBub3RlKSA9PiBgKiR7bm90ZX0qYClcbiAgICAucmVwbGFjZSgvXFx7QChkYW1hZ2V8ZGljZXxkY3xoaXR8c2Vuc2UpIChbXn1dKylcXH0vZywgKF8sIF9fLCB2YWx1ZSkgPT4gdmFsdWUpXG4gICAgLnJlcGxhY2UoL1xce0BjaGFuY2UgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCB2YWx1ZSkgPT4gYCR7dmFsdWV9JWApXG4gICAgLnJlcGxhY2UoL1xce0BxdWlja3JlZiAoW158fV0rKSg/OlxcfFtefF0qXFx8W159XSopP1xcfS9nLCAoXywgdGVybSkgPT4ge1xuICAgICAgY29uc3Qga25vd24gPSBbXG4gICAgICAgIFwiZGlmZmljdWx0IHRlcnJhaW5cIiwgXCJ0b3RhbCBjb3ZlclwiLCBcImhhbGYgY292ZXJcIiwgXCJ0aHJlZS1xdWFydGVycyBjb3ZlclwiLFxuICAgICAgICBcImhlYXZpbHkgb2JzY3VyZWRcIiwgXCJsaWdodGx5IG9ic2N1cmVkXCJcbiAgICAgIF07XG4gICAgICByZXR1cm4ga25vd24uaW5jbHVkZXModGVybS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICA/IGBbW1J1bGVzIyR7Y2FwaXRhbGl6ZUVhY2godGVybSl9XV1gXG4gICAgICAgIDogdGVybTtcbiAgICB9KVxuICAgIC5yZXBsYWNlKC9cXHtAcmVjaGFyZ2VcXHMqKFtefV0rKVxcfS9nLCAoXywgbnVtKSA9PiBgKHJlY2hhcmdlOiAke251bS50cmltKCl9KWApXG4gICAgLnJlcGxhY2UoL1xce0Aoc2NhbGVkaWNlfHNjYWxlZGFtYWdlKVtefV0qXFx8KFtefH1dKylcXH0vZywgKF8sIF9fLCB2YWx1ZSkgPT4gdmFsdWUpXG4gICAgLnJlcGxhY2UoL1xce0BkMjBbXn1dKlxcfS9nLCBcIlwiKVxuICAgIC5yZXBsYWNlKC9cXHtAW159XStcXH0vZywgXCJcIik7XG59XG5cbmZ1bmN0aW9uIGNhcGl0YWxpemUoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCk7XG59XG5cbmZ1bmN0aW9uIGNhcGl0YWxpemVFYWNoKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHN0ci5zcGxpdChcIiBcIikubWFwKGNhcGl0YWxpemUpLmpvaW4oXCIgXCIpO1xufVxuIiwgImltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyTWFya2Rvd25UYWJsZShlbnRyeTogYW55KTogc3RyaW5nIHtcbiAgaWYgKGVudHJ5LnR5cGUgIT09IFwidGFibGVcIiB8fCAhQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkgcmV0dXJuIFwiXCI7XG5cbiAgY29uc3QgY2FwdGlvbiA9IGVudHJ5LmNhcHRpb24gPyBgIyMjIyMgJHtlbnRyeS5jYXB0aW9ufVxcbmAgOiBcIlwiO1xuXG4gIGNvbnN0IGhlYWRlcnMgPSAoZW50cnkuY29sTGFiZWxzID8/IFtdKVxuICAgIC5tYXAoKGg6IHN0cmluZykgPT4gcmVwbGFjZTVlVGFncyhoLnRyaW0oKSkpOyAvLyBcdTI3MDUgdGFnIHJlcGxhY2Ugb24gaGVhZGVyc1xuXG4gIGNvbnN0IGhlYWRlclJvdyA9IGB8ICR7aGVhZGVycy5qb2luKFwiIHwgXCIpfSB8YDtcbiAgY29uc3QgZGl2aWRlclJvdyA9IGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCI6LS1cIikuam9pbihcIiB8IFwiKX0gfGA7XG5cbiAgY29uc3QgYm9keVJvd3MgPSBlbnRyeS5yb3dzLm1hcCgocm93OiBhbnlbXSkgPT4ge1xuICAgIGNvbnN0IGNlbGxzID0gcm93Lm1hcCgoY2VsbCkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBjZWxsID09PSBcInN0cmluZ1wiKSByZXR1cm4gcmVwbGFjZTVlVGFncyhjZWxsKTsgLy8gXHUyNzA1IHRhZyByZXBsYWNlIHN0cmluZ3NcblxuICAgICAgaWYgKHR5cGVvZiBjZWxsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGlmIChjZWxsLnJvbGw/LmV4YWN0ICE9PSB1bmRlZmluZWQpIHJldHVybiBgJHtjZWxsLnJvbGwuZXhhY3R9YDtcbiAgICAgICAgaWYgKGNlbGwucm9sbD8ubWluICE9PSB1bmRlZmluZWQgJiYgY2VsbC5yb2xsPy5tYXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybiBgJHtjZWxsLnJvbGwubWlufVx1MjAxMyR7Y2VsbC5yb2xsLm1heH1gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKEpTT04uc3RyaW5naWZ5KGNlbGwpKTsgLy8gZmFsbGJhY2sgZm9yIHVua25vd24gc2hhcGVzXG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKFN0cmluZyhjZWxsKSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYHwgJHtjZWxscy5qb2luKFwiIHwgXCIpfSB8YDtcbiAgfSk7XG5cbiAgcmV0dXJuIGAke2NhcHRpb259JHtoZWFkZXJSb3d9XFxuJHtkaXZpZGVyUm93fVxcbiR7Ym9keVJvd3Muam9pbihcIlxcblwiKX1gO1xufVxuIiwgIi8vIGZvcm1hdEVudHJ5LnRzXG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9tYXJrZG93blRhYmxlXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRFbnRyeShlbnRyeTogYW55KTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IGNsZWFuZWQgPSBlbnRyeS50cmltKCk7XG4gICAgaWYgKCFjbGVhbmVkIHx8IGNsZWFuZWQgPT09IFwifVwiKSByZXR1cm4gXCJcIjtcbiAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhjbGVhbmVkKTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcImVudHJpZXNcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgY29uc3QgYm9keSA9IGVudHJ5LmVudHJpZXNcbiAgICAgIC5tYXAoZm9ybWF0RW50cnkpXG4gICAgICAuZmlsdGVyKChzdHI6IHN0cmluZykgPT4gc3RyLnRyaW0oKS5sZW5ndGggPiAwKVxuICAgICAgLmpvaW4oXCJcXG5cXG5cIik7XG5cbiAgICByZXR1cm4gZW50cnkubmFtZVxuICAgICAgPyBgIyMjIyMgJHtlbnRyeS5uYW1lfVxcbiR7Ym9keX1gXG4gICAgICA6IGJvZHk7XG4gIH1cblxuICBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICByZXR1cm4gZW50cnkuaXRlbXNcbiAgICAgIC5tYXAoKGk6IGFueSkgPT4gYC0gJHtyZXBsYWNlNWVUYWdzKHR5cGVvZiBpID09PSBcInN0cmluZ1wiID8gaSA6IEpTT04uc3RyaW5naWZ5KGkpKX1gKVxuICAgICAgLmpvaW4oXCJcXG5cIik7XG4gIH1cblxuICBpZiAoZW50cnkudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICByZXR1cm4gcmVuZGVyTWFya2Rvd25UYWJsZShlbnRyeSk7XG4gIH1cblxuICBpZiAoZW50cnkudHlwZSA9PT0gXCJxdW90ZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBxdW90ZSA9IGVudHJ5LmVudHJpZXMubWFwKGZvcm1hdEVudHJ5KS5qb2luKFwiIFwiKS50cmltKCk7XG4gICAgY29uc3QgYXV0aG9yID0gZW50cnkuYnkgPyBgIFx1MjAxNCAke2VudHJ5LmJ5fWAgOiBcIlwiO1xuICAgIHJldHVybiBgKlwiJHtxdW90ZX0ke2F1dGhvcn1cIipgO1xuICB9XG5cbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwiaW5zZXRcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgY29uc3QgaW5zZXQgPSBlbnRyeS5lbnRyaWVzLm1hcChmb3JtYXRFbnRyeSkuam9pbihcIlxcblwiKS50cmltKCk7XG4gICAgcmV0dXJuIGA+ICR7aW5zZXQucmVwbGFjZSgvXFxuL2csIFwiXFxuPiBcIil9YDtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcInJlZkNsYXNzRmVhdHVyZVwiICYmIHR5cGVvZiBlbnRyeS5jbGFzc0ZlYXR1cmUgPT09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCBbbmFtZV0gPSBlbnRyeS5jbGFzc0ZlYXR1cmUuc3BsaXQoXCJ8XCIpO1xuICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgIC5yZXBsYWNlKC9bXlxcd1xccy1dL2csIFwiXCIpXG4gICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIi1cIilcbiAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBgW1sjJHthbmNob3J9XV1gO1xuICB9XG5cbiAgLy8gSWYgaXQncyBhbiB1bmtub3duIG9iamVjdCwgc2tpcCBpdCBzYWZlbHlcbiAgcmV0dXJuIFwiXCI7XG59XG4iLCAiLy8gcGFyc2Vycy81ZS1qc29uL2Jlc3RpYXJ5LnRzXG5cbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcInNyYy90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0RnVsbFNvdXJjZU5hbWUgfSBmcm9tIFwiLi9oZWxwZXJzL3NvdXJjZU1hcFwiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBCRVNUSUFSWV9GSUVMRF9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5cblxuLy8gU2l6ZSBhYmJyZXZpYXRpb25zIG1hcHBpbmdcbmV4cG9ydCBcbmNvbnN0IFNJWkVfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBUOiBcIlRpbnlcIixcbiAgUzogXCJTbWFsbFwiLFxuICBNOiBcIk1lZGl1bVwiLFxuICBMOiBcIkxhcmdlXCIsXG4gIEg6IFwiSHVnZVwiLFxuICBHOiBcIkdhcmdhbnR1YW5cIlxufTtcblxuLy8gQWxpZ25tZW50IGFiYnJldmlhdGlvbnMgbWFwcGluZ1xuY29uc3QgQUxJR05NRU5UX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgTDogXCJMYXdmdWxcIixcbiAgTjogXCJOZXV0cmFsXCIsXG4gIEM6IFwiQ2hhb3RpY1wiLFxuICBHOiBcIkdvb2RcIixcbiAgRTogXCJFdmlsXCIsXG4gIFU6IFwiVW5hbGlnbmVkXCJcbn07XG5cbi8vIEhlbHBlciB0byBjYXBpdGFsaXplIGZpcnN0IGxldHRlciBvZiBhIHN0cmluZ1xuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0KHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFNpemVBYmJyZXYoYWJicmV2OiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gU0laRV9NQVBbYWJicmV2XSB8fCBhYmJyZXY7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRBbGlnbm1lbnRBYmJyZXYoYWJicmV2OiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gYWJicmV2XG4gICAgLnRyaW0oKVxuICAgIC5zcGxpdCgvXFxzKy8pXG4gICAgLm1hcChsZXR0ZXIgPT4gQUxJR05NRU5UX01BUFtsZXR0ZXJdIHx8IGxldHRlcilcbiAgICAuam9pbihcIiBcIik7XG59XG5cbi8vIE92ZXJyaWRlIGxpc3QgZm9yIE5QQy10eXBlIGh1bWFub2lkc1xuY29uc3QgTk9OX0JFQVNUX05QQ1MgPSBuZXcgU2V0KFtcbiAgXCJBYmp1cmVyXCIsIFwiQWNvbHl0ZVwiLCBcIkFwcHJlbnRpY2UgV2l6YXJkXCIsIFwiQXJjaGRydWlkXCIsIFwiQXJjaGVyXCIsIFwiQXJjaG1hZ2VcIiwgXCJBc3Nhc3NpblwiLFxuICBcIkJhbmRpdFwiLCBcIkJhbmRpdCBDYXB0YWluXCIsIFwiQmFyZFwiLCBcIkJlcnNlcmtlclwiLCBcIkJsYWNrZ3VhcmRcIiwgXCJDaGFtcGlvblwiLCBcIkNvbW1vbmVyXCIsXG4gIFwiQ29uanVyZXJcIiwgXCJDdWx0IEZhbmF0aWNcIiwgXCJDdWx0aXN0XCIsIFwiRGl2aW5lclwiLCBcIkRydWlkIChOUEMpXCIsIFwiRHJ1aWQgTlBDXCIsIFwiRW5jaGFudGVyXCIsXG4gIFwiRXZva2VyXCIsIFwiR2xhZGlhdG9yXCIsIFwiR3VhcmRcIiwgXCJJbGx1c2lvbmlzdFwiLCBcIktuaWdodFwiLCBcIktyYWtlbiBQcmllc3RcIiwgXCJNYWdlXCIsXG4gIFwiTWFydGlhbCBBcnRzIEFkZXB0XCIsIFwiTWFzdGVyIFRoaWVmXCIsIFwiTmVjcm9tYW5jZXJcIiwgXCJOb2JsZVwiLCBcIlByaWVzdFwiLCBcIlNjb3V0XCIsIFwiU3B5XCIsXG4gIFwiU3dhc2hidWNrbGVyXCIsIFwiVGh1Z1wiLCBcIlRyYW5zbXV0ZXJcIiwgXCJUcmliYWwgV2FycmlvclwiLCBcIlZldGVyYW5cIiwgXCJXYXIgUHJpZXN0XCIsXG4gIFwiV2FybG9jayBvZiB0aGUgQXJjaGZleVwiLCBcIldhcmxvY2sgb2YgdGhlIEZpZW5kXCIsIFwiV2FybG9jayBvZiB0aGUgR3JlYXQgT2xkIE9uZVwiLCBcIldhcmxvcmRcIlxuXSk7XG5cbmZ1bmN0aW9uIGNhdGVnb3JpemVDcmVhdHVyZSh0eXBlVmFsdWU6IGFueSwgbmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgdCA9IFN0cmluZyh0eXBlVmFsdWUpLnRvTG93ZXJDYXNlKCk7XG4gIGlmICh0ID09PSBcImJlYXN0XCIpIHJldHVybiBcIkJlYXN0c1wiO1xuICBpZiAodCA9PT0gXCJodW1hbm9pZFwiICYmIE5PTl9CRUFTVF9OUENTLmhhcyhuYW1lKSkgcmV0dXJuIFwiTm9uLUJlYXN0c1wiO1xuICBpZiAodCA9PT0gXCJodW1hbm9pZFwiKSByZXR1cm4gXCJNb25zdGVyc1wiO1xuICByZXR1cm4gXCJNb25zdGVyc1wiO1xufVxuXG5mdW5jdGlvbiByZW5kZXJBYmlsaXRpZXNUYWJsZShzdHI6IG51bWJlciwgZGV4OiBudW1iZXIsIGNvbjogbnVtYmVyLCBpbnQ6IG51bWJlciwgd2lzOiBudW1iZXIsIGNoYTogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIFtcbiAgICBgfCBTVFIgfCBERVggfCBDT04gfCBJTlQgfCBXSVMgfCBDSEEgfGAsXG4gICAgYHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHxgLFxuICAgIGB8ICR7c3RyfSB8ICR7ZGV4fSB8ICR7Y29ufSB8ICR7aW50fSB8ICR7d2lzfSB8ICR7Y2hhfSB8YFxuICBdLmpvaW4oXCJcXG5cIik7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBuYW1lID0gZW50cnkubmFtZTtcbiAgbGV0IGRlc2NyaXB0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5lbnRyaWVzO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5lbnRyaWVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmVudHJpZXNdO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZGVzYykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5kZXNjO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5kZXNjID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmRlc2NdO1xuICB9XG4gIGNvbnN0IHJhdyA9IGRlc2NyaXB0aW9ucy5qb2luKFwiIFwiKTtcbiAgY29uc3QgZGVzYyA9IHJlcGxhY2U1ZVRhZ3MocmF3KTtcbiAgcmV0dXJuIGAqKioke25hbWV9LioqKiAke2Rlc2N9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmVzdGlhcnlGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gICAgaWYgKCFqc29uLm1vbnN0ZXIpIHJldHVybiBbXTtcbiAgICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG4gIFxuICAgIC8vIDEpIEZpbHRlciBvdXQgXHUyMDFDcmVmZXJlbmNlXHUyMDFEIGVudHJpZXMgd2l0aCBubyBBQyBvciBIUFxuICAgIGNvbnN0IHZhbGlkTW9uc3RlcnMgPSBqc29uLm1vbnN0ZXIuZmlsdGVyKChtOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGFjVmFsID0gQXJyYXkuaXNBcnJheShtLmFjKSA/IG0uYWNbMF0/LmFjIDogbS5hYztcbiAgICAgIGNvbnN0IGhwVmFsID0gbS5ocD8uYXZlcmFnZSA/PyBtLmhwO1xuICAgICAgcmV0dXJuIGFjVmFsICE9IG51bGwgJiYgaHBWYWwgIT0gbnVsbDtcbiAgICB9KTtcbiAgXG4gICAgcmV0dXJuIHZhbGlkTW9uc3RlcnMubWFwKChtb25zdGVyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgICAgID0gbW9uc3Rlci5uYW1lIGFzIHN0cmluZztcbiAgICAgIGNvbnN0IHNhZmVOYW1lID0gbmFtZS5yZXBsYWNlKC9cXC8vZywgXCItXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBSYXcgZmllbGRzICYgZm9ybWF0dGluZyBcdTIwMTRcbiAgICAgIGNvbnN0IHJhd1NpemUgICAgICA9IG1vbnN0ZXIuc2l6ZSB8fCBcIk1cIjtcbiAgICAgIGNvbnN0IHJhd0FsaWdubWVudCA9IEFycmF5LmlzQXJyYXkobW9uc3Rlci5hbGlnbm1lbnQpXG4gICAgICAgID8gbW9uc3Rlci5hbGlnbm1lbnQuam9pbihcIiBcIilcbiAgICAgICAgOiBtb25zdGVyLmFsaWdubWVudCB8fCBcIk5cIjtcbiAgICAgIGxldCByYXdUeXBlID0gdHlwZW9mIG1vbnN0ZXIudHlwZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICA/IG1vbnN0ZXIudHlwZVxuICAgICAgICA6IG1vbnN0ZXIudHlwZT8ubmFtZSB8fCBtb25zdGVyLnR5cGU/LnR5cGUgfHwgU3RyaW5nKG1vbnN0ZXIudHlwZSk7XG4gICAgICByYXdUeXBlID0gY2FwaXRhbGl6ZUZpcnN0KHJhd1R5cGUpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBBQywgSFAsIENSIFx1MjAxNFxuICAgICAgY29uc3QgYWMgPSBBcnJheS5pc0FycmF5KG1vbnN0ZXIuYWMpID8gbW9uc3Rlci5hY1swXS5hYyA6IG1vbnN0ZXIuYWM7XG4gICAgICBjb25zdCBocCA9IG1vbnN0ZXIuaHA/LmF2ZXJhZ2UgPz8gbW9uc3Rlci5ocDtcbiAgICAgIGNvbnN0IGNyID0gbW9uc3Rlci5jcjtcbiAgXG4gICAgICAvLyBcdTIwMTQgQWJpbGl0aWVzIFx1MjAxNFxuICAgICAgY29uc3QgYWJpbGl0aWVzID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFiaWxpdHkpXG4gICAgICAgID8gbW9uc3Rlci5hYmlsaXR5XG4gICAgICAgIDogW21vbnN0ZXIuc3RyLCBtb25zdGVyLmRleCwgbW9uc3Rlci5jb24sIG1vbnN0ZXIuaW50LCBtb25zdGVyLndpcywgbW9uc3Rlci5jaGFdO1xuICAgICAgY29uc3QgW3N0ciA9IDEwLCBkZXggPSAxMCwgY29uID0gMTAsIGludCA9IDEwLCB3aXMgPSAxMCwgY2hhID0gMTBdID0gYWJpbGl0aWVzO1xuICBcbiAgICAgIC8vIFx1MjAxNCBTcGVlZCAoaGFuZGxlcyBob3ZlciAmIG9iamVjdCBzcGVlZHMpIFx1MjAxNFxuICAgICAgY29uc3Qgc3BlZWRMaXN0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgaWYgKHR5cGVvZiBtb25zdGVyLnNwZWVkID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGZvciAoY29uc3QgW21vZGUsIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMobW9uc3Rlci5zcGVlZCkpIHtcbiAgICAgICAgICBpZiAobW9kZSA9PT0gXCJjYW5Ib3ZlclwiKSBjb250aW51ZTtcbiAgICAgICAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgXCJudW1iZXJcIiBpbiB2YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IG51bSAgPSAodmFsIGFzIGFueSkubnVtYmVyO1xuICAgICAgICAgICAgY29uc3QgY29uZCA9ICh2YWwgYXMgYW55KS5jb25kaXRpb24gPyBgICR7KHZhbCBhcyBhbnkpLmNvbmRpdGlvbn1gIDogXCJcIjtcbiAgICAgICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vZGV9ICR7bnVtfSBmdC4ke2NvbmR9YCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vZGV9ICR7dmFsfSBmdC5gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vbnN0ZXIuc3BlZWR9IGZ0LmApO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3BlZWQgPSBzcGVlZExpc3Quam9pbihcIiwgXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBTZW5zZXMsIFNhdmVzLCBTa2lsbHMsIExhbmd1YWdlcyAoeW91ciBleGlzdGluZyBsb2dpYykgXHUyMDE0XG4gICAgICBjb25zdCBzZW5zZXM6IHN0cmluZ1tdID0gW107XG4gICAgICBpZiAobW9uc3Rlci5zZW5zZXMpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobW9uc3Rlci5zZW5zZXMpKSB7XG4gICAgICAgICAgbW9uc3Rlci5zZW5zZXMuZm9yRWFjaCgoczogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjbGVhbiA9IHMucmVwbGFjZSgvXlxcZCtcXHMqLywgXCJcIik7XG4gICAgICAgICAgICBzZW5zZXMucHVzaChjYXBpdGFsaXplRmlyc3QoY2xlYW4pKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhtb25zdGVyLnNlbnNlcykuZm9yRWFjaCgoW3NlbnNlLCB2YWxdKSA9PiB7XG4gICAgICAgICAgICBzZW5zZXMucHVzaChgJHtjYXBpdGFsaXplRmlyc3Qoc2Vuc2UpfSAke3ZhbH1gKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgc2F2aW5nVGhyb3dzID0gbW9uc3Rlci5zYXZlXG4gICAgICAgID8gT2JqZWN0LmtleXMobW9uc3Rlci5zYXZlKS5tYXAoayA9PiBrLnRvVXBwZXJDYXNlKCkpXG4gICAgICAgIDogW107XG4gICAgICBjb25zdCBza2lsbHMgPSBtb25zdGVyLnNraWxsXG4gICAgICAgID8gT2JqZWN0LmtleXMobW9uc3Rlci5za2lsbCkubWFwKHMgPT4gY2FwaXRhbGl6ZUZpcnN0KHMpKVxuICAgICAgICA6IFtdO1xuICAgICAgY29uc3QgbGFuZ3VhZ2VzID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmxhbmd1YWdlcylcbiAgICAgICAgPyBtb25zdGVyLmxhbmd1YWdlc1xuICAgICAgICA6IG1vbnN0ZXIubGFuZ3VhZ2VzXG4gICAgICAgICAgPyBbbW9uc3Rlci5sYW5ndWFnZXNdXG4gICAgICAgICAgOiBbXTtcbiAgXG4gICAgICAvLyBcdTIwMTQgU291cmNlIHNhbml0aXphdGlvbiBcdTIwMTRcbiAgICAgIGxldCBzb3VyY2UgPSBnZXRGdWxsU291cmNlTmFtZShtb25zdGVyLnNvdXJjZSwgZWRpdGlvbklkKTtcbiAgICAgIHNvdXJjZSAgICAgPSBzb3VyY2UucmVwbGFjZSgvOi9nLCBcIiAtXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBDYXRlZ29yeSBmb3IgZm9sZGVyIFx1MjAxNFxuICAgICAgY29uc3QgY2F0ZWdvcnkgPSBjYXRlZ29yaXplQ3JlYXR1cmUocmF3VHlwZSwgbmFtZSk7XG4gIFxuICAgICAgY29uc3QgZm0gICA9IGJ1aWxkRk0obW9uc3RlciwgQkVTVElBUllfRklFTERfREVGUyk7XG4gICAgICBjb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0pO1xuICBcbiAgICAgIC8vIFx1MjAxNCBCb2R5IFx1MjAxNFxuICAgICAgbGV0IGJvZHkgPSBgIyAke25hbWV9XFxuXFxuJHtmb3JtYXRTaXplQWJicmV2KHJhd1NpemUpfSAke3Jhd1R5cGV9LCAke2Zvcm1hdEFsaWdubWVudEFiYnJldihyYXdBbGlnbm1lbnQpfVxcblxcbmAgK1xuICAgICAgICAgICAgICAgICBgKipBcm1vciBDbGFzcyoqOiAke2FjfVxcbmAgK1xuICAgICAgICAgICAgICAgICBgKipIaXQgUG9pbnRzKio6ICR7aHB9XFxuYCArXG4gICAgICAgICAgICAgICAgIGAqKlNwZWVkKio6ICR7c3BlZWR9XFxuYCArXG4gICAgICAgICAgICAgICAgIChzYXZpbmdUaHJvd3MubGVuZ3RoID8gYCoqU2F2aW5nIFRocm93cyoqOiAke3NhdmluZ1Rocm93cy5qb2luKFwiLCBcIil9XFxuYCA6IFwiXCIpICtcbiAgICAgICAgICAgICAgICAgKHNraWxscy5sZW5ndGggICAgICAgPyBgKipTa2lsbHMqKjogJHtza2lsbHMuam9pbihcIiwgXCIpfVxcbmAgICAgICAgOiBcIlwiKSArXG4gICAgICAgICAgICAgICAgIChzZW5zZXMubGVuZ3RoICAgICAgID8gYCoqU2Vuc2VzKio6ICR7c2Vuc2VzLmpvaW4oXCIsIFwiKX1cXG5gICAgICAgIDogXCJcIikgK1xuICAgICAgICAgICAgICAgICAobGFuZ3VhZ2VzLmxlbmd0aCAgICA/IGAqKkxhbmd1YWdlcyoqOiAke2xhbmd1YWdlcy5qb2luKFwiLCBcIil9XFxuYCAgIDogXCJcIikgK1xuICAgICAgICAgICAgICAgICBgKipDaGFsbGVuZ2UqKjogJHtjcn1cXG5cXG5gICtcbiAgICAgICAgICAgICAgICAgcmVuZGVyQWJpbGl0aWVzVGFibGUoc3RyLCBkZXgsIGNvbiwgaW50LCB3aXMsIGNoYSk7XG4gIFxuICAgICAgaWYgKG1vbnN0ZXIudHJhaXQpICAgICBib2R5ICs9IGBcXG5cXG4jIyMgVHJhaXRzXFxuJHttb25zdGVyLnRyYWl0Lm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICAgICAgaWYgKG1vbnN0ZXIuYWN0aW9uKSAgICBib2R5ICs9IGBcXG5cXG4jIyMgQWN0aW9uc1xcbiR7bW9uc3Rlci5hY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5yZWFjdGlvbikgIGJvZHkgKz0gYFxcblxcbiMjIyBSZWFjdGlvbnNcXG4ke21vbnN0ZXIucmVhY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5sZWdlbmRhcnkpIGJvZHkgKz0gYFxcblxcbiMjIyBMZWdlbmRhcnkgQWN0aW9uc1xcbiR7bW9uc3Rlci5sZWdlbmRhcnkubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gIFxuICAgICAgY29uc3QgY29udGVudCA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtib2R5fWA7XG4gIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDogICAgYCR7Y2F0ZWdvcnl9LyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudCxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiAgIiwgImltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gICAgIGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vaGVscGVycy9zb3VyY2VNYXBcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBJVEVNX0ZJRUxEX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cblxuLyoqIEhlbHBlciB0byBjYXBpdGFsaXplIGZpcnN0IGxldHRlciAqL1xuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0KHM6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKiogTm9ybWFsaXplIGNwL3NwL2dwIHN0cmluZ3MgaW50byBhIEdQIG51bWJlciAqL1xuZnVuY3Rpb24gbm9ybWFsaXplUHJpY2UocDogc3RyaW5nIHwgbnVtYmVyID0gXCJcIik6IG51bWJlciB7XG4gIGNvbnN0IHN0ciA9IFN0cmluZyhwKS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgaWYgKHN0ci5lbmRzV2l0aChcImNwXCIpKSByZXR1cm4gcGFyc2VGbG9hdChzdHIpIC8gMTAwO1xuICBpZiAoc3RyLmVuZHNXaXRoKFwic3BcIikpIHJldHVybiBwYXJzZUZsb2F0KHN0cikgLyAxMDtcbiAgaWYgKHN0ci5lbmRzV2l0aChcImdwXCIpKSByZXR1cm4gcGFyc2VGbG9hdChzdHIpO1xuICByZXR1cm4gcGFyc2VGbG9hdChzdHIpIHx8IDA7XG59XG5cbmV4cG9ydCBjb25zdCBEQU1BR0VfVFlQRV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgUDogXCJQaWVyY2luZ1wiLFxuICBCOiBcIkJsdWRnZW9uaW5nXCIsXG4gIFM6IFwiU2xhc2hpbmdcIixcbiAgTjogXCJOZWNyb3RpY1wiLFxuICBSOiBcIlJhZGlhbnRcIixcbiAgRjogXCJGaXJlXCIsXG4gIEM6IFwiQ29sZFwiLFxuICBMOiBcIkxpZ2h0bmluZ1wiLFxuICBUOiBcIlRodW5kZXJcIixcbiAgQTogXCJBY2lkXCIsXG4gIEg6IFwiSGVhbGluZ1wiLFxuICBVOiBcIkZvcmNlXCIsXG4gIFY6IFwiUHN5Y2hpY1wiLFxufTtcblxuZXhwb3J0IGNvbnN0IFBST1BFUlRZX01BUDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBBOiBcIkFtbXVuaXRpb25cIixcbiAgRjogXCJGaW5lc3NlXCIsXG4gIEg6IFwiSGVhdnlcIixcbiAgTDogXCJMaWdodFwiLFxuICBSOiBcIlJlbG9hZFwiLFxuICBTOiBcIlNwZWNpYWxcIixcbiAgXCIySFwiOiBcIlR3by1IYW5kZWRcIixcbiAgVDogXCJUaHJvd25cIixcbn07XG5cbi8qKiBjb2RlIFx1MjE5MiBmdWxsIGZvbGRlciBwYXRoIHVuZGVyIEl0ZW1zLyAqL1xuY29uc3QgY29kZUZvbGRlck1hcDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBcIkFcIjogICBcIldlYXBvbnMgYW5kIEFybW9yL0FtbXVuaXRpb25cIixcbiAgXCJNXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zXCIsXG4gIFwiUlwiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvUmFuZ2VkIFdlYXBvbnNcIixcbiAgXCJTXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9TaGllbGRzXCIsXG4gIFwiTEFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvTGlnaHQgQXJtb3JcIixcbiAgXCJNQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9NZWRpdW0gQXJtb3JcIixcbiAgXCJIQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9IZWF2eSBBcm1vclwiLFxuICBcIkVYUFwiOiBcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnMvRXhwbG9zaXZlc1wiLFxuXG4gIFwiUkRcIjogIFwiTWFnaWNhbCBJdGVtcy9Sb2RzXCIsXG4gIFwiUkdcIjogIFwiTWFnaWNhbCBJdGVtcy9SaW5nc1wiLFxuICBcIlNDXCI6ICBcIk1hZ2ljYWwgSXRlbXMvU2Nyb2xsc1wiLFxuICBcIlNDRlwiOiBcIk1hZ2ljYWwgSXRlbXMvU3BlbGwgQ2FzdGluZyBGb2N1c1wiLFxuICBcIldEXCI6ICBcIk1hZ2ljYWwgSXRlbXMvV2FuZHNcIixcblxuICBcIiRHXCI6IFwiVmFsdWFibGVzL0dlbXNcIixcbiAgXCJUR1wiOiBcIlZhbHVhYmxlcy9UcmFkZSBHb29kc1wiLFxuXG4gIFwiQVRcIjogIFwiQXJ0aXNhbiBHb29kcy9Ub29sc1wiLFxuICBcIlRcIjogICBcIkFydGlzYW4gR29vZHMvVG9vbHNcIixcbiAgXCJJTlNcIjogXCJBcnRpc2FuIEdvb2RzL0luc3RydW1lbnRzXCIsXG4gIFwiR1NcIjogIFwiQXJ0aXNhbiBHb29kcy9HYW1lc1wiLFxuXG4gIFwiR1wiOiAgIFwiR2VhclwiLFxuICBcIk1OVFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBcIlRBSFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBcIlZFSFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuXG4gIFwiUFwiOiAgIFwiQ29uc3VtYWJsZXNcIixcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUl0ZW1zRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCByYXdJdGVtczogYW55W10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5iYXNlaXRlbSkpIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5iYXNlaXRlbSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24uaXRlbSkpICAgICByYXdJdGVtcy5wdXNoKC4uLmpzb24uaXRlbSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24ub2JqZWN0KSkgICByYXdJdGVtcy5wdXNoKC4uLmpzb24ub2JqZWN0KTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi52ZWhpY2xlKSkgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi52ZWhpY2xlKTtcbiAgaWYgKCFyYXdJdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBiYXNlTmFtZXMgPSBuZXcgU2V0PHN0cmluZz4oXG4gICAgQXJyYXkuaXNBcnJheShqc29uLmJhc2VpdGVtKSA/IGpzb24uYmFzZWl0ZW0ubWFwKChiOiBhbnkpID0+IGIubmFtZSkgOiBbXVxuICApO1xuICBjb25zdCBvdXQ6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgZm9yIChjb25zdCBpdCBvZiByYXdJdGVtcykge1xuICAgIGNvbnN0IG5hbWUgICAgID0gaXQubmFtZSBhcyBzdHJpbmc7XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXC9cXFxcOl0vZywgXCItXCIpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGZvbGRlclxuICAgIGNvbnN0IHJhd0NvZGUgPSAoaXQudHlwZSBhcyBzdHJpbmcgfHwgXCJcIikuc3BsaXQoXCJ8XCIpWzBdO1xuICAgIGxldCBmb2xkZXIgICAgPSBjb2RlRm9sZGVyTWFwW3Jhd0NvZGVdID8/IFwiTWlzY2VsbGFuZW91c1wiO1xuXG4gICAgLy8gVmFyaWFudHNcbiAgICBpZiAoaXQuYm9udXNXZWFwb24pIHtcbiAgICAgIGZvbGRlciA9IGAke2ZvbGRlcn0vVmFyaWFudHNgO1xuICAgIH1cbiAgICAvLyBNYWdpY2FsXG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBpc01hZ2ljID0gISFpdC53b25kcm91cyB8fCAhIWl0LnJlcUF0dHVuZSB8fCAhIWl0LnJlcV9hdHR1bmVcbiAgICAgICAgfHwgU3RyaW5nKGl0LnJhcml0eSkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcIm1hZ2ljXCIpO1xuICAgICAgaWYgKGlzTWFnaWMpIHtcbiAgICAgICAgY29uc3QgWyAsIC4uLnJlc3QgXSA9IGZvbGRlci5zcGxpdChcIi9cIik7XG4gICAgICAgIGZvbGRlciA9IFtcIk1hZ2ljYWwgSXRlbXNcIiwgLi4ucmVzdF0uam9pbihcIi9cIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2VhcG9uIGNhdGVnb3J5IHN1YmZvbGRlclxuICAgIGlmICgoZm9sZGVyLnN0YXJ0c1dpdGgoXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zXCIpIHx8XG4gICAgICAgICBmb2xkZXIuc3RhcnRzV2l0aChcIldlYXBvbnMgYW5kIEFybW9yL1JhbmdlZCBXZWFwb25zXCIpKSAmJiBpdC53ZWFwb25DYXRlZ29yeSkge1xuICAgICAgZm9sZGVyID0gYCR7Zm9sZGVyfS8ke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9YDtcbiAgICB9XG5cbiAgICAvLyBtYWtlIGVkaXRpb25JZCBhdmFpbGFibGUgZm9yIHRoZSBTT1VSQ0UgZmllbGRcbihqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuLy8gYnVpbGQgYSBGcm9udG1hdHRlciBvYmplY3QgZnJvbSB0aGUgSlNPTlxuY29uc3QgZm0gICA9IGJ1aWxkRk0oaXQsIElURU1fRklFTERfREVGUyk7XG5cbi8vIHNlcmlhbGl6ZSBpdCB0byBZQU1MXG5sZXQgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtKTtcblxuLy8gaWYgeW91IHN0aWxsIHdhbnQgcGFja0NvbnRlbnRzLCBhcHBlbmQgaXQgaGVyZTpcbmlmIChBcnJheS5pc0FycmF5KGl0LnBhY2tDb250ZW50cykpIHtcbiAgeWFtbCArPSBcIlxcbnBhY2tDb250ZW50czpcIjtcbiAgZm9yIChjb25zdCBwYyBvZiBpdC5wYWNrQ29udGVudHMpIHtcbiAgICB5YW1sICs9IGBcXG4gIC0gaXRlbTogXCIke3BjLml0ZW19XCJcXG4gICAgcXVhbnRpdHk6ICR7cGMucXVhbnRpdHl9YDtcbiAgfVxufVxuXG4vLyB3cmFwIGl0IGluIHRoZSBZQU1MIGZlbmNlXG5jb25zdCBmcm9udG1hdHRlciA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tYDtcblxuXG4gICAgLy8gQm9keSBsaW5lc1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxpbmVzLnB1c2goYCMgJHtuYW1lfWApO1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG5cbiAgICAvLyBTdWJ0aXRsZVxuICAgIGNvbnN0IHN1YnRpdGxlID0gaXQud2VhcG9uXG4gICAgICA/IGAke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9IFdlYXBvbmBcbiAgICAgIDogaXQuYXJtb3JcbiAgICAgICAgPyBmb2xkZXIuc3BsaXQoXCIvXCIpLnBvcCgpIHx8IFwiQXJtb3JcIlxuICAgICAgICA6IFwiXCI7XG4gICAgaWYgKHN1YnRpdGxlKSBsaW5lcy5wdXNoKGAjIyMgKiR7c3VidGl0bGV9KmApO1xuXG4gICAgLy8gU3RhdHMgbGluZXNcbiAgICBpZiAoaXQud2VhcG9uKSB7XG4gICAgICBsaW5lcy5wdXNoKGAqKkNhdGVnb3J5Kio6ICR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX1gKTtcbiAgICAgIGxpbmVzLnB1c2goYCoqRGFtYWdlKio6ICR7aXQuZG1nMSA/PyBcIlwifSR7aXQuZG1nMiA/IGAgLyAke2l0LmRtZzJ9YCA6IFwiXCJ9YCk7XG4gICAgICBjb25zdCB0eXBlc0JvZHkgPSAoQXJyYXkuaXNBcnJheShpdC5kbWdUeXBlKSA/IGl0LmRtZ1R5cGUgOiBbaXQuZG1nVHlwZV0pXG4gICAgICAgIC5maWx0ZXIoKHQ6IGFueSkgPT4gQm9vbGVhbih0KSlcbiAgICAgICAgLm1hcCgodDogc3RyaW5nKSA9PiBEQU1BR0VfVFlQRV9NQVBbdF0gfHwgdCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkRhbWFnZSBUeXBlKio6ICR7dHlwZXNCb2R5LmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIGxpbmVzLnB1c2goYCoqUmFuZ2UqKjogJHtpdC5yYW5nZSA/PyBcIlx1MjAxNFwifWApO1xuICAgICAgbGluZXMucHVzaChgKipSZWxvYWQqKjogJHtpdC5yZWxvYWQgPz8gXCJcdTIwMTRcIn1gKTtcbiAgICAgIGlmIChpdC5hbW1vVHlwZSkgbGluZXMucHVzaChgKipBbW1vIFR5cGUqKjogJHtpdC5hbW1vVHlwZX1gKTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0LnByb3BlcnR5KSAmJiBpdC5wcm9wZXJ0eS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcHJvcHNCb2R5ID0gaXQucHJvcGVydHkubWFwKChwOiBzdHJpbmcpID0+IFBST1BFUlRZX01BUFtwXSB8fCBwKTtcbiAgICAgICAgbGluZXMucHVzaChgKipQcm9wZXJ0aWVzKio6ICR7cHJvcHNCb2R5LmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGl0LmFybW9yKSB7XG4gICAgICBsaW5lcy5wdXNoKGAqKkFybW9yIENsYXNzKio6ICR7aXQuYWN9YCk7XG4gICAgICBpZiAoaXQuc3RlYWx0aCkgbGluZXMucHVzaChgKipTdGVhbHRoIERpc2FkdmFudGFnZSoqOiB0cnVlYCk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cblxuICAgIC8vIERlc2NyaXB0aW9uIHdpdGggbmVzdGVkIGVudHJpZXNcbiAgICBjb25zdCBkZXNjID0gaXQuZW50cmllcyA/PyBpdC5kZXNjO1xuICAgIGlmIChkZXNjKSB7XG4gICAgICBmb3IgKGNvbnN0IHAgb2YgQXJyYXkuaXNBcnJheShkZXNjKSA/IGRlc2MgOiBbZGVzY10pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXBsYWNlNWVUYWdzKHApLnNwbGl0KFwiXFxuXCIpKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHAgJiYgdHlwZW9mIHAgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSB7XG4gICAgICAgICAgICBsaW5lcy5wb3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChgIyMjIyAke3AubmFtZX1gKTtcbiAgICAgICAgICBjb25zdCBzdWIgPSBBcnJheS5pc0FycmF5KHAuZW50cmllcykgPyBwLmVudHJpZXMgOiBbXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHNwIG9mIHN1Yikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHJlcGxhY2U1ZVRhZ3Moc3ApLnNwbGl0KFwiXFxuXCIpKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBib2R5ID0gbGluZXMuam9pbihcIlxcblwiKTtcblxuICAgIG91dC5wdXNoKHsgcGF0aDogYEl0ZW1zLyR7Zm9sZGVyfS8ke3NhZmVOYW1lfS5tZGAsIGNvbnRlbnQ6IGAke2Zyb250bWF0dGVyfVxcblxcbiR7Ym9keX1gIH0pO1xuICB9XG5cbiAgcmV0dXJuIG91dC5zb3J0KChhLGIpID0+IGEucGF0aC5sb2NhbGVDb21wYXJlKGIucGF0aCkpO1xufSIsICJpbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL3NvdXJjZU1hcFwiO1xuaW1wb3J0IHsgZm9ybWF0U2l6ZUFiYnJldiwgZm9ybWF0QWxpZ25tZW50QWJicmV2IH0gZnJvbSBcIi4uL2Jlc3RpYXJ5XCI7XG5pbXBvcnQgeyBmb3JtYXRSYW5nZSwgZm9ybWF0VGltZSwgZm9ybWF0RHVyYXRpb24sIFNDSE9PTF9NQVAgfSBmcm9tIFwiLi4vc3BlbGxzXCI7XG5pbXBvcnQgeyBQUk9QRVJUWV9NQVAsIERBTUFHRV9UWVBFX01BUCB9IGZyb20gXCIuLi9pdGVtc1wiO1xuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBVbml2ZXJzYWwgZnJvbnRtYXR0ZXIga2V5cyBcdTI1MDBcdTI1MDBcdTI1MDAgIFxuZXhwb3J0IGNvbnN0IEZNX0ZJRUxEUyA9IHtcbiAgQUJJTElUWV9CT05VU0VTOiAgICBcImFiaWxpdHlfYm9udXNlc1wiLFxuICBBQzogICAgICAgICAgICAgICAgIFwiYWNcIixcbiAgQUxJR05NRU5UOiAgICAgICAgICBcImFsaWdubWVudFwiLFxuICBBTU1PX1RZUEU6ICAgICAgICAgIFwiYW1tb1R5cGVcIixcbiAgQVJNT1JfUFJPRklDSUVOQ0lFUzpcImFybW9yLXByb2ZcIixcbiAgQVRUQUNLX1RZUEU6ICAgICAgICBcImF0dGFja190eXBlXCIsXG4gIENBU1RJTkdfVElNRTogICAgICAgXCJjYXN0aW5nX3RpbWVcIixcbiAgQ0hBUklTTUE6ICAgICAgICAgICBcImNoYXJpc21hXCIsXG4gIENIQV9NT0Q6ICAgICAgICAgICAgXCJjaGFfbW9kXCIsXG4gIENPTkNFTlRSQVRJT046ICAgICAgXCJjb25jZW50cmF0aW9uXCIsXG4gIENPTkRJVElPTl9JTU06ICAgICAgXCJjb25kX2ltbXVuaXR5XCIsXG4gIENPTlNUSVRVVElPTjogICAgICAgXCJjb25zdGl0dXRpb25cIixcbiAgQ09OX01PRDogICAgICAgICAgICBcImNvbl9tb2RcIixcbiAgQ09TVDogICAgICAgICAgICAgICBcImNvc3RcIixcbiAgQ1I6ICAgICAgICAgICAgICAgICBcImNyXCIsXG4gIERBTUFHRV9UWVBFOiAgICAgICAgXCJkYW1hZ2VfdHlwZVwiLFxuICBEQU1BR0VfVFlQRVM6ICAgICAgIFwiZGFtYWdlVHlwZXNcIixcbiAgREFNQUdFOiAgICAgICAgICAgICBcImRhbWFnZVwiLFxuICBEQU1BR0VfUkVTOiAgICAgICAgIFwiZG1nX3Jlc2lzdGFuY2VcIixcbiAgREFNQUdFX0lNTTogICAgICAgICBcImRtZ19pbW11bml0eVwiLFxuICBERVhURVJJVFk6ICAgICAgICAgIFwiZGV4dGVyaXR5XCIsXG4gIERFWF9NT0Q6ICAgICAgICAgICAgXCJkZXhfbW9kXCIsXG4gIERVUkFUSU9OOiAgICAgICAgICAgXCJkdXJhdGlvblwiLFxuICBISVRfRElDRTogICAgICAgICAgIFwiaGl0LWRpZVwiLFxuICBIUDogICAgICAgICAgICAgICAgIFwiaHBcIixcbiAgSU5URUxMSUdFTkNFOiAgICAgICBcImludGVsbGlnZW5jZVwiLFxuICBJTlRfTU9EOiAgICAgICAgICAgIFwiaW50X21vZFwiLFxuICBMQU5HVUFHRVM6ICAgICAgICAgIFwibGFuZ3VhZ2VzXCIsXG4gIExFVkVMOiAgICAgICAgICAgICAgXCJsZXZlbFwiLFxuICBNQUdJQ0FMOiAgICAgICAgICAgIFwibWFnaWNhbFwiLFxuICBNQVRFUklBTDogICAgICAgICAgIFwibWF0ZXJpYWxcIixcbiAgTkFNRTogICAgICAgICAgICAgICBcIm5hbWVcIixcbiAgUFJPUEVSVElFUzogICAgICAgICBcInByb3BlcnRpZXNcIixcbiAgUkFOR0U6ICAgICAgICAgICAgICBcInJhbmdlXCIsXG4gIFJBUklUWTogICAgICAgICAgICAgXCJyYXJpdHlcIixcbiAgUkVMT0FEOiAgICAgICAgICAgICBcInJlbG9hZFwiLFxuICBSSVRVQUw6ICAgICAgICAgICAgIFwicml0dWFsXCIsXG4gIFNBVkU6ICAgICAgICAgICAgICAgXCJzYXZlXCIsXG4gIFNBVklOR19USFJPV1M6ICAgICAgXCJzYXZpbmdfdGhyb3dzXCIsXG4gIFNDSE9PTDogICAgICAgICAgICAgXCJzY2hvb2xcIixcbiAgU0VOU0VTOiAgICAgICAgICAgICBcInNlbnNlc1wiLFxuICBTSVpFOiAgICAgICAgICAgICAgIFwic2l6ZVwiLFxuICBTS0lMTFM6ICAgICAgICAgICAgIFwic2tpbGxzXCIsXG4gIFNPTUFUSUM6ICAgICAgICAgICAgXCJzb21hdGljXCIsXG4gIFNPVVJDRTogICAgICAgICAgICAgXCJzb3VyY2VcIixcbiAgU1BFQ0lFUzogICAgICAgICAgICBcInNwZWNpZXNcIixcbiAgU1BFRUQ6ICAgICAgICAgICAgICBcInNwZWVkXCIsXG4gIFNURUFMVEhfRElTQURWQU5UQUdFOiBcInN0ZWFsdGhEaXNhZHZhbnRhZ2VcIixcbiAgU1RSRU5HVEg6ICAgICAgICAgICBcInN0cmVuZ3RoXCIsXG4gIFNUUl9NT0Q6ICAgICAgICAgICAgXCJzdHJfbW9kXCIsXG4gIFNVQlJBQ0VTOiAgICAgICAgICAgXCJzdWJyYWNlc1wiLFxuICBUT09MX1BST0ZJQ0lFTkNJRVM6IFwidG9vbC1wcm9mXCIsXG4gIFRSQUlUUzogICAgICAgICAgICAgXCJ0cmFpdHNcIixcbiAgVFlQRTogICAgICAgICAgICAgICBcInR5cGVcIixcbiAgVkFSSUFOVDogICAgICAgICAgICBcInZhcmlhbnRcIixcbiAgVkVSQkFMOiAgICAgICAgICAgICBcInZlcmJhbFwiLFxuICBXRUFQT05fQ0FURUdPUlk6ICAgIFwid2VhcG9uQ2F0ZWdvcnlcIixcbiAgV0VBUE9OX1BST0ZJQ0lFTkNJRVM6IFwid2VhcG9uLXByb2ZcIixcbiAgV0VJR0hUOiAgICAgICAgICAgICBcIndlaWdodFwiLFxuICBXSVNET006ICAgICAgICAgICAgIFwid2lzZG9tXCIsXG4gIFdJU19NT0Q6ICAgICAgICAgICAgXCJ3aXNfbW9kXCIsXG4gIC8vIHNpemUsIHNwZWVkLCBsYW5ndWFnZXMgYWxyZWFkeSBhYm92ZVxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgRk1LZXkgPSBrZXlvZiB0eXBlb2YgRk1fRklFTERTO1xuZXhwb3J0IHR5cGUgRnJvbnRtYXR0ZXIgPSBQYXJ0aWFsPFJlY29yZDx0eXBlb2YgRk1fRklFTERTW0ZNS2V5XSwgdW5rbm93bj4+O1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgRGVmaW5pdGlvbiBvZiBhIHNpbmdsZSBmaWVsZCBtYXBwaW5nIFx1MjUwMFx1MjUwMFx1MjUwMCAgXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkRGVmIHtcbiAgLyoqIFdoaWNoIGNhbGxcdTIwMTBzaWduIChrZXkgaW4gRk1fRklFTERTKSAqL1xuICBjYWxsU2lnbjogRk1LZXk7XG4gIC8qKiBXaGljaCBKU09OIHByb3BlcnR5IHRvIHJlYWQgKi9cbiAganNvbktleTogIHN0cmluZztcbiAgLyoqIE9wdGlvbmFsIHRyYW5zZm9ybWVyOiByYXcgSlNPTiBcdTIxOTIgZmluYWwgdmFsdWUgKi9cbiAgY29udj86ICAgIChyYXc6IGFueSwgYWxsSnNvbj86IGFueSkgPT4gdW5rbm93bjtcbn1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEdlbmVyaWMgYnVpbGRlcnMgXHUyNTAwXHUyNTAwXHUyNTAwICBcbmV4cG9ydCBmdW5jdGlvbiBidWlsZEZNKGpzb246IGFueSwgZGVmczogRmllbGREZWZbXSk6IEZyb250bWF0dGVyIHtcbiAgY29uc3QgZm06IEZyb250bWF0dGVyID0ge307XG4gIGZvciAoY29uc3QgeyBjYWxsU2lnbiwganNvbktleSwgY29udiB9IG9mIGRlZnMpIHtcbiAgICBpZiAoanNvbltqc29uS2V5XSA9PSBudWxsKSBjb250aW51ZTtcbiAgICBjb25zdCByYXcgPSBqc29uW2pzb25LZXldO1xuICAgIGNvbnN0IHZhbCA9IGNvbnYgPyBjb252KHJhdywganNvbikgOiByYXc7XG4gICAgZm1bRk1fRklFTERTW2NhbGxTaWduXV0gPSB2YWw7XG4gIH1cbiAgcmV0dXJuIGZtO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FwKHN0cjogYW55KTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09IFwic3RyaW5nXCIpIHJldHVybiBcIlwiO1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVGcm9udG1hdHRlcihmbTogRnJvbnRtYXR0ZXIpOiBzdHJpbmcge1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMoZm0pXG4gICAgLm1hcCgoW2ssIHZdKSA9PiB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2KSkge1xuICAgICAgICByZXR1cm4gYCR7a306XFxuJHt2Lm1hcChpID0+IGAgIC0gJHtpfWApLmpvaW4oXCJcXG5cIil9YDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gYCR7a306IFwiJHt2fVwiYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtrfTogJHt2fWA7XG4gICAgfSlcbiAgICAuam9pbihcIlxcblwiKTtcbn1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWxscyBGaWVsZERlZnMgXHUyNTAwXHUyNTAwXHUyNTAwICBcbmV4cG9ydCBjb25zdCBTUEVMTF9GSUVMRF9ERUZTOiBGaWVsZERlZltdID0gW1xuICB7IGNhbGxTaWduOiBcIk5BTUVcIiwgICAgICAgICAganNvbktleTogXCJuYW1lXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJMRVZFTFwiLCAgICAgICAgIGpzb25LZXk6IFwibGV2ZWxcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNDSE9PTFwiLCAgICAgICAganNvbktleTogXCJzY2hvb2xcIiwgICBcbiAgICBjb252OiBzID0+IFNDSE9PTF9NQVBbc10gPz8gcyBcbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJDQVNUSU5HX1RJTUVcIiwgIGpzb25LZXk6IFwidGltZVwiLCAgICAgY29udjogZm9ybWF0VGltZSB9LFxuICB7IGNhbGxTaWduOiBcIlJBTkdFXCIsICAgICAgICAganNvbktleTogXCJyYW5nZVwiLCAgICBjb252OiBmb3JtYXRSYW5nZSB9LFxuICB7IGNhbGxTaWduOiBcIkRVUkFUSU9OXCIsICAgICAganNvbktleTogXCJkdXJhdGlvblwiLCBjb252OiBmb3JtYXREdXJhdGlvbiB9LFxuICB7IGNhbGxTaWduOiBcIlZFUkJBTFwiLCAgICAgICAganNvbktleTogXCJjb21wb25lbnRzXCIsIGNvbnY6IChjOmFueSkgPT4gISFjLnYgfSxcbiAgeyBjYWxsU2lnbjogXCJTT01BVElDXCIsICAgICAgIGpzb25LZXk6IFwiY29tcG9uZW50c1wiLCBjb252OiAoYzphbnkpID0+ICEhYy5zIH0sXG4gIHsgY2FsbFNpZ246IFwiTUFURVJJQUxcIiwgICAgICBqc29uS2V5OiBcImNvbXBvbmVudHNcIiwgY29udjogKGM6YW55KSA9PiAhIWMubSB9LFxuICB7IGNhbGxTaWduOiBcIkFUVEFDS19UWVBFXCIsICAganNvbktleTogXCJhdHRhY2tUeXBlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfVFlQRVwiLCAgIGpzb25LZXk6IFwiZGFtYWdlSW5mbGljdFwiLCBcbiAgICBjb252OiBkID0+IEFycmF5LmlzQXJyYXkoZCkgPyBkWzBdIDogZCBcbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJSSVRVQUxcIiwgICAgICAgIGpzb25LZXk6IFwicml0dWFsXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJDT05DRU5UUkFUSU9OXCIsIGpzb25LZXk6IFwiZHVyYXRpb25cIixcbiAgICBjb252OiBkcyA9PiBBcnJheS5pc0FycmF5KGRzKSAmJiBkcy5zb21lKCh4OmFueSk9PiB4LmNvbmNlbnRyYXRpb24pXG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiU0FWRVwiLCAgICAgICAgICBqc29uS2V5OiBcInNhdmVBdHRyXCIgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIlNPVVJDRVwiLCAgICAgICAganNvbktleTogXCJzb3VyY2VcIixcbiAgICBjb252OiAocywgYWxsKSA9PiB7XG4gICAgICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KHMpID8gcyA6IFtzXTtcbiAgICAgIHJldHVybiBhcnIubWFwKHNyYyA9PiBnZXRGdWxsU291cmNlTmFtZShzcmMsIChhbGwgYXMgYW55KS5fZWRpdGlvbklkKSk7XG4gICAgfVxuICB9LFxuXTtcblxuXG5cblxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWNpZXMgRmllbGREZWZzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBleHBvcnQgY29uc3QgU1BFQ0lFU19GSUVMRF9ERUZTOiBGaWVsZERlZltdID0gW1xuICAgIHsgY2FsbFNpZ246IFwiU1BFQ0lFU1wiLCBqc29uS2V5OiBcIm5hbWVcIiB9LFxuICAgIHtcbiAgICAgIGNhbGxTaWduOiBcIlNJWkVcIixcbiAgICAgIGpzb25LZXk6IFwic2l6ZVwiLFxuICAgICAgY29udjogZm9ybWF0U2l6ZUFiYnJldlxuICAgIH0sXG4gICAge1xuICAgICAgY2FsbFNpZ246IFwiU1BFRURcIixcbiAgICAgIGpzb25LZXk6IFwic3BlZWRcIixcbiAgICAgIGNvbnY6IHYgPT4gdHlwZW9mIHYgPT09IFwibnVtYmVyXCIgPyB2IDogKHY/LndhbGsgPz8gdj8uYmFzZSkgfHwgMFxuICAgIH0sXG4gICAge1xuICAgICAgY2FsbFNpZ246IFwiTEFOR1VBR0VTXCIsXG4gICAgICBqc29uS2V5OiBcImxhbmd1YWdlUHJvZmljaWVuY2llc1wiLFxuICAgICAgY29udjogKGFycikgPT4ge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIFtdO1xuICAgICAgICBjb25zdCBvdXQ6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbHAgb2YgYXJyKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBscCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgb3V0LnB1c2goY2FwKGxwKSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbHAgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2xhbmcsIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMobHApKSB7XG4gICAgICAgICAgICAgIGlmICh2YWwgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChjYXAobGFuZykpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4ubmV3IFNldChvdXQpXTtcbiAgICAgIH1cbiAgICB9LCAgICBcbiAgICB7XG4gICAgICBjYWxsU2lnbjogXCJUUkFJVFNcIixcbiAgICAgIGpzb25LZXk6IFwiZW50cmllc1wiLFxuICAgICAgY29udjogZW50cyA9PiB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShlbnRzKSkgcmV0dXJuIFtdO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBlbnRzXG4gICAgICAgICAgICAuZmlsdGVyKChlOiBhbnkpID0+IGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGUubmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIC5tYXAoKGU6IGFueSkgPT4gZS5uYW1lKTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBjYWxsU2lnbjogXCJTRU5TRVNcIixcbiAgICAgIGpzb25LZXk6IFwic2Vuc2VzXCIsXG4gICAgICBjb252OiB2ID0+IEFycmF5LmlzQXJyYXkodikgPyB2IDogdHlwZW9mIHYgPT09IFwic3RyaW5nXCIgPyBbdl0gOiBbXVxuICAgIH0sXG4gICAge1xuICAgICAgY2FsbFNpZ246IFwiU0tJTExTXCIsXG4gICAgICBqc29uS2V5OiBcInNraWxsUHJvZmljaWVuY2llc1wiLFxuICAgICAgY29udjogKGFycikgPT4ge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIFtdO1xuICAgICAgICBjb25zdCBvdXQ6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiBhcnIpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIG91dC5wdXNoKGNhcChzKSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzLm5hbWUgfHwgcy5wcm9maWNpZW5jeSkge1xuICAgICAgICAgICAgb3V0LnB1c2goY2FwKHMubmFtZSB8fCBzLnByb2ZpY2llbmN5KSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbc2tpbGwsIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMocykpIHtcbiAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGNhcChza2lsbCkpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChgQ2hvb3NlICR7dmFsfSBmcm9tICR7Y2FwKHNraWxsKX1gKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gWy4uLm5ldyBTZXQob3V0KV07XG4gICAgICB9XG4gICAgfSwgICAgXG4gICAge1xuICAgICAgY2FsbFNpZ246IFwiVE9PTF9QUk9GSUNJRU5DSUVTXCIsXG4gICAgICBqc29uS2V5OiBcInRvb2xQcm9maWNpZW5jaWVzXCIsXG4gICAgICBjb252OiAoYXJyKSA9PiB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gW107XG4gICAgICAgIGNvbnN0IG91dDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIGFycikge1xuICAgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gXCJzdHJpbmdcIikgb3V0LnB1c2goY2FwKHMpKTtcbiAgICAgICAgICBlbHNlIGlmIChzLm5hbWUgfHwgcy5wcm9maWNpZW5jeSkgb3V0LnB1c2goY2FwKHMubmFtZSB8fCBzLnByb2ZpY2llbmN5KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFsuLi5uZXcgU2V0KG91dCldO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgY2FsbFNpZ246IFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgICAgIGpzb25LZXk6IFwid2VhcG9uUHJvZmljaWVuY2llc1wiLFxuICAgICAgY29udjogKGFycikgPT4ge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIFtdO1xuICAgICAgICBjb25zdCBvdXQ6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiBhcnIpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHMgPT09IFwic3RyaW5nXCIpIG91dC5wdXNoKGNhcChzKSk7XG4gICAgICAgICAgZWxzZSBpZiAocy5uYW1lIHx8IHMucHJvZmljaWVuY3kpIG91dC5wdXNoKGNhcChzLm5hbWUgfHwgcy5wcm9maWNpZW5jeSkpO1xuICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXMocykpIHtcbiAgICAgICAgICAgICAgaWYgKHNba10gPT09IHRydWUpIG91dC5wdXNoKGsuc3BsaXQoXCJ8XCIpWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFsuLi5uZXcgU2V0KG91dCldO1xuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgY2FsbFNpZ246IFwiQVJNT1JfUFJPRklDSUVOQ0lFU1wiLFxuICAgICAganNvbktleTogXCJhcm1vclByb2ZpY2llbmNpZXNcIixcbiAgICAgIGNvbnY6IChhcnIpID0+IHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBbXTtcbiAgICAgICAgY29uc3Qgb3V0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgYXJyKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBzID09PSBcInN0cmluZ1wiKSBvdXQucHVzaChjYXAocykpO1xuICAgICAgICAgIGVsc2UgaWYgKHMubmFtZSB8fCBzLnByb2ZpY2llbmN5KSBvdXQucHVzaChjYXAocy5uYW1lIHx8IHMucHJvZmljaWVuY3kpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gWy4uLm5ldyBTZXQob3V0KV07XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBjYWxsU2lnbjogXCJEQU1BR0VfUkVTXCIsXG4gICAgICBqc29uS2V5OiBcInJlc2lzdFwiLFxuICAgICAgY29udjogKHYpID0+IEFycmF5LmlzQXJyYXkodikgPyB2Lm1hcChjYXApIDogW11cbiAgICB9LFxuICAgIHtcbiAgICAgIGNhbGxTaWduOiBcIlNPVVJDRVwiLFxuICAgICAganNvbktleTogXCJzb3VyY2VcIixcbiAgICAgIGNvbnY6IChyYXcsIGFsbCkgPT4ge1xuICAgICAgICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShyYXcsIChhbGwgYXMgYW55KS5fZWRpdGlvbklkKSk7XG4gICAgICAgIGZvciAoY29uc3Qgb3Mgb2YgYWxsLm90aGVyU291cmNlcyA/PyBbXSkge1xuICAgICAgICAgIG91dC5hZGQoZ2V0RnVsbFNvdXJjZU5hbWUob3Muc291cmNlLCAoYWxsIGFzIGFueSkuX2VkaXRpb25JZCkpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgcmVwIG9mIGFsbC5yZXByaW50ZWRBcyA/PyBbXSkge1xuICAgICAgICAgIGNvbnN0IFssIHNyY10gPSAocmVwIGFzIHN0cmluZykuc3BsaXQoXCJ8XCIpO1xuICAgICAgICAgIG91dC5hZGQoZ2V0RnVsbFNvdXJjZU5hbWUoc3JjLCAoYWxsIGFzIGFueSkuX2VkaXRpb25JZCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbLi4ub3V0XTtcbiAgICAgIH1cbiAgICB9LFxuICBdO1xuICBcblxuXG5cblxuXG5cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgSXRlbXMgRmllbGREZWZzIFx1MjUwMFx1MjUwMFx1MjUwMCAgXG5leHBvcnQgY29uc3QgSVRFTV9GSUVMRF9ERUZTOiBGaWVsZERlZltdID0gW1xuICAvLyBCYXNpY1xuICB7IGNhbGxTaWduOiBcIk5BTUVcIiwgICBqc29uS2V5OiBcIm5hbWVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlRZUEVcIiwgICBqc29uS2V5OiBcInR5cGVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlJBUklUWVwiLCBqc29uS2V5OiBcInJhcml0eVwiLFxuICAgIGNvbnY6IHIgPT4ge1xuICAgICAgY29uc3QgcyA9IFN0cmluZyhyfHxcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIHMgJiYgcyAhPT0gXCJub25lXCJcbiAgICAgICAgPyBzWzBdLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJDT1NUXCIsICAganNvbktleTogXCJ2YWx1ZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiV0VJR0hUXCIsIGpzb25LZXk6IFwid2VpZ2h0XCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTT1VSQ0VcIiwganNvbktleTogXCJzb3VyY2VcIixcbiAgICBjb252OiBzID0+IEFycmF5LmlzQXJyYXkocykgPyBzIDogW3NdXG4gIH0sXG4gIC8vIEZsYWdzXG4gIHsgY2FsbFNpZ246IFwiTUFHSUNBTFwiLCBqc29uS2V5OiBcIndvbmRyb3VzXCIsXG4gICAgY29udjogKF93LCBhbGwpID0+ICEhYWxsLndvbmRyb3VzIHx8ICEhYWxsLnJlcUF0dHVuZVxuICB9LFxuICB7IGNhbGxTaWduOiBcIlZBUklBTlRcIiwganNvbktleTogXCJib251c1dlYXBvblwiLFxuICAgIGNvbnY6IGIgPT4gdHlwZW9mIGI9PT1cInN0cmluZ1wiICYmIGIuc3RhcnRzV2l0aChcIitcIilcbiAgfSxcbiAgLy8gV2VhcG9uXG4gIHsgY2FsbFNpZ246IFwiV0VBUE9OX0NBVEVHT1JZXCIsIGpzb25LZXk6IFwid2VhcG9uQ2F0ZWdvcnlcIiB9LFxuICB7IGNhbGxTaWduOiBcIlBST1BFUlRJRVNcIiwgICAgICBqc29uS2V5OiBcInByb3BlcnR5XCIsXG4gICAgY29udjogYXJyID0+IEFycmF5LmlzQXJyYXkoYXJyKSA/IGFyci5tYXAocD0+UFJPUEVSVFlfTUFQW3BdfHxwKSA6IFtdXG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFXCIsICAgICAgICAgICBqc29uS2V5OiBcImRtZzFcIixcbiAgICBjb252OiAoZCwgYWxsKSA9PiB7XG4gICAgICBpZiAoIWQpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gYWxsLmRtZzIgPyBgJHtkfSAvICR7YWxsLmRtZzJ9YCA6IGAke2R9YDtcbiAgICB9XG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFX1RZUEVTXCIsICAgICBqc29uS2V5OiBcImRtZ1R5cGVcIixcbiAgICBjb252OiBkdCA9PiBkdCA9PSBudWxsXG4gICAgICA/IFtdXG4gICAgICA6IEFycmF5LmlzQXJyYXkoZHQpXG4gICAgICAgID8gZHRcbiAgICAgICAgOiBbZHRdXG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiUkFOR0VcIiwgICAgICAgICAgICBqc29uS2V5OiBcInJhbmdlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJSRUxPQURcIiwgICAgICAgICAgIGpzb25LZXk6IFwicmVsb2FkXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJBTU1PX1RZUEVcIiwgICAgICAgIGpzb25LZXk6IFwiYW1tb1R5cGVcIiB9LFxuICAvLyBBcm1vclxuICB7IGNhbGxTaWduOiBcIkFDXCIsICAgICAgICAgICAgICAgICAgIGpzb25LZXk6IFwiYWNcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNURUFMVEhfRElTQURWQU5UQUdFXCIsIGpzb25LZXk6IFwic3RlYWx0aFwiIH0sXG5dO1xuXG5cblxuXG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEJlc3RpYXJ5IEZpZWxkRGVmcyBcdTI1MDBcdTI1MDBcdTI1MDAgIFxuZXhwb3J0IGNvbnN0IEJFU1RJQVJZX0ZJRUxEX0RFRlM6IEZpZWxkRGVmW10gPSBbXG4gIC8vIElkZW50aXR5XG4gIHsgY2FsbFNpZ246IFwiTkFNRVwiLCAgICAgIGpzb25LZXk6IFwibmFtZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU0laRVwiLCAgICAgIGpzb25LZXk6IFwic2l6ZVwiLCAgICAgIGNvbnY6IGZvcm1hdFNpemVBYmJyZXYgfSxcbiAgeyBjYWxsU2lnbjogXCJUWVBFXCIsICAgICAganNvbktleTogXCJ0eXBlXCIgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkFMSUdOTUVOVFwiLFxuICAgIGpzb25LZXk6ICBcImFsaWdubWVudFwiLFxuICAgIGNvbnY6IChhOiBhbnkpID0+IHtcbiAgICAgIC8vIDEpIGNvbGxhcHNlIGFycmF5cyB0byBhIHNpbmdsZSBzcGFjZS1qb2luZWQgc3RyaW5nXG4gICAgICBjb25zdCByYXcgPSBBcnJheS5pc0FycmF5KGEpXG4gICAgICAgID8gYS5qb2luKFwiIFwiKVxuICAgICAgICA6IHR5cGVvZiBhID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgPyBhXG4gICAgICAgICAgOiBTdHJpbmcoYSk7XG4gICAgICAvLyAyKSBub3cgc2FmZWx5IGNhbGwgeW91ciBmb3JtYXR0aW5nIGhlbHBlclxuICAgICAgcmV0dXJuIGZvcm1hdEFsaWdubWVudEFiYnJldihyYXcpO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJBQ1wiLCAgICAgICAganNvbktleTogXCJhY1wiLCAgICAgICAgY29udjogYSA9PiBBcnJheS5pc0FycmF5KGEpID8gYVswXS5hYyA6IGEgfSxcbiAgeyBjYWxsU2lnbjogXCJIUFwiLCAgICAgICAganNvbktleTogXCJocFwiLCAgICAgICAgY29udjogaHAgPT4gaHA/LmF2ZXJhZ2UgPz8gaHAgfSxcbiAgLy8gTW9iaWxpdHlcbiAgeyBcbiAgICBjYWxsU2lnbjogXCJTUEVFRFwiLCBcbiAgICBqc29uS2V5OiBcInNwZWVkXCIsIFxuICAgIGNvbnY6IHNwID0+IHtcbiAgICAgIGlmIChzcCAmJiB0eXBlb2Ygc3AgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNwKVxuICAgICAgICAgIC5maWx0ZXIoKFtrXSkgPT4gayAhPT0gXCJjYW5Ib3ZlclwiKVxuICAgICAgICAgIC5tYXAoKFtrLCB2XSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbnVtID0gKHYgYXMgYW55KT8ubnVtYmVyID8/IHY7XG4gICAgICAgICAgICByZXR1cm4gYCR7a30gJHtudW19IGZ0LmA7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gW2Ake3NwfSBmdC5gXTtcbiAgICB9XG4gIH0sXG4gIC8vIENoYWxsZW5nZVxuICB7IGNhbGxTaWduOiBcIkNSXCIsICAgICAgICBqc29uS2V5OiBcImNyXCIgfSxcbiAgLy8gQWJpbGl0aWVzXG4gIHsgY2FsbFNpZ246IFwiU1RSRU5HVEhcIiwgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCAgIGNvbnY6IGFyciA9PiBBcnJheS5pc0FycmF5KGFycik/YXJyWzBdOmFycj8uc3RyID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJERVhURVJJVFlcIiwganNvbktleTogXCJhYmlsaXR5XCIsICAgY29udjogYXJyID0+IEFycmF5LmlzQXJyYXkoYXJyKT9hcnJbMV06YXJyPy5kZXggPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIkNPTlNUSVRVVElPTlwiLGpzb25LZXk6XCJhYmlsaXR5XCIsICBjb252OiBhcnIgPT4gQXJyYXkuaXNBcnJheShhcnIpP2FyclsyXTphcnI/LmNvbiA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiSU5URUxMSUdFTkNFXCIsanNvbktleTpcImFiaWxpdHlcIiwgIGNvbnY6IGFyciA9PiBBcnJheS5pc0FycmF5KGFycik/YXJyWzNdOmFycj8uaW50ID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJXSVNET01cIiwgICAganNvbktleTogXCJhYmlsaXR5XCIsICAgY29udjogYXJyID0+IEFycmF5LmlzQXJyYXkoYXJyKT9hcnJbNF06YXJyPy53aXMgPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIkNIQVJJU01BXCIsICBqc29uS2V5OiBcImFiaWxpdHlcIiwgICBjb252OiBhcnIgPT4gQXJyYXkuaXNBcnJheShhcnIpP2Fycls1XTphcnI/LmNoYSA/PyAwIH0sXG4gIC8vIE1pc2NcbiAgeyBjYWxsU2lnbjogXCJTQVZJTkdfVEhST1dTXCIsIGpzb25LZXk6IFwic2F2ZVwiLCAgIGNvbnY6IHMgPT4gcz9PYmplY3Qua2V5cyhzKS5tYXAoaz0+ay50b1VwcGVyQ2FzZSgpKTpbXSB9LFxuICB7IGNhbGxTaWduOiBcIlNLSUxMU1wiLCAgICAgIGpzb25LZXk6IFwic2tpbGxcIiwgICAgY29udjogc2sgPT4gc2s/T2JqZWN0LmtleXMoc2spLm1hcChrPT5rWzBdLnRvVXBwZXJDYXNlKCkray5zbGljZSgxKSk6W10gfSxcbiAgeyBjYWxsU2lnbjogXCJTRU5TRVNcIiwgICAgICBqc29uS2V5OiBcInNlbnNlc1wiLCAgIGNvbnY6IHNlbiA9PiB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzZW4pKSB7XG4gICAgICAgIHJldHVybiBzZW4ubWFwKChzOnN0cmluZyk9PnMucmVwbGFjZSgvXlxcZCtcXHMqLyxcIlwiKS5yZXBsYWNlKC9eLi8sIGM9PmMudG9VcHBlckNhc2UoKSkpO1xuICAgICAgfSBlbHNlIGlmIChzZW4gJiYgdHlwZW9mIHNlbj09PVwib2JqZWN0XCIpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNlbikubWFwKChbayx2XSk9PmAke2suY2hhckF0KDApLnRvVXBwZXJDYXNlKCkray5zbGljZSgxKX0gJHt2fWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJMQU5HVUFHRVNcIiwgIGpzb25LZXk6IFwibGFuZ3VhZ2VzXCIsIGNvbnY6IGxuID0+IEFycmF5LmlzQXJyYXkobG4pP2xuOmxuP1tsbl06W10gfSxcbiAgLy8gU291cmNlXG4gIHsgY2FsbFNpZ246IFwiU09VUkNFXCIsICAgICBqc29uS2V5OiBcInNvdXJjZVwiLCAgIGNvbnY6IChzLCBhbGwpID0+IHtcbiAgICAgIGNvbnN0IGFyciA9IEFycmF5LmlzQXJyYXkocyk/czpbc107XG4gICAgICByZXR1cm4gYXJyLm1hcChzcmM9PmdldEZ1bGxTb3VyY2VOYW1lKHNyYywoYWxsIGFzIGFueSkuX2VkaXRpb25JZCkpO1xuICAgIH1cbiAgfSxcbl07XG5cblxuXG5cbmV4cG9ydCBjb25zdCBDTEFTU19GSUVMRF9ERUZTOiBGaWVsZERlZltdID0gW1xuICB7IGNhbGxTaWduOiBcIk5BTUVcIiwgICAgICAgICAgIGpzb25LZXk6IFwibmFtZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU09VUkNFXCIsICAgICAgICAganNvbktleTogXCJzb3VyY2VcIiB9LFxuICB7IGNhbGxTaWduOiBcIkhJVF9ESUNFXCIsICAgICAgIGpzb25LZXk6IFwiaGRcIiAgICAgICAgfSwgLy8gZS5nLiBcIjFkMTJcIlxuICB7IGNhbGxTaWduOiBcIkFSTU9SX1BST0ZJQ0lFTkNJRVNcIiwgIGpzb25LZXk6IFwiYXJtb3JQcm9mc1wiICB9LFxuICB7IGNhbGxTaWduOiBcIldFQVBPTl9QUk9GSUNJRU5DSUVTXCIsIGpzb25LZXk6IFwid2VhcG9uUHJvZnNcIiB9LFxuICB7IGNhbGxTaWduOiBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLCAgIGpzb25LZXk6IFwidG9vbFByb2ZzXCIgICB9LFxuICB7IGNhbGxTaWduOiBcIlNBVklOR19USFJPV1NcIiwganNvbktleTogXCJzYXZlXCIsICAgY29udjogcyA9PiBzP09iamVjdC5rZXlzKHMpLm1hcChrPT5rLnRvVXBwZXJDYXNlKCkpOltdIH0sXG4gIHsgY2FsbFNpZ246IFwiU0tJTExTXCIsICAgICAgICAgICAgICAganNvbktleTogXCJza2lsbFByb2ZcIiAgIH0sICBcbl07XG5cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBTUEVMTF9GSUVMRF9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuZXhwb3J0IGNvbnN0IFNDSE9PTF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEE6IFwiQWJqdXJhdGlvblwiLFxuICBDOiBcIkNvbmp1cmF0aW9uXCIsXG4gIEQ6IFwiRGl2aW5hdGlvblwiLFxuICBFOiBcIkVuY2hhbnRtZW50XCIsXG4gIFY6IFwiRXZvY2F0aW9uXCIsXG4gIEk6IFwiSWxsdXNpb25cIixcbiAgTjogXCJOZWNyb21hbmN5XCIsXG4gIFQ6IFwiVHJhbnNtdXRhdGlvblwiLFxufTtcblxuZnVuY3Rpb24gb3JkaW5hbChuOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBzdWZmaXggPSAobiA9PT0gMSkgPyBcInN0XCIgOiAobiA9PT0gMikgPyBcIm5kXCIgOiAobiA9PT0gMykgPyBcInJkXCIgOiBcInRoXCI7XG4gIHJldHVybiBgJHtufSR7c3VmZml4fWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRSYW5nZShyYW5nZTogYW55KTogc3RyaW5nIHtcbiAgaWYgKCFyYW5nZSkgcmV0dXJuIFwiXCI7XG5cbiAgaWYgKHR5cGVvZiByYW5nZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHJhbmdlO1xuXG4gIGlmIChyYW5nZS50eXBlID09PSBcInNwZWNpYWxcIikgcmV0dXJuIFwiU3BlY2lhbFwiO1xuICBpZiAocmFuZ2UudHlwZSA9PT0gXCJwb2ludFwiICYmIHJhbmdlLmRpc3RhbmNlKSB7XG4gICAgY29uc3QgZGlzdCA9IHJhbmdlLmRpc3RhbmNlO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwidG91Y2hcIikgcmV0dXJuIFwiVG91Y2hcIjtcbiAgICBpZiAoZGlzdC50eXBlID09PSBcInNlbGZcIikgcmV0dXJuIFwiU2VsZlwiO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwic2lnaHRcIikgcmV0dXJuIFwiU2lnaHRcIjtcbiAgICBpZiAoZGlzdC5hbW91bnQpIHJldHVybiBgJHtkaXN0LmFtb3VudH0gJHtkaXN0LnR5cGV9YDtcbiAgfVxuXG4gIHJldHVybiBcIlZhcmllc1wiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGltZSh0aW1lOiBhbnlbXSk6IHN0cmluZyB7XG4gIGlmICghQXJyYXkuaXNBcnJheSh0aW1lKSkgcmV0dXJuIFwiXCI7XG5cbiAgcmV0dXJuIHRpbWUubWFwKHQgPT4gYCR7dC5udW1iZXJ9ICR7dC51bml0fWApLmpvaW4oXCIsIFwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdER1cmF0aW9uKGR1cmF0aW9uOiBhbnlbXSk6IHN0cmluZyB7XG4gIGlmICghQXJyYXkuaXNBcnJheShkdXJhdGlvbikpIHJldHVybiBcIlwiO1xuXG4gIHJldHVybiBkdXJhdGlvbi5tYXAoZCA9PiB7XG4gICAgaWYgKGQudHlwZSA9PT0gXCJpbnN0YW50XCIpIHJldHVybiBcIkluc3RhbnRhbmVvdXNcIjtcbiAgICBpZiAoZC50eXBlID09PSBcInRpbWVkXCIgJiYgZC5kdXJhdGlvbikge1xuICAgICAgcmV0dXJuIGAke2QuZHVyYXRpb24uYW1vdW50fSAke2QuZHVyYXRpb24udHlwZX0ke2QuY29uY2VudHJhdGlvbiA/IFwiIChjb25jZW50cmF0aW9uKVwiIDogXCJcIn1gO1xuICAgIH1cbiAgICBpZiAoZC50eXBlID09PSBcInBlcm1hbmVudFwiKSByZXR1cm4gXCJQZXJtYW5lbnRcIjtcbiAgICByZXR1cm4gXCJTcGVjaWFsXCI7XG4gIH0pLmpvaW4oXCIsIFwiKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0Q29tcG9uZW50cyhjb21wb25lbnRzOiBhbnkpOiBzdHJpbmcge1xuICBpZiAoIWNvbXBvbmVudHMpIHJldHVybiBcIlwiO1xuXG4gIGNvbnN0IG91dCA9IFtdO1xuICBpZiAoY29tcG9uZW50cy52KSBvdXQucHVzaChcIlZcIik7XG4gIGlmIChjb21wb25lbnRzLnMpIG91dC5wdXNoKFwiU1wiKTtcbiAgaWYgKGNvbXBvbmVudHMubSkgb3V0LnB1c2goXCJNXCIpO1xuXG4gIHJldHVybiBvdXQuam9pbihcIiwgXCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTcGVsbHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGlmICghanNvbi5zcGVsbCkgcmV0dXJuIFtdO1xuXG4gIC8vIG1ha2UgZWRpdGlvbklkIGF2YWlsYWJsZSBmb3Igb3VyIFNPVVJDRSBjb252ZXJ0ZXJcbiAgKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4gIHJldHVybiBqc29uLnNwZWxsLm1hcCgoc3BlbGw6IGFueSkgPT4ge1xuICAgIC8vIFx1MjAxNCBnYXRoZXIgZGF0YSBmb3IgaGVhZGVyL2JvZHkvZm9vdGVyIGFzIGJlZm9yZSBcdTIwMTRcbiAgICBjb25zdCBzb3VyY2VzID0gc3BlbGwuc291cmNlXG4gICAgICA/IEFycmF5LmlzQXJyYXkoc3BlbGwuc291cmNlKSA/IHNwZWxsLnNvdXJjZSA6IFtzcGVsbC5zb3VyY2VdXG4gICAgICA6IFtcInVua25vd25cIl07XG4gICAgY29uc3QgbmFtZSA9IHNwZWxsLm5hbWU7XG4gICAgY29uc3Qgc2Nob29sID0gU0NIT09MX01BUFtzcGVsbC5zY2hvb2xdID8/IHNwZWxsLnNjaG9vbDtcbiAgICBjb25zdCBsZXZlbCA9IHNwZWxsLmxldmVsO1xuICAgIGNvbnN0IHJhbmdlID0gZm9ybWF0UmFuZ2Uoc3BlbGwucmFuZ2UpO1xuICAgIGNvbnN0IGNhc3RpbmdUaW1lID0gZm9ybWF0VGltZShzcGVsbC50aW1lKTtcbiAgICBjb25zdCBkdXJhdGlvbiA9IGZvcm1hdER1cmF0aW9uKHNwZWxsLmR1cmF0aW9uKTtcbiAgICBjb25zdCBmb3JtYXR0ZWRTb3VyY2VzID0gc291cmNlcy5tYXAoKHM6IHN0cmluZykgPT4gZ2V0RnVsbFNvdXJjZU5hbWUocywgZWRpdGlvbklkKSk7XG5cbiAgICBjb25zdCBhdHRhY2tUeXBlID0gc3BlbGwuYXR0YWNrVHlwZSB8fCBcIlwiO1xuICAgIGNvbnN0IGRhbWFnZVR5cGUgPSBzcGVsbC5kYW1hZ2VJbmZsaWN0Py5bMF0gfHwgXCJUZWxlcG9ydGF0aW9uXCI7XG4gICAgY29uc3Qgcml0dWFsID0gc3BlbGwucml0dWFsID09PSB0cnVlO1xuICAgIGNvbnN0IGNvbmNlbnRyYXRpb24gPSBzcGVsbC5kdXJhdGlvbj8uc29tZSgoZDogYW55KSA9PiBkLmNvbmNlbnRyYXRpb24pID8/IGZhbHNlO1xuXG4gICAgLy8gXHUyMDE0IGJ1aWxkIGZyb250bWF0dGVyIHZpYSBvdXIgc2hhcmVkIGhlbHBlcnMgXHUyMDE0XG4gICAgY29uc3QgZm0gICA9IGJ1aWxkRk0oc3BlbGwsIFNQRUxMX0ZJRUxEX0RFRlMpO1xuICAgIGNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSk7XG5cbiAgICAvLyBcdTIwMTQgdGl0bGUvc3VidGl0bGUgYW5kIGJvZHkgbGF5b3V0IFx1MjAxNFxuICAgIGNvbnN0IHNhZmVOYW1lID0gbmFtZS5yZXBsYWNlKC9cXC8vZywgXCItXCIpO1xuICAgIGNvbnN0IHRpdGxlID0gYCMgJHtuYW1lfWA7XG4gICAgY29uc3QgbGV2ZWxMYWJlbCA9XG4gICAgICBsZXZlbCA9PT0gMFxuICAgICAgICA/IGAke3NjaG9vbH0gQ2FudHJpcGBcbiAgICAgICAgOiBgJHtvcmRpbmFsKGxldmVsKX0tbGV2ZWwgJHtzY2hvb2x9IFNwZWxsYDtcbiAgICBjb25zdCBzdWJ0aXRsZSA9IGAjIyMgKiR7bGV2ZWxMYWJlbH0qJHtjb25jZW50cmF0aW9uID8gXCIgKihDb25jZW50cmF0aW9uKSpcIiA6IFwiXCJ9YDtcblxuICAgIGNvbnN0IGhlYWRlckxpbmVzID0gW1xuICAgICAgdGl0bGUsXG4gICAgICBzdWJ0aXRsZSxcbiAgICAgIGAqKkNhc3RpbmcgVGltZToqKiAke2Nhc3RpbmdUaW1lfWAsXG4gICAgICBgKipSYW5nZToqKiAke3JhbmdlfWAsXG4gICAgICBgKipDb21wb25lbnRzOioqICR7Zm9ybWF0Q29tcG9uZW50cyhzcGVsbC5jb21wb25lbnRzKX1gLFxuICAgICAgYCoqRHVyYXRpb246KiogJHtkdXJhdGlvbn1gLFxuICAgIF07XG5cbiAgICBjb25zdCBib2R5TGluZXMgPSBbXG4gICAgICAuLi4oKHNwZWxsLmVudHJpZXMgPz8gW10pLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkpLFxuICAgICAgLi4uKChzcGVsbC5lbnRyaWVzSGlnaGVyTGV2ZWwgPz8gW10pLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkpLFxuICAgIF07XG5cbiAgICBjb25zdCBmb290ZXJMaW5lcyA9IFtcbiAgICAgIGAtLS1gLFxuICAgICAgYCoqU291cmNlOioqICR7Zm9ybWF0dGVkU291cmNlcy5qb2luKFwiLCBcIil9YCxcbiAgICBdO1xuXG4gICAgLy8gXHUyMDE0IGFzc2VtYmxlIHRoZSBub3RlIHdpdGggWUFNTCBmcm9udG1hdHRlciBcdTIwMTRcbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDogYCR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgYC0tLVxcbiR7eWFtbH1cXG4tLS1gLFxuICAgICAgICBoZWFkZXJMaW5lcy5qb2luKFwiXFxuXCIpLFxuICAgICAgICBgYCxcbiAgICAgICAgYm9keUxpbmVzLmpvaW4oXCJcXG5cXG5cIiksXG4gICAgICAgIGBgLFxuICAgICAgICBmb290ZXJMaW5lcy5qb2luKFwiXFxuXCIpLFxuICAgICAgXS5qb2luKFwiXFxuXCIpLFxuICAgIH07XG4gIH0pO1xufVxuXG4iLCAiaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSAgICAgICBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgU1BFQ0lFU19GSUVMRF9ERUZTLCBGTV9GSUVMRFMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7IFxuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuXG5mdW5jdGlvbiBzbHVnKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBuYW1lLnJlcGxhY2UoL1tcXC86XCJdL2csIFwiLVwiKTtcbn1cblxuY29uc3QgU0laRV9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIFQ6IFwiVGlueVwiLFxuICBTOiBcIlNtYWxsXCIsXG4gIE06IFwiTWVkaXVtXCIsXG4gIEw6IFwiTGFyZ2VcIixcbiAgSDogXCJIdWdlXCIsXG4gIEc6IFwiR2FyZ2FudHVhblwiXG59O1xuXG5jb25zdCBCTE9DS0VEX1RSQUlUUyA9IFtcIkFnZVwiLCBcIlNpemVcIiwgXCJMYW5ndWFnZXNcIiwgXCJDcmVhdHVyZSBUeXBlXCIsIFwiU3BlZWRcIl07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNwZWNpZXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShqc29uLnJhY2UpKSByZXR1cm4gW107XG5cbiAgKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4gIGNvbnN0IHJhd1ZhcmlhbnRzID0gKGpzb24ucmFjZSBhcyBhbnlbXSlcbiAgLmZpbHRlcihyID0+XG4gICAgIShcInJlcHJpbnRlZEFzXCIgaW4gcikgJiZcbiAgICAhL1xcKCg/OkthbGFkZXNofFplbmRpa2FyfEFtb25raGV0fElubmlzdHJhZHxJeGFsYW4pXFwpJC8udGVzdChyLm5hbWUpXG4gICk7XG5cbmNvbnN0IGJ5TmFtZSA9IG5ldyBNYXA8c3RyaW5nLCBhbnlbXT4oKTtcbmZvciAoY29uc3QgciBvZiByYXdWYXJpYW50cykge1xuICBjb25zdCBsaXN0ID0gYnlOYW1lLmdldChyLm5hbWUpID8/IFtdO1xuICBsaXN0LnB1c2gocik7XG4gIGJ5TmFtZS5zZXQoci5uYW1lLCBsaXN0KTtcbn1cblxuICBjb25zdCBvdXQ6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG4gIGZvciAoY29uc3QgW25hbWUsIHZhcmlhbnRzXSBvZiBieU5hbWUuZW50cmllcygpKSB7XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBzbHVnKG5hbWUpO1xuICAgIGNvbnN0IHByaW1hcnkgPSB2YXJpYW50cy5yZWR1Y2UoKGJlc3QsIGN1cikgPT5cbiAgICAgICAgT2JqZWN0LmtleXMoY3VyKS5sZW5ndGggPiBPYmplY3Qua2V5cyhiZXN0KS5sZW5ndGggPyBjdXIgOiBiZXN0XG4gICAgICAsIHZhcmlhbnRzWzBdKTtcblxuICAgIGNvbnN0IGZtICAgPSBidWlsZEZNKHByaW1hcnksIFNQRUNJRVNfRklFTERfREVGUyk7XG4gICAgY29uc3Qgc2Vuc2VzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKHByaW1hcnkuZGFya3Zpc2lvbikgc2Vuc2VzLnB1c2goYERhcmt2aXNpb24gJHtwcmltYXJ5LmRhcmt2aXNpb259IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LmJsaW5kc2lnaHQpIHNlbnNlcy5wdXNoKGBCbGluZHNpZ2h0ICR7cHJpbWFyeS5ibGluZHNpZ2h0fSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS50cmVtb3JzZW5zZSkgc2Vuc2VzLnB1c2goYFRyZW1vcnNlbnNlICR7cHJpbWFyeS50cmVtb3JzZW5zZX0gZnQuYCk7XG4gICAgaWYgKHByaW1hcnkudHJ1ZXNpZ2h0KSBzZW5zZXMucHVzaChgVHJ1ZXNpZ2h0ICR7cHJpbWFyeS50cnVlc2lnaHR9IGZ0LmApO1xuICAgIGlmIChzZW5zZXMubGVuZ3RoKSBmbS5zZW5zZXMgPSBzZW5zZXM7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShmbS50cmFpdHMpKSB7XG4gICAgICBmbS50cmFpdHMgPSBmbS50cmFpdHMuZmlsdGVyKHQgPT4gIUJMT0NLRURfVFJBSVRTLmluY2x1ZGVzKHQpKTtcbiAgICB9XG5cbiAgICBjb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0pO1xuXG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGluZXMucHVzaChgIyAke25hbWV9YCk7XG4gICAgbGluZXMucHVzaChgIyMgU3RhdHNgKTtcblxuICAgIGNvbnN0IHNpemUgPSBBcnJheS5pc0FycmF5KHByaW1hcnkuc2l6ZSkgPyBwcmltYXJ5LnNpemUubWFwKChzOiBzdHJpbmcpID0+IFNJWkVfTUFQW3NdIHx8IHMpLmpvaW4oXCIvXCIpIDogU0laRV9NQVBbcHJpbWFyeS5zaXplXSA/PyBwcmltYXJ5LnNpemU7XG4gICAgbGluZXMucHVzaChgKipTaXplOioqICR7c2l6ZX1gKTtcblxuICAgIGNvbnN0IHNwZWVkVmFsID0gdHlwZW9mIHByaW1hcnkuc3BlZWQgPT09IFwibnVtYmVyXCJcbiAgICAgID8gcHJpbWFyeS5zcGVlZFxuICAgICAgOiBwcmltYXJ5LnNwZWVkPy53YWxrID8/IHByaW1hcnkuc3BlZWQ/LmJhc2UgPz8gMDtcbiAgICBsaW5lcy5wdXNoKGAqKlNwZWVkOioqICR7c3BlZWRWYWx9IGZ0LiB3YWxraW5nYCk7XG5cbiAgICBjb25zdCByYXdBYiA9IHByaW1hcnkuYWJpbGl0eTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmF3QWIpKSB7XG4gICAgICAgIGNvbnN0IGJvbnVzZXMgPSB7IHN0cjogMCwgZGV4OiAwLCBjb246IDAsIGludDogMCwgd2lzOiAwLCBjaGE6IDAgfTtcbiAgICAgICAgbGV0IGNob29zZTogYW55ID0gbnVsbDtcblxuICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiByYXdBYikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKG9iaikpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwiY2hvb3NlXCIpIHtcbiAgICAgICAgICAgICAgICBjaG9vc2UgPSB2YWw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJvbnVzZXNba2V5IGFzIGtleW9mIHR5cGVvZiBib251c2VzXSArPSB2YWwgYXMgbnVtYmVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGFydHMgPSBPYmplY3QuZW50cmllcyhib251c2VzKVxuICAgICAgICAgICAgLmZpbHRlcigoWywgdl0pID0+IHYgIT09IDApXG4gICAgICAgICAgICAubWFwKChbaywgdl0pID0+IGAke2sudG9VcHBlckNhc2UoKX0gJHt2ID49IDAgPyBcIitcIiA6IFwiXCJ9JHt2fWApO1xuXG4gICAgICAgIGlmIChjaG9vc2U/LmNvdW50ICYmIGNob29zZT8uZnJvbSkge1xuICAgICAgICAgICAgY29uc3Qgb3B0cyA9IGNob29zZS5mcm9tLm1hcCgoczogc3RyaW5nKSA9PiBzLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgICAgICAgcGFydHMucHVzaChgQ0hPT1NFICR7Y2hvb3NlLmNvdW50fSBmcm9tICR7b3B0cy5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFydHMubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKkFiaWxpdHkgU2NvcmVzOioqICR7cGFydHMuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgICAgIFxuXG4gICAgY29uc3QgbGFuZ3MgPSBmbVsnbGFuZ3VhZ2VzJ107XG4gICAgaWYgKGxhbmdzICYmIEFycmF5LmlzQXJyYXkobGFuZ3MpICYmIGxhbmdzLmxlbmd0aCkge1xuICAgICAgbGluZXMucHVzaChgKipMYW5ndWFnZXM6KiogJHtsYW5ncy5qb2luKCcsICcpfWApO1xuICAgIH1cbiAgICBcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBhZGRJZkFycmF5ID0gKGxhYmVsOiBzdHJpbmcsIGZpZWxkOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGZpZWxkKSAmJiBmaWVsZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgY29uc3Qgb3V0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgICBsZXQgaGFzQ2hvaWNlID0gZmFsc2U7XG4gICAgICAgICAgXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBmaWVsZCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgb3V0LnB1c2gocy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocy5uYW1lIHx8IHMucHJvZmljaWVuY3kpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbCA9IHMubmFtZSB8fCBzLnByb2ZpY2llbmN5O1xuICAgICAgICAgICAgICAgICAgaWYgKHZhbCkgb3V0LnB1c2godmFsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdmFsLnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMuY2hvb3NlPy5mcm9tKSB7XG4gICAgICAgICAgICAgICAgICBoYXNDaG9pY2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgY29uc3QgY291bnQgPSBzLmNob29zZS5jb3VudCB8fCAxO1xuICAgICAgICAgICAgICAgICAgY29uc3QgbGlzdCA9IHMuY2hvb3NlLmZyb20ubWFwKChzOiBzdHJpbmcpID0+IHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpKS5qb2luKFwiLCBcIik7XG4gICAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAqKiR7bGFiZWx9OioqIENob29zZSAke2NvdW50fSBmcm9tOiAke2xpc3R9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChoYXNDaG9pY2UpIG91dC5wdXNoKFwiQ2hvaWNlXCIpO1xuICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgXG5cbiAgICAgICAgY29uc3QgcmF3U2tpbGxzID0gcHJpbWFyeS5za2lsbFByb2ZpY2llbmNpZXM7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJhd1NraWxscykgJiYgcmF3U2tpbGxzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBza2lsbExhYmVsczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHJhd1NraWxscykge1xuICAgICAgICAgICAgaWYgKGVudHJ5Py5jaG9vc2U/LmZyb20pIHtcbiAgICAgICAgICAgIGNvbnN0IGZyb20gPSBlbnRyeS5jaG9vc2UuZnJvbS5tYXAoKHM6IHN0cmluZykgPT4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSkpO1xuICAgICAgICAgICAgc2tpbGxMYWJlbHMucHVzaChgQ2hvb3NlIGZyb206ICR7ZnJvbS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdmFsID0gZW50cnk/LnByb2ZpY2llbmN5IHx8IGVudHJ5Py5uYW1lIHx8IGVudHJ5O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBza2lsbExhYmVscy5wdXNoKHZhbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHZhbC5zbGljZSgxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2tpbGxMYWJlbHMubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKlNraWxsIFByb2ZpY2llbmNpZXM6KiogJHtza2lsbExhYmVscy5qb2luKFwiOyBcIil9YCk7XG4gICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgY29uc3QgdG9vbFByb2ZzICAgPSBmbVtGTV9GSUVMRFMuVE9PTF9QUk9GSUNJRU5DSUVTXSAgIGFzIHN0cmluZ1tdIHwgdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCB3ZWFwb25Qcm9mcyA9IGZtW0ZNX0ZJRUxEUy5XRUFQT05fUFJPRklDSUVOQ0lFU10gYXMgc3RyaW5nW10gfCB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGFybW9yUHJvZnMgID0gZm1bRk1fRklFTERTLkFSTU9SX1BST0ZJQ0lFTkNJRVNdICBhcyBzdHJpbmdbXSB8IHVuZGVmaW5lZDsgICAgICAgIFxuICAgICAgICBcbiAgICAgICAgaWYgKHRvb2xQcm9mcz8ubGVuZ3RoKSAgIGxpbmVzLnB1c2goYCoqVG9vbCBQcm9maWNpZW5jaWVzOioqICAgJHt0b29sUHJvZnMuam9pbihcIiwgXCIpfWApO1xuICAgICAgICBpZiAod2VhcG9uUHJvZnM/Lmxlbmd0aCkgbGluZXMucHVzaChgKipXZWFwb24gUHJvZmljaWVuY2llczoqKiAke3dlYXBvblByb2ZzLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgaWYgKGFybW9yUHJvZnM/Lmxlbmd0aCkgIGxpbmVzLnB1c2goYCoqQXJtb3IgUHJvZmljaWVuY2llczoqKiAgJHthcm1vclByb2ZzLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgXG4gICAgICAgICBcblxuICAgICAgICBsaW5lcy5wdXNoKGAjIyBUcmFpdHNgKTtcbiAgICAgICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgICAgICBmb3IgKGNvbnN0IHRyYWl0IG9mIChmbS50cmFpdHMgYXMgc3RyaW5nW10gfHwgW10pKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgIyMjIyMgJHt0cmFpdH1gKTtcbiAgICAgICAgICBjb25zdCBlbnRyeSA9IHByaW1hcnkuZW50cmllcz8uZmluZChcbiAgICAgICAgICAgIChlOiBhbnkpID0+IHR5cGVvZiBlICE9PSBcInN0cmluZ1wiICYmIGUubmFtZSA9PT0gdHJhaXRcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChlbnRyeSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgICAgICA7KGVudHJ5LmVudHJpZXMgYXMgYW55W10pLmZvckVhY2goKHN1YjogYW55LCBpZHg6IG51bWJlcikgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBibG9jazogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICBpZiAoc3ViLnR5cGUgPT09IFwidGFibGVcIikge1xuICAgICAgICAgICAgICAgIGJsb2NrID0gcmVuZGVyTWFya2Rvd25UYWJsZShzdWIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzdWIudHlwZSA9PT0gXCJsaXN0XCIpIHtcbiAgICAgICAgICAgICAgICBibG9jayA9IHN1Yi5pdGVtc1xuICAgICAgICAgICAgICAgICAgLm1hcCgoaXRlbTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGl0XHUyMDE5cyBhIHBsYWluIHN0cmluZywganVzdCByZW5kZXIgaXRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKS50cmltKCl9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBGb3IgYW4gaXRlbVNwZWxsIG9yIHNpbWlsYXIgb2JqZWN0OlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYWJlbCA9IGl0ZW0ubmFtZT8udHJpbSgpID8/IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gaXRlbS5lbnRyeVxuICAgICAgICAgICAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhpdGVtLmVudHJ5KS50cmltKClcbiAgICAgICAgICAgICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYWJlbCB8fCBlbnRyeVxuICAgICAgICAgICAgICAgICAgICAgID8gYC0gJHtsYWJlbH0ke2VudHJ5ID8gXCIgXCIgKyBlbnRyeSA6IFwiXCJ9YFxuICAgICAgICAgICAgICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAuZmlsdGVyKEJvb2xlYW4pIC8vIGRyb3AgYW55IGVtcHR5IGxpbmVzXG4gICAgICAgICAgICAgICAgICAuam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGJsb2NrID0gcmVwbGFjZTVlVGFncyhzdWIpLnRyaW0oKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoYmxvY2sgJiYgIXNlZW4uaGFzKGJsb2NrKSkge1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goYmxvY2spO1xuICAgICAgICAgICAgICAgIHNlZW4uYWRkKGJsb2NrKTtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkuZW50cmllcy5sZW5ndGggPiAxICYmIGlkeCA8IGVudHJ5LmVudHJpZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgIFxuXG4gICAgY29uc3QgYm9keSA9IGxpbmVzLmpvaW4oXCJcXG5cIik7XG4gICAgb3V0LnB1c2goe1xuICAgICAgcGF0aDogICAgYFNwZWNpZXMvJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgY29udGVudDogYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2JvZHl9YFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIG91dC5zb3J0KChhLCBiKSA9PiBhLnBhdGgubG9jYWxlQ29tcGFyZShiLnBhdGgpKTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHtcbiAgYnVpbGRGTSxcbiAgc2VyaWFsaXplRnJvbnRtYXR0ZXIsXG4gIENMQVNTX0ZJRUxEX0RFRlMsXG59IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcblxuXG5mdW5jdGlvbiBmb3JtYXRGZWF0dXJlTGluayhuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGlnbm9yZSA9IFtcIkFiaWxpdHkgU2NvcmUgSW1wcm92ZW1lbnRcIiwgXCJBcmNoZXR5cGUgRmVhdHVyZVwiLCBcIlN1YmNsYXNzIEZlYXR1cmVcIl07XG4gICAgaWYgKGlnbm9yZS5zb21lKHN1YiA9PiBuYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc3ViLnRvTG93ZXJDYXNlKCkpKSkge1xuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuICBcbiAgICBjb25zdCBhbmNob3IgPSBuYW1lXG4gICAgICAucmVwbGFjZSgvW15cXHdcXHNdL2csIFwiXCIpICAgICAgICAgICAvLyByZW1vdmUgcHVuY3R1YXRpb24gKGtlZXAgc3BhY2VzKVxuICAgICAgLnJlcGxhY2UoLy0vZywgXCIgXCIpICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBkYXNoZXNcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKSAgICAgICAgICAgICAgLy8gbm9ybWFsaXplIHdoaXRlc3BhY2VcbiAgICAgIC50cmltKClcbiAgICAgIC5yZXBsYWNlKC9cXGJcXHcvZywgbCA9PiBsLnRvVXBwZXJDYXNlKCkpOyAvLyBjYXBpdGFsaXplIHdvcmRzXG4gIFxuICAgIHJldHVybiBgW1sjJHthbmNob3J9XV1gO1xuICB9XG4gIFxuXG4gIFxuICBmdW5jdGlvbiByZW5kZXJFbnRyaWVzKGVudHJpZXM6IGFueVtdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZW50cmllcy5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGVudHJ5KTtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGlmIChlbnRyeS50eXBlID09PSBcInJlZkNsYXNzRmVhdHVyZVwiKSB7XG4gICAgICAgICAgY29uc3QgW25hbWVdID0gZW50cnkuY2xhc3NGZWF0dXJlLnNwbGl0KFwifFwiKTtcbiAgICAgICAgICByZXR1cm4gYCpTZWUgZmVhdHVyZTogKioke25hbWV9KioqYDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIGVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyB8fCBbXSk7XG4gICAgICAgICAgcmV0dXJuIGAqKiR7ZW50cnkubmFtZX0qKlxcblxcbiR7aW5uZXJ9YDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwiaW5zZXRcIiAmJiBlbnRyeS5uYW1lKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJFbnRyaWVzKGVudHJ5LmVudHJpZXMgfHwgW10pO1xuICAgICAgICAgIHJldHVybiBgPiAqKiR7ZW50cnkubmFtZX0qKlxcbj5cXG4+ICR7aW5uZXIuc3BsaXQoXCJcXG5cIikuam9pbihcIlxcbj4gXCIpfWA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIC8vIGZhbGxiYWNrXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9KS5maWx0ZXIoQm9vbGVhbikuam9pbihcIlxcblwiKTtcbiAgfVxuICBcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNsYXNzRmlsZShcbiAganNvbjogYW55LFxuICBlZGl0aW9uSWQ6IHN0cmluZyxcbiAgZmlsZU5hbWU/OiBzdHJpbmdcbik6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciBmcm9udG1hdHRlclxuICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgLy8gdW53cmFwIHRoZSByZWFsIGNsYXNzIHJlY29yZFxuICBjb25zdCBjbHMgPSBBcnJheS5pc0FycmF5KGpzb24uY2xhc3MpID8ganNvbi5jbGFzc1swXSA6IGpzb247XG4gIC8vIGRlcml2ZSB0aGUgTWFya2Rvd24gZmlsZW5hbWVcbiAgY29uc3QgY2xhc3NOYW1lID1cbiAgICB0eXBlb2YgY2xzLm5hbWUgPT09IFwic3RyaW5nXCJcbiAgICAgID8gY2xzLm5hbWVcbiAgICAgIDogZmlsZU5hbWVcbiAgICAgID8gZmlsZU5hbWUucmVwbGFjZSgvXmNsYXNzLS8sIFwiXCIpLnJlcGxhY2UoL1xcLmpzb24kLywgXCJcIilcbiAgICAgIDogXCJVbmtub3duXCI7XG5cbiAgY29uc3Qgc3ViY2xhc3NGaWxlczogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBjb25zdCBQUk9GX0JPTlVTX0JZX0xFVkVMID0gW1xuICAgIFwiKzJcIiwgXCIrMlwiLCBcIisyXCIsIFwiKzJcIixcbiAgICBcIiszXCIsIFwiKzNcIiwgXCIrM1wiLCBcIiszXCIsXG4gICAgXCIrNFwiLCBcIis0XCIsIFwiKzRcIiwgXCIrNFwiLFxuICAgIFwiKzVcIiwgXCIrNVwiLCBcIis1XCIsIFwiKzVcIixcbiAgICBcIis2XCIsIFwiKzZcIiwgXCIrNlwiLCBcIis2XCJcbiAgXTtcbiAgXG4gIC8vIG5vcm1hbGl6ZSBoaXRcdTIwMTBkaWNlXG4gIGNvbnN0IGhkTnVtICAgPSBjbHMuaGQ/Lm51bWJlciA/PyAxO1xuICBjb25zdCBoZEZhY2VzID0gY2xzLmhkPy5mYWNlcyAgPz8gNjtcbiAgY29uc3QgaGRTdHIgICA9IGAke2hkTnVtfWQke2hkRmFjZXN9YDtcbiAgY29uc3QgaGRNYXggICA9IGhkTnVtICogaGRGYWNlcztcbiAgY29uc3QgaGRBdmcgICA9IE1hdGguY2VpbCgoaGRGYWNlcyArIDEpIC8gMik7XG5cbiAgLy8gYnVpbGQgJiBvdmVycmlkZSBmcm9udG1hdHRlclxuICBjb25zdCBiYXNlRk0gPSBidWlsZEZNKGNscywgQ0xBU1NfRklFTERfREVGUyk7XG4gIGNvbnN0IGZtICAgICA9IHsgLi4uYmFzZUZNLCBoZDogaGRTdHIgfTtcbiAgY29uc3QgeWFtbCAgID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0pO1xuXG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBUaXRsZSAmIFNvdXJjZSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgbGluZXMucHVzaChgIyAke2NsYXNzTmFtZX1gKTtcbiAgaWYgKGNscy5zb3VyY2UpIGxpbmVzLnB1c2goYCoqU291cmNlOioqICR7Y2xzLnNvdXJjZX1gKTtcbiAgbGluZXMucHVzaChgYCk7XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEhpdCBQb2ludHMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGxpbmVzLnB1c2goYCMjIEhpdCBQb2ludHNgKTtcbiAgbGluZXMucHVzaChgKipIaXQgRGljZToqKiAke2hkU3RyfSBwZXIgJHtjbGFzc05hbWV9IGxldmVsYCk7XG4gIGxpbmVzLnB1c2goYCoqSGl0IFBvaW50cyBhdCAxc3QgTGV2ZWw6KiogJHtoZE1heH0gKyB5b3VyIENvbnN0aXR1dGlvbiBtb2RpZmllcmApO1xuICBsaW5lcy5wdXNoKFxuICAgIGAqKkhpdCBQb2ludHMgYXQgSGlnaGVyIExldmVsczoqKiAke2hkU3RyfSAob3IgJHtoZEF2Z30pICsgeW91ciBDb25zdGl0dXRpb24gbW9kaWZpZXIgcGVyIGxldmVsIGFmdGVyIDFzdGBcbiAgKTtcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgbGluZXMucHVzaChgXFxuIyMjIFByb2ZpY2llbmNpZXNgKTtcbiAgY29uc3Qgc3AgPSBjbHMuc3RhcnRpbmdQcm9maWNpZW5jaWVzID8/IHt9O1xuICBpZiAoQXJyYXkuaXNBcnJheShzcC5hcm1vcikgICAmJiBzcC5hcm1vci5sZW5ndGgpICAgbGluZXMucHVzaChgKipBcm1vcjoqKiAke3NwLmFybW9yLmpvaW4oXCIsIFwiKX1gKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoc3Aud2VhcG9ucykgJiYgc3Aud2VhcG9ucy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqV2VhcG9uczoqKiAke3NwLndlYXBvbnMuam9pbihcIiwgXCIpfWApO1xuICBpZiAoQXJyYXkuaXNBcnJheShzcC50b29scykgICAmJiBzcC50b29scy5sZW5ndGgpICAgbGluZXMucHVzaChgKipUb29sczoqKiAke3NwLnRvb2xzLmpvaW4oXCIsIFwiKX1gKTtcblxuICBjb25zdCBzYXZlcyA9IEFycmF5LmlzQXJyYXkoY2xzLnByb2ZpY2llbmN5KVxuICAgID8gY2xzLnByb2ZpY2llbmN5Lm1hcCgoazogc3RyaW5nKSA9PlxuICAgICAgICAoeyBzdHI6IFwiU3RyZW5ndGhcIiwgZGV4OiBcIkRleHRlcml0eVwiLCBjb246IFwiQ29uc3RpdHV0aW9uXCIsXG4gICAgICAgICAgIGludDogXCJJbnRlbGxpZ2VuY2VcIiwgd2lzOiBcIldpc2RvbVwiLCBjaGE6IFwiQ2hhcmlzbWFcIiB9W2tdIHx8IGsudG9VcHBlckNhc2UoKSlcbiAgICAgIClcbiAgICA6IFtdO1xuICBpZiAoc2F2ZXMubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKlNhdmluZyBUaHJvd3M6KiogJHtzYXZlcy5qb2luKFwiLCBcIil9YCk7XG5cbiAgY29uc3Qgc2tpbGxDaG9pY2VzID0gc3Auc2tpbGxzID8/IFtdO1xuICBpZiAoc2tpbGxDaG9pY2VzLmxlbmd0aCkge1xuICAgIGNvbnN0IHNraWxsVGV4dCA9IHNraWxsQ2hvaWNlc1xuICAgICAgLm1hcCgoczogYW55KSA9PlxuICAgICAgICBzLmNob29zZVxuICAgICAgICAgID8gYENob29zZSAke3MuY2hvb3NlLmNvdW50fSBmcm9tOiAkeyAocy5jaG9vc2UuZnJvbSBhcyBzdHJpbmdbXSkubWFwKG8gPT4gby5yZXBsYWNlKC8oW0EtWl0pL2csIFwiICQxXCIpLnRyaW0oKSkuam9pbihcIiwgXCIpIH1gXG4gICAgICAgICAgOiBzLm5hbWUgPz8gc1xuICAgICAgKVxuICAgICAgLmpvaW4oXCI7IFwiKTtcbiAgICBsaW5lcy5wdXNoKGAqKlNraWxsczoqKiAke3NraWxsVGV4dH1gKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBFcXVpcG1lbnQgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGlmIChBcnJheS5pc0FycmF5KGNscy5zdGFydGluZ0VxdWlwbWVudCkpIHtcbiAgICBsaW5lcy5wdXNoKGBcXG4jIyMgRXF1aXBtZW50YCk7XG4gICAgY2xzLnN0YXJ0aW5nRXF1aXBtZW50XG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IHR5cGVvZiBlID09PSBcInN0cmluZ1wiKVxuICAgICAgLmZvckVhY2goKGl0ZW06IHN0cmluZykgPT4gbGluZXMucHVzaChgLSAke2l0ZW19YCkpO1xuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENsYXNzIFByb2dyZXNzaW9uIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgcHJvZ0dyb3VwcyA9IGNscy5jbGFzc1RhYmxlR3JvdXBzID8/IFtdO1xuY29uc3QgbWF4TGV2ZWwgPSAyMDtcblxubGluZXMucHVzaChgXFxuIyMgQ2xhc3MgUHJvZ3Jlc3Npb25gKTtcblxuaWYgKCFwcm9nR3JvdXBzLmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAqKE5vIGNsYXNzIHRhYmxlIHByb3ZpZGVkIGZvciB0aGlzIGNsYXNzLikqYCk7XG59IGVsc2Uge1xuICAvLyBCdWlsZCBsZXZlbCBcdTIxOTIgZmVhdHVyZSBtYXBcbiAgY29uc3QgZmVhdHVyZXNCeUxldmVsOiBSZWNvcmQ8bnVtYmVyLCBzdHJpbmdbXT4gPSB7fTtcbiAgZm9yIChjb25zdCBmZWF0IG9mIGNscy5jbGFzc0ZlYXR1cmVzID8/IFtdKSB7XG4gICAgY29uc3QgcmF3ID0gdHlwZW9mIGZlYXQgPT09IFwib2JqZWN0XCIgJiYgZmVhdC5jbGFzc0ZlYXR1cmUgPyBmZWF0LmNsYXNzRmVhdHVyZSA6IFN0cmluZyhmZWF0KTtcbiAgICBjb25zdCBbbmFtZSwsICxsdmxTdHJdID0gcmF3LnNwbGl0KFwifFwiKTtcbiAgICBjb25zdCBsdmwgPSBOdW1iZXIobHZsU3RyID8/IDApO1xuICAgIGlmICghZmVhdHVyZXNCeUxldmVsW2x2bF0pIGZlYXR1cmVzQnlMZXZlbFtsdmxdID0gW107XG4gICAgZmVhdHVyZXNCeUxldmVsW2x2bF0ucHVzaChuYW1lKTtcbiAgfVxuXG4gIC8vIFVuaWZpZWQgY29sTGFiZWxzIGFjcm9zcyBhbGwgZ3JvdXBzXG4gIGNvbnN0IGFsbExhYmVsc1NldCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBjb25zdCByb3dNYXBzOiBSZWNvcmQ8bnVtYmVyLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiA9IHt9O1xuXG4gIGZvciAoY29uc3QgZ3JvdXAgb2YgcHJvZ0dyb3Vwcykge1xuICAgIGNvbnN0IGxhYmVscyA9IEFycmF5LmlzQXJyYXkoZ3JvdXAuY29sTGFiZWxzKVxuICAgICAgPyBncm91cC5jb2xMYWJlbHMubWFwKChsOiBzdHJpbmcpID0+IHJlcGxhY2U1ZVRhZ3MobCkpXG4gICAgICA6IFtdO1xuICAgIGNvbnN0IHJvd3MgPSBBcnJheS5pc0FycmF5KGdyb3VwLnJvd3MpXG4gICAgICA/IGdyb3VwLnJvd3NcbiAgICAgIDogQXJyYXkuaXNBcnJheShncm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvbilcbiAgICAgICAgPyBncm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvblxuICAgICAgICA6IFtdO1xuXG4gICAgaWYgKCFsYWJlbHMubGVuZ3RoIHx8ICFyb3dzLmxlbmd0aCkgY29udGludWU7XG5cbiAgICBmb3IgKGxldCBsdmwgPSAwOyBsdmwgPCByb3dzLmxlbmd0aDsgbHZsKyspIHtcbiAgICAgIGNvbnN0IGxldmVsTnVtID0gbHZsICsgMTtcbiAgICAgIGlmICghcm93TWFwc1tsZXZlbE51bV0pIHJvd01hcHNbbGV2ZWxOdW1dID0ge307XG4gICAgICBjb25zdCByb3dNYXAgPSByb3dNYXBzW2xldmVsTnVtXTtcblxuICAgICAgY29uc3QgY2VsbHMgPSByb3dzW2x2bF07XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhYmVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBsYWJlbCA9IGxhYmVsc1tpXTtcbiAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzW2ldO1xuXG4gICAgICAgIGFsbExhYmVsc1NldC5hZGQobGFiZWwpO1xuXG4gICAgICAgIGxldCB2YWwgPSBcIlwiO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjZWxsKSkge1xuICAgICAgICAgIHZhbCA9IGNlbGwuam9pbihcIiwgXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjZWxsID09PSBcIm9iamVjdFwiICYmIGNlbGwgIT09IG51bGwgJiYgXCJ2YWx1ZVwiIGluIGNlbGwpIHtcbiAgICAgICAgICB2YWwgPSBTdHJpbmcoY2VsbC52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsID0gU3RyaW5nKGNlbGwgPz8gXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICByb3dNYXBbbGFiZWxdID0gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG5cbiAgLy8gTWVyZ2UgYWxsIGRhdGEgaW50byByb3dzXG4gIGNvbnN0IGFsbExhYmVscyA9IEFycmF5LmZyb20oYWxsTGFiZWxzU2V0KTtcbiAgY29uc3QgbWVyZ2VkTGFiZWxzID0gW1wiTGV2ZWxcIiwgXCJQcm9maWNpZW5jeSBCb251c1wiLCBcIkNsYXNzIEZlYXR1cmVzXCIsIC4uLmFsbExhYmVsc107XG4gIGNvbnN0IG1lcmdlZFJvd3M6IHN0cmluZ1tdW10gPSBbXTtcblxuICBmb3IgKGxldCBsdmwgPSAxOyBsdmwgPD0gbWF4TGV2ZWw7IGx2bCsrKSB7XG4gICAgY29uc3QgZmVhdHVyZUxpc3QgPSAoZmVhdHVyZXNCeUxldmVsW2x2bF0gPz8gW10pLm1hcChmb3JtYXRGZWF0dXJlTGluayk7XG4gICAgY29uc3Qgcm93TWFwID0gcm93TWFwc1tsdmxdID8/IHt9O1xuICAgIGNvbnN0IHJvdzogc3RyaW5nW10gPSBbXG4gICAgICBsdmwudG9TdHJpbmcoKSxcbiAgICAgIFBST0ZfQk9OVVNfQllfTEVWRUxbbHZsIC0gMV0sXG4gICAgICBmZWF0dXJlTGlzdC5qb2luKFwiLCBcIikucmVwbGFjZSgvXFx8L2csIFwiJiMxMjQ7XCIpLFxuICAgICAgLi4uYWxsTGFiZWxzLm1hcChsYWJlbCA9PiByb3dNYXBbbGFiZWxdID8/IFwiXCIpXG4gICAgXTtcbiAgICBtZXJnZWRSb3dzLnB1c2gocm93KTtcbiAgfVxuXG4gIGxpbmVzLnB1c2gocmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgdHlwZTogXCJ0YWJsZVwiLFxuICAgIGNhcHRpb246IFwiXCIsXG4gICAgY29sTGFiZWxzOiBtZXJnZWRMYWJlbHMsXG4gICAgcm93czogbWVyZ2VkUm93cyxcbiAgfSkpO1xufVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTdWJjbGFzc2VzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShqc29uLnN1YmNsYXNzKSA/IGpzb24uc3ViY2xhc3MgOiBbXTtcbiAgXG4gIGNvbnN0IHN1YmNsYXNzRmVhdHVyZXMgPSBBcnJheS5pc0FycmF5KGpzb24uc3ViY2xhc3NGZWF0dXJlKVxuICA/IGpzb24uc3ViY2xhc3NGZWF0dXJlXG4gIDoganNvbi5sb29rdXA/LnN1YmNsYXNzRmVhdHVyZSA/PyBbXTtcblxuICBmb3IgKGNvbnN0IHNjIG9mIHN1YnMpIHtcbiAgICBjb25zdCBzdWJjbGFzc05hbWUgPSBzYy5uYW1lO1xuICAgIGNvbnN0IHN1YkxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgICBjb25zdCBmZWF0dXJlc0J5TGV2ZWw6IFJlY29yZDxudW1iZXIsIGFueVtdPiA9IHt9O1xuICBcbiAgICBjb25zdCBpbnRyb0VudHJ5ID0gc3ViY2xhc3NGZWF0dXJlcy5maW5kKChmOiBhbnkpID0+XG4gICAgICBmLm5hbWUgPT09IHNjLm5hbWUgJiZcbiAgICAgIGYubGV2ZWwgPT09IDMgJiZcbiAgICAgIGYuc3ViY2xhc3NTaG9ydE5hbWUgPT09IHNjLnNob3J0TmFtZSAmJlxuICAgICAgZi5zdWJjbGFzc1NvdXJjZSA9PT0gc2Muc291cmNlXG4gICAgKTtcbiAgICBcbiAgICBpZiAoaW50cm9FbnRyeT8uZW50cmllcz8ubGVuZ3RoKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGludHJvRW50cnkuZW50cmllcykpO1xuICAgIH1cblxuICBmb3IgKGNvbnN0IGZlYXQgb2Ygc3ViY2xhc3NGZWF0dXJlcykge1xuICAgIGlmIChcbiAgICAgIGZlYXQuc3ViY2xhc3NTaG9ydE5hbWUgPT09IHNjLnNob3J0TmFtZSAmJlxuICAgICAgZmVhdC5zdWJjbGFzc1NvdXJjZSA9PT0gc2Muc291cmNlICYmXG4gICAgICBmZWF0LmNsYXNzTmFtZSA9PT0gY2xhc3NOYW1lXG4gICAgKSB7XG4gICAgICBjb25zdCBsdmwgPSBmZWF0LmxldmVsID8/IDA7XG4gICAgICBpZiAoIWZlYXR1cmVzQnlMZXZlbFtsdmxdKSBmZWF0dXJlc0J5TGV2ZWxbbHZsXSA9IFtdO1xuICAgICAgZmVhdHVyZXNCeUxldmVsW2x2bF0ucHVzaChmZWF0KTtcbiAgICB9XG4gIH1cblxuICBzdWJMaW5lcy5wdXNoKGAjICR7c3ViY2xhc3NOYW1lfWApO1xuICBzdWJMaW5lcy5wdXNoKGAqKlBhcmVudCBDbGFzczoqKiBbWyR7Y2xhc3NOYW1lfV1dYCk7XG4gIGlmIChzYy5zb3VyY2UpIHN1YkxpbmVzLnB1c2goYCoqU291cmNlOioqICR7c2Muc291cmNlfWApO1xuICBcblxuICAvLyBTdWJjbGFzcyBwcm9ncmVzc2lvbiB0YWJsZSAob3B0aW9uYWwpXG4gIGNvbnN0IHByb2dHcm91cHMgPSBzYy5zdWJjbGFzc1RhYmxlR3JvdXBzID8/IFtdO1xuICBpZiAocHJvZ0dyb3Vwcy5sZW5ndGgpIHtcbiAgICBjb25zdCBhbGxMYWJlbHNTZXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCByb3dNYXBzOiBSZWNvcmQ8bnVtYmVyLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiA9IHt9O1xuICAgIGZvciAoY29uc3QgZ3JvdXAgb2YgcHJvZ0dyb3Vwcykge1xuICAgICAgY29uc3QgbGFiZWxzID0gKGdyb3VwLmNvbExhYmVscyA/PyBbXSkubWFwKHJlcGxhY2U1ZVRhZ3MpO1xuICAgICAgY29uc3Qgcm93cyA9IGdyb3VwLnJvd3MgPz8gZ3JvdXAucm93c1NwZWxsUHJvZ3Jlc3Npb24gPz8gW107XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByb3cgPSByb3dzW2ldO1xuICAgICAgICBpZiAoIXJvd01hcHNbaSArIDFdKSByb3dNYXBzW2kgKyAxXSA9IHt9O1xuICAgICAgICByb3cuZm9yRWFjaCgoY2VsbDogYW55LCBqOiBudW1iZXIpID0+IHtcbiAgICAgICAgICBjb25zdCBsYWJlbCA9IGxhYmVsc1tqXTtcbiAgICAgICAgICBpZiAoIWxhYmVsKSByZXR1cm47XG4gICAgICAgICAgYWxsTGFiZWxzU2V0LmFkZChsYWJlbCk7XG4gICAgICAgICAgcm93TWFwc1tpICsgMV1bbGFiZWxdID0gdHlwZW9mIGNlbGwgPT09IFwib2JqZWN0XCIgJiYgXCJ2YWx1ZVwiIGluIGNlbGxcbiAgICAgICAgICAgID8gU3RyaW5nKGNlbGwudmFsdWUpXG4gICAgICAgICAgICA6IFN0cmluZyhjZWxsID8/IFwiXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhbGxMYWJlbHMgPSBBcnJheS5mcm9tKGFsbExhYmVsc1NldCk7XG4gICAgY29uc3QgbWVyZ2VkTGFiZWxzID0gW1wiTGV2ZWxcIiwgLi4uYWxsTGFiZWxzXTtcbiAgICBjb25zdCBtZXJnZWRSb3dzOiBzdHJpbmdbXVtdID0gW107XG5cbiAgICBmb3IgKGxldCBsdmwgPSAxOyBsdmwgPD0gMjA7IGx2bCsrKSB7XG4gICAgICBjb25zdCByb3cgPSByb3dNYXBzW2x2bF0gPz8ge307XG4gICAgICBjb25zdCBmaW5hbFJvdyA9IFtTdHJpbmcobHZsKSwgLi4uYWxsTGFiZWxzLm1hcChsYWJlbCA9PiByb3dbbGFiZWxdID8/IFwiXCIpXTtcbiAgICAgIG1lcmdlZFJvd3MucHVzaChmaW5hbFJvdyk7XG4gICAgfVxuXG4gICAgc3ViTGluZXMucHVzaChgIyMgU3ViY2xhc3MgUHJvZ3Jlc3Npb25gKTtcbiAgICBzdWJMaW5lcy5wdXNoKHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgICAgdHlwZTogXCJ0YWJsZVwiLFxuICAgICAgY2FwdGlvbjogXCJcIixcbiAgICAgIGNvbExhYmVsczogbWVyZ2VkTGFiZWxzLFxuICAgICAgcm93czogbWVyZ2VkUm93cyxcbiAgICB9KSk7XG4gICAgXG4gIH1cblxuICAvLyBGZWF0dXJlc1xuICBmb3IgKGNvbnN0IGx2bCBvZiBPYmplY3Qua2V5cyhmZWF0dXJlc0J5TGV2ZWwpLnNvcnQoKGEsIGIpID0+ICthIC0gK2IpKSB7XG4gICAgc3ViTGluZXMucHVzaChgLS0tYCk7XG4gICAgc3ViTGluZXMucHVzaChgIyMgTGV2ZWwgJHtsdmx9YCk7XG4gICAgZm9yIChjb25zdCBmZWF0IG9mIGZlYXR1cmVzQnlMZXZlbFsrbHZsXSkge1xuICAgICAgc3ViTGluZXMucHVzaChgIyMjICR7ZmVhdC5uYW1lfWApO1xuICAgICAgY29uc3QgZGVzYyA9IEFycmF5LmlzQXJyYXkoZmVhdC5lbnRyaWVzKVxuICAgICAgICA/IGZlYXQuZW50cmllcy5tYXAoZm9ybWF0RW50cnkpLmpvaW4oJ1xcblxcbicpXG4gICAgICAgIDogZm9ybWF0RW50cnkoZmVhdC5lbnRyaWVzKTtcbiAgICAgIHN1YkxpbmVzLnB1c2goZGVzYyk7XG4gICAgfVxuICB9XG4gIFxuICBcbiAgbGV0IHN1YmNsYXNzQ29udGVudCA9IHN1YkxpbmVzLmpvaW4oXCJcXG5cXG5cIik7XG5cbiAgLy8gQ2xlYW4gdXAgb25seSAqZXhjZXNzaXZlKiBibGFuayBsaW5lcyAoMysgXHUyMTkyIDIpXG4gIHN1YmNsYXNzQ29udGVudCA9IHN1YmNsYXNzQ29udGVudC5yZXBsYWNlKC9cXG57Myx9L2csICdcXG5cXG4nKTtcbiAgXG4gIHN1YmNsYXNzRmlsZXMucHVzaCh7XG4gICAgcGF0aDogYENsYXNzZXMvJHtjbGFzc05hbWV9L1N1YmNsYXNzZXMvJHtzdWJjbGFzc05hbWV9Lm1kYCxcbiAgICBjb250ZW50OiBzdWJjbGFzc0NvbnRlbnRcbiAgfSk7XG4gIFxuICBcbiAgXG59XG5cbiAgaWYgKHN1YnMubGVuZ3RoKSB7XG4gICAgbGluZXMucHVzaChgXFxuIyMgU3ViY2xhc3Nlc2ApO1xuICAgIGZvciAoY29uc3Qgc2Mgb2Ygc3Vicykge1xuICAgICAgICBsaW5lcy5wdXNoKGAtIFtbU3ViY2xhc3Nlcy8ke3NjLm5hbWUucmVwbGFjZSgvW1xcL1xcXFxdL2csIFwiLVwiKX1dXWApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBmdWxsIGNsYXNzIGZlYXR1cmUgZGVmaW5pdGlvbnNcbmNvbnN0IGFsbEZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShqc29uLmNsYXNzRmVhdHVyZSkgPyBqc29uLmNsYXNzRmVhdHVyZSA6IGpzb24ubG9va3VwPy5jbGFzc0ZlYXR1cmUgPz8gW107XG5jb25zdCBmZWF0dXJlc0J5TGV2ZWw6IFJlY29yZDxudW1iZXIsIGFueVtdPiA9IHt9O1xuXG5mb3IgKGNvbnN0IGVudHJ5IG9mIGFsbEZlYXR1cmVzKSB7XG4gIGlmIChlbnRyeS5jbGFzc05hbWUgIT09IGNsYXNzTmFtZSkgY29udGludWU7XG4gIGNvbnN0IGx2bCA9IGVudHJ5LmxldmVsID8/IDA7XG4gIGlmICghZmVhdHVyZXNCeUxldmVsW2x2bF0pIGZlYXR1cmVzQnlMZXZlbFtsdmxdID0gW107XG4gIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2goZW50cnkpO1xufVxuXG5mb3IgKGNvbnN0IGx2bCBvZiBPYmplY3Qua2V5cyhmZWF0dXJlc0J5TGV2ZWwpLnNvcnQoKGEsIGIpID0+ICthIC0gK2IpKSB7XG4gICAgbGluZXMucHVzaChgIyMgTGV2ZWwgJHtsdmx9YCk7XG4gICAgZm9yIChjb25zdCBmZWF0IG9mIGZlYXR1cmVzQnlMZXZlbFsrbHZsXSkge1xuICAgICAgbGluZXMucHVzaChgIyMjICR7ZmVhdC5uYW1lfWApO1xuICBcbiAgICAgIGNvbnN0IGRlc2MgPSBBcnJheS5pc0FycmF5KGZlYXQuZW50cmllcylcbiAgICAgICAgPyBmZWF0LmVudHJpZXNcbiAgICAgICAgLmZpbHRlcigoZTogYW55KSA9PlxuICAgICAgICAgICAgISh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIiAmJiBlLnRyaW0oKSA9PT0gXCJ9XCIpICYmXG4gICAgICAgICAgICAhKHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIE9iamVjdC5rZXlzKGUpLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICApXG4gICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgLm1hcChyZXBsYWNlNWVUYWdzKVxuICAgICAgICAgICAgLmpvaW4oJ1xcblxcbicpXG4gICAgICAgIDogKHR5cGVvZiBmZWF0LmVudHJpZXMgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhmZWF0LmVudHJpZXMpXG4gICAgICAgICAgICA6IFwiXCIpO1xuICBcbiAgICAgIGlmIChkZXNjLnRyaW0oKSkge1xuICAgICAgICBsaW5lcy5wdXNoKGRlc2MpO1xuICAgICAgfVxuICBcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7IC8vIG9uZSBibGFuayBsaW5lIGFmdGVyIGVhY2ggZmVhdHVyZVxuICAgIH1cbiAgICBsaW5lcy5wdXNoKCctLS0nKTtcbiAgfVxuICBcbiAgXG5cbiAgLy8gc3RpdGNoLCByZXBsYWNlIHRhZ3MsIHJldHVyblxuICBsZXQgY29udGVudCA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtsaW5lcy5qb2luKFwiXFxuXCIpfWA7XG4gIC8vIGNvbW1lbnQgdGhpcyBvdXQgd2hpbGUgZGVidWdnaW5nOlxuICBjb250ZW50ID0gcmVwbGFjZTVlVGFncyhjb250ZW50KTtcblxuICBjb250ZW50ID0gY29udGVudFxuICAucmVwbGFjZSgvXFxuezMsfS9nLCAnXFxuXFxuJykgICAvLyBubyBtb3JlIHRoYW4gMiBuZXdsaW5lcyBpbiBhIHJvd1xuICAucmVwbGFjZSgvXFxuICtcXG4vZywgJ1xcblxcbicpOyAgLy8gdHJpbSBibGFuayBsaW5lcyB3aXRoIHRyYWlsaW5nIHNwYWNlc1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogYENsYXNzZXMvJHtjbGFzc05hbWV9LyR7Y2xhc3NOYW1lfS5tZGAsXG4gICAgICBjb250ZW50LFxuICAgIH0sXG4gICAgLi4uc3ViY2xhc3NGaWxlcyxcbiAgXTtcbiAgXG59XG4iLCAiLy8gc3JjL3BhcnNlcnMvcnVsZXMudHNcbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuXG4vKipcbiAqIFBhcnNlIGFjdGlvbnMuanNvbiBpbnRvIGEgc2luZ2xlIE1hcmtkb3duIG5vdGUgd2l0aCAjIyMgaGVhZGVycyBmb3IgZWFjaCBhY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUFjdGlvbnNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShqc29uLmFjdGlvbikpIHJldHVybiBbXTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBqc29uLmFjdGlvbikge1xuICAgIC8vIEhlYWRlciBmb3IgZWFjaCBhY3Rpb25cbiAgICBsaW5lcy5wdXNoKGAjIyAke2FjdGlvbi5uYW1lfWApO1xuXG4gICAgLy8gUHJvY2VzcyBlYWNoIGVudHJ5LCBwcmVzZXJ2aW5nIHBhcmFncmFwaHNcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShhY3Rpb24uZW50cmllcykgPyBhY3Rpb24uZW50cmllcyA6IFthY3Rpb24uZW50cmllc107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgIGNvbnN0IHRleHQgPSB0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgPyBlbnRyeVxuICAgICAgICA6IEFycmF5LmlzQXJyYXkoZW50cnkpXG4gICAgICAgID8gZW50cnkuam9pbihcIiBcIilcbiAgICAgICAgOiBcIlwiO1xuICAgICAgLy8gU3BsaXQgaW50byBwYXJhZ3JhcGhzIGJ5IGRvdWJsZSBsaW5lIGJyZWFrc1xuICAgICAgY29uc3QgcGFyYWdyYXBocyA9IHRleHQuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgIGZvciAoY29uc3QgcGFyYSBvZiBwYXJhZ3JhcGhzKSB7XG4gICAgICAgIGNvbnN0IHRyaW1tZWQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgaWYgKHRyaW1tZWQpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHJpbW1lZCkpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7IC8vIGJsYW5rIGxpbmUgYWZ0ZXIgcGFyYWdyYXBoXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgb25lIGJsYW5rIGxpbmUgYmV0d2VlbiBhY3Rpb25zXG4gICAgbGluZXMucHVzaChcIlwiKTtcbiAgfVxuXG4gIC8vIENvbGxhcHNlIG11bHRpcGxlIGJsYW5rIGxpbmVzIHRvIGEgc2luZ2xlIGJsYW5rIGxpbmVcbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggPiAwICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHtcbiAgICAgIHJldHVybiBhY2M7IC8vIHNraXAgZXh0cmEgYmxhbmtcbiAgICB9XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9BY3Rpb25zLm1kXCIsXG4gICAgICBjb250ZW50OiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9LFxuICBdO1xufVxuXG4vKipcbiAqIFBhcnNlIGNvbmRpdGlvbnNkaXNlYXNlcy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggZW50cnkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3QgaXRlbXM6IEFycmF5PGFueT4gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5jb25kaXRpb24pKSB7XG4gICAgZm9yIChjb25zdCBjb25kIG9mIGpzb24uY29uZGl0aW9uKSBpdGVtcy5wdXNoKGNvbmQpO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24uZGlzZWFzZSkpIHtcbiAgICBmb3IgKGNvbnN0IGRpcyBvZiBqc29uLmRpc2Vhc2UpIGl0ZW1zLnB1c2goZGlzKTtcbiAgfVxuXG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgIC8vIEhlYWRlciBmb3IgZWFjaCBjb25kaXRpb24gb3IgZGlzZWFzZVxuICAgIGxpbmVzLnB1c2goYCMjICR7aXRlbS5uYW1lfWApO1xuXG4gICAgLy8gUHJvY2VzcyBlYWNoIGVudHJ5LCBwcmVzZXJ2aW5nIHBhcmFncmFwaHNcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShpdGVtLmVudHJpZXMpID8gaXRlbS5lbnRyaWVzIDogW2l0ZW0uZW50cmllc107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgIGNvbnN0IHRleHQgPSB0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgPyBlbnRyeVxuICAgICAgICA6IEFycmF5LmlzQXJyYXkoZW50cnkpXG4gICAgICAgID8gZW50cnkuam9pbihcIiBcIilcbiAgICAgICAgOiBcIlwiO1xuICAgICAgLy8gU3BsaXQgaW50byBwYXJhZ3JhcGhzIGJ5IGRvdWJsZSBsaW5lIGJyZWFrc1xuICAgICAgY29uc3QgcGFyYWdyYXBocyA9IHRleHQuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgIGZvciAoY29uc3QgcGFyYSBvZiBwYXJhZ3JhcGhzKSB7XG4gICAgICAgIGNvbnN0IHRyaW1tZWQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgaWYgKHRyaW1tZWQpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHJpbW1lZCkpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7IC8vIGJsYW5rIGxpbmUgYWZ0ZXIgcGFyYWdyYXBoXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgb25lIGJsYW5rIGxpbmUgYmV0d2VlbiBpdGVtc1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG4gIH1cblxuICAvLyBDb2xsYXBzZSBtdWx0aXBsZSBibGFuayBsaW5lcyB0byBhIHNpbmdsZSBibGFuayBsaW5lXG4gIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoID4gMCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSB7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH1cbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0NvbmRpdGlvbnMgYW5kIERpc2Vhc2VzLm1kXCIsXG4gICAgICBjb250ZW50OiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9LFxuICBdO1xufVxuXG4vLyBUT0RPOiBBZGQgcGFyc2VycyBmb3IgY29uZGl0aW9uc0Rpc2Vhc2VzLmpzb24sIHNlbnNlcy5qc29uLCBza2lsbHMuanNvbiwgdHJhcHNoYXphcmRzLmpzb25cbiIsICIvLyBzcmMvcnVsZXNldEluc3RhbGxlci50c1xuaW1wb3J0IHsgQXBwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBBVkFJTEFCTEVfRURJVElPTlMgfSBmcm9tIFwiLi9lZGl0aW9uc1wiO1xuXG4vLyBTVEFUSUMgaW1wb3J0IG9mIGV2ZXJ5IGluc3RhbGxlciB5b3Ugc2hpcDpcbmltcG9ydCAqIGFzIGZpdmVlSW5zdGFsbGVyIGZyb20gXCIuL3BhcnNlcnMvNWUtanNvbi9pbnN0YWxsZXJcIjtcbi8vIGltcG9ydCAqIGFzIGFub3RoZXJJbnN0YWxsZXIgZnJvbSBcIi4vcGFyc2Vycy9vdGhlci9pbnN0YWxsZXJcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltcG9ydFJ1bGVzZXREYXRhKHBhcmFtczoge1xuICBhcHA6IEFwcDtcbiAgZWRpdGlvbktleTogc3RyaW5nO1xuICB0YXJnZXRQYXRoOiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHsgYXBwLCBlZGl0aW9uS2V5LCB0YXJnZXRQYXRoIH0gPSBwYXJhbXM7XG4gIGNvbnN0IGVkaXRpb24gPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZCgoZSkgPT4gZS5pZCA9PT0gZWRpdGlvbktleSk7XG4gIGlmICghZWRpdGlvbikgcmV0dXJuO1xuICBpZiAoIWVkaXRpb24ucGFyc2VyKSB7XG4gICAgY29uc29sZS53YXJuKFwiTm8gcGFyc2VyIGRlZmluZWQgZm9yOlwiLCBlZGl0aW9uS2V5KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBsZXQgaW5zdGFsbGVyTW9kdWxlOiB7IGltcG9ydEVkaXRpb25EYXRhOiBhbnkgfTtcblxuICBzd2l0Y2ggKGVkaXRpb24ucGFyc2VyKSB7XG4gICAgY2FzZSBcIjVlLWpzb25cIjpcbiAgICAgIGluc3RhbGxlck1vZHVsZSA9IGZpdmVlSW5zdGFsbGVyO1xuICAgICAgYnJlYWs7XG5cbiAgICAvLyBjYXNlIFwib3RoZXItcGFyc2VyXCI6XG4gICAgLy8gICBpbnN0YWxsZXJNb2R1bGUgPSBhbm90aGVySW5zdGFsbGVyO1xuICAgIC8vICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHBhcnNlcjogJHtlZGl0aW9uLnBhcnNlcn1gKTtcbiAgfVxuXG4gIGF3YWl0IGluc3RhbGxlck1vZHVsZS5pbXBvcnRFZGl0aW9uRGF0YSh7IGFwcCwgZWRpdGlvbiwgdGFyZ2V0UGF0aCB9KTtcbn1cbiIsICIvLyBjdXN0b21JbnN0YWxsTW9kYWwudHNcbmltcG9ydCB7IEFwcCwgTW9kYWwsIHNldEljb24sIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY2xhc3MgSW5zdGFsbGluZ01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgIHN1cGVyKGFwcCk7XG4gIH1cbiAgb25PcGVuKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgdGhpcy5jb250ZW50RWxcbiAgICAgIC5jcmVhdGVEaXYoeyB0ZXh0OiAnSW5zdGFsbGluZ1x1MjAyNicsIGNsczogJ21vZC1xdWlldCcgfSlcbiAgICAgIC5zdHlsZS5jc3NUZXh0ID1cbiAgICAgICdmb250LXN0eWxlOiBpdGFsaWM7IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiAxZW07JztcbiAgfVxuICBvbkNsb3NlKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cblxuaW50ZXJmYWNlIFRyZWVOb2RlIHtcbiAgbmFtZTogc3RyaW5nO1xuICBmdWxsUGF0aDogc3RyaW5nO1xuICBpc0ZvbGRlcjogYm9vbGVhbjtcbiAgY2hpbGRyZW46IFJlY29yZDxzdHJpbmcsIFRyZWVOb2RlPjtcbn1cblxuLyoqXG4gKiBTaG93cyBhIFx1MjAxQ0N1c3RvbSBJbnN0YWxsXHUyMDFEIG1vZGFsLiBPbmNlIHRoZSB1c2VyIGNsaWNrcyBcdTIwMUNJbnN0YWxsIFNlbGVjdGVkLFx1MjAxRFxuICogdGhpcyBoYW5kcyBiYWNrIGFuIGFycmF5IG9mIGB7IHBhdGgsIGlzRm9sZGVyIH1gIHRvIGBwbHVnaW4ucGVyZm9ybUN1c3RvbUluc3RhbGwoLi4uKWAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG93Q3VzdG9tSW5zdGFsbE1vZGFsKFxuICBhcHA6IEFwcCxcbiAgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW5cbikge1xuICAvLyAoMSkgQnVpbGQgYSBxdWljayBtYXA6IGZ1bGxQYXRoIFx1MjE5MiBtYW5pZmVzdEtleSAoZm9yIGRlcGVuZGVuY3kgbG9va3VwcylcbiAgY29uc3QgZnVsbFBhdGhUb0tleTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICBmb3IgKGNvbnN0IGYgb2YgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgIGZ1bGxQYXRoVG9LZXlbZi5wYXRoXSA9IGYua2V5O1xuICB9XG4gIGZvciAoY29uc3QgZiBvZiBwbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgIGZ1bGxQYXRoVG9LZXlbZi5wYXRoXSA9IGYua2V5O1xuICB9XG5cbiAgLy8gKDIpIEJ1aWxkIGEgbmVzdGVkIFRyZWVOb2RlIHN0cnVjdHVyZSBmcm9tIG1hbmlmZXN0Q2FjaGVcbiAgY29uc3Qgcm9vdDogVHJlZU5vZGUgPSB7IG5hbWU6ICcnLCBmdWxsUGF0aDogJycsIGlzRm9sZGVyOiB0cnVlLCBjaGlsZHJlbjoge30gfTtcblxuICBmdW5jdGlvbiBlbnN1cmVGb2xkZXJOb2RlKHNlZ21lbnRzOiBzdHJpbmdbXSk6IFRyZWVOb2RlIHtcbiAgICBsZXQgY3Vyc29yID0gcm9vdDtcbiAgICBsZXQgYnVpbHRTb0ZhciA9ICcnO1xuICAgIGZvciAoY29uc3Qgc2VnIG9mIHNlZ21lbnRzKSB7XG4gICAgICBidWlsdFNvRmFyID0gYnVpbHRTb0ZhciA/IGAke2J1aWx0U29GYXJ9LyR7c2VnfWAgOiBzZWc7XG4gICAgICBpZiAoIWN1cnNvci5jaGlsZHJlbltzZWddKSB7XG4gICAgICAgIGN1cnNvci5jaGlsZHJlbltzZWddID0ge1xuICAgICAgICAgIG5hbWU6IHNlZyxcbiAgICAgICAgICBmdWxsUGF0aDogYnVpbHRTb0ZhcixcbiAgICAgICAgICBpc0ZvbGRlcjogdHJ1ZSxcbiAgICAgICAgICBjaGlsZHJlbjoge30sXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjdXJzb3IgPSBjdXJzb3IuY2hpbGRyZW5bc2VnXTtcbiAgICB9XG4gICAgcmV0dXJuIGN1cnNvcjtcbiAgfVxuXG4gIC8vIEluc2VydCBhbGwgZm9sZGVyIGVudHJpZXMgZmlyc3RcbiAgZm9yIChjb25zdCBmb2xkZXJFbnRyeSBvZiBwbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgY29uc3Qgc2VnbWVudHMgPSBmb2xkZXJFbnRyeS5wYXRoLnNwbGl0KCcvJyk7XG4gICAgZW5zdXJlRm9sZGVyTm9kZShzZWdtZW50cyk7XG4gIH1cblxuICAvLyBJbnNlcnQgYWxsIGZpbGUgZW50cmllcyB1bmRlciB0aGVpciBwYXJlbnQgZm9sZGVyIG5vZGVzXG4gIGZvciAoY29uc3QgZmlsZUVudHJ5IG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgY29uc3Qgc2VnbWVudHMgPSBmaWxlRW50cnkucGF0aC5zcGxpdCgnLycpO1xuICAgIGNvbnN0IGZpbGVOYW1lID0gc2VnbWVudHMucG9wKCkhO1xuICAgIGNvbnN0IHBhcmVudE5vZGUgPSBzZWdtZW50cy5sZW5ndGggPyBlbnN1cmVGb2xkZXJOb2RlKHNlZ21lbnRzKSA6IHJvb3Q7XG4gICAgcGFyZW50Tm9kZS5jaGlsZHJlbltmaWxlTmFtZV0gPSB7XG4gICAgICBuYW1lOiBmaWxlTmFtZSxcbiAgICAgIGZ1bGxQYXRoOiBmaWxlRW50cnkucGF0aCxcbiAgICAgIGlzRm9sZGVyOiBmYWxzZSxcbiAgICAgIGNoaWxkcmVuOiB7fSxcbiAgICB9O1xuICB9XG5cbiAgLy8gKDMpIERlZmluZSBvdXIgTW9kYWwgc3ViY2xhc3NcbiAgY2xhc3MgQ3VzdG9tSW5zdGFsbE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgY2hlY2tib3hNYXA6IFJlY29yZDxzdHJpbmcsIEhUTUxJbnB1dEVsZW1lbnQ+ID0ge307XG4gICAgcHJpdmF0ZSBjb25zb2xlRWw6IEhUTUxFbGVtZW50OyAgICAgICAgICAgICAgICAvLyA8ZGl2PiB0aGF0IGhvbGRzIFx1MjAxQ2RlcGVuZGVuY3kgY29uc29sZVx1MjAxRFxuICAgIHByaXZhdGUgY3VycmVudEJhdGNoTGluZXM6IEhUTUxFbGVtZW50W10gPSBbXTsgIC8vIGxpbmVzIGZyb20gdGhlIG1vc3QgcmVjZW50IGRlcGVuZGVuY3kgcGFzc1xuXG4gICAgLy8gVG9wXHUyMDEwbGV2ZWwgZmlsdGVyIGNoZWNrYm94ZXM6XG4gICAgcHJpdmF0ZSBwbHVnaW5DaGVja2JveDogSFRNTElucHV0RWxlbWVudDtcbiAgICBwcml2YXRlIGRlbW9DaGVja2JveDogSFRNTElucHV0RWxlbWVudDtcbiAgICBwcml2YXRlIHNldHRpbmdzQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgc3VwZXIoYXBwKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoJ0N1c3RvbSBJbnN0YWxsJyk7XG4gICAgXG4gICAgICBjb25zdCBkZXNjcmlwdGlvbkVsID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICBkZXNjcmlwdGlvbkVsLnRleHRDb250ZW50ID0gJ0FsbCBjaGVja2VkIGl0ZW1zIHdpbGwgYmUgaW5zdGFsbGVkLiBEZXBlbmRlbmNpZXMgd2lsbCBiZSBtYW5hZ2VkIGF1dG9tYXRpY2FsbHkuJztcbiAgICAgIGRlc2NyaXB0aW9uRWwuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICBtYXJnaW4tdG9wOiAwLjI1ZW07XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDAuNzVlbTtcbiAgICAgIGA7XG5cbiAgICAgIC8vXG4gICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgKEEpIFNJTkdMRSBTQ1JPTExBQkxFIEJPWCBGT1IgXHUyMDFDT1BUSU9OUyArIFRSRUVcdTIwMUQgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAvL1xuICAgICAgY29uc3Qgb3B0aW9uc0JveCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgT2JqZWN0LmFzc2lnbihvcHRpb25zQm94LnN0eWxlLCB7XG4gICAgICAgIG1heEhlaWdodDogJzQ4MHB4JywgICAgICAgICAgICAgICAvLyBFbm91Z2ggc3BhY2UgZm9yIGNoZWNrYm94ZXMgKyB0cmVlXG4gICAgICAgIG92ZXJmbG93WTogJ2F1dG8nLCAgICAgICAgICAgICAgICAvLyBFdmVyeXRoaW5nIGluc2lkZSBvcHRpb25zQm94IHdpbGwgc2Nyb2xsXG4gICAgICAgIG1hcmdpbjogJzAuNWVtIDAnLFxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLFxuICAgICAgICBwYWRkaW5nOiAnMC41ZW0nLFxuICAgICAgfSk7XG4gICAgXG4gICAgICAvL1xuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIChBMSkgXHUyMDFDSW5jbHVkZSBcdTIwMjZcdTIwMUQgQ0hFQ0tCT1hFUyBBVCBUSEUgVE9QIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgLy9cbiAgICAgIC8vIFdlIGNyZWF0ZSBvbmUgc21hbGwgXHUyMDFDY2hlY2tib3ggcGFuZWxcdTIwMUQgdGhhdCBzaXRzIGF0IHRoZSB0b3Agb2Ygb3B0aW9uc0JveC5cbiAgICAgIGNvbnN0IGNoZWNrYm94U2VjdGlvbiA9IG9wdGlvbnNCb3guY3JlYXRlRGl2KCk7XG4gICAgICBPYmplY3QuYXNzaWduKGNoZWNrYm94U2VjdGlvbi5zdHlsZSwge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICBnYXA6ICcwLjVlbScsXG4gICAgICAgIG1hcmdpbkJvdHRvbTogJzAuNzVlbScsXG4gICAgICB9KTtcbiAgICBcbiAgICAgIC8vIDEpIFx1MjAxQ0luY2x1ZGUgUGx1Z2luc1x1MjAxRFxuICAgICAgY29uc3QgcGx1Z2luUm93ID0gY2hlY2tib3hTZWN0aW9uLmNyZWF0ZURpdigpO1xuICAgICAgcGx1Z2luUm93LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICBwbHVnaW5Sb3cuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgdGhpcy5wbHVnaW5DaGVja2JveCA9IHBsdWdpblJvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgIHRoaXMucGx1Z2luQ2hlY2tib3guY2hlY2tlZCA9IHRydWU7XG4gICAgICB0aGlzLnBsdWdpbkNoZWNrYm94LmlkID0gJ3Z2dW5kZXJsb3JlLWNoZWNrYm94LXBsdWdpbnMnO1xuICAgICAgdGhpcy5wbHVnaW5DaGVja2JveC5zdHlsZS5tYXJnaW5SaWdodCA9ICcwLjVlbSc7XG4gICAgICBwbHVnaW5Sb3cuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgICB0ZXh0OiAnQ29tbXVuaXR5IFBsdWdpbnMnLFxuICAgICAgICBhdHRyOiB7IGZvcjogdGhpcy5wbHVnaW5DaGVja2JveC5pZCB9LFxuICAgICAgfSk7XG4gICAgXG4gICAgICAvLyAyKSBcdTIwMUNJbmNsdWRlIERlbW8gRmlsZXNcdTIwMURcbiAgICAgIGNvbnN0IGRlbW9Sb3cgPSBjaGVja2JveFNlY3Rpb24uY3JlYXRlRGl2KCk7XG4gICAgICBkZW1vUm93LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICBkZW1vUm93LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcbiAgICAgIHRoaXMuZGVtb0NoZWNrYm94ID0gZGVtb1Jvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgIHRoaXMuZGVtb0NoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgdGhpcy5kZW1vQ2hlY2tib3guaWQgPSAndnZ1bmRlcmxvcmUtY2hlY2tib3gtZGVtbyc7XG4gICAgICB0aGlzLmRlbW9DaGVja2JveC5zdHlsZS5tYXJnaW5SaWdodCA9ICcwLjVlbSc7XG4gICAgICBkZW1vUm93LmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgICAgdGV4dDogJ1ZWdW5kZXJsb3JlIERlbW8gRmlsZXMnLFxuICAgICAgICBhdHRyOiB7IGZvcjogdGhpcy5kZW1vQ2hlY2tib3guaWQgfSxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy8gMykgXHUyMDFDSW5jbHVkZSBWYXVsdCBTZXR0aW5ncyAoaG90a2V5cywgZXRjLilcdTIwMURcbiAgICAgIGNvbnN0IHNldHRpbmdzUm93ID0gY2hlY2tib3hTZWN0aW9uLmNyZWF0ZURpdigpO1xuICAgICAgc2V0dGluZ3NSb3cuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgIHNldHRpbmdzUm93LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcbiAgICAgIHRoaXMuc2V0dGluZ3NDaGVja2JveCA9IHNldHRpbmdzUm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgdGhpcy5zZXR0aW5nc0NoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgdGhpcy5zZXR0aW5nc0NoZWNrYm94LmlkID0gJ3Z2dW5kZXJsb3JlLWNoZWNrYm94LXNldHRpbmdzJztcbiAgICAgIHRoaXMuc2V0dGluZ3NDaGVja2JveC5zdHlsZS5tYXJnaW5SaWdodCA9ICcwLjVlbSc7XG4gICAgICBzZXR0aW5nc1Jvdy5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICAgIHRleHQ6ICdWYXVsdCBTZXR0aW5ncyAoYXBwZXJhbmNlLCBob3RrZXlzLCBncmFwaCBzZXR1cCwgZXRjLiknLFxuICAgICAgICBhdHRyOiB7IGZvcjogdGhpcy5zZXR0aW5nc0NoZWNrYm94LmlkIH0sXG4gICAgICB9KTtcbiAgICBcbiAgICAgIC8vXG4gICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgKEEyKSBUSElOIERJVklERVIgTElORSBCRVRXRUVOIENIRUNLQk9YRVMgQU5EIFRSRUUgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAvL1xuICAgICAgY29uc3QgZGl2aWRlciA9IG9wdGlvbnNCb3guY3JlYXRlRGl2KCk7XG4gICAgICBPYmplY3QuYXNzaWduKGRpdmlkZXIuc3R5bGUsIHtcbiAgICAgICAgYm9yZGVyVG9wOiAnMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcbiAgICAgICAgbWFyZ2luOiAnMC41ZW0gMCcsXG4gICAgICB9KTtcbiAgICBcbiAgICAgIC8vXG4gICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgKEEzKSBNQU5JRkVTVCBUUkVFIFJFTkRFUkVEIEJFTE9XIFRIRSBESVZJREVSIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgLy9cbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IG9wdGlvbnNCb3guY3JlYXRlRGl2KCk7XG4gICAgICBPYmplY3QuYXNzaWduKGNvbnRhaW5lci5zdHlsZSwge1xuICAgICAgICAvLyBXZSBubyBsb25nZXIgZ2l2ZSB0aGlzIGlubmVyIGRpdiBpdHMgb3duIHNjcm9sbGJhci5cbiAgICAgICAgLy8gSW5zdGVhZCwgY29udGFpbmVyIHdpbGwgZXhwYW5kIGluc2lkZSBvcHRpb25zQm94LCBhbmRcbiAgICAgICAgLy8gb3B0aW9uc0JveCB3aWxsIHNjcm9sbCBldmVyeXRoaW5nIChjaGVja2JveGVzICsgdHJlZSkgdG9nZXRoZXIuXG4gICAgICAgIG1hcmdpbjogJzAnLFxuICAgICAgICBwYWRkaW5nOiAnMCcsXG4gICAgICAgIGJvcmRlcjogJ25vbmUnLFxuICAgICAgfSk7XG4gICAgXG4gICAgICBjb25zdCBJTkRFTlRfUFggPSAxNjtcbiAgICAgIGNvbnN0IGxvb2t1cEVudHJ5ID0gKGZ1bGxQYXRoOiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBwbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzLmZpbmQoKGYpID0+IGYucGF0aCA9PT0gZnVsbFBhdGgpIHx8XG4gICAgICAgICAgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMuZmluZCgoZikgPT4gZi5wYXRoID09PSBmdWxsUGF0aClcbiAgICAgICAgKTtcbiAgICAgIH07XG4gICAgXG4gICAgICAvLyBSZXJlbmRlciBsb2dpYyBmb3IgdGhlIHRyZWU7IGhpZGVzIG9wdGlvbmFsIGl0ZW1zIGlmIHRoZSBkZW1vQ2hlY2tib3ggaXMgdW5jaGVja2VkXG4gICAgICBjb25zdCByZW5kZXJUcmVlID0gKCkgPT4ge1xuICAgICAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgdGhpcy5jaGVja2JveE1hcCA9IHt9O1xuICAgICAgICB0aGlzLmN1cnJlbnRCYXRjaExpbmVzID0gW107XG4gICAgXG4gICAgICAgIGNvbnN0IGRlbW9BbGxvd2VkID0gdGhpcy5kZW1vQ2hlY2tib3guY2hlY2tlZDtcbiAgICBcbiAgICAgICAgY29uc3QgcmVuZGVyTm9kZSA9IChub2RlOiBUcmVlTm9kZSwgcGFyZW50RWw6IEhUTUxFbGVtZW50LCBpbmRlbnQgPSAwKSA9PiB7XG4gICAgICAgICAgLy8gSWYgdGhpcyBub2RlIGNvcnJlc3BvbmRzIHRvIGEgbWFuaWZlc3QgZW50cnk6XG4gICAgICAgICAgaWYgKG5vZGUuZnVsbFBhdGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gbG9va3VwRW50cnkobm9kZS5mdWxsUGF0aCk7XG4gICAgICAgICAgICBpZiAoZW50cnkgJiYgZW50cnkub3B0aW9uYWwgJiYgIWRlbW9BbGxvd2VkKSB7XG4gICAgICAgICAgICAgIC8vIFNraXAgb3B0aW9uYWwgZGVtbyBpdGVtcyB3aGVuIFx1MjAxQ0luY2x1ZGUgRGVtbyBGaWxlc1x1MjAxRCBpcyBmYWxzZVxuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgIFxuICAgICAgICAgIGlmIChub2RlLmlzRm9sZGVyKSB7XG4gICAgICAgICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRk9MREVSIENBU0UgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAgICAgICBjb25zdCBkZXRhaWxzID0gcGFyZW50RWwuY3JlYXRlRWwoJ2RldGFpbHMnKTtcbiAgICAgICAgICAgIGRldGFpbHMub3BlbiA9IHRydWU7XG4gICAgICAgICAgICBkZXRhaWxzLnN0eWxlLm1hcmdpbiA9ICc0cHggMCc7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBzdW1tYXJ5ID0gZGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihzdW1tYXJ5LnN0eWxlLCB7XG4gICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IGAke2luZGVudCAqIElOREVOVF9QWH1weGAsXG4gICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICAgICAgICBwYWRkaW5nOiAnMnB4IDZweCcsXG4gICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgICAgICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3VtbWFyeS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICBzdW1tYXJ5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKSc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN1bW1hcnkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgc3VtbWFyeS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAvLyAoMSkgRm9sZGVyIGNoZWNrYm94XG4gICAgICAgICAgICBjb25zdCBjYiA9IHN1bW1hcnkuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICBjYi5zdHlsZS5tYXJnaW5SaWdodCA9ICcwLjVlbSc7XG4gICAgICAgICAgICBjYi5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNiLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgIHRoaXMuY2hlY2tib3hNYXBbbm9kZS5mdWxsUGF0aF0gPSBjYjtcbiAgICBcbiAgICAgICAgICAgIC8vICgyKSBGb2xkZXIgaWNvblxuICAgICAgICAgICAgY29uc3QgaWNvbkVsID0gc3VtbWFyeS5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWljb24nIH0pO1xuICAgICAgICAgICAgc2V0SWNvbihpY29uRWwsICdmb2xkZXInKTtcbiAgICAgICAgICAgIGljb25FbC5zdHlsZS5tYXJnaW5SaWdodCA9ICcwLjNlbSc7XG4gICAgICAgICAgICBpY29uRWwuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDAuOSknO1xuICAgICAgICAgICAgaWNvbkVsLnN0eWxlLm9wYWNpdHkgPSAnMC43NSc7XG4gICAgXG4gICAgICAgICAgICAvLyAoMykgRm9sZGVyIGxhYmVsXG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IHN1bW1hcnkuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IG5vZGUubmFtZSB9KTtcbiAgICAgICAgICAgIGxhYmVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnNjAwJztcbiAgICAgICAgICAgIGxhYmVsLnN0eWxlLmZvbnRTaXplID0gJzAuOTVlbSc7XG4gICAgXG4gICAgICAgICAgICAvLyAoNCkgV2hlbiBmb2xkZXJcdTIwMTBjaGVja2JveCB0b2dnbGVzOlxuICAgICAgICAgICAgY2Iub25jaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMudG9nZ2xlRGVzY2VuZGFudHMobm9kZSwgY2IuY2hlY2tlZCk7XG4gICAgICAgICAgICAgIHRoaXMuZW5mb3JjZURlcGVuZGVuY2llcyhub2RlLmZ1bGxQYXRoLCBjYi5jaGVja2VkKTtcbiAgICAgICAgICAgICAgdGhpcy5mYWRlQWxsRXhjZXB0Q3VycmVudEJhdGNoKCk7XG4gICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgLy8gKDUpIFJlY3Vyc2UgaW50byBjaGlsZHJlblxuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW5Db250YWluZXIgPSBkZXRhaWxzLmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgY2hpbGRyZW5Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzRweCc7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkTmFtZSBvZiBPYmplY3Qua2V5cyhub2RlLmNoaWxkcmVuKS5zb3J0KCkpIHtcbiAgICAgICAgICAgICAgcmVuZGVyTm9kZShub2RlLmNoaWxkcmVuW2NoaWxkTmFtZV0sIGNoaWxkcmVuQ29udGFpbmVyLCBpbmRlbnQgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZJTEUgQ0FTRSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHBhcmVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihyb3cuc3R5bGUsIHtcbiAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgbWFyZ2luTGVmdDogYCR7aW5kZW50ICogSU5ERU5UX1BYfXB4YCxcbiAgICAgICAgICAgICAgcGFkZGluZzogJzJweCA2cHgnLFxuICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLFxuICAgICAgICAgICAgICBtYXJnaW5Ub3A6ICcycHgnLFxuICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206ICcycHgnLFxuICAgICAgICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICByb3cuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHJvdy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAvLyAoMSkgRmlsZSBjaGVja2JveFxuICAgICAgICAgICAgY29uc3QgY2IgPSByb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICBjYi5zdHlsZS5tYXJnaW5SaWdodCA9ICcwLjVlbSc7XG4gICAgICAgICAgICBjYi5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNiLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgIHRoaXMuY2hlY2tib3hNYXBbbm9kZS5mdWxsUGF0aF0gPSBjYjtcbiAgICBcbiAgICAgICAgICAgIC8vICgyKSBGaWxlIGljb25cbiAgICAgICAgICAgIGNvbnN0IGljb25FbCA9IHJvdy5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWljb24nIH0pO1xuICAgICAgICAgICAgc2V0SWNvbihpY29uRWwsICdkb2N1bWVudCcpO1xuICAgICAgICAgICAgaWNvbkVsLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuM2VtJztcbiAgICAgICAgICAgIGljb25FbC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMC44KSc7XG4gICAgICAgICAgICBpY29uRWwuc3R5bGUub3BhY2l0eSA9ICcwLjUnO1xuICAgIFxuICAgICAgICAgICAgLy8gKDMpIEZpbGUgbGFiZWxcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gcm93LmNyZWF0ZUVsKCdsYWJlbCcsIHsgdGV4dDogbm9kZS5uYW1lIH0pO1xuICAgICAgICAgICAgbGFiZWwuc3R5bGUuZm9udFNpemUgPSAnMC45ZW0nO1xuICAgIFxuICAgICAgICAgICAgLy8gKDQpIFdoZW4gZmlsZVx1MjAxMGNoZWNrYm94IHRvZ2dsZXM6XG4gICAgICAgICAgICBjYi5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5lbmZvcmNlRGVwZW5kZW5jaWVzKG5vZGUuZnVsbFBhdGgsIGNiLmNoZWNrZWQpO1xuICAgICAgICAgICAgICB0aGlzLmZhZGVBbGxFeGNlcHRDdXJyZW50QmF0Y2goKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvLyBLaWNrIG9mZiByZWN1cnNpb24gYXQgcm9vdFxuICAgICAgICBmb3IgKGNvbnN0IHRvcE5hbWUgb2YgT2JqZWN0LmtleXMocm9vdC5jaGlsZHJlbikuc29ydCgpKSB7XG4gICAgICAgICAgcmVuZGVyTm9kZShyb290LmNoaWxkcmVuW3RvcE5hbWVdLCBjb250YWluZXIsIDApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIFxuICAgICAgLy8gRmlyc3QgZHJhdyBvZiB0aGUgdHJlZSAoYmVsb3cgdGhlIGRpdmlkZXIpXG4gICAgICByZW5kZXJUcmVlKCk7XG4gICAgXG4gICAgICAvL1xuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIChCKSBERVBFTkRFTkNZIENPTlNPTEUgQkVMT1cgVEhFIFNDUk9MTEFCTEUgT1BUSU9OUyBCT1ggXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAvL1xuICAgICAgdGhpcy5jb25zb2xlRWwgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdjdXN0b20tY29uc29sZScgfSk7XG4gICAgICBPYmplY3QuYXNzaWduKHRoaXMuY29uc29sZUVsLnN0eWxlLCB7XG4gICAgICAgIGhlaWdodDogJzE0MHB4JyxcbiAgICAgICAgbWFyZ2luOiAnMC41ZW0gMCcsXG4gICAgICAgIHBhZGRpbmc6ICc4cHgnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknLFxuICAgICAgICBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLFxuICAgICAgICBmb250RmFtaWx5OiAnbW9ub3NwYWNlJyxcbiAgICAgICAgZm9udFNpemU6ICcwLjgyZW0nLFxuICAgICAgICBsaW5lSGVpZ2h0OiAnMS40ZW0nLFxuICAgICAgICBjb2xvcjogJ3ZhcigtLXRleHQtbm9ybWFsKScsXG4gICAgICAgIG92ZXJmbG93WTogJ2F1dG8nLFxuICAgICAgICB3aGl0ZVNwYWNlOiAncHJlLXdyYXAnLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBwbGFjZWhvbGRlciA9IHRoaXMuY29uc29sZUVsLmNyZWF0ZURpdih7XG4gICAgICAgIHRleHQ6ICc+IERlcGVuZGVuY3kgZXJyb3JzIGFuZCB3YXJuaW5ncyB3aWxsIGFwcGVhciBoZXJlXHUyMDI2JyxcbiAgICAgIH0pO1xuICAgICAgT2JqZWN0LmFzc2lnbihwbGFjZWhvbGRlci5zdHlsZSwge1xuICAgICAgICBvcGFjaXR5OiAnMC40JyxcbiAgICAgICAgZm9udFN0eWxlOiAnaXRhbGljJyxcbiAgICAgICAgbWFyZ2luQm90dG9tOiAnNHB4JyxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy9cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCAoQykgRVZFTlQgSEFORExFUlMgRk9SIFRIRSBUSFJFRSBDSEVDS0JPWEVTIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgLy9cbiAgICAgIC8vIDEpIFx1MjAxQ0luY2x1ZGUgUGx1Z2luc1x1MjAxRCB0b2dnbGVkXG4gICAgICB0aGlzLnBsdWdpbkNoZWNrYm94Lm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBXQVJOSU5HX0NMQVNTID0gJ3Z2dW5kZXJsb3JlLXdhcm5pbmcnO1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luQ2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgICAgIC8vIElmIGNvbnNvbGUgb25seSBoYXMgdGhlIHBsYWNlaG9sZGVyLCBjbGVhciBpdFxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuY29uc29sZUVsLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICAgICAgKHRoaXMuY29uc29sZUVsLmNoaWxkcmVuWzBdIGFzIEhUTUxFbGVtZW50KS50ZXh0Q29udGVudD8uc3RhcnRzV2l0aChcbiAgICAgICAgICAgICAgJz4gRGVwZW5kZW5jeSBjb25zb2xlJ1xuICAgICAgICAgICAgKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5jb25zb2xlRWwuZW1wdHkoKTtcbiAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgLy8gQWRkIGEgcmVkIHdhcm5pbmcgbGluZVxuICAgICAgICAgIGNvbnN0IHdhcm5pbmdMaW5lID0gdGhpcy5jb25zb2xlRWwuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgIHRleHQ6XG4gICAgICAgICAgICAgICdXQVJOSU5HOiBUaGUgVlZ1bmRlcmxvcmUgVG9vbGtpdCB3aWxsIG5vdCBmdW5jdGlvbiB3aXRob3V0IGFsbCBpbmNsdWRlZCBwbHVnaW5zISBZb3UgcHJvYmFibHkgd2FudCB0byByZS1jaGVjayB0aGF0IG9uZS4nLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHdhcm5pbmdMaW5lLmFkZENsYXNzKFdBUk5JTkdfQ0xBU1MpO1xuICAgICAgICAgIHdhcm5pbmdMaW5lLnN0eWxlLmNvbG9yID0gJyNGRjAwMDAnO1xuICAgIFxuICAgICAgICAgIC8vIFNjcm9sbCBjb25zb2xlIHRvIGJvdHRvbVxuICAgICAgICAgIHRoaXMuY29uc29sZUVsLnNjcm9sbFRvcCA9IHRoaXMuY29uc29sZUVsLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZW1vdmUgb25seSBvdXIgd2FybmluZyBsaW5lcyAobGVhdmUgYW55IG90aGVyIG1lc3NhZ2VzIGFsb25lKVxuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nV2FybmluZ3MgPSB0aGlzLmNvbnNvbGVFbC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtXQVJOSU5HX0NMQVNTfWApO1xuICAgICAgICAgIGV4aXN0aW5nV2FybmluZ3MuZm9yRWFjaCgoZWwpID0+IGVsLnJlbW92ZSgpKTtcbiAgICBcbiAgICAgICAgICAvLyBJZiBjb25zb2xlIGlzIG5vdyBlbXB0eSwgcmVcdTIwMTBpbnNlcnQgdGhlIHBsYWNlaG9sZGVyXG4gICAgICAgICAgaWYgKHRoaXMuY29uc29sZUVsLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc3QgcGggPSB0aGlzLmNvbnNvbGVFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgICB0ZXh0OiAnPiBEZXBlbmRlbmN5IGNvbnNvbGUgb3V0cHV0IHdpbGwgYXBwZWFyIGhlcmVcdTIwMjYnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHBoLnN0eWxlLCB7XG4gICAgICAgICAgICAgIG9wYWNpdHk6ICcwLjQnLFxuICAgICAgICAgICAgICBmb250U3R5bGU6ICdpdGFsaWMnLFxuICAgICAgICAgICAgICBtYXJnaW5Cb3R0b206ICc0cHgnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgIFxuICAgICAgICAgIC8vIFNjcm9sbCB0byBib3R0b20gYWdhaW5cbiAgICAgICAgICB0aGlzLmNvbnNvbGVFbC5zY3JvbGxUb3AgPSB0aGlzLmNvbnNvbGVFbC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgXG4gICAgICAvLyAyKSBcdTIwMUNJbmNsdWRlIERlbW8gRmlsZXNcdTIwMUQgdG9nZ2xlZFxuICAgICAgdGhpcy5kZW1vQ2hlY2tib3gub25jaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIHJlbmRlclRyZWUoKTtcbiAgICAgIH07XG4gICAgXG4gICAgICAvLyAzKSBcdTIwMUNJbmNsdWRlIFZhdWx0IFNldHRpbmdzXHUyMDFEIHRvZ2dsZWRcbiAgICAgIC8vIChubyBuZWVkIHRvIHJlLXJlbmRlciB0aGUgdHJlZSwgc2luY2UgdmF1bHQgc2V0dGluZ3MgYXJlblx1MjAxOXQgaW4gdGhlIG1hbmlmZXN0IHRyZWUpXG4gICAgXG4gICAgICAvL1xuICAgICAgY29uc3QgYnV0dG9uUm93ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICBPYmplY3QuYXNzaWduKGJ1dHRvblJvdy5zdHlsZSwge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsICAgLy8gcHVzaCBsZWZ0IHZzIHJpZ2h0XG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBwYWRkaW5nVG9wOiAnOHB4JyxcbiAgICAgICAgYm9yZGVyVG9wOiAnMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcbiAgICAgICAgbWFyZ2luVG9wOiAnOHB4JyxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyAxKSBcdTIwMUNSZXNldCBTZWxlY3Rpb25cdTIwMUQgb24gdGhlIExFRlRcbiAgICAgIGNvbnN0IHJlc2V0QnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdSZXNldCBTZWxlY3Rpb24nIH0pO1xuICAgICAgcmVzZXRCdG4uc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgIGA7XG4gICAgICByZXNldEJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAvLyAxKSBHYXRoZXIgYW55IGV4aXN0aW5nIFdBUk5JTkcgbGluZXNcbiAgICAgICAgY29uc3Qgd2FybmluZ3MgPSBBcnJheS5mcm9tKFxuICAgICAgICAgIHRoaXMuY29uc29sZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52dnVuZGVybG9yZS13YXJuaW5nJylcbiAgICAgICAgKSBhcyBIVE1MRWxlbWVudFtdO1xuICAgICAgXG4gICAgICAgIC8vIDIpIFdpcGUgb3V0IHRoZSBjb25zb2xlIGVudGlyZWx5ICh0aGlzIHJlbW92ZXMgYWxsIGRlcGVuZGVuY3kgbGluZXMpXG4gICAgICAgIHRoaXMuY29uc29sZUVsLmVtcHR5KCk7XG4gICAgICBcbiAgICAgICAgLy8gMykgUmVcdTIwMTBhcHBlbmQgZWFjaCBwbHVnaW5cdTIwMTB3YXJuaW5nIGJhY2sgaW50byB0aGUgY29uc29sZVxuICAgICAgICB3YXJuaW5ncy5mb3JFYWNoKCh3YXJuaW5nRWwpID0+IHtcbiAgICAgICAgICB0aGlzLmNvbnNvbGVFbC5hcHBlbmRDaGlsZCh3YXJuaW5nRWwpO1xuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgICAvLyA0KSBSZVx1MjAxMGNoZWNrIGV2ZXJ5IHNpbmdsZSBtYW5pZmVzdFx1MjAxMHRyZWUgY2hlY2tib3hcbiAgICAgICAgT2JqZWN0LnZhbHVlcyh0aGlzLmNoZWNrYm94TWFwKS5mb3JFYWNoKChjYikgPT4ge1xuICAgICAgICAgIGNiLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIFxuICAgICAgLy8gMikgQ3JlYXRlIGEgcmlnaHRcdTIwMTBhbGlnbmVkIHN1Ylx1MjAxMGNvbnRhaW5lciBmb3IgXHUyMDFDSW5zdGFsbCBTZWxlY3RlZFx1MjAxRCArIFx1MjAxQ0NhbmNlbFx1MjAxRFxuICAgICAgY29uc3QgcmlnaHRHcm91cCA9IGJ1dHRvblJvdy5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24ocmlnaHRHcm91cC5zdHlsZSwge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGdhcDogJzAuNWVtJyxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyAyYSkgXHUyMDFDSW5zdGFsbCBTZWxlY3RlZFx1MjAxRCAocHJpbWFyeSBDVEEpXG4gICAgICBjb25zdCBpbnN0YWxsQnRuID0gcmlnaHRHcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICB0ZXh0OiAnSW5zdGFsbCBTZWxlY3RlZCcsXG4gICAgICAgIGNsczogJ21vZC1jdGEnLFxuICAgICAgfSk7XG4gICAgICBpbnN0YWxsQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIGluc3RhbGxCdG4uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICcnKTtcbiAgICAgIFxuICAgICAgICAvLyAoaSkgQ2xvc2UgdGhpcyBjdXN0b21cdTIwMTBpbnN0YWxsIG1vZGFsXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIFxuICAgICAgICAvLyAoaWkpIFNob3cgXHUyMDFDSW5zdGFsbGluZ1x1MjAyNlx1MjAxRCBwbGFjZWhvbGRlclxuICAgICAgICBjb25zdCBpbnN0YWxsaW5nID0gbmV3IEluc3RhbGxpbmdNb2RhbChhcHApO1xuICAgICAgICBpbnN0YWxsaW5nLm9wZW4oKTtcbiAgICAgIFxuICAgICAgICAvLyAoaWlpKSBHYXRoZXIgYWxsIGNoZWNrZWQgbWFuaWZlc3QgZW50cmllc1xuICAgICAgICBjb25zdCB0b0luc3RhbGw6IHsgcGF0aDogc3RyaW5nOyBpc0ZvbGRlcjogYm9vbGVhbiB9W10gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBbZnAsIGNoZWNrYm94XSBvZiBPYmplY3QuZW50cmllcyh0aGlzLmNoZWNrYm94TWFwKSkge1xuICAgICAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICAgICAgICBjb25zdCBpc0ZvbGRlciA9IHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMuc29tZSgoZikgPT4gZi5wYXRoID09PSBmcCk7XG4gICAgICAgICAgICB0b0luc3RhbGwucHVzaCh7IHBhdGg6IGZwLCBpc0ZvbGRlciB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIFxuICAgICAgICAvLyAoaXYpIElmIFx1MjAxQ0luY2x1ZGUgUGx1Z2luc1x1MjAxRCBpcyBjaGVja2VkIFx1MjE5MiBwdWxsIGRvd24gYC5vYnNpZGlhbi9wbHVnaW5zYCArIGBjb21tdW5pdHktcGx1Z2lucy5qc29uYFxuICAgICAgICAvLyAoaXYpIElmIFx1MjAxQ0luY2x1ZGUgUGx1Z2luc1x1MjAxRCBpcyBjaGVja2VkIFx1MjE5MiBmZXRjaCB0aGUgR2l0SHViLXNpZGUgLm9ic2lkaWFuL3BsdWdpbnMgYW5kIG9ubHkgZW5xdWV1ZVxuLy8gICAgIHRob3NlIGZvbGRlcnMvZmlsZXMgdGhhdCBhcmVuXHUyMDE5dCBhbHJlYWR5IGluIHRoZSB2YXVsdC5cbmlmICh0aGlzLnBsdWdpbkNoZWNrYm94LmNoZWNrZWQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhcGlVcmwgPVxuICAgICAgJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9jb250ZW50cy8ub2JzaWRpYW4vcGx1Z2lucz9yZWY9bWFpbic7XG4gICAgY29uc3QgcmVzcCA9IGF3YWl0IGZldGNoKGFwaVVybCk7XG4gICAgaWYgKHJlc3Aub2spIHtcbiAgICAgIGNvbnN0IHBsdWdpbkZpbGVzOiBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogJ2ZpbGUnIHwgJ2RpcicgfT4gPSBhd2FpdCByZXNwLmpzb24oKTtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBwbHVnaW5GaWxlcykge1xuICAgICAgICBjb25zdCBsb2NhbFBhdGggPSBgLm9ic2lkaWFuL3BsdWdpbnMvJHtpdGVtLm5hbWV9YDtcbiAgICAgICAgLy8gSWYgdGhhdCBwbHVnaW4gZm9sZGVyIChvciBmaWxlKSBkb2VzIF9ub3RfIGFscmVhZHkgZXhpc3QgaW4gdGhlIHZhdWx0LCBlbnF1ZXVlIGl0OlxuICAgICAgICBjb25zdCBleGlzdHNMb2NhbGx5ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobG9jYWxQYXRoKTtcbiAgICAgICAgaWYgKCFleGlzdHNMb2NhbGx5KSB7XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2RpcicpIHtcbiAgICAgICAgICAgIHRvSW5zdGFsbC5wdXNoKHsgcGF0aDogbG9jYWxQYXRoLCBpc0ZvbGRlcjogdHJ1ZSB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdG9JbnN0YWxsLnB1c2goeyBwYXRoOiBsb2NhbFBhdGgsIGlzRm9sZGVyOiBmYWxzZSB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZW51bWVyYXRlIC5vYnNpZGlhbi9wbHVnaW5zIGZyb20gR2l0SHViOicsIGUpO1xuICB9XG5cbiAgLy8gRXZlbiBpZiBjb21tdW5pdHktcGx1Z2lucy5qc29uIGFscmVhZHkgZXhpc3RzLCB5b3UgbWlnaHQgd2FudCB0byBvdmVyd3JpdGUgaXQsXG4gIC8vIG9yIHlvdSBjYW4gYWxzbyBjaGVjayBhZGFwdGVyLmV4aXN0cyguLi4pIGJlZm9yZSBwdXNoaW5nIGl0LiBFeGFtcGxlIGFsd2F5cyBvdmVyd3JpdGVzOlxuICB0b0luc3RhbGwucHVzaCh7IHBhdGg6ICcub2JzaWRpYW4vY29tbXVuaXR5LXBsdWdpbnMuanNvbicsIGlzRm9sZGVyOiBmYWxzZSB9KTtcbn1cblxuICAgICAgXG4gICAgICAgIC8vICh2KSBJZiBcdTIwMUNJbmNsdWRlIFZhdWx0IFNldHRpbmdzXHUyMDFEIGlzIGNoZWNrZWQgXHUyMTkyIGFkZCB0aGUgZm91ciBKU09OIGZpbGVzIHVuZGVyIGAub2JzaWRpYW4vYFxuICAgICAgICBpZiAodGhpcy5zZXR0aW5nc0NoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgICAgICBjb25zdCB2YXVsdFNldHRpbmdzUGF0aHMgPSBbXG4gICAgICAgICAgICAnLm9ic2lkaWFuL2FwcC5qc29uJyxcbiAgICAgICAgICAgICcub2JzaWRpYW4vYXBwZWFyYW5jZS5qc29uJyxcbiAgICAgICAgICAgICcub2JzaWRpYW4vZ3JhcGguanNvbicsXG4gICAgICAgICAgICAnLm9ic2lkaWFuL2hvdGtleXMuanNvbicsXG4gICAgICAgICAgXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHZzIG9mIHZhdWx0U2V0dGluZ3NQYXRocykge1xuICAgICAgICAgICAgdG9JbnN0YWxsLnB1c2goeyBwYXRoOiB2cywgaXNGb2xkZXI6IGZhbHNlIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXG4gICAgICAgIC8vICh2aSkgUGVyZm9ybSB0aGUgYWN0dWFsIGluc3RhbGxcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBwbHVnaW4ucGVyZm9ybUN1c3RvbUluc3RhbGwodG9JbnN0YWxsKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIHBlcmZvcm1DdXN0b21JbnN0YWxsKCkgdGhyZXc6JywgZXJyKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdcdTI3NEMgQ3VzdG9tIGluc3RhbGwgZmFpbGVkXHUyMDE0c2VlIGNvbnNvbGUnKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBpbnN0YWxsaW5nLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIDJiKSBcdTIwMUNDYW5jZWxcdTIwMUQgb24gdGhlIHJpZ2h0XG4gICAgICBjb25zdCBjYW5jZWxCdG4gPSByaWdodEdyb3VwLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgICAgY2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICAgIFxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxuXG4gICAgLyoqIFJlY3Vyc2l2ZWx5IHRvZ2dsZSBkZXNjZW5kYW50c1x1MjAxOSBjaGVja2VkXHUyMDEwc3RhdGUgd2l0aG91dCBsb2dnaW5nIGVhY2ggb25lLiAqL1xuICAgIHByaXZhdGUgdG9nZ2xlRGVzY2VuZGFudHMobm9kZTogVHJlZU5vZGUsIGNoZWNrZWQ6IGJvb2xlYW4pIHtcbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgT2JqZWN0LnZhbHVlcyhub2RlLmNoaWxkcmVuKSkge1xuICAgICAgICBjb25zdCBjYiA9IHRoaXMuY2hlY2tib3hNYXBbY2hpbGQuZnVsbFBhdGhdO1xuICAgICAgICBpZiAoY2IpIGNiLmNoZWNrZWQgPSBjaGVja2VkO1xuICAgICAgICBpZiAoY2hpbGQuaXNGb2xkZXIpIHtcbiAgICAgICAgICB0aGlzLnRvZ2dsZURlc2NlbmRhbnRzKGNoaWxkLCBjaGVja2VkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuZm9yY2UgZGVwZW5kZW5jeSBsb2dpYyAoYXV0b1x1MjAxMGNoZWNrIHByZXJlcXVpc2l0ZXMsIGF1dG9cdTIwMTB1bmNoZWNrIGRlcGVuZGVudHMpLlxuICAgICAqIEVhY2ggdGltZSB3ZSBmbGlwIGEgYm94IFx1MjAxQ2JlY2F1c2Ugb2YgYSBkZXBlbmRlbmN5LFx1MjAxRCB3ZSBsb2cgb25lIGxpbmUgdG8gdGhlIGNvbnNvbGUuXG4gICAgICovXG4gICAgcHJpdmF0ZSBlbmZvcmNlRGVwZW5kZW5jaWVzKGNoYW5nZWRQYXRoOiBzdHJpbmcsIGlzQ2hlY2tlZDogYm9vbGVhbikge1xuICAgICAgY29uc3QgY2hhbmdlZEtleSA9IGZ1bGxQYXRoVG9LZXlbY2hhbmdlZFBhdGhdO1xuICAgICAgaWYgKCFjaGFuZ2VkS2V5KSByZXR1cm47XG5cbiAgICAgIC8vIEJ1aWxkIGEgcXVpY2sgbWFwOiBmdWxsUGF0aCBcdTIxOTIgZGlzcGxheU5hbWVcbiAgICAgIGNvbnN0IGZ1bGxQYXRoVG9EaXNwbGF5OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gICAgICBmb3IgKGNvbnN0IGYgb2YgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgICAgICBmdWxsUGF0aFRvRGlzcGxheVtmLnBhdGhdID0gZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSE7XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGYgb2YgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICAgICAgZnVsbFBhdGhUb0Rpc3BsYXlbZi5wYXRoXSA9IGYuZGlzcGxheU5hbWUgPz8gZi5wYXRoLnNwbGl0KCcvJykucG9wKCkhO1xuICAgICAgfVxuICAgICAgY29uc3QgY2hhbmdlZE5hbWUgPSBmdWxsUGF0aFRvRGlzcGxheVtjaGFuZ2VkUGF0aF0gPz8gY2hhbmdlZFBhdGguc3BsaXQoJy8nKS5wb3AoKSE7XG5cbiAgICAgIC8vIFN0YXJ0IGEgbmV3IFx1MjAxQ2JhdGNoXHUyMDFEOlxuICAgICAgdGhpcy5jdXJyZW50QmF0Y2hMaW5lcyA9IFtdO1xuXG4gICAgICBpZiAoaXNDaGVja2VkKSB7XG4gICAgICAgIC8vIFx1MjVCNiBBdXRvXHUyMDEwY2hlY2sgcHJlcmVxdWlzaXRlc1xuICAgICAgICBjb25zdCBzdGFjayA9IFtjaGFuZ2VkS2V5XTtcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IGN1ciA9IHN0YWNrLnBvcCgpITtcbiAgICAgICAgICBjb25zdCBkZXBzID0gcGx1Z2luLnJlcXVpcmVzR3JhcGguZ2V0KGN1cikgPz8gW107XG4gICAgICAgICAgZm9yIChjb25zdCBkZXBLZXkgb2YgZGVwcykge1xuICAgICAgICAgICAgY29uc3QgZGVwRW50cnkgPVxuICAgICAgICAgICAgICBwbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcy5maW5kKCh4KSA9PiB4LmtleSA9PT0gZGVwS2V5KSB8fFxuICAgICAgICAgICAgICBwbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzLmZpbmQoKHgpID0+IHgua2V5ID09PSBkZXBLZXkpO1xuICAgICAgICAgICAgaWYgKGRlcEVudHJ5KSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRlcFBhdGggPSBkZXBFbnRyeS5wYXRoO1xuICAgICAgICAgICAgICBjb25zdCBjYiA9IHRoaXMuY2hlY2tib3hNYXBbZGVwUGF0aF07XG4gICAgICAgICAgICAgIGlmIChjYiAmJiAhY2IuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIGNiLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlcE5hbWUgPSBmdWxsUGF0aFRvRGlzcGxheVtkZXBQYXRoXSA/PyBkZXBQYXRoLnNwbGl0KCcvJykucG9wKCkhO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVFbCA9IHRoaXMuYXBwZW5kTG9nTGluZShcbiAgICAgICAgICAgICAgICAgIGRlcFBhdGgsXG4gICAgICAgICAgICAgICAgICBgPiAke2RlcE5hbWV9IGF1dG9tYXRpY2FsbHkgY2hlY2tlZCAocmVxdWlyZWQgYnkgJHtjaGFuZ2VkTmFtZX0pYFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50QmF0Y2hMaW5lcy5wdXNoKGxpbmVFbCk7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChkZXBLZXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBcdTI1QjYgQXV0b1x1MjAxMHVuY2hlY2sgZGVwZW5kZW50c1xuICAgICAgICBjb25zdCBkZXBlbmRlbnRzT2YgPSAodGFyZ2V0S2V5OiBzdHJpbmcpID0+XG4gICAgICAgICAgQXJyYXkuZnJvbShwbHVnaW4ucmVxdWlyZXNHcmFwaC5lbnRyaWVzKCkpXG4gICAgICAgICAgICAuZmlsdGVyKChbLCBkZXBzXSkgPT4gZGVwcy5pbmNsdWRlcyh0YXJnZXRLZXkpKVxuICAgICAgICAgICAgLm1hcCgoW2tdKSA9PiBrKTtcblxuICAgICAgICBjb25zdCBzdGFjayA9IFtjaGFuZ2VkS2V5XTtcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IGN1ciA9IHN0YWNrLnBvcCgpITtcbiAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkS2V5IG9mIGRlcGVuZGVudHNPZihjdXIpKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZEVudHJ5ID1cbiAgICAgICAgICAgICAgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMuZmluZCgoeCkgPT4geC5rZXkgPT09IGNoaWxkS2V5KSB8fFxuICAgICAgICAgICAgICBwbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzLmZpbmQoKHgpID0+IHgua2V5ID09PSBjaGlsZEtleSk7XG4gICAgICAgICAgICBpZiAoY2hpbGRFbnRyeSkge1xuICAgICAgICAgICAgICBjb25zdCBjaGlsZFBhdGggPSBjaGlsZEVudHJ5LnBhdGg7XG4gICAgICAgICAgICAgIGNvbnN0IGNiID0gdGhpcy5jaGVja2JveE1hcFtjaGlsZFBhdGhdO1xuICAgICAgICAgICAgICBpZiAoY2IgJiYgY2IuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIGNiLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZE5hbWUgPSBmdWxsUGF0aFRvRGlzcGxheVtjaGlsZFBhdGhdID8/IGNoaWxkUGF0aC5zcGxpdCgnLycpLnBvcCgpITtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lRWwgPSB0aGlzLmFwcGVuZExvZ0xpbmUoXG4gICAgICAgICAgICAgICAgICBjaGlsZFBhdGgsXG4gICAgICAgICAgICAgICAgICBgPiAke2NoaWxkTmFtZX0gYXV0b21hdGljYWxseSB1bmNoZWNrZWQgKGRlcGVuZHMgb24gJHtjaGFuZ2VkTmFtZX0pYFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50QmF0Y2hMaW5lcy5wdXNoKGxpbmVFbCk7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChjaGlsZEtleSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5mYWRlQWxsRXhjZXB0Q3VycmVudEJhdGNoKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwZW5kIG9uZSBcdTIwMUNtb25vXHUyMDFEIGxpbmUgcGx1cyBhIHRpbnkgdW5kbyBidXR0b24uIFJldHVybnMgdGhlIG5ldyA8ZGl2Pi5cbiAgICAgKi9cbiAgICBwcml2YXRlIGFwcGVuZExvZ0xpbmUoZnVsbFBhdGg6IHN0cmluZywgdGV4dDogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xuXG4gICAgICAvLyAoMikgQnVpbGQgYSBuZXcgPGRpdj4gZm9yIHRoaXMgbGluZVxuICAgICAgY29uc3QgbGluZSA9IHRoaXMuY29uc29sZUVsLmNyZWF0ZURpdigpO1xuICAgICAgT2JqZWN0LmFzc2lnbihsaW5lLnN0eWxlLCB7XG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgIG1hcmdpbjogJzJweCAwJyxcbiAgICAgICAgb3BhY2l0eTogJzEuMCcsXG4gICAgICAgIHRyYW5zaXRpb246ICdvcGFjaXR5IDAuMnMgZWFzZScsXG4gICAgICB9KTtcblxuICAgICAgLy8gKDMpIExlZnQ6IHRoZSBtZXNzYWdlIHRleHRcbiAgICAgIGxpbmUuY3JlYXRlU3Bhbih7IHRleHQgfSk7XG5cbiAgICAgIC8vICg0KSBSaWdodDogXHUyMDFDdW5kb1x1MjAxRCBidXR0b25cbiAgICAgIGNvbnN0IHVuZG9CdG4gPSBsaW5lLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICd1bmRvJywgY2xzOiAnbW9kLXNtYWxsJyB9KTtcbiAgICAgIE9iamVjdC5hc3NpZ24odW5kb0J0bi5zdHlsZSwge1xuICAgICAgICBtYXJnaW5MZWZ0OiAnMC41ZW0nLFxuICAgICAgICBmb250U2l6ZTogJzAuNzVlbScsXG4gICAgICAgIHBhZGRpbmc6ICcycHggNHB4JyxcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICB9KTtcbiAgICAgIHVuZG9CdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY2IgPSB0aGlzLmNoZWNrYm94TWFwW2Z1bGxQYXRoXTtcbiAgICAgICAgaWYgKGNiKSB7XG4gICAgICAgICAgY2IuY2hlY2tlZCA9ICFjYi5jaGVja2VkO1xuICAgICAgICAgIHRoaXMuZW5mb3JjZURlcGVuZGVuY2llcyhmdWxsUGF0aCwgY2IuY2hlY2tlZCk7XG4gICAgICAgICAgdGhpcy5mYWRlQWxsRXhjZXB0Q3VycmVudEJhdGNoKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vICg1KSBTY3JvbGwgdGhlIGNvbnNvbGUgdG8gYm90dG9tXG4gICAgICB0aGlzLmNvbnNvbGVFbC5zY3JvbGxUb3AgPSB0aGlzLmNvbnNvbGVFbC5zY3JvbGxIZWlnaHQ7XG4gICAgICByZXR1cm4gbGluZTtcbiAgICB9XG5cbiAgICAvKiogRmFkZSBvdXQgZXZlcnkgY29uc29sZSBsaW5lIHRoYXQgaXMgKm5vdCogcGFydCBvZiBjdXJyZW50QmF0Y2hMaW5lcy4gKi9cbiAgICBwcml2YXRlIGZhZGVBbGxFeGNlcHRDdXJyZW50QmF0Y2goKSB7XG4gICAgICBjb25zdCB0b3RhbCA9IHRoaXMuY29uc29sZUVsLmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG90YWw7IGkrKykge1xuICAgICAgICBjb25zdCBjaGlsZCA9IHRoaXMuY29uc29sZUVsLmNoaWxkcmVuW2ldIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50QmF0Y2hMaW5lcy5pbmNsdWRlcyhjaGlsZCkpIHtcbiAgICAgICAgICBjaGlsZC5zdHlsZS5vcGFjaXR5ID0gJzEuMCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hpbGQuc3R5bGUub3BhY2l0eSA9ICcwLjYnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gKDQpIEZpbmFsbHksIG9wZW4gdGhlIG1vZGFsXG4gIG5ldyBDdXN0b21JbnN0YWxsTW9kYWwoYXBwKS5vcGVuKCk7XG59XG4iLCAiaW1wb3J0IHsgVmF1bHQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBjcmVhdGVIYXNoIH0gZnJvbSAnY3J5cHRvJztcblxuZXhwb3J0IGludGVyZmFjZSBUb29sa2l0RmlsZUNhY2hlRW50cnkge1xuXHRoYXNoOiBzdHJpbmc7XG5cdGdpdGh1YlBhdGg6IHN0cmluZztcbn1cblxuZXhwb3J0IHR5cGUgVG9vbGtpdEZpbGVDYWNoZSA9IFJlY29yZDxzdHJpbmcsIFRvb2xraXRGaWxlQ2FjaGVFbnRyeT47IC8vIHZhdWx0UGF0aCA9PiB7aGFzaCwgZ2l0aHViUGF0aH1cblxuZXhwb3J0IGNsYXNzIFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyIHtcblx0cHJpdmF0ZSB2YXVsdDogVmF1bHQ7XG5cdHByaXZhdGUgY2FjaGU6IFRvb2xraXRGaWxlQ2FjaGU7XG5cdHByaXZhdGUgc2F2ZTogKCkgPT4gUHJvbWlzZTx2b2lkPjtcblxuXHRjb25zdHJ1Y3Rvcih2YXVsdDogVmF1bHQsIGluaXRpYWxDYWNoZTogVG9vbGtpdEZpbGVDYWNoZSB8IHVuZGVmaW5lZCwgc2F2ZUNhbGxiYWNrOiAoKSA9PiBQcm9taXNlPHZvaWQ+KSB7XG5cdFx0dGhpcy52YXVsdCA9IHZhdWx0O1xuXHRcdHRoaXMuY2FjaGUgPSBpbml0aWFsQ2FjaGUgfHwge307XG5cdFx0dGhpcy5zYXZlID0gc2F2ZUNhbGxiYWNrO1xuXHR9XG5cblx0cHJpdmF0ZSBoYXNoQ29udGVudChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdHJldHVybiBjcmVhdGVIYXNoKCdzaGEyNTYnKS51cGRhdGUoY29udGVudCkuZGlnZXN0KCdoZXgnKTtcblx0fVxuXG5cdGFzeW5jIGlzVXBUb0RhdGUodmF1bHRQYXRoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHQvL2NvbnNvbGUubG9nKGBcdUQ4M0RcdUREMEQgQ2hlY2tpbmcgaWYgXCIke3ZhdWx0UGF0aH1cIiBpcyB1cCB0byBkYXRlLmApO1xuXHRcblx0XHRjb25zdCBlbnRyeSA9IHRoaXMuY2FjaGVbdmF1bHRQYXRoXTtcblx0XHRpZiAoIWVudHJ5KSB7XG5cdFx0XHQvL2NvbnNvbGUubG9nKGBcdTI3NEMgTm8gY2FjaGVkIGhhc2ggZm91bmQgZm9yOiAke3ZhdWx0UGF0aH1gKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFxuXHRcdGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKTtcblx0XHRpZiAoIWV4aXN0cykge1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhgXHUyNzRDIEZpbGUgZG9lcyBub3QgZXhpc3QgaW4gdmF1bHQ6ICR7dmF1bHRQYXRofWApO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5yZWFkKHZhdWx0UGF0aCk7XG5cdFx0Y29uc3QgbG9jYWxIYXNoID0gdGhpcy5oYXNoQ29udGVudChjb250ZW50KTtcblx0XHRjb25zdCBpc1NhbWUgPSBsb2NhbEhhc2ggPT09IGVudHJ5Lmhhc2g7XG5cdFxuXHRcdC8vY29uc29sZS5sb2coYFx1RDgzRFx1REQyMiBMb2NhbCBoYXNoOiAgJHtsb2NhbEhhc2h9YCk7XG5cdFx0Ly9jb25zb2xlLmxvZyhgXHVEODNEXHVEQ0U2IENhY2hlZCBoYXNoOiAke2VudHJ5Lmhhc2h9YCk7XG5cdFx0Ly9jb25zb2xlLmxvZyhpc1NhbWUgPyBgXHUyNzA1IEZpbGUgaXMgdXAgdG8gZGF0ZS5gIDogYFx1RDgzRFx1REQwMSBGaWxlIG5lZWRzIHVwZGF0ZS5gKTtcblx0XG5cdFx0cmV0dXJuIGlzU2FtZTtcblx0fVxuXHRcblxuXHRhc3luYyB1cGRhdGVDYWNoZSh2YXVsdFBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nLCBnaXRodWJQYXRoOiBzdHJpbmcsIHNhdmVOb3c6IGJvb2xlYW4gPSB0cnVlKSB7XG5cdFx0dGhpcy5jYWNoZVt2YXVsdFBhdGhdID0ge1xuXHRcdFx0aGFzaDogdGhpcy5oYXNoQ29udGVudChjb250ZW50KSxcblx0XHRcdGdpdGh1YlBhdGhcblx0XHR9O1xuXHRcdGlmIChzYXZlTm93KSBhd2FpdCB0aGlzLnNhdmUoKTtcblx0fVxuXG5cdGdldENhY2hlKCk6IFRvb2xraXRGaWxlQ2FjaGUge1xuXHRcdHJldHVybiB0aGlzLmNhY2hlO1xuXHR9XG5cblx0Z2V0VHJhY2tlZEZpbGVzKCk6IHN0cmluZ1tdIHtcblx0XHRyZXR1cm4gT2JqZWN0LmtleXModGhpcy5jYWNoZSk7XG5cdH1cblxuXHRnZXRHaXRIdWJQYXRoKHZhdWx0UGF0aDogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcblx0XHRyZXR1cm4gdGhpcy5jYWNoZVt2YXVsdFBhdGhdPy5naXRodWJQYXRoO1xuXHR9XG5cblx0cmVzZXRDYWNoZSgpIHtcblx0XHR0aGlzLmNhY2hlID0ge307XG5cdH1cblxuXHRhc3luYyByZW1vdmVGcm9tQ2FjaGUodmF1bHRQYXRoOiBzdHJpbmcpIHtcblx0XHRkZWxldGUgdGhpcy5jYWNoZVt2YXVsdFBhdGhdO1xuXHRcdGF3YWl0IHRoaXMuc2F2ZSgpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgbm9ybWFsaXplUGF0aCwgVmF1bHQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBkaXJuYW1lLCBiYXNlbmFtZSwgam9pbiB9IGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgcHJvbWlzZXMgYXMgZnMgfSBmcm9tICdmcyc7XG5cbmV4cG9ydCBjbGFzcyBCYWNrdXBNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSB2YXVsdDogVmF1bHQpIHt9XG5cbiAgLyoqXG4gICAqIE1pcnJvciBldmVyeSB2YXVsdCBmaWxlIChleGNsdWRpbmcgLm9ic2lkaWFuICYgYmFja3VwcykgaW50byBhIHRpbWVzdGFtcGVkIGZvbGRlcixcbiAgICogdGhlbiBwcnVuZSB0byBrZWVwIG9ubHkgdGhlIGxhdGVzdCBOIGZ1bGwgc25hcHNob3RzLlxuICAgKiBAcGFyYW0gbGFiZWwgT3B0aW9uYWwgc3VmZml4IGZvciB0aGUgYmFja3VwIGZvbGRlciBuYW1lXG4gICAqIEBwYXJhbSBtYXhGdWxsQmFja3VwcyBOdW1iZXIgb2YgZnVsbCBzbmFwc2hvdHMgdG8gcmV0YWluIChkZWZhdWx0OiA1KVxuICAgKi9cbiAgYXN5bmMgYmFja3VwVmF1bHRNaXJyb3IobGFiZWw/OiBzdHJpbmcsIG1heEZ1bGxCYWNrdXBzOiBudW1iZXIgPSA1KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCB0cyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9bOi5dL2csICctJyk7XG4gICAgY29uc3QgdGFnID0gbGFiZWwgPyBgLSR7bGFiZWx9YCA6ICcnO1xuICAgIGNvbnN0IGJhc2UgPSBub3JtYWxpemVQYXRoKGAudmF1bHQtYmFja3Vwcy9mdWxsLyR7dHN9JHt0YWd9YCk7XG4gICAgY29uc29sZS5sb2coYFtCYWNrdXBNYW5hZ2VyXSBTdGFydGluZyBtaXJyb3IgYmFja3VwOiAke2Jhc2V9YCk7XG5cbiAgICBhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyhiYXNlKTtcblxuICAgIGZvciAoY29uc3QgZmlsZSBvZiB0aGlzLnZhdWx0LmdldEZpbGVzKCkpIHtcbiAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aCgnLnZhdWx0LWJhY2t1cHMvJykgfHwgZmlsZS5wYXRoLnN0YXJ0c1dpdGgoJy5vYnNpZGlhbi8nKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICBjb25zdCB0YXJnZXQgPSBub3JtYWxpemVQYXRoKGAke2Jhc2V9LyR7ZmlsZS5wYXRofWApO1xuICAgICAgYXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMoZGlybmFtZSh0YXJnZXQpKTtcbiAgICAgIGF3YWl0IHRoaXMudmF1bHQuY3JlYXRlKHRhcmdldCwgY29udGVudCk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1tCYWNrdXBNYW5hZ2VyXSBNaXJyb3IgYmFja3VwIGNvbXBsZXRlLiBQcnVuaW5nIG9sZCBiYWNrdXBzLi4uJyk7XG4gICAgYXdhaXQgdGhpcy5wcnVuZUZ1bGxCYWNrdXBzKGJhc2UsIG1heEZ1bGxCYWNrdXBzKTtcbiAgIC8vIGNvbnNvbGUubG9nKCdbQmFja3VwTWFuYWdlcl0gUHJ1bmluZyBjb21wbGV0ZS4nKTtcbiAgICByZXR1cm4gYmFzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMZWdhY3kgYWxpYXMgZm9yIG1pcnJvci1iYXNlZCBiYWNrdXBzXG4gICAqL1xuICBhc3luYyBiYWNrdXBWYXVsdFRvWmlwKGxhYmVsPzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5iYWNrdXBWYXVsdE1pcnJvcihsYWJlbCk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBvbGRlc3QgZnVsbCBiYWNrdXAgZm9sZGVycywga2VlcGluZyBvbmx5IHRoZSBtb3N0IHJlY2VudCBga2VlcGAgc25hcHNob3RzLlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBwcnVuZUZ1bGxCYWNrdXBzKGN1cnJlbnRQYXRoOiBzdHJpbmcsIGtlZXA6IG51bWJlcikge1xuICAgIGNvbnN0IHJvb3QgPSBub3JtYWxpemVQYXRoKCcudmF1bHQtYmFja3Vwcy9mdWxsJyk7XG4gICAvLyBjb25zb2xlLmxvZyhgW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IHJvb3Q9JHtyb290fSwga2VlcD0ke2tlZXB9YCk7XG5cbiAgICAvLyBlbnN1cmUgdGhlIHJvb3QgZXhpc3RzXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMocm9vdCk7XG4gICAgaWYgKCEoYXdhaXQgdGhpcy52YXVsdC5hZGFwdGVyLmV4aXN0cyhyb290KSkpIHtcbiAgICAgLy8gY29uc29sZS5sb2coJ1tCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiByb290IGZvbGRlciBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBnZXQgZm9sZGVyIG5hbWVzXG4gICAgY29uc3QgbGlzdGluZyA9IGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5saXN0KHJvb3QpO1xuICAgIGNvbnN0IHJhd0ZvbGRlcnM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShsaXN0aW5nKVxuICAgICAgPyBsaXN0aW5nIGFzIHN0cmluZ1tdXG4gICAgICA6ICdmb2xkZXJzJyBpbiBsaXN0aW5nXG4gICAgICA/IChsaXN0aW5nIGFzIGFueSkuZm9sZGVyc1xuICAgICAgOiBbXTtcbiAgICBjb25zdCBmb2xkZXJzID0gcmF3Rm9sZGVycy5tYXAoZiA9PiBiYXNlbmFtZShmKSk7XG4gICAgLy9jb25zb2xlLmxvZygnW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IGZvbGRlcnMgKGJhc2VuYW1lcyk6JywgZm9sZGVycyk7XG5cbiAgICAvLyBzb3J0IGRlc2NlbmRpbmcgc28gbmV3ZXN0IGZpcnN0XG4gICAgY29uc3Qgc29ydGVkID0gWy4uLmZvbGRlcnNdLnNvcnQoKGEsIGIpID0+IGIubG9jYWxlQ29tcGFyZShhKSk7XG4gICAgLy9jb25zb2xlLmxvZygnW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IHNvcnRlZDonLCBzb3J0ZWQpO1xuXG4gICAgLy8gY29tcHV0ZSBmaWxlc3lzdGVtIHJvb3QgdG8gcmVtb3ZlIGZyb21cbiAgICBjb25zdCBhZGFwdGVyQW55ID0gdGhpcy52YXVsdC5hZGFwdGVyIGFzIGFueTtcbiAgICBjb25zdCBmc1Jvb3QgPSBhZGFwdGVyQW55LmJhc2VQYXRoID8gam9pbihhZGFwdGVyQW55LmJhc2VQYXRoLCByb290KSA6IG51bGw7XG4gICAgaWYgKCFmc1Jvb3QpIHtcbiAgICAgIC8vY29uc29sZS53YXJuKCdbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3VwczogY2Fubm90IGRldGVybWluZSBGUyByb290LCBza2lwcGluZyBwcnVuZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHJlbW92ZSBvbGQgc25hcHNob3RzIGJleW9uZCBga2VlcGBcbiAgICBmb3IgKGxldCBpID0ga2VlcDsgaSA8IHNvcnRlZC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbmFtZSA9IHNvcnRlZFtpXTtcbiAgICAgIGNvbnN0IHZhdWx0UGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7cm9vdH0vJHtuYW1lfWApO1xuICAgICAgaWYgKHZhdWx0UGF0aCA9PT0gY3VycmVudFBhdGgpIHtcbiAgICAgICAvLyBjb25zb2xlLmxvZyhgW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IHNraXBwaW5nIGN1cnJlbnQgJHtuYW1lfWApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vY29uc29sZS5sb2coYFtCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiByZW1vdmluZyBGUyBmb2xkZXI6ICR7bmFtZX1gKTtcbiAgICAgIGNvbnN0IHJlbW92ZVBhdGggPSBqb2luKGZzUm9vdCwgbmFtZSk7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBmcy5ybShyZW1vdmVQYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSwgZm9yY2U6IHRydWUgfSk7XG4gICAgICAgIC8vY29uc29sZS5sb2coYFtCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiByZW1vdmVkICR7cmVtb3ZlUGF0aH1gKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAvLyBjb25zb2xlLmVycm9yKGBbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3VwczogZmFpbGVkIHRvIHJlbW92ZSAke3JlbW92ZVBhdGh9YCwgZSk7XG4gICAgICB9XG4gICAgICAvLyBhbHNvIGNsZWFuIHVwIHZhdWx0IGluZGV4XG4gICAgICBjb25zdCBhZiA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHZhdWx0UGF0aCk7XG4gICAgICBpZiAoYWYpIHtcbiAgICAgICAgYXdhaXQgdGhpcy52YXVsdC5kZWxldGUoYWYpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWN1cnNpdmVseSBlbnN1cmVzIHRoYXQgYSBkaXJlY3RvcnkgZXhpc3RzIGluIHRoZSB2YXVsdC5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZW5zdXJlRm9sZGVyRXhpc3RzKGZvbGRlclBhdGg6IHN0cmluZykge1xuICAgIGlmICghZm9sZGVyUGF0aCB8fCAoYXdhaXQgdGhpcy52YXVsdC5hZGFwdGVyLmV4aXN0cyhmb2xkZXJQYXRoKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgcGFyZW50ID0gZGlybmFtZShmb2xkZXJQYXRoKTtcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyhwYXJlbnQpO1xuICAgIGF3YWl0IHRoaXMudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBLHlCQUFBQTtBQUFBLEVBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUMsbUJBU087OztBQ1RQLElBQUFDLG1CQWlCTzs7O0FDaEJQLElBQUFDLG1CQUFvRDs7O0FDdUIzQyxJQUFNLHFCQUFnQztBQUFBLEVBQzNDO0FBQUEsSUFDRSxJQUFJO0FBQUEsSUFDSixPQUFPO0FBQUEsSUFDUCxNQUFNO0FBQUEsSUFDTixRQUFRO0FBQUEsSUFDUixXQUFXO0FBQUEsSUFDWCxZQUFZLENBQUMsRUFBRTtBQUFBLEVBQ2pCO0FBQUEsRUFDQTtBQUFBLElBQ0UsSUFBSTtBQUFBLElBQ0osT0FBTztBQUFBLElBQ1AsTUFBTTtBQUFBLElBQ04sUUFBUTtBQUFBLEVBQ1Y7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJO0FBQUEsSUFDSixP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O0FBQUEsVUFDdkIsQ0FBQztBQUFBLFFBQ0g7QUFBQSxNQUNGO0FBRUEsWUFBTSxRQUFRLElBQUksU0FBUztBQUczQixZQUFNLFNBQVM7QUFDZixVQUFJLENBQUUsTUFBTSxLQUFLLElBQUksTUFBTSxRQUFRLE9BQU8sTUFBTSxHQUFJO0FBQ2xELGNBQU0sS0FBSyxJQUFJLE1BQU0sT0FBTyxRQUFRLEVBQUU7QUFBQSxNQUN4QztBQUNBLFdBQUssU0FBUyxlQUFtQjtBQUNqQyxXQUFLLFNBQVMsbUJBQW1CO0FBQ2pDLFlBQU0sS0FBSyxhQUFhO0FBQ3hCLFdBQUssZ0JBQWdCO0FBRXJCLHlCQUFtQjtBQUFBLElBQ3JCLFNBQVMsS0FBSztBQUNaLGNBQVEsTUFBTSwrQkFBMEIsR0FBRztBQUFBLElBQzdDLFVBQUU7QUFFQSxrQkFBWSxNQUFNO0FBQ2xCLFVBQUksS0FBSyxZQUFhLE1BQUssWUFBWSxRQUFRO0FBQy9DLFVBQUk7QUFBQSxRQUNGLG1CQUNJLHVEQUNBO0FBQUEsTUFDTjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBSUE7IiwKICAibmFtZXMiOiBbIkluc3RhbGxpbmdNb2RhbCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJjYXBpdGFsaXplRmlyc3QiLCAiY2FwaXRhbGl6ZUZpcnN0IiwgIlNJWkVfTUFQIiwgIm91dCIsICJzIiwgImVudHJ5IiwgImZlYXR1cmVzQnlMZXZlbCIsICJwcm9nR3JvdXBzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgInBhdGgiLCAiaW1wb3J0X29ic2lkaWFuIiwgImZzIiwgIkluc3RhbGxpbmdNb2RhbCIsICJwYXRoIiwgImNvbnRlbnQiXQp9Cg==
