/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  InstallingModal: () => InstallingModal2,
  default: () => VVunderloreToolkitPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian9 = require("obsidian");

// src/settings.ts
var import_obsidian7 = require("obsidian");

// src/firstinstallconfirm.ts
var import_obsidian5 = require("obsidian");

// src/editions.ts
var AVAILABLE_EDITIONS = [
  {
    id: "5e-2014",
    label: "D&D 5E (2014)",
    repo: "5etools-mirror-3/5etools-2014-src",
    parser: "5e-json",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-2014-src/main/data",
    categories: [""]
  },
  {
    id: "5e-2025",
    label: "D&D 5E (2025)",
    repo: "5etools-mirror-3/5etools-src",
    parser: "5e-2025",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-src/main/data"
  }
];

// src/parsers/5e-json/installer.ts
var installer_exports = {};
__export(installer_exports, {
  importEditionData: () => importEditionData
});
var import_obsidian = require("obsidian");

// src/parsers/5e-json/helpers/sourceMap.ts
var SOURCE_NAME_MAP = {
  // Core rulebooks
  PHB: "Player's Handbook",
  MM: "Monster Manual",
  DMG: "Dungeon Master's Guide",
  // Official expansions & adventure modules
  CoS: "Curse of Strahd",
  OotA: "Out of the Abyss",
  PotA: "Princes of the Apocalypse",
  HotDQ: "Hoard of the Dragon Queen",
  RoT: "Rise of Tiamat",
  SKT: "Storm King's Thunder",
  TftYP: "Tales from the Yawning Portal",
  ToA: "Tomb of Annihilation",
  // Supplemental guides
  XGE: "Xanathar's Guide to Everything",
  VGM: "Volo's Guide to Monsters",
  TCE: "Tasha's Cauldron of Everything",
  EGW: "Eberron: Rising from the Last War",
  ERLW: "Explorer's Guide to Wildemount",
  MTF: "Monsters of the Multiverse",
  VRGR: "Van Richten's Guide to Ravenloft",
  // Additional sourcebooks
  AAG: "Astral Adventurer\u2019s Guide",
  AI: "Acquisitions Incorporated",
  AitFRAVFT: "Adventures in the Forgotten Realms: A Visual Field Test",
  BMT: "Big Monster Tome",
  DoDk: "Dragon of Darkkeep",
  FTD: "Fizban\u2019s Treasury of Dragons",
  GGR: "Guildmaster\u2019s Guide to Ravnica",
  GHLoE: "Ghosts of the Horizon: Light Over Elensaria",
  IDRotF: "Icewind Dale: Rime of the Frostmaiden",
  LLK: "Lost Laboratory of Kwalish",
  SatO: "Sapphire of Truth",
  SCC: "Strixhaven: Curriculum of Chaos",
  TDCSR: "The Dungeon Coach\u2019s Rulebook",
  JttRC: "Journeys through the Radiant Citadel",
  "AitFR-AVT": "Adventures in the Forgotten Realms: A Verdant Tomb",
  "AitFR-FCD": "Adventures in the Forgotten Realms: From Cyan Depths",
  RMR: "Dungeons and Dragons: Rick and Morty",
  SCAG: "Sword Coast Adventurer's Guide",
  EEPC: "Elemental Evil Player's Companion",
  MOT: "Mythic Odysseys of Theros",
  WBtW: "The Wild Beyond the Witchlight",
  BGDIA: "Baldur's Gate: Descent Into Avernus",
  ToFW: "Turn of Fortune's Wheel",
  CoA: "Chains of Asmodeus",
  CRCotN: "Critical Role: Call of the Netherdeep",
  ToD: "Tyranny of Dragons",
  MPMM: "Mordenkainen Presents: Monsters of the Multiverse",
  LoX: "Light of Xaryxis",
  QftIS: "Quests from the Infinite Staircase",
  WDH: "Waterdeep: Dragon Heist",
  WDMM: "Waterdeep: Dungeon of the Mad Mage",
  PaBTSO: "Phandelver and Below: The Shattered Obelisk",
  CM: "Candlekeep Mysteries",
  GoS: "Ghosts of Saltmarsh",
  DSotDQ: "Dragonlance: Shadow of the Dragon Queen",
  KftGV: "Keys from the Golden Vault",
  SDW: "Essentials Kit: Sleeping Dragon's Wake",
  DoSI: "Dragons of Stormwreck Isle",
  GotSF: "Giants of the Star Forge",
  DIP: "Essentials Kit: Dragon of Icespire Peak",
  SLW: "Essentials Kit: Storm Lord's Wrath",
  IMR: "Infernal Machine Rebuild",
  VEoR: "Vecna: Eve of Ruin",
  PSI: "Plane Shift: Innistrad",
  AATM: "Adventure Atlas: The Mortuary",
  PSZ: "Plane Shift: Zendikar",
  DC: "Essentials Kit: Divine Contention",
  LMoP: "Lost Mine of Phandelver",
  RMBRE: "The Lost Dungeon of Rickedness: Big Rick Energy",
  HftT: "Hunt for the Thessalhydra",
  PSX: "Plane Shift: Ixalan",
  HFStCM: "Heroes' Feast: Saving the Childrens Menu",
  SjA: "Spelljammer Academy",
  LK: "Lightning Keep",
  RtG: "Return to the Glory",
  TTP: "The Tortle Package",
  LR: "Locathah Rising",
  PSA: "Plane Shift: Amonkhet",
  OGA: "One Grung Above",
  "NRH-TLT": "Nerds Restoring Harmony: The Lost Tomb",
  "NRH-AT": "Nerds Restoring Harmony: Adventure Together",
  BGG: "Bigby Presents: Glory of the Giants",
  RoTOS: "The Rise of Tiamat Online Supplement",
  XMtS: "X Marks the Spot",
  "HAT-LMI": "Honor Among Theives: Legendary Magic Items",
  DitLCoT: "Descent into the Lost Caverns of Tsojcanth",
  "AitFR-DN": "Adventures in the Forgotten Realms: Deepest Night",
  "AitFR-THP": "Adventures in the Forgotten Realms: The Hidden Pages",
  BAM: "Boo's Astral Menagerie",
  AZfyT: "A Zib for Your Thougts",
  MCV2DC: "Monstrous Compendium Volume 2: Dragonlance Creatures",
  PSK: "Plane Shift: Kaladesh",
  PSD: "Plane Shift: Dominaria",
  AWM: "Adventure with Muk",
  UATheMysticClass: "Unearthed Arcana: The Mystic Class",
  ALCurseOfStrahd: "Adventurers League: Curse of Strahd",
  ALElementalEvil: "Adventurers League: Elemental Evil",
  ALRageOfDemons: "Adventurers League: Rage of Demons"
};
function getFullSourceName(abbrev, editionId) {
  let name = SOURCE_NAME_MAP[abbrev] ?? abbrev;
  if (abbrev === "PHB") {
    if (editionId?.includes("2014")) name += " (2014)";
    else if (editionId?.includes("2025")) name += " (2025)";
  }
  return name;
}

// src/parsers/5e-json/helpers/tagReplacer.ts
function replace5eTags(input) {
  let text;
  if (Array.isArray(input)) {
    text = input.join(" ");
  } else if (typeof input === "string") {
    text = input;
  } else {
    text = String(input ?? "");
  }
  return text.replace(
    /\{@(spell|item|creature|race) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, __, name) => `[[${capitalizeEach(name)}]]`
  ).replace(
    /\{@(condition|status|action|skill) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, tag, name) => `[[${capitalize(tag)}s#${name}|${capitalizeEach(name)}]]`
  ).replace(
    /\{@classFeature ([^|}]+)\|([^|}]+)(?:\|[^}]+)?\}/g,
    (_, feature, cls) => `[[${cls}#${feature}]]`
  ).replace(/\{@(book|filter) ([^|}]+)(?:\|[^}]+)?\}/g, (_, __, txt) => txt).replace(/\{@note ([^}]+)\}/g, (_, note) => `*${note}*`).replace(/\{@(damage|dice|dc|hit|sense) ([^}]+)\}/g, (_, __, value) => value).replace(/\{@chance ([^|}]+)(?:\|[^}]+)?\}/g, (_, value) => `${value}%`).replace(/\{@quickref ([^|}]+)(?:\|[^|]*\|[^}]*)?\}/g, (_, term) => {
    const known = [
      "difficult terrain",
      "total cover",
      "half cover",
      "three-quarters cover",
      "heavily obscured",
      "lightly obscured"
    ];
    return known.includes(term.toLowerCase()) ? `[[Rules#${capitalizeEach(term)}]]` : term;
  }).replace(/\{\@5etools\s+([^|}]+)\|[^}]+\}/g, "$1").replace(/\{@recharge\s*([^}]+)\}/g, (_, num) => `(recharge: ${num.trim()})`).replace(/\{@(scaledice|scaledamage)[^}]*\|([^|}]+)\}/g, (_, __, value) => value).replace(/\{@d20[^}]*\}/g, "").replace(/\{@[^}]+\}/g, "");
}
function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
function capitalizeEach(str) {
  return str.split(" ").map(capitalize).join(" ");
}

// src/parsers/5e-json/helpers/markdownTable.ts
function renderMarkdownTable(entry) {
  if (entry.type !== "table" || !Array.isArray(entry.rows)) return "";
  const caption = entry.caption ? `##### ${entry.caption}
` : "";
  const headers = (entry.colLabels ?? []).map((h) => replace5eTags(h.trim()));
  const headerRow = `| ${headers.join(" | ")} |`;
  const dividerRow = `| ${headers.map(() => ":--").join(" | ")} |`;
  const bodyRows = entry.rows.map((row) => {
    const cells = row.map((cell) => {
      if (typeof cell === "string") return replace5eTags(cell);
      if (typeof cell === "object") {
        if (cell.roll?.exact !== void 0) return `${cell.roll.exact}`;
        if (cell.roll?.min !== void 0 && cell.roll?.max !== void 0) {
          return `${cell.roll.min}\u2013${cell.roll.max}`;
        }
        return replace5eTags(JSON.stringify(cell));
      }
      return replace5eTags(String(cell));
    });
    return `| ${cells.join(" | ")} |`;
  });
  return `${caption}${headerRow}
${dividerRow}
${bodyRows.join("\n")}`;
}

// src/parsers/5e-json/helpers/formatEntry.ts
function formatEntry(entry) {
  if (typeof entry === "string") {
    const cleaned = entry.trim();
    if (!cleaned || cleaned === "}") return "";
    return replace5eTags(cleaned);
  }
  if (entry.type === "entries" && Array.isArray(entry.entries)) {
    const body = entry.entries.map(formatEntry).filter((str) => str.trim().length > 0).join("\n\n");
    return entry.name ? `##### ${entry.name}
${body}` : body;
  }
  if (entry.type === "list" && Array.isArray(entry.items)) {
    return entry.items.map((i) => `- ${replace5eTags(typeof i === "string" ? i : JSON.stringify(i))}`).join("\n");
  }
  if (entry.type === "table" && Array.isArray(entry.rows)) {
    return renderMarkdownTable(entry);
  }
  if (entry.type === "quote" && Array.isArray(entry.entries)) {
    const quote = entry.entries.map(formatEntry).join(" ").trim();
    const author = entry.by ? ` \u2014 ${entry.by}` : "";
    return `*"${quote}${author}"*`;
  }
  if (entry.type === "inset" && Array.isArray(entry.entries)) {
    const inset = entry.entries.map(formatEntry).join("\n").trim();
    return `> ${inset.replace(/\n/g, "\n> ")}`;
  }
  if (entry.type === "refClassFeature" && typeof entry.classFeature === "string") {
    const [name] = entry.classFeature.split("|");
    const anchor = name.replace(/[^\w\s-]/g, "").replace(/\s+/g, "-").toLowerCase();
    return `[[#${anchor}]]`;
  }
  return "";
}

// src/parsers/5e-json/bestiary.ts
var skippedMonsters = [];
var SIZE_MAP = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var ALIGNMENT_MAP = {
  L: "Lawful",
  N: "Neutral",
  C: "Chaotic",
  G: "Good",
  E: "Evil",
  U: "Unaligned"
};
function capitalizeFirst(str) {
  const s = String(str || "");
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function formatSizeAbbrev(abbrev) {
  return SIZE_MAP[abbrev] || abbrev;
}
function formatAlignmentAbbrev(abbrev) {
  return abbrev.trim().split(/\s+/).map((letter) => ALIGNMENT_MAP[letter] || letter).join(" ");
}
var RAW_NPCS = [
  "Abjurer",
  "Acolyte",
  "Apprentice Wizard",
  "Archdruid",
  "Archer",
  "Archmage",
  "Assassin",
  "Bandit",
  "Bandit Captain",
  "Bard",
  "Berserker",
  "Blackguard",
  "Champion",
  "Commoner",
  "Conjurer",
  "Cult Fanatic",
  "Cultist",
  "Diviner",
  "Druid (NPC)",
  "Druid NPC",
  "Enchanter",
  "Evoker",
  "Gladiator",
  "Guard",
  "Illusionist",
  "Knight",
  "Kraken Priest",
  "Mage",
  "Martial Arts Adept",
  "Master Thief",
  "Necromancer",
  "Noble",
  "Priest",
  "Scout",
  "Spy",
  "Swashbuckler",
  "Thug",
  "Transmuter",
  "Tribal Warrior",
  "Veteran",
  "War Priest",
  "Warlock of the Archfey",
  "Warlock of the Fiend",
  "Warlock of the Great Old One",
  "Warlord"
];
var NORMALIZED_NPC_NAMES = new Set(RAW_NPCS.map((n) => normalizeName(n)));
function normalizeName(name) {
  return name.replace(/\s+/g, " ").trim().toLowerCase();
}
function categorizeCreature(monster) {
  const typeValue = monster.type;
  const name = monster.name;
  const t = typeof typeValue === "string" ? typeValue.toLowerCase() : typeValue?.type?.toLowerCase() || String(typeValue).toLowerCase();
  const normalizedName = normalizeName(name);
  if (monster.isNpc || monster.isNamedCreature) return "Story NPCs";
  if (t === "beast") return "Beasts";
  if (t === "humanoid" && NORMALIZED_NPC_NAMES.has(normalizedName)) return "Non-Beasts";
  if (t === "humanoid") return "Monsters";
  return "Monsters";
}
function renderAbilitiesTable(str, dex, con, int, wis, cha) {
  return [
    `| STR | DEX | CON | INT | WIS | CHA |`,
    `| --- | --- | --- | --- | --- | --- |`,
    `| ${str} | ${dex} | ${con} | ${int} | ${wis} | ${cha} |`
  ].join("\n");
}
function renderEntry(entry) {
  const name = entry.name;
  let descriptions = [];
  if (Array.isArray(entry.entries)) {
    descriptions = entry.entries;
  } else if (typeof entry.entries === "string") {
    descriptions = [entry.entries];
  } else if (Array.isArray(entry.desc)) {
    descriptions = entry.desc;
  } else if (typeof entry.desc === "string") {
    descriptions = [entry.desc];
  }
  const raw = descriptions.join(" ");
  const desc = replace5eTags(raw);
  return `***${name}.*** ${desc}`;
}
function parseBestiaryFile(json, editionId) {
  if (!json.monster) return [];
  json._editionId = editionId;
  const validMonsters = json.monster.filter((m) => {
    const acVal = Array.isArray(m.ac) ? m.ac[0]?.ac ?? m.ac[0] : typeof m.ac === "object" ? m.ac?.ac ?? null : m.ac;
    const hpVal = typeof m.hp === "object" ? m.hp?.average ?? m.hp?.hp ?? null : m.hp;
    return acVal != null && hpVal != null && !isNaN(Number(acVal)) && !isNaN(Number(hpVal));
  });
  const allNames = new Set(json.monster.map((m) => m.name));
  const validNames = new Set(validMonsters.map((m) => m.name));
  const missing = [...allNames].filter((name) => !validNames.has(name));
  return validMonsters.map((monster) => {
    const name = monster.name;
    const safeName = name.replace(/\//g, "-");
    const rawSize = monster.size || "M";
    const rawAlignment = Array.isArray(monster.alignment) ? monster.alignment.join(" ") : monster.alignment || "N";
    let rawType = "Unknown";
    if (typeof monster.type === "string") {
      rawType = capitalizeFirst(monster.type);
    } else if (monster.type?.type) {
      const base = capitalizeFirst(monster.type.type);
      const tags = monster.type.tags?.length ? ` (${monster.type.tags.map(capitalizeFirst).join(", ")})` : "";
      rawType = `${base}${tags}`;
    }
    monster._parsedType = rawType;
    const ac = Array.isArray(monster.ac) ? monster.ac[0].ac : monster.ac;
    const hp = monster.hp?.average ?? monster.hp;
    const cr = monster.cr;
    if (!ac && !hp) {
      skippedMonsters.push(monster.name);
      return null;
    }
    const abilities = Array.isArray(monster.ability) ? monster.ability : [monster.str, monster.dex, monster.con, monster.int, monster.wis, monster.cha];
    const [str = 10, dex = 10, con = 10, int = 10, wis = 10, cha = 10] = abilities;
    const speedList = [];
    if (typeof monster.speed === "object") {
      for (const [mode, val] of Object.entries(monster.speed)) {
        if (mode === "canHover") continue;
        if (val && typeof val === "object" && "number" in val) {
          const num = val.number;
          const cond = val.condition ? ` ${val.condition}` : "";
          speedList.push(`${mode} ${num} ft.${cond}`);
        } else {
          speedList.push(`${mode} ${val} ft.`);
        }
      }
    } else {
      speedList.push(`${monster.speed} ft.`);
    }
    const speed = speedList.join(", ");
    let source = getFullSourceName(monster.source, editionId);
    source = source.replace(/:/g, " -");
    const category = categorizeCreature(monster);
    const fm = buildFM(monster, BESTIARY_META_DEFS);
    const yaml = serializeFrontmatter(fm, BESTIARY_META_DEFS);
    const savingThrows = fm[FM_FIELDS.SAVING_THROWS] || [];
    const skills = fm[FM_FIELDS.SKILLS] || [];
    const senses = fm[FM_FIELDS.SENSES] || [];
    const languages = fm[FM_FIELDS.LANGUAGES] || [];
    let body = `# ${name}

${formatSizeAbbrev(rawSize)} ${rawType}, ${formatAlignmentAbbrev(rawAlignment)}

**Armor Class**: ${ac}
**Hit Points**: ${hp}
**Speed**: ${speed}
` + (savingThrows.length ? `**Saving Throws**: ${savingThrows.join(", ")}
` : "") + (skills.length ? `**Skills**: ${skills.join(", ")}
` : "") + (senses.length ? `**Senses**: ${senses.join(", ")}
` : "") + (languages.length ? `**Languages**: ${languages.join(", ")}
` : "") + `**Challenge**: ${cr}

` + renderAbilitiesTable(str, dex, con, int, wis, cha);
    if (monster.trait) body += `

### Traits
${monster.trait.map(renderEntry).join("\n\n")}`;
    if (monster.action) body += `

### Actions
${monster.action.map(renderEntry).join("\n\n")}`;
    if (monster.reaction) body += `

### Reactions
${monster.reaction.map(renderEntry).join("\n\n")}`;
    if (monster.legendary) body += `

### Legendary Actions
${monster.legendary.map(renderEntry).join("\n\n")}`;
    const content = `---
${yaml}
---

${body}`;
    return {
      path: `${category}/${safeName}.md`,
      content
    };
  });
}

// src/parsers/5e-json/items.ts
function capitalizeFirst2(input) {
  if (typeof input !== "string" || input.length === 0) return "";
  const s = input.trim();
  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
var DAMAGE_TYPE_MAP = {
  P: "Piercing",
  B: "Bludgeoning",
  S: "Slashing",
  N: "Necrotic",
  R: "Radiant",
  F: "Fire",
  C: "Cold",
  L: "Lightning",
  T: "Thunder",
  A: "Acid",
  H: "Healing",
  U: "Force",
  V: "Psychic"
};
var PROPERTY_MAP = {
  A: "Ammunition",
  F: "Finesse",
  H: "Heavy",
  L: "Light",
  R: "Reload",
  S: "Special",
  "2H": "Two-Handed",
  T: "Thrown",
  V: "Versatile"
};
var ITEM_TYPE_MAP = {
  $C: "Currency",
  $G: "Gem",
  A: "Ammunition",
  "AIR|DMG": "Vehicle (air)",
  "AF|DMG": "Future Ammo",
  AT: "Artisan Tools",
  EXP: "Explosive",
  FD: "Food and Drink",
  G: "Gear",
  GS: "Game",
  HA: "Heavy Armor",
  "IDG|TDCSR": "Illicit Drug",
  INS: "Instrument",
  LA: "Light Armor",
  M: "Weapon",
  MA: "Medium Armor",
  MNT: "Mounts and Vehicles",
  ODH: "Miscellaneous",
  P: "Consumable",
  R: "Ranged Weapon",
  RD: "Rod",
  RG: "Ring",
  S: "Shield",
  SC: "Scroll",
  SCF: "Spell Casting Focus",
  SHP: "Ship",
  T: "Tool",
  TAH: "Mounts and Vehicles",
  TG: "Trade Goods",
  VEH: "Mounts and Vehicles",
  WD: "Wand"
};
var codeFolderMap = {
  // Weapons & Armor
  "A": "Weapons and Armor/Ammunition",
  "M": "Weapons and Armor/Weapons",
  "R": "Weapons and Armor/Ranged Weapons",
  "S": "Weapons and Armor/Shields",
  "LA": "Weapons and Armor/Armor/Light Armor",
  "MA": "Weapons and Armor/Armor/Medium Armor",
  "HA": "Weapons and Armor/Armor/Heavy Armor",
  "EXP": "Weapons and Armor/Weapons/Explosives",
  // Future Ammo (AF|DMG → rawCode "AF")
  "AF": "Weapons and Armor/Ammunition/Future Ammo",
  // Magical Items
  "RD": "Magical Items/Rods",
  "RG": "Magical Items/Rings",
  "SC": "Magical Items/Scrolls",
  "SCF": "Magical Items/Spell Casting Focus",
  "WD": "Magical Items/Wands",
  // Valuables
  "$G": "Valuables/Gems",
  // Currency (rawCode becomes "C" after stripping $)
  "C": "Valuables/Currency",
  "TG": "Valuables/Trade Goods",
  // Artisan Goods
  "AT": "Artisan Goods/Tools",
  "T": "Artisan Goods/Tools",
  "INS": "Artisan Goods/Instruments",
  "GS": "Artisan Goods/Games",
  // Gear & Mounts
  "G": "Gear",
  // Mounts & Vehicles
  "MNT": "Gear/Mounts and Vehicles",
  "TAH": "Gear/Mounts and Vehicles",
  "VEH": "Gear/Mounts and Vehicles",
  // Air vehicles (AIR|DMG → rawCode "AIR")
  "AIR": "Gear/Mounts and Vehicles/Air",
  // Consumables
  "P": "Consumables",
  // Food & Drink
  "FD": "Consumables/Food and Drink",
  // Illicit Drugs (IDG|TDCSR → rawCode "IDG")
  "IDG": "Gear/Illicit Drugs",
  // Miscellaneous (ODH)
  "ODH": "Gear/Miscellaneous"
};
function parseItemsFile(json, editionId) {
  const rawItems = [];
  if (Array.isArray(json.baseitem)) rawItems.push(...json.baseitem);
  if (Array.isArray(json.item)) rawItems.push(...json.item);
  if (Array.isArray(json.object)) rawItems.push(...json.object);
  if (Array.isArray(json.vehicle)) rawItems.push(...json.vehicle);
  if (!rawItems.length) return [];
  const baseNames = new Set(
    Array.isArray(json.baseitem) ? json.baseitem.map((b) => b.name) : []
  );
  const out = [];
  for (const it of rawItems) {
    const name = it.name;
    const safeName = name.replace(/[\/\\:]/g, "-");
    const rawCode = (it.type || "").split("|")[0].split("|")[0].replace(/^\$/, "");
    let folder = codeFolderMap[rawCode] ?? "Miscellaneous";
    if (it.bonusWeapon) {
      folder = `${folder}/Variants`;
    } else {
      const isMagic = !!it.wondrous || !!it.reqAttune || !!it.req_attune || String(it.rarity).toLowerCase().includes("magic");
      if (isMagic) {
        const [, ...rest] = folder.split("/");
        folder = ["Magical Items", ...rest].join("/");
      }
    }
    if ((folder.startsWith("Weapons and Armor/Weapons") || folder.startsWith("Weapons and Armor/Ranged Weapons")) && it.weaponCategory) {
      folder = `${folder}/${capitalizeFirst2(it.weaponCategory)}`;
    }
    json._editionId = editionId;
    const fm = buildFM(it, ITEM_META_DEFS);
    if (rawCode === "M" && it.weaponCategory) {
      fm.type = `${capitalizeFirst2(it.weaponCategory)} Weapon`;
    } else if (ITEM_TYPE_MAP[rawCode]) {
      fm.type = ITEM_TYPE_MAP[rawCode];
    }
    if (Array.isArray(fm.damageTypes)) {
      fm.damageTypes = fm.damageTypes.map(
        (code) => DAMAGE_TYPE_MAP[code] || code
      );
    }
    let yaml = serializeFrontmatter(fm, ITEM_META_DEFS);
    if (Array.isArray(it.packContents)) {
      yaml += "\npackContents:";
      for (const pc of it.packContents) {
        yaml += `
  - item: "${pc.item}"
    quantity: ${pc.quantity}`;
      }
    }
    const frontmatter = `---
${yaml}
---`;
    const lines = [];
    lines.push(`# ${name}`);
    lines.push("");
    const subtitle = it.weapon ? `${capitalizeFirst2(it.weaponCategory)} Weapon` : it.armor ? folder.split("/").pop() || "Armor" : "";
    if (subtitle) lines.push(`### *${subtitle}*`);
    if (it.weapon) {
      lines.push(`**Category**: ${capitalizeFirst2(it.weaponCategory)}`);
      lines.push(`**Damage**: ${it.dmg1 ?? ""}${it.dmg2 ? ` / ${it.dmg2}` : ""}`);
      const typesBody = (Array.isArray(it.dmgType) ? it.dmgType : [it.dmgType]).filter((t) => Boolean(t)).map((t) => DAMAGE_TYPE_MAP[t] || t);
      lines.push(`**Damage Type**: ${typesBody.join(", ")}`);
      lines.push(`**Range**: ${it.range ?? "\u2014"}`);
      lines.push(`**Reload**: ${it.reload ?? "\u2014"}`);
      if (it.ammoType) lines.push(`**Ammo Type**: ${it.ammoType}`);
      if (Array.isArray(it.property) && it.property.length) {
        const propsBody = it.property.map((p) => PROPERTY_MAP[p] || p);
        lines.push(`**Properties**: ${propsBody.join(", ")}`);
      }
    }
    if (it.armor) {
      lines.push(`**Armor Class**: ${it.ac}`);
      if (it.stealth) lines.push(`**Stealth Disadvantage**: true`);
      lines.push("");
    }
    const desc = it.entries ?? it.desc;
    if (desc) {
      for (const p of Array.isArray(desc) ? desc : [desc]) {
        if (typeof p === "string") {
          for (const line of replace5eTags(p).split("\n")) {
            lines.push(line);
          }
          lines.push("");
        } else if (p && typeof p === "object") {
          if (lines[lines.length - 1] === "") {
            lines.pop();
          }
          lines.push(`#### ${p.name}`);
          const sub = Array.isArray(p.entries) ? p.entries : [];
          for (const sp of sub) {
            for (const line of replace5eTags(sp).split("\n")) {
              lines.push(line);
            }
          }
          lines.push("");
        }
      }
    }
    const body = lines.join("\n");
    out.push({ path: `Items/${folder}/${safeName}.md`, content: `${frontmatter}

${body}` });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-json/helpers/frontmatter.ts
function cap(str) {
  if (typeof str !== "string") return "";
  return str.charAt(0).toUpperCase() + str.slice(1);
}
var ABILITY_FULL = {
  str: "Strength",
  dex: "Dexterity",
  con: "Constitution",
  int: "Intelligence",
  wis: "Wisdom",
  cha: "Charisma"
};
var SIZE_MAP2 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var FM_FIELDS = {
  ABILITY_BONUSES: "ability_bonuses",
  AC: "AC",
  ALIGNMENT: "Alignment",
  AMMO_TYPE: "Ammo Type",
  ARMOR_PROFICIENCIES: "armor-prof",
  ATTACK_TYPE: "attack_type",
  ATTUNEMENT: "Attunement",
  ATTUNE_REQ: "Attune_Req",
  CASTING_TIME: "casting_time",
  CHARISMA: "charisma",
  CHA_MOD: "cha_mod",
  CONCENTRATION: "concentration",
  CONDITION_IMM: "cond_immunity",
  CONSTITUTION: "constitution",
  CON_MOD: "con_mod",
  COST: "cost",
  COMPONENTS: "Components",
  CHALLENGE_RATING: "CR",
  DAMAGE_TYPE: "damage_type",
  DAMAGE_TYPES: "damageTypes",
  DAMAGE: "damage",
  DAMAGE_RES: "dmg_resistance",
  DAMAGE_IMM: "dmg_immunity",
  DEXTERITY: "dexterity",
  DEX_MOD: "dex_mod",
  DURATION: "duration",
  RULESET: "ruleset",
  HP: "HP",
  INTELLIGENCE: "intelligence",
  INT_MOD: "int_mod",
  LANGUAGES: "languages",
  LEVEL: "level",
  MAGICAL: "magical",
  MATERIAL: "material",
  NAME: "name",
  PROPERTIES: "properties",
  RANGE: "range",
  RARITY: "rarity",
  RELOAD: "reload",
  RITUAL: "ritual",
  SAVE: "save",
  SAVING_THROWS: "saving_throws",
  SCHOOL: "school",
  SENSES: "senses",
  SIZE: "size",
  SKILLS: "skills",
  SKILL_CHOICE_LIST: "skill_choice_list",
  SOMATIC: "somatic",
  SOURCE: "source",
  SPECIES: "species",
  SPEED: "speed",
  SPELL_CAST_MOD: "Spell Cast Mod",
  SPELL_RANGE: "Range",
  STEALTH_DISADVANTAGE: "stealthDisadvantage",
  STRENGTH: "strength",
  STR_MOD: "str_mod",
  SUBRACES: "subraces",
  TOOL_PROFICIENCIES: "tool-prof",
  TOOL_CHOICE_LIST: "tool_choice_list",
  TRAITS: "traits",
  TYPE: "type",
  VARIANT: "Variant",
  VERBAL: "verbal",
  WEAPON_PROFICIENCIES: "weapon-prof",
  WEIGHT: "weight",
  WISDOM: "wisdom",
  WIS_MOD: "wis_mod"
};
var unifiedArmorProfs = (val) => Array.isArray(val?.armor) ? val.armor.map(cap) : Array.isArray(val) ? val.map(cap) : [];
function unifiedWeaponProfs(val) {
  const rawArr = Array.isArray(val?.weapons) ? val.weapons : Array.isArray(val) ? val : [];
  const out = /* @__PURE__ */ new Set();
  function handleOne(entry) {
    if (Array.isArray(entry)) {
      entry.forEach(handleOne);
      return;
    }
    if (typeof entry === "string") {
      const lit = entry.trim().toLowerCase();
      if (lit === "simple") {
        out.add("Simple Weapons");
      } else if (lit === "martial") {
        out.add("Martial Weapons");
      } else {
        const text = entry.startsWith("{@") ? replace5eTags(entry) : cap(entry);
        out.add(text);
      }
      return;
    }
    if (entry && typeof entry === "object" && entry.proficiency) {
      const name = cap(entry.proficiency);
      out.add(entry.optional ? `${name} (optional)` : name);
    }
  }
  rawArr.forEach(handleOne);
  return [...out];
}
var unifiedSaves = (val) => {
  if (Array.isArray(val)) {
    return val.map(
      (k) => ({
        str: "Strength",
        dex: "Dexterity",
        con: "Constitution",
        int: "Intelligence",
        wis: "Wisdom",
        cha: "Charisma"
      })[k] ?? k.toUpperCase()
    );
  }
  if (typeof val === "object" && val !== null) {
    return Object.keys(val).map((k) => k.toUpperCase());
  }
  return [];
};
var unifiedSkills2 = (val) => {
  if (val && !Array.isArray(val) && typeof val === "object" && // ensure every value is a string or number
  Object.values(val).every((v) => typeof v === "string" || typeof v === "number")) {
    return Object.entries(val).map(
      ([skill, mod]) => `${cap(skill)} ${mod}`.trim()
    );
  }
  if (val && !Array.isArray(val) && typeof val === "object") {
    const nested = val.skills ?? val.skillProf ?? val.skillProficiencies;
    return unifiedSkills2(nested);
  }
  if (!Array.isArray(val)) return [];
  const out = /* @__PURE__ */ new Set();
  for (const e of val) {
    if (e && typeof e === "object" && typeof e.any === "number") {
      out.add(`Choose ${e.any}`);
      continue;
    }
    if (e && typeof e === "object" && e.choose) {
      const cnt = e.choose.count ?? 1;
      out.add(`Choose ${cnt}`);
    }
    if (e && typeof e === "object") {
      for (const [k, v] of Object.entries(e)) {
        if (v === true) out.add(cap(k));
      }
    }
    if (typeof e === "string") {
      out.add(cap(e));
    }
  }
  return [...out];
};
var unifiedToolProfs = (val) => {
  let entries = Array.isArray(val) ? val : Array.isArray(val?.toolProficiencies) ? val.toolProficiencies : Array.isArray(val?.tools) ? val.tools : [];
  const out = /* @__PURE__ */ new Set();
  let sawChoose = false;
  for (const e of entries) {
    if (typeof e === "string") {
      out.add(cap(e));
      continue;
    }
    if (e?.choose) {
      const cnt = e.choose.count ?? 1;
      sawChoose = true;
      out.add(`Choose ${cnt}`);
    }
    for (const [k, v] of Object.entries(e)) {
      if (v === true) {
        out.add(cap(k));
      } else if (typeof v === "number" && k.startsWith("any")) {
        const raw = k.replace(/^any/, "");
        const spaced = raw.replace(/([a-z])([A-Z])/g, "$1 $2").split(" ").map(cap).join(" ");
        out.add(`Choose ${v} ${spaced}`);
      }
    }
  }
  return [...out];
};
var ALL_FIELD_DEFS = [
  // ─── Core ───
  { callSign: "NAME", jsonKey: "name" },
  { callSign: "SOURCE", jsonKey: ["source"], conv: (raw, all) => {
    const out = /* @__PURE__ */ new Set();
    const arr = Array.isArray(raw) ? raw : [raw];
    arr.forEach((src) => out.add(getFullSourceName(src, all._editionId)));
    for (const os of all.otherSources ?? []) out.add(getFullSourceName(os.source, all._editionId));
    for (const rep of all.reprintedAs ?? []) {
      const [, src] = rep.split("|");
      out.add(getFullSourceName(src, all._editionId));
    }
    return [...out];
  } },
  // ─── Proficiencies ───
  { callSign: "ARMOR_PROFICIENCIES", jsonKey: ["armorProficiencies", "armorProfs", "startingProficiencies"], conv: unifiedArmorProfs },
  {
    callSign: "WEAPON_PROFICIENCIES",
    jsonKey: ["weaponProficiencies", "weaponProfs", "startingProficiencies"],
    conv: unifiedWeaponProfs
  },
  { callSign: "TOOL_PROFICIENCIES", jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"], conv: unifiedToolProfs },
  {
    callSign: "TOOL_CHOICE_LIST",
    jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.toolProficiencies) ? raw.toolProficiencies : Array.isArray(raw?.tools) ? raw.tools : [];
      const choice = arr.find((e) => e?.choose);
      return choice?.choose?.from?.map((s) => cap(s)) ?? [];
    }
  },
  { callSign: "SAVING_THROWS", jsonKey: ["save", "proficiency"], conv: unifiedSaves },
  {
    callSign: "SKILLS",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: unifiedSkills2
  },
  {
    callSign: "SKILL_CHOICE_LIST",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.skillProficiencies) ? raw.skillProficiencies : Array.isArray(raw?.skills) ? raw.skills : Array.isArray(raw?.skillProf) ? raw.skillProf : [];
      const choiceObj = arr.find((e) => e?.choose || typeof e.any === "number");
      if (!choiceObj) return [];
      if (choiceObj.choose && Array.isArray(choiceObj.choose.from)) {
        return choiceObj.choose.from.map(cap);
      }
      if (typeof choiceObj.any === "number") {
        return SKILL_OPTIONS;
      }
      return [];
    }
  },
  {
    callSign: "SPELL_CAST_MOD",
    jsonKey: "spellcastingAbility",
    conv: (raw) => {
      const key = String(raw).toLowerCase();
      return ABILITY_FULL[key] || key.toUpperCase();
    }
  },
  // ─── Spells ───
  { callSign: "LEVEL", jsonKey: "level" },
  { callSign: "SCHOOL", jsonKey: "school", conv: (s) => SCHOOL_MAP[s] ?? s },
  { callSign: "CASTING_TIME", jsonKey: "time", conv: formatTime },
  { callSign: "SPELL_RANGE", jsonKey: "range", conv: formatRange },
  { callSign: "DURATION", jsonKey: "duration", conv: formatDuration },
  { callSign: "VERBAL", jsonKey: "components", conv: (c) => !!c.v },
  { callSign: "SOMATIC", jsonKey: "components", conv: (c) => !!c.s },
  { callSign: "MATERIAL", jsonKey: "components", conv: (c) => !!c.m },
  {
    callSign: "COMPONENTS",
    jsonKey: "components",
    conv: (c) => {
      if (!c.m) return [];
      const raw = Array.isArray(c.m) ? c.m : [c.m];
      return raw.map((item) => {
        if (typeof item === "string") return item;
        if (item && typeof item === "object" && typeof item.text === "string") {
          return item.text;
        }
        return null;
      }).filter((comp) => comp !== null);
    }
  },
  { callSign: "ATTACK_TYPE", jsonKey: "attackType" },
  { callSign: "DAMAGE_TYPE", jsonKey: "damageInflict", conv: (d) => Array.isArray(d) ? d[0] : d },
  { callSign: "RITUAL", jsonKey: "ritual" },
  { callSign: "CONCENTRATION", jsonKey: "duration", conv: (ds) => Array.isArray(ds) && ds.some((x) => x.concentration) },
  { callSign: "SAVE", jsonKey: "saveAttr" },
  // ─── Species / Creatures ───
  { callSign: "SPECIES", jsonKey: "name" },
  {
    callSign: "SIZE",
    jsonKey: "size",
    conv: (raw) => {
      if (Array.isArray(raw)) {
        return raw.map((r) => SIZE_MAP2[r] || r);
      } else {
        return SIZE_MAP2[raw] || raw;
      }
    }
  },
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (sp) => {
      if (typeof sp === "number") {
        return [`Walk ${sp} ft.`];
      }
      if (!sp || typeof sp !== "object") return [];
      return Object.entries(sp).filter(([mode]) => mode !== "canHover").map(([mode, v]) => {
        const n = typeof v === "object" && v !== null && "number" in v ? v.number : v;
        const label = mode === "walk" ? "Walk" : cap(mode);
        return `${label} ${n} ft.`;
      });
    }
  },
  { callSign: "LANGUAGES", jsonKey: ["languages", "languageProficiencies"], conv: (arr) => {
    if (!Array.isArray(arr)) return [];
    const out = [];
    for (const lp of arr) {
      if (typeof lp === "string") out.push(cap(lp));
      else if (typeof lp === "object") {
        for (const [lang, val] of Object.entries(lp)) {
          if (val) out.push(cap(lang));
        }
      }
    }
    return [...new Set(out)];
  } },
  { callSign: "SENSES", jsonKey: "senses", conv: (sen) => {
    if (Array.isArray(sen)) return sen.map((s) => s.replace(/^\d+\s*/, "").replace(/^./, (c) => c.toUpperCase()));
    if (sen && typeof sen === "object") return Object.entries(sen).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)} ${v}`);
    return [];
  } },
  {
    callSign: "TRAITS",
    jsonKey: ["classFeatures", "entries"],
    conv: (raw, allJson) => {
      const clsRec = Array.isArray(allJson.class) ? allJson.class[0] : allJson;
      const className = typeof clsRec.name === "string" ? clsRec.name : "";
      const omit = /* @__PURE__ */ new Set([
        "Ability Score Improvement",
        "Archetype Feature",
        "Subclass Feature"
        // add more if you like…
      ]);
      const seen = /* @__PURE__ */ new Set();
      if (Array.isArray(allJson.classFeatures)) {
        return allJson.classFeatures.flatMap((feat) => {
          if (feat && typeof feat === "object" && feat.gainSubclassFeature) return [];
          const rawName = typeof feat === "string" ? feat : typeof feat.classFeature === "string" ? feat.classFeature : "";
          const name = rawName.split("|")[0].trim();
          if (!name || omit.has(name) || seen.has(name)) return [];
          seen.add(name);
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return `[[${className}#${anchor}|${name}]]`;
        });
      }
      const ents = Array.isArray(raw) ? raw : [];
      const featureNames = ents.filter((e) => e?.data?.isFeature && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
      if (featureNames.length) return featureNames;
      return ents.filter((e) => e && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
    }
  },
  { callSign: "AC", jsonKey: "ac", conv: (a) => Array.isArray(a) ? a[0].ac : a },
  { callSign: "HP", jsonKey: "hp", conv: (hp) => hp?.average ?? hp },
  { callSign: "CHALLENGE_RATING", jsonKey: "cr" },
  { callSign: "STRENGTH", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[0] : arr?.str ?? 0 },
  { callSign: "DEXTERITY", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[1] : arr?.dex ?? 0 },
  { callSign: "CONSTITUTION", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[2] : arr?.con ?? 0 },
  { callSign: "INTELLIGENCE", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[3] : arr?.int ?? 0 },
  { callSign: "WISDOM", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[4] : arr?.wis ?? 0 },
  { callSign: "CHARISMA", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[5] : arr?.cha ?? 0 },
  {
    callSign: "ALIGNMENT",
    jsonKey: "alignment",
    conv: (a) => {
      const raw = Array.isArray(a) ? a.join(" ") : typeof a === "string" ? a : String(a);
      const cleaned = raw.replace(/\bA\b/g, "Any").replace(/\bU\b/g, "Unaligned").replace(/\bN\b/g, "Neutral").replace(/\bL\b/g, "Lawful").replace(/\bC\b/g, "Chaotic").replace(/\bG\b/g, "Good").replace(/\bE\b/g, "Evil");
      return formatAlignmentAbbrev(cleaned);
    }
  },
  {
    callSign: "TYPE",
    jsonKey: "type",
    conv: (t) => {
      if (typeof t === "string") {
        return ITEM_TYPE_MAP[t] ?? cap(t);
      }
      if (t && typeof t === "object") {
        const code = String(t.type || "").toUpperCase();
        if (ITEM_TYPE_MAP[code]) {
          return ITEM_TYPE_MAP[code];
        }
        const base = t.type ? cap(t.type) : "Unknown";
        const tags = Array.isArray(t.tags) ? t.tags.map(cap) : [];
        return tags.length ? `${base} (${tags.join(", ")})` : base;
      }
      return void 0;
    }
  },
  // ─── Items ───
  { callSign: "TYPE", jsonKey: "_parsedType" },
  { callSign: "RARITY", jsonKey: "rarity", conv: (r) => {
    const s = String(r || "").toLowerCase();
    return s && s !== "none" ? s[0].toUpperCase() + s.slice(1) : void 0;
  } },
  {
    callSign: "COST",
    jsonKey: "value",
    conv: (raw) => {
      const s = String(raw).trim().toLowerCase();
      let num;
      if (s.endsWith("cp")) {
        num = parseFloat(s);
        return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
      }
      if (s.endsWith("sp")) {
        num = parseFloat(s);
        return num >= 10 ? `${Math.round(num / 10 * 100) / 100}gp` : `${num}sp`;
      }
      if (s.endsWith("gp")) {
        num = parseFloat(s);
        return `${Math.round(num * 100) / 100}gp`;
      }
      num = parseFloat(s) || 0;
      return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
    }
  },
  { callSign: "WEIGHT", jsonKey: "weight" },
  { callSign: "MAGICAL", jsonKey: "wondrous", conv: (_w, all) => !!all.wondrous || !!all.reqAttune },
  { callSign: "VARIANT", jsonKey: "bonusWeapon", conv: (b) => typeof b === "string" && b.startsWith("+") },
  { callSign: "PROPERTIES", jsonKey: "property", conv: (arr) => Array.isArray(arr) ? arr.map((p) => PROPERTY_MAP[p] || p) : [] },
  { callSign: "DAMAGE", jsonKey: "dmg1", conv: (d, all) => d ? all.dmg2 ? `${d} / ${all.dmg2}` : `${d}` : void 0 },
  { callSign: "DAMAGE_TYPES", jsonKey: "dmgType", conv: (dt) => dt == null ? [] : Array.isArray(dt) ? dt : [dt] },
  { callSign: "RANGE", jsonKey: "range" },
  { callSign: "RELOAD", jsonKey: "reload" },
  { callSign: "AMMO_TYPE", jsonKey: "ammoType" },
  { callSign: "STEALTH_DISADVANTAGE", jsonKey: "stealth" },
  {
    callSign: "ATTUNEMENT",
    jsonKey: ["wondrous", "reqAttune", "req_attune", "reqAttuneTags"],
    conv: (_raw, allJson) => {
      const j = allJson;
      const hasText = typeof j.reqAttune === "string" && j.reqAttune.trim() !== "";
      const hasTags = Array.isArray(j.reqAttuneTags) && j.reqAttuneTags.length > 0;
      return hasText || hasTags;
    }
  },
  {
    callSign: "ATTUNE_REQ",
    jsonKey: "reqAttuneTags",
    conv: (tags = [], _all) => {
      const mapLetter = {
        A: "Any",
        U: "Unaligned",
        N: "Neutral",
        L: "Lawful",
        C: "Chaotic",
        G: "Good",
        E: "Evil"
      };
      const reqs = [];
      for (const tag of tags) {
        if (tag.class && Array.isArray(tag.alignment)) {
          const cls = cap(tag.class);
          for (const code of tag.alignment) {
            reqs.push(`${mapLetter[code] || code} ${cls}`);
          }
        } else if (tag.class) {
          reqs.push(cap(tag.class));
        } else if (Array.isArray(tag.alignment)) {
          for (const code of tag.alignment) {
            reqs.push(mapLetter[code] || code);
          }
        } else if (tag.background) {
          const [bg] = String(tag.background).split("|");
          reqs.push(bg.split(" ").map(cap).join(" "));
        } else if (tag.spellcasting) {
          reqs.push("Spellcaster");
        }
      }
      return Array.from(new Set(reqs));
    }
  },
  // ─── Other ───
  { callSign: "DAMAGE_RES", jsonKey: "resist", conv: (v) => Array.isArray(v) ? v.map(cap) : [] },
  { callSign: "RULESET", jsonKey: "_editionId" },
  // ─── Ability‐score modifiers (only emit when nonzero) ───
  {
    callSign: "STR_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].str ?? 0 : arr.str ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "DEX_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].dex ?? 0 : arr.dex ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CON_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].con ?? 0 : arr.con ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "INT_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].int ?? 0 : arr.int ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "WIS_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].wis ?? 0 : arr.wis ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CHA_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].cha ?? 0 : arr.cha ?? 0;
      return v !== 0 ? v : void 0;
    }
  }
];
function buildFM(json, defs) {
  const fm = {};
  for (const { callSign, jsonKey, conv } of defs) {
    const keys = Array.isArray(jsonKey) ? jsonKey : [jsonKey];
    let raw = void 0;
    for (const key of keys) {
      if (json[key] != null) {
        raw = json[key];
        break;
      }
    }
    if (raw == null) continue;
    const val = conv ? conv(raw, json) : raw;
    fm[FM_FIELDS[callSign]] = val;
  }
  return fm;
}
function serializeFrontmatter(fm, defs) {
  const filtered = {};
  const hasSkillChoice = Array.isArray(fm[FM_FIELDS.SKILL_CHOICE_LIST]) && fm[FM_FIELDS.SKILL_CHOICE_LIST].length > 0;
  const hasToolChoice = Array.isArray(fm[FM_FIELDS.TOOL_CHOICE_LIST]) && fm[FM_FIELDS.TOOL_CHOICE_LIST].length > 0;
  for (const [k, v] of Object.entries(fm)) {
    if (v === void 0) continue;
    if (k === FM_FIELDS.COMPONENTS && Array.isArray(v) && v.length === 0) continue;
    if ((k === FM_FIELDS.TOOL_CHOICE_LIST || k === FM_FIELDS.SKILL_CHOICE_LIST) && Array.isArray(v) && v.length === 0) continue;
    filtered[k] = v;
  }
  let keysToEmit;
  if (defs) {
    const wanted = defs.map((d) => FM_FIELDS[d.callSign]);
    keysToEmit = wanted.filter((k) => k in filtered);
    keysToEmit.push(
      ...Object.keys(filtered).filter((k) => !keysToEmit.includes(k))
    );
  } else {
    keysToEmit = Object.keys(filtered);
  }
  return keysToEmit.map((k) => {
    const v = filtered[k];
    if (Array.isArray(v)) {
      const inline = v.map((item) => JSON.stringify(item)).join(", ");
      return `${k}: [${inline}]`;
    }
    if (typeof v === "string") {
      return `${k}: "${v}"`;
    }
    return `${k}: ${v}`;
  }).join("\n");
}
var SKILL_OPTIONS = [
  "Acrobatics",
  "Animal Handling",
  "Arcana",
  "Athletics",
  "Deception",
  "History",
  "Insight",
  "Intimidation",
  "Investigation",
  "Medicine",
  "Nature",
  "Perception",
  "Performance",
  "Persuasion",
  "Religion",
  "Sleight of Hand",
  "Stealth",
  "Survival"
];
var SPELL_KEYS = [
  "NAME",
  "LEVEL",
  "SCHOOL",
  "CASTING_TIME",
  "SPELL_RANGE",
  "DURATION",
  "VERBAL",
  "SOMATIC",
  "MATERIAL",
  "COMPONENTS",
  "CONCENTRATION",
  "SOURCE"
];
var SPECIES_KEYS = [
  "SPECIES",
  "SIZE",
  "SPEED",
  "LANGUAGES",
  "TRAITS",
  "SKILLS",
  "STR_MOD",
  "DEX_MOD",
  "CON_MOD",
  "INT_MOD",
  "WIS_MOD",
  "CHA_MOD",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "WEAPON_PROFICIENCIES",
  "SENSES",
  "DAMAGE_RES",
  "SOURCE"
];
var ITEM_KEYS = [
  "NAME",
  "TYPE",
  "RARITY",
  "COST",
  "WEIGHT",
  "SOURCE",
  "PROPERTIES",
  "DAMAGE",
  "DAMAGE_TYPES",
  "RANGE",
  "RELOAD",
  "AMMO_TYPE",
  "AC",
  "STEALTH_DISADVANTAGE",
  "MAGICAL",
  "ATTUNEMENT",
  "ATTUNE_REQ"
];
var BESTIARY_KEYS = [
  "NAME",
  "SIZE",
  "TYPE",
  "ALIGNMENT",
  "AC",
  "HP",
  "SPEED",
  "STRENGTH",
  "DEXTERITY",
  "CONSTITUTION",
  "INTELLIGENCE",
  "WISDOM",
  "CHARISMA",
  "SAVING_THROWS",
  "SKILLS",
  "SENSES",
  "LANGUAGES",
  "CHALLENGE_RATING",
  "SOURCE"
];
var CLASS_KEYS = [
  "NAME",
  "SPELL_CAST_MOD",
  "ARMOR_PROFICIENCIES",
  "WEAPON_PROFICIENCIES",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "SAVING_THROWS",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TRAITS",
  "SOURCE"
];
var BACKGROUND_KEYS = [
  "NAME",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "TRAITS",
  "SOURCE"
];
var FEATS_KEYS = [
  "SOURCE"
];
var SPELL_META_DEFS = SPELL_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPELL_KEY ${key}`);
  return def;
});
var SPECIES_META_DEFS = SPECIES_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPECIES_KEY ${key}`);
  return def;
});
var ITEM_META_DEFS = ITEM_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for ITEM_KEY ${key}`);
  return def;
});
var BESTIARY_META_DEFS = BESTIARY_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BESTIARY_KEY ${key}`);
  return def;
});
var CLASS_META_DEFS = CLASS_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for CLASS_KEY ${key}`);
  return def;
});
var BACKGROUND_META_DEFS = BACKGROUND_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});
var FEATS_META_DEFS = FEATS_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});

// src/parsers/5e-json/spells.ts
var SCHOOL_MAP = {
  A: "Abjuration",
  C: "Conjuration",
  D: "Divination",
  E: "Enchantment",
  V: "Evocation",
  I: "Illusion",
  N: "Necromancy",
  T: "Transmutation"
};
function ordinal(n) {
  const suffix = n === 1 ? "st" : n === 2 ? "nd" : n === 3 ? "rd" : "th";
  return `${n}${suffix}`;
}
function formatRange(range) {
  if (!range) return "";
  if (typeof range === "string") return range;
  if (range.type === "special") return "Special";
  if (range.type === "point" && range.distance) {
    const dist = range.distance;
    if (dist.type === "touch") return "Touch";
    if (dist.type === "self") return "Self";
    if (dist.type === "sight") return "Sight";
    if (dist.amount) return `${dist.amount} ${dist.type}`;
  }
  return "Varies";
}
function formatTime(time) {
  if (!Array.isArray(time)) return "";
  return time.map((t) => `${t.number} ${t.unit}`).join(", ");
}
function formatDuration(duration) {
  if (!Array.isArray(duration)) return "";
  return duration.map((d) => {
    if (d.type === "instant") return "Instantaneous";
    if (d.type === "timed" && d.duration) {
      return `${d.duration.amount} ${d.duration.type}${d.concentration ? " (concentration)" : ""}`;
    }
    if (d.type === "permanent") return "Permanent";
    return "Special";
  }).join(", ");
}
function formatComponents(components) {
  if (!components) return "";
  const parts = [];
  if (components.v) parts.push("V");
  if (components.s) parts.push("S");
  if (components.m) {
    let matDetails = [];
    if (Array.isArray(components.m)) {
      matDetails = components.m.map(
        (item) => typeof item === "string" ? item : item && typeof item.text === "string" ? item.text : null
      ).filter((t) => !!t);
    } else if (typeof components.m === "string") {
      matDetails = [components.m];
    } else if (components.m.text) {
      matDetails = [components.m.text];
    }
    const matPart = matDetails.length > 0 ? `M (${matDetails.join(", ")})` : "M";
    parts.push(matPart);
  }
  return parts.join(", ");
}
function parseSpellsFile(json, editionId) {
  if (!json.spell) return [];
  json._editionId = editionId;
  return json.spell.map((spell) => {
    const sources = spell.source ? Array.isArray(spell.source) ? spell.source : [spell.source] : ["unknown"];
    const name = spell.name;
    const school = SCHOOL_MAP[spell.school] ?? spell.school;
    const level = spell.level;
    const range = formatRange(spell.range);
    const castingTime = formatTime(spell.time);
    const duration = formatDuration(spell.duration);
    const formattedSources = sources.map((s) => getFullSourceName(s, editionId));
    const attackType = spell.attackType || "";
    const damageType = spell.damageInflict?.[0] || "Teleportation";
    const ritual = spell.ritual === true;
    const concentration = spell.duration?.some((d) => d.concentration) ?? false;
    const FM = buildFM(spell, SPELL_META_DEFS);
    const yaml = serializeFrontmatter(FM, SPELL_META_DEFS);
    const safeName = name.replace(/\//g, "-");
    const title = `# ${name}`;
    const levelLabel = level === 0 ? `${school} Cantrip` : `${ordinal(level)}-level ${school} Spell`;
    const subtitle = `### *${levelLabel}*${concentration ? " *(Concentration)*" : ""}`;
    const headerLines = [
      title,
      subtitle,
      `**Casting Time:** ${castingTime}`,
      `**Range:** ${range}`,
      `**Components:** ${formatComponents(spell.components)}`,
      `**Duration:** ${duration}`
    ];
    const bodyLines = [
      ...(spell.entries ?? []).map((e) => formatEntry(e)),
      ...(spell.entriesHigherLevel ?? []).map((e) => formatEntry(e))
    ];
    const footerLines = [
      `---`,
      `**Source:** ${formattedSources.join(", ")}`
    ];
    return {
      path: `${safeName}.md`,
      content: [
        `---
${yaml}
---`,
        headerLines.join("\n"),
        ``,
        bodyLines.join("\n\n"),
        ``,
        footerLines.join("\n")
      ].join("\n")
    };
  });
}

// src/parsers/5e-json/species.ts
function slug(name) {
  return name.replace(/;/g, ":").replace(/[\/:"]/g, ":").trim();
}
var BLOCKED_TRAITS = ["Age", "Size", "Languages", "Creature Type", "Speed"];
function parseSpeciesFile(json, editionId) {
  if (!Array.isArray(json.race)) return [];
  json._editionId = editionId;
  const rawVariants = json.race.filter(
    (r) => !("reprintedAs" in r) && !/\((?:Kaladesh|Zendikar|Amonkhet|Innistrad|Ixalan)\)$/.test(r.name)
  );
  const byName = /* @__PURE__ */ new Map();
  for (const r of rawVariants) {
    const list = byName.get(r.name) ?? [];
    list.push(r);
    byName.set(r.name, list);
  }
  const subracesList = Array.isArray(json.subrace) ? json.subrace : [];
  const out = [];
  for (const [raceName, raceVariants] of byName.entries()) {
    const safeName = slug(raceName);
    const primary = raceVariants.reduce(
      (best, cur) => Object.keys(cur).length > Object.keys(best).length ? cur : best,
      raceVariants[0]
    );
    if (!primary.ability) {
      const humanEntry = subracesList.find(
        (sr) => sr.raceName === raceName && sr.raceSource === primary.source && !("name" in sr) && Array.isArray(sr.ability)
      );
      if (humanEntry) primary.ability = humanEntry.ability;
    }
    const fm = buildFM(primary, SPECIES_META_DEFS);
    const senses = [];
    if (primary.darkvision) senses.push(`Darkvision ${primary.darkvision} ft.`);
    if (primary.blindsight) senses.push(`Blindsight ${primary.blindsight} ft.`);
    if (primary.tremorsense) senses.push(`Tremorsense ${primary.tremorsense} ft.`);
    if (primary.truesight) senses.push(`Truesight ${primary.truesight} ft.`);
    if (senses.length) fm.senses = senses;
    if (Array.isArray(fm.traits)) {
      fm.traits = fm.traits.filter((t) => !BLOCKED_TRAITS.includes(t));
    }
    const yaml = serializeFrontmatter(fm, SPECIES_META_DEFS);
    const lines = [];
    lines.push(`# ${raceName}`, `## Stats`);
    const size = Array.isArray(primary.size) ? primary.size.map((s) => SIZE_MAP2[s] || s).join("/") : SIZE_MAP2[primary.size] ?? primary.size;
    lines.push(`**Size:** ${size}`);
    const speed = typeof primary.speed === "number" ? primary.speed : primary.speed?.walk ?? primary.speed?.base ?? 0;
    lines.push(`**Speed:** ${speed} ft. walking`);
    const kids = subracesList.filter(
      (sr) => sr.name && sr.raceName === raceName && sr.raceSource === primary.source
    );
    const rawAbility = Array.isArray(primary.ability) ? primary.ability : Array.isArray(kids[0]?.ability) ? kids[0].ability : [];
    if (Array.isArray(rawAbility) && rawAbility.length) {
      const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
      let chooseOpt = null;
      for (const obj of rawAbility) {
        if ("choose" in obj) chooseOpt = obj.choose;
        else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
      }
      const pairs = Object.entries(bonuses);
      const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
      if (chooseOpt?.count && Array.isArray(chooseOpt.from)) {
        parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
      }
      if (parts.length) lines.push(`**Ability Scores:** ${parts.join(", ")}`);
    }
    const langs = fm.languages;
    if (langs?.length) lines.push(`**Languages:** ${langs.join(", ")}`);
    if (Array.isArray(primary.skillProficiencies)) {
      const skillLabels = [];
      for (const e of primary.skillProficiencies) {
        if (e.choose?.from) {
          skillLabels.push(`Choose from: ${e.choose.from.map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(", ")}`);
        } else {
          const val = e.proficiency ?? e.name ?? e;
          if (typeof val === "string") skillLabels.push(val.charAt(0).toUpperCase() + val.slice(1));
        }
      }
      if (skillLabels.length) lines.push(`**Skill Proficiencies:** ${skillLabels.join("; ")}`);
    }
    const tp = fm[FM_FIELDS.TOOL_PROFICIENCIES];
    const wp = fm[FM_FIELDS.WEAPON_PROFICIENCIES];
    const ap = fm[FM_FIELDS.ARMOR_PROFICIENCIES];
    if (tp?.length) lines.push(`**Tool Proficiencies:** ${tp.join(", ")}`);
    if (wp?.length) lines.push(`**Weapon Proficiencies:** ${wp.join(", ")}`);
    if (ap?.length) lines.push(`**Armor Proficiencies:** ${ap.join(", ")}`);
    lines.push(`## Traits`);
    const seen = /* @__PURE__ */ new Set();
    for (const trait of fm.traits || []) {
      lines.push(`##### ${trait}`);
      const ent = primary.entries?.find((e) => e.name === trait);
      if (ent?.entries) {
        ent.entries.forEach((sub, idx) => {
          let blk;
          if (sub.type === "table") blk = renderMarkdownTable(sub);
          else if (sub.type === "list") blk = sub.items.map((it) => typeof it === "string" ? `- ${replace5eTags(it)}` : `- ${it.name}`).join("\n");
          else if (typeof sub === "string") blk = replace5eTags(sub);
          if (blk && !seen.has(blk)) {
            lines.push(blk);
            seen.add(blk);
            if (ent.entries.length > 1 && idx < ent.entries.length - 1) lines.push("");
          }
        });
      }
    }
    const subs = kids;
    if (subs.length) {
      out.push({
        path: `Species/${safeName}/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
      const subFolder = `Species/${safeName}/Subspecies`;
      for (const sr of subs) {
        const display = sr.name.replace(/;/g, ":");
        const subLines = [`# ${display}`];
        if (Array.isArray(sr.ability)) {
          const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
          let chooseOpt = null;
          for (const obj of sr.ability) {
            if ("choose" in obj) chooseOpt = obj.choose;
            else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
          }
          const pairs = Object.entries(bonuses);
          const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
          if (chooseOpt?.count) parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
          if (parts.length) subLines.push(`**Ability Scores:** ${parts.join(", ")}`);
        }
        for (const entry of sr.entries || []) {
          subLines.push(formatEntry(entry));
          subLines.push("");
        }
        const subYaml = serializeFrontmatter(buildFM(sr, SPECIES_META_DEFS), SPECIES_META_DEFS);
        out.push({
          path: `${subFolder}/${slug(sr.name)}.md`,
          content: `---
${subYaml}
---

${subLines.join("\n")}`
        });
      }
    } else {
      out.push({
        path: `Species/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
    }
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-json/classes.ts
function formatFeatureLink(name) {
  const ignore = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
  if (ignore.some((sub) => name.toLowerCase().includes(sub.toLowerCase()))) {
    return name;
  }
  const anchor = name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
  return `[[#${anchor}]]`;
}
var OPT_FEATURE_TYPE_TO_FULL = {
  AI: "Artificer Infusion",
  ED: "Elemental Discipline",
  EI: "Eldritch Invocation",
  MM: "Metamagic",
  MV: "Maneuver",
  "MV:B": "Maneuver, Battle Master",
  "MV:C2-UA": "Maneuver, Cavalier V2 (UA)",
  "AS:V1-UA": "Arcane Shot, V1 (UA)",
  "AS:V2-UA": "Arcane Shot, V2 (UA)",
  AS: "Arcane Shot",
  OTH: "Other",
  "FS:F": "Fighting Style; Fighter",
  "FS:B": "Fighting Style; Bard",
  "FS:P": "Fighting Style; Paladin",
  "FS:R": "Fighting Style; Ranger",
  PB: "Pact Boon",
  OR: "Onomancy Resonant",
  RN: "Rune Knight Rune",
  AF: "Alchemical Formula",
  TT: "Traveler's Trick"
};
function parseClassFile(json, editionId, fileName, optionalFeatures) {
  json._editionId = editionId;
  const cls = Array.isArray(json.class) ? json.class[0] : json;
  const className = typeof cls.name === "string" ? cls.name : fileName ? fileName.replace(/^class-/, "").replace(/\.json$/, "") : "Unknown";
  const subclassFiles = [];
  const PROF_BONUS_BY_LEVEL = [
    "+2",
    "+2",
    "+2",
    "+2",
    "+3",
    "+3",
    "+3",
    "+3",
    "+4",
    "+4",
    "+4",
    "+4",
    "+5",
    "+5",
    "+5",
    "+5",
    "+6",
    "+6",
    "+6",
    "+6"
  ];
  const hdNum = cls.hd?.number ?? 1;
  const hdFaces = cls.hd?.faces ?? 6;
  const hdStr = `${hdNum}d${hdFaces}`;
  const hdMax = hdNum * hdFaces;
  const hdAvg = Math.ceil((hdFaces + 1) / 2);
  const baseFM = buildFM(cls, CLASS_META_DEFS);
  const fm = { ...baseFM, hd: hdStr };
  const yaml = serializeFrontmatter(fm, CLASS_META_DEFS);
  const lines = [];
  lines.push(`# ${className}`);
  if (cls.source) lines.push(`**Source:** ${cls.source}`);
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Hit Points`);
  lines.push(`**Hit Dice:** ${hdStr} per ${className} level`);
  lines.push(`**Hit Points at 1st Level:** ${hdMax} + your Constitution modifier`);
  lines.push(
    `**Hit Points at Higher Levels:** ${hdStr} (or ${hdAvg}) + your Constitution modifier per level after 1st`
  );
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Proficiencies`);
  const sp = cls.startingProficiencies ?? {};
  if (Array.isArray(sp.armor) && sp.armor.length) {
    lines.push(`- **Armor:** ${sp.armor.join(", ")}`);
  }
  const weaponList = unifiedWeaponProfs(sp);
  if (weaponList.length) {
    lines.push(`- **Weapons:** ${weaponList.join(", ")}`);
  }
  const toolList = unifiedToolProfs(sp);
  if (toolList.length) {
    lines.push(`- **Tools:** ${toolList.join(", ")}`);
  }
  const saves = Array.isArray(cls.proficiency) ? cls.proficiency.map(
    (k) => ({
      str: "Strength",
      dex: "Dexterity",
      con: "Constitution",
      int: "Intelligence",
      wis: "Wisdom",
      cha: "Charisma"
    })[k] || k.toUpperCase()
  ) : [];
  if (saves.length) {
    lines.push(`- **Saving Throws:** ${saves.join(", ")}`);
  }
  {
    const rawSkills = Array.isArray(sp.skillProficiencies) ? sp.skillProficiencies : Array.isArray(sp.skills) ? sp.skills : Array.isArray(sp.skillProf) ? sp.skillProf : [];
    const choiceEntry = rawSkills.find(
      (e) => e && (typeof e.choose === "object" || typeof e.any === "number")
    );
    if (choiceEntry) {
      const count = choiceEntry.choose?.count ?? choiceEntry.any ?? 1;
      const options = Array.isArray(choiceEntry.choose?.from) ? choiceEntry.choose.from.map(
        (s) => (
          // title-case each word (or just use s)
          s.split(" ").map((w) => w[0].toUpperCase() + w.slice(1)).join(" ")
        )
      ) : SKILL_OPTIONS;
      lines.push(`- **Skills (Choose ${count}):** ${options.join(", ")}`);
    } else {
      const flat = unifiedSkills2(sp);
      if (flat.length) {
        lines.push(`- **Skills:** ${flat.join(", ")}`);
      }
    }
  }
  if (Array.isArray(cls.startingEquipment)) {
    lines.push(`
### Equipment`);
    cls.startingEquipment.filter((e) => typeof e === "string").forEach((item) => lines.push(`- ${item}`));
  }
  const progGroups = cls.classTableGroups ?? [];
  const maxLevel = 20;
  if (!progGroups.length) {
    lines.push(`*(No class table provided for this class.)*`);
  } else {
    const featuresByLevel2 = {};
    for (const feat of cls.classFeatures ?? []) {
      const raw = typeof feat === "object" && feat.classFeature ? feat.classFeature : String(feat);
      const [name, , , lvlStr] = raw.split("|");
      const lvl = Number(lvlStr ?? 0);
      if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
      featuresByLevel2[lvl].push(name);
    }
    const allLabelsSet = /* @__PURE__ */ new Set();
    const rowMaps = {};
    for (const group of progGroups) {
      const labels = Array.isArray(group.colLabels) ? group.colLabels.map((l) => replace5eTags(l)) : [];
      const rows = Array.isArray(group.rows) ? group.rows : Array.isArray(group.rowsSpellProgression) ? group.rowsSpellProgression : [];
      if (!labels.length || !rows.length) continue;
      for (let lvl = 0; lvl < rows.length; lvl++) {
        const levelNum = lvl + 1;
        if (!rowMaps[levelNum]) rowMaps[levelNum] = {};
        const rowMap = rowMaps[levelNum];
        const cells = rows[lvl];
        for (let i = 0; i < labels.length; i++) {
          const label = labels[i];
          let val = "";
          const cell = cells[i];
          if (Array.isArray(cell)) {
            val = cell.join(", ");
          } else if (cell && typeof cell === "object" && "value" in cell) {
            val = String(cell.value);
          } else {
            val = String(cell ?? "");
          }
          allLabelsSet.add(label);
          rowMap[label] = val;
        }
      }
    }
    const allLabels = Array.from(allLabelsSet).filter(
      (lbl) => !/Cantrips Known|Spells Known|\d+(st|nd|rd|th)/.test(lbl)
    );
    const mergedLabels = ["Level", "Proficiency Bonus", "Class Features", ...allLabels];
    const mergedRows = [];
    for (let lvl = 1; lvl <= maxLevel; lvl++) {
      const featureList = (featuresByLevel2[lvl] ?? []).map(formatFeatureLink);
      const rowMap = rowMaps[lvl] ?? {};
      mergedRows.push([
        lvl.toString(),
        PROF_BONUS_BY_LEVEL[lvl - 1] || "",
        featureList.join(", ").replace(/\|/g, "&#124;"),
        ...allLabels.map((label) => rowMap[label] ?? "")
      ]);
    }
    lines.push(`
> [!example]- Class Progression Table`);
    lines.push(
      renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels: mergedLabels,
        rows: mergedRows
      })
    );
  }
  const csGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.colLabels.some((lbl) => /Cantrips Known|Spells Known/.test(String(lbl)))
  );
  const slotGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.title === "Spell Slots per Spell Level"
  );
  if (csGroup && slotGroup) {
    const csLabels = csGroup.colLabels.map((l) => replace5eTags(l));
    const slotLabels = slotGroup.colLabels.map((l) => replace5eTags(l));
    const csRows = csGroup.rows || [];
    const slotRows = slotGroup.rowsSpellProgression || [];
    const colLabels = ["Level", ...csLabels, ...slotLabels];
    const spellRows = [];
    for (let i = 0; i < Math.max(csRows.length, slotRows.length); i++) {
      const lvl = String(i + 1);
      const csCells = csRows[i] ? csRows[i].map(String) : csLabels.map((_) => "");
      const slotCells = slotRows[i] ? slotRows[i].map(String) : slotLabels.map((_) => "");
      spellRows.push([lvl, ...csCells, ...slotCells]);
    }
    lines.push(`
> [!tip]- Spell Progression Table`);
    lines.push(
      renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels,
        rows: spellRows
      })
    );
  }
  const subs = Array.isArray(json.subclass) ? json.subclass : [];
  const subclassFeatures = Array.isArray(json.subclassFeature) ? json.subclassFeature : json.lookup?.subclassFeature ?? [];
  for (const sc of subs) {
    const subclassName = sc.name;
    const subLines = [];
    subLines.push(`# ${subclassName}`);
    subLines.push(`**Parent Class:** [[${className}]]`);
    if (sc.source) subLines.push(`**Source:** ${sc.source}`);
    subLines.push(``);
    const intro = subclassFeatures.find(
      (f) => f.name === sc.name && f.level === 3 && f.subclassShortName === sc.shortName && f.subclassSource === sc.source
    );
    if (intro?.entries?.length) {
      const introText = Array.isArray(intro.entries) ? intro.entries.map(
        (e) => typeof e === "string" ? replace5eTags(e) : formatEntry(e)
      ).join("\n\n") : formatEntry(intro.entries);
      subLines.push(introText, ``);
    }
    const code = Object.entries(OPT_FEATURE_TYPE_TO_FULL).find(
      ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
    )?.[0];
    if (code) {
      const matches = optionalFeatures.filter(
        (of) => Array.isArray(of.featureType) && of.featureType.includes(code)
      );
      if (matches.length) {
        subLines.push(`## ${subclassName} Optional Features`);
        for (const feat of matches) {
          for (const entry of feat.entries) {
            const txt = typeof entry === "string" ? replace5eTags(entry) : formatEntry(entry);
            subLines.push(`**${feat.name}:** ${txt}`);
          }
          subLines.push(``);
        }
      }
    }
    const prog = sc.subclassTableGroups ?? [];
    if (prog.length) {
      const labels = /* @__PURE__ */ new Set();
      const rowsMap = {};
      for (const g of prog) {
        const cols = (g.colLabels ?? []).map(replace5eTags);
        const rows = Array.isArray(g.rows) ? g.rows : Array.isArray(g.rowsSpellProgression) ? g.rowsSpellProgression : [];
        rows.forEach((r, i) => {
          const lvl = i + 1;
          rowsMap[lvl] ?? (rowsMap[lvl] = {});
          r.forEach((c, j) => {
            const lab = cols[j];
            if (!lab) return;
            labels.add(lab);
            rowsMap[lvl][lab] = typeof c === "object" && c !== null && "value" in c ? String(c.value) : String(c ?? "");
          });
        });
      }
      const hdrs = Array.from(labels);
      subLines.push(`## Subclass Progression`);
      subLines.push(renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels: ["Level", ...hdrs],
        rows: Array.from({ length: 20 }, (_, i) => {
          const lvl = i + 1;
          return [String(lvl), ...hdrs.map((h) => rowsMap[lvl]?.[h] ?? "")];
        })
      }));
    }
    const featsByLvl = {};
    for (const f of subclassFeatures) {
      if (f.subclassShortName === sc.shortName && f.subclassSource === sc.source && f.className === className) {
        const lvl = f.level ?? 0;
        ;
        (featsByLvl[lvl] ?? (featsByLvl[lvl] = [])).push(f);
      }
    }
    for (const lvl of Object.keys(featsByLvl).map(Number).sort((a, b) => a - b)) {
      subLines.push(`---`, `## Level ${lvl}`);
      for (const f of featsByLvl[lvl]) {
        subLines.push(`### ${f.name}`);
        for (const ent of Array.isArray(f.entries) ? f.entries : [f.entries]) {
          if (typeof ent === "string") {
            subLines.push(replace5eTags(ent));
            continue;
          }
          if (ent.type === "entries" && /^Maneuvers$/i.test(ent.name)) {
            subLines.push(`##### ${ent.name}`);
            for (const txt of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(typeof txt === "string" ? replace5eTags(txt) : formatEntry(txt));
            }
            const code2 = Object.entries(OPT_FEATURE_TYPE_TO_FULL).find(
              ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
            )?.[0];
            if (code2) {
              const matches = optionalFeatures.filter(
                (of) => Array.isArray(of.featureType) && of.featureType.includes(code2)
              );
              for (const featDef of matches) {
                for (const sub of featDef.entries) {
                  const line = typeof sub === "string" ? replace5eTags(sub) : formatEntry(sub);
                  subLines.push(`**${featDef.name}:** ${line}`);
                }
                subLines.push("");
              }
            }
            continue;
          }
          if (ent.type === "entries" && ent.name) {
            subLines.push(`##### ${ent.name}`);
            for (const e2 of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(formatEntry(e2));
            }
            continue;
          }
          if (ent.type === "inset" && ent.name) {
            const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
            subLines.push(`> **${ent.name}**`);
            inner.forEach((e2) => subLines.push(`> ${formatEntry(e2)}`));
            continue;
          }
          const fb = formatEntry(ent);
          if (fb) subLines.push(fb);
        }
      }
    }
    const subclassContent = subLines.join("\n\n").replace(/\n{3,}/g, "\n\n");
    subclassFiles.push({
      path: `Classes/${className}/Subclasses/${subclassName}.md`,
      content: subclassContent
    });
  }
  if (subs.length) {
    const links = subs.map(
      (sc) => `[[Subclasses/${sc.name.replace(/[\\/]/g, "-")}|${sc.name}]]`
    );
    lines.push(`
**Subclasses:** ${links.join(", ")}`);
  }
  const allFeatures = Array.isArray(json.classFeature) ? json.classFeature : json.lookup?.classFeature ?? [];
  const featuresByLevel = {};
  for (const entry of allFeatures) {
    if (entry.className !== className) continue;
    const lvl = entry.level ?? 0;
    if (!featuresByLevel[lvl]) featuresByLevel[lvl] = [];
    featuresByLevel[lvl].push(entry);
  }
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Level Features`);
  const levels = Object.keys(featuresByLevel).map((n) => +n).sort((a, b) => a - b);
  for (const lvl of levels) {
    lines.push(`### Level ${lvl}`);
    for (const feat of featuresByLevel[lvl]) {
      lines.push(`#### ${feat.name}`);
      const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
      for (const ent of entries) {
        if (typeof ent === "string") {
          const txt = formatEntry(ent).trim();
          if (txt === "{" || txt === "}") continue;
          lines.push(txt);
          continue;
        }
        if (ent.type === "list" && Array.isArray(ent.items)) {
          for (const item of ent.items) {
            lines.push(`- ${replace5eTags(item)}`);
          }
          continue;
        }
        if (ent.type === "options") {
          if (ent.count) {
            lines.push("");
            lines.push(`**Choose ${ent.count} of the following options:**`);
            lines.push("");
          }
          for (const optRef of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
            if (optRef.type === "refOptionalfeature") {
              const [optName, optSrc] = optRef.optionalfeature.split("|");
              const featDef = optionalFeatures.find(
                (f) => f.name === optName && (!optSrc || f.source === optSrc)
              );
              if (featDef) {
                featDef.entries.forEach((subEntry, idx) => {
                  const text = typeof subEntry === "string" ? replace5eTags(subEntry) : formatEntry(subEntry);
                  if (idx === 0) {
                    lines.push(`- **${featDef.name}:** ${text}`);
                  } else {
                    lines.push(`  - ${text}`);
                  }
                });
                lines.push("");
              } else {
                lines.push(`**${optName}:**`);
              }
            } else {
              const txt = formatEntry(optRef);
              if (txt) lines.push(`- ${txt}`);
            }
          }
          continue;
        }
        if (ent.type === "refOptionalfeature") {
          const [name] = ent.optionalfeature.split("|");
          lines.push(`- [[${name}|${name}]]`);
          continue;
        }
        if (ent.type === "entries" && ent.name) {
          lines.push(`##### ${ent.name}`);
          const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
          for (const e2 of inner) {
            lines.push(formatEntry(e2));
          }
          continue;
        }
        const fallback = formatEntry(ent);
        if (fallback) lines.push(fallback);
      }
      lines.push(``);
    }
    lines.push(`---`);
  }
  let content = `---
${yaml}
---

${lines.join("\n")}`;
  content = replace5eTags(content);
  content = content.replace(/\n{3,}/g, "\n\n").replace(/\n +\n/g, "\n\n");
  return [
    {
      path: `Classes/${className}/${className}.md`,
      content
    },
    ...subclassFiles
  ];
}

// src/parsers/5e-json/rules.ts
function parseActionsFile(json, editionId) {
  if (!Array.isArray(json.action)) return [];
  const lines = [];
  for (const action of json.action) {
    lines.push(`## ${action.name}`);
    const entries = Array.isArray(action.entries) ? action.entries : [action.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else if ((entry.type === "entries" || entry.type === "inset") && Array.isArray(entry.entries)) {
        lines.push(`### ${entry.name}`);
        for (const sub of entry.entries) {
          if (typeof sub === "string") {
            const ps = sub.split(/\n{2,}/);
            for (const p of ps) {
              const tt = p.trim();
              if (tt) {
                lines.push(replace5eTags(tt));
                lines.push("");
              }
            }
          } else if (sub.type === "list" && Array.isArray(sub.items)) {
            for (const li of sub.items) {
              lines.push(`- ${replace5eTags(li)}`);
            }
            lines.push("");
          } else {
            const txt = Array.isArray(sub) ? sub.join(" ") : typeof sub === "object" ? JSON.stringify(sub) : String(sub);
            lines.push(replace5eTags(txt));
            lines.push("");
          }
        }
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const headers = entry.colLabels || [];
        lines.push(`| ${headers.join(" | ")} |`);
        lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
        for (const row of entry.rows) {
          lines.push(`| ${row.join(" | ")} |`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : typeof entry === "object" ? JSON.stringify(entry) : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Actions.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseConditionsDiseasesFile(json, editionId) {
  const outputs = [];
  const processItems = (items, outPath) => {
    const lines = [];
    for (const item of items) {
      lines.push(`## ${item.name}`);
      const entries = Array.isArray(item.entries) ? item.entries : [item.entries];
      for (const entry of entries) {
        if (!entry) continue;
        if (typeof entry === "string") {
          const paras = entry.split(/\n{2,}/);
          for (const para of paras) {
            const t = para.trim();
            if (t) {
              lines.push(replace5eTags(t));
              lines.push("");
            }
          }
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          for (const txt of entry.items) {
            lines.push(`- ${replace5eTags(txt)}`);
          }
          lines.push("");
        } else if (entry.type === "table" && Array.isArray(entry.rows)) {
          const headers = entry.colLabels || [];
          lines.push(`| ${headers.join(" | ")} |`);
          lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
          for (const row of entry.rows) {
            lines.push(`| ${row.join(" | ")} |`);
          }
          lines.push("");
        } else if (entry.type === "entries" && Array.isArray(entry.entries)) {
          lines.push(`### ${entry.name}`);
          for (const sub of entry.entries) {
            const txt = typeof sub === "string" ? sub : String(sub);
            lines.push(replace5eTags(txt));
            lines.push("");
          }
        } else {
          const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
          lines.push(replace5eTags(txt));
          lines.push("");
        }
      }
      lines.push("---");
    }
    const cleaned = lines.reduce((acc, curr) => {
      if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
      return acc.concat(curr);
    }, []);
    outputs.push({ path: outPath, content: cleaned.join("\n").trim() + "\n" });
  };
  processItems(json.condition || [], "Rules and Reference/Conditions.md");
  processItems(json.disease || [], "Rules and Reference/Diseases.md");
  return outputs;
}
function parseSensesFile(json, editionId) {
  const items = Array.isArray(json.sense) ? json.sense : Array.isArray(json.senses) ? json.senses : [];
  if (!items.length) return [];
  const lines = [];
  for (const sense of items) {
    lines.push(`## ${sense.name}`);
    const entries = Array.isArray(sense.entries) ? sense.entries : [sense.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else if ((entry.type === "entries" || entry.type === "inset") && Array.isArray(entry.entries)) {
        lines.push(`### ${entry.name}`);
        for (const sub of entry.entries) {
          const txt = typeof sub === "string" ? sub : String(sub);
          lines.push(replace5eTags(txt));
          lines.push("");
        }
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const headers = entry.colLabels || [];
        lines.push(`| ${headers.join(" | ")} |`);
        lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
        for (const row of entry.rows) {
          lines.push(`| ${row.join(" | ")} |`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Senses.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseSkillsFile(json, editionId) {
  const items = Array.isArray(json.skill) ? json.skill : Array.isArray(json.skills) ? json.skills : [];
  if (!items.length) return [];
  const lines = [];
  for (const skill of items) {
    lines.push(`## ${skill.name}`);
    if (skill.ability) {
      lines.push(`*Ability: ${skill.ability}*`);
      lines.push("");
    }
    const entries = Array.isArray(skill.entries) ? skill.entries : [skill.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Skills.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}

// src/parsers/5e-json/feats.ts
function parseFeatsFile(json, editionId) {
  const feats = Array.isArray(json.feat) ? json.feat : Array.isArray(json.feats) ? json.feats : [];
  return feats.map((feat) => {
    const lines = [];
    const fm = buildFM({ ...feat, _editionId: editionId }, FEATS_META_DEFS);
    lines.push("---");
    lines.push(serializeFrontmatter(fm, FEATS_META_DEFS));
    lines.push("---", "");
    lines.push(`# ${feat.name}`, "");
    const prereqs = [];
    if (Array.isArray(feat.prerequisite)) {
      feat.prerequisite.forEach((pr) => {
        if (pr.level) prereqs.push(`Level ${pr.level}`);
        if (Array.isArray(pr.feat)) {
          pr.feat.forEach((f) => {
            const name = f.split("|")[0].replace(/\b\w/g, (c) => c.toUpperCase());
            prereqs.push(`Prerequisite: [[${name}]]`);
          });
        }
      });
    }
    if (feat.spellcastingPrepared) prereqs.push(`Prerequisite: Spellcaster`);
    if (Array.isArray(feat.toolProficiencies)) {
      feat.toolProficiencies.forEach((tp) => {
        Object.entries(tp).forEach(([key]) => {
          if (key === "anyArtisansTool") {
            prereqs.push(`Prerequisite: Proficient with an artisan's tool`);
          } else {
            prereqs.push(`Prerequisite: Proficient with ${key.replace(/([A-Z])/g, " $1").trim()}`);
          }
        });
      });
    }
    if (Array.isArray(feat.armorProficiencies)) {
      feat.armorProficiencies.forEach((arm) => {
        const armStr = typeof arm === "string" ? arm : JSON.stringify(arm);
        prereqs.push(`Prerequisite: Proficient with ${armStr.replace(/([A-Z])/g, " $1").trim()}`);
      });
    }
    if (feat.race) prereqs.push(`Prerequisite: ${feat.race}`);
    if (prereqs.length) {
      lines.push("**Prerequisites**");
      prereqs.forEach((p) => lines.push(`- ${p}`));
      lines.push("");
    }
    const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
    entries.forEach((entry) => {
      if (!entry) return;
      if (typeof entry === "string") {
        entry.split(/\n{2,}/).forEach((p) => {
          const t = p.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        });
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        entry.items.forEach((it) => {
          if (typeof it === "string") {
            lines.push(`- ${replace5eTags(it)}`);
          } else if (it.type === "item" && it.name) {
            lines.push(`- **${it.name}**`);
            const subs = Array.isArray(it.entries) ? it.entries : [it.entries];
            subs.forEach(
              (s) => lines.push(`  - ${replace5eTags(typeof s === "string" ? s : JSON.stringify(s))}`)
            );
          }
        });
        lines.push("");
      } else if (entry.type === "inset") {
        lines.push(`- *${entry.name}*`);
        const subs = Array.isArray(entry.entries) ? entry.entries : [entry.entries];
        subs.forEach((s) => lines.push(`  - ${replace5eTags(s)}`));
        lines.push("");
      } else if ((entry.type === "section" || entry.type === "entries") && Array.isArray(entry.entries)) {
        if (entry.name) {
          lines.push(`## ${entry.name}`);
          lines.push("");
        }
        entry.entries.forEach((s) => {
          lines.push(replace5eTags(typeof s === "string" ? s : JSON.stringify(s)));
          lines.push("");
        });
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const hdr = entry.colLabels || [];
        lines.push(`| ${hdr.join(" | ")} |`);
        lines.push(`| ${hdr.map(() => "---").join(" | ")} |`);
        entry.rows.forEach(
          (row) => lines.push(`| ${row.join(" | ")} |`)
        );
        lines.push("");
      }
    });
    return {
      path: `Player Build/Feats/${feat.name}.md`,
      content: lines.join("\n").trim() + "\n"
    };
  });
}

// src/parsers/5e-json/backgrounds.ts
function parseBackgroundsFile(json, editionId) {
  const raw = Array.isArray(json.background) ? json.background : Array.isArray(json.backgrounds) ? json.backgrounds : [];
  const backgrounds = raw.filter((bg) => {
    const nm = bg.name || "";
    return !nm.startsWith("Variant") && !nm.includes("Baldur's Gate");
  });
  const outputs = [];
  backgrounds.forEach((bg) => {
    const lines = [];
    const fm = buildFM(bg, BACKGROUND_META_DEFS);
    const extraTraits = Array.isArray(bg.entries) ? bg.entries.filter((e) => e.data?.isFeature && typeof e.name === "string").map((e) => {
      const name = e.name.replace(/^Feature:\s*/, "");
      return `[[${bg.name}#${name}]]`;
    }) : [];
    const yaml = serializeFrontmatter(fm, BACKGROUND_META_DEFS);
    lines.push("---", yaml, "---", "");
    lines.push(`# ${bg.name}`, "");
    if (Array.isArray(bg.skillProficiencies) && bg.skillProficiencies.length) {
      const skills = [];
      bg.skillProficiencies.forEach((ent) => {
        if (typeof ent === "string") {
          skills.push(cap2(ent));
        } else if (ent.choose && Array.isArray(ent.choose.from)) {
          skills.push(`Choose ${ent.choose.amount} from ${ent.choose.from.join(", ")}`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => skills.push(cap2(k)));
        }
      });
      lines.push(`**Skill Proficiencies:** ${skills.join(", ")}`, "");
    }
    if (Array.isArray(bg.languageProficiencies) && bg.languageProficiencies.length) {
      const langs = [];
      bg.languageProficiencies.forEach((ent) => {
        if (ent.anyStandard) {
          langs.push(`${ent.anyStandard} of your choice`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => langs.push(cap2(k)));
        }
      });
      lines.push(`**Languages:** ${langs.join(", ")}`, "");
    }
    if (Array.isArray(bg.toolProficiencies) && bg.toolProficiencies.length) {
      const tools = [];
      bg.toolProficiencies.forEach((ent) => {
        if (ent.choose && Array.isArray(ent.choose.from)) {
          const list = ent.choose.from.map(humanize).join(", ");
          tools.push(`Choose ${ent.choose.count} from ${list}`);
          return;
        }
        if (typeof ent === "string") {
          tools.push(humanize(ent));
          return;
        }
        Object.entries(ent).filter(([_, v]) => v === true).forEach(([k]) => tools.push(humanize(k)));
      });
      lines.push(`**Tool Proficiencies:** ${tools.join(", ")}`, "");
    }
    if (Array.isArray(bg.startingEquipment) && bg.startingEquipment.length) {
      lines.push(`**Equipment:**`);
      bg.startingEquipment.forEach((grp) => {
        if (Array.isArray(grp._)) {
          grp._.forEach((it) => lines.push(`- ${fmtItem(it)}`));
        }
        ["a", "b"].forEach((key) => {
          if (Array.isArray(grp[key])) {
            grp[key].forEach((it) => lines.push(`- ${fmtItem(it)}`));
          }
        });
      });
      lines.push("");
    }
    if (Array.isArray(bg.entries)) {
      bg.entries.forEach((entry) => {
        if (entry.type === "list" && entry.style === "list-hang-notitle") {
          return;
        }
        if (entry.name) {
          const header = entry.data?.isFeature ? entry.name.replace(/^Feature:\s*/, "") : entry.name;
          lines.push(`## ${header}`, "");
        }
        if (Array.isArray(entry.entries)) {
          entry.entries.forEach((e) => {
            if (typeof e === "string") {
              lines.push(replace5eTags(e), "");
            } else if (e.type === "list" && Array.isArray(e.items)) {
              e.items.forEach(
                (it) => lines.push(`- ${replace5eTags(it.entry ?? it)}`)
              );
              lines.push("");
            } else if (e.type === "table") {
              const tbl = renderMarkdownTable(e);
              if (tbl) lines.push(tbl, "");
            }
          });
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          entry.items.forEach(
            (it) => lines.push(`- ${replace5eTags(it.entry ?? it)}`)
          );
          lines.push("");
        }
      });
    }
    outputs.push({
      path: `Player Build/Backgrounds/${bg.name}.md`,
      content: lines.join("\n").trimEnd() + "\n"
    });
  });
  return outputs;
}
function cap2(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function fmtItem(item) {
  if (typeof item === "string") {
    if (item.includes("|")) {
      return replace5eTags(`{@item ${item}}`);
    }
    return replace5eTags(item);
  }
  const priceRaw = item.containsValue ?? item.value;
  if (typeof priceRaw === "number" && // make sure it’s not also an “item” or “equipmentType”
  !item.item && !item.equipmentType && !item.special) {
    const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
    return `${gp} gp`;
  }
  if (item.item) {
    const link = replace5eTags(`{@item ${item.item}}`);
    if (typeof priceRaw === "number") {
      const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
      return `${link} (${gp} gp)`;
    }
    return link;
  }
  if (typeof item.special === "string") {
    return item.special;
  }
  if (item.equipmentType) {
    switch (item.equipmentType) {
      case "toolArtisan":
        return "One type of artisan\u2019s tools (of your choice)";
      case "instrumentMusical":
        return "One type of musical instrument (of your choice)";
      case "setGaming":
        return "One set of gaming dice (of your choice)";
      default:
        return humanize(item.equipmentType);
    }
  }
  return replace5eTags(JSON.stringify(item));
}
function humanize(str) {
  const spaced = str.replace(/([a-z])([A-Z])/g, "$1 $2");
  return spaced.charAt(0).toUpperCase() + spaced.slice(1);
}

// src/parsers/5e-json/installer.ts
var import_obsidian2 = require("obsidian");
async function listSpellFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/spells`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && item.name.startsWith("spells-") && item.name.endsWith(".json")).map((item) => item.name);
}
async function listBestiaryFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/bestiary`;
  const res = await fetch(url);
  const list = await res.json();
  const CORE_SOURCES = [
    "bestiary-phb.json",
    "bestiary-mm.json",
    "bestiary-dmg.json",
    "bestiary-xge.json",
    "bestiary-vgm.json",
    "bestiary-tce.json",
    "bestiary-egw.json",
    "bestiary-erlw.json",
    "bestiary-mtf.json",
    "bestiary-vrgr.json",
    "bestiary-cos.json",
    "bestiary-oota.json",
    "bestiary-pota.json",
    "bestiary-hotdq.json",
    "bestiary-rot.json",
    "bestiary-skt.json",
    "bestiary-tftyp.json",
    "bestiary-toa.json"
  ];
  return list.filter((item) => item.type === "file" && CORE_SOURCES.includes(item.name)).map((item) => item.name);
}
var ITEM_JSON_FILES = [
  "items-base.json",
  "items.json",
  "objects.json",
  "vehicles.json",
  "decks.json"
];
async function listItemFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && ITEM_JSON_FILES.includes(item.name)).map((item) => item.name);
}
async function listClassFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/class`;
  const res = await fetch(url);
  const listing = await res.json();
  return listing.filter(
    (item) => item.type === "file" && item.name.startsWith("class-") && item.name.endsWith(".json")
  ).map((item) => item.name);
}
async function ensureFolder(app, folderPath) {
  const parts = folderPath.split("/");
  let curr = "";
  for (const p of parts) {
    curr = curr ? `${curr}/${p}` : p;
    try {
      await app.vault.createFolder(curr);
    } catch {
    }
  }
}
async function importEditionData(params) {
  const { app, edition, targetPath } = params;
  const repo = edition.repo ?? "";
  {
    const spellFiles = await listSpellFilesFromGitHub(repo);
    for (const fileName of spellFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/spells/${fileName}`);
        const json = await res.json();
        const files = parseSpellsFile(json, edition.id);
        for (const md of files) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Spells/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import spell ${fileName}:`, e);
      }
    }
  }
  {
    const bestiaryFiles = await listBestiaryFilesFromGitHub(repo);
    for (const fileName of bestiaryFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/bestiary/${fileName}`);
        const json = await res.json();
        const parsed = parseBestiaryFile(json, edition.id);
        for (const md of parsed) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Bestiary/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import bestiary ${fileName}:`, e);
      }
    }
  }
  {
    const itemFiles = await listItemFilesFromGitHub(repo);
    for (const fn of itemFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/${fn}`);
        const json = await res.json();
        const mdFiles = parseItemsFile(json, edition.id);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import items from ${fn}:`, e);
      }
    }
  }
  {
    const res = await fetch(`${edition.sourceUrl}/races.json`);
    const json = await res.json();
    const mdFiles = parseSpeciesFile(json, edition.id);
    for (const md of mdFiles) {
      const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
      await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
      await app.vault.adapter.write(fullPath, md.content);
    }
  }
  let optionalFeatures = [];
  try {
    const res = await fetch(`${edition.sourceUrl}/optionalfeatures.json`);
    const raw = await res.json();
    optionalFeatures = Array.isArray(raw.optionalfeature) ? raw.optionalfeature : [];
  } catch (e) {
    console.warn("Failed to import optionalfeatures.json:", e);
  }
  {
    const classFiles = await listClassFilesFromGitHub(repo);
    for (const fileName of classFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/class/${fileName}`);
        const json = await res.json();
        const mdFiles = parseClassFile(
          json,
          edition.id,
          fileName,
          optionalFeatures
        );
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
          await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
          const existing = app.vault.getAbstractFileByPath(fullPath);
          if (existing instanceof import_obsidian2.TFile) {
            await app.vault.modify(existing, md.content);
          } else {
            await app.vault.create(fullPath, md.content);
          }
        }
      } catch (e) {
        console.warn(`Failed to import class ${fileName}:`, e);
      }
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/actions.json`);
      const json = await res.json();
      const mdFiles = parseActionsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import actions.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/conditionsdiseases.json`);
      const json = await res.json();
      const mdFiles = parseConditionsDiseasesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import conditionsdiseases.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/senses.json`);
      const json = await res.json();
      const mdFiles = parseSensesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import senses.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/skills.json`);
      const json = await res.json();
      const mdFiles = parseSkillsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import skills.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/feats.json`);
      const json = await res.json();
      const mdFiles = parseFeatsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import feats.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/backgrounds.json`);
      const json = await res.json();
      const mdFiles = parseBackgroundsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import backgrounds.json:", e);
    }
  }
}

// src/parsers/5e-2025/installer.ts
var installer_exports2 = {};
__export(installer_exports2, {
  importEditionData: () => importEditionData2
});
var import_obsidian3 = require("obsidian");

// src/parsers/5e-2025/helpers/sourceMap.ts
var SOURCE_NAME_MAP2 = {
  // Core rulebooks
  PHB: "Player's Handbook",
  MM: "Monster Manual",
  DMG: "Dungeon Master's Guide",
  // Official expansions & adventure modules
  CoS: "Curse of Strahd",
  OotA: "Out of the Abyss",
  PotA: "Princes of the Apocalypse",
  HotDQ: "Hoard of the Dragon Queen",
  RoT: "Rise of Tiamat",
  SKT: "Storm King's Thunder",
  TftYP: "Tales from the Yawning Portal",
  ToA: "Tomb of Annihilation",
  // Supplemental guides
  XGE: "Xanathar's Guide to Everything",
  VGM: "Volo's Guide to Monsters",
  TCE: "Tasha's Cauldron of Everything",
  EGW: "Eberron: Rising from the Last War",
  ERLW: "Explorer's Guide to Wildemount",
  MTF: "Monsters of the Multiverse",
  VRGR: "Van Richten's Guide to Ravenloft",
  // Additional sourcebooks
  AAG: "Astral Adventurer\u2019s Guide",
  AI: "Acquisitions Incorporated",
  AitFRAVFT: "Adventures in the Forgotten Realms: A Visual Field Test",
  BMT: "Big Monster Tome",
  DoDk: "Dragon of Darkkeep",
  FTD: "Fizban\u2019s Treasury of Dragons",
  GGR: "Guildmaster\u2019s Guide to Ravnica",
  GHLoE: "Ghosts of the Horizon: Light Over Elensaria",
  IDRotF: "Icewind Dale: Rime of the Frostmaiden",
  LLK: "Lost Laboratory of Kwalish",
  SatO: "Sapphire of Truth",
  SCC: "Strixhaven: Curriculum of Chaos",
  TDCSR: "The Dungeon Coach\u2019s Rulebook",
  JttRC: "Journeys through the Radiant Citadel",
  "AitFR-AVT": "Adventures in the Forgotten Realms: A Verdant Tomb",
  "AitFR-FCD": "Adventures in the Forgotten Realms: From Cyan Depths",
  RMR: "Dungeons and Dragons: Rick and Morty",
  SCAG: "Sword Coast Adventurer's Guide",
  EEPC: "Elemental Evil Player's Companion",
  MOT: "Mythic Odysseys of Theros",
  WBtW: "The Wild Beyond the Witchlight",
  BGDIA: "Baldur's Gate: Descent Into Avernus",
  ToFW: "Turn of Fortune's Wheel",
  CoA: "Chains of Asmodeus",
  CRCotN: "Critical Role: Call of the Netherdeep",
  ToD: "Tyranny of Dragons",
  MPMM: "Mordenkainen Presents: Monsters of the Multiverse",
  LoX: "Light of Xaryxis",
  QftIS: "Quests from the Infinite Staircase",
  WDH: "Waterdeep: Dragon Heist",
  WDMM: "Waterdeep: Dungeon of the Mad Mage",
  PaBTSO: "Phandelver and Below: The Shattered Obelisk",
  CM: "Candlekeep Mysteries",
  GoS: "Ghosts of Saltmarsh",
  DSotDQ: "Dragonlance: Shadow of the Dragon Queen",
  KftGV: "Keys from the Golden Vault",
  SDW: "Essentials Kit: Sleeping Dragon's Wake",
  DoSI: "Dragons of Stormwreck Isle",
  GotSF: "Giants of the Star Forge",
  DIP: "Essentials Kit: Dragon of Icespire Peak",
  SLW: "Essentials Kit: Storm Lord's Wrath",
  IMR: "Infernal Machine Rebuild",
  VEoR: "Vecna: Eve of Ruin",
  PSI: "Plane Shift: Innistrad",
  AATM: "Adventure Atlas: The Mortuary",
  PSZ: "Plane Shift: Zendikar",
  DC: "Essentials Kit: Divine Contention",
  LMoP: "Lost Mine of Phandelver",
  RMBRE: "The Lost Dungeon of Rickedness: Big Rick Energy",
  HftT: "Hunt for the Thessalhydra",
  PSX: "Plane Shift: Ixalan",
  HFStCM: "Heroes' Feast: Saving the Childrens Menu",
  SjA: "Spelljammer Academy",
  LK: "Lightning Keep",
  RtG: "Return to the Glory",
  TTP: "The Tortle Package",
  LR: "Locathah Rising",
  PSA: "Plane Shift: Amonkhet",
  OGA: "One Grung Above",
  "NRH-TLT": "Nerds Restoring Harmony: The Lost Tomb",
  "NRH-AT": "Nerds Restoring Harmony: Adventure Together",
  BGG: "Bigby Presents: Glory of the Giants",
  RoTOS: "The Rise of Tiamat Online Supplement",
  XMtS: "X Marks the Spot",
  "HAT-LMI": "Honor Among Theives: Legendary Magic Items",
  DitLCoT: "Descent into the Lost Caverns of Tsojcanth",
  "AitFR-DN": "Adventures in the Forgotten Realms: Deepest Night",
  "AitFR-THP": "Adventures in the Forgotten Realms: The Hidden Pages",
  BAM: "Boo's Astral Menagerie",
  AZfyT: "A Zib for Your Thougts",
  MCV2DC: "Monstrous Compendium Volume 2: Dragonlance Creatures",
  PSK: "Plane Shift: Kaladesh",
  PSD: "Plane Shift: Dominaria",
  AWM: "Adventure with Muk",
  UATheMysticClass: "Unearthed Arcana: The Mystic Class",
  ALCurseOfStrahd: "Adventurers League: Curse of Strahd",
  ALElementalEvil: "Adventurers League: Elemental Evil",
  ALRageOfDemons: "Adventurers League: Rage of Demons"
};
function getFullSourceName2(abbrev, editionId) {
  let name = SOURCE_NAME_MAP2[abbrev] ?? abbrev;
  if (abbrev === "PHB") {
    if (editionId?.includes("2014")) name += " (2014)";
    else if (editionId?.includes("2025")) name += " (2025)";
  }
  return name;
}

// src/parsers/5e-2025/helpers/tagReplacer.ts
function replace5eTags2(input) {
  let text;
  if (Array.isArray(input)) {
    text = input.join(" ");
  } else if (typeof input === "string") {
    text = input;
  } else {
    text = String(input ?? "");
  }
  return text.replace(
    /\{@(spell|item|creature|race) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, __, name) => `[[${capitalizeEach2(name)}]]`
  ).replace(
    /\{@(condition|status|action|skill) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, tag, name) => `[[${capitalize2(tag)}s#${name}|${capitalizeEach2(name)}]]`
  ).replace(
    /\{@classFeature ([^|}]+)\|([^|}]+)(?:\|[^}]+)?\}/g,
    (_, feature, cls) => `[[${cls}#${feature}]]`
  ).replace(/\{@(book|filter) ([^|}]+)(?:\|[^}]+)?\}/g, (_, __, txt) => txt).replace(/\{@note ([^}]+)\}/g, (_, note) => `*${note}*`).replace(/\{@(damage|dice|dc|hit|sense) ([^}]+)\}/g, (_, __, value) => value).replace(/\{@chance ([^|}]+)(?:\|[^}]+)?\}/g, (_, value) => `${value}%`).replace(/\{@quickref ([^|}]+)(?:\|[^|]*\|[^}]*)?\}/g, (_, term) => {
    const known = [
      "difficult terrain",
      "total cover",
      "half cover",
      "three-quarters cover",
      "heavily obscured",
      "lightly obscured"
    ];
    return known.includes(term.toLowerCase()) ? `[[Rules#${capitalizeEach2(term)}]]` : term;
  }).replace(/\{\@5etools\s+([^|}]+)\|[^}]+\}/g, "$1").replace(/\{@recharge\s*([^}]+)\}/g, (_, num) => `(recharge: ${num.trim()})`).replace(/\{@(scaledice|scaledamage)[^}]*\|([^|}]+)\}/g, (_, __, value) => value).replace(/\{@d20[^}]*\}/g, "").replace(/\{@[^}]+\}/g, "");
}
function capitalize2(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
function capitalizeEach2(str) {
  return str.split(" ").map(capitalize2).join(" ");
}

// src/parsers/5e-2025/helpers/markdownTable.ts
function renderMarkdownTable2(entry) {
  if (entry.type !== "table" || !Array.isArray(entry.rows)) return "";
  const caption = entry.caption ? `##### ${entry.caption}
` : "";
  const headers = (entry.colLabels ?? []).map((h) => replace5eTags2(h.trim()));
  const headerRow = `| ${headers.join(" | ")} |`;
  const dividerRow = `| ${headers.map(() => ":--").join(" | ")} |`;
  const bodyRows = entry.rows.map((row) => {
    const cells = row.map((cell) => {
      if (typeof cell === "string") return replace5eTags2(cell);
      if (typeof cell === "object") {
        if (cell.roll?.exact !== void 0) return `${cell.roll.exact}`;
        if (cell.roll?.min !== void 0 && cell.roll?.max !== void 0) {
          return `${cell.roll.min}\u2013${cell.roll.max}`;
        }
        return replace5eTags2(JSON.stringify(cell));
      }
      return replace5eTags2(String(cell));
    });
    return `| ${cells.join(" | ")} |`;
  });
  return `${caption}${headerRow}
${dividerRow}
${bodyRows.join("\n")}`;
}

// src/parsers/5e-2025/helpers/formatEntry.ts
function formatEntry2(entry) {
  if (typeof entry === "string") {
    const cleaned = entry.trim();
    if (!cleaned || cleaned === "}") return "";
    return replace5eTags2(cleaned);
  }
  if (entry.type === "entries" && Array.isArray(entry.entries)) {
    const body = entry.entries.map(formatEntry2).filter((str) => str.trim().length > 0).join("\n\n");
    return entry.name ? `##### ${entry.name}
${body}` : body;
  }
  if (entry.type === "list" && Array.isArray(entry.items)) {
    return entry.items.map((i) => `- ${replace5eTags2(typeof i === "string" ? i : JSON.stringify(i))}`).join("\n");
  }
  if (entry.type === "table" && Array.isArray(entry.rows)) {
    return renderMarkdownTable2(entry);
  }
  if (entry.type === "quote" && Array.isArray(entry.entries)) {
    const quote = entry.entries.map(formatEntry2).join(" ").trim();
    const author = entry.by ? ` \u2014 ${entry.by}` : "";
    return `*"${quote}${author}"*`;
  }
  if (entry.type === "inset" && Array.isArray(entry.entries)) {
    const inset = entry.entries.map(formatEntry2).join("\n").trim();
    return `> ${inset.replace(/\n/g, "\n> ")}`;
  }
  if (entry.type === "refClassFeature" && typeof entry.classFeature === "string") {
    const [name] = entry.classFeature.split("|");
    const anchor = name.replace(/[^\w\s-]/g, "").replace(/\s+/g, "-").toLowerCase();
    return `[[#${anchor}]]`;
  }
  return "";
}

// src/parsers/5e-2025/bestiary.ts
var skippedMonsters2 = [];
var SIZE_MAP3 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var ALIGNMENT_MAP2 = {
  L: "Lawful",
  N: "Neutral",
  C: "Chaotic",
  G: "Good",
  E: "Evil",
  U: "Unaligned"
};
function capitalizeFirst3(str) {
  const s = String(str || "");
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function formatSizeAbbrev3(abbrev) {
  return SIZE_MAP3[abbrev] || abbrev;
}
function formatAlignmentAbbrev2(abbrev) {
  return abbrev.trim().split(/\s+/).map((letter) => ALIGNMENT_MAP2[letter] || letter).join(" ");
}
var RAW_NPCS2 = [
  "Abjurer",
  "Acolyte",
  "Apprentice Wizard",
  "Archdruid",
  "Archer",
  "Archmage",
  "Assassin",
  "Bandit",
  "Bandit Captain",
  "Bard",
  "Berserker",
  "Blackguard",
  "Champion",
  "Commoner",
  "Conjurer",
  "Cult Fanatic",
  "Cultist",
  "Diviner",
  "Druid (NPC)",
  "Druid NPC",
  "Enchanter",
  "Evoker",
  "Gladiator",
  "Guard",
  "Illusionist",
  "Knight",
  "Kraken Priest",
  "Mage",
  "Martial Arts Adept",
  "Master Thief",
  "Necromancer",
  "Noble",
  "Priest",
  "Scout",
  "Spy",
  "Swashbuckler",
  "Thug",
  "Transmuter",
  "Tribal Warrior",
  "Veteran",
  "War Priest",
  "Warlock of the Archfey",
  "Warlock of the Fiend",
  "Warlock of the Great Old One",
  "Warlord"
];
var NORMALIZED_NPC_NAMES2 = new Set(RAW_NPCS2.map((n) => normalizeName2(n)));
function normalizeName2(name) {
  return name.replace(/\s+/g, " ").trim().toLowerCase();
}
function categorizeCreature2(monster) {
  const typeValue = monster.type;
  const name = monster.name;
  const t = typeof typeValue === "string" ? typeValue.toLowerCase() : typeValue?.type?.toLowerCase() || String(typeValue).toLowerCase();
  const normalizedName = normalizeName2(name);
  if (monster.isNpc || monster.isNamedCreature) return "Story NPCs";
  if (t === "beast") return "Beasts";
  if (t === "humanoid" && NORMALIZED_NPC_NAMES2.has(normalizedName)) return "Non-Beasts";
  if (t === "humanoid") return "Monsters";
  return "Monsters";
}
function renderAbilitiesTable2(str, dex, con, int, wis, cha) {
  return [
    `| STR | DEX | CON | INT | WIS | CHA |`,
    `| --- | --- | --- | --- | --- | --- |`,
    `| ${str} | ${dex} | ${con} | ${int} | ${wis} | ${cha} |`
  ].join("\n");
}
function renderEntry2(entry) {
  const name = entry.name;
  let descriptions = [];
  if (Array.isArray(entry.entries)) {
    descriptions = entry.entries;
  } else if (typeof entry.entries === "string") {
    descriptions = [entry.entries];
  } else if (Array.isArray(entry.desc)) {
    descriptions = entry.desc;
  } else if (typeof entry.desc === "string") {
    descriptions = [entry.desc];
  }
  const raw = descriptions.join(" ");
  const desc = replace5eTags2(raw);
  return `***${name}.*** ${desc}`;
}
function parseBestiaryFile2(json, editionId) {
  if (!json.monster) return [];
  json._editionId = editionId;
  const validMonsters = json.monster.filter((m) => {
    const acVal = Array.isArray(m.ac) ? m.ac[0]?.ac ?? m.ac[0] : typeof m.ac === "object" ? m.ac?.ac ?? null : m.ac;
    const hpVal = typeof m.hp === "object" ? m.hp?.average ?? m.hp?.hp ?? null : m.hp;
    return acVal != null && hpVal != null && !isNaN(Number(acVal)) && !isNaN(Number(hpVal));
  });
  const allNames = new Set(json.monster.map((m) => m.name));
  const validNames = new Set(validMonsters.map((m) => m.name));
  const missing = [...allNames].filter((name) => !validNames.has(name));
  return validMonsters.map((monster) => {
    const name = monster.name;
    const safeName = name.replace(/\//g, "-");
    const rawSize = monster.size || "M";
    const rawAlignment = Array.isArray(monster.alignment) ? monster.alignment.join(" ") : monster.alignment || "N";
    let rawType = "Unknown";
    if (typeof monster.type === "string") {
      rawType = capitalizeFirst3(monster.type);
    } else if (monster.type?.type) {
      const base = capitalizeFirst3(monster.type.type);
      const tags = monster.type.tags?.length ? ` (${monster.type.tags.map(capitalizeFirst3).join(", ")})` : "";
      rawType = `${base}${tags}`;
    }
    monster._parsedType = rawType;
    const ac = Array.isArray(monster.ac) ? monster.ac[0].ac : monster.ac;
    const hp = monster.hp?.average ?? monster.hp;
    const cr = monster.cr;
    if (!ac && !hp) {
      skippedMonsters2.push(monster.name);
      return null;
    }
    const abilities = Array.isArray(monster.ability) ? monster.ability : [monster.str, monster.dex, monster.con, monster.int, monster.wis, monster.cha];
    const [str = 10, dex = 10, con = 10, int = 10, wis = 10, cha = 10] = abilities;
    const speedList = [];
    if (typeof monster.speed === "object") {
      for (const [mode, val] of Object.entries(monster.speed)) {
        if (mode === "canHover") continue;
        if (val && typeof val === "object" && "number" in val) {
          const num = val.number;
          const cond = val.condition ? ` ${val.condition}` : "";
          speedList.push(`${mode} ${num} ft.${cond}`);
        } else {
          speedList.push(`${mode} ${val} ft.`);
        }
      }
    } else {
      speedList.push(`${monster.speed} ft.`);
    }
    const speed = speedList.join(", ");
    let source = getFullSourceName2(monster.source, editionId);
    source = source.replace(/:/g, " -");
    const category = categorizeCreature2(monster);
    const fm = buildFM2(monster, BESTIARY_META_DEFS2);
    const yaml = serializeFrontmatter2(fm, BESTIARY_META_DEFS2);
    const savingThrows = fm[FM_FIELDS4.SAVING_THROWS] || [];
    const skills = fm[FM_FIELDS4.SKILLS] || [];
    const senses = fm[FM_FIELDS4.SENSES] || [];
    const languages = fm[FM_FIELDS4.LANGUAGES] || [];
    let body = `# ${name}

${formatSizeAbbrev3(rawSize)} ${rawType}, ${formatAlignmentAbbrev2(rawAlignment)}

**Armor Class**: ${ac}
**Hit Points**: ${hp}
**Speed**: ${speed}
` + (savingThrows.length ? `**Saving Throws**: ${savingThrows.join(", ")}
` : "") + (skills.length ? `**Skills**: ${skills.join(", ")}
` : "") + (senses.length ? `**Senses**: ${senses.join(", ")}
` : "") + (languages.length ? `**Languages**: ${languages.join(", ")}
` : "") + `**Challenge**: ${cr}

` + renderAbilitiesTable2(str, dex, con, int, wis, cha);
    if (monster.trait) body += `

### Traits
${monster.trait.map(renderEntry2).join("\n\n")}`;
    if (monster.action) body += `

### Actions
${monster.action.map(renderEntry2).join("\n\n")}`;
    if (monster.reaction) body += `

### Reactions
${monster.reaction.map(renderEntry2).join("\n\n")}`;
    if (monster.legendary) body += `

### Legendary Actions
${monster.legendary.map(renderEntry2).join("\n\n")}`;
    const content = `---
${yaml}
---

${body}`;
    return {
      path: `${category}/${safeName}.md`,
      content
    };
  });
}

// src/parsers/5e-2025/items.ts
function capitalizeFirst4(input) {
  if (typeof input !== "string" || input.length === 0) return "";
  const s = input.trim();
  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
var DAMAGE_TYPE_MAP3 = {
  P: "Piercing",
  B: "Bludgeoning",
  S: "Slashing",
  N: "Necrotic",
  R: "Radiant",
  F: "Fire",
  C: "Cold",
  L: "Lightning",
  T: "Thunder",
  A: "Acid",
  H: "Healing",
  U: "Force",
  V: "Psychic"
};
var PROPERTY_MAP2 = {
  A: "Ammunition",
  F: "Finesse",
  H: "Heavy",
  L: "Light",
  R: "Reload",
  S: "Special",
  "2H": "Two-Handed",
  T: "Thrown",
  V: "Versatile"
};
var ITEM_TYPE_MAP2 = {
  $C: "Currency",
  $G: "Gem",
  A: "Ammunition",
  "AIR|DMG": "Vehicle (air)",
  "AF|DMG": "Future Ammo",
  AT: "Artisan Tools",
  EXP: "Explosive",
  FD: "Food and Drink",
  G: "Gear",
  GS: "Game",
  HA: "Heavy Armor",
  "IDG|TDCSR": "Illicit Drug",
  INS: "Instrument",
  LA: "Light Armor",
  M: "Weapon",
  MA: "Medium Armor",
  MNT: "Mounts and Vehicles",
  ODH: "Miscellaneous",
  P: "Consumable",
  R: "Ranged Weapon",
  RD: "Rod",
  RG: "Ring",
  S: "Shield",
  SC: "Scroll",
  SCF: "Spell Casting Focus",
  SHP: "Ship",
  T: "Tool",
  TAH: "Mounts and Vehicles",
  TG: "Trade Goods",
  VEH: "Mounts and Vehicles",
  WD: "Wand"
};
var codeFolderMap2 = {
  // Weapons & Armor
  "A": "Weapons and Armor/Ammunition",
  "M": "Weapons and Armor/Weapons",
  "R": "Weapons and Armor/Ranged Weapons",
  "S": "Weapons and Armor/Shields",
  "LA": "Weapons and Armor/Armor/Light Armor",
  "MA": "Weapons and Armor/Armor/Medium Armor",
  "HA": "Weapons and Armor/Armor/Heavy Armor",
  "EXP": "Weapons and Armor/Weapons/Explosives",
  // Future Ammo (AF|DMG → rawCode "AF")
  "AF": "Weapons and Armor/Ammunition/Future Ammo",
  // Magical Items
  "RD": "Magical Items/Rods",
  "RG": "Magical Items/Rings",
  "SC": "Magical Items/Scrolls",
  "SCF": "Magical Items/Spell Casting Focus",
  "WD": "Magical Items/Wands",
  // Valuables
  "$G": "Valuables/Gems",
  // Currency (rawCode becomes "C" after stripping $)
  "C": "Valuables/Currency",
  "TG": "Valuables/Trade Goods",
  // Artisan Goods
  "AT": "Artisan Goods/Tools",
  "T": "Artisan Goods/Tools",
  "INS": "Artisan Goods/Instruments",
  "GS": "Artisan Goods/Games",
  // Gear & Mounts
  "G": "Gear",
  // Mounts & Vehicles
  "MNT": "Gear/Mounts and Vehicles",
  "TAH": "Gear/Mounts and Vehicles",
  "VEH": "Gear/Mounts and Vehicles",
  // Air vehicles (AIR|DMG → rawCode "AIR")
  "AIR": "Gear/Mounts and Vehicles/Air",
  // Consumables
  "P": "Consumables",
  // Food & Drink
  "FD": "Consumables/Food and Drink",
  // Illicit Drugs (IDG|TDCSR → rawCode "IDG")
  "IDG": "Gear/Illicit Drugs",
  // Miscellaneous (ODH)
  "ODH": "Gear/Miscellaneous"
};
function parseItemsFile2(json, editionId) {
  const rawItems = [];
  if (Array.isArray(json.baseitem)) rawItems.push(...json.baseitem);
  if (Array.isArray(json.item)) rawItems.push(...json.item);
  if (Array.isArray(json.object)) rawItems.push(...json.object);
  if (Array.isArray(json.vehicle)) rawItems.push(...json.vehicle);
  if (!rawItems.length) return [];
  const baseNames = new Set(
    Array.isArray(json.baseitem) ? json.baseitem.map((b) => b.name) : []
  );
  const out = [];
  for (const it of rawItems) {
    const name = it.name;
    const safeName = name.replace(/[\/\\:]/g, "-");
    const rawCode = (it.type || "").split("|")[0].split("|")[0].replace(/^\$/, "");
    let folder = codeFolderMap2[rawCode] ?? "Miscellaneous";
    if (it.bonusWeapon) {
      folder = `${folder}/Variants`;
    } else {
      const isMagic = !!it.wondrous || !!it.reqAttune || !!it.req_attune || String(it.rarity).toLowerCase().includes("magic");
      if (isMagic) {
        const [, ...rest] = folder.split("/");
        folder = ["Magical Items", ...rest].join("/");
      }
    }
    if ((folder.startsWith("Weapons and Armor/Weapons") || folder.startsWith("Weapons and Armor/Ranged Weapons")) && it.weaponCategory) {
      folder = `${folder}/${capitalizeFirst4(it.weaponCategory)}`;
    }
    json._editionId = editionId;
    const fm = buildFM2(it, ITEM_META_DEFS2);
    if (rawCode === "M" && it.weaponCategory) {
      fm.type = `${capitalizeFirst4(it.weaponCategory)} Weapon`;
    } else if (ITEM_TYPE_MAP2[rawCode]) {
      fm.type = ITEM_TYPE_MAP2[rawCode];
    }
    if (Array.isArray(fm.damageTypes)) {
      fm.damageTypes = fm.damageTypes.map(
        (code) => DAMAGE_TYPE_MAP3[code] || code
      );
    }
    let yaml = serializeFrontmatter2(fm, ITEM_META_DEFS2);
    if (Array.isArray(it.packContents)) {
      yaml += "\npackContents:";
      for (const pc of it.packContents) {
        yaml += `
  - item: "${pc.item}"
    quantity: ${pc.quantity}`;
      }
    }
    const frontmatter = `---
${yaml}
---`;
    const lines = [];
    lines.push(`# ${name}`);
    lines.push("");
    const subtitle = it.weapon ? `${capitalizeFirst4(it.weaponCategory)} Weapon` : it.armor ? folder.split("/").pop() || "Armor" : "";
    if (subtitle) lines.push(`### *${subtitle}*`);
    if (it.weapon) {
      lines.push(`**Category**: ${capitalizeFirst4(it.weaponCategory)}`);
      lines.push(`**Damage**: ${it.dmg1 ?? ""}${it.dmg2 ? ` / ${it.dmg2}` : ""}`);
      const typesBody = (Array.isArray(it.dmgType) ? it.dmgType : [it.dmgType]).filter((t) => Boolean(t)).map((t) => DAMAGE_TYPE_MAP3[t] || t);
      lines.push(`**Damage Type**: ${typesBody.join(", ")}`);
      lines.push(`**Range**: ${it.range ?? "\u2014"}`);
      lines.push(`**Reload**: ${it.reload ?? "\u2014"}`);
      if (it.ammoType) lines.push(`**Ammo Type**: ${it.ammoType}`);
      if (Array.isArray(it.property) && it.property.length) {
        const propsBody = it.property.map((p) => PROPERTY_MAP2[p] || p);
        lines.push(`**Properties**: ${propsBody.join(", ")}`);
      }
    }
    if (it.armor) {
      lines.push(`**Armor Class**: ${it.ac}`);
      if (it.stealth) lines.push(`**Stealth Disadvantage**: true`);
      lines.push("");
    }
    const desc = it.entries ?? it.desc;
    if (desc) {
      for (const p of Array.isArray(desc) ? desc : [desc]) {
        if (typeof p === "string") {
          for (const line of replace5eTags2(p).split("\n")) {
            lines.push(line);
          }
          lines.push("");
        } else if (p && typeof p === "object") {
          if (lines[lines.length - 1] === "") {
            lines.pop();
          }
          lines.push(`#### ${p.name}`);
          const sub = Array.isArray(p.entries) ? p.entries : [];
          for (const sp of sub) {
            for (const line of replace5eTags2(sp).split("\n")) {
              lines.push(line);
            }
          }
          lines.push("");
        }
      }
    }
    const body = lines.join("\n");
    out.push({ path: `Items/${folder}/${safeName}.md`, content: `${frontmatter}

${body}` });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2025/helpers/frontmatter.ts
function cap3(str) {
  if (typeof str !== "string") return "";
  return str.charAt(0).toUpperCase() + str.slice(1);
}
var ABILITY_FULL2 = {
  str: "Strength",
  dex: "Dexterity",
  con: "Constitution",
  int: "Intelligence",
  wis: "Wisdom",
  cha: "Charisma"
};
var SIZE_MAP4 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var FM_FIELDS4 = {
  ABILITY_BONUSES: "ability_bonuses",
  AC: "AC",
  ALIGNMENT: "Alignment",
  AMMO_TYPE: "Ammo Type",
  ARMOR_PROFICIENCIES: "armor-prof",
  ATTACK_TYPE: "attack_type",
  ATTUNEMENT: "Attunement",
  ATTUNE_REQ: "Attune_Req",
  CASTING_TIME: "casting_time",
  CHARISMA: "charisma",
  CHA_MOD: "cha_mod",
  CONCENTRATION: "concentration",
  CONDITION_IMM: "cond_immunity",
  CONSTITUTION: "constitution",
  CON_MOD: "con_mod",
  COST: "cost",
  COMPONENTS: "Components",
  CHALLENGE_RATING: "CR",
  DAMAGE_TYPE: "damage_type",
  DAMAGE_TYPES: "damageTypes",
  DAMAGE: "damage",
  DAMAGE_RES: "dmg_resistance",
  DAMAGE_IMM: "dmg_immunity",
  DEXTERITY: "dexterity",
  DEX_MOD: "dex_mod",
  DURATION: "duration",
  RULESET: "ruleset",
  HP: "HP",
  INTELLIGENCE: "intelligence",
  INT_MOD: "int_mod",
  LANGUAGES: "languages",
  LEVEL: "level",
  MAGICAL: "magical",
  MATERIAL: "material",
  NAME: "name",
  PROPERTIES: "properties",
  RANGE: "range",
  RARITY: "rarity",
  RELOAD: "reload",
  RITUAL: "ritual",
  SAVE: "save",
  SAVING_THROWS: "saving_throws",
  SCHOOL: "school",
  SENSES: "senses",
  SIZE: "size",
  SKILLS: "skills",
  SKILL_CHOICE_LIST: "skill_choice_list",
  SOMATIC: "somatic",
  SOURCE: "source",
  SPECIES: "species",
  SPEED: "speed",
  SPELL_CAST_MOD: "Spell Cast Mod",
  SPELL_RANGE: "Range",
  STEALTH_DISADVANTAGE: "stealthDisadvantage",
  STRENGTH: "strength",
  STR_MOD: "str_mod",
  SUBRACES: "subraces",
  TOOL_PROFICIENCIES: "tool-prof",
  TOOL_CHOICE_LIST: "tool_choice_list",
  TRAITS: "traits",
  TYPE: "type",
  VARIANT: "Variant",
  VERBAL: "verbal",
  WEAPON_PROFICIENCIES: "weapon-prof",
  WEIGHT: "weight",
  WISDOM: "wisdom",
  WIS_MOD: "wis_mod"
};
var unifiedArmorProfs2 = (val) => Array.isArray(val?.armor) ? val.armor.map(cap3) : Array.isArray(val) ? val.map(cap3) : [];
function unifiedWeaponProfs2(val) {
  const rawArr = Array.isArray(val?.weapons) ? val.weapons : Array.isArray(val) ? val : [];
  const out = /* @__PURE__ */ new Set();
  function handleOne(entry) {
    if (Array.isArray(entry)) {
      entry.forEach(handleOne);
      return;
    }
    if (typeof entry === "string") {
      const lit = entry.trim().toLowerCase();
      if (lit === "simple") {
        out.add("Simple Weapons");
      } else if (lit === "martial") {
        out.add("Martial Weapons");
      } else {
        const text = entry.startsWith("{@") ? replace5eTags2(entry) : cap3(entry);
        out.add(text);
      }
      return;
    }
    if (entry && typeof entry === "object" && entry.proficiency) {
      const name = cap3(entry.proficiency);
      out.add(entry.optional ? `${name} (optional)` : name);
    }
  }
  rawArr.forEach(handleOne);
  return [...out];
}
var unifiedSaves2 = (val) => {
  if (Array.isArray(val)) {
    return val.map(
      (k) => ({
        str: "Strength",
        dex: "Dexterity",
        con: "Constitution",
        int: "Intelligence",
        wis: "Wisdom",
        cha: "Charisma"
      })[k] ?? k.toUpperCase()
    );
  }
  if (typeof val === "object" && val !== null) {
    return Object.keys(val).map((k) => k.toUpperCase());
  }
  return [];
};
var unifiedSkills4 = (val) => {
  if (val && !Array.isArray(val) && typeof val === "object" && // ensure every value is a string or number
  Object.values(val).every((v) => typeof v === "string" || typeof v === "number")) {
    return Object.entries(val).map(
      ([skill, mod]) => `${cap3(skill)} ${mod}`.trim()
    );
  }
  if (val && !Array.isArray(val) && typeof val === "object") {
    const nested = val.skills ?? val.skillProf ?? val.skillProficiencies;
    return unifiedSkills4(nested);
  }
  if (!Array.isArray(val)) return [];
  const out = /* @__PURE__ */ new Set();
  for (const e of val) {
    if (e && typeof e === "object" && typeof e.any === "number") {
      out.add(`Choose ${e.any}`);
      continue;
    }
    if (e && typeof e === "object" && e.choose) {
      const cnt = e.choose.count ?? 1;
      out.add(`Choose ${cnt}`);
    }
    if (e && typeof e === "object") {
      for (const [k, v] of Object.entries(e)) {
        if (v === true) out.add(cap3(k));
      }
    }
    if (typeof e === "string") {
      out.add(cap3(e));
    }
  }
  return [...out];
};
var unifiedToolProfs2 = (val) => {
  let entries = Array.isArray(val) ? val : Array.isArray(val?.toolProficiencies) ? val.toolProficiencies : Array.isArray(val?.tools) ? val.tools : [];
  const out = /* @__PURE__ */ new Set();
  let sawChoose = false;
  for (const e of entries) {
    if (typeof e === "string") {
      out.add(cap3(e));
      continue;
    }
    if (e?.choose) {
      const cnt = e.choose.count ?? 1;
      sawChoose = true;
      out.add(`Choose ${cnt}`);
    }
    for (const [k, v] of Object.entries(e)) {
      if (v === true) {
        out.add(cap3(k));
      } else if (typeof v === "number" && k.startsWith("any")) {
        const raw = k.replace(/^any/, "");
        const spaced = raw.replace(/([a-z])([A-Z])/g, "$1 $2").split(" ").map(cap3).join(" ");
        out.add(`Choose ${v} ${spaced}`);
      }
    }
  }
  return [...out];
};
var ALL_FIELD_DEFS2 = [
  // ─── Core ───
  { callSign: "NAME", jsonKey: "name" },
  {
    callSign: "SOURCE",
    jsonKey: ["source"],
    conv: (raw, allJson) => {
      const out = /* @__PURE__ */ new Set();
      const editionId = allJson._editionId;
      const arr = Array.isArray(raw) ? raw : [raw];
      arr.forEach((src) => {
        out.add(getFullSourceName2(src, editionId));
      });
      for (const os of allJson.otherSources ?? []) {
        if (os && typeof os.source === "string") {
          out.add(getFullSourceName2(os.source, editionId));
        }
      }
      for (const rep of allJson.reprintedAs ?? []) {
        const repStr = typeof rep === "string" ? rep : String(rep);
        const parts = repStr.split("|");
        const src = parts[1] ?? parts[0];
        out.add(getFullSourceName2(src, editionId));
      }
      return [...out];
    }
  },
  // ─── Proficiencies ───
  { callSign: "ARMOR_PROFICIENCIES", jsonKey: ["armorProficiencies", "armorProfs", "startingProficiencies"], conv: unifiedArmorProfs2 },
  {
    callSign: "WEAPON_PROFICIENCIES",
    jsonKey: ["weaponProficiencies", "weaponProfs", "startingProficiencies"],
    conv: unifiedWeaponProfs2
  },
  { callSign: "TOOL_PROFICIENCIES", jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"], conv: unifiedToolProfs2 },
  {
    callSign: "TOOL_CHOICE_LIST",
    jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.toolProficiencies) ? raw.toolProficiencies : Array.isArray(raw?.tools) ? raw.tools : [];
      const choice = arr.find((e) => e?.choose);
      return choice?.choose?.from?.map((s) => cap3(s)) ?? [];
    }
  },
  { callSign: "SAVING_THROWS", jsonKey: ["save", "proficiency"], conv: unifiedSaves2 },
  {
    callSign: "SKILLS",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: unifiedSkills4
  },
  {
    callSign: "SKILL_CHOICE_LIST",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.skillProficiencies) ? raw.skillProficiencies : Array.isArray(raw?.skills) ? raw.skills : Array.isArray(raw?.skillProf) ? raw.skillProf : [];
      const choiceObj = arr.find((e) => e?.choose || typeof e.any === "number");
      if (!choiceObj) return [];
      if (choiceObj.choose && Array.isArray(choiceObj.choose.from)) {
        return choiceObj.choose.from.map(cap3);
      }
      if (typeof choiceObj.any === "number") {
        return SKILL_OPTIONS2;
      }
      return [];
    }
  },
  {
    callSign: "SPELL_CAST_MOD",
    jsonKey: "spellcastingAbility",
    conv: (raw) => {
      const key = String(raw).toLowerCase();
      return ABILITY_FULL2[key] || key.toUpperCase();
    }
  },
  // ─── Spells ───
  { callSign: "LEVEL", jsonKey: "level" },
  { callSign: "SCHOOL", jsonKey: "school", conv: (s) => SCHOOL_MAP2[s] ?? s },
  { callSign: "CASTING_TIME", jsonKey: "time", conv: formatTime2 },
  { callSign: "SPELL_RANGE", jsonKey: "range", conv: formatRange2 },
  { callSign: "DURATION", jsonKey: "duration", conv: formatDuration2 },
  { callSign: "VERBAL", jsonKey: "components", conv: (c) => !!c.v },
  { callSign: "SOMATIC", jsonKey: "components", conv: (c) => !!c.s },
  { callSign: "MATERIAL", jsonKey: "components", conv: (c) => !!c.m },
  {
    callSign: "COMPONENTS",
    jsonKey: "components",
    conv: (c) => {
      if (!c.m) return [];
      const raw = Array.isArray(c.m) ? c.m : [c.m];
      return raw.map((item) => {
        if (typeof item === "string") return item;
        if (item && typeof item === "object" && typeof item.text === "string") {
          return item.text;
        }
        return null;
      }).filter((comp) => comp !== null);
    }
  },
  { callSign: "ATTACK_TYPE", jsonKey: "attackType" },
  { callSign: "DAMAGE_TYPE", jsonKey: "damageInflict", conv: (d) => Array.isArray(d) ? d[0] : d },
  { callSign: "RITUAL", jsonKey: "ritual" },
  { callSign: "CONCENTRATION", jsonKey: "duration", conv: (ds) => Array.isArray(ds) && ds.some((x) => x.concentration) },
  { callSign: "SAVE", jsonKey: "saveAttr" },
  // ─── Species / Creatures ───
  { callSign: "SPECIES", jsonKey: "name" },
  {
    callSign: "SIZE",
    jsonKey: "size",
    conv: (raw) => {
      if (Array.isArray(raw)) {
        return raw.map((r) => SIZE_MAP4[r] || r);
      } else {
        return SIZE_MAP4[raw] || raw;
      }
    }
  },
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (sp) => {
      if (typeof sp === "number") {
        return [`Walk ${sp} ft.`];
      }
      if (!sp || typeof sp !== "object") return [];
      return Object.entries(sp).filter(([mode]) => mode !== "canHover").map(([mode, v]) => {
        const n = typeof v === "object" && v !== null && "number" in v ? v.number : v;
        const label = mode === "walk" ? "Walk" : cap3(mode);
        return `${label} ${n} ft.`;
      });
    }
  },
  { callSign: "LANGUAGES", jsonKey: ["languages", "languageProficiencies"], conv: (arr) => {
    if (!Array.isArray(arr)) return [];
    const out = [];
    for (const lp of arr) {
      if (typeof lp === "string") out.push(cap3(lp));
      else if (typeof lp === "object") {
        for (const [lang, val] of Object.entries(lp)) {
          if (val) out.push(cap3(lang));
        }
      }
    }
    return [...new Set(out)];
  } },
  { callSign: "SENSES", jsonKey: "senses", conv: (sen) => {
    if (Array.isArray(sen)) return sen.map((s) => s.replace(/^\d+\s*/, "").replace(/^./, (c) => c.toUpperCase()));
    if (sen && typeof sen === "object") return Object.entries(sen).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)} ${v}`);
    return [];
  } },
  {
    callSign: "TRAITS",
    jsonKey: ["classFeatures", "entries"],
    conv: (raw, allJson) => {
      const clsRec = Array.isArray(allJson.class) ? allJson.class[0] : allJson;
      const className = typeof clsRec.name === "string" ? clsRec.name : "";
      const omit = /* @__PURE__ */ new Set([
        "Ability Score Improvement",
        "Archetype Feature",
        "Subclass Feature"
        // add more if you like…
      ]);
      const seen = /* @__PURE__ */ new Set();
      if (Array.isArray(allJson.classFeatures)) {
        return allJson.classFeatures.flatMap((feat) => {
          if (feat && typeof feat === "object" && feat.gainSubclassFeature) return [];
          const rawName = typeof feat === "string" ? feat : typeof feat.classFeature === "string" ? feat.classFeature : "";
          const name = rawName.split("|")[0].trim();
          if (!name || omit.has(name) || seen.has(name)) return [];
          seen.add(name);
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return `[[${className}#${anchor}|${name}]]`;
        });
      }
      const ents = Array.isArray(raw) ? raw : [];
      const featureNames = ents.filter((e) => e?.data?.isFeature && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
      if (featureNames.length) return featureNames;
      return ents.filter((e) => e && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
    }
  },
  { callSign: "AC", jsonKey: "ac", conv: (a) => Array.isArray(a) ? a[0].ac : a },
  { callSign: "HP", jsonKey: "hp", conv: (hp) => hp?.average ?? hp },
  { callSign: "CHALLENGE_RATING", jsonKey: "cr" },
  { callSign: "STRENGTH", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[0] : arr?.str ?? 0 },
  { callSign: "DEXTERITY", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[1] : arr?.dex ?? 0 },
  { callSign: "CONSTITUTION", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[2] : arr?.con ?? 0 },
  { callSign: "INTELLIGENCE", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[3] : arr?.int ?? 0 },
  { callSign: "WISDOM", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[4] : arr?.wis ?? 0 },
  { callSign: "CHARISMA", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[5] : arr?.cha ?? 0 },
  {
    callSign: "ALIGNMENT",
    jsonKey: "alignment",
    conv: (a) => {
      const raw = Array.isArray(a) ? a.join(" ") : typeof a === "string" ? a : String(a);
      const cleaned = raw.replace(/\bA\b/g, "Any").replace(/\bU\b/g, "Unaligned").replace(/\bN\b/g, "Neutral").replace(/\bL\b/g, "Lawful").replace(/\bC\b/g, "Chaotic").replace(/\bG\b/g, "Good").replace(/\bE\b/g, "Evil");
      return formatAlignmentAbbrev2(cleaned);
    }
  },
  {
    callSign: "TYPE",
    jsonKey: "type",
    conv: (t) => {
      if (typeof t === "string") {
        return ITEM_TYPE_MAP2[t] ?? cap3(t);
      }
      if (t && typeof t === "object") {
        const code = String(t.type || "").toUpperCase();
        if (ITEM_TYPE_MAP2[code]) {
          return ITEM_TYPE_MAP2[code];
        }
        const base = t.type ? cap3(t.type) : "Unknown";
        const tags = Array.isArray(t.tags) ? t.tags.map(cap3) : [];
        return tags.length ? `${base} (${tags.join(", ")})` : base;
      }
      return void 0;
    }
  },
  // ─── Items ───
  { callSign: "TYPE", jsonKey: "_parsedType" },
  { callSign: "RARITY", jsonKey: "rarity", conv: (r) => {
    const s = String(r || "").toLowerCase();
    return s && s !== "none" ? s[0].toUpperCase() + s.slice(1) : void 0;
  } },
  {
    callSign: "COST",
    jsonKey: "value",
    conv: (raw) => {
      const s = String(raw).trim().toLowerCase();
      let num;
      if (s.endsWith("cp")) {
        num = parseFloat(s);
        return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
      }
      if (s.endsWith("sp")) {
        num = parseFloat(s);
        return num >= 10 ? `${Math.round(num / 10 * 100) / 100}gp` : `${num}sp`;
      }
      if (s.endsWith("gp")) {
        num = parseFloat(s);
        return `${Math.round(num * 100) / 100}gp`;
      }
      num = parseFloat(s) || 0;
      return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
    }
  },
  { callSign: "WEIGHT", jsonKey: "weight" },
  { callSign: "MAGICAL", jsonKey: "wondrous", conv: (_w, all) => !!all.wondrous || !!all.reqAttune },
  { callSign: "VARIANT", jsonKey: "bonusWeapon", conv: (b) => typeof b === "string" && b.startsWith("+") },
  { callSign: "PROPERTIES", jsonKey: "property", conv: (arr) => Array.isArray(arr) ? arr.map((p) => PROPERTY_MAP2[p] || p) : [] },
  { callSign: "DAMAGE", jsonKey: "dmg1", conv: (d, all) => d ? all.dmg2 ? `${d} / ${all.dmg2}` : `${d}` : void 0 },
  { callSign: "DAMAGE_TYPES", jsonKey: "dmgType", conv: (dt) => dt == null ? [] : Array.isArray(dt) ? dt : [dt] },
  { callSign: "RANGE", jsonKey: "range" },
  { callSign: "RELOAD", jsonKey: "reload" },
  { callSign: "AMMO_TYPE", jsonKey: "ammoType" },
  { callSign: "STEALTH_DISADVANTAGE", jsonKey: "stealth" },
  {
    callSign: "ATTUNEMENT",
    jsonKey: ["wondrous", "reqAttune", "req_attune", "reqAttuneTags"],
    conv: (_raw, allJson) => {
      const j = allJson;
      const hasText = typeof j.reqAttune === "string" && j.reqAttune.trim() !== "";
      const hasTags = Array.isArray(j.reqAttuneTags) && j.reqAttuneTags.length > 0;
      return hasText || hasTags;
    }
  },
  {
    callSign: "ATTUNE_REQ",
    jsonKey: "reqAttuneTags",
    conv: (tags = [], _all) => {
      const mapLetter = {
        A: "Any",
        U: "Unaligned",
        N: "Neutral",
        L: "Lawful",
        C: "Chaotic",
        G: "Good",
        E: "Evil"
      };
      const reqs = [];
      for (const tag of tags) {
        if (tag.class && Array.isArray(tag.alignment)) {
          const cls = cap3(tag.class);
          for (const code of tag.alignment) {
            reqs.push(`${mapLetter[code] || code} ${cls}`);
          }
        } else if (tag.class) {
          reqs.push(cap3(tag.class));
        } else if (Array.isArray(tag.alignment)) {
          for (const code of tag.alignment) {
            reqs.push(mapLetter[code] || code);
          }
        } else if (tag.background) {
          const [bg] = String(tag.background).split("|");
          reqs.push(bg.split(" ").map(cap3).join(" "));
        } else if (tag.spellcasting) {
          reqs.push("Spellcaster");
        }
      }
      return Array.from(new Set(reqs));
    }
  },
  // ─── Other ───
  { callSign: "DAMAGE_RES", jsonKey: "resist", conv: (v) => Array.isArray(v) ? v.map(cap3) : [] },
  { callSign: "RULESET", jsonKey: "_editionId" },
  // ─── Ability‐score modifiers (only emit when nonzero) ───
  {
    callSign: "STR_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].str ?? 0 : arr.str ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "DEX_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].dex ?? 0 : arr.dex ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CON_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].con ?? 0 : arr.con ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "INT_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].int ?? 0 : arr.int ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "WIS_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].wis ?? 0 : arr.wis ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CHA_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].cha ?? 0 : arr.cha ?? 0;
      return v !== 0 ? v : void 0;
    }
  }
];
function buildFM2(json, defs) {
  const fm = {};
  for (const { callSign, jsonKey, conv } of defs) {
    const keys = Array.isArray(jsonKey) ? jsonKey : [jsonKey];
    let raw = void 0;
    for (const key of keys) {
      if (json[key] != null) {
        raw = json[key];
        break;
      }
    }
    if (raw == null) continue;
    const val = conv ? conv(raw, json) : raw;
    fm[FM_FIELDS4[callSign]] = val;
  }
  return fm;
}
function serializeFrontmatter2(fm, defs) {
  const filtered = {};
  const hasSkillChoice = Array.isArray(fm[FM_FIELDS4.SKILL_CHOICE_LIST]) && fm[FM_FIELDS4.SKILL_CHOICE_LIST].length > 0;
  const hasToolChoice = Array.isArray(fm[FM_FIELDS4.TOOL_CHOICE_LIST]) && fm[FM_FIELDS4.TOOL_CHOICE_LIST].length > 0;
  for (const [k, v] of Object.entries(fm)) {
    if (v === void 0) continue;
    if (k === FM_FIELDS4.COMPONENTS && Array.isArray(v) && v.length === 0) continue;
    if ((k === FM_FIELDS4.TOOL_CHOICE_LIST || k === FM_FIELDS4.SKILL_CHOICE_LIST) && Array.isArray(v) && v.length === 0) continue;
    filtered[k] = v;
  }
  let keysToEmit;
  if (defs) {
    const wanted = defs.map((d) => FM_FIELDS4[d.callSign]);
    keysToEmit = wanted.filter((k) => k in filtered);
    keysToEmit.push(
      ...Object.keys(filtered).filter((k) => !keysToEmit.includes(k))
    );
  } else {
    keysToEmit = Object.keys(filtered);
  }
  return keysToEmit.map((k) => {
    const v = filtered[k];
    if (Array.isArray(v)) {
      const inline = v.map((item) => JSON.stringify(item)).join(", ");
      return `${k}: [${inline}]`;
    }
    if (typeof v === "string") {
      return `${k}: "${v}"`;
    }
    return `${k}: ${v}`;
  }).join("\n");
}
var SKILL_OPTIONS2 = [
  "Acrobatics",
  "Animal Handling",
  "Arcana",
  "Athletics",
  "Deception",
  "History",
  "Insight",
  "Intimidation",
  "Investigation",
  "Medicine",
  "Nature",
  "Perception",
  "Performance",
  "Persuasion",
  "Religion",
  "Sleight of Hand",
  "Stealth",
  "Survival"
];
var SPELL_KEYS2 = [
  "NAME",
  "LEVEL",
  "SCHOOL",
  "CASTING_TIME",
  "SPELL_RANGE",
  "DURATION",
  "VERBAL",
  "SOMATIC",
  "MATERIAL",
  "COMPONENTS",
  "CONCENTRATION",
  "SOURCE"
];
var SPECIES_KEYS2 = [
  "SPECIES",
  "SIZE",
  "SPEED",
  "LANGUAGES",
  "TRAITS",
  "SKILLS",
  "STR_MOD",
  "DEX_MOD",
  "CON_MOD",
  "INT_MOD",
  "WIS_MOD",
  "CHA_MOD",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "WEAPON_PROFICIENCIES",
  "SENSES",
  "DAMAGE_RES",
  "SOURCE"
];
var ITEM_KEYS2 = [
  "NAME",
  "TYPE",
  "RARITY",
  "COST",
  "WEIGHT",
  "SOURCE",
  "PROPERTIES",
  "DAMAGE",
  "DAMAGE_TYPES",
  "RANGE",
  "RELOAD",
  "AMMO_TYPE",
  "AC",
  "STEALTH_DISADVANTAGE",
  "MAGICAL",
  "ATTUNEMENT",
  "ATTUNE_REQ"
];
var BESTIARY_KEYS2 = [
  "NAME",
  "SIZE",
  "TYPE",
  "ALIGNMENT",
  "AC",
  "HP",
  "SPEED",
  "STRENGTH",
  "DEXTERITY",
  "CONSTITUTION",
  "INTELLIGENCE",
  "WISDOM",
  "CHARISMA",
  "SAVING_THROWS",
  "SKILLS",
  "SENSES",
  "LANGUAGES",
  "CHALLENGE_RATING",
  "SOURCE"
];
var CLASS_KEYS2 = [
  "NAME",
  "SPELL_CAST_MOD",
  "ARMOR_PROFICIENCIES",
  "WEAPON_PROFICIENCIES",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "SAVING_THROWS",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TRAITS",
  "SOURCE"
];
var BACKGROUND_KEYS2 = [
  "NAME",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "TRAITS",
  "SOURCE"
];
var FEATS_KEYS2 = [
  "SOURCE"
];
var SPELL_META_DEFS2 = SPELL_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPELL_KEY ${key}`);
  return def;
});
var SPECIES_META_DEFS2 = SPECIES_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPECIES_KEY ${key}`);
  return def;
});
var ITEM_META_DEFS2 = ITEM_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for ITEM_KEY ${key}`);
  return def;
});
var BESTIARY_META_DEFS2 = BESTIARY_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BESTIARY_KEY ${key}`);
  return def;
});
var CLASS_META_DEFS2 = CLASS_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for CLASS_KEY ${key}`);
  return def;
});
var BACKGROUND_META_DEFS2 = BACKGROUND_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});
var FEATS_META_DEFS2 = FEATS_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});

// src/parsers/5e-2025/spells.ts
var SCHOOL_MAP2 = {
  A: "Abjuration",
  C: "Conjuration",
  D: "Divination",
  E: "Enchantment",
  V: "Evocation",
  I: "Illusion",
  N: "Necromancy",
  T: "Transmutation"
};
function ordinal2(n) {
  const suffix = n === 1 ? "st" : n === 2 ? "nd" : n === 3 ? "rd" : "th";
  return `${n}${suffix}`;
}
function formatRange2(range) {
  if (!range) return "";
  if (typeof range === "string") return range;
  if (range.type === "special") return "Special";
  if (range.type === "point" && range.distance) {
    const dist = range.distance;
    if (dist.type === "touch") return "Touch";
    if (dist.type === "self") return "Self";
    if (dist.type === "sight") return "Sight";
    if (dist.amount) return `${dist.amount} ${dist.type}`;
  }
  return "Varies";
}
function formatTime2(time) {
  if (!Array.isArray(time)) return "";
  return time.map((t) => `${t.number} ${t.unit}`).join(", ");
}
function formatDuration2(duration) {
  if (!Array.isArray(duration)) return "";
  return duration.map((d) => {
    if (d.type === "instant") return "Instantaneous";
    if (d.type === "timed" && d.duration) {
      return `${d.duration.amount} ${d.duration.type}${d.concentration ? " (concentration)" : ""}`;
    }
    if (d.type === "permanent") return "Permanent";
    return "Special";
  }).join(", ");
}
function formatComponents2(components) {
  if (!components) return "";
  const parts = [];
  if (components.v) parts.push("V");
  if (components.s) parts.push("S");
  if (components.m) {
    let matDetails = [];
    if (Array.isArray(components.m)) {
      matDetails = components.m.map(
        (item) => typeof item === "string" ? item : item && typeof item.text === "string" ? item.text : null
      ).filter((t) => !!t);
    } else if (typeof components.m === "string") {
      matDetails = [components.m];
    } else if (components.m.text) {
      matDetails = [components.m.text];
    }
    const matPart = matDetails.length > 0 ? `M (${matDetails.join(", ")})` : "M";
    parts.push(matPart);
  }
  return parts.join(", ");
}
function parseSpellsFile2(json, editionId) {
  if (!json.spell) return [];
  json._editionId = editionId;
  return json.spell.map((spell) => {
    const sources = spell.source ? Array.isArray(spell.source) ? spell.source : [spell.source] : ["unknown"];
    const name = spell.name;
    const school = SCHOOL_MAP2[spell.school] ?? spell.school;
    const level = spell.level;
    const range = formatRange2(spell.range);
    const castingTime = formatTime2(spell.time);
    const duration = formatDuration2(spell.duration);
    const formattedSources = sources.map((s) => getFullSourceName2(s, editionId));
    const attackType = spell.attackType || "";
    const damageType = spell.damageInflict?.[0] || "Teleportation";
    const ritual = spell.ritual === true;
    const concentration = spell.duration?.some((d) => d.concentration) ?? false;
    const FM = buildFM2(spell, SPELL_META_DEFS2);
    const yaml = serializeFrontmatter2(FM, SPELL_META_DEFS2);
    const safeName = name.replace(/\//g, "-");
    const title = `# ${name}`;
    const levelLabel = level === 0 ? `${school} Cantrip` : `${ordinal2(level)}-level ${school} Spell`;
    const subtitle = `### *${levelLabel}*${concentration ? " *(Concentration)*" : ""}`;
    const headerLines = [
      title,
      subtitle,
      `**Casting Time:** ${castingTime}`,
      `**Range:** ${range}`,
      `**Components:** ${formatComponents2(spell.components)}`,
      `**Duration:** ${duration}`
    ];
    const bodyLines = [
      ...(spell.entries ?? []).map((e) => formatEntry2(e)),
      ...(spell.entriesHigherLevel ?? []).map((e) => formatEntry2(e))
    ];
    const footerLines = [
      `---`,
      `**Source:** ${formattedSources.join(", ")}`
    ];
    return {
      path: `${safeName}.md`,
      content: [
        `---
${yaml}
---`,
        headerLines.join("\n"),
        ``,
        bodyLines.join("\n\n"),
        ``,
        footerLines.join("\n")
      ].join("\n")
    };
  });
}

// src/parsers/5e-2025/species.ts
function slug2(name) {
  return name.replace(/;/g, ":").replace(/[\/:"]/g, ":").trim();
}
var BLOCKED_TRAITS2 = ["Age", "Size", "Languages", "Creature Type", "Speed"];
function parseSpeciesFile2(json, editionId) {
  if (!Array.isArray(json.race)) return [];
  json._editionId = editionId;
  const rawVariants = json.race.filter(
    (r) => !("reprintedAs" in r) && !/\((?:Kaladesh|Zendikar|Amonkhet|Innistrad|Ixalan)\)$/.test(r.name)
  );
  const byName = /* @__PURE__ */ new Map();
  for (const r of rawVariants) {
    const list = byName.get(r.name) ?? [];
    list.push(r);
    byName.set(r.name, list);
  }
  const subracesList = Array.isArray(json.subrace) ? json.subrace : [];
  const out = [];
  for (const [raceName, raceVariants] of byName.entries()) {
    const safeName = slug2(raceName);
    const primary = raceVariants.reduce(
      (best, cur) => Object.keys(cur).length > Object.keys(best).length ? cur : best,
      raceVariants[0]
    );
    if (!primary.ability) {
      const humanEntry = subracesList.find(
        (sr) => sr.raceName === raceName && sr.raceSource === primary.source && !("name" in sr) && Array.isArray(sr.ability)
      );
      if (humanEntry) primary.ability = humanEntry.ability;
    }
    const fm = buildFM2(primary, SPECIES_META_DEFS2);
    const senses = [];
    if (primary.darkvision) senses.push(`Darkvision ${primary.darkvision} ft.`);
    if (primary.blindsight) senses.push(`Blindsight ${primary.blindsight} ft.`);
    if (primary.tremorsense) senses.push(`Tremorsense ${primary.tremorsense} ft.`);
    if (primary.truesight) senses.push(`Truesight ${primary.truesight} ft.`);
    if (senses.length) fm.senses = senses;
    if (Array.isArray(fm.traits)) {
      fm.traits = fm.traits.filter((t) => !BLOCKED_TRAITS2.includes(t));
    }
    const yaml = serializeFrontmatter2(fm, SPECIES_META_DEFS2);
    const lines = [];
    lines.push(`# ${raceName}`, `## Stats`);
    const size = Array.isArray(primary.size) ? primary.size.map((s) => SIZE_MAP4[s] || s).join("/") : SIZE_MAP4[primary.size] ?? primary.size;
    lines.push(`**Size:** ${size}`);
    const speed = typeof primary.speed === "number" ? primary.speed : primary.speed?.walk ?? primary.speed?.base ?? 0;
    lines.push(`**Speed:** ${speed} ft. walking`);
    const kids = subracesList.filter(
      (sr) => sr.name && sr.raceName === raceName && sr.raceSource === primary.source
    );
    const rawAbility = Array.isArray(primary.ability) ? primary.ability : Array.isArray(kids[0]?.ability) ? kids[0].ability : [];
    if (Array.isArray(rawAbility) && rawAbility.length) {
      const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
      let chooseOpt = null;
      for (const obj of rawAbility) {
        if ("choose" in obj) chooseOpt = obj.choose;
        else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
      }
      const pairs = Object.entries(bonuses);
      const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
      if (chooseOpt?.count && Array.isArray(chooseOpt.from)) {
        parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
      }
      if (parts.length) lines.push(`**Ability Scores:** ${parts.join(", ")}`);
    }
    const langs = fm.languages;
    if (langs?.length) lines.push(`**Languages:** ${langs.join(", ")}`);
    if (Array.isArray(primary.skillProficiencies)) {
      const skillLabels = [];
      for (const e of primary.skillProficiencies) {
        if (e.choose?.from) {
          skillLabels.push(`Choose from: ${e.choose.from.map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(", ")}`);
        } else {
          const val = e.proficiency ?? e.name ?? e;
          if (typeof val === "string") skillLabels.push(val.charAt(0).toUpperCase() + val.slice(1));
        }
      }
      if (skillLabels.length) lines.push(`**Skill Proficiencies:** ${skillLabels.join("; ")}`);
    }
    const tp = fm[FM_FIELDS4.TOOL_PROFICIENCIES];
    const wp = fm[FM_FIELDS4.WEAPON_PROFICIENCIES];
    const ap = fm[FM_FIELDS4.ARMOR_PROFICIENCIES];
    if (tp?.length) lines.push(`**Tool Proficiencies:** ${tp.join(", ")}`);
    if (wp?.length) lines.push(`**Weapon Proficiencies:** ${wp.join(", ")}`);
    if (ap?.length) lines.push(`**Armor Proficiencies:** ${ap.join(", ")}`);
    lines.push(`## Traits`);
    const seen = /* @__PURE__ */ new Set();
    for (const trait of fm.traits || []) {
      lines.push(`##### ${trait}`);
      const ent = primary.entries?.find((e) => e.name === trait);
      if (ent?.entries) {
        ent.entries.forEach((sub, idx) => {
          let blk;
          if (sub.type === "table") blk = renderMarkdownTable2(sub);
          else if (sub.type === "list") blk = sub.items.map((it) => typeof it === "string" ? `- ${replace5eTags2(it)}` : `- ${it.name}`).join("\n");
          else if (typeof sub === "string") blk = replace5eTags2(sub);
          if (blk && !seen.has(blk)) {
            lines.push(blk);
            seen.add(blk);
            if (ent.entries.length > 1 && idx < ent.entries.length - 1) lines.push("");
          }
        });
      }
    }
    const subs = kids;
    if (subs.length) {
      out.push({
        path: `Species/${safeName}/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
      const subFolder = `Species/${safeName}/Subspecies`;
      for (const sr of subs) {
        const display = sr.name.replace(/;/g, ":");
        const subLines = [`# ${display}`];
        if (Array.isArray(sr.ability)) {
          const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
          let chooseOpt = null;
          for (const obj of sr.ability) {
            if ("choose" in obj) chooseOpt = obj.choose;
            else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
          }
          const pairs = Object.entries(bonuses);
          const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
          if (chooseOpt?.count) parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
          if (parts.length) subLines.push(`**Ability Scores:** ${parts.join(", ")}`);
        }
        for (const entry of sr.entries || []) {
          subLines.push(formatEntry2(entry));
          subLines.push("");
        }
        const subYaml = serializeFrontmatter2(buildFM2(sr, SPECIES_META_DEFS2), SPECIES_META_DEFS2);
        out.push({
          path: `${subFolder}/${slug2(sr.name)}.md`,
          content: `---
${subYaml}
---

${subLines.join("\n")}`
        });
      }
    } else {
      out.push({
        path: `Species/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
    }
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2025/classes.ts
function isTypedEntry(x) {
  return x != null && typeof x === "object" && !Array.isArray(x) && typeof x.type === "string";
}
function formatFeatureLink2(name) {
  const ignore = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
  if (ignore.some((sub) => name.toLowerCase().includes(sub.toLowerCase()))) {
    return name;
  }
  const anchor = name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
  return `[[#${anchor}]]`;
}
var OPT_FEATURE_TYPE_TO_FULL2 = {
  AI: "Artificer Infusion",
  ED: "Elemental Discipline",
  EI: "Eldritch Invocation",
  MM: "Metamagic",
  MV: "Maneuver",
  "MV:B": "Maneuver, Battle Master",
  "MV:C2-UA": "Maneuver, Cavalier V2 (UA)",
  "AS:V1-UA": "Arcane Shot, V1 (UA)",
  "AS:V2-UA": "Arcane Shot, V2 (UA)",
  AS: "Arcane Shot",
  OTH: "Other",
  "FS:F": "Fighting Style; Fighter",
  "FS:B": "Fighting Style; Bard",
  "FS:P": "Fighting Style; Paladin",
  "FS:R": "Fighting Style; Ranger",
  PB: "Pact Boon",
  OR: "Onomancy Resonant",
  RN: "Rune Knight Rune",
  AF: "Alchemical Formula",
  TT: "Traveler's Trick"
};
function parseClassFile2(json, editionId, fileName, optionalFeatures) {
  json._editionId = editionId;
  const cls = Array.isArray(json.class) ? json.class[0] : json;
  const className = typeof cls.name === "string" ? cls.name : fileName ? fileName.replace(/^class-/, "").replace(/\.json$/, "") : "Unknown";
  const subclassFiles = [];
  const PROF_BONUS_BY_LEVEL = [
    "+2",
    "+2",
    "+2",
    "+2",
    "+3",
    "+3",
    "+3",
    "+3",
    "+4",
    "+4",
    "+4",
    "+4",
    "+5",
    "+5",
    "+5",
    "+5",
    "+6",
    "+6",
    "+6",
    "+6"
  ];
  const hdNum = cls.hd?.number ?? 1;
  const hdFaces = cls.hd?.faces ?? 6;
  const hdStr = `${hdNum}d${hdFaces}`;
  const hdMax = hdNum * hdFaces;
  const hdAvg = Math.ceil((hdFaces + 1) / 2);
  const baseFM = buildFM2(cls, CLASS_META_DEFS2);
  const fm = { ...baseFM, hd: hdStr };
  const yaml = serializeFrontmatter2(fm, CLASS_META_DEFS2);
  const lines = [];
  lines.push(`# ${className}`);
  if (cls.source) lines.push(`**Source:** ${cls.source}`);
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Hit Points`);
  lines.push(`**Hit Dice:** ${hdStr} per ${className} level`);
  lines.push(`**Hit Points at 1st Level:** ${hdMax} + your Constitution modifier`);
  lines.push(
    `**Hit Points at Higher Levels:** ${hdStr} (or ${hdAvg}) + your Constitution modifier per level after 1st`
  );
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Proficiencies`);
  const sp = cls.startingProficiencies ?? {};
  if (Array.isArray(sp.armor) && sp.armor.length) {
    lines.push(`- **Armor:** ${sp.armor.join(", ")}`);
  }
  const weaponList = unifiedWeaponProfs2(sp);
  if (weaponList.length) {
    lines.push(`- **Weapons:** ${weaponList.join(", ")}`);
  }
  const toolList = unifiedToolProfs2(sp);
  if (toolList.length) {
    lines.push(`- **Tools:** ${toolList.join(", ")}`);
  }
  const saves = Array.isArray(cls.proficiency) ? cls.proficiency.map(
    (k) => ({
      str: "Strength",
      dex: "Dexterity",
      con: "Constitution",
      int: "Intelligence",
      wis: "Wisdom",
      cha: "Charisma"
    })[k] || k.toUpperCase()
  ) : [];
  if (saves.length) {
    lines.push(`- **Saving Throws:** ${saves.join(", ")}`);
  }
  {
    const rawSkills = Array.isArray(sp.skillProficiencies) ? sp.skillProficiencies : Array.isArray(sp.skills) ? sp.skills : Array.isArray(sp.skillProf) ? sp.skillProf : [];
    const choiceEntry = rawSkills.find(
      (e) => e && (typeof e.choose === "object" || typeof e.any === "number")
    );
    if (choiceEntry) {
      const count = choiceEntry.choose?.count ?? choiceEntry.any ?? 1;
      const options = Array.isArray(choiceEntry.choose?.from) ? choiceEntry.choose.from.map(
        (s) => (
          // title-case each word (or just use s)
          s.split(" ").map((w) => w[0].toUpperCase() + w.slice(1)).join(" ")
        )
      ) : SKILL_OPTIONS2;
      lines.push(`- **Skills (Choose ${count}):** ${options.join(", ")}`);
    } else {
      const flat = unifiedSkills4(sp);
      if (flat.length) {
        lines.push(`- **Skills:** ${flat.join(", ")}`);
      }
    }
  }
  if (Array.isArray(cls.startingEquipment)) {
    lines.push(`
### Equipment`);
    cls.startingEquipment.filter((e) => typeof e === "string").forEach((item) => lines.push(`- ${item}`));
  }
  const progGroups = cls.classTableGroups ?? [];
  const maxLevel = 20;
  if (!progGroups.length) {
    lines.push(`*(No class table provided for this class.)*`);
  } else {
    const featuresByLevel2 = {};
    for (const feat of cls.classFeatures ?? []) {
      const raw = typeof feat === "object" && feat.classFeature ? feat.classFeature : String(feat);
      const [name, , , lvlStr] = raw.split("|");
      const lvl = Number(lvlStr ?? 0);
      if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
      featuresByLevel2[lvl].push(name);
    }
    const allLabelsSet = /* @__PURE__ */ new Set();
    const rowMaps = {};
    for (const group of progGroups) {
      const labels = Array.isArray(group.colLabels) ? group.colLabels.map((l) => replace5eTags2(l)) : [];
      const rows = Array.isArray(group.rows) ? group.rows : Array.isArray(group.rowsSpellProgression) ? group.rowsSpellProgression : [];
      if (!labels.length || !rows.length) continue;
      for (let lvl = 0; lvl < rows.length; lvl++) {
        const levelNum = lvl + 1;
        if (!rowMaps[levelNum]) rowMaps[levelNum] = {};
        const rowMap = rowMaps[levelNum];
        const cells = rows[lvl];
        for (let i = 0; i < labels.length; i++) {
          const label = labels[i];
          let val = "";
          const cell = cells[i];
          if (Array.isArray(cell)) {
            val = cell.join(", ");
          } else if (cell && typeof cell === "object" && "value" in cell) {
            val = String(cell.value);
          } else {
            val = String(cell ?? "");
          }
          allLabelsSet.add(label);
          rowMap[label] = val;
        }
      }
    }
    const allLabels = Array.from(allLabelsSet).filter(
      (lbl) => !/Cantrips Known|Spells Known|\d+(st|nd|rd|th)/.test(lbl)
    );
    const mergedLabels = ["Level", "Proficiency Bonus", "Class Features", ...allLabels];
    const mergedRows = [];
    for (let lvl = 1; lvl <= maxLevel; lvl++) {
      const featureList = (featuresByLevel2[lvl] ?? []).map(formatFeatureLink2);
      const rowMap = rowMaps[lvl] ?? {};
      mergedRows.push([
        lvl.toString(),
        PROF_BONUS_BY_LEVEL[lvl - 1] || "",
        featureList.join(", ").replace(/\|/g, "&#124;"),
        ...allLabels.map((label) => rowMap[label] ?? "")
      ]);
    }
    lines.push(`
> [!example]- Class Progression Table`);
    lines.push(
      renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels: mergedLabels,
        rows: mergedRows
      })
    );
  }
  const csGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.colLabels.some((lbl) => /Cantrips Known|Spells Known/.test(String(lbl)))
  );
  const slotGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.title === "Spell Slots per Spell Level"
  );
  if (csGroup && slotGroup) {
    const csLabels = csGroup.colLabels.map((l) => replace5eTags2(l));
    const slotLabels = slotGroup.colLabels.map((l) => replace5eTags2(l));
    const csRows = csGroup.rows || [];
    const slotRows = slotGroup.rowsSpellProgression || [];
    const colLabels = ["Level", ...csLabels, ...slotLabels];
    const spellRows = [];
    for (let i = 0; i < Math.max(csRows.length, slotRows.length); i++) {
      const lvl = String(i + 1);
      const csCells = csRows[i] ? csRows[i].map(String) : csLabels.map((_) => "");
      const slotCells = slotRows[i] ? slotRows[i].map(String) : slotLabels.map((_) => "");
      spellRows.push([lvl, ...csCells, ...slotCells]);
    }
    lines.push(`
> [!tip]- Spell Progression Table`);
    lines.push(
      renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels,
        rows: spellRows
      })
    );
  }
  const subs = Array.isArray(json.subclass) ? json.subclass : [];
  const subclassFeatures = Array.isArray(json.subclassFeature) ? json.subclassFeature : json.lookup?.subclassFeature ?? [];
  for (const sc of subs) {
    const subclassName = sc.name;
    const subLines = [];
    subLines.push(`# ${subclassName}`);
    subLines.push(`**Parent Class:** [[${className}]]`);
    if (sc.source) subLines.push(`**Source:** ${sc.source}`);
    subLines.push(``);
    const intro = subclassFeatures.find(
      (f) => f.name === sc.name && f.level === 3 && f.subclassShortName === sc.shortName && f.subclassSource === sc.source
    );
    if (intro?.entries?.length) {
      const introText = Array.isArray(intro.entries) ? intro.entries.map(
        (e) => typeof e === "string" ? replace5eTags2(e) : formatEntry2(e)
      ).join("\n\n") : formatEntry2(intro.entries);
      subLines.push(introText, ``);
    }
    const code = Object.entries(OPT_FEATURE_TYPE_TO_FULL2).find(
      ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
    )?.[0];
    if (code) {
      const matches = optionalFeatures.filter(
        (of) => Array.isArray(of.featureType) && of.featureType.includes(code)
      );
      if (matches.length) {
        subLines.push(`## ${subclassName} Optional Features`);
        for (const feat of matches) {
          for (const entry of feat.entries) {
            const txt = typeof entry === "string" ? replace5eTags2(entry) : formatEntry2(entry);
            subLines.push(`**${feat.name}:** ${txt}`);
          }
          subLines.push(``);
        }
      }
    }
    const prog = sc.subclassTableGroups ?? [];
    if (prog.length) {
      const labels = /* @__PURE__ */ new Set();
      const rowsMap = {};
      for (const g of prog) {
        const cols = (g.colLabels ?? []).map(replace5eTags2);
        const rows = Array.isArray(g.rows) ? g.rows : Array.isArray(g.rowsSpellProgression) ? g.rowsSpellProgression : [];
        rows.forEach((r, i) => {
          const lvl = i + 1;
          rowsMap[lvl] ?? (rowsMap[lvl] = {});
          r.forEach((c, j) => {
            const lab = cols[j];
            if (!lab) return;
            labels.add(lab);
            rowsMap[lvl][lab] = typeof c === "object" && c !== null && "value" in c ? String(c.value) : String(c ?? "");
          });
        });
      }
      const hdrs = Array.from(labels);
      subLines.push(`## Subclass Progression`);
      subLines.push(renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels: ["Level", ...hdrs],
        rows: Array.from({ length: 20 }, (_, i) => {
          const lvl = i + 1;
          return [String(lvl), ...hdrs.map((h) => rowsMap[lvl]?.[h] ?? "")];
        })
      }));
    }
    const featsByLvl = {};
    for (const f of subclassFeatures) {
      if (f.subclassShortName === sc.shortName && f.subclassSource === sc.source && f.className === className) {
        const lvl = f.level ?? 0;
        ;
        (featsByLvl[lvl] ?? (featsByLvl[lvl] = [])).push(f);
      }
    }
    for (const lvl of Object.keys(featsByLvl).map(Number).sort((a, b) => a - b)) {
      subLines.push(`---`, `## Level ${lvl}`);
      for (const f of featsByLvl[lvl]) {
        subLines.push(`### ${f.name}`);
        for (const ent of Array.isArray(f.entries) ? f.entries : [f.entries]) {
          if (typeof ent === "string") {
            subLines.push(replace5eTags2(ent));
            continue;
          }
          if (isTypedEntry(ent) && ent.type === "entries" && /^Maneuvers$/i.test(ent.name)) {
            subLines.push(`##### ${ent.name}`);
            for (const txt of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(typeof txt === "string" ? replace5eTags2(txt) : formatEntry2(txt));
            }
            const code2 = Object.entries(OPT_FEATURE_TYPE_TO_FULL2).find(
              ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
            )?.[0];
            if (code2) {
              const matches = optionalFeatures.filter(
                (of) => Array.isArray(of.featureType) && of.featureType.includes(code2)
              );
              for (const featDef of matches) {
                for (const sub of featDef.entries) {
                  const line = typeof sub === "string" ? replace5eTags2(sub) : formatEntry2(sub);
                  subLines.push(`**${featDef.name}:** ${line}`);
                }
                subLines.push("");
              }
            }
            continue;
          }
          if (isTypedEntry(ent) && ent.type === "entries" && ent.name) {
            subLines.push(`##### ${ent.name}`);
            for (const e2 of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(formatEntry2(e2));
            }
            continue;
          }
          if (isTypedEntry(ent) && ent.type === "inset" && ent.name) {
            const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
            subLines.push(`> **${ent.name}**`);
            inner.forEach((e2) => subLines.push(`> ${formatEntry2(e2)}`));
            continue;
          }
          const fb = formatEntry2(ent);
          if (fb) subLines.push(fb);
        }
      }
    }
    const subclassContent = subLines.join("\n\n").replace(/\n{3,}/g, "\n\n");
    subclassFiles.push({
      path: `Classes/${className}/Subclasses/${subclassName}.md`,
      content: subclassContent
    });
  }
  if (subs.length) {
    const links = subs.map(
      (sc) => `[[Subclasses/${sc.name.replace(/[\\/]/g, "-")}|${sc.name}]]`
    );
    lines.push(`
**Subclasses:** ${links.join(", ")}`);
  }
  const allFeatures = Array.isArray(json.classFeature) ? json.classFeature : json.lookup?.classFeature ?? [];
  const featuresByLevel = {};
  for (const entry of allFeatures) {
    if (entry.className !== className) continue;
    const lvl = entry.level ?? 0;
    if (!featuresByLevel[lvl]) featuresByLevel[lvl] = [];
    featuresByLevel[lvl].push(entry);
  }
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Level Features`);
  const levels = Object.keys(featuresByLevel).map((n) => +n).sort((a, b) => a - b);
  for (const lvl of levels) {
    lines.push(`### Level ${lvl}`);
    for (const feat of featuresByLevel[lvl]) {
      lines.push(`#### ${feat.name}`);
      const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
      for (const ent of entries) {
        if (typeof ent === "string") {
          const txt = formatEntry2(ent).trim();
          if (txt === "{" || txt === "}") continue;
          lines.push(txt);
          continue;
        }
        if (isTypedEntry(ent) && ent.type === "list" && Array.isArray(ent.items)) {
          for (const item of ent.items) {
            lines.push(`- ${replace5eTags2(item)}`);
          }
          continue;
        }
        if (isTypedEntry(ent) && ent.type === "options") {
          if (ent.count) {
            lines.push("");
            lines.push(`**Choose ${ent.count} of the following options:**`);
            lines.push("");
          }
          for (const optRef of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
            if (optRef.type === "refOptionalfeature") {
              const [optName, optSrc] = optRef.optionalfeature.split("|");
              const featDef = optionalFeatures.find(
                (f) => f.name === optName && (!optSrc || f.source === optSrc)
              );
              if (featDef) {
                featDef.entries.forEach((subEntry, idx) => {
                  const text = typeof subEntry === "string" ? replace5eTags2(subEntry) : formatEntry2(subEntry);
                  if (idx === 0) {
                    lines.push(`- **${featDef.name}:** ${text}`);
                  } else {
                    lines.push(`  - ${text}`);
                  }
                });
                lines.push("");
              } else {
                lines.push(`**${optName}:**`);
              }
            } else {
              const txt = formatEntry2(optRef);
              if (txt) lines.push(`- ${txt}`);
            }
          }
          continue;
        }
        if (isTypedEntry(ent) && ent.type === "refOptionalfeature") {
          const [name] = ent.optionalfeature.split("|");
          lines.push(`- [[${name}|${name}]]`);
          continue;
        }
        if (isTypedEntry(ent) && ent.type === "entries" && ent.name) {
          lines.push(`##### ${ent.name}`);
          const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
          for (const e2 of inner) {
            lines.push(formatEntry2(e2));
          }
          continue;
        }
        const fallback = formatEntry2(ent);
        if (fallback) lines.push(fallback);
      }
      lines.push(``);
    }
    lines.push(`---`);
  }
  let content = `---
${yaml}
---

${lines.join("\n")}`;
  content = replace5eTags2(content);
  content = content.replace(/\n{3,}/g, "\n\n").replace(/\n +\n/g, "\n\n");
  return [
    {
      path: `Classes/${className}/${className}.md`,
      content
    },
    ...subclassFiles
  ];
}

// src/parsers/5e-2025/rules.ts
function parseActionsFile2(json, editionId) {
  if (!Array.isArray(json.action)) return [];
  const lines = [];
  function emitBlock(block) {
    if (!block) return;
    if (typeof block === "string") {
      for (const para of block.split(/\n{2,}/)) {
        const t = para.trim();
        if (t) {
          lines.push(replace5eTags2(t));
          lines.push("");
        }
      }
      return;
    }
    if (block.type === "list" && Array.isArray(block.items)) {
      for (const item of block.items) {
        lines.push(`- ${replace5eTags2(item)}`);
      }
      lines.push("");
      return;
    }
    if (block.type === "table" && Array.isArray(block.rows)) {
      const headers = block.colLabels || [];
      lines.push(`| ${headers.join(" | ")} |`);
      lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
      for (const row of block.rows) {
        lines.push(`| ${row.join(" | ")} |`);
      }
      lines.push("");
      return;
    }
    if ((block.type === "entries" || block.type === "inset") && Array.isArray(block.entries)) {
      if (block.name) {
        if (lines[lines.length - 1] === "") lines.pop();
        lines.push(`### ${block.name}`);
      }
      for (const child of block.entries) {
        emitBlock(child);
      }
      return;
    }
    const txt = Array.isArray(block) ? block.join(" ") : typeof block === "object" ? JSON.stringify(block) : String(block);
    lines.push(replace5eTags2(txt));
    lines.push("");
  }
  for (const action of json.action) {
    lines.push(`## ${action.name}`);
    for (const entry of Array.isArray(action.entries) ? action.entries : [action.entries]) {
      emitBlock(entry);
    }
    if (Array.isArray(action.seeAlsoAction)) {
      lines.push("**See Also:**");
      lines.push("");
      for (const ref of action.seeAlsoAction) {
        const [name] = String(ref).split("|");
        lines.push(`- [[${name}]]`);
      }
      lines.push("");
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Actions.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseConditionsDiseasesFile2(json, editionId) {
  const outputs = [];
  const processItems = (items, outPath) => {
    const lines = [];
    for (const item of items) {
      lines.push(`## ${item.name}`);
      const entries = Array.isArray(item.entries) ? item.entries : [item.entries];
      for (const entry of entries) {
        if (!entry) continue;
        if (typeof entry === "string") {
          for (const para of entry.split(/\n{2,}/)) {
            const t = para.trim();
            if (t) {
              lines.push(replace5eTags2(t));
              lines.push("");
            }
          }
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          for (const txt of entry.items) {
            lines.push(`- ${replace5eTags2(txt)}`);
          }
          lines.push("");
        } else if (entry.type === "table" && Array.isArray(entry.rows)) {
          const headers = entry.colLabels || [];
          lines.push(`| ${headers.join(" | ")} |`);
          lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
          for (const row of entry.rows) {
            lines.push(`| ${row.join(" | ")} |`);
          }
          lines.push("");
        } else if (entry.type === "entries" && Array.isArray(entry.entries)) {
          if (entry.name) {
            lines.push(`### ${entry.name}`);
            for (const sub of entry.entries) {
              if (sub.type === "entries" && sub.name && Array.isArray(sub.entries)) {
                if (lines[lines.length - 1] === "") lines.pop();
                lines.push(`#### ${sub.name}`);
                for (const txtEntry of sub.entries) {
                  const text = typeof txtEntry === "string" ? replace5eTags2(txtEntry) : replace5eTags2(String(txtEntry));
                  lines.push(text);
                  lines.push("");
                }
              } else if (typeof sub === "string") {
                lines.push(replace5eTags2(sub));
                lines.push("");
              }
            }
          } else {
            for (const sub of entry.entries) {
              if (sub.type === "entries" && sub.name && Array.isArray(sub.entries)) {
                if (lines[lines.length - 1] === "") lines.pop();
                lines.push(`### ${sub.name}`);
                for (const txtEntry of sub.entries) {
                  const text = typeof txtEntry === "string" ? replace5eTags2(txtEntry) : replace5eTags2(String(txtEntry));
                  lines.push(text);
                  lines.push("");
                }
              } else if (typeof sub === "string") {
                lines.push(replace5eTags2(sub));
                lines.push("");
              }
            }
          }
        } else {
          const txt = Array.isArray(entry) ? entry.join(" ") : typeof entry === "object" ? JSON.stringify(entry) : String(entry);
          lines.push(replace5eTags2(txt));
          lines.push("");
        }
      }
      lines.push("---");
    }
    const cleaned = lines.reduce((acc, curr) => {
      if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
      return acc.concat(curr);
    }, []);
    outputs.push({
      path: outPath,
      content: cleaned.join("\n").trim() + "\n"
    });
  };
  processItems(json.condition || [], "Rules and Reference/Conditions.md");
  processItems(json.disease || [], "Rules and Reference/Diseases.md");
  return outputs;
}
function parseSensesFile2(json, editionId) {
  const items = Array.isArray(json.sense) ? json.sense : Array.isArray(json.senses) ? json.senses : [];
  if (!items.length) return [];
  const lines = [];
  function emitBlock(block) {
    if (!block) return;
    if (typeof block === "string") {
      for (const para of block.split(/\n{2,}/)) {
        const t = para.trim();
        if (t) {
          lines.push(replace5eTags2(t));
          lines.push("");
        }
      }
      return;
    }
    if (block.type === "list" && Array.isArray(block.items)) {
      for (const item of block.items) {
        if (typeof item === "string") {
          lines.push(`- ${replace5eTags2(item)}`);
          lines.push("");
        } else if (item && typeof item === "object") {
          if (item.name && Array.isArray(item.entries)) {
            lines.push(`- **${item.name}**`);
            for (const ent of item.entries) {
              lines.push(`  - ${replace5eTags2(ent)}`);
            }
            lines.push("");
          } else {
            lines.push(`- ${replace5eTags2(JSON.stringify(item))}`);
            lines.push("");
          }
        }
      }
      return;
    }
    if (block.type === "table" && Array.isArray(block.rows)) {
      const headers = block.colLabels || [];
      lines.push(`| ${headers.join(" | ")} |`);
      lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
      for (const row of block.rows) {
        lines.push(`| ${row.join(" | ")} |`);
      }
      lines.push("");
      return;
    }
    if ((block.type === "entries" || block.type === "inset") && Array.isArray(block.entries)) {
      if (block.name) {
        if (lines[lines.length - 1] === "") lines.pop();
        lines.push(`### ${block.name}`);
      }
      for (const child of block.entries) {
        emitBlock(child);
      }
      return;
    }
    const txt = Array.isArray(block) ? block.join(" ") : typeof block === "object" ? JSON.stringify(block) : String(block);
    lines.push(replace5eTags2(txt));
    lines.push("");
  }
  for (const sense of items) {
    lines.push(`## ${sense.name}`);
    for (const entry of Array.isArray(sense.entries) ? sense.entries : [sense.entries]) {
      emitBlock(entry);
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Senses.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseSkillsFile2(json, editionId) {
  const items = Array.isArray(json.skill) ? json.skill : Array.isArray(json.skills) ? json.skills : [];
  if (!items.length) return [];
  const lines = [];
  for (const skill of items) {
    lines.push(`## ${skill.name}`);
    if (skill.ability) {
      lines.push(`*Ability: ${skill.ability}*`);
      lines.push("");
    }
    const entries = Array.isArray(skill.entries) ? skill.entries : [skill.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags2(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags2(item)}`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags2(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Skills.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}

// src/parsers/5e-2025/feats.ts
function parseFeatsFile2(json, editionId) {
  const feats = Array.isArray(json.feat) ? json.feat : Array.isArray(json.feats) ? json.feats : [];
  return feats.map((feat) => {
    const lines = [];
    const fm = buildFM2({ ...feat, _editionId: editionId }, FEATS_META_DEFS2);
    lines.push("---");
    lines.push(serializeFrontmatter2(fm, FEATS_META_DEFS2));
    lines.push("---", "");
    lines.push(`# ${feat.name}`, "");
    const prereqs = [];
    if (Array.isArray(feat.prerequisite)) {
      feat.prerequisite.forEach((pr) => {
        if (pr.level) prereqs.push(`Level ${pr.level}`);
        if (Array.isArray(pr.feat)) {
          pr.feat.forEach((f) => {
            const name = f.split("|")[0].replace(/\b\w/g, (c) => c.toUpperCase());
            prereqs.push(`Prerequisite: [[${name}]]`);
          });
        }
      });
    }
    if (feat.spellcastingPrepared) prereqs.push(`Prerequisite: Spellcaster`);
    if (Array.isArray(feat.toolProficiencies)) {
      feat.toolProficiencies.forEach((tp) => {
        Object.entries(tp).forEach(([key]) => {
          if (key === "anyArtisansTool") {
            prereqs.push(`Prerequisite: Proficient with an artisan's tool`);
          } else {
            prereqs.push(`Prerequisite: Proficient with ${key.replace(/([A-Z])/g, " $1").trim()}`);
          }
        });
      });
    }
    if (Array.isArray(feat.armorProficiencies)) {
      feat.armorProficiencies.forEach((arm) => {
        const armStr = typeof arm === "string" ? arm : JSON.stringify(arm);
        prereqs.push(`Prerequisite: Proficient with ${armStr.replace(/([A-Z])/g, " $1").trim()}`);
      });
    }
    if (feat.race) prereqs.push(`Prerequisite: ${feat.race}`);
    if (prereqs.length) {
      lines.push("**Prerequisites**");
      prereqs.forEach((p) => lines.push(`- ${p}`));
      lines.push("");
    }
    const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
    entries.forEach((entry) => {
      if (!entry) return;
      if (typeof entry === "string") {
        entry.split(/\n{2,}/).forEach((p) => {
          const t = p.trim();
          if (t) {
            lines.push(replace5eTags2(t));
            lines.push("");
          }
        });
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        entry.items.forEach((it) => {
          if (typeof it === "string") {
            lines.push(`- ${replace5eTags2(it)}`);
          } else if (it.type === "item" && it.name) {
            lines.push(`- **${it.name}**`);
            const subs = Array.isArray(it.entries) ? it.entries : [it.entries];
            subs.forEach(
              (s) => lines.push(`  - ${replace5eTags2(typeof s === "string" ? s : JSON.stringify(s))}`)
            );
          }
        });
        lines.push("");
      } else if (entry.type === "inset") {
        lines.push(`- *${entry.name}*`);
        const subs = Array.isArray(entry.entries) ? entry.entries : [entry.entries];
        subs.forEach((s) => lines.push(`  - ${replace5eTags2(s)}`));
        lines.push("");
      } else if ((entry.type === "section" || entry.type === "entries") && Array.isArray(entry.entries)) {
        if (entry.name) {
          lines.push(`## ${entry.name}`);
          lines.push("");
        }
        entry.entries.forEach((s) => {
          lines.push(replace5eTags2(typeof s === "string" ? s : JSON.stringify(s)));
          lines.push("");
        });
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const hdr = entry.colLabels || [];
        lines.push(`| ${hdr.join(" | ")} |`);
        lines.push(`| ${hdr.map(() => "---").join(" | ")} |`);
        entry.rows.forEach(
          (row) => lines.push(`| ${row.join(" | ")} |`)
        );
        lines.push("");
      }
    });
    return {
      path: `Player Build/Feats/${feat.name}.md`,
      content: lines.join("\n").trim() + "\n"
    };
  });
}

// src/parsers/5e-2025/backgrounds.ts
function parseBackgroundsFile2(json, editionId) {
  const raw = Array.isArray(json.background) ? json.background : Array.isArray(json.backgrounds) ? json.backgrounds : [];
  const backgrounds = raw.filter((bg) => {
    const nm = bg.name || "";
    return !nm.startsWith("Variant") && !nm.includes("Baldur's Gate");
  });
  const outputs = [];
  backgrounds.forEach((bg) => {
    const lines = [];
    const fm = buildFM2(bg, BACKGROUND_META_DEFS2);
    const extraTraits = Array.isArray(bg.entries) ? bg.entries.filter((e) => e.data?.isFeature && typeof e.name === "string").map((e) => {
      const name = e.name.replace(/^Feature:\s*/, "");
      return `[[${bg.name}#${name}]]`;
    }) : [];
    const yaml = serializeFrontmatter2(fm, BACKGROUND_META_DEFS2);
    lines.push("---", yaml, "---", "");
    lines.push(`# ${bg.name}`, "");
    if (Array.isArray(bg.skillProficiencies) && bg.skillProficiencies.length) {
      const skills = [];
      bg.skillProficiencies.forEach((ent) => {
        if (typeof ent === "string") {
          skills.push(cap4(ent));
        } else if (ent.choose && Array.isArray(ent.choose.from)) {
          skills.push(`Choose ${ent.choose.amount} from ${ent.choose.from.join(", ")}`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => skills.push(cap4(k)));
        }
      });
      lines.push(`**Skill Proficiencies:** ${skills.join(", ")}`, "");
    }
    if (Array.isArray(bg.languageProficiencies) && bg.languageProficiencies.length) {
      const langs = [];
      bg.languageProficiencies.forEach((ent) => {
        if (ent.anyStandard) {
          langs.push(`${ent.anyStandard} of your choice`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => langs.push(cap4(k)));
        }
      });
      lines.push(`**Languages:** ${langs.join(", ")}`, "");
    }
    if (Array.isArray(bg.toolProficiencies) && bg.toolProficiencies.length) {
      const tools = [];
      bg.toolProficiencies.forEach((ent) => {
        if (ent.choose && Array.isArray(ent.choose.from)) {
          const list = ent.choose.from.map(humanize2).join(", ");
          tools.push(`Choose ${ent.choose.count} from ${list}`);
          return;
        }
        if (typeof ent === "string") {
          tools.push(humanize2(ent));
          return;
        }
        Object.entries(ent).filter(([_, v]) => v === true).forEach(([k]) => tools.push(humanize2(k)));
      });
      lines.push(`**Tool Proficiencies:** ${tools.join(", ")}`, "");
    }
    if (Array.isArray(bg.startingEquipment) && bg.startingEquipment.length) {
      lines.push(`**Equipment:**`);
      bg.startingEquipment.forEach((grp) => {
        if (Array.isArray(grp._)) {
          grp._.forEach((it) => lines.push(`- ${fmtItem2(it)}`));
        }
        ["a", "b"].forEach((key) => {
          if (Array.isArray(grp[key])) {
            grp[key].forEach((it) => lines.push(`- ${fmtItem2(it)}`));
          }
        });
      });
      lines.push("");
    }
    if (Array.isArray(bg.entries)) {
      bg.entries.forEach((entry) => {
        if (entry.type === "list" && entry.style === "list-hang-notitle") {
          return;
        }
        if (entry.name) {
          const header = entry.data?.isFeature ? entry.name.replace(/^Feature:\s*/, "") : entry.name;
          lines.push(`## ${header}`, "");
        }
        if (Array.isArray(entry.entries)) {
          entry.entries.forEach((e) => {
            if (typeof e === "string") {
              lines.push(replace5eTags2(e), "");
            } else if (e.type === "list" && Array.isArray(e.items)) {
              e.items.forEach(
                (it) => lines.push(`- ${replace5eTags2(it.entry ?? it)}`)
              );
              lines.push("");
            } else if (e.type === "table") {
              const tbl = renderMarkdownTable2(e);
              if (tbl) lines.push(tbl, "");
            }
          });
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          entry.items.forEach(
            (it) => lines.push(`- ${replace5eTags2(it.entry ?? it)}`)
          );
          lines.push("");
        }
      });
    }
    outputs.push({
      path: `Player Build/Backgrounds/${bg.name}.md`,
      content: lines.join("\n").trimEnd() + "\n"
    });
  });
  return outputs;
}
function cap4(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function fmtItem2(item) {
  if (typeof item === "string") {
    if (item.includes("|")) {
      return replace5eTags2(`{@item ${item}}`);
    }
    return replace5eTags2(item);
  }
  const priceRaw = item.containsValue ?? item.value;
  if (typeof priceRaw === "number" && // make sure it’s not also an “item” or “equipmentType”
  !item.item && !item.equipmentType && !item.special) {
    const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
    return `${gp} gp`;
  }
  if (item.item) {
    const link = replace5eTags2(`{@item ${item.item}}`);
    if (typeof priceRaw === "number") {
      const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
      return `${link} (${gp} gp)`;
    }
    return link;
  }
  if (typeof item.special === "string") {
    return item.special;
  }
  if (item.equipmentType) {
    switch (item.equipmentType) {
      case "toolArtisan":
        return "One type of artisan\u2019s tools (of your choice)";
      case "instrumentMusical":
        return "One type of musical instrument (of your choice)";
      case "setGaming":
        return "One set of gaming dice (of your choice)";
      default:
        return humanize2(item.equipmentType);
    }
  }
  return replace5eTags2(JSON.stringify(item));
}
function humanize2(str) {
  const spaced = str.replace(/([a-z])([A-Z])/g, "$1 $2");
  return spaced.charAt(0).toUpperCase() + spaced.slice(1);
}

// src/parsers/5e-2025/installer.ts
var import_obsidian4 = require("obsidian");
async function listSpellFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/spells`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && item.name.startsWith("spells-") && item.name.endsWith(".json")).map((item) => item.name);
}
async function listBestiaryFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/bestiary`;
  const res = await fetch(url);
  const list = await res.json();
  const CORE_SOURCES = [
    "bestiary-phb.json",
    "bestiary-mm.json",
    "bestiary-dmg.json",
    "bestiary-xge.json",
    "bestiary-vgm.json",
    "bestiary-tce.json",
    "bestiary-egw.json",
    "bestiary-erlw.json",
    "bestiary-mtf.json",
    "bestiary-vrgr.json",
    "bestiary-cos.json",
    "bestiary-oota.json",
    "bestiary-pota.json",
    "bestiary-hotdq.json",
    "bestiary-rot.json",
    "bestiary-skt.json",
    "bestiary-tftyp.json",
    "bestiary-toa.json"
  ];
  return list.filter((item) => item.type === "file" && CORE_SOURCES.includes(item.name)).map((item) => item.name);
}
var ITEM_JSON_FILES2 = [
  "items-base.json",
  "items.json",
  "objects.json",
  "vehicles.json",
  "decks.json"
];
async function listItemFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && ITEM_JSON_FILES2.includes(item.name)).map((item) => item.name);
}
async function listClassFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/class`;
  const res = await fetch(url);
  const listing = await res.json();
  return listing.filter(
    (item) => item.type === "file" && item.name.startsWith("class-") && item.name.endsWith(".json")
  ).map((item) => item.name);
}
async function ensureFolder2(app, folderPath) {
  const parts = folderPath.split("/");
  let curr = "";
  for (const p of parts) {
    curr = curr ? `${curr}/${p}` : p;
    try {
      await app.vault.createFolder(curr);
    } catch {
    }
  }
}
async function importEditionData2(params) {
  const { app, edition, targetPath } = params;
  const repo = edition.repo ?? "";
  {
    const spellFiles = await listSpellFilesFromGitHub2(repo);
    for (const fileName of spellFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/spells/${fileName}`);
        const json = await res.json();
        const files = parseSpellsFile2(json, edition.id);
        for (const md of files) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Spells/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import spell ${fileName}:`, e);
      }
    }
  }
  {
    const bestiaryFiles = await listBestiaryFilesFromGitHub2(repo);
    for (const fileName of bestiaryFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/bestiary/${fileName}`);
        const json = await res.json();
        const parsed = parseBestiaryFile2(json, edition.id);
        for (const md of parsed) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Bestiary/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import bestiary ${fileName}:`, e);
      }
    }
  }
  {
    const itemFiles = await listItemFilesFromGitHub2(repo);
    for (const fn of itemFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/${fn}`);
        const json = await res.json();
        const mdFiles = parseItemsFile2(json, edition.id);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import items from ${fn}:`, e);
      }
    }
  }
  {
    const res = await fetch(`${edition.sourceUrl}/races.json`);
    const json = await res.json();
    const mdFiles = parseSpeciesFile2(json, edition.id);
    for (const md of mdFiles) {
      const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Player Build/${md.path}`);
      await ensureFolder2(app, fullPath.split("/").slice(0, -1).join("/"));
      await app.vault.adapter.write(fullPath, md.content);
    }
    let optionalFeatures = [];
    try {
      const url = `${edition.sourceUrl}/optionalfeatures.json`;
      const res2 = await fetch(url);
      const text = await res2.text();
      const start = text.indexOf("{");
      if (start === -1) throw new Error("No JSON object found");
      const cleanJson = text.slice(start);
      const raw = JSON.parse(cleanJson);
      optionalFeatures = Array.isArray(raw.optionalfeature) ? raw.optionalfeature : [];
    } catch (e) {
      console.warn("Failed to import optionalfeatures.json:", e);
    }
    {
      const classFiles = await listClassFilesFromGitHub2(repo);
      for (const fileName of classFiles) {
        try {
          const res2 = await fetch(`${edition.sourceUrl}/class/${fileName}`);
          const json2 = await res2.json();
          const mdFiles2 = parseClassFile2(
            json2,
            edition.id,
            fileName,
            optionalFeatures
          );
          for (const md of mdFiles2) {
            const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Player Build/${md.path}`);
            await ensureFolder2(app, fullPath.split("/").slice(0, -1).join("/"));
            const existing = app.vault.getAbstractFileByPath(fullPath);
            if (existing instanceof import_obsidian4.TFile) {
              await app.vault.modify(existing, md.content);
            } else {
              await app.vault.create(fullPath, md.content);
            }
          }
        } catch (e) {
          console.warn(`Failed to import class ${fileName}:`, e);
        }
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/actions.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseActionsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import actions.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/conditionsdiseases.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseConditionsDiseasesFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import conditionsdiseases.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/senses.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseSensesFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import senses.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/skills.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseSkillsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import skills.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/feats.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseFeatsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import feats.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/backgrounds.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseBackgroundsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import backgrounds.json:", e);
      }
    }
  }
}

// src/rulesetInstaller.ts
async function importRulesetData(params) {
  const { app, editionKey, targetPath } = params;
  const edition = AVAILABLE_EDITIONS.find((e) => e.id === editionKey);
  if (!edition) {
    console.warn("Edition not found for:", editionKey);
    return;
  }
  if (!edition.parser) {
    console.warn("No parser defined for:", editionKey);
    return;
  }
  let installerModule;
  switch (edition.parser) {
    case "5e-json":
      installerModule = installer_exports;
      break;
    case "5e-2025":
      installerModule = installer_exports2;
      break;
    // case "other-parser":
    //   installerModule = anotherInstaller;
    //   break;
    default:
      throw new Error(`Unknown parser: ${edition.parser}`);
  }
  await installerModule.importEditionData({ app, edition, targetPath });
}

// src/firstinstallconfirm.ts
var ConfirmFreshInstallModal = class extends import_obsidian5.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    this.contentEl.empty();
    this.titleEl.setText("\u26A0\uFE0F Warning: Fresh Vault Recommended");
    this.contentEl.createEl("div", {
      text: "The full VVunderlore install is intended for a fresh, empty Obsidian vault. If you install in a vault that already has files, any file whose path matches a VVunderlore Toolkit file will be overwritten.\n\nAlso things could just get messy.\n\nMake a perception check and proceed with caution!"
    }).style.cssText = `
        white-space: pre-wrap;
        margin-bottom: 1em;
        line-height: 1.4em;
      `;
    const buttonRow = this.contentEl.createEl("div");
    buttonRow.style.cssText = `
      display: flex;
      justify-content: flex-end;
      gap: 0.5em;
    `;
    new import_obsidian5.ButtonComponent(buttonRow).setButtonText("Oh god, cancel!").onClick(() => {
      this.close();
    });
    new import_obsidian5.ButtonComponent(buttonRow).setButtonText("Install!!").setCta().onClick(async () => {
      this.close();
      const opts = {
        compendium: this.plugin.settings.rulesetCompendium,
        references: [...this.plugin.settings.rulesetReference]
      };
      new import_obsidian5.Notice("\u23F3 Installing toolkit\u2026");
      const compendium = this.plugin.settings.rulesetCompendium;
      const references = [...this.plugin.settings.rulesetReference];
      try {
        await this.plugin.installFullToolkit({ compendium, references });
        if (compendium) {
          await importRulesetData({
            app: this.app,
            editionKey: compendium,
            targetPath: "Compendium"
          });
        }
      } catch (err) {
        console.error("\u274C installToolkit() failed:", err);
        new import_obsidian5.Notice("\u274C Toolkit installation failed. See console.");
      }
      this.plugin.settings.needsInstall = false;
      await this.plugin.saveSettings();
      this.plugin.settingsTab.display();
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/customInstallModal.ts
var import_obsidian6 = require("obsidian");
var InstallingModal = class extends import_obsidian6.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.contentEl.empty();
    this.contentEl.createDiv({ text: "Installing\u2026", cls: "mod-quiet" }).style.cssText = "font-style: italic; color: var(--text-muted); text-align: center; padding: 1em;";
  }
  onClose() {
    this.contentEl.empty();
  }
};
function showCustomInstallModal(app, plugin) {
  const fullPathToKey = {};
  for (const f of plugin.manifestCache.folders) {
    fullPathToKey[f.path] = f.key;
  }
  for (const f of plugin.manifestCache.files) {
    fullPathToKey[f.path] = f.key;
  }
  const root = { name: "", fullPath: "", isFolder: true, children: {} };
  function ensureFolderNode(segments) {
    let cursor = root;
    let builtSoFar = "";
    for (const seg of segments) {
      builtSoFar = builtSoFar ? `${builtSoFar}/${seg}` : seg;
      if (!cursor.children[seg]) {
        cursor.children[seg] = {
          name: seg,
          fullPath: builtSoFar,
          isFolder: true,
          children: {}
        };
      }
      cursor = cursor.children[seg];
    }
    return cursor;
  }
  for (const folderEntry of plugin.manifestCache.folders) {
    const segments = folderEntry.path.split("/");
    ensureFolderNode(segments);
  }
  for (const fileEntry of plugin.manifestCache.files) {
    const segments = fileEntry.path.split("/");
    const fileName = segments.pop();
    const parentNode = segments.length ? ensureFolderNode(segments) : root;
    parentNode.children[fileName] = {
      name: fileName,
      fullPath: fileEntry.path,
      isFolder: false,
      children: {}
    };
  }
  class CustomInstallModal extends import_obsidian6.Modal {
    constructor(app2) {
      super(app2);
      this.checkboxMap = {};
      // <div> that holds “dependency console”
      this.currentBatchLines = [];
    }
    onOpen() {
      this.contentEl.empty();
      this.titleEl.setText("Custom Install");
      const descriptionEl = this.contentEl.createDiv();
      descriptionEl.textContent = "All checked items will be installed. Dependencies will be managed automatically.";
      descriptionEl.style.cssText = `
        font-size: 0.9em;
        color: var(--text-muted);
        margin-top: 0.25em;
        margin-bottom: 0.75em;
      `;
      const optionsBox = this.contentEl.createDiv();
      Object.assign(optionsBox.style, {
        maxHeight: "480px",
        // Enough space for checkboxes + tree
        overflowY: "auto",
        // Everything inside optionsBox will scroll
        margin: "0.5em 0",
        border: "1px solid var(--divider-color)",
        borderRadius: "4px",
        padding: "0.5em"
      });
      const checkboxSection = optionsBox.createDiv();
      Object.assign(checkboxSection.style, {
        display: "flex",
        flexDirection: "column",
        gap: "0.5em",
        marginBottom: "0.75em"
      });
      const pluginRow = checkboxSection.createDiv();
      pluginRow.style.display = "flex";
      pluginRow.style.alignItems = "center";
      this.pluginCheckbox = pluginRow.createEl("input", { type: "checkbox" });
      this.pluginCheckbox.checked = true;
      this.pluginCheckbox.id = "vvunderlore-checkbox-plugins";
      this.pluginCheckbox.style.marginRight = "0.5em";
      pluginRow.createEl("label", {
        text: "Community Plugins",
        attr: { for: this.pluginCheckbox.id }
      });
      const demoRow = checkboxSection.createDiv();
      demoRow.style.display = "flex";
      demoRow.style.alignItems = "center";
      this.demoCheckbox = demoRow.createEl("input", { type: "checkbox" });
      this.demoCheckbox.checked = true;
      this.demoCheckbox.id = "vvunderlore-checkbox-demo";
      this.demoCheckbox.style.marginRight = "0.5em";
      demoRow.createEl("label", {
        text: "VVunderlore Demo Files",
        attr: { for: this.demoCheckbox.id }
      });
      const settingsRow = checkboxSection.createDiv();
      settingsRow.style.display = "flex";
      settingsRow.style.alignItems = "center";
      this.settingsCheckbox = settingsRow.createEl("input", { type: "checkbox" });
      this.settingsCheckbox.checked = true;
      this.settingsCheckbox.id = "vvunderlore-checkbox-settings";
      this.settingsCheckbox.style.marginRight = "0.5em";
      settingsRow.createEl("label", {
        text: "Vault Settings (apperance, hotkeys, graph setup, etc.)",
        attr: { for: this.settingsCheckbox.id }
      });
      const divider = optionsBox.createDiv();
      Object.assign(divider.style, {
        borderTop: "1px solid var(--divider-color)",
        margin: "0.5em 0"
      });
      const container = optionsBox.createDiv();
      Object.assign(container.style, {
        // We no longer give this inner div its own scrollbar.
        // Instead, container will expand inside optionsBox, and
        // optionsBox will scroll everything (checkboxes + tree) together.
        margin: "0",
        padding: "0",
        border: "none"
      });
      const INDENT_PX = 16;
      const lookupEntry = (fullPath) => {
        return plugin.manifestCache.folders.find((f) => f.path === fullPath) || plugin.manifestCache.files.find((f) => f.path === fullPath);
      };
      const renderTree = () => {
        container.empty();
        this.checkboxMap = {};
        this.currentBatchLines = [];
        const demoAllowed = this.demoCheckbox.checked;
        const renderNode = (node, parentEl, indent = 0) => {
          if (node.fullPath) {
            const entry = lookupEntry(node.fullPath);
            if (entry && entry.optional && !demoAllowed) {
              return;
            }
          }
          if (node.isFolder) {
            const details = parentEl.createEl("details");
            details.open = true;
            details.style.margin = "4px 0";
            const summary = details.createEl("summary");
            Object.assign(summary.style, {
              display: "flex",
              alignItems: "center",
              marginLeft: `${indent * INDENT_PX}px`,
              cursor: "pointer",
              padding: "2px 6px",
              borderRadius: "4px",
              userSelect: "none"
            });
            summary.addEventListener("mouseenter", () => {
              summary.style.backgroundColor = "var(--background-modifier-hover)";
            });
            summary.addEventListener("mouseleave", () => {
              summary.style.backgroundColor = "transparent";
            });
            const cb = summary.createEl("input", { type: "checkbox" });
            cb.style.marginRight = "0.5em";
            cb.checked = true;
            cb.style.cursor = "pointer";
            this.checkboxMap[node.fullPath] = cb;
            const iconEl = summary.createDiv({ cls: "suggestion-icon" });
            (0, import_obsidian6.setIcon)(iconEl, "folder");
            iconEl.style.marginRight = "0.3em";
            iconEl.style.transform = "scale(0.9)";
            iconEl.style.opacity = "0.75";
            const label = summary.createEl("span", { text: node.name });
            label.style.fontWeight = "600";
            label.style.fontSize = "0.95em";
            cb.onchange = () => {
              this.toggleDescendants(node, cb.checked);
              this.enforceDependencies(node.fullPath, cb.checked);
              this.fadeAllExceptCurrentBatch();
            };
            const childrenContainer = details.createDiv();
            childrenContainer.style.marginTop = "4px";
            for (const childName of Object.keys(node.children).sort()) {
              renderNode(node.children[childName], childrenContainer, indent + 1);
            }
          } else {
            const row = parentEl.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "center",
              marginLeft: `${indent * INDENT_PX}px`,
              padding: "2px 6px",
              borderRadius: "4px",
              marginTop: "2px",
              marginBottom: "2px",
              userSelect: "none"
            });
            row.addEventListener("mouseenter", () => {
              row.style.backgroundColor = "var(--background-modifier-hover)";
            });
            row.addEventListener("mouseleave", () => {
              row.style.backgroundColor = "transparent";
            });
            const cb = row.createEl("input", { type: "checkbox" });
            cb.style.marginRight = "0.5em";
            cb.checked = true;
            cb.style.cursor = "pointer";
            this.checkboxMap[node.fullPath] = cb;
            const iconEl = row.createDiv({ cls: "suggestion-icon" });
            (0, import_obsidian6.setIcon)(iconEl, "document");
            iconEl.style.marginRight = "0.3em";
            iconEl.style.transform = "scale(0.8)";
            iconEl.style.opacity = "0.5";
            const label = row.createEl("label", { text: node.name });
            label.style.fontSize = "0.9em";
            cb.onchange = () => {
              this.enforceDependencies(node.fullPath, cb.checked);
              this.fadeAllExceptCurrentBatch();
            };
          }
        };
        for (const topName of Object.keys(root.children).sort()) {
          renderNode(root.children[topName], container, 0);
        }
      };
      renderTree();
      this.consoleEl = this.contentEl.createDiv({ cls: "custom-console" });
      Object.assign(this.consoleEl.style, {
        height: "140px",
        margin: "0.5em 0",
        padding: "8px",
        backgroundColor: "var(--background-secondary)",
        border: "1px solid var(--divider-color)",
        borderRadius: "4px",
        fontFamily: "monospace",
        fontSize: "0.82em",
        lineHeight: "1.4em",
        color: "var(--text-normal)",
        overflowY: "auto",
        whiteSpace: "pre-wrap"
      });
      const placeholder = this.consoleEl.createDiv({
        text: "> Dependency errors and warnings will appear here\u2026"
      });
      Object.assign(placeholder.style, {
        opacity: "0.4",
        fontStyle: "italic",
        marginBottom: "4px"
      });
      this.pluginCheckbox.onchange = () => {
        const WARNING_CLASS = "vvunderlore-warning";
        if (!this.pluginCheckbox.checked) {
          if (this.consoleEl.children.length === 1 && this.consoleEl.children[0].textContent?.startsWith(
            "> Dependency console"
          )) {
            this.consoleEl.empty();
          }
          const warningLine = this.consoleEl.createDiv({
            text: "WARNING: The VVunderlore Toolkit will not function without all included plugins! You probably want to re-check that one."
          });
          warningLine.addClass(WARNING_CLASS);
          warningLine.style.color = "#FF0000";
          this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
        } else {
          const existingWarnings = this.consoleEl.querySelectorAll(`.${WARNING_CLASS}`);
          existingWarnings.forEach((el) => el.remove());
          if (this.consoleEl.children.length === 0) {
            const ph = this.consoleEl.createDiv({
              text: "> Dependency console output will appear here\u2026"
            });
            Object.assign(ph.style, {
              opacity: "0.4",
              fontStyle: "italic",
              marginBottom: "4px"
            });
          }
          this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
        }
      };
      this.demoCheckbox.onchange = () => {
        renderTree();
      };
      const buttonRow = this.contentEl.createDiv();
      Object.assign(buttonRow.style, {
        display: "flex",
        justifyContent: "space-between",
        // push left vs right
        alignItems: "center",
        paddingTop: "8px",
        borderTop: "1px solid var(--divider-color)",
        marginTop: "8px"
      });
      const resetBtn = buttonRow.createEl("button", { text: "Reset Selection" });
      resetBtn.style.cssText = `
        font-size: 0.9em;
        color: var(--text-normal);
      `;
      resetBtn.onclick = () => {
        const warnings = Array.from(
          this.consoleEl.querySelectorAll(".vvunderlore-warning")
        );
        this.consoleEl.empty();
        warnings.forEach((warningEl) => {
          this.consoleEl.appendChild(warningEl);
        });
        Object.values(this.checkboxMap).forEach((cb) => {
          cb.checked = true;
        });
      };
      const rightGroup = buttonRow.createDiv();
      Object.assign(rightGroup.style, {
        display: "flex",
        gap: "0.5em"
      });
      const installBtn = rightGroup.createEl("button", {
        text: "Install Selected",
        cls: "mod-cta"
      });
      installBtn.onclick = async () => {
        installBtn.setAttribute("disabled", "");
        this.close();
        const installing = new InstallingModal(app);
        installing.open();
        const toInstall = [];
        for (const [fp, checkbox] of Object.entries(this.checkboxMap)) {
          if (checkbox.checked) {
            const isFolder = plugin.manifestCache.folders.some((f) => f.path === fp);
            toInstall.push({ path: fp, isFolder });
          }
        }
        if (this.pluginCheckbox.checked) {
          try {
            const apiUrl = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/.obsidian/plugins?ref=main";
            const resp = await fetch(apiUrl);
            if (resp.ok) {
              const pluginFiles = await resp.json();
              for (const item of pluginFiles) {
                const localPath = `.obsidian/plugins/${item.name}`;
                const existsLocally = await this.app.vault.adapter.exists(localPath);
                if (!existsLocally) {
                  if (item.type === "dir") {
                    toInstall.push({ path: localPath, isFolder: true });
                  } else {
                    toInstall.push({ path: localPath, isFolder: false });
                  }
                }
              }
            }
          } catch (e) {
            console.error("Failed to enumerate .obsidian/plugins from GitHub:", e);
          }
          toInstall.push({ path: ".obsidian/community-plugins.json", isFolder: false });
        }
        if (this.settingsCheckbox.checked) {
          const vaultSettingsPaths = [
            ".obsidian/app.json",
            ".obsidian/appearance.json",
            ".obsidian/graph.json",
            ".obsidian/hotkeys.json"
          ];
          for (const vs of vaultSettingsPaths) {
            toInstall.push({ path: vs, isFolder: false });
          }
        }
        try {
          await plugin.performCustomInstall(toInstall);
        } catch (err) {
          console.error("\u274C performCustomInstall() threw:", err);
          new import_obsidian6.Notice("\u274C Custom install failed\u2014see console");
        } finally {
          installing.close();
        }
      };
      const cancelBtn = rightGroup.createEl("button", { text: "Cancel" });
      cancelBtn.onclick = () => this.close();
    }
    onClose() {
      this.contentEl.empty();
    }
    /** Recursively toggle descendants’ checked‐state without logging each one. */
    toggleDescendants(node, checked) {
      for (const child of Object.values(node.children)) {
        const cb = this.checkboxMap[child.fullPath];
        if (cb) cb.checked = checked;
        if (child.isFolder) {
          this.toggleDescendants(child, checked);
        }
      }
    }
    /**
     * Enforce dependency logic (auto‐check prerequisites, auto‐uncheck dependents).
     * Each time we flip a box “because of a dependency,” we log one line to the console.
     */
    enforceDependencies(changedPath, isChecked) {
      const changedKey = fullPathToKey[changedPath];
      if (!changedKey) return;
      const fullPathToDisplay = {};
      for (const f of plugin.manifestCache.folders) {
        fullPathToDisplay[f.path] = f.displayName ?? f.path.split("/").pop();
      }
      for (const f of plugin.manifestCache.files) {
        fullPathToDisplay[f.path] = f.displayName ?? f.path.split("/").pop();
      }
      const changedName = fullPathToDisplay[changedPath] ?? changedPath.split("/").pop();
      this.currentBatchLines = [];
      if (isChecked) {
        const stack = [changedKey];
        while (stack.length) {
          const cur = stack.pop();
          const deps = plugin.requiresGraph.get(cur) ?? [];
          for (const depKey of deps) {
            const depEntry = plugin.manifestCache.files.find((x) => x.key === depKey) || plugin.manifestCache.folders.find((x) => x.key === depKey);
            if (depEntry) {
              const depPath = depEntry.path;
              const cb = this.checkboxMap[depPath];
              if (cb && !cb.checked) {
                cb.checked = true;
                const depName = fullPathToDisplay[depPath] ?? depPath.split("/").pop();
                const lineEl = this.appendLogLine(
                  depPath,
                  `> ${depName} automatically checked (required by ${changedName})`
                );
                this.currentBatchLines.push(lineEl);
                stack.push(depKey);
              }
            }
          }
        }
      } else {
        const dependentsOf = (targetKey) => Array.from(plugin.requiresGraph.entries()).filter(([, deps]) => deps.includes(targetKey)).map(([k]) => k);
        const stack = [changedKey];
        while (stack.length) {
          const cur = stack.pop();
          for (const childKey of dependentsOf(cur)) {
            const childEntry = plugin.manifestCache.files.find((x) => x.key === childKey) || plugin.manifestCache.folders.find((x) => x.key === childKey);
            if (childEntry) {
              const childPath = childEntry.path;
              const cb = this.checkboxMap[childPath];
              if (cb && cb.checked) {
                cb.checked = false;
                const childName = fullPathToDisplay[childPath] ?? childPath.split("/").pop();
                const lineEl = this.appendLogLine(
                  childPath,
                  `> ${childName} automatically unchecked (depends on ${changedName})`
                );
                this.currentBatchLines.push(lineEl);
                stack.push(childKey);
              }
            }
          }
        }
      }
      this.fadeAllExceptCurrentBatch();
    }
    /**
     * Append one “mono” line plus a tiny undo button. Returns the new <div>.
     */
    appendLogLine(fullPath, text) {
      const line = this.consoleEl.createDiv();
      Object.assign(line.style, {
        display: "flex",
        justifyContent: "space-between",
        alignItems: "center",
        margin: "2px 0",
        opacity: "1.0",
        transition: "opacity 0.2s ease"
      });
      line.createSpan({ text });
      const undoBtn = line.createEl("button", { text: "undo", cls: "mod-small" });
      Object.assign(undoBtn.style, {
        marginLeft: "0.5em",
        fontSize: "0.75em",
        padding: "2px 4px",
        cursor: "pointer"
      });
      undoBtn.onclick = () => {
        const cb = this.checkboxMap[fullPath];
        if (cb) {
          cb.checked = !cb.checked;
          this.enforceDependencies(fullPath, cb.checked);
          this.fadeAllExceptCurrentBatch();
        }
      };
      this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
      return line;
    }
    /** Fade out every console line that is *not* part of currentBatchLines. */
    fadeAllExceptCurrentBatch() {
      const total = this.consoleEl.children.length;
      for (let i = 0; i < total; i++) {
        const child = this.consoleEl.children[i];
        if (this.currentBatchLines.includes(child)) {
          child.style.opacity = "1.0";
        } else {
          child.style.opacity = "0.6";
        }
      }
    }
  }
  new CustomInstallModal(app).open();
}

// src/settings.ts
var path = __toESM(require("path"));
var FilePathSuggester = class extends import_obsidian7.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.paths = [];
    this.currentSuggestions = [];
    this.renderedSuggestions = /* @__PURE__ */ new Map();
    this.inputEl = inputEl;
    const folders = Object.values(app.vault.getAllLoadedFiles()).filter((f) => f instanceof import_obsidian7.TFolder).map((f) => ({ path: f.path, isFolder: true }));
    const files = app.vault.getMarkdownFiles().map((f) => ({ path: f.path, isFolder: false }));
    this.paths = [...folders, ...files];
    this.inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        setTimeout(() => {
          const container = this.containerEl;
          if (!container) return;
          const selectedEl = container.querySelector(".suggestion-item.is-selected");
          if (selectedEl) {
            const selectedPath = this.renderedSuggestions.get(selectedEl);
            if (selectedPath) {
              this.selectSuggestion(selectedPath);
            }
          }
        }, 0);
      }
    });
  }
  getSuggestions(inputStr) {
    const query = inputStr.toLowerCase();
    this.currentSuggestions = this.paths.filter(({ path: path2 }) => path2.toLowerCase().includes(query)).map((p) => p.path);
    return this.currentSuggestions;
  }
  renderSuggestion(path2, el) {
    const isFolder = this.paths.find((p) => p.path === path2)?.isFolder;
    el.addClass("mod-complex");
    const iconEl = el.createDiv({ cls: "suggestion-icon" });
    (0, import_obsidian7.setIcon)(iconEl, isFolder ? "folder" : "document");
    const name = path2.split("/").pop();
    const displayName = isFolder ? name : name.replace(/\.md$/, "");
    el.createDiv({ text: displayName, cls: "suggestion-title" });
    const parentPath = path2.split("/").slice(0, -1).join("/");
    el.createDiv({ text: parentPath, cls: "search-suggest-info-text" });
    el.addEventListener("click", (e) => {
      e.stopPropagation();
      this.selectSuggestion(path2);
    });
    this.renderedSuggestions.set(el, path2);
  }
  selectSuggestion(path2) {
    this.inputEl.value = path2;
    this.inputEl.dispatchEvent(new Event("input"));
    this.close();
  }
};
var MarkdownPreviewModal = class extends import_obsidian7.Modal {
  constructor(app, content) {
    super(app);
    this.content = content;
  }
  onOpen() {
    this.contentEl.addEventListener("click", (e) => e.stopPropagation());
    this.contentEl.empty();
    this.contentEl.createEl("h2", { text: "Toolkit Changelog" });
    const md = this.contentEl.createDiv();
    const dummyComponent = new class extends import_obsidian7.Component {
    }();
    import_obsidian7.MarkdownRenderer.renderMarkdown(this.content, md, "/", dummyComponent);
  }
  onClose() {
    this.contentEl.empty();
  }
};
var ToolkitSettingsTab = class extends import_obsidian7.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.versionValueEl = null;
    this.forceWarningEl = null;
    this.plugin = plugin;
  }
  renderHeader(root) {
    const header = root.createDiv();
    header.style.display = "flex";
    header.style.justifyContent = "space-between";
    header.style.alignItems = "center";
    header.style.borderBottom = "1px solid var(--divider-color)";
    header.style.marginBottom = "2em";
    header.style.paddingBottom = "0.5em";
    header.createEl("h3", { text: "VVunderlore Toolkit Settings" });
    const headerBtns = header.createDiv();
    headerBtns.style.display = "flex";
    headerBtns.style.gap = "0.5em";
    const docsBtn = headerBtns.createEl("button", { text: "Docs" });
    docsBtn.onclick = () => window.open("http://vvunderlore.com", "_blank");
    const githubBtn = headerBtns.createEl("button", { text: "GitHub" });
    githubBtn.onclick = () => window.open("https://github.com/slamwise0001/VVunderlore-Toolkit-Full", "_blank");
    const kofiBtn = headerBtns.createEl("button", {
      text: "\u2615 Ko-fi",
      cls: "mod-cta"
    });
    kofiBtn.style.backgroundColor = "#ff5900";
    kofiBtn.style.color = "white";
    kofiBtn.onclick = () => window.open("https://ko-fi.com/vvunderlore", "_blank");
  }
  renderFirstRunCard(root) {
    if (this.plugin.settings.needsInstall) {
      this.plugin.settings.rulesetCompendium = "";
      this.plugin.settings.rulesetReference = [];
    }
    const card = root.createEl("div", { cls: "vvunderlore-first-run" });
    Object.assign(card.style, {
      display: "flex",
      flexDirection: "column",
      alignItems: "center",
      textAlign: "center",
      marginTop: "2em",
      padding: "1em",
      border: "2px solid var(--divider-color)",
      borderRadius: "18px",
      /* (optional) round the corners slightly */
      backgroundColor: "var(--background-primary)"
      /* (optional) white/gray background */
    });
    const title = card.createEl("h2", {
      text: "\u{1F3F0} Welcome to VVunderlore",
      cls: "vv-card-title"
    });
    title.style.marginBottom = "0.5em";
    const desc = card.createEl("p", {
      text: "Get started by installing the default toolkit\u2014\nor choose individual pieces to suit your vault.",
      cls: "vv-card-desc"
    });
    desc.style.marginBottom = "1.25em";
    const plugin = this.plugin;
    const grid = card.createDiv();
    Object.assign(grid.style, {
      display: "grid",
      gridTemplateColumns: "max-content max-content",
      columnGap: "1rem",
      rowGap: "0.25rem",
      justifyContent: "center",
      justifyItems: "center",
      marginBottom: "1rem"
    });
    const labelRs = grid.createEl("div", { text: "Ruleset" });
    labelRs.style.fontWeight = "bold";
    const labelRef = grid.createEl("div", { text: "Reference (optional)" });
    labelRef.style.fontWeight = "bold";
    const rsCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const refCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const summaryBar = grid.createDiv();
    Object.assign(summaryBar.style, {
      gridColumn: "1 / span 2",
      display: "flex",
      alignItems: "center",
      flexWrap: "wrap",
      gap: "0.5rem",
      fontSize: "0.85em",
      color: "var(--text-muted)",
      fontStyle: "italic",
      marginTop: "0.25rem",
      marginBottom: "1rem"
    });
    const rulesetSpan = summaryBar.createSpan({
      text: `Ruleset: ${plugin.settings.rulesetCompendium ? `D&D 5E (${plugin.settings.rulesetCompendium})` : ""}`
    });
    rulesetSpan.style.fontWeight = "bold";
    summaryBar.createSpan({ text: "References:" });
    const chipsWrapper = summaryBar.createDiv();
    Object.assign(chipsWrapper.style, { display: "flex", gap: "4px" });
    function addChip(id) {
      const ed = AVAILABLE_EDITIONS.find((e) => e.id === id);
      const chip = chipsWrapper.createDiv({
        attr: {
          style: "background: var(--interactive-accent); color: white; padding:2px 6px; border-radius:4px; display:inline-flex; align-items:center; gap:4px;"
        }
      });
      chip.createSpan({ text: ed.label });
      const rem = chip.createSpan({
        text: "\xD7",
        attr: { style: "cursor:pointer; margin-left:4px;" }
      });
      rem.onclick = async () => {
        plugin.settings.rulesetReference = plugin.settings.rulesetReference.filter((x) => x !== id);
        await plugin.saveSettings();
        chip.remove();
        updateInstallButtons();
      };
    }
    ;
    plugin.settings.rulesetReference.forEach((e) => addChip(e));
    const rsDropdown = new import_obsidian7.DropdownComponent(rsCell);
    rsDropdown.addOption("", "Select edition\u2026");
    AVAILABLE_EDITIONS.forEach((ed) => {
      rsDropdown.addOption(ed.id, ed.label);
    });
    rsDropdown.setValue(this.plugin.settings.rulesetCompendium).onChange(async (val) => {
      this.plugin.settings.rulesetCompendium = val;
      await this.plugin.saveSettings();
      const chosen = AVAILABLE_EDITIONS.find((e) => e.id === val);
      rulesetSpan.textContent = chosen ? chosen.label : "";
      chipsWrapper.empty();
      updateInstallButtons();
    });
    const searchWrapperEl = refCell.createDiv({ attr: { style: "text-align:center;" } });
    const searchComp = new import_obsidian7.SearchComponent(searchWrapperEl);
    searchComp.setPlaceholder("Add reference rules\u2026");
    const suggestionInputEl = searchComp.inputEl;
    new class extends import_obsidian7.AbstractInputSuggest {
      constructor(app, inputEl) {
        super(app, inputEl);
      }
      // 1) Propose edition IDs (minus the one they picked as the main ruleset)
      getSuggestions(input) {
        return AVAILABLE_EDITIONS.filter((ed) => ed.id !== plugin.settings.rulesetCompendium).filter((ed) => ed.label.toLowerCase().includes(input.toLowerCase())).map((ed) => ed.id);
      }
      // 2) Render the human-readable label
      renderSuggestion(item, el) {
        const ed = AVAILABLE_EDITIONS.find((e) => e.id === item);
        el.createDiv({ text: ed.label });
      }
      // 3) When they pick one, store its ID and add a chip
      selectSuggestion(item) {
        if (!plugin.settings.rulesetReference.includes(item)) {
          plugin.settings.rulesetReference.push(item);
          plugin.saveSettings();
          addChip(item);
        }
        this.close();
        suggestionInputEl.value = "";
        updateInstallButtons();
      }
    }(this.app, suggestionInputEl);
    const btnRow1 = card.createEl("div", { cls: "vv-button-row" });
    Object.assign(btnRow1.style, {
      display: "flex",
      gap: "0.75em",
      justifyContent: "center",
      marginBottom: "1.5em"
    });
    const installBtn1 = btnRow1.createEl("button", {
      text: "Install Toolkit",
      cls: "mod-cta"
    });
    installBtn1.onClickEvent(
      () => new ConfirmFreshInstallModal(this.app, this.plugin).open()
    );
    const customBtn1 = btnRow1.createEl("button", {
      text: "Custom Install",
      cls: "mod-cta"
    });
    Object.assign(customBtn1.style, {
      background: "none",
      border: "1px solid var(--interactive-accent)",
      color: "var(--text-normal)"
    });
    customBtn1.onClickEvent(() => showCustomInstallModal(this.app, this.plugin));
    const updateInstallButtons = () => {
      const hasRuleset = Boolean(this.plugin.settings.rulesetCompendium);
      installBtn1.toggleAttribute("disabled", !hasRuleset);
      customBtn1.toggleAttribute("disabled", !hasRuleset);
    };
    updateInstallButtons();
    const skipPara = card.createEl("p", { cls: "vv-skip-link" });
    Object.assign(skipPara.style, {
      textAlign: "center",
      marginTop: "0.25em"
    });
    skipPara.createEl("a", {
      text: "Already have the Toolkit? Show me the settings \u2192"
    }).onClickEvent(async () => {
      const markerPath = ".vvunderlore_installed";
      try {
        if (!await this.app.vault.adapter.exists(markerPath)) {
          await this.app.vault.create(markerPath, "");
        }
      } catch (e) {
        console.error("\u274C Failed to create marker file:", e);
      }
      this.plugin.settings.needsInstall = false;
      await this.plugin.saveSettings();
      this.display();
    });
  }
  display() {
    console.log("\u{1F527} display() called, needsInstall =", this.plugin.settings.needsInstall);
    const { containerEl } = this;
    const savedScrollTop = containerEl.scrollTop;
    containerEl.empty();
    this.renderHeader(containerEl);
    if (this.plugin.settings.needsInstall) {
      console.log("\u{1F9EA} Showing first-run card");
      this.renderFirstRunCard(containerEl);
      containerEl.scrollTop = savedScrollTop;
      return;
    }
    ;
    (async () => {
      const versionRow = containerEl.createDiv();
      versionRow.style.marginBottom = "1em";
      versionRow.style.display = "flex";
      versionRow.style.justifyContent = "space-between";
      versionRow.style.alignItems = "flex-start";
      versionRow.style.gap = "2em";
      versionRow.style.flexWrap = "wrap";
      versionRow.style.borderBottom = "1px solid var(--divider-color)";
      const versionInfo = versionRow.createDiv();
      versionInfo.style.display = "flex";
      versionInfo.style.flexDirection = "column";
      versionInfo.style.gap = "0.25em";
      let installed = "Not installed";
      try {
        const verContent = await this.app.vault.adapter.read(".version.json");
        const json = JSON.parse(verContent);
        installed = json.version ?? "Not installed";
      } catch (err) {
        console.warn("Could not read .version.json from vault:", err);
      }
      const latest = this.plugin.settings.latestToolkitVersion ?? "Could not fetch";
      const isMatch = installed === latest;
      const vaultRow = versionInfo.createDiv();
      vaultRow.appendText("Vault Toolkit Version: ");
      this.versionValueEl = vaultRow.createSpan();
      this.versionValueEl.textContent = installed;
      this.versionValueEl.style.fontWeight = "bold";
      this.versionValueEl.style.color = isMatch ? "var(--text-success)" : "var(--text-error)";
      const latestRow = versionInfo.createEl("div", { text: "Latest Official Version: " });
      latestRow.createSpan({
        text: latest,
        attr: { style: "font-weight: bold; color: var(--text-success);" }
      });
      const versionControls = versionRow.createDiv();
      versionControls.style.display = "flex";
      versionControls.style.flexDirection = "column";
      versionControls.style.alignItems = "flex-end";
      versionControls.style.gap = "0.5em";
      const buttonRow = versionControls.createDiv();
      buttonRow.style.display = "flex";
      buttonRow.style.gap = "0.5em";
      const checkBtn = buttonRow.createEl("button", {
        text: installed !== latest ? "Preview Update" : "Check for Updates",
        cls: "mod-cta"
      });
      checkBtn.addEventListener("click", async () => {
        if (installed !== latest) {
          this.plugin.previewUpdatesModal();
        } else {
          await this.plugin.checkForUpdates();
        }
      });
      const changelogBtn = buttonRow.createEl("button", { text: "\u{1F4D6} View Changelog" });
      changelogBtn.addEventListener("click", () => {
        new MarkdownPreviewModal(this.app, this.plugin.changelog).open();
      });
      if (this.plugin.settings.lastChecked) {
        const lastChecked = versionControls.createDiv();
        lastChecked.style.fontSize = "11px";
        lastChecked.style.color = "var(--text-muted)";
        lastChecked.textContent = `Last checked: ${new Date(this.plugin.settings.lastChecked).toLocaleString()}`;
      }
      const fixDetails = containerEl.createEl("details", { cls: "vk-section" });
      const fixHeader = fixDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(fixHeader.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const fixHeaderRow = fixHeader.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const fixTitleBlock = fixHeaderRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      fixTitleBlock.createEl("h5", { text: "Fix Your Vault" });
      fixTitleBlock.createEl("div", {
        text: "Fix and broken, deleted, or misplaced files in your toolkit.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const fixToggleIcon = fixHeaderRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(fixToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        // Rotate around its own center
        userSelect: "none",
        transform: fixDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      fixDetails.ontoggle = () => {
        fixToggleIcon.style.transform = fixDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const fixBody = fixDetails.createDiv({ cls: "vk-section-body" });
      fixBody.style.paddingLeft = "1em";
      const fixButtonRow = fixBody.createDiv();
      fixButtonRow.style.display = "flex";
      fixButtonRow.style.justifyContent = "space-between";
      fixButtonRow.style.alignItems = "center";
      fixButtonRow.style.marginTop = "0.5em";
      const warningContainer = fixButtonRow.createDiv();
      this.forceWarningEl = warningContainer;
      let installedVersionStr = "";
      try {
        const versionFile = await this.plugin.app.vault.adapter.read(".version.json");
        const parsed = JSON.parse(versionFile);
        installedVersionStr = (parsed.version ?? "").trim();
      } catch {
        installedVersionStr = "";
      }
      const latestVersionStr = (this.plugin.settings.latestToolkitVersion ?? "").trim();
      console.log("\u{1F9EA} Comparing versions:", installedVersionStr, latestVersionStr);
      if (installedVersionStr && latestVersionStr && installedVersionStr !== latestVersionStr) {
        const warn = warningContainer.createEl("div", {
          text: `\u26A0\uFE0F New version available (${installedVersionStr} \u2192 ${latestVersionStr}) \u2014 use regular update instead`
        });
        warn.style.fontSize = "0.85em";
        warn.style.color = "var(--text-muted)";
        warn.style.fontStyle = "italic";
        warn.setAttr(
          "title",
          "Force updating while a new version is available may skip important changes."
        );
      }
      const buttonGroup = fixButtonRow.createDiv();
      buttonGroup.style.display = "flex";
      buttonGroup.style.gap = "0.5em";
      buttonGroup.createEl("button", { text: "Force Update Vault", cls: "mod-cta" }).onclick = async () => {
        await this.plugin.forceUpdatePreviewAndConfirm();
        if (this.plugin.settings.reparseGamesets) {
          await this.plugin.refreshGameSetData();
        }
      };
      buttonGroup.createEl("button", {
        text: "Undo Update"
      }).onclick = async () => {
        await this.plugin.undoForceUpdate();
      };
      const fixTimestampRow = fixBody.createDiv();
      Object.assign(fixTimestampRow.style, {
        textAlign: "right",
        fontSize: "11px",
        color: "var(--text-muted)",
        marginTop: "0.25em"
      });
      fixTimestampRow.textContent = `Last forced: ${this.plugin.settings.lastForceUpdate ? new Date(this.plugin.settings.lastForceUpdate).toLocaleString() : "Not forced yet"}`;
      fixBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin: 0.75em 0;"
        }
      });
      const reparseRow = fixBody.createDiv();
      reparseRow.style.marginTop = "0.5em";
      new import_obsidian7.Setting(reparseRow).setName("Re-parse Game Sets On Force Update").setDesc(
        "Also re-parse your ruleset compendium and reference sets. This won't delete any files in the Compendium or Reference folders."
      ).addToggle(
        (tog) => tog.setValue(this.plugin.settings.reparseGamesets).onChange(async (value) => {
          this.plugin.settings.reparseGamesets = value;
          await this.plugin.saveSettings();
        })
      );
      const backupDetails = containerEl.createEl("details", { cls: "vk-section" });
      const backupSummary = backupDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(backupSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const backupTitleRow = backupSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const titleBlock = backupTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      titleBlock.createEl("h5", { text: "Vault Backups" });
      titleBlock.createEl("div", {
        text: "The Toolkit will back up your vault automatically before updates. You can also back up manually anytime.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const backupVvIcon = backupTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(backupVvIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: backupDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      backupDetails.ontoggle = () => {
        backupVvIcon.style.transform = backupDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const backupBody = backupDetails.createDiv({ cls: "vk-section-body" });
      backupBody.style.paddingLeft = "1em";
      new import_obsidian7.Setting(backupBody).setName("Auto-Backup Before Update").setDesc("Create a full .zip of the vault before applying version updates. Force updates will only back up the files that will be modified or removed.").addToggle(
        (t) => t.setValue(this.plugin.settings.autoBackupBeforeUpdate).onChange(async (v) => {
          this.plugin.settings.autoBackupBeforeUpdate = v;
          await this.plugin.saveSettings();
        })
      );
      new import_obsidian7.Setting(backupBody).setName("Manual Backup").setDesc("Immediately create a zip backup of your vault").addButton(
        (b) => b.setButtonText("Backup Vault Now").setCta().onClick(async () => {
          const path2 = await this.plugin.backupManager.backupVaultToZip("manual");
          new import_obsidian7.Notice(`Backup created: ${path2}`);
        })
      );
      new import_obsidian7.Setting(backupBody).setName("Open Backups Folder").setDesc("Open the backups folder on disk. MacOS: Cant see it? Hit Shift+Cmd+(period).").addButton(
        (b) => b.setButtonText("Open Folder").onClick(async () => {
          try {
            const vaultBasePath = this.plugin.app.vault.adapter.getBasePath();
            const backupFolderPath = path.join(
              vaultBasePath,
              ".vault-backups"
            );
            const { shell } = window.require("electron");
            const result = await shell.openPath(backupFolderPath);
            if (typeof result === "string" && result.length > 0) {
              console.error("\u274C shell.openPath error:", result);
              new import_obsidian7.Notice("Could not open backups folder. See console.");
            }
          } catch (err) {
            console.error("\u274C Could not open backups folder:", err);
            new import_obsidian7.Notice("Could not open backups folder. See console.");
          }
        })
      );
      backupBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin-top: 1.5em;"
        }
      });
      const customizationDetails = containerEl.createEl("details", { cls: "vk-section" });
      const customizationSummary = customizationDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(customizationSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "flex-start",
        padding: "0.5em 0",
        cursor: "pointer"
      });
      const titleRow = customizationSummary.createDiv({
        attr: {
          style: `
			display: flex;
			width: 100%;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const customizationTitleBlock = titleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      const h5 = customizationTitleBlock.createEl("h5");
      h5.appendText("Custom File Management ");
      customizationTitleBlock.createEl("div", {
        text: "Skip updates on certain files or remap relocated Toolkit files so they can update.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const customVvIcon = titleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(customVvIcon.style, {
        fontWeight: "bold",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: customizationDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      customizationDetails.ontoggle = () => {
        customVvIcon.style.transform = customizationDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const customizationBodyWrapper = customizationDetails.createDiv({
        attr: { style: "padding-left: 1em; padding-right: 1em;" }
      });
      const customizationBody = customizationBodyWrapper.createDiv({ cls: "vk-section-body" });
      const skipSection = customizationBody.createDiv();
      const settingItem = skipSection.createDiv({ cls: "setting-item" });
      const info = settingItem.createDiv({ cls: "setting-item-info" });
      info.createDiv({ text: "Skip Toolkit Items", cls: "setting-item-name" });
      info.createDiv({
        text: "Files listed here will be ignored during toolkit updates.",
        cls: "setting-item-description"
      });
      const control = settingItem.createDiv({ cls: "setting-item-control" });
      const dropdown = new import_obsidian7.DropdownComponent(control);
      dropdown.selectEl.style.minWidth = "220px";
      dropdown.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, f.displayName ?? f.path.split("/").pop()));
      this.plugin.manifestCache.folders.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)"));
      new import_obsidian7.ButtonComponent(control).setButtonText("Add").setCta().onClick(async () => {
        const key = dropdown.getValue();
        if (!key) return new import_obsidian7.Notice("Pick something to skip.");
        if (!this.plugin.settings.customPaths.some((c) => c.manifestKey === key)) {
          this.plugin.settings.customPaths.push({ vaultPath: key, manifestKey: key, doUpdate: false });
          await this.plugin.saveSettings();
          renderSkipTable();
        }
      });
      const skipTableWrapper = skipSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top:0.75em" } });
      const renderSkipTable = () => {
        skipTableWrapper.empty();
        const items = this.plugin.settings.customPaths.filter((c) => !c.doUpdate);
        if (items.length === 0) {
          const emptyMsg = skipTableWrapper.createEl("div", { text: "No items skipped." });
          emptyMsg.style.textAlign = "center";
          emptyMsg.style.opacity = "0.6";
          emptyMsg.style.padding = "0.5em";
          return;
        }
        const table = skipTableWrapper.createEl("table", { cls: "setting-table" });
        const header = table.createTHead().insertRow();
        header.insertCell().textContent = "Skipped Files/Folders";
        const body = table.createTBody();
        items.forEach((entry) => {
          const row = body.insertRow();
          const contentCell = row.insertCell();
          contentCell.colSpan = 1;
          contentCell.style.display = "flex";
          contentCell.style.justifyContent = "space-between";
          contentCell.style.paddingLeft = "4em";
          contentCell.style.alignItems = "center";
          contentCell.style.gap = "1em";
          contentCell.style.fontWeight = "bold";
          contentCell.createSpan({ text: entry.manifestKey });
          const removeLink = contentCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.style.fontSize = "0.8em";
          removeLink.style.color = "var(--text-faint)";
          removeLink.style.textDecoration = "underline";
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderSkipTable();
          };
        });
      };
      renderSkipTable();
      customizationBody.createEl("div", {
        attr: { style: "height: 1em; border-top: 1px solid var(--divider-color); margin: 1em 0;" }
      });
      const remapSection = customizationBody.createDiv();
      const remapSetting = remapSection.createDiv({ cls: "setting-item" });
      const remapInfo = remapSetting.createDiv({ cls: "setting-item-info" });
      remapInfo.createDiv({ text: "Remap File Paths", cls: "setting-item-name" });
      remapInfo.createDiv({
        text: "Remap toolkit files vault paths if you chose to move anything. Moving files without remapping will result in duplicate and/or out-of-date files after update.",
        cls: "setting-item-description"
      });
      const remapControlBlock = remapSection.createDiv({ cls: "vk-inline-add-controls" });
      remapControlBlock.style.flexWrap = "wrap";
      remapControlBlock.style.marginTop = "0.5em";
      let remapDrop;
      let remapInput;
      remapDrop = new import_obsidian7.DropdownComponent(remapControlBlock);
      remapDrop.selectEl.style.minWidth = "220px";
      remapDrop.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.forEach(
        (f) => remapDrop.addOption(f.path, f.displayName ?? f.path.split("/").pop())
      );
      this.plugin.manifestCache.folders.forEach(
        (f) => remapDrop.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)")
      );
      const searchWrapper = remapControlBlock.createDiv();
      const searchComponent = new import_obsidian7.SearchComponent(searchWrapper);
      searchComponent.setPlaceholder("Search vault path\u2026");
      new FilePathSuggester(this.app, searchComponent.inputEl);
      remapInput = searchComponent.inputEl;
      new import_obsidian7.ButtonComponent(remapControlBlock).setButtonText("Add Remap").setCta().onClick(async () => {
        const key = remapDrop.getValue();
        const vp = remapInput.value.trim();
        if (!key || !vp) return new import_obsidian7.Notice("Select an item and enter a vault path.");
        if (!this.app.vault.getAbstractFileByPath(vp)) return new import_obsidian7.Notice("Vault path not found.");
        this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => c.manifestKey !== key);
        this.plugin.settings.customPaths.push({ manifestKey: key, vaultPath: vp, doUpdate: true });
        await this.plugin.saveSettings();
        remapInput.value = "";
        remapDrop.setValue("");
        renderRemapPanel();
      });
      const remapTableWrapper = remapSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top: 0.75em" } });
      const renderRemapPanel = () => {
        remapTableWrapper.empty();
        const toRemap = this.plugin.settings.customPaths.filter((c) => c.doUpdate);
        if (toRemap.length === 0) {
          const emptyMsg = remapTableWrapper.createEl("div", { text: "No custom paths defined." });
          emptyMsg.style.textAlign = "center";
          emptyMsg.style.opacity = "0.6";
          emptyMsg.style.padding = "0.5em";
          return;
        }
        const table = remapTableWrapper.createEl("table", { cls: "setting-table" });
        const head = table.createTHead().insertRow();
        ["Toolit Item", "New Vault Path", ""].forEach((txt) => head.insertCell().textContent = txt);
        const body = table.createTBody();
        toRemap.forEach((entry) => {
          const row = body.insertRow();
          row.insertCell().textContent = entry.manifestKey;
          row.insertCell().textContent = entry.vaultPath;
          const removeCell = row.insertCell();
          const removeLink = removeCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.style.fontSize = "0.8em";
          removeLink.style.color = "var(--text-faint)";
          removeLink.style.textDecoration = "underline";
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderRemapPanel();
          };
        });
      };
      renderRemapPanel();
      customizationBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin: 0.5em 0;"
        }
      });
      const highlightDetails = containerEl.createEl("details", { cls: "vk-section" });
      const highlightSummary = highlightDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(highlightSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const highlightTitleRow = highlightSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const hlTitleBlock = highlightTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      hlTitleBlock.createEl("h5", { text: "File Highlights" });
      hlTitleBlock.createEl("div", {
        text: "Toggle on/off the highlighting of Toolkit-specific files. Also make the highlights cool colors.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const hlToggleIcon = highlightTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(hlToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: highlightDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      highlightDetails.ontoggle = () => {
        hlToggleIcon.style.transform = highlightDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const highlightBody = highlightDetails.createDiv({ cls: "vk-section-body" });
      highlightBody.style.paddingLeft = "1em";
      new import_obsidian7.Setting(highlightBody).setName("Enable File/Folder Highlighting").setDesc("Any file/folder installed by VVunderlore will have this background.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.highlightEnabled).onChange(async (enabled) => {
          this.plugin.settings.highlightEnabled = enabled;
          await this.plugin.saveSettings();
          if (enabled) {
            this.plugin.enableHighlight();
          } else {
            this.plugin.disableHighlight();
          }
          renderHighlightColorPickers();
        });
      });
      const colorPickerWrapper = highlightBody.createDiv();
      const renderHighlightColorPickers = () => {
        colorPickerWrapper.empty();
        if (!this.plugin.settings.highlightEnabled) {
          return;
        }
        new import_obsidian7.Setting(colorPickerWrapper).setName("Light Mode Highlight Color").setDesc("Choose the background color for files/folders in Light mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorLight).onChange(async (newColor) => {
            this.plugin.settings.highlightColorLight = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
        new import_obsidian7.Setting(colorPickerWrapper).setName("Dark Mode Highlight Color").setDesc("Choose the background color for files/folders in Dark mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorDark).onChange(async (newColor) => {
            this.plugin.settings.highlightColorDark = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
      };
      renderHighlightColorPickers();
      renderSkipTable();
      renderRemapPanel();
      const removeDemoSetting = new import_obsidian7.Setting(containerEl);
      removeDemoSetting.settingEl.style.borderTop = "none";
      removeDemoSetting.setName("Remove Demo Files").setDesc("Delete every \u201Coptional\u201D demo file and folder from your vault.").addButton(
        (button) => button.setButtonText("Remove Demo Files").onClick(async () => {
          const optionalFileEntries = this.plugin.manifestCache.files.filter((f) => f.optional);
          const optionalFolderEntries = this.plugin.manifestCache.folders.filter((f) => f.optional);
          const totalCountFiles = optionalFileEntries.length;
          const totalCountFolders = optionalFolderEntries.length;
          const totalCount = totalCountFiles + totalCountFolders;
          if (totalCount === 0) {
            new import_obsidian7.Notice("No \u201Coptional\u201D demo files or folders to remove.");
            return;
          }
          const userConfirmed = await new Promise((resolve) => {
            const confirmModal = new class extends import_obsidian7.Modal {
              constructor(app) {
                super(app);
              }
              onOpen() {
                this.contentEl.empty();
                this.contentEl.createEl("h2", { text: "Confirm Removal" });
                this.contentEl.createEl("p", {
                  text: `This will permanently delete ${totalCountFiles} file(s) and ${totalCountFolders} folder(s). Continue?`
                });
                const btnRow = this.contentEl.createEl("div");
                Object.assign(btnRow.style, {
                  display: "flex",
                  justifyContent: "flex-end",
                  gap: "0.5em",
                  marginTop: "1.5em"
                });
                btnRow.createEl("button", { text: "Cancel" }).onclick = () => {
                  resolve(false);
                  this.close();
                };
                btnRow.createEl("button", { text: "Yes, Remove", cls: "mod-danger" }).onclick = () => {
                  resolve(true);
                  this.close();
                };
              }
              onClose() {
                this.contentEl.empty();
              }
            }(this.app);
            confirmModal.open();
          });
          if (!userConfirmed) {
            return;
          }
          let filesDeleted = 0;
          for (const fileEntry of optionalFileEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === fileEntry.key);
            const vaultPath = mapped?.vaultPath ?? fileEntry.path;
            if (await this.app.vault.adapter.exists(vaultPath)) {
              try {
                await this.app.vault.adapter.remove(vaultPath);
                filesDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional file ${vaultPath}`, err);
              }
            }
          }
          let foldersDeleted = 0;
          for (const folderEntry of optionalFolderEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === folderEntry.key);
            const vaultFolderPath = mapped?.vaultPath ?? folderEntry.path;
            if (await this.app.vault.adapter.exists(vaultFolderPath)) {
              try {
                await this.app.vault.adapter.rmdir(vaultFolderPath, true);
                foldersDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional folder ${vaultFolderPath}`, err);
              }
            }
          }
          this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => {
            const isOptFile = optionalFileEntries.some((f) => f.key === c.manifestKey);
            const isOptFolder = optionalFolderEntries.some((f) => f.key === c.manifestKey);
            return !isOptFile && !isOptFolder;
          });
          await this.plugin.saveSettings();
          new import_obsidian7.Notice(`Deleted ${filesDeleted} file(s) and ${foldersDeleted} folder(s).`);
          this.display();
        })
      );
      const footer = containerEl.createDiv({ cls: "setting-item" });
      Object.assign(footer.style, {
        fontSize: "0.85em",
        color: "var(--text-muted)",
        marginTop: "2em"
      });
      footer.createEl("span", {
        text: `VVunderlore Toolkit Plugin v${this.plugin.manifest.version} \u2022 `
      });
      footer.createEl("a", {
        text: "View on GitHub",
        href: "https://github.com/slamwise0001/vvunderlore-toolkit-plugin",
        attr: { target: "_blank" }
      });
      containerEl.scrollTop = savedScrollTop;
    })();
  }
  async updateVersionDisplay() {
    if (!this.versionValueEl || !this.forceWarningEl) return;
    let installed = "";
    try {
      const ver = await this.plugin.app.vault.adapter.read(".version.json");
      installed = JSON.parse(ver).version ?? "";
    } catch {
    }
    const latest = (this.plugin.settings.latestToolkitVersion ?? "").trim();
    const isMatch = installed === latest;
    this.versionValueEl.textContent = installed || "Not installed";
    this.versionValueEl.style.color = isMatch ? "var(--text-success)" : "var(--text-error)";
    this.forceWarningEl.empty();
    if (installed && latest && installed !== latest) {
      const warn = this.forceWarningEl.createDiv({
        text: `\u26A0\uFE0F New version available (${installed} \u2192 ${latest}) \u2014 use regular update instead`
      });
      warn.style.cssText = `
			font-size: 0.85em;
			color: var(--text-muted);
			font-style: italic;
		  `;
      warn.setAttr("title", "Force updating while a new version is available may skip important changes.");
    }
  }
};

// src/fileCacheManager.ts
var import_crypto = require("crypto");
var ToolkitFileCacheManager = class {
  constructor(vault, initialCache, saveCallback) {
    this.vault = vault;
    this.cache = initialCache || {};
    this.save = saveCallback;
  }
  hashContent(content) {
    return (0, import_crypto.createHash)("sha256").update(content).digest("hex");
  }
  async isUpToDate(vaultPath) {
    const entry = this.cache[vaultPath];
    if (!entry) {
      return false;
    }
    const exists = await this.vault.adapter.exists(vaultPath);
    if (!exists) {
      return false;
    }
    const content = await this.vault.adapter.read(vaultPath);
    const localHash = this.hashContent(content);
    const isSame = localHash === entry.hash;
    return isSame;
  }
  async updateCache(vaultPath, content, githubPath, saveNow = true) {
    this.cache[vaultPath] = {
      hash: this.hashContent(content),
      githubPath
    };
    if (saveNow) await this.save();
  }
  getCache() {
    return this.cache;
  }
  getTrackedFiles() {
    return Object.keys(this.cache);
  }
  getGitHubPath(vaultPath) {
    return this.cache[vaultPath]?.githubPath;
  }
  resetCache() {
    this.cache = {};
  }
  async removeFromCache(vaultPath) {
    delete this.cache[vaultPath];
    await this.save();
  }
};

// src/backup/BackupManager.ts
var import_obsidian8 = require("obsidian");
var import_path = require("path");
var import_fs = require("fs");
var BackupManager = class {
  constructor(vault) {
    this.vault = vault;
  }
  /**
   * Mirror every vault file (excluding .obsidian & backups) into a timestamped folder,
   * then prune to keep only the latest N full snapshots.
   * @param label Optional suffix for the backup folder name
   * @param maxFullBackups Number of full snapshots to retain (default: 5)
   */
  async backupVaultMirror(label, maxFullBackups = 5) {
    const ts = (/* @__PURE__ */ new Date()).toISOString().replace(/[:.]/g, "-");
    const tag = label ? `-${label}` : "";
    const base = (0, import_obsidian8.normalizePath)(`.vault-backups/full/${ts}${tag}`);
    console.log(`[BackupManager] Starting mirror backup: ${base}`);
    await this.ensureFolderExists(base);
    for (const file of this.vault.getFiles()) {
      if (file.path.startsWith(".vault-backups/") || file.path.startsWith(".obsidian/")) {
        continue;
      }
      const content = await this.vault.read(file);
      const target = (0, import_obsidian8.normalizePath)(`${base}/${file.path}`);
      await this.ensureFolderExists((0, import_path.dirname)(target));
      await this.vault.create(target, content);
    }
    console.log("[BackupManager] Mirror backup complete. Pruning old backups...");
    await this.pruneFullBackups(base, maxFullBackups);
    return base;
  }
  /**
   * Legacy alias for mirror-based backups
   */
  async backupVaultToZip(label) {
    return this.backupVaultMirror(label);
  }
  /**
   * Deletes oldest full backup folders, keeping only the most recent `keep` snapshots.
   */
  async pruneFullBackups(currentPath, keep) {
    const root = (0, import_obsidian8.normalizePath)(".vault-backups/full");
    await this.ensureFolderExists(root);
    if (!await this.vault.adapter.exists(root)) {
      return;
    }
    const listing = await this.vault.adapter.list(root);
    const rawFolders = Array.isArray(listing) ? listing : "folders" in listing ? listing.folders : [];
    const folders = rawFolders.map((f) => (0, import_path.basename)(f));
    const sorted = [...folders].sort((a, b) => b.localeCompare(a));
    const adapterAny = this.vault.adapter;
    const fsRoot = adapterAny.basePath ? (0, import_path.join)(adapterAny.basePath, root) : null;
    if (!fsRoot) {
      return;
    }
    for (let i = keep; i < sorted.length; i++) {
      const name = sorted[i];
      const vaultPath = (0, import_obsidian8.normalizePath)(`${root}/${name}`);
      if (vaultPath === currentPath) {
        continue;
      }
      const removePath = (0, import_path.join)(fsRoot, name);
      try {
        await import_fs.promises.rm(removePath, { recursive: true, force: true });
      } catch (e) {
      }
      const af = this.vault.getAbstractFileByPath(vaultPath);
      if (af) {
        await this.vault.delete(af);
      }
    }
  }
  /**
   * Recursively ensures that a directory exists in the vault.
   */
  async ensureFolderExists(folderPath) {
    if (!folderPath || await this.vault.adapter.exists(folderPath)) {
      return;
    }
    const parent = (0, import_path.dirname)(folderPath);
    await this.ensureFolderExists(parent);
    await this.vault.createFolder(folderPath);
  }
};

// src/main.ts
var loadingIcon = "data:image/png;base64,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";
var InstallingModal2 = class extends import_obsidian9.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.contentEl.empty();
    const img = this.contentEl.createEl("img", {
      attr: { src: loadingIcon, alt: "Installing\u2026" }
    });
    Object.assign(img.style, {
      display: "block",
      margin: "1em auto 0.5em",
      width: "100px",
      height: "100px"
    });
    img.animate(
      [
        { transform: "rotate(0deg)" },
        { transform: "rotate(-360deg)" }
      ],
      {
        duration: 1500,
        // one and a half seconds per revolution
        iterations: Infinity,
        easing: "linear"
      }
    );
    const txt = this.contentEl.createDiv({ text: "Installing\u2026", cls: "mod-quiet" });
    txt.style.cssText = "font-style: italic; color: var(--text-muted); text-align: center; padding: 1em;";
  }
  onClose() {
    this.contentEl.empty();
  }
};
var DEFAULT_SETTINGS = {
  installedVersion: "1.0.0",
  customizeUpdates: false,
  updateTargets: {
    tools: true,
    toolsPath: "Tools",
    templates: true,
    templatesPath: "Extras/Templates",
    omninomicon: true,
    omninomiconPath: "Adventures/Omninomicon.md",
    spellbook: true,
    spellbookPath: "Compendium/Spells/_Spellbook.md"
  },
  latestDefaults: void 0,
  pathOverrides: {},
  backupFiles: {},
  backupPath: "",
  autoBackup: false,
  lastBackupTime: "",
  backupError: "",
  customPaths: [],
  autoBackupBeforeUpdate: true,
  needsInstall: true,
  highlightEnabled: false,
  highlightColorLight: "rgb(107, 146, 120)",
  highlightColorDark: "rgb( 50,  70,  50)",
  rulesetCompendium: "",
  rulesetReference: [],
  reparseGamesets: true
};
var VVunderloreToolkitPlugin = class extends import_obsidian9.Plugin {
  constructor() {
    super(...arguments);
    this.manifestCache = { files: [], folders: [] };
    this.changelog = "";
    this.autoCheckInterval = null;
    this.oldPathsByGithub = {};
    this.styleEl = null;
    this.excludedPaths = [
      ".obsidian",
      ".DS_Store",
      ".gitignore",
      ".gitattributes",
      ".github",
      "README.md",
      ".version.json",
      "plugins",
      "Compendium"
    ];
    this.pendingRulesetKey = "";
    this.pendingReferenceKeys = [];
  }
  // ─── HELPERS ────────────────────────────────────────────────────────
  /** Given a GitHub path, return the overridden vault path or the original. */
  resolveVaultPath(githubPath) {
    const custom = this.settings.customPaths.find(
      (c) => c.manifestKey === githubPath || c.manifestKey === this.keyFor(githubPath)
    );
    return custom?.vaultPath ?? githubPath;
  }
  /** Convert “some/folder/file.md” → “some-folder-file” (lowercased, no extension). */
  keyFor(path2) {
    return path2.replace(/[/\\]/g, "-").replace(/\.[^.]+$/, "").toLowerCase();
  }
  isExcluded(path2) {
    return this.excludedPaths.some(
      (ex) => path2 === ex || path2.startsWith(`${ex}/`) || path2.includes(`/${ex}/`) || path2.endsWith(`/${ex}`) || path2.includes(`/${ex}`)
    );
  }
  // ─── CUSTOM INSTALL LOGIC ───────────────────────────────────────────
  async performCustomInstall(toInstall) {
    const allFiles = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian9.TFile).map((f) => f.path);
    const nonMarkerFiles = allFiles.filter((p) => p !== ".vvunderlore_installed");
    if (nonMarkerFiles.length > 0 && this.settings.autoBackupBeforeUpdate) {
      const folder = await this.backupManager.backupVaultMirror("pre-custom-install");
      new import_obsidian9.Notice(`Backup before custom\u2010install created at: ${folder}`);
    }
    for (const entry of toInstall) {
      if (entry.isFolder) {
        if (!await this.app.vault.adapter.exists(entry.path)) {
          await this.app.vault.createFolder(entry.path);
          console.log(`Created folder: ${entry.path}`);
        }
      } else {
        const manifestEntry = this.manifestCache.files.find(
          (f) => f.path === entry.path
        );
        if (!manifestEntry) {
          console.warn(`Could not find manifest entry for file: ${entry.path}`);
          continue;
        }
        await this.updateEntryFromManifest(manifestEntry, true);
      }
    }
    await this.updateVersionFile();
    this.settings.installedVersion = this.settings.latestToolkitVersion ?? this.settings.installedVersion;
    this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
    this.settings.needsInstall = false;
    await this.saveSettings();
    const markerPath = ".vvunderlore_installed";
    if (!await this.app.vault.adapter.exists(markerPath)) {
      await this.app.vault.create(markerPath, "");
    }
    this.settings.needsInstall = false;
    this.settings.highlightEnabled = true;
    await this.saveSettings();
    this.enableHighlight();
    if (this.settingsTab) {
      this.settingsTab.display();
    }
    new import_obsidian9.Notice("\u2705 Custom install complete \u2026");
  }
  // ─── HIGHLIGHTING (Light + Dark Mode) ──────────────────────────────
  get highlightCSS() {
    const light = this.settings.highlightColorLight.trim() || "rgba(107,146,120,1)";
    const dark = this.settings.highlightColorDark.trim() || "rgba( 50, 70, 50,1)";
    const fileSelectors = this.manifestCache.files.map((f) => {
      const escaped = f.path.replace(/"/g, '\\"');
      return `.nav-file-title[data-path="${escaped}"]`;
    });
    const folderSelectors = this.manifestCache.folders.map((f) => {
      const escaped = f.path.replace(/"/g, '\\"');
      return `.nav-folder-title[data-path="${escaped}"]`;
    });
    const lines = [
      `:root {`,
      `  --vvunderlore-toolkit-highlight: ${light};`,
      `}`,
      ``,
      `body.theme-dark {`,
      `  --vvunderlore-toolkit-highlight: ${dark};`,
      `}`,
      ``
    ];
    if (fileSelectors.length) {
      lines.push(`${fileSelectors.join(", ")} {`);
      lines.push(`  background-color: var(--vvunderlore-toolkit-highlight);`);
      lines.push(`  border-radius: 3px;`);
      lines.push(`}`);
      lines.push(``);
    }
    if (folderSelectors.length) {
      lines.push(`${folderSelectors.join(", ")} {`);
      lines.push(`  background-color: var(--vvunderlore-toolkit-highlight);`);
      lines.push(`  border-radius: 3px;`);
      lines.push(`}`);
      lines.push(``);
    }
    return lines.join("\n");
  }
  enableHighlight() {
    if (this.styleEl) return;
    this.styleEl = document.createElement("style");
    this.styleEl.id = "vvunderlore-highlight-inject";
    this.styleEl.textContent = this.highlightCSS;
    document.head.appendChild(this.styleEl);
  }
  disableHighlight() {
    if (!this.styleEl) return;
    this.styleEl.remove();
    this.styleEl = null;
  }
  // ─── REMOTE BASELINE CACHING ─────────────────────────────────────────
  async fetchRemoteBaseline() {
    console.log("\u{1F501} fetchRemoteBaseline() called");
    if (!this.manifestCache || !Array.isArray(this.manifestCache.files)) {
      console.warn("\u26A0\uFE0F manifestCache is missing or invalid");
      return;
    }
    for (const entry of this.manifestCache.files) {
      try {
        const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${entry.path}`;
        const remoteText = await (await fetch(rawUrl)).text();
        const resolved = this.resolveVaultPath(entry.path);
        if (resolved !== entry.path) {
          await this.fileCacheManager.removeFromCache(entry.path);
        }
        await this.fileCacheManager.updateCache(
          resolved,
          remoteText,
          entry.path,
          false
        );
      } catch (e) {
        console.error(`Failed to fetch raw baseline for ${entry.path}`, e);
      }
    }
    console.log("\u{1F4E6} Final cache:", this.fileCacheManager.getCache());
  }
  // ─── MARKER FILE CHECKS (first‐run detection) ───────────────────────
  async checkMarkerFile() {
    const devForce = window.forceNeedsInstall;
    if (devForce) {
      this.settings.needsInstall = true;
      console.log("\u{1F9EA} DEV MODE: Forcing needsInstall = true");
      await this.saveSettings();
      if (this.settingsTab) this.settingsTab.display();
      return;
    }
    const markerPath = ".TEST_vvunderlore_installed";
    const markerExists = await this.app.vault.adapter.exists(markerPath);
    this.settings.needsInstall = !markerExists;
    console.log(
      markerExists ? "\u2705 Marker file found \u2192 needsInstall = false" : "\u{1F7E1} Marker file NOT found \u2192 needsInstall = true"
    );
    await this.saveSettings();
    if (this.settingsTab) {
      this.settingsTab.display();
    }
  }
  // ─── MANIFEST SYNC ────────────────────────────────────────────────────
  async syncManifest() {
    try {
      const res = await fetch(
        "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/manifest.json"
      );
      if (!res.ok) throw new Error(`Failed to fetch manifest: ${res.statusText}`);
      const manifest = await res.json();
      this.settings.latestDefaults = manifest.defaultPaths || {};
      this.manifestCache = manifest;
      const manifestContent = JSON.stringify(manifest, null, 2);
      await this.app.vault.adapter.write("manifest.json", manifestContent);
      await this.saveSettings();
      console.log("Manifest synced and local manifest updated.");
    } catch (error) {
      console.error("Error syncing manifest:", error);
      new import_obsidian9.Notice("Failed to sync manifest.");
    }
  }
  // ─── PLUGIN LIFECYCLE ─────────────────────────────────────────────────
  async onload() {
    await this.loadSettings();
    this.backupManager = new BackupManager(this.app.vault);
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      this.settings.fileCache ?? {},
      async () => await this.saveSettings()
    );
    const origError = console.error.bind(console);
    console.error = (msg, ...rest) => {
      if (typeof msg === "string" && msg.includes("Cannot index file") && msg.includes("Dataview")) {
        return;
      }
      origError(msg, ...rest);
    };
    this.settingsTab = new ToolkitSettingsTab(this.app, this);
    this.addSettingTab(this.settingsTab);
    try {
      const content = await this.app.vault.adapter.read("manifest.json");
      this.manifestCache = JSON.parse(content);
      console.log("\u2705 Loaded manifest from vault:", this.manifestCache);
    } catch (err) {
      console.warn("Manifest not found in vault; will fetch from GitHub shortly.");
    }
    if (this.settings.highlightEnabled && !this.settings.needsInstall) {
      this.enableHighlight();
    }
    setTimeout(async () => {
      await this.syncManifest();
      await this.showIndexingModal();
      await this.checkForUpdates();
      this.oldPathsByGithub = Object.entries(
        this.fileCacheManager.getCache()
      ).reduce((map, [vaultPath, entry]) => {
        map[entry.githubPath] = vaultPath;
        return map;
      }, {});
      console.log("\u{1F4E6} Cached Files:", this.fileCacheManager.getCache());
    }, 250);
    this.scheduleAutoUpdateCheck();
    this.registerEvent(
      this.app.vault.on("delete", () => this.app.commands.executeCommandById("dataview:clear-cache"))
    );
    this.registerEvent(
      this.app.vault.on(
        "rename",
        () => this.app.commands.executeCommandById("dataview:clear-cache")
      )
    );
    if (!this.settings.customPaths) {
      this.settings.customPaths = [];
    }
    try {
      const raw = await this.app.vault.adapter.read("manifest.json");
      const manifest = JSON.parse(raw);
      const entries = [...manifest.folders || [], ...manifest.files || []];
      this.requiresGraph = /* @__PURE__ */ new Map();
      for (const e of entries) {
        this.requiresGraph.set(e.key, e.requires ?? []);
      }
    } catch (e) {
      console.warn("Could not build requiresGraph (manifest.json missing or invalid).");
      this.requiresGraph = /* @__PURE__ */ new Map();
    }
  }
  onunload() {
    this.disableHighlight();
    if (this.autoCheckInterval) {
      clearInterval(this.autoCheckInterval);
    }
  }
  scheduleAutoUpdateCheck() {
    this.autoCheckInterval = window.setInterval(() => {
      this.checkForUpdates();
    }, 60 * 60 * 1e3);
  }
  // ─── BACKUP & UNDO ────────────────────────────────────────────────────
  async backupFile(filePath, content) {
    this.settings.backupFiles = this.settings.backupFiles || {};
    this.settings.backupFiles[filePath] = content;
    await this.saveSettings();
    console.log(`Backup stored for ${filePath}`);
  }
  async undoForceUpdate() {
    if (!this.settings.backupFiles || Object.keys(this.settings.backupFiles).length === 0) {
      new import_obsidian9.Notice("No backups available to restore.");
      return;
    }
    for (const [filePath, backupContent] of Object.entries(this.settings.backupFiles)) {
      if (await this.app.vault.adapter.exists(filePath)) {
        await this.app.vault.adapter.write(filePath, backupContent);
        console.log(`Restored ${filePath}`);
      } else {
        await this.app.vault.create(filePath, backupContent);
        console.log(`Recreated and restored ${filePath}`);
      }
    }
    new import_obsidian9.Notice("\u2705 Force update undone.");
    this.settings.backupFiles = {};
    await this.saveSettings();
  }
  // ─── FOLDER SYNC ───────────────────────────────────────────────────────
  async syncMissingFolders() {
    if (this.manifestCache && this.manifestCache.folders) {
      for (const folderEntry of this.manifestCache.folders) {
        const folderPath = folderEntry.path;
        if (!await this.app.vault.adapter.exists(folderPath)) {
          await this.app.vault.createFolder(folderPath);
          console.log(`\u{1F4C1} Created missing folder: ${folderPath}`);
        }
      }
    }
  }
  // ─── FORCE-UPDATE PREVIEW ──────────────────────────────────────────────
  async buildForceUpdatePreview() {
    const previewList = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          previewList.push({
            filePath: vp,
            action: "deny-listed \u2013 will not update",
            selected: false
          });
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.key);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        if (!exists) {
          previewList.push({
            filePath: vp,
            action: `new file${tag}`,
            selected: true
          });
        } else if (!await this.fileCacheManager.isUpToDate(vp)) {
          previewList.push({
            filePath: vp,
            action: `will be overwritten${tag}`,
            selected: true
          });
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        if (!await this.app.vault.adapter.exists(fld.path) && !isDenyFolder) {
          previewList.push({
            filePath: fld.path,
            action: "missing folder (will be created)",
            selected: true,
            isFolder: true
          });
        }
      }
      return previewList;
    }
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
      const exists = await this.app.vault.adapter.exists(vaultPath);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vaultPath);
      let tag = "";
      if (vaultPath !== entry.path) tag = " (remapped)";
      if (!exists) {
        previewList.push({
          filePath: vaultPath,
          action: `new file${tag}`,
          selected: true
        });
      } else if (!upToDate) {
        previewList.push({
          filePath: vaultPath,
          action: `will be overwritten${tag}`,
          selected: true
        });
      }
    }
    for (const entry of this.manifestCache.folders) {
      if (entry.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(entry.path);
      if (!await this.app.vault.adapter.exists(entry.path) && !isDenyFolder) {
        previewList.push({
          filePath: entry.path,
          action: "missing folder (will be created)",
          selected: true,
          isFolder: true
        });
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        previewList.push({
          filePath: prevPath,
          action: `moved \u2192 ${manifestPath}`,
          selected: true
        });
      }
    }
    return previewList;
  }
  async forceUpdatePreviewAndConfirm() {
    const previewList = await this.buildForceUpdatePreview();
    const denyItems = [];
    const normalItems = [];
    for (const item of previewList) {
      if (item.action.startsWith("deny-listed")) {
        denyItems.push(item);
      } else {
        normalItems.push(item);
      }
    }
    const modal = new class extends import_obsidian9.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.contentEl.empty();
        this.titleEl.setText("Force Update Preview");
        this.contentEl.createEl("p", {
          text: 'The following items will be updated. Uncheck any items you do NOT want to change, then click "Confirm and Update".'
        });
        if (this.normal.length) {
          const normalContainer = this.contentEl.createEl("div");
          Object.assign(normalContainer.style, {
            maxHeight: "300px",
            overflowY: "auto",
            marginTop: "1em"
          });
          this.normal.forEach((item) => {
            const row = normalContainer.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace"
            });
            const label = row.createDiv();
            label.style.flexGrow = "1";
            label.style.display = "flex";
            label.style.flexDirection = "column";
            const labelWrapper = label.createDiv();
            labelWrapper.textContent = item.filePath;
            const note = label.createDiv({ text: item.action });
            note.style.fontSize = "13px";
            note.style.color = "var(--text-muted)";
            note.style.fontStyle = "italic";
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.onchange = () => {
              item.selected = checkbox.checked;
            };
          });
        } else {
          const noCandidates = this.contentEl.createEl("div");
          Object.assign(noCandidates.style, {
            display: "inline-block",
            fontFamily: "monospace",
            fontStyle: "italic",
            marginTop: "0.5em"
          });
          noCandidates.textContent = "No force-update candidates.";
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em",
            marginTop: "1em"
          });
          summary.createEl("span", { text: `Deny-List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.style.transform = denyDetails.open ? "rotate(0deg)" : "rotate(180deg)";
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.style.paddingLeft = "1em";
          this.denied.forEach((item) => {
            const row = denyBody.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace",
              color: "var(--text-faint)",
              fontStyle: "italic"
            });
            const labelWrapper = row.createDiv();
            labelWrapper.textContent = item.filePath;
            labelWrapper.style.textDecoration = "line-through";
            const note = row.createDiv({ text: item.action });
            note.style.fontSize = "13px";
            note.style.color = "var(--text-faint)";
            note.style.fontStyle = "italic";
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.disabled = true;
            checkbox.title = "This item is deny-listed";
          });
        }
        if (this.plugin.settings.reparseGamesets) {
          this.contentEl.createDiv({ cls: "mod-aux-text" }).setText("\u{1F504} Refreshing Gameset Data");
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          gap: "0.5em",
          marginTop: "1.5em"
        });
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm and Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          this.close();
          await this.plugin.performForceUpdateWithSelection([...this.normal, ...this.denied]);
        };
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalItems, denyItems);
    modal.plugin = this;
    modal.open();
  }
  async updateEntryFromManifest(entry, force = false) {
    const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
    if (custom?.doUpdate === false) {
      console.log(`\u23ED\uFE0F Skipping ${entry.key} (${entry.displayName}) \u2014 blacklisted`);
      return;
    }
    const finalVaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
    if (!force && await this.fileCacheManager.isUpToDate(finalVaultPath)) {
      console.log(`\u2714\uFE0F Already up to date: ${entry.displayName}`);
      return;
    }
    const url = `https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/${entry.path}`;
    try {
      const res = await fetch(url);
      const text = await res.text();
      await this.app.vault.adapter.write(finalVaultPath, text);
      await this.fileCacheManager.updateCache(finalVaultPath, text, entry.path);
      console.log(`\u2705 Updated ${entry.displayName} \u2192 ${finalVaultPath}`);
    } catch (e) {
      console.error(`\u274C Error updating ${entry.displayName}:`, e);
    }
  }
  async performForceUpdateWithSelection(previewList) {
    if (this.settings.autoBackupBeforeUpdate) {
    }
    this.settings.backupFiles = {};
    await this.saveSettings();
    try {
      const toUpdate = previewList.filter(
        (item) => item.selected && !item.isFolder && !this.settings.customPaths.some(
          (c) => c.vaultPath === item.filePath && c.doUpdate === false
        )
      );
      for (const item of toUpdate) {
        const entry = this.manifestCache.files.find(
          (f) => this.resolveVaultPath(f.path) === item.filePath
        );
        if (!entry) {
          console.warn(`\u26A0\uFE0F Could not match preview item to manifest: ${item.filePath}`);
          continue;
        }
        await this.updateEntryFromManifest(entry, true);
      }
      for (const entry of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(entry.path)) {
          await this.app.vault.createFolder(entry.path);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion ?? "unknown";
      this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
      new import_obsidian9.Notice("\u2705 Toolkit force\u2010updated with your selections.");
      if (this.settings.reparseGamesets) {
        new import_obsidian9.Notice("\u{1F504} Refreshing Game Set Data\u2026");
        await this.refreshGameSetData();
      }
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C Force update failed. Version not changed.", err);
      new import_obsidian9.Notice("\u274C One or more files failed. Version NOT updated.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  // ─── SINGLE-FILE UPDATE (with GitHub API + raw fallback) ──────────────
  async updateSingleFileFromGitHub({ githubPath, vaultPath }, force = false) {
    if (this.settings.customizeUpdates) {
      vaultPath = this.resolveVaultPath(githubPath);
      const custom = this.settings.customPaths.find((c) => c.manifestKey === githubPath);
      if (custom?.doUpdate === false) {
        return;
      }
    } else {
      vaultPath = githubPath;
    }
    if (!vaultPath) {
      console.error(`\u274C No valid vault path resolved for ${githubPath}`);
      return;
    }
    const oldVault = this.oldPathsByGithub[githubPath];
    if (oldVault && oldVault !== vaultPath) {
      if (await this.app.vault.adapter.exists(vaultPath)) {
        const stray = await this.app.vault.adapter.read(vaultPath);
        await this.backupFile(vaultPath, stray);
        await this.app.vault.adapter.remove(vaultPath);
      }
      const oldFile = this.app.vault.getAbstractFileByPath(oldVault);
      if (oldFile instanceof import_obsidian9.TFile) {
        await this.app.vault.rename(oldFile, vaultPath);
        const newContent = await this.app.vault.adapter.read(vaultPath);
        await this.fileCacheManager.updateCache(vaultPath, newContent, githubPath);
        return;
      }
    }
    const fileExists = await this.app.vault.adapter.exists(vaultPath);
    if (force && fileExists) {
      const current = await this.app.vault.adapter.read(vaultPath);
      await this.backupFile(vaultPath, current);
    }
    if (!force && fileExists && await this.fileCacheManager.isUpToDate(vaultPath)) {
      return;
    }
    const apiUrl = encodeURI(
      `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubPath}?ref=main`
    );
    try {
      let res = await fetch(apiUrl);
      if (res.status === 404) {
        const rawUrl = encodeURI(
          `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${githubPath}`
        );
        res = await fetch(rawUrl);
        if (!res.ok) throw new Error(`Raw fetch failed: ${res.statusText}`);
        const content2 = await res.text();
        if (fileExists) {
          await this.app.vault.adapter.write(vaultPath, content2);
        } else {
          await this.app.vault.create(vaultPath, content2);
        }
        await this.fileCacheManager.updateCache(vaultPath, content2, githubPath);
        return;
      }
      if (!res.ok) throw new Error(`GitHub API error: ${res.statusText}`);
      const { download_url } = await res.json();
      const content = await (await fetch(download_url)).text();
      if (fileExists) {
        await this.app.vault.adapter.write(vaultPath, content);
      } else {
        await this.app.vault.create(vaultPath, content);
      }
      await this.fileCacheManager.updateCache(vaultPath, content, githubPath);
    } catch (e) {
      console.error(`\u274C Failed to update ${vaultPath}`, e);
    }
  }
  // ─── PREVIEW + REMOTE-BASELINE + DIFF ─────────────────────────────────
  async previewUpdatesModal() {
    const loading = new class extends import_obsidian9.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.empty();
        this.contentEl.createDiv({
          text: "\u{1F504} Checking for updates\u2026",
          cls: "mod-warning"
        }).addEventListener("click", (e) => e.stopPropagation());
      }
    }(this.app);
    loading.open();
    await this.syncManifest();
    await this.fetchRemoteBaseline();
    const diffs = await this.buildUpdatePreview();
    loading.close();
    const denyListedLines = [];
    const normalLines = [];
    for (const d of diffs) {
      if (d.startsWith("\u274C deny\u2010listed")) {
        denyListedLines.push(d);
      } else {
        normalLines.push(d);
      }
    }
    const modal = new class extends import_obsidian9.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.empty();
        this.titleEl.setText("Update Preview");
        this.contentEl.createEl("p", {
          text: "Only files whose contents differ from GitHub will be updated:"
        });
        if (this.normal.length) {
          const ul = this.contentEl.createEl("ul");
          this.normal.forEach((line) => {
            const li = ul.createEl("li", { text: line });
          });
        } else {
          this.contentEl.createEl("div", {
            text: "\u2705 Everything is already up to date!",
            cls: "mod-info"
          });
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em"
          });
          summary.createEl("span", { text: `Deny\u2010List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.style.transform = denyDetails.open ? "rotate(0deg)" : "rotate(180deg)";
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.style.paddingLeft = "1em";
          const denyUl = denyBody.createEl("ul");
          this.denied.forEach((line) => {
            const li = denyUl.createEl("li", { text: line });
            li.style.color = "var(--text-faint)";
            li.style.fontStyle = "italic";
          });
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          marginTop: "1.25em"
          // tweak spacing as you like
        });
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm & Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          await this.plugin.updateSelectedToolkitContent();
          this.close();
        };
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalLines, denyListedLines);
    modal.plugin = this;
    modal.open();
  }
  async buildUpdatePreview() {
    const changes = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          changes.push(`\u274C deny\u2010listed \u2013 will not update: ${vp}`);
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists) {
          changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
        } else if (!upToDate) {
          changes.push(`\u{1F501} Will update: ${vp}${tag}`);
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        const exists = await this.app.vault.adapter.exists(fld.path);
        if (!exists && !isDenyFolder) {
          changes.push(`\u{1F4C1} New folder: ${fld.path}`);
        }
      }
      return changes.length ? changes : ["\u2705 Everything is already up to date!"];
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
      let tag = "";
      if (vp !== f.path) tag = " (remapped)";
      const exists = await this.app.vault.adapter.exists(vp);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
      if (!exists) {
        changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
      } else if (!upToDate) {
        changes.push(`\u{1F501} Will update: ${vp}${tag}`);
      }
    }
    for (const fld of this.manifestCache.folders) {
      if (fld.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(fld.path);
      const exists = await this.app.vault.adapter.exists(fld.path);
      if (!exists && !isDenyFolder) {
        changes.push(`\u{1F4C1} New folder: ${fld.path}`);
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        changes.push(`\u27A1\uFE0F Moved: ${prevPath} \u2192 ${manifestPath}`);
      }
    }
    return changes.length ? changes : ["\u2705 Everything is already up to date!"];
  }
  // ─── VERSION-CHECK / UPDATE FLOW ─────────────────────────────────────
  async checkForUpdates() {
    const isNewerVersion = (remote, local) => {
      const pa = remote.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      const pb = local.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      for (let i = 0; i < Math.max(pa.length, pb.length); i++) {
        if ((pa[i] || 0) > (pb[i] || 0)) return true;
        if ((pa[i] || 0) < (pb[i] || 0)) return false;
      }
      return false;
    };
    const toolkitPath = ".version.json";
    const toolkitUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/.version.json";
    const pluginUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-plugin/main/version.json";
    const changelogUrl = "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/README.md";
    let localTK = "0.0.0";
    try {
      const content = await this.app.vault.adapter.read(toolkitPath);
      const json = JSON.parse(content);
      localTK = json.version || localTK;
    } catch (err) {
      console.error("\u274C Failed to read local toolkit version:", err);
    }
    let remoteTK = "0.0.0";
    try {
      const res = await fetch(toolkitUrl);
      const data = await res.json();
      remoteTK = data.version || remoteTK;
      this.settings.latestToolkitVersion = remoteTK;
      if (data.defaultPaths) {
        this.settings.latestDefaults = data.defaultPaths;
      }
      this.settings.lastChecked = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
    } catch (err) {
      console.error("\u274C Failed to fetch remote toolkit version:", err);
    }
    console.log({ localTK, remoteTK });
    if (isNewerVersion(remoteTK, localTK)) {
      new import_obsidian9.Notice(`\u26A0\uFE0F Toolkit update available! Installed: v${localTK}, Latest: v${remoteTK}`);
      await this.fetchRemoteBaseline();
    } else {
      new import_obsidian9.Notice(`\u2705 Toolkit is up to date (v${localTK})`);
    }
    const localPL = this.manifest.version;
    let remotePL = localPL;
    try {
      const res = await fetch(pluginUrl);
      const data = await res.json();
      remotePL = data.version || remotePL;
    } catch (err) {
      console.error("\u274C Failed to fetch remote plugin version:", err);
    }
    console.log({ localPL, remotePL });
    if (isNewerVersion(remotePL, localPL)) {
      new import_obsidian9.Notice(`\u2699\uFE0F Plugin update available! Installed: v${localPL}, Latest: v${remotePL}`);
    } else {
      new import_obsidian9.Notice(`\u2705 Plugin is up to date (v${localPL})`);
    }
    try {
      const changelogRes = await fetch(changelogUrl);
      this.changelog = await changelogRes.text();
    } catch (err) {
      console.error("\u274C Failed to fetch changelog:", err);
    }
  }
  async loadSettings() {
    const loaded = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loaded);
    if (typeof this.settings.rulesetCompendium !== "string") {
      this.settings.rulesetCompendium = "";
    }
    if (!Array.isArray(this.settings.rulesetReference)) {
      this.settings.rulesetReference = [];
    }
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      loaded?.fileCache ?? {},
      async () => await this.saveSettings()
    );
    setTimeout(() => this.checkMarkerFile(), 500);
  }
  async saveSettings() {
    await this.saveData({
      ...this.settings,
      fileCache: this.fileCacheManager.getCache()
    });
  }
  async getLocalToolkitVersion() {
    try {
      const content = await this.app.vault.adapter.read(".version.json");
      const json = JSON.parse(content);
      return json.version || null;
    } catch (err) {
      console.error("\u274C Failed to read .version.json:", err);
      return null;
    }
  }
  async updateFullToolkitRepo() {
    const excluded = [
      ".obsidian",
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    const fetchRepoRoot = async () => {
      const apiUrl = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/";
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch repo root`);
      return await response.json();
    };
    try {
      const contents = await fetchRepoRoot();
      const filtered = contents.filter(
        (item) => !excluded.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      );
      filtered.sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const item of filtered) {
        if (item.type === "dir") {
          await this.updateFolderFromGitHub(item.path, item.path);
        }
        if (item.type === "file") {
          const response = await fetch(item.download_url);
          const content = await response.text();
          const filePath = item.path;
          const exists = await this.app.vault.adapter.exists(filePath);
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, item.path, false);
        }
      }
      await this.saveSettings();
      const markerPath = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(markerPath)) {
        await this.app.vault.create(markerPath, "");
      }
      this.settings.needsInstall = false;
      await this.saveSettings();
      if (this.settingsTab) {
        this.settingsTab.display();
      }
      if (this.settings.highlightEnabled) {
        this.enableHighlight();
      }
      new import_obsidian9.Notice("\u2705 VVunderlore Toolkit successfully installed!");
    } catch (err) {
      console.error("\u274C updateFullToolkitRepo() error:", err);
      new import_obsidian9.Notice("\u274C Failed to install toolkit. See console for details.");
    }
  }
  async updateSelectedToolkitContent() {
    if (this.settings.autoBackupBeforeUpdate) {
      const folder = await this.backupManager.backupVaultMirror("pre-update");
      new import_obsidian9.Notice(`Vault mirror backup created at: ${folder}`);
    }
    if (!this.settings.latestDefaults) {
      new import_obsidian9.Notice("\u274C GitHub defaults not loaded yet.");
      return;
    }
    const allManifestFiles = this.manifestCache.files.map((f) => f.path);
    const fileOverrides = Object.fromEntries(
      this.settings.customPaths.map((c) => [c.manifestKey, c])
    );
    try {
      for (const ghPath of allManifestFiles) {
        const override = fileOverrides[ghPath];
        if (override?.doUpdate === false) {
          console.log(`\u23ED\uFE0F Skipping deny-listed: ${ghPath}`);
          continue;
        }
        const vaultPath = this.settings.customizeUpdates ? this.resolveVaultPath(ghPath) : ghPath;
        const entry = this.manifestCache.files.find((f) => f.path === ghPath);
        if (!entry) continue;
        await this.updateEntryFromManifest(entry, false);
      }
      for (const folder of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(folder.path)) {
          await this.app.vault.createFolder(folder.path);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion;
      await this.saveSettings();
      new import_obsidian9.Notice("\u2705 Toolkit content updated.");
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C Update failed. Version not updated.", err);
      new import_obsidian9.Notice("\u274C Update failed. See console for details. Version file NOT changed.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  async updateFolderFromGitHub(githubFolderPath, vaultFolderPath) {
    const excluded = [
      ".obsidian",
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    if (excluded.some((ex) => githubFolderPath === ex || githubFolderPath.startsWith(`${ex}/`))) {
      return;
    }
    const apiUrl = `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubFolderPath}`;
    try {
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch folder: ${githubFolderPath}`);
      const files = await response.json();
      if (!await this.app.vault.adapter.exists(vaultFolderPath)) {
        await this.app.vault.createFolder(vaultFolderPath);
      }
      for (const file of files) {
        if (excluded.some((ex) => file.path === ex || file.path.startsWith(`${ex}/`))) {
          continue;
        }
        const filePath = `${vaultFolderPath}/${file.name}`;
        if (file.type === "file") {
          const fileResponse = await fetch(file.download_url);
          const content = await fileResponse.text();
          const exists = await this.app.vault.adapter.exists(filePath);
          if (exists) {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.backupFile(filePath, current);
            }
          }
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            if (await this.app.vault.adapter.read(filePath) !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, file.path, false);
        } else if (file.type === "dir") {
          await this.updateFolderFromGitHub(file.path, `${vaultFolderPath}/${file.name}`);
        }
      }
      await this.saveSettings();
      new import_obsidian9.Notice(`\u2705 Folder synced: ${vaultFolderPath}`);
    } catch (error) {
      console.error(`\u274C Failed to sync folder: ${vaultFolderPath}`, error);
      new import_obsidian9.Notice(`\u274C Failed to update folder: ${vaultFolderPath}`);
    }
  }
  async rebuildFileCache() {
    const cache = this.fileCacheManager;
    const tasks = [];
    for (const entry of this.manifestCache.files) {
      const vaultPath = this.resolveVaultPath(entry.path);
      if (await this.app.vault.adapter.exists(vaultPath)) {
        tasks.push((async () => {
          const content = await this.app.vault.adapter.read(vaultPath);
          await cache.updateCache(vaultPath, content, entry.path, false);
        })());
      }
    }
    for (const folderEntry of this.manifestCache.folders) {
      const folderPath = folderEntry.path;
      const folder = this.app.vault.getAbstractFileByPath(folderPath);
      if (folder instanceof import_obsidian9.TFolder) {
        import_obsidian9.Vault.recurseChildren(folder, (file) => {
          if (file instanceof import_obsidian9.TFile && file.extension === "md") {
            const filePath = file.path;
            tasks.push((async () => {
              const content = await this.app.vault.adapter.read(filePath);
              await cache.updateCache(filePath, content, filePath, false);
            })());
          }
        });
      }
    }
    const batchSize = 10;
    for (let i = 0; i < tasks.length; i += batchSize) {
      await Promise.all(tasks.slice(i, i + batchSize));
    }
    await this.saveSettings();
  }
  async showIndexingModal() {
    const modal = new class extends import_obsidian9.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.titleEl.setText("\u{1F504} Indexing Toolkit Files...");
        this.contentEl.createEl("p", {
          text: "Indexing and caching your VVunderlore Vault for faster updates and safer syncing."
        });
      }
    }(this.app);
    modal.open();
    await this.rebuildFileCache();
    modal.close();
    new import_obsidian9.Notice("\u2705 VVunderlore caching complete.");
  }
  async updateVersionFile() {
    if (!this.settings.latestToolkitVersion) {
      console.warn("No latest version found; skipping version file update.");
      return;
    }
    const versionPath = ".version.json";
    const content = JSON.stringify({ version: this.settings.latestToolkitVersion }, null, 2);
    const exists = await this.app.vault.adapter.exists(versionPath);
    if (exists) {
      await this.app.vault.adapter.write(versionPath, content);
    } else {
      await this.app.vault.create(versionPath, content);
    }
  }
  /** main.ts **/
  /** 
   * Install the selected compendium and zero or more reference editions.
   */
  async installFullToolkit(opts = { compendium: "", references: [] }) {
    const { compendium, references } = opts;
    if (!compendium) {
      throw new Error("No compendium edition selected");
    }
    const placeholder = new InstallingModal2(this.app);
    placeholder.open();
    let installSucceeded = false;
    try {
      const treeApi = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/git/trees/main?recursive=1";
      const resp = await fetch(treeApi);
      if (!resp.ok) {
        throw new Error(`Failed to list repo tree: ${resp.statusText}`);
      }
      const json = await resp.json();
      const items = Array.isArray(json.tree) ? json.tree : [];
      const staticEntries = items.filter(
        (item) => !this.excludedPaths.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      ).sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const entry of staticEntries) {
        if (entry.type === "tree") {
          if (!await this.app.vault.adapter.exists(entry.path)) {
            await this.app.vault.createFolder(entry.path);
          }
        } else {
          const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${encodeURIComponent(entry.path)}`;
          const fileResp = await fetch(rawUrl);
          if (!fileResp.ok) continue;
          const text = await fileResp.text();
          if (await this.app.vault.adapter.exists(entry.path)) {
            const old = await this.app.vault.adapter.read(entry.path);
            if (old !== text) {
              await this.app.vault.adapter.write(entry.path, text);
            }
          } else {
            await this.app.vault.create(entry.path, text);
          }
        }
      }
      this.settings.rulesetCompendium = compendium;
      this.settings.rulesetReference = references;
      await this.saveSettings();
      await Promise.all([
        importRulesetData({ app: this.app, editionKey: compendium, targetPath: `Compendium` }),
        ...references.map(
          (refKey) => importRulesetData({ app: this.app, editionKey: refKey, targetPath: refKey })
        )
      ]);
      const parseJobs = [
        importRulesetData({
          app: this.app,
          editionKey: compendium,
          targetPath: `Compendium`
        }),
        ...references.map(
          (refKey) => importRulesetData({
            app: this.app,
            editionKey: refKey,
            targetPath: `${refKey}`
          })
        )
      ];
      await Promise.all(parseJobs);
      const marker = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(marker)) {
        await this.app.vault.create(marker, "");
      }
      this.settings.needsInstall = false;
      this.settings.highlightEnabled = true;
      await this.saveSettings();
      this.enableHighlight();
      installSucceeded = true;
    } catch (err) {
      console.error("\u274C installFullToolkit()", err);
    } finally {
      placeholder.close();
      if (this.settingsTab) this.settingsTab.display();
      new import_obsidian9.Notice(
        installSucceeded ? "\u2705 VVunderlore Toolkit successfully installed!" : "\u274C Failed to install toolkit. See console for details."
      );
    }
  }
  // * Re-parse all gameset data (ruleset compendium + reference sets)
  async refreshGameSetData() {
    const { rulesetCompendium, rulesetReference } = this.settings;
    if (!rulesetCompendium && rulesetReference.length === 0) {
      new import_obsidian9.Notice("\u26A0\uFE0F No gameset keys set; nothing to refresh.");
      return;
    }
    const jobs = [];
    if (rulesetCompendium) {
      jobs.push(importRulesetData({
        app: this.app,
        editionKey: rulesetCompendium,
        targetPath: "Compendium"
      }));
    }
    for (const ref of rulesetReference) {
      jobs.push(importRulesetData({
        app: this.app,
        editionKey: ref,
        targetPath: ref
      }));
    }
    await Promise.all(jobs);
    new import_obsidian9.Notice("\u2705 Game Set Data refreshed.");
  }
};
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  InstallingModal
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9maXJzdGluc3RhbGxjb25maXJtLnRzIiwgInNyYy9lZGl0aW9ucy50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2luc3RhbGxlci50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvc291cmNlTWFwLnRzIiwgInNyYy9wYXJzZXJzLzVlLWpzb24vaGVscGVycy90YWdSZXBsYWNlci50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvbWFya2Rvd25UYWJsZS50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvZm9ybWF0RW50cnkudHMiLCAic3JjL3BhcnNlcnMvNWUtanNvbi9iZXN0aWFyeS50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2l0ZW1zLnRzIiwgInNyYy9wYXJzZXJzLzVlLWpzb24vaGVscGVycy9mcm9udG1hdHRlci50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL3NwZWxscy50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL3NwZWNpZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtanNvbi9jbGFzc2VzLnRzIiwgInNyYy9wYXJzZXJzLzVlLWpzb24vcnVsZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtanNvbi9mZWF0cy50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2JhY2tncm91bmRzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaW5zdGFsbGVyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9zb3VyY2VNYXAudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9oZWxwZXJzL3RhZ1JlcGxhY2VyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9tYXJrZG93blRhYmxlLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9mb3JtYXRFbnRyeS50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2Jlc3RpYXJ5LnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaXRlbXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9oZWxwZXJzL2Zyb250bWF0dGVyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvc3BlbGxzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvc3BlY2llcy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2NsYXNzZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9ydWxlcy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2ZlYXRzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvYmFja2dyb3VuZHMudHMiLCAic3JjL3J1bGVzZXRJbnN0YWxsZXIudHMiLCAic3JjL2N1c3RvbUluc3RhbGxNb2RhbC50cyIsICJzcmMvZmlsZUNhY2hlTWFuYWdlci50cyIsICJzcmMvYmFja3VwL0JhY2t1cE1hbmFnZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7XG4gIEFwcCxcbiAgUGx1Z2luLFxuICBOb3RpY2UsXG4gIE1vZGFsLFxuICBTZXR0aW5nLFxuICBURm9sZGVyLFxuICBURmlsZSxcbiAgVmF1bHRcbn0gZnJvbSAnb2JzaWRpYW4nOyBcblxuaW1wb3J0IHsgVG9vbGtpdFNldHRpbmdzVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBUb29sa2l0RmlsZUNhY2hlTWFuYWdlciB9IGZyb20gJy4vZmlsZUNhY2hlTWFuYWdlcic7XG5pbXBvcnQgdHlwZSB7IFRvb2xraXRGaWxlQ2FjaGVFbnRyeSB9IGZyb20gJy4vZmlsZUNhY2hlTWFuYWdlcic7XG5pbXBvcnQgeyBCYWNrdXBNYW5hZ2VyIH0gZnJvbSAnLi9iYWNrdXAvQmFja3VwTWFuYWdlcic7XG5pbXBvcnQgeyBzaG93Q3VzdG9tSW5zdGFsbE1vZGFsIH0gZnJvbSAnLi9jdXN0b21JbnN0YWxsTW9kYWwnO1xuaW1wb3J0IHsgQVZBSUxBQkxFX0VESVRJT05TIH0gZnJvbSAnLi9lZGl0aW9ucyc7XG5pbXBvcnQgeyBpbXBvcnRSdWxlc2V0RGF0YSB9IGZyb20gJy4vcnVsZXNldEluc3RhbGxlcic7XG5cbmNvbnN0IGxvYWRpbmdJY29uID0gXG4nZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgK1xuJ2lWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFORUFBQURSQ0FZQUFBQlNPbGZ2QUFBQUNYQklXWE1BQUJjUkFBQVhFUUhLSnZNL0FBQUw1a2xFUVZSNG5PM2RUNndkWlJuSDhWOWh5Z3VGWWx0S1NnWHhGQWhvUXFVVVFpQkd1Qmd4RVRHNnFVRmN0QnBOM05iRXVEQ1IyOFQ0Snk1QWpRa0xFMHQwb1NaR2RPWEMySU5LTUJyTjNZQUxHemtRSUVxVVhyRkNYNXdXRjJkTWpNN3puTjczbVpsN3p1MzNrNXpOUEpsMzNudlAvZlZNbnZQMm5VM0MvNmxTT2lUcFlNZkRIcTV6WHVsNFRNeUJhcjBuTUtkR2twWTZIbk5ieCtOaFRweTMzaE1BRmgwaEFvSUlFUkJFaUlBZ1FnUUUwWjFidTZPU0hqVnFCeVVkTW1vUFZTbXQ5akdoTm5YT2R3OTFyWE1kSVZxN1ordWN4MjJGS3FVbDU3eDl2Y3dHNjQ3Yk9TQ0lFQUZCaEFnSUlrUkFFQ0VDZ3VqT0RlZXdwSkpWM0xkSTJtN1VEa2k2cXExUXBYU3M0RnEweGdzUW91R3NXSzF4VDVWU0pXbVhVZjZIcE5OR2JXbXQxMElaYnVlQUlFSUVCQkVpSUlnUUFVR0VDQWlpTzllaE91ZGxTY3NkRC9zNWxYWGFySlhta3ZRSHExQ2w5RWJCdGNibmNtdWNUeUlnaUJBQlFZUUlDQ0pFUUJBaEFvSUlFUkMwYWIwbnNHaXFsSllsUGRqeHNQZElldHlvMVhYT3JXM25acVgya25IZVc1enJmZE9wdmRPcFBXd2MzeVBwNDBadHc3ZS8rU1FDZ2dnUkVFU0lnQ0JDQkFRUklpQ0lFQUZCRzdyRjNXenJXN1JoeHh5NXUyUnZCaytWMG5WV3JjNzV1SFBlQWFza2FZdFJ1MEhTWjR6YWhtaC84MGtFQkJFaUlJZ1FBVUdFQ0FnaVJFRFFRdXl4VUtXMFRXVVB5UnBKR25jNm1YNDZtamRKMm1iVTlsVXBXZWV0MURtWFBIM3Z0WUp6cE9tT3EyMHVrblNaVVh0Vjluc3djUjZNdGxyblhMTHQ4dUFXb3NVZGFGVjMza0t0VWpwUDl1L04rMzJla1dSdEFuSk0wbDBGMCttOC9lMnBVaG9acGQyUzdqTnF6OVE1ZjhzWWIwbjIrN293N1c5dTU0QWdRZ1FFRVNJZ2lCQUJRWVFJQ0pxYkZ2ZU1OdlpJWmExcXMwWGFkSnBHQldOdWt0K0ZzMnBubkhQZTVOUldKRmx0N0pMMnRxcVUzdWFVVHptMVM0emptNTI1bkhUR1cxVlorM3RTNXp4eHhoM1UzTFM0aDI1MzlyVGhTQi82V01YOWJhZjhuRlA3blhIOGpLVFhqZHFKT3VmZm50WEUvc3VNdjRjanpiN25jNEhiT1NDSUVBRkJoQWdJSWtSQUVDRUNnZ1p2Y1R0dHk1SHNkcWZYcWk1ZDRTM25lcDZSeWxyakhxK05uYXFVcmpacUp5WFZiWVU2NTFlYzYzbnYrOGlwV1ZzZG45WjB0WFliYng0ZXIvM3QvUjBOM3Y0ZXZNWHRQTTZ3cUkwZFdPRmQxQ2J0cVRWdXRyR3JsRDRxeVFxUkdiNDY1eWV0aTFVcFBlYk01WU5PYldRY1AxWG4vQmZudkU3TmVBOEdiMzl6T3djRUVTSWdpQkFCUVlRSUNDSkVRRkF2TFc2bi9TaDEzOFllT1dONkpnWG4vT2M4NjNvajJSMnMwdFhZdXlWZFk5VE95RmdsWFNWN2R4TkpPNTNhRTA3dGR1UDRTNUlHNjg3Tm03NitKekpiem5YT0pXMzFmYzZZZzI1b1VlZDhWTkxSdHRxTTF1dmh3dFhZNzVmOVNNaytXTHYyU05MZmpPTmpMZjZlNThXNG5RT0NDQkVRUklpQUlFSUVCQkVpSUtpWEJhak9JbE96TzFlbHRGWFRwNnExdVVYU0kwWnRicmFiYlZyNzFsek0zOGxac042bnlKaVdyemkxenhhTU4yazZtbXZTdE9ndk44cjdtOWRhamZ2WWRubHVkdnVSdEZYU3JVYnQraUVuRXZDNHBGOFl0WityYkwvdGQ4ditMd2h2MURuM0VTVExjdHZCV1p2TXlQaEtZSVlrNlNxajl2czY1NThZYzFtV3Y4cCtYREFYRjdkelFCQWhBb0lJRVJCRWlJQWdRZ1FFRlhmbm1pNkk1WWh6bnRXdXZVejIwOVpPU3ZxU1VYdkdtY2Q2c0xwbFIxVysydHdhYzhqT25HY2kvejFmdHM1ejJ0OVowdk5HN1pJcUphdVR1OXVhUjErS3Z5Y3ErUzZvT2MrcUxXbmFCbTd6SzBuM0dyWFRkYzdXVGpOWVozM3NzZDRFNkJhamZKL3NmNHg3MmNTRTJ6a2dpQkFCUVlRSUNDSkVRQkFoQW9MV1l3SHFrbkhjMjAvYmV4S2I5eGhIYkV3dlN6cHUxQ2FTWGpCcSs1MTIrOUhTUGJ6bktVUWo1NXd6ZGM2NSs2bGdRYjJzNlNiNmJaNlYvZjNTZmtrZk1HcGpGZTRBeGUwY0VFU0lnQ0JDQkFRUklpQ0lFQUZCYm5jdXNGTDdSdWM4YTUrQlZXZk1pVE1lemoybm5OclRrbjVtMU82VWRHWFhrNW5WNGpZM2ZKaXhVdnQrWjB3clJPT2hIeE9JeFZUbmZFcEdrS3FVbnBiOS9OaXJKTDJyNi9sd093Y0VFU0lnaUJBQlFZUUlDQ0pFUUZCZkMxQ3RQYlZ4N2xtUnZULzVxRXJKMm45aHBjNzVjRnVoU3VtUXBJUEdlUmMycnpaWFdKT002Q3RFVzNzYUZ3dW16bmxWeGk1SHpTWW1Td1hEamdyUDZ3VzNjMEFRSVFLQ0NCRVFSSWlBSUVJRUJQWFZuYnV6cDNFQnlkL1gvS2JtMVdhZnBKdU4ya05WU3F0RzdYQ2Q4NG8xbWI1Q3RMT25jUUUxdS9KTTJtck5IdkdYR3FlT25HRzkzYWEyZWZQaGRnNElJa1JBRUNFQ2dnZ1JFRVNJZ0tDK3VuTW5leG9YbU9XTTdDMkcvK1NjZDdObWRPRXNmWVdvN21sYzRHeFlqMEw5cDZTWGpKcjF3SVNadUowRGdnZ1JFRVNJZ0NCQ0JBUVJJaUNvcis2Y3RZMHIwTGY5a2o1cDFEWkx1c0NvYlMrOVlGOGhzdnIwUU4rMlM5b3o1QVc1blFPQ0NCRVFSSWlBSUVJRUJCRWlJS2l2N3R3UG5ScWJtS0JQWDVmMEhhTjJ1ZXo5UDc0b2FXL0pCZmtrQW9JSUVSQkVpSUFnUWdRRUVTSWdpQkFCUVgyMXVIL2sxTDVnSEwrdDJRSzJ6YmpPMlhwa0llWlk4elE4NjVHUzR6cm5UUjFmY3F1a0s0M2F4eVFkNnZoNmZCSUJVWVFJQ0NKRVFCQWhBb0lJRVJCRWlJQWd0OFh0dFIrZGR2U3M4MzVnbEhaTHV0ZW9YVkNsdE11b3ZWN25mTUs2SGphZUtxVmxTUTkyUE96ZGRjN2praFA1SkFLQ0NCRVFSSWlBSUVJRUJCRWlJSWdRQVVGOXJlSTIxVGwvb25VaUtWMHQ2UUhqdEdzay9kbW9qU1d4d25zZDliRlN1MHBKa3F6em5wTDBmYU8yVTlKbFJ1Mks1dFVwUG9tQUlFSUVCQkVpSUlnUUFVR0VDQWlLZE9mRzVxRFRiazByWjVGZmx2U2NVZnVYYzcySmM3M1ZPdWNWYXk1WUcrZjNQSkw5L3BUKy9pK1F0TU9vYlpOMGtWSGJJdWtTWjh6T2RiMUpoS1R5RmQ2RjExcVMzMTZsL2QyUklUZVNhVmJ0MzJPVTc1QjB1MUhiM2J6V2lsWGN3SG9oUkVBUUlRS0NDQkVRUklpQW9MNFdvUDdTdkdEMzdlaFZsYlcvUFpNNjUwbkJlUXR2eHU5cmJCdzMzN2NxcFcyUzloVk1aYnVrdHh1MTNaSXVObXFiblRFbnphdk42bG5OcWtWZkxXN3JCNVNrazhieFB0cWtTN0xiMzU0amRjN0xYYzVsVVhUOTlVVGdQZkNjbGxSYmw1UjB2bEhyNVgzbGRnNElJa1JBRUNFQ2dnZ1JFRVNJZ0tDK1d0eW5uZHJZT082MW8xK1Y5THhSZTczTythOUd6V3QvdXhhaE5WNmx0RS9URmMxZEduYzgzaW5acS9QUDEzVFZkWnRLMDZmZVdhd1BnQmNrdldqVXJMK2hrRjVhM0NWbXRFTC9LT2toby9aaW5mT1BPNTdMc3NyMmVoNjBOVjZsZEV6U1VwZGo5ckRLZm8razFzMXBOQTNKRFVadGg2UmJDeTc1TlVrUEc3WFZPdWZpNzRNczNNNEJRWVFJQ0NKRVFCQWhBb0lJRVJBMCtEYkNqbGNrL2RxcFhXL1VkbFFwL2IzZ2VsNDdlcUpoVytPbEp1cStKVzBxL05sMnlkNjY5MkxabTVGNDdlMko3TlhZeHpWdHE3ZXhGcTJHekZPTCswSk5mK0Z0YnBmMHZZNHYyWGs3dXFmSElIcUtOOWNvNGEzd2RtUkoxdmQ0U2RPOXM5ZHFybGJaY3pzSEJCRWlJSWdRQVVHRUNBZ2lSRURRUExXNGEwbFdxL29wU1VlTTJsc2xIVEpxTDB2NmpWV3JVckxhNW51YlY1dXgweEd6anZkbFVuSlMwMFZzTmFQcjlWM2p1TGZsYnlYcFVxTm03WVVnVFgrMlI0M2EyRGx2Y0hQVDRpNDFZL1gzY1VuZk1Hb25tbGViQnlSOXhLak5WWHUxUk9sbUpGVks3elZLNzVEMDFlaTgvc2ZDN0tQTzdSd1FSSWlBSUVJRUJCRWlJSWdRQVVIejFPSXVOWkhkL3Q0cTZYMUc3VFhacTMxdkxKbElsZElPMmF1Uzc1Rzl3UFpveVFZblZVcUhOSDNVWTV0SDFqcGVNK2F5VTdhNmV0WWNacG5JYm1OUENzY2MzTUtIcVBualcyNnJOZTN2VHc4NG5SMlNyalZxbjlLMEZkeG1yTEkvbW9PeU55cDVyR0E4eVYrRi9sUGp1UFVQeHl5VFJmKzZRT0oyRGdnalJFQVFJUUtDQ0JFUVJJaUFvSVh2enMwd2tkMytsdXdGdUhjMXI5YWEwd2IyOWlDd1ZqSkwwcFlxSmF2K0h0bXQ4VGM3WTNwN2RIdjdWZHp2MUs0empsL2tuRFBSQm1oamV4WitGWGVwS3FWTnNuLytCeVY5dm1EWTQ4MnJ6VzJ5VzhFZmx2U2tVZnV5N1ArV2NhM3NaNWQreURndStXSHZkRjl6TGRCcTdGTGN6Z0ZCaEFnSUlrUkFFQ0VDZ2dnUkVMVFJXOXl6V0YycVkwN05zMWYySWxPdkRYeEEwaDNPbUZhTGU3TXpwdGVxTHVWOVhXQ1pkRDJKZVhQT3RyajdzQTU3Y1ErcTYwZFJiaFRjemdGQmhBZ0lJa1JBRUNFQ2dnZ1JFSFN1dDdpN05sN3ZDV0I0L3dZUkJibjE5OC9ycEFBQUFBQkpSVTVFcmtKZ2dnPT0nXG4gXG5jbGFzcyBJbnN0YWxsaW5nTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7IHN1cGVyKGFwcCk7IH1cbiAgb25PcGVuKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29uc3QgaW1nID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2ltZycsIHtcbiAgICAgIGF0dHI6IHsgc3JjOiBsb2FkaW5nSWNvbiwgYWx0OiAnSW5zdGFsbGluZ1x1MjAyNicgfSxcbiAgICB9KTtcbiAgICBPYmplY3QuYXNzaWduKGltZy5zdHlsZSwge1xuICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgIG1hcmdpbjogJzFlbSBhdXRvIDAuNWVtJyxcbiAgICAgIHdpZHRoOiAnMTAwcHgnLFxuICAgICAgaGVpZ2h0OiAnMTAwcHgnLFxuICAgIH0pO1xuICAgIGltZy5hbmltYXRlKFxuICAgICAgW1xuICAgICAgICB7IHRyYW5zZm9ybTogJ3JvdGF0ZSgwZGVnKScgfSxcbiAgICAgICAgeyB0cmFuc2Zvcm06ICdyb3RhdGUoLTM2MGRlZyknIH1cbiAgICAgIF0sXG4gICAgICB7XG4gICAgICAgIGR1cmF0aW9uOiAxNTAwLCAgICAgIC8vIG9uZSBhbmQgYSBoYWxmIHNlY29uZHMgcGVyIHJldm9sdXRpb25cbiAgICAgICAgaXRlcmF0aW9uczogSW5maW5pdHksXG4gICAgICAgIGVhc2luZzogJ2xpbmVhcidcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IHR4dCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IHRleHQ6ICdJbnN0YWxsaW5nXHUyMDI2JywgY2xzOiAnbW9kLXF1aWV0JyB9KTtcbiAgICB0eHQuc3R5bGUuY3NzVGV4dCA9XG4gICAgICAnZm9udC1zdHlsZTogaXRhbGljOyBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMWVtOyc7XG4gIH1cbiAgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICB9IFxufVxuXG5cbmludGVyZmFjZSBQcmV2aWV3SXRlbSB7XG4gIGZpbGVQYXRoOiBzdHJpbmc7XG4gIGFjdGlvbjogc3RyaW5nO1xuICBzZWxlY3RlZDogYm9vbGVhbjsgXG4gIGlzRm9sZGVyPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFRvb2xraXRTZXR0aW5ncyB7XG4gIGluc3RhbGxlZFZlcnNpb246IHN0cmluZztcbiAgbGF0ZXN0VG9vbGtpdFZlcnNpb24/OiBzdHJpbmc7XG4gIGN1c3RvbWl6ZVVwZGF0ZXM6IGJvb2xlYW47XG4gIHVwZGF0ZVRhcmdldHM6IHtcbiAgICB0b29sczogYm9vbGVhbjtcbiAgICB0b29sc1BhdGg/OiBzdHJpbmc7XG4gICAgdGVtcGxhdGVzOiBib29sZWFuO1xuICAgIHRlbXBsYXRlc1BhdGg/OiBzdHJpbmc7XG4gICAgb21uaW5vbWljb246IGJvb2xlYW47XG4gICAgb21uaW5vbWljb25QYXRoPzogc3RyaW5nO1xuICAgIHNwZWxsYm9vazogYm9vbGVhbjtcbiAgICBzcGVsbGJvb2tQYXRoOiBzdHJpbmc7XG4gIH07XG4gIGxhdGVzdERlZmF1bHRzPzoge1xuICAgIHRvb2xzPzogc3RyaW5nO1xuICAgIHRlbXBsYXRlcz86IHN0cmluZztcbiAgICBvbW5pbm9taWNvbj86IHN0cmluZztcbiAgICBzcGVsbGJvb2s/OiBzdHJpbmc7XG4gIH07XG4gIGxhc3RDaGVja2VkPzogc3RyaW5nO1xuICBsYXN0Rm9yY2VVcGRhdGU/OiBzdHJpbmc7XG4gIGZpbGVDYWNoZT86IFJlY29yZDxzdHJpbmcsIFRvb2xraXRGaWxlQ2FjaGVFbnRyeT47XG4gIHBhdGhPdmVycmlkZXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBiYWNrdXBGaWxlcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGJhY2t1cFBhdGg/OiBzdHJpbmc7XG4gIGF1dG9CYWNrdXA/OiBib29sZWFuO1xuICBsYXN0QmFja3VwVGltZT86IHN0cmluZztcbiAgYmFja3VwRXJyb3I/OiBzdHJpbmc7XG4gIGN1c3RvbVBhdGhzOiBDdXN0b21QYXRoRW50cnlbXTtcbiAgYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZTogYm9vbGVhbjtcbiAgbmVlZHNJbnN0YWxsOiBib29sZWFuO1xuICBoaWdobGlnaHRFbmFibGVkOiBib29sZWFuO1xuICBoaWdobGlnaHRDb2xvckxpZ2h0OiBzdHJpbmc7XG4gIGhpZ2hsaWdodENvbG9yRGFyazogc3RyaW5nO1xuICBydWxlc2V0Q29tcGVuZGl1bTogc3RyaW5nO1xuICBydWxlc2V0UmVmZXJlbmNlOiBzdHJpbmdbXTtcbiAgcmVwYXJzZUdhbWVzZXRzOiBib29sZWFuO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBUb29sa2l0U2V0dGluZ3MgPSB7XG4gIGluc3RhbGxlZFZlcnNpb246ICcxLjAuMCcsXG4gIGN1c3RvbWl6ZVVwZGF0ZXM6IGZhbHNlLFxuICB1cGRhdGVUYXJnZXRzOiB7XG4gICAgdG9vbHM6IHRydWUsXG4gICAgdG9vbHNQYXRoOiAnVG9vbHMnLFxuICAgIHRlbXBsYXRlczogdHJ1ZSxcbiAgICB0ZW1wbGF0ZXNQYXRoOiAnRXh0cmFzL1RlbXBsYXRlcycsXG4gICAgb21uaW5vbWljb246IHRydWUsXG4gICAgb21uaW5vbWljb25QYXRoOiAnQWR2ZW50dXJlcy9PbW5pbm9taWNvbi5tZCcsXG4gICAgc3BlbGxib29rOiB0cnVlLFxuICAgIHNwZWxsYm9va1BhdGg6ICdDb21wZW5kaXVtL1NwZWxscy9fU3BlbGxib29rLm1kJyxcbiAgfSxcbiAgbGF0ZXN0RGVmYXVsdHM6IHVuZGVmaW5lZCxcbiAgcGF0aE92ZXJyaWRlczoge30sXG4gIGJhY2t1cEZpbGVzOiB7fSxcbiAgYmFja3VwUGF0aDogJycsXG4gIGF1dG9CYWNrdXA6IGZhbHNlLFxuICBsYXN0QmFja3VwVGltZTogJycsXG4gIGJhY2t1cEVycm9yOiAnJyxcbiAgY3VzdG9tUGF0aHM6IFtdLFxuICBhdXRvQmFja3VwQmVmb3JlVXBkYXRlOiB0cnVlLFxuICBuZWVkc0luc3RhbGw6IHRydWUsXG4gIGhpZ2hsaWdodEVuYWJsZWQ6IGZhbHNlLFxuICBoaWdobGlnaHRDb2xvckxpZ2h0OiAncmdiKDEwNywgMTQ2LCAxMjApJyxcbiAgaGlnaGxpZ2h0Q29sb3JEYXJrOiAncmdiKCA1MCwgIDcwLCAgNTApJyxcbiAgcnVsZXNldENvbXBlbmRpdW06IFwiXCIsXG4gIHJ1bGVzZXRSZWZlcmVuY2U6IFtdLFxuICByZXBhcnNlR2FtZXNldHM6IHRydWUsXG59O1xuXG5pbnRlcmZhY2UgQ3VzdG9tUGF0aEVudHJ5IHtcbiAgdmF1bHRQYXRoOiBzdHJpbmc7XG4gIG1hbmlmZXN0S2V5OiBzdHJpbmc7XG4gIGRvVXBkYXRlOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1hbmlmZXN0RmlsZUVudHJ5IHtcbiAgcGF0aDogc3RyaW5nO1xuICBrZXk6IHN0cmluZztcbiAgY3VzdG9tT3ZlcnJpZGU/OiBib29sZWFuO1xuICBkaXNwbGF5TmFtZT86IHN0cmluZztcbiAgb3B0aW9uYWw/OiBib29sZWFuOyAvLyBcdTIxOTAgbWFyayBvcHRpb25hbCBmaWxlcy9mb2xkZXJzIGlmIHlvdSB3aXNoXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5zdGFsbE9wdGlvbnMge1xuXHRjb21wZW5kaXVtOiBzdHJpbmc7XG5cdHJlZmVyZW5jZXM6IHN0cmluZ1tdO1xuICB9XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHJlcXVpcmVzR3JhcGg6IE1hcDxzdHJpbmcsIHN0cmluZ1tdPjtcbiAgcHVibGljIHNldHRpbmdzVGFiOiBUb29sa2l0U2V0dGluZ3NUYWI7XG4gIHNldHRpbmdzOiBUb29sa2l0U2V0dGluZ3M7XG4gIGZpbGVDYWNoZU1hbmFnZXI6IFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyO1xuICBtYW5pZmVzdENhY2hlOiB7XG4gICAgZmlsZXM6IE1hbmlmZXN0RmlsZUVudHJ5W107XG4gICAgZm9sZGVyczogTWFuaWZlc3RGaWxlRW50cnlbXTtcbiAgfSA9IHsgZmlsZXM6IFtdLCBmb2xkZXJzOiBbXSB9O1xuICBjaGFuZ2Vsb2c6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIGF1dG9DaGVja0ludGVydmFsOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBvbGRQYXRoc0J5R2l0aHViOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gIHByaXZhdGUgc3R5bGVFbDogSFRNTFN0eWxlRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG4gIGJhY2t1cE1hbmFnZXI6IEJhY2t1cE1hbmFnZXI7XG4gIGV4Y2x1ZGVkUGF0aHMgPSBbXG4gICAgJy5vYnNpZGlhbicsXG4gICAgJy5EU19TdG9yZScsXG4gICAgJy5naXRpZ25vcmUnLFxuICAgICcuZ2l0YXR0cmlidXRlcycsXG4gICAgJy5naXRodWInLFxuICAgICdSRUFETUUubWQnLFxuICAgICcudmVyc2lvbi5qc29uJyxcbiAgICAncGx1Z2lucycsXG4gICAgJ0NvbXBlbmRpdW0nXG4gIF07XG5cbiAgcHVibGljIHBlbmRpbmdSdWxlc2V0S2V5OiBzdHJpbmcgPSAnJztcbiAgcHVibGljIHBlbmRpbmdSZWZlcmVuY2VLZXlzOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEhFTFBFUlMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgLyoqIEdpdmVuIGEgR2l0SHViIHBhdGgsIHJldHVybiB0aGUgb3ZlcnJpZGRlbiB2YXVsdCBwYXRoIG9yIHRoZSBvcmlnaW5hbC4gKi9cbiAgcmVzb2x2ZVZhdWx0UGF0aChnaXRodWJQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZChcbiAgICAgIChjKSA9PlxuICAgICAgICBjLm1hbmlmZXN0S2V5ID09PSBnaXRodWJQYXRoIHx8XG4gICAgICAgIGMubWFuaWZlc3RLZXkgPT09IHRoaXMua2V5Rm9yKGdpdGh1YlBhdGgpXG4gICAgKTtcbiAgICByZXR1cm4gY3VzdG9tPy52YXVsdFBhdGggPz8gZ2l0aHViUGF0aDtcbiAgfVxuXG4gIC8qKiBDb252ZXJ0IFx1MjAxQ3NvbWUvZm9sZGVyL2ZpbGUubWRcdTIwMUQgXHUyMTkyIFx1MjAxQ3NvbWUtZm9sZGVyLWZpbGVcdTIwMUQgKGxvd2VyY2FzZWQsIG5vIGV4dGVuc2lvbikuICovXG4gIGtleUZvcihwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBwYXRoXG4gICAgICAucmVwbGFjZSgvWy9cXFxcXS9nLCAnLScpXG4gICAgICAucmVwbGFjZSgvXFwuW14uXSskLywgJycpXG4gICAgICAudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGlzRXhjbHVkZWQocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZXhjbHVkZWRQYXRocy5zb21lKFxuICAgICAgKGV4KSA9PlxuICAgICAgICBwYXRoID09PSBleCB8fFxuICAgICAgICBwYXRoLnN0YXJ0c1dpdGgoYCR7ZXh9L2ApIHx8XG4gICAgICAgIHBhdGguaW5jbHVkZXMoYC8ke2V4fS9gKSB8fFxuICAgICAgICBwYXRoLmVuZHNXaXRoKGAvJHtleH1gKSB8fFxuICAgICAgICBwYXRoLmluY2x1ZGVzKGAvJHtleH1gKVxuICAgICk7XG4gIH1cbiAgXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDVVNUT00gSU5TVEFMTCBMT0dJQyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBwdWJsaWMgYXN5bmMgcGVyZm9ybUN1c3RvbUluc3RhbGwoXG4gICAgdG9JbnN0YWxsOiB7IHBhdGg6IHN0cmluZzsgaXNGb2xkZXI6IGJvb2xlYW4gfVtdXG4gICk6IFByb21pc2U8dm9pZD4ge1xuXHRcdFxuXHQvLyBvcHRpb25hbCBiYWNrdXAgLy9cblx0Y29uc3QgYWxsRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpXG5cdC5maWx0ZXIoKGYpOiBmIGlzIFRGaWxlID0+IGYgaW5zdGFuY2VvZiBURmlsZSlcblx0Lm1hcCgoZikgPT4gZi5wYXRoKTtcblx0Y29uc3Qgbm9uTWFya2VyRmlsZXMgPSBhbGxGaWxlcy5maWx0ZXIoKHApID0+IHAgIT09ICcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJyk7XG5cblx0aWYgKG5vbk1hcmtlckZpbGVzLmxlbmd0aCA+IDAgJiYgdGhpcy5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlKSB7XG5cdGNvbnN0IGZvbGRlciA9IGF3YWl0IHRoaXMuYmFja3VwTWFuYWdlci5iYWNrdXBWYXVsdE1pcnJvcigncHJlLWN1c3RvbS1pbnN0YWxsJyk7XG5cdG5ldyBOb3RpY2UoYEJhY2t1cCBiZWZvcmUgY3VzdG9tXHUyMDEwaW5zdGFsbCBjcmVhdGVkIGF0OiAke2ZvbGRlcn1gKTtcblx0fVxuICAgIC8vIDIpIExvb3Agb3ZlciBlYWNoIHNlbGVjdGVkIHBhdGhcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRvSW5zdGFsbCkge1xuICAgICAgaWYgKGVudHJ5LmlzRm9sZGVyKSB7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihlbnRyeS5wYXRoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgQ3JlYXRlZCBmb2xkZXI6ICR7ZW50cnkucGF0aH1gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmlsZSBcdTIxOTIgZmluZCBNYW5pZmVzdEZpbGVFbnRyeVxuICAgICAgICBjb25zdCBtYW5pZmVzdEVudHJ5ID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoXG4gICAgICAgICAgKGYpID0+IGYucGF0aCA9PT0gZW50cnkucGF0aFxuICAgICAgICApO1xuICAgICAgICBpZiAoIW1hbmlmZXN0RW50cnkpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBmaW5kIG1hbmlmZXN0IGVudHJ5IGZvciBmaWxlOiAke2VudHJ5LnBhdGh9YCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmV1c2UgeW91ciBleGlzdGluZyBcdTIwMUN1cGRhdGVFbnRyeUZyb21NYW5pZmVzdFx1MjAxRCAoZm9yY2UgPSB0cnVlKVxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUVudHJ5RnJvbU1hbmlmZXN0KG1hbmlmZXN0RW50cnksIHRydWUpO1xuICAgICAgfVxuICAgIH1cblx0XHQvLyAzKSBVcGRhdGUgLnZlcnNpb24uanNvbiBhbmQgc2V0dGluZ3Ncblx0XHRhd2FpdCB0aGlzLnVwZGF0ZVZlcnNpb25GaWxlKCk7XG5cdFx0dGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uID1cblx0XHR0aGlzLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uID8/IHRoaXMuc2V0dGluZ3MuaW5zdGFsbGVkVmVyc2lvbjtcblx0XHR0aGlzLnNldHRpbmdzLmxhc3RGb3JjZVVwZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblx0XHR0aGlzLnNldHRpbmdzLm5lZWRzSW5zdGFsbCA9IGZhbHNlO1xuXHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cblx0XHQvLyA0KSBDcmVhdGUgdGhlIGhpZGRlbiBtYXJrZXIgZmlsZVxuXHRcdGNvbnN0IG1hcmtlclBhdGggPSAnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCc7XG5cdFx0aWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobWFya2VyUGF0aCkpKSB7XG5cdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG1hcmtlclBhdGgsICcnKTtcblx0XHR9XG5cblx0XHQvLyA1KSBSZVx1MjAxMGVuYWJsZSBoaWdobGlnaHRpbmcgKGFsd2F5cyB0dXJuIGl0IGJhY2sgb24pXG5cdFx0dGhpcy5zZXR0aW5ncy5uZWVkc0luc3RhbGwgPSBmYWxzZTtcblx0XHR0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQgPSB0cnVlO1xuXHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0dGhpcy5lbmFibGVIaWdobGlnaHQoKTtcblx0XHRcblx0XHRpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuXHRcdCAgdGhpcy5zZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG5cdFx0fVxuXHRcdG5ldyBOb3RpY2UoJ1x1MjcwNSBDdXN0b20gaW5zdGFsbCBjb21wbGV0ZSBcdTIwMjYnKTtcblx0fVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBISUdITElHSFRJTkcgKExpZ2h0ICsgRGFyayBNb2RlKSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBwcml2YXRlIGdldCBoaWdobGlnaHRDU1MoKTogc3RyaW5nIHtcbiAgICBjb25zdCBsaWdodCA9IHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JMaWdodC50cmltKCkgfHwgJ3JnYmEoMTA3LDE0NiwxMjAsMSknO1xuICAgIGNvbnN0IGRhcmsgPSB0aGlzLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yRGFyay50cmltKCkgfHwgJ3JnYmEoIDUwLCA3MCwgNTAsMSknO1xuXG4gICAgY29uc3QgZmlsZVNlbGVjdG9ycyA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5tYXAoKGYpID0+IHtcbiAgICAgIGNvbnN0IGVzY2FwZWQgPSBmLnBhdGgucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xuICAgICAgcmV0dXJuIGAubmF2LWZpbGUtdGl0bGVbZGF0YS1wYXRoPVwiJHtlc2NhcGVkfVwiXWA7XG4gICAgfSk7XG5cbiAgICBjb25zdCBmb2xkZXJTZWxlY3RvcnMgPSB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5tYXAoKGYpID0+IHtcbiAgICAgIGNvbnN0IGVzY2FwZWQgPSBmLnBhdGgucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xuICAgICAgcmV0dXJuIGAubmF2LWZvbGRlci10aXRsZVtkYXRhLXBhdGg9XCIke2VzY2FwZWR9XCJdYDtcbiAgICB9KTtcblxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtcbiAgICAgIGA6cm9vdCB7YCxcbiAgICAgIGAgIC0tdnZ1bmRlcmxvcmUtdG9vbGtpdC1oaWdobGlnaHQ6ICR7bGlnaHR9O2AsXG4gICAgICBgfWAsXG4gICAgICBgYCxcbiAgICAgIGBib2R5LnRoZW1lLWRhcmsge2AsXG4gICAgICBgICAtLXZ2dW5kZXJsb3JlLXRvb2xraXQtaGlnaGxpZ2h0OiAke2Rhcmt9O2AsXG4gICAgICBgfWAsXG4gICAgICBgYCxcbiAgICBdO1xuXG4gICAgaWYgKGZpbGVTZWxlY3RvcnMubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke2ZpbGVTZWxlY3RvcnMuam9pbignLCAnKX0ge2ApO1xuICAgICAgbGluZXMucHVzaChgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS12dnVuZGVybG9yZS10b29sa2l0LWhpZ2hsaWdodCk7YCk7XG4gICAgICBsaW5lcy5wdXNoKGAgIGJvcmRlci1yYWRpdXM6IDNweDtgKTtcbiAgICAgIGxpbmVzLnB1c2goYH1gKTtcbiAgICAgIGxpbmVzLnB1c2goYGApO1xuICAgIH1cblxuICAgIGlmIChmb2xkZXJTZWxlY3RvcnMubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke2ZvbGRlclNlbGVjdG9ycy5qb2luKCcsICcpfSB7YCk7XG4gICAgICBsaW5lcy5wdXNoKGAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXZ2dW5kZXJsb3JlLXRvb2xraXQtaGlnaGxpZ2h0KTtgKTtcbiAgICAgIGxpbmVzLnB1c2goYCAgYm9yZGVyLXJhZGl1czogM3B4O2ApO1xuICAgICAgbGluZXMucHVzaChgfWApO1xuICAgICAgbGluZXMucHVzaChgYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcHVibGljIGVuYWJsZUhpZ2hsaWdodCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdHlsZUVsKSByZXR1cm47XG4gICAgdGhpcy5zdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICB0aGlzLnN0eWxlRWwuaWQgPSAndnZ1bmRlcmxvcmUtaGlnaGxpZ2h0LWluamVjdCc7XG4gICAgdGhpcy5zdHlsZUVsLnRleHRDb250ZW50ID0gdGhpcy5oaWdobGlnaHRDU1M7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlRWwpO1xuICB9XG5cbiAgcHVibGljIGRpc2FibGVIaWdobGlnaHQoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnN0eWxlRWwpIHJldHVybjtcbiAgICB0aGlzLnN0eWxlRWwucmVtb3ZlKCk7XG4gICAgdGhpcy5zdHlsZUVsID0gbnVsbDtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSRU1PVEUgQkFTRUxJTkUgQ0FDSElORyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBwdWJsaWMgYXN5bmMgZmV0Y2hSZW1vdGVCYXNlbGluZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDAxIGZldGNoUmVtb3RlQmFzZWxpbmUoKSBjYWxsZWQnKTtcblxuICAgIGlmICghdGhpcy5tYW5pZmVzdENhY2hlIHx8ICFBcnJheS5pc0FycmF5KHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykpIHtcbiAgICAgIGNvbnNvbGUud2FybignXHUyNkEwXHVGRTBGIG1hbmlmZXN0Q2FjaGUgaXMgbWlzc2luZyBvciBpbnZhbGlkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJhd1VybCA9IGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluLyR7ZW50cnkucGF0aH1gO1xuICAgICAgICBjb25zdCByZW1vdGVUZXh0ID0gYXdhaXQgKGF3YWl0IGZldGNoKHJhd1VybCkpLnRleHQoKTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWQgPSB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZW50cnkucGF0aCk7XG5cbiAgICAgICAgLy8gSWYgcmVtYXBwZWQsIHJlbW92ZSB0aGUgb2xkIGNhY2hlIGVudHJ5XG4gICAgICAgIGlmIChyZXNvbHZlZCAhPT0gZW50cnkucGF0aCkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5yZW1vdmVGcm9tQ2FjaGUoZW50cnkucGF0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUoXG4gICAgICAgICAgcmVzb2x2ZWQsXG4gICAgICAgICAgcmVtb3RlVGV4dCxcbiAgICAgICAgICBlbnRyeS5wYXRoLFxuICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmZXRjaCByYXcgYmFzZWxpbmUgZm9yICR7ZW50cnkucGF0aH1gLCBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnXHVEODNEXHVEQ0U2IEZpbmFsIGNhY2hlOicsIHRoaXMuZmlsZUNhY2hlTWFuYWdlci5nZXRDYWNoZSgpKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBNQVJLRVIgRklMRSBDSEVDS1MgKGZpcnN0XHUyMDEwcnVuIGRldGVjdGlvbikgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgcHJpdmF0ZSBhc3luYyBjaGVja01hcmtlckZpbGUoKSB7XG4gICAgY29uc3QgZGV2Rm9yY2UgPSAod2luZG93IGFzIGFueSkuZm9yY2VOZWVkc0luc3RhbGw7XG4gICAgaWYgKGRldkZvcmNlKSB7XG4gICAgICB0aGlzLnNldHRpbmdzLm5lZWRzSW5zdGFsbCA9IHRydWU7XG4gICAgICBjb25zb2xlLmxvZygnXHVEODNFXHVEREVBIERFViBNT0RFOiBGb3JjaW5nIG5lZWRzSW5zdGFsbCA9IHRydWUnKTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikgdGhpcy5zZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbWFya2VyUGF0aCA9ICcuVEVTVF92dnVuZGVybG9yZV9pbnN0YWxsZWQnO1xuICAgIGNvbnN0IG1hcmtlckV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlclBhdGgpO1xuICAgIHRoaXMuc2V0dGluZ3MubmVlZHNJbnN0YWxsID0gIW1hcmtlckV4aXN0cztcblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgbWFya2VyRXhpc3RzXG4gICAgICAgID8gJ1x1MjcwNSBNYXJrZXIgZmlsZSBmb3VuZCBcdTIxOTIgbmVlZHNJbnN0YWxsID0gZmFsc2UnXG4gICAgICAgIDogJ1x1RDgzRFx1REZFMSBNYXJrZXIgZmlsZSBOT1QgZm91bmQgXHUyMTkyIG5lZWRzSW5zdGFsbCA9IHRydWUnXG4gICAgKTtcblxuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgaWYgKHRoaXMuc2V0dGluZ3NUYWIpIHtcbiAgICAgIHRoaXMuc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBNQU5JRkVTVCBTWU5DIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIHN5bmNNYW5pZmVzdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICAgICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluL21hbmlmZXN0Lmpzb24nXG4gICAgICApO1xuICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIG1hbmlmZXN0OiAke3Jlcy5zdGF0dXNUZXh0fWApO1xuICAgICAgY29uc3QgbWFuaWZlc3QgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgdGhpcy5zZXR0aW5ncy5sYXRlc3REZWZhdWx0cyA9IG1hbmlmZXN0LmRlZmF1bHRQYXRocyB8fCB7fTtcbiAgICAgIHRoaXMubWFuaWZlc3RDYWNoZSA9IG1hbmlmZXN0O1xuXG4gICAgICBjb25zdCBtYW5pZmVzdENvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShtYW5pZmVzdCwgbnVsbCwgMik7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKCdtYW5pZmVzdC5qc29uJywgbWFuaWZlc3RDb250ZW50KTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdNYW5pZmVzdCBzeW5jZWQgYW5kIGxvY2FsIG1hbmlmZXN0IHVwZGF0ZWQuJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgbWFuaWZlc3Q6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIHN5bmMgbWFuaWZlc3QuJyk7XG4gICAgfVxuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFBMVUdJTiBMSUZFQ1lDTEUgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICB0aGlzLmJhY2t1cE1hbmFnZXIgPSBuZXcgQmFja3VwTWFuYWdlcih0aGlzLmFwcC52YXVsdCk7XG5cbiAgICB0aGlzLmZpbGVDYWNoZU1hbmFnZXIgPSBuZXcgVG9vbGtpdEZpbGVDYWNoZU1hbmFnZXIoXG4gICAgICB0aGlzLmFwcC52YXVsdCxcbiAgICAgIHRoaXMuc2V0dGluZ3MuZmlsZUNhY2hlID8/IHt9LFxuICAgICAgYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKVxuICAgICk7XG5cblxuICAgICAgY29uc3Qgb3JpZ0Vycm9yID0gY29uc29sZS5lcnJvci5iaW5kKGNvbnNvbGUpO1xuICBjb25zb2xlLmVycm9yID0gKG1zZz86IGFueSwgLi4ucmVzdDogYW55W10pID0+IHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgbXNnID09PSBcInN0cmluZ1wiICYmXG4gICAgICBtc2cuaW5jbHVkZXMoXCJDYW5ub3QgaW5kZXggZmlsZVwiKSAmJlxuICAgICAgbXNnLmluY2x1ZGVzKFwiRGF0YXZpZXdcIilcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgb3JpZ0Vycm9yKG1zZywgLi4ucmVzdCk7XG4gIH07XG5cbiAgICB0aGlzLnNldHRpbmdzVGFiID0gbmV3IFRvb2xraXRTZXR0aW5nc1RhYih0aGlzLmFwcCwgdGhpcyk7XG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKHRoaXMuc2V0dGluZ3NUYWIpO1xuXG4gICAgLy8gSW1tZWRpYXRlbHkgbG9hZCBhbnkgY2FjaGVkIG1hbmlmZXN0Lmpzb24uIElmIG5vdCBwcmVzZW50LCB3ZSdsbCBmZXRjaCBpbiBhIG1vbWVudC5cbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnbWFuaWZlc3QuanNvbicpO1xuICAgICAgdGhpcy5tYW5pZmVzdENhY2hlID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICAgIGNvbnNvbGUubG9nKCdcdTI3MDUgTG9hZGVkIG1hbmlmZXN0IGZyb20gdmF1bHQ6JywgdGhpcy5tYW5pZmVzdENhY2hlKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUud2FybignTWFuaWZlc3Qgbm90IGZvdW5kIGluIHZhdWx0OyB3aWxsIGZldGNoIGZyb20gR2l0SHViIHNob3J0bHkuJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIElmIGhpZ2hsaWdodGluZyB3YXMgT04gYmVmb3JlLCByZXN0b3JlIGl0IG5vdzpcblx0aWYgKHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCAmJiAhdGhpcy5zZXR0aW5ncy5uZWVkc0luc3RhbGwpIHtcblx0XHR0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuXHQgIH1cblxuICAgIC8vIERlZmVyIGhlYXZpZXIgdGFza3Mgc2xpZ2h0bHkgc28gVUkgaXNuXHUyMDE5dCBibG9ja2VkOlxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5zeW5jTWFuaWZlc3QoKTtcbiAgICAgIGF3YWl0IHRoaXMuc2hvd0luZGV4aW5nTW9kYWwoKTtcbiAgICAgIGF3YWl0IHRoaXMuY2hlY2tGb3JVcGRhdGVzKCk7XG5cbiAgICAgIC8vIEJ1aWxkIHJldmVyc2UgY2FjaGUgZm9yIFx1MjAxQ21vdmVkXHUyMDFEIGRldGVjdGlvblxuICAgICAgdGhpcy5vbGRQYXRoc0J5R2l0aHViID0gT2JqZWN0LmVudHJpZXMoXG4gICAgICAgIHRoaXMuZmlsZUNhY2hlTWFuYWdlci5nZXRDYWNoZSgpIGFzIFJlY29yZDxzdHJpbmcsIFRvb2xraXRGaWxlQ2FjaGVFbnRyeT5cbiAgICAgICkucmVkdWNlKChtYXAsIFt2YXVsdFBhdGgsIGVudHJ5XSkgPT4ge1xuICAgICAgICBtYXBbZW50cnkuZ2l0aHViUGF0aF0gPSB2YXVsdFBhdGg7XG4gICAgICAgIHJldHVybiBtYXA7XG4gICAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTtcblxuICAgICAgY29uc29sZS5sb2coJ1x1RDgzRFx1RENFNiBDYWNoZWQgRmlsZXM6JywgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmdldENhY2hlKCkpO1xuICAgIH0sIDI1MCk7XG5cbiAgICB0aGlzLnNjaGVkdWxlQXV0b1VwZGF0ZUNoZWNrKCk7XG5cbiAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgIHRoaXMuYXBwLnZhdWx0Lm9uKFwiZGVsZXRlXCIsICgpID0+XG4gICAgKHRoaXMuYXBwIGFzIGFueSkuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKFwiZGF0YXZpZXc6Y2xlYXItY2FjaGVcIikgICAgKVxuICApO1xuICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgdGhpcy5hcHAudmF1bHQub24oXCJyZW5hbWVcIiwgKCkgPT5cbiAgICAgICh0aGlzLmFwcCBhcyBhbnkpLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChcImRhdGF2aWV3OmNsZWFyLWNhY2hlXCIpXG4gICAgKVxuICApO1xuXG4gICAgLy8gRGVmZW5zaXZlOiBlbnN1cmUgc2V0dGluZ3MuY3VzdG9tUGF0aHMgZXhpc3RzXG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzKSB7XG4gICAgICB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzID0gW107XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgdGhlIHJlcXVpcmVzR3JhcGggZnJvbSBtYW5pZmVzdC5qc29uXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJhdyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnbWFuaWZlc3QuanNvbicpO1xuICAgICAgY29uc3QgbWFuaWZlc3QgPSBKU09OLnBhcnNlKHJhdykgYXMge1xuICAgICAgICBmaWxlczogQXJyYXk8eyBrZXk6IHN0cmluZzsgcmVxdWlyZXM/OiBzdHJpbmdbXSB9PjtcbiAgICAgICAgZm9sZGVyczogQXJyYXk8eyBrZXk6IHN0cmluZzsgcmVxdWlyZXM/OiBzdHJpbmdbXSB9PjtcbiAgICAgIH07XG4gICAgICBjb25zdCBlbnRyaWVzID0gWy4uLihtYW5pZmVzdC5mb2xkZXJzIHx8IFtdKSwgLi4uKG1hbmlmZXN0LmZpbGVzIHx8IFtdKV07XG4gICAgICB0aGlzLnJlcXVpcmVzR3JhcGggPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nW10+KCk7XG4gICAgICBmb3IgKGNvbnN0IGUgb2YgZW50cmllcykge1xuICAgICAgICB0aGlzLnJlcXVpcmVzR3JhcGguc2V0KGUua2V5LCBlLnJlcXVpcmVzID8/IFtdKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBidWlsZCByZXF1aXJlc0dyYXBoIChtYW5pZmVzdC5qc29uIG1pc3Npbmcgb3IgaW52YWxpZCkuJyk7XG4gICAgICB0aGlzLnJlcXVpcmVzR3JhcGggPSBuZXcgTWFwKCk7XG4gICAgfVxuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgdGhpcy5kaXNhYmxlSGlnaGxpZ2h0KCk7XG4gICAgaWYgKHRoaXMuYXV0b0NoZWNrSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvQ2hlY2tJbnRlcnZhbCk7XG4gICAgfVxuICB9XG5cbiAgc2NoZWR1bGVBdXRvVXBkYXRlQ2hlY2soKSB7XG4gICAgdGhpcy5hdXRvQ2hlY2tJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmNoZWNrRm9yVXBkYXRlcygpO1xuICAgIH0sIDYwICogNjAgKiAxMDAwKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBCQUNLVVAgJiBVTkRPIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIGJhY2t1cEZpbGUoZmlsZVBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcyA9IHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgfHwge307XG4gICAgdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlc1tmaWxlUGF0aF0gPSBjb250ZW50O1xuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgY29uc29sZS5sb2coYEJhY2t1cCBzdG9yZWQgZm9yICR7ZmlsZVBhdGh9YCk7XG4gIH1cblxuICBhc3luYyB1bmRvRm9yY2VVcGRhdGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzIHx8IE9iamVjdC5rZXlzKHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnTm8gYmFja3VwcyBhdmFpbGFibGUgdG8gcmVzdG9yZS4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yIChjb25zdCBbZmlsZVBhdGgsIGJhY2t1cENvbnRlbnRdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMpKSB7XG4gICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmlsZVBhdGgpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZVBhdGgsIGJhY2t1cENvbnRlbnQpO1xuICAgICAgICBjb25zb2xlLmxvZyhgUmVzdG9yZWQgJHtmaWxlUGF0aH1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgYmFja3VwQ29udGVudCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBSZWNyZWF0ZWQgYW5kIHJlc3RvcmVkICR7ZmlsZVBhdGh9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBGb3JjZSB1cGRhdGUgdW5kb25lLicpO1xuICAgIHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgPSB7fTtcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZPTERFUiBTWU5DIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIHN5bmNNaXNzaW5nRm9sZGVycygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5tYW5pZmVzdENhY2hlICYmIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSBmb2xkZXJFbnRyeS5wYXRoO1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmb2xkZXJQYXRoKSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1RENDMSBDcmVhdGVkIG1pc3NpbmcgZm9sZGVyOiAke2ZvbGRlclBhdGh9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRk9SQ0UtVVBEQVRFIFBSRVZJRVcgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgYnVpbGRGb3JjZVVwZGF0ZVByZXZpZXcoKTogUHJvbWlzZTxQcmV2aWV3SXRlbVtdPiB7XG4gICAgY29uc3QgcHJldmlld0xpc3Q6IFByZXZpZXdJdGVtW10gPSBbXTtcblxuICAgIC8vIDApIENvbGxlY3QgYWxsIGJsYWNrbGlzdGVkIGZvbGRlcnMgKG1hbmlmZXN0S2V5IHZhbHVlcyB3aGVyZSBkb1VwZGF0ZSA9PT0gZmFsc2UpXG4gICAgY29uc3QgZGVueUxpc3RlZEZvbGRlcnMgPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzXG4gICAgICAuZmlsdGVyKChjKSA9PiBjLmRvVXBkYXRlID09PSBmYWxzZSlcbiAgICAgIC5tYXAoKGMpID0+IGMubWFuaWZlc3RLZXkpO1xuXG4gICAgLy8gMSkgRGVueS1saXN0ZWQgZmlsZXMgZmlyc3RcdTIwMTRidXQgb25seSBpZiB0aGV5IHdvdWxkIGFjdHVhbGx5IGJlIFwibmV3XCIgb3IgXCJvdXQgb2YgZGF0ZVwiXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICAgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcbiAgICAgIGlmIChlbnRyeS5vcHRpb25hbCkge1xuICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZW50cnkua2V5KTtcbiAgICAgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuICAgICAgZW50cnkucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcbiAgICAgICk7XG4gICAgICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcbiAgICAgIC8vIFJlc29sdmUgdmF1bHQgcGF0aCAoYWNjb3VudGluZyBmb3IgYW55IHJlbWFwcGluZylcbiAgICAgIGNvbnN0IHZwID0gY3VzdG9tPy52YXVsdFBhdGggPz8gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuXG4gICAgICAvLyBDaGVjazogZG9lcyB0aGUgZmlsZSBleGlzdCBsb2NhbGx5PyBBbmQgaXMgaXQgdXAtdG8tZGF0ZT9cbiAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZwKTtcbiAgICAgIGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpO1xuXG4gICAgICAvLyBPbmx5IHNob3cgYXMgZGVueS1saXN0ZWQgaWYgaXQgd291bGQgaGF2ZSBiZWVuIFx1MjAxQ25ld1x1MjAxRCAobWlzc2luZykgb3IgXHUyMDFDb3V0LW9mLWRhdGVcdTIwMURcbiAgICAgIGlmICghZXhpc3RzIHx8ICF1cFRvRGF0ZSkge1xuICAgICAgICBwcmV2aWV3TGlzdC5wdXNoKHtcbiAgICAgICAgZmlsZVBhdGg6IHZwLFxuICAgICAgICBhY3Rpb246ICdkZW55LWxpc3RlZCBcdTIwMTMgd2lsbCBub3QgdXBkYXRlJyxcbiAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblx0Ly8gMikgRlVMTC1TWU5DIG1vZGUgKHNraXAgYW55IGZpbGUvZm9sZGVyIHRoYXQgaXMgYmxhY2tsaXN0ZWQpXG5cdGlmICghdGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzKSB7XG5cdCAgZm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHRcdC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0XHRpZiAoZi5vcHRpb25hbCkge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBmLmtleSk7XG5cdFx0Y29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0ICBmLnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdFx0KTtcblx0XHRpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHQgIGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IHZwID0gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGYucGF0aCk7XG5cdFx0bGV0IHRhZyA9ICcnO1xuXHRcdGlmICh2cCAhPT0gZi5wYXRoKSB0YWcgPSAnIChyZW1hcHBlZCknO1xuXG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuXHRcdGlmICghZXhpc3RzKSB7XG5cdFx0ICBwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHRcdGZpbGVQYXRoOiB2cCxcblx0XHRcdGFjdGlvbjogYG5ldyBmaWxlJHt0YWd9YCxcblx0XHRcdHNlbGVjdGVkOiB0cnVlLFxuXHRcdCAgfSk7XG5cdFx0fSBlbHNlIGlmICghKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKHZwKSkpIHtcblx0XHQgIHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdFx0ZmlsZVBhdGg6IHZwLFxuXHRcdFx0YWN0aW9uOiBgd2lsbCBiZSBvdmVyd3JpdHRlbiR7dGFnfWAsXG5cdFx0XHRzZWxlY3RlZDogdHJ1ZSxcblx0XHQgIH0pO1xuXHRcdH1cblx0ICB9XG5cblx0ICBmb3IgKGNvbnN0IGZsZCBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuXHRcdC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuXHRcdGlmIChmbGQub3B0aW9uYWwpIHtcblx0XHQgIGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IGlzRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLmluY2x1ZGVzKGZsZC5wYXRoKTtcblx0XHRpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmbGQucGF0aCkpICYmICFpc0RlbnlGb2xkZXIpIHtcblx0XHQgIHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdFx0ZmlsZVBhdGg6IGZsZC5wYXRoLFxuXHRcdFx0YWN0aW9uOiAnbWlzc2luZyBmb2xkZXIgKHdpbGwgYmUgY3JlYXRlZCknLFxuXHRcdFx0c2VsZWN0ZWQ6IHRydWUsXG5cdFx0XHRpc0ZvbGRlcjogdHJ1ZSxcblx0XHQgIH0pO1xuXHRcdH1cblx0ICB9XG5cblx0ICByZXR1cm4gcHJldmlld0xpc3Q7XG5cdH1cblxuXHQvLyAzKSBDVVNUT00tU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0IGlzIGJsYWNrbGlzdGVkKVxuXHRmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0ICBpZiAoZW50cnkub3B0aW9uYWwpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGVudHJ5LmtleSk7XG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0ZW50cnkucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcblx0ICApO1xuXHQgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblxuXHQgIGNvbnN0IHZhdWx0UGF0aCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChlbnRyeS5wYXRoKTtcblx0ICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpO1xuXHQgIGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2YXVsdFBhdGgpKTtcblxuXHQgIGxldCB0YWcgPSAnJztcblx0ICBpZiAodmF1bHRQYXRoICE9PSBlbnRyeS5wYXRoKSB0YWcgPSAnIChyZW1hcHBlZCknO1xuXG5cdCAgaWYgKCFleGlzdHMpIHtcblx0XHRwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHQgIGZpbGVQYXRoOiB2YXVsdFBhdGgsXG5cdFx0ICBhY3Rpb246IGBuZXcgZmlsZSR7dGFnfWAsXG5cdFx0ICBzZWxlY3RlZDogdHJ1ZSxcblx0XHR9KTtcblx0ICB9IGVsc2UgaWYgKCF1cFRvRGF0ZSkge1xuXHRcdHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdCAgZmlsZVBhdGg6IHZhdWx0UGF0aCxcblx0XHQgIGFjdGlvbjogYHdpbGwgYmUgb3ZlcndyaXR0ZW4ke3RhZ31gLFxuXHRcdCAgc2VsZWN0ZWQ6IHRydWUsXG5cdFx0fSk7XG5cdCAgfVxuXHR9XG5cblx0Zm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuXHQgIGlmIChlbnRyeS5vcHRpb25hbCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblxuXHQgIGNvbnN0IGlzRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLmluY2x1ZGVzKGVudHJ5LnBhdGgpO1xuXHQgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSAmJiAhaXNEZW55Rm9sZGVyKSB7XG5cdFx0cHJldmlld0xpc3QucHVzaCh7XG5cdFx0ICBmaWxlUGF0aDogZW50cnkucGF0aCxcblx0XHQgIGFjdGlvbjogJ21pc3NpbmcgZm9sZGVyICh3aWxsIGJlIGNyZWF0ZWQpJyxcblx0XHQgIHNlbGVjdGVkOiB0cnVlLFxuXHRcdCAgaXNGb2xkZXI6IHRydWUsXG5cdFx0fSk7XG5cdCAgfVxuXHR9XG5cblx0Ly8gM2MpIFx1MjAxQ01vdmVkXHUyMDFEIGRldGVjdGlvbiAoc2tpcCBibGFja2xpc3RlZClcblx0Zm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0ICBpZiAoZi5vcHRpb25hbCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblxuXHQgIGNvbnN0IG1hbmlmZXN0S2V5ID0gZi5rZXk7XG5cdCAgY29uc3QgbWFuaWZlc3RQYXRoID0gZi5wYXRoO1xuXHQgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gbWFuaWZlc3RLZXkpO1xuXHQgIGNvbnN0IHByZXZQYXRoID0gdGhpcy5vbGRQYXRoc0J5R2l0aHViW21hbmlmZXN0UGF0aF07XG5cblx0ICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cblx0XHRtYW5pZmVzdFBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdCAgKTtcblx0ICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cdCAgaWYgKGN1c3RvbSAmJiBjdXN0b20udmF1bHRQYXRoICYmIGN1c3RvbS52YXVsdFBhdGggIT09IG1hbmlmZXN0UGF0aCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblx0ICBpZiAoXG5cdFx0cHJldlBhdGggJiZcblx0XHRwcmV2UGF0aCAhPT0gbWFuaWZlc3RQYXRoICYmXG5cdFx0KCFjdXN0b20gfHwgY3VzdG9tLnZhdWx0UGF0aCA9PT0gbWFuaWZlc3RQYXRoKVxuXHQgICkge1xuXHRcdHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdCAgZmlsZVBhdGg6IHByZXZQYXRoLFxuXHRcdCAgYWN0aW9uOiBgbW92ZWQgXHUyMTkyICR7bWFuaWZlc3RQYXRofWAsXG5cdFx0ICBzZWxlY3RlZDogdHJ1ZSxcblx0XHR9KTtcblx0ICB9XG5cdH1cblxuXHRyZXR1cm4gcHJldmlld0xpc3Q7XG4gIH1cblxuICBcbiAgXG4gIFxuICBhc3luYyBmb3JjZVVwZGF0ZVByZXZpZXdBbmRDb25maXJtKCkge1xuXHQvLyAxKSBCdWlsZCB0aGUgZmxhdCBsaXN0IG9mIFByZXZpZXdJdGVtIG9iamVjdHNcblx0Y29uc3QgcHJldmlld0xpc3QgPSBhd2FpdCB0aGlzLmJ1aWxkRm9yY2VVcGRhdGVQcmV2aWV3KCk7XG4gIFxuXHQvLyAyKSBTcGxpdCB0aGUgaXRlbXMgaW50byBcdTIwMUNkZW55LWxpc3RlZFx1MjAxRCB2cy4gXHUyMDFDbm9ybWFsXHUyMDFEIGl0ZW1zXG5cdC8vICAgIChidWlsZEZvcmNlVXBkYXRlUHJldmlldyB1c2VzIGFjdGlvbiA9ICdkZW55LWxpc3RlZCBcdTIwMTMgd2lsbCBub3QgdXBkYXRlJylcblx0Y29uc3QgZGVueUl0ZW1zOiBQcmV2aWV3SXRlbVtdID0gW107XG5cdGNvbnN0IG5vcm1hbEl0ZW1zOiBQcmV2aWV3SXRlbVtdID0gW107XG5cdGZvciAoY29uc3QgaXRlbSBvZiBwcmV2aWV3TGlzdCkge1xuXHQgIGlmIChpdGVtLmFjdGlvbi5zdGFydHNXaXRoKCdkZW55LWxpc3RlZCcpKSB7XG5cdFx0ZGVueUl0ZW1zLnB1c2goaXRlbSk7XG5cdCAgfSBlbHNlIHtcblx0XHRub3JtYWxJdGVtcy5wdXNoKGl0ZW0pO1xuXHQgIH1cblx0fVxuICBcblx0Ly8gMykgQ3JlYXRlIGFuZCBvcGVuIHRoZSBtb2RhbCB3aXRoIGJvdGggbGlzdHNcblx0Y29uc3QgbW9kYWwgPSBuZXcgKGNsYXNzIGV4dGVuZHMgTW9kYWwge1xuXHQgIHBsdWdpbjogVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luO1xuXHQgIG5vcm1hbDogUHJldmlld0l0ZW1bXTtcblx0ICBkZW5pZWQ6IFByZXZpZXdJdGVtW107XG4gIFxuXHQgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBub3JtYWw6IFByZXZpZXdJdGVtW10sIGRlbmllZDogUHJldmlld0l0ZW1bXSkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5ub3JtYWwgPSBub3JtYWw7XG5cdFx0dGhpcy5kZW5pZWQgPSBkZW5pZWQ7XG5cdCAgfVxuICBcblx0ICBvbk9wZW4oKSB7XG5cdFx0Ly8gUHJldmVudCBjbGlja3MgZnJvbSBjbG9zaW5nIGFueXRoaW5nIGJlaGluZFxuXHRcdHRoaXMuY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdFx0dGhpcy50aXRsZUVsLnNldFRleHQoJ0ZvcmNlIFVwZGF0ZSBQcmV2aWV3Jyk7XG4gIFxuXHRcdC8vIEludHJvIHBhcmFncmFwaFxuXHRcdHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdwJywge1xuXHRcdCAgdGV4dDpcblx0XHRcdCdUaGUgZm9sbG93aW5nIGl0ZW1zIHdpbGwgYmUgdXBkYXRlZC4gVW5jaGVjayBhbnkgaXRlbXMgeW91IGRvIE5PVCB3YW50IHRvIGNoYW5nZSwgdGhlbiBjbGljayBcIkNvbmZpcm0gYW5kIFVwZGF0ZVwiLicsXG5cdFx0fSk7XG4gIFxuXHRcdC8vIDQpIFJlbmRlciBcdTIwMUNub3JtYWxcdTIwMUQgKG5vbi1kZW55KSBpdGVtcyB3aXRoIGNoZWNrYm94ZXNcblx0XHRpZiAodGhpcy5ub3JtYWwubGVuZ3RoKSB7XG5cdFx0ICBjb25zdCBub3JtYWxDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG5cdFx0ICBPYmplY3QuYXNzaWduKG5vcm1hbENvbnRhaW5lci5zdHlsZSwge1xuXHRcdFx0bWF4SGVpZ2h0OiAnMzAwcHgnLFxuXHRcdFx0b3ZlcmZsb3dZOiAnYXV0bycsXG5cdFx0XHRtYXJnaW5Ub3A6ICcxZW0nLFxuXHRcdCAgfSk7XG4gIFxuXHRcdCAgdGhpcy5ub3JtYWwuZm9yRWFjaCgoaXRlbSkgPT4ge1xuXHRcdFx0Y29uc3Qgcm93ID0gbm9ybWFsQ29udGFpbmVyLmNyZWF0ZURpdigpO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihyb3cuc3R5bGUsIHtcblx0XHRcdCAgZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0ICBhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXG5cdFx0XHQgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG5cdFx0XHQgIHBhZGRpbmc6ICc2cHggMCcsXG5cdFx0XHQgIGZvbnRGYW1pbHk6ICdtb25vc3BhY2UnLFxuXHRcdFx0fSk7XG4gIFxuXHRcdFx0Ly8gTGVmdDogZmlsZSBwYXRoICsgYWN0aW9uIG5vdGVcblx0XHRcdGNvbnN0IGxhYmVsID0gcm93LmNyZWF0ZURpdigpO1xuXHRcdFx0bGFiZWwuc3R5bGUuZmxleEdyb3cgPSAnMSc7XG5cdFx0XHRsYWJlbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdFx0bGFiZWwuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuICBcblx0XHRcdGNvbnN0IGxhYmVsV3JhcHBlciA9IGxhYmVsLmNyZWF0ZURpdigpO1xuXHRcdFx0bGFiZWxXcmFwcGVyLnRleHRDb250ZW50ID0gaXRlbS5maWxlUGF0aDtcbiAgXG5cdFx0XHRjb25zdCBub3RlID0gbGFiZWwuY3JlYXRlRGl2KHsgdGV4dDogaXRlbS5hY3Rpb24gfSk7XG5cdFx0XHRub3RlLnN0eWxlLmZvbnRTaXplID0gJzEzcHgnO1xuXHRcdFx0bm90ZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG5cdFx0XHRub3RlLnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnO1xuICBcblx0XHRcdC8vIFJpZ2h0OiBjaGVja2JveFxuXHRcdFx0Y29uc3QgY2hlY2tib3ggPSByb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuXHRcdFx0Y2hlY2tib3guY2hlY2tlZCA9IGl0ZW0uc2VsZWN0ZWQ7XG5cdFx0XHRjaGVja2JveC5vbmNoYW5nZSA9ICgpID0+IHtcblx0XHRcdCAgaXRlbS5zZWxlY3RlZCA9IGNoZWNrYm94LmNoZWNrZWQ7XG5cdFx0XHR9O1xuXHRcdCAgfSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IG5vQ2FuZGlkYXRlcyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcblx0XHRcdE9iamVjdC5hc3NpZ24obm9DYW5kaWRhdGVzLnN0eWxlLCB7XG5cdFx0XHQgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuXHRcdFx0ICBmb250RmFtaWx5OiAnbW9ub3NwYWNlJyxcblx0XHRcdCAgZm9udFN0eWxlOiAnaXRhbGljJyxcblx0XHRcdCAgbWFyZ2luVG9wOiAnMC41ZW0nLFxuXHRcdFx0fSk7XG5cdFx0XHRub0NhbmRpZGF0ZXMudGV4dENvbnRlbnQgPSAnTm8gZm9yY2UtdXBkYXRlIGNhbmRpZGF0ZXMuJztcblx0XHR9XG4gIFxuXHRcdC8vIDUpIFJlbmRlciBcdTIwMUNkZW55LWxpc3RlZFx1MjAxRCBpdGVtcyBpbnNpZGUgYSBjb2xsYXBzZWQgPGRldGFpbHM+XG5cdFx0aWYgKHRoaXMuZGVuaWVkLmxlbmd0aCkge1xuXHRcdCAgY29uc3QgZGVueURldGFpbHMgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGV0YWlscycsIHsgY2xzOiAndmstc2VjdGlvbicgfSk7XG5cdFx0ICBkZW55RGV0YWlscy5vcGVuID0gZmFsc2U7XG4gIFxuXHRcdCAgY29uc3Qgc3VtbWFyeSA9IGRlbnlEZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG5cdFx0ICBPYmplY3QuYXNzaWduKHN1bW1hcnkuc3R5bGUsIHtcblx0XHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0Y29sb3I6ICd2YXIoLS10ZXh0LWZhaW50KScsXG5cdFx0XHRhbGlnbkl0ZW1zOiAnY2VudGVyJyxcblx0XHRcdGdhcDogJzAuNWVtJyxcblx0XHRcdG1hcmdpblRvcDogJzFlbScsXG5cdFx0ICB9KTtcblx0XHQgIHN1bW1hcnkuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGBEZW55LUxpc3QgRmlsZXMgKCR7dGhpcy5kZW5pZWQubGVuZ3RofSlgIH0pO1xuICBcblx0XHQgIC8vIFJvdGF0aW5nIFx1MjAxQ1ZWXHUyMDFEIGljb24gb24gZXhwYW5kL2NvbGxhcHNlXG5cdFx0ICBjb25zdCB0b2dnbGVJY29uID0gc3VtbWFyeS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdCAgT2JqZWN0LmFzc2lnbih0b2dnbGVJY29uLnN0eWxlLCB7XG5cdFx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuXHRcdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdFx0dHJhbnNmb3JtOiAncm90YXRlKDE4MGRlZyknLFxuXHRcdCAgfSk7XG5cdFx0ICBkZW55RGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRcdHRvZ2dsZUljb24uc3R5bGUudHJhbnNmb3JtID0gZGVueURldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHQgIH07XG4gIFxuXHRcdCAgLy8gQm9keSBvZiA8ZGV0YWlscz4gXHUyMDE0IGVhY2ggZGVueS1saXN0ZWQgaXRlbSBpcyBmYWludCBhbmQgZGlzYWJsZWRcblx0XHQgIGNvbnN0IGRlbnlCb2R5ID0gZGVueURldGFpbHMuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblx0XHQgIGRlbnlCb2R5LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzFlbSc7XG4gIFxuXHRcdCAgdGhpcy5kZW5pZWQuZm9yRWFjaCgoaXRlbSkgPT4ge1xuXHRcdFx0Y29uc3Qgcm93ID0gZGVueUJvZHkuY3JlYXRlRGl2KCk7XG5cdFx0XHRPYmplY3QuYXNzaWduKHJvdy5zdHlsZSwge1xuXHRcdFx0ICBkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHQgIGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0Jyxcblx0XHRcdCAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcblx0XHRcdCAgcGFkZGluZzogJzZweCAwJyxcblx0XHRcdCAgZm9udEZhbWlseTogJ21vbm9zcGFjZScsXG5cdFx0XHQgIGNvbG9yOiAndmFyKC0tdGV4dC1mYWludCknLFxuXHRcdFx0ICBmb250U3R5bGU6ICdpdGFsaWMnLFxuXHRcdFx0fSk7XG4gIFxuXHRcdFx0Y29uc3QgbGFiZWxXcmFwcGVyID0gcm93LmNyZWF0ZURpdigpO1xuXHRcdFx0bGFiZWxXcmFwcGVyLnRleHRDb250ZW50ID0gaXRlbS5maWxlUGF0aDtcblx0XHRcdGxhYmVsV3JhcHBlci5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdsaW5lLXRocm91Z2gnO1xuICBcblx0XHRcdGNvbnN0IG5vdGUgPSByb3cuY3JlYXRlRGl2KHsgdGV4dDogaXRlbS5hY3Rpb24gfSk7XG5cdFx0XHRub3RlLnN0eWxlLmZvbnRTaXplID0gJzEzcHgnO1xuXHRcdFx0bm90ZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LWZhaW50KSc7XG5cdFx0XHRub3RlLnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnO1xuICBcblx0XHRcdC8vIERlbnktbGlzdGVkIGNoZWNrYm94IGlzIGRpc2FibGVkXG5cdFx0XHRjb25zdCBjaGVja2JveCA9IHJvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG5cdFx0XHRjaGVja2JveC5jaGVja2VkID0gaXRlbS5zZWxlY3RlZDtcblx0XHRcdGNoZWNrYm94LmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdGNoZWNrYm94LnRpdGxlID0gJ1RoaXMgaXRlbSBpcyBkZW55LWxpc3RlZCc7XG5cdFx0ICB9KTtcblx0XHR9XG5cbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwYXJzZUdhbWVzZXRzKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsXG4gICAgICAgICAgLmNyZWF0ZURpdih7IGNsczogJ21vZC1hdXgtdGV4dCcgfSlcbiAgICAgICAgICAuc2V0VGV4dCgnXHVEODNEXHVERDA0IFJlZnJlc2hpbmcgR2FtZXNldCBEYXRhJyk7XG4gICAgICB9XG5cblx0XHQvLyA2KSBCdXR0b25zIGF0IHRoZSBib3R0b21cblx0XHRjb25zdCBidXR0b25Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG5cdFx0T2JqZWN0LmFzc2lnbihidXR0b25Sb3cuc3R5bGUsIHtcblx0XHQgIGRpc3BsYXk6ICdmbGV4Jyxcblx0XHQgIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLFxuXHRcdCAgZ2FwOiAnMC41ZW0nLFxuXHRcdCAgbWFyZ2luVG9wOiAnMS41ZW0nLFxuXHRcdH0pO1xuICBcblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG5cdFx0Y2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsb3NlKCk7XG4gIFxuXHRcdGNvbnN0IGNvbmZpcm1CdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHQgIHRleHQ6ICdDb25maXJtIGFuZCBVcGRhdGUnLFxuXHRcdCAgY2xzOiAnbW9kLWN0YScsXG5cdFx0fSk7XG5cdFx0Y29uZmlybUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdCAgdGhpcy5jbG9zZSgpO1xuXHRcdCAgLy8gUGFzcyBldmVyeXRoaW5nIGludG8gcGVyZm9ybUZvcmNlVXBkYXRlV2l0aFNlbGVjdGlvbjsgZGVueS1saXN0ZWQgaXRlbXMgd2lsbCBiZSBza2lwcGVkXG5cdFx0ICBhd2FpdCB0aGlzLnBsdWdpbi5wZXJmb3JtRm9yY2VVcGRhdGVXaXRoU2VsZWN0aW9uKFsuLi50aGlzLm5vcm1hbCwgLi4udGhpcy5kZW5pZWRdKTtcblx0XHR9O1xuXHQgIH1cbiAgXG5cdCAgb25DbG9zZSgpIHtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHQgIH1cblx0fSkodGhpcy5hcHAsIG5vcm1hbEl0ZW1zLCBkZW55SXRlbXMpO1xuICBcblx0Ly8gQXR0YWNoIHBsdWdpbiBwb2ludGVyIGFuZCBvcGVuXG5cdChtb2RhbCBhcyBhbnkpLnBsdWdpbiA9IHRoaXM7XG5cdG1vZGFsLm9wZW4oKTtcbiAgfVxuICBcblxuICBhc3luYyB1cGRhdGVFbnRyeUZyb21NYW5pZmVzdChlbnRyeTogTWFuaWZlc3RGaWxlRW50cnksIGZvcmNlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGVudHJ5LmtleSk7XG4gICAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlKSB7XG4gICAgICBjb25zb2xlLmxvZyhgXHUyM0VEXHVGRTBGIFNraXBwaW5nICR7ZW50cnkua2V5fSAoJHtlbnRyeS5kaXNwbGF5TmFtZX0pIFx1MjAxNCBibGFja2xpc3RlZGApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZpbmFsVmF1bHRQYXRoID0gY3VzdG9tPy52YXVsdFBhdGggPz8gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuICAgIGlmICghZm9yY2UgJiYgKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKGZpbmFsVmF1bHRQYXRoKSkpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBcdTI3MTRcdUZFMEYgQWxyZWFkeSB1cCB0byBkYXRlOiAke2VudHJ5LmRpc3BsYXlOYW1lfWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVybCA9IGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL3Z2dW5kZXJsb3JlLXRvb2xraXQtZnVsbC9tYWluLyR7ZW50cnkucGF0aH1gO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbmFsVmF1bHRQYXRoLCB0ZXh0KTtcbiAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZShmaW5hbFZhdWx0UGF0aCwgdGV4dCwgZW50cnkucGF0aCk7XG4gICAgICBjb25zb2xlLmxvZyhgXHUyNzA1IFVwZGF0ZWQgJHtlbnRyeS5kaXNwbGF5TmFtZX0gXHUyMTkyICR7ZmluYWxWYXVsdFBhdGh9YCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIEVycm9yIHVwZGF0aW5nICR7ZW50cnkuZGlzcGxheU5hbWV9OmAsIGUpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHBlcmZvcm1Gb3JjZVVwZGF0ZVdpdGhTZWxlY3Rpb24ocHJldmlld0xpc3Q6IFByZXZpZXdJdGVtW10pIHtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlKSB7XG4gICAgICAvLyBcdTIwMjYgKHlvdXIgZXhpc3RpbmcgYmFja3VwIGNvZGUpIFx1MjAyNlxuICAgIH1cblxuICAgIHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgPSB7fTtcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFx1MjQ2MCBGaWx0ZXIgb3V0IGZvbGRlcnMsIHVuY2hlY2tlZCwgYW5kIGRlbnktbGlzdGVkOlxuICAgICAgY29uc3QgdG9VcGRhdGUgPSBwcmV2aWV3TGlzdC5maWx0ZXIoXG4gICAgICAgIChpdGVtKSA9PlxuICAgICAgICAgIGl0ZW0uc2VsZWN0ZWQgJiZcbiAgICAgICAgICAhaXRlbS5pc0ZvbGRlciAmJlxuICAgICAgICAgICF0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLnNvbWUoXG4gICAgICAgICAgICAoYykgPT4gYy52YXVsdFBhdGggPT09IGl0ZW0uZmlsZVBhdGggJiYgYy5kb1VwZGF0ZSA9PT0gZmFsc2VcbiAgICAgICAgICApXG4gICAgICApO1xuXG4gICAgICAvLyBcdTI0NjEgVXBkYXRlIGVhY2ggc2VsZWN0ZWQgZmlsZVxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRvVXBkYXRlKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoXG4gICAgICAgICAgKGYpID0+IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpID09PSBpdGVtLmZpbGVQYXRoXG4gICAgICAgICk7XG4gICAgICAgIGlmICghZW50cnkpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYFx1MjZBMFx1RkUwRiBDb3VsZCBub3QgbWF0Y2ggcHJldmlldyBpdGVtIHRvIG1hbmlmZXN0OiAke2l0ZW0uZmlsZVBhdGh9YCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVFbnRyeUZyb21NYW5pZmVzdChlbnRyeSwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFx1MjQ2MiBFbnN1cmUgYWxsIG1hbmlmZXN0IGZvbGRlcnMgZXhpc3RcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZW50cnkucGF0aCkpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGVudHJ5LnBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIDQpIEJ1bXAgdmVyc2lvblxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVWZXJzaW9uRmlsZSgpO1xuICAgICAgdGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uID0gdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiA/PyAndW5rbm93bic7XG4gICAgICB0aGlzLnNldHRpbmdzLmxhc3RGb3JjZVVwZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBUb29sa2l0IGZvcmNlXHUyMDEwdXBkYXRlZCB3aXRoIHlvdXIgc2VsZWN0aW9ucy4nKTtcblxuICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnJlcGFyc2VHYW1lc2V0cykge1xuICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVERDA0IFJlZnJlc2hpbmcgR2FtZSBTZXQgRGF0YVx1MjAyNicpO1xuICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoR2FtZVNldERhdGEoKTtcbiAgICB9XG5cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzVGFiKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NUYWIudXBkYXRlVmVyc2lvbkRpc3BsYXkoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGb3JjZSB1cGRhdGUgZmFpbGVkLiBWZXJzaW9uIG5vdCBjaGFuZ2VkLicsIGVycik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgT25lIG9yIG1vcmUgZmlsZXMgZmFpbGVkLiBWZXJzaW9uIE5PVCB1cGRhdGVkLicpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQpIHtcbiAgICAgIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNJTkdMRS1GSUxFIFVQREFURSAod2l0aCBHaXRIdWIgQVBJICsgcmF3IGZhbGxiYWNrKSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyB1cGRhdGVTaW5nbGVGaWxlRnJvbUdpdEh1YihcbiAgICB7IGdpdGh1YlBhdGgsIHZhdWx0UGF0aCB9OiB7IGdpdGh1YlBhdGg6IHN0cmluZzsgdmF1bHRQYXRoOiBzdHJpbmcgfSxcbiAgICBmb3JjZTogYm9vbGVhbiA9IGZhbHNlXG4gICkge1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmN1c3RvbWl6ZVVwZGF0ZXMpIHtcbiAgICAgIHZhdWx0UGF0aCA9IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChnaXRodWJQYXRoKTtcbiAgICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZ2l0aHViUGF0aCk7XG4gICAgICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXVsdFBhdGggPSBnaXRodWJQYXRoO1xuICAgIH1cblxuICAgIGlmICghdmF1bHRQYXRoKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdTI3NEMgTm8gdmFsaWQgdmF1bHQgcGF0aCByZXNvbHZlZCBmb3IgJHtnaXRodWJQYXRofWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDEpIEhhbmRsZSBsb2NhbCByZW5hbWVzIGZpcnN0XG4gICAgY29uc3Qgb2xkVmF1bHQgPSB0aGlzLm9sZFBhdGhzQnlHaXRodWJbZ2l0aHViUGF0aF07XG4gICAgaWYgKG9sZFZhdWx0ICYmIG9sZFZhdWx0ICE9PSB2YXVsdFBhdGgpIHtcbiAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpKSB7XG4gICAgICAgIGNvbnN0IHN0cmF5ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHZhdWx0UGF0aCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYmFja3VwRmlsZSh2YXVsdFBhdGgsIHN0cmF5KTtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZW1vdmUodmF1bHRQYXRoKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9sZEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2xkVmF1bHQpO1xuICAgICAgaWYgKG9sZEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZW5hbWUob2xkRmlsZSwgdmF1bHRQYXRoKTtcbiAgICAgICAgY29uc3QgbmV3Q29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuICAgICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUodmF1bHRQYXRoLCBuZXdDb250ZW50LCBnaXRodWJQYXRoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDIpIEV4aXN0ZW5jZSwgYmFja3VwICYgc2tpcCBsb2dpY1xuICAgIGNvbnN0IGZpbGVFeGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpO1xuICAgIGlmIChmb3JjZSAmJiBmaWxlRXhpc3RzKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHZhdWx0UGF0aCk7XG4gICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUodmF1bHRQYXRoLCBjdXJyZW50KTtcbiAgICB9XG4gICAgaWYgKCFmb3JjZSAmJiBmaWxlRXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2YXVsdFBhdGgpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDMpIEZldGNoIHZpYSBHaXRIdWIgQVBJLCBmYWxsYmFjayB0byByYXdcbiAgICBjb25zdCBhcGlVcmwgPSBlbmNvZGVVUkkoXG4gICAgICBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL2NvbnRlbnRzLyR7Z2l0aHViUGF0aH0/cmVmPW1haW5gXG4gICAgKTtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlcyA9IGF3YWl0IGZldGNoKGFwaVVybCk7XG4gICAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgIGNvbnN0IHJhd1VybCA9IGVuY29kZVVSSShcbiAgICAgICAgICBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvbWFpbi8ke2dpdGh1YlBhdGh9YFxuICAgICAgICApO1xuICAgICAgICByZXMgPSBhd2FpdCBmZXRjaChyYXdVcmwpO1xuICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBSYXcgZmV0Y2ggZmFpbGVkOiAke3Jlcy5zdGF0dXNUZXh0fWApO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICAgICAgaWYgKGZpbGVFeGlzdHMpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKHZhdWx0UGF0aCwgY29udGVudCwgZ2l0aHViUGF0aCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgR2l0SHViIEFQSSBlcnJvcjogJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgIGNvbnN0IHsgZG93bmxvYWRfdXJsIH0gPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgeyBkb3dubG9hZF91cmw6IHN0cmluZyB9O1xuICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IChhd2FpdCBmZXRjaChkb3dubG9hZF91cmwpKS50ZXh0KCk7XG4gICAgICBpZiAoZmlsZUV4aXN0cykge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUodmF1bHRQYXRoLCBjb250ZW50KTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGdpdGh1YlBhdGgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFx1Mjc0QyBGYWlsZWQgdG8gdXBkYXRlICR7dmF1bHRQYXRofWAsIGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQUkVWSUVXICsgUkVNT1RFLUJBU0VMSU5FICsgRElGRiBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBwcmV2aWV3VXBkYXRlc01vZGFsKCkge1xuXHQvLyBcdTIwMUNMb2FkaW5nXHUyMDI2XHUyMDFEIHBsYWNlaG9sZGVyIHdoaWxlIHN5bmNpbmdcblx0Y29uc3QgbG9hZGluZyA9IG5ldyAoY2xhc3MgZXh0ZW5kcyBNb2RhbCB7XG5cdCAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcblx0XHRzdXBlcihhcHApO1xuXHQgIH1cblx0ICBvbk9wZW4oKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLmNvbnRlbnRFbFxuXHRcdCAgLmNyZWF0ZURpdih7XG5cdFx0XHR0ZXh0OiAnXHVEODNEXHVERDA0IENoZWNraW5nIGZvciB1cGRhdGVzXHUyMDI2Jyxcblx0XHRcdGNsczogJ21vZC13YXJuaW5nJyxcblx0XHQgIH0pXG5cdFx0ICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdCAgfVxuXHR9KSh0aGlzLmFwcCk7XG4gIFxuXHRsb2FkaW5nLm9wZW4oKTtcblx0YXdhaXQgdGhpcy5zeW5jTWFuaWZlc3QoKTtcblx0YXdhaXQgdGhpcy5mZXRjaFJlbW90ZUJhc2VsaW5lKCk7XG5cdC8vIGJ1aWxkVXBkYXRlUHJldmlldygpIG5vdyByZXR1cm5zIG9ubHkgXHUyMDFDcmVhbFx1MjAxRCBkaWZmcyAobm8gc3RhbGUgZGVueVx1MjAxMGxpc3QpXG5cdGNvbnN0IGRpZmZzID0gYXdhaXQgdGhpcy5idWlsZFVwZGF0ZVByZXZpZXcoKTtcblx0bG9hZGluZy5jbG9zZSgpO1xuICBcblx0Ly8gU3BsaXQgb3V0IGRlbnlcdTIwMTBsaXN0ZWQgbGluZXMgdnMuIGV2ZXJ5dGhpbmcgZWxzZVxuXHRjb25zdCBkZW55TGlzdGVkTGluZXM6IHN0cmluZ1tdID0gW107XG5cdGNvbnN0IG5vcm1hbExpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBcblx0Zm9yIChjb25zdCBkIG9mIGRpZmZzKSB7XG5cdCAgaWYgKGQuc3RhcnRzV2l0aCgnXHUyNzRDIGRlbnlcdTIwMTBsaXN0ZWQnKSkge1xuXHRcdGRlbnlMaXN0ZWRMaW5lcy5wdXNoKGQpO1xuXHQgIH0gZWxzZSB7XG5cdFx0bm9ybWFsTGluZXMucHVzaChkKTtcblx0ICB9XG5cdH1cbiAgXG5cdC8vIE5vdyBjcmVhdGUgdGhlIG1vZGFsXG5cdGNvbnN0IG1vZGFsID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcblx0ICBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcblx0ICBub3JtYWw6IHN0cmluZ1tdO1xuXHQgIGRlbmllZDogc3RyaW5nW107XG4gIFxuXHQgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBub3JtYWw6IHN0cmluZ1tdLCBkZW5pZWQ6IHN0cmluZ1tdKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLm5vcm1hbCA9IG5vcm1hbDtcblx0XHR0aGlzLmRlbmllZCA9IGRlbmllZDtcblx0ICB9XG4gIFxuXHQgIG9uT3BlbigpIHtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHRcdHRoaXMudGl0bGVFbC5zZXRUZXh0KCdVcGRhdGUgUHJldmlldycpO1xuICBcblx0XHQvLyBJbnRybyBwYXJhZ3JhcGhcblx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcblx0XHQgIHRleHQ6ICdPbmx5IGZpbGVzIHdob3NlIGNvbnRlbnRzIGRpZmZlciBmcm9tIEdpdEh1YiB3aWxsIGJlIHVwZGF0ZWQ6Jyxcblx0XHR9KTtcbiAgXG5cdFx0Ly8gMSkgSWYgdGhlcmUgYXJlIGFueSBcdTIwMUNub3JtYWxcdTIwMUQgZGlmZnMsIHJlbmRlciB0aGVtIGluIGEgYnVsbGV0IGxpc3Rcblx0XHRpZiAodGhpcy5ub3JtYWwubGVuZ3RoKSB7XG5cdFx0ICBjb25zdCB1bCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCd1bCcpO1xuXHRcdCAgdGhpcy5ub3JtYWwuZm9yRWFjaCgobGluZSkgPT4ge1xuXHRcdFx0Y29uc3QgbGkgPSB1bC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IGxpbmUgfSk7XG5cdFx0XHQvLyBObyBzcGVjaWFsIHN0eWxpbmcgZm9yIHRoZXNlOyB0aGV5IHNob3cgdXAgbm9ybWFsbHkuXG5cdFx0ICB9KTtcblx0XHR9IGVsc2Uge1xuXHRcdCAgLy8gSWYgbm8gbm9ybWFsIGRpZmZzLCBzYXkgXHUyMDFDVXAgdG8gZGF0ZVx1MjAxRFxuXHRcdCAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdHRleHQ6ICdcdTI3MDUgRXZlcnl0aGluZyBpcyBhbHJlYWR5IHVwIHRvIGRhdGUhJyxcblx0XHRcdGNsczogJ21vZC1pbmZvJyxcblx0XHQgIH0pO1xuXHRcdH1cbiAgXG5cdFx0Ly8gMikgSWYgdGhlcmUgYXJlIGFueSBkZW55XHUyMDEwbGlzdGVkIGxpbmVzLCB0dWNrIHRoZW0gaW50byBhIDxkZXRhaWxzPiBibG9ja1xuXHRcdGlmICh0aGlzLmRlbmllZC5sZW5ndGgpIHtcblx0XHQgIGNvbnN0IGRlbnlEZXRhaWxzID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXHRcdCAgLy8gQWx3YXlzIHN0YXJ0IGNvbGxhcHNlZCBieSBkZWZhdWx0XG5cdFx0ICBkZW55RGV0YWlscy5vcGVuID0gZmFsc2U7XG4gIFxuXHRcdCAgLy8gU3VtbWFyeSBsaW5lOiBzaG93cyBcdTIwMUNEZW55XHUyMDEwTGlzdCBGaWxlcyAobilcdTIwMURcblx0XHQgIGNvbnN0IHN1bW1hcnkgPSBkZW55RGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXHRcdCAgT2JqZWN0LmFzc2lnbihzdW1tYXJ5LnN0eWxlLCB7XG5cdFx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdGNvbG9yOiAndmFyKC0tdGV4dC1mYWludCknLFxuXHRcdFx0YWxpZ25JdGVtczogJ2NlbnRlcicsXG5cdFx0XHRnYXA6ICcwLjVlbScsXG5cdFx0ICB9KTtcblx0XHQgIHN1bW1hcnkuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGBEZW55XHUyMDEwTGlzdCBGaWxlcyAoJHt0aGlzLmRlbmllZC5sZW5ndGh9KWAgfSk7XG4gIFxuXHRcdCAgLy8gUmlnaHRcdTIwMTBzaWRlIGljb24gcm90YXRpbmcgb24gZXhwYW5kL2NvbGxhcHNlXG5cdFx0ICBjb25zdCB0b2dnbGVJY29uID0gc3VtbWFyeS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdCAgT2JqZWN0LmFzc2lnbih0b2dnbGVJY29uLnN0eWxlLCB7XG5cdFx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuXHRcdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdFx0dHJhbnNmb3JtOiAncm90YXRlKDE4MGRlZyknLFxuXHRcdCAgfSk7XG5cdFx0ICBkZW55RGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRcdHRvZ2dsZUljb24uc3R5bGUudHJhbnNmb3JtID0gZGVueURldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHQgIH07XG4gIFxuXHRcdCAgLy8gQm9keSBvZiB0aGUgZGV0YWlsczogYSBzaW1wbGUgPHVsPiBjb250YWluaW5nIG9ubHkgZGVueVx1MjAxMGxpc3RlZCBsaW5lc1xuXHRcdCAgY29uc3QgZGVueUJvZHkgPSBkZW55RGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXHRcdCAgZGVueUJvZHkuc3R5bGUucGFkZGluZ0xlZnQgPSAnMWVtJztcblx0XHQgIGNvbnN0IGRlbnlVbCA9IGRlbnlCb2R5LmNyZWF0ZUVsKCd1bCcpO1xuXHRcdCAgdGhpcy5kZW5pZWQuZm9yRWFjaCgobGluZSkgPT4ge1xuXHRcdFx0Y29uc3QgbGkgPSBkZW55VWwuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBsaW5lIH0pO1xuXHRcdFx0bGkuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1mYWludCknO1xuXHRcdFx0bGkuc3R5bGUuZm9udFN0eWxlID0gJ2l0YWxpYyc7XG5cdFx0ICB9KTtcblx0XHR9XG4gIFxuXHRcdGNvbnN0IGJ1dHRvblJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcblx0XHRPYmplY3QuYXNzaWduKGJ1dHRvblJvdy5zdHlsZSwge1xuXHRcdCAgZGlzcGxheTogJ2ZsZXgnLFxuXHRcdCAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LWVuZCcsXG5cdFx0ICBtYXJnaW5Ub3A6ICcxLjI1ZW0nLCAgICAgICAvLyB0d2VhayBzcGFjaW5nIGFzIHlvdSBsaWtlXG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gXHUyMDFDQ29uZmlybSAmIFVwZGF0ZVx1MjAxRCBidXR0b25cblx0XHRjb25zdCBjb25maXJtQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0ICB0ZXh0OiAnQ29uZmlybSAmIFVwZGF0ZScsXG5cdFx0ICBjbHM6ICdtb2QtY3RhJyxcblx0XHR9KTtcblx0XHRjb25maXJtQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0ICBhd2FpdCAodGhpcyBhcyBhbnkpLnBsdWdpbi51cGRhdGVTZWxlY3RlZFRvb2xraXRDb250ZW50KCk7XG5cdFx0ICB0aGlzLmNsb3NlKCk7XG5cdFx0fTtcblx0XHRcblx0XHQvLyBcdTIwMUNDYW5jZWxcdTIwMUQgYnV0dG9uXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuXHRcdGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuXHQgIH1cbiAgXG5cdCAgb25DbG9zZSgpIHtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHQgIH1cblx0fSkodGhpcy5hcHAsIG5vcm1hbExpbmVzLCBkZW55TGlzdGVkTGluZXMpO1xuICBcblx0Ly8gQXR0YWNoIHBsdWdpbiBwb2ludGVyIGFuZCBvcGVuXG5cdChtb2RhbCBhcyBhbnkpLnBsdWdpbiA9IHRoaXM7XG5cdG1vZGFsLm9wZW4oKTtcbiAgfVxuICBcblxuICBhc3luYyBidWlsZFVwZGF0ZVByZXZpZXcoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuXHRjb25zdCBjaGFuZ2VzOiBzdHJpbmdbXSA9IFtdO1xuICBcblx0Ly8gMCkgQ29sbGVjdCBhbGwgYmxhY2tsaXN0ZWQgZm9sZGVycyAobWFuaWZlc3RLZXkgdmFsdWVzIHdoZXJlIGRvVXBkYXRlID09PSBmYWxzZSlcblx0Y29uc3QgZGVueUxpc3RlZEZvbGRlcnMgPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzXG5cdCAgLmZpbHRlcigoYykgPT4gYy5kb1VwZGF0ZSA9PT0gZmFsc2UpXG5cdCAgLm1hcCgoYykgPT4gYy5tYW5pZmVzdEtleSk7XG4gIFxuXHQvLyAxKSBEZW55XHUyMDEwbGlzdGVkIGVudHJpZXNcdTIwMTRidXQgb25seSBpZiB0aGV5XHUyMDE5ZCBhY3R1YWxseSBiZSBcdTIwMUNuZXdcdTIwMUQgKG1pc3NpbmcpIG9yIFx1MjAxQ291dFx1MjAxMG9mXHUyMDEwZGF0ZVx1MjAxRFxuXHRmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHQgIGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYucGF0aCk7XG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0Zi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHQgICk7XG5cdCAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0Ly8gUmVzb2x2ZSB0aGUgdmF1bHQgcGF0aCAoaGFuZGxlcyByZW1hcHBpbmcgaWYgcHJlc2VudClcblx0XHRjb25zdCB2cCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuICBcblx0XHQvLyBDaGVjayBpZiBmaWxlIGV4aXN0cyBsb2NhbGx5IGFuZCBpZiBpdFx1MjAxOXMgdXBcdTIwMTB0b1x1MjAxMGRhdGVcblx0XHRjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2cCk7XG5cdFx0Y29uc3QgdXBUb0RhdGUgPSBleGlzdHMgJiYgKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKHZwKSk7XG4gIFxuXHRcdC8vIE9ubHkgc2hvdyBhIGRlbnlcdTIwMTBsaXN0ZWQgZW50cnkgaWYgaXQgd291bGQgb3RoZXJ3aXNlIGJlIGNyZWF0ZWQgb3Igb3ZlcndyaXR0ZW5cblx0XHRpZiAoIWV4aXN0cyB8fCAhdXBUb0RhdGUpIHtcblx0XHQgIGNoYW5nZXMucHVzaChgXHUyNzRDIGRlbnlcdTIwMTBsaXN0ZWQgXHUyMDEzIHdpbGwgbm90IHVwZGF0ZTogJHt2cH1gKTtcblx0XHR9XG5cdCAgfVxuXHR9XG4gIFxuXHQvLyAyKSBGVUxMXHUyMDEwU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0XHUyMDE5cyBibGFja2xpc3RlZClcblx0aWYgKCF0aGlzLnNldHRpbmdzLmN1c3RvbWl6ZVVwZGF0ZXMpIHtcblx0ICBmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdFx0Ly8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHRcdGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0ICBjb250aW51ZTtcblx0XHR9XG4gIFxuXHRcdGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZi5wYXRoKTtcblx0XHRjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cblx0XHQgIGYucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcblx0XHQpO1xuXHRcdGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuICBcblx0XHRjb25zdCB2cCA9IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuXHRcdGxldCB0YWcgPSAnJztcblx0XHRpZiAodnAgIT09IGYucGF0aCkgdGFnID0gJyAocmVtYXBwZWQpJztcbiAgXG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuXHRcdGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpO1xuICBcblx0XHRpZiAoIWV4aXN0cykge1xuXHRcdCAgY2hhbmdlcy5wdXNoKGBcdUQ4M0RcdURDQzQgTmV3IGZpbGU6ICR7dnB9JHt0YWd9YCk7XG5cdFx0fSBlbHNlIGlmICghdXBUb0RhdGUpIHtcblx0XHQgIGNoYW5nZXMucHVzaChgXHVEODNEXHVERDAxIFdpbGwgdXBkYXRlOiAke3ZwfSR7dGFnfWApO1xuXHRcdH1cblx0ICB9XG4gIFxuXHQgIGZvciAoY29uc3QgZmxkIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG5cdFx0Ly8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZm9sZGVyXG5cdFx0aWYgKGZsZC5vcHRpb25hbCkge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuICBcblx0XHRjb25zdCBpc0RlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5pbmNsdWRlcyhmbGQucGF0aCk7XG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmxkLnBhdGgpO1xuXHRcdGlmICghZXhpc3RzICYmICFpc0RlbnlGb2xkZXIpIHtcblx0XHQgIGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0MxIE5ldyBmb2xkZXI6ICR7ZmxkLnBhdGh9YCk7XG5cdFx0fVxuXHQgIH1cbiAgXG5cdCAgcmV0dXJuIGNoYW5nZXMubGVuZ3RoID8gY2hhbmdlcyA6IFsnXHUyNzA1IEV2ZXJ5dGhpbmcgaXMgYWxyZWFkeSB1cCB0byBkYXRlISddO1xuXHR9XG4gIFxuXHQvLyAzKSBDVVNUT01cdTIwMTBTWU5DIG1vZGUgKHNraXAgYW55IGZpbGUvZm9sZGVyIHRoYXRcdTIwMTlzIGJsYWNrbGlzdGVkKVxuXHRmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHQgIGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYucGF0aCk7XG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0Zi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHQgICk7XG5cdCAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCB2cCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuXHQgIGxldCB0YWcgPSAnJztcblx0ICBpZiAodnAgIT09IGYucGF0aCkgdGFnID0gJyAocmVtYXBwZWQpJztcbiAgXG5cdCAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuXHQgIGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpO1xuICBcblx0ICBpZiAoIWV4aXN0cykge1xuXHRcdGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0M0IE5ldyBmaWxlOiAke3ZwfSR7dGFnfWApO1xuXHQgIH0gZWxzZSBpZiAoIXVwVG9EYXRlKSB7XG5cdFx0Y2hhbmdlcy5wdXNoKGBcdUQ4M0RcdUREMDEgV2lsbCB1cGRhdGU6ICR7dnB9JHt0YWd9YCk7XG5cdCAgfVxuXHR9XG4gIFxuXHRmb3IgKGNvbnN0IGZsZCBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuXHQgIGlmIChmbGQub3B0aW9uYWwpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG4gIFxuXHQgIGNvbnN0IGlzRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLmluY2x1ZGVzKGZsZC5wYXRoKTtcblx0ICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmbGQucGF0aCk7XG5cdCAgaWYgKCFleGlzdHMgJiYgIWlzRGVueUZvbGRlcikge1xuXHRcdGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0MxIE5ldyBmb2xkZXI6ICR7ZmxkLnBhdGh9YCk7XG5cdCAgfVxuXHR9XG4gIFxuXHQvLyAzYykgXHUyMDFDTW92ZWRcdTIwMUQgZGV0ZWN0aW9uIChza2lwIGJsYWNrbGlzdGVkKVxuXHRmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHQgIGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCBtYW5pZmVzdEtleSA9IGYua2V5O1xuXHQgIGNvbnN0IG1hbmlmZXN0UGF0aCA9IGYucGF0aDtcblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IG1hbmlmZXN0S2V5KTtcblx0ICBjb25zdCBwcmV2UGF0aCA9IHRoaXMub2xkUGF0aHNCeUdpdGh1YlttYW5pZmVzdFBhdGhdO1xuICBcblx0ICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cblx0XHRtYW5pZmVzdFBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdCAgKTtcblx0ICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cdCAgaWYgKGN1c3RvbSAmJiBjdXN0b20udmF1bHRQYXRoICYmIGN1c3RvbS52YXVsdFBhdGggIT09IG1hbmlmZXN0UGF0aCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblx0ICBpZiAoXG5cdFx0cHJldlBhdGggJiZcblx0XHRwcmV2UGF0aCAhPT0gbWFuaWZlc3RQYXRoICYmXG5cdFx0KCFjdXN0b20gfHwgY3VzdG9tLnZhdWx0UGF0aCA9PT0gbWFuaWZlc3RQYXRoKVxuXHQgICkge1xuXHRcdGNoYW5nZXMucHVzaChgXHUyN0ExXHVGRTBGIE1vdmVkOiAke3ByZXZQYXRofSBcdTIxOTIgJHttYW5pZmVzdFBhdGh9YCk7XG5cdCAgfVxuXHR9XG4gIFxuXHRyZXR1cm4gY2hhbmdlcy5sZW5ndGggPyBjaGFuZ2VzIDogWydcdTI3MDUgRXZlcnl0aGluZyBpcyBhbHJlYWR5IHVwIHRvIGRhdGUhJ107XG4gIH1cbiAgXG4gIFxuICBcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFZFUlNJT04tQ0hFQ0sgLyBVUERBVEUgRkxPVyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBjaGVja0ZvclVwZGF0ZXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgaXNOZXdlclZlcnNpb24gPSAocmVtb3RlOiBzdHJpbmcsIGxvY2FsOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICAgIGNvbnN0IHBhID0gcmVtb3RlXG4gICAgICAgIC5yZXBsYWNlKC9edi8sICcnKVxuICAgICAgICAuc3BsaXQoJy4nKVxuICAgICAgICAubWFwKChuKSA9PiBwYXJzZUludChuLCAxMCkgfHwgMCk7XG4gICAgICBjb25zdCBwYiA9IGxvY2FsXG4gICAgICAgIC5yZXBsYWNlKC9edi8sICcnKVxuICAgICAgICAuc3BsaXQoJy4nKVxuICAgICAgICAubWFwKChuKSA9PiBwYXJzZUludChuLCAxMCkgfHwgMCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGgubWF4KHBhLmxlbmd0aCwgcGIubGVuZ3RoKTsgaSsrKSB7XG4gICAgICAgIGlmICgocGFbaV0gfHwgMCkgPiAocGJbaV0gfHwgMCkpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoKHBhW2ldIHx8IDApIDwgKHBiW2ldIHx8IDApKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIGNvbnN0IHRvb2xraXRQYXRoID0gJy52ZXJzaW9uLmpzb24nO1xuICAgIGNvbnN0IHRvb2xraXRVcmwgPVxuICAgICAgJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvdnZ1bmRlcmxvcmUtdG9vbGtpdC1mdWxsL21haW4vLnZlcnNpb24uanNvbic7XG4gICAgY29uc3QgcGx1Z2luVXJsID1cbiAgICAgICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL3Z2dW5kZXJsb3JlLXRvb2xraXQtcGx1Z2luL21haW4vdmVyc2lvbi5qc29uJztcbiAgICBjb25zdCBjaGFuZ2Vsb2dVcmwgPVxuICAgICAgJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vUkVBRE1FLm1kJztcblxuICAgIC8vIDEpIFJlYWQgbG9jYWwgdG9vbGtpdCB2ZXJzaW9uXG4gICAgbGV0IGxvY2FsVEsgPSAnMC4wLjAnO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHRvb2xraXRQYXRoKTtcbiAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgbG9jYWxUSyA9IGpzb24udmVyc2lvbiB8fCBsb2NhbFRLO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byByZWFkIGxvY2FsIHRvb2xraXQgdmVyc2lvbjonLCBlcnIpO1xuICAgIH1cblxuICAgIC8vIDIpIEZldGNoIHJlbW90ZSB0b29sa2l0IHZlcnNpb24gJiBkZWZhdWx0c1xuICAgIGxldCByZW1vdGVUSyA9ICcwLjAuMCc7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHRvb2xraXRVcmwpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICByZW1vdGVUSyA9IGRhdGEudmVyc2lvbiB8fCByZW1vdGVUSztcblxuICAgICAgdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiA9IHJlbW90ZVRLO1xuICAgICAgaWYgKGRhdGEuZGVmYXVsdFBhdGhzKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MubGF0ZXN0RGVmYXVsdHMgPSBkYXRhLmRlZmF1bHRQYXRocztcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0dGluZ3MubGFzdENoZWNrZWQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byBmZXRjaCByZW1vdGUgdG9vbGtpdCB2ZXJzaW9uOicsIGVycik7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coeyBsb2NhbFRLLCByZW1vdGVUSyB9KTtcbiAgICBpZiAoaXNOZXdlclZlcnNpb24ocmVtb3RlVEssIGxvY2FsVEspKSB7XG4gICAgICBuZXcgTm90aWNlKGBcdTI2QTBcdUZFMEYgVG9vbGtpdCB1cGRhdGUgYXZhaWxhYmxlISBJbnN0YWxsZWQ6IHYke2xvY2FsVEt9LCBMYXRlc3Q6IHYke3JlbW90ZVRLfWApO1xuICAgICAgYXdhaXQgdGhpcy5mZXRjaFJlbW90ZUJhc2VsaW5lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBUb29sa2l0IGlzIHVwIHRvIGRhdGUgKHYke2xvY2FsVEt9KWApO1xuICAgIH1cblxuICAgIC8vIDQpIFJlYWQgbG9jYWwgcGx1Z2luIHZlcnNpb25cbiAgICBjb25zdCBsb2NhbFBMID0gdGhpcy5tYW5pZmVzdC52ZXJzaW9uO1xuXG4gICAgLy8gNSkgRmV0Y2ggcmVtb3RlIHBsdWdpbiB2ZXJzaW9uICYgY29tcGFyZVxuICAgIGxldCByZW1vdGVQTCA9IGxvY2FsUEw7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHBsdWdpblVybCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIHJlbW90ZVBMID0gZGF0YS52ZXJzaW9uIHx8IHJlbW90ZVBMO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byBmZXRjaCByZW1vdGUgcGx1Z2luIHZlcnNpb246JywgZXJyKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyh7IGxvY2FsUEwsIHJlbW90ZVBMIH0pO1xuICAgIGlmIChpc05ld2VyVmVyc2lvbihyZW1vdGVQTCwgbG9jYWxQTCkpIHtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjY5OVx1RkUwRiBQbHVnaW4gdXBkYXRlIGF2YWlsYWJsZSEgSW5zdGFsbGVkOiB2JHtsb2NhbFBMfSwgTGF0ZXN0OiB2JHtyZW1vdGVQTH1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IE5vdGljZShgXHUyNzA1IFBsdWdpbiBpcyB1cCB0byBkYXRlICh2JHtsb2NhbFBMfSlgKTtcbiAgICB9XG5cbiAgICAvLyA2KSBGZXRjaCBjaGFuZ2Vsb2cgZm9yIFVJIGRpc3BsYXlcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2hhbmdlbG9nUmVzID0gYXdhaXQgZmV0Y2goY2hhbmdlbG9nVXJsKTtcbiAgICAgIHRoaXMuY2hhbmdlbG9nID0gYXdhaXQgY2hhbmdlbG9nUmVzLnRleHQoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gZmV0Y2ggY2hhbmdlbG9nOicsIGVycik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRjb25zdCBsb2FkZWQgPSAoYXdhaXQgdGhpcy5sb2FkRGF0YSgpKSBhcyBQYXJ0aWFsPFRvb2xraXRTZXR0aW5ncz47XG5cdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBsb2FkZWQpO1xuICBcblx0Ly8gQmFja2ZpbGwgb3VyIG5ldyBmaWVsZHMgaWYgdGhlIHN0b3JlZCBkYXRhIHdhcyBtaXNzaW5nIHRoZW1cblx0aWYgKHR5cGVvZiB0aGlzLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtICE9PSBcInN0cmluZ1wiKSB7XG5cdCAgdGhpcy5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSA9IFwiXCI7XG5cdH1cblx0aWYgKCFBcnJheS5pc0FycmF5KHRoaXMuc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZSkpIHtcblx0ICB0aGlzLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UgPSBbXTtcblx0fVxuICBcblx0dGhpcy5maWxlQ2FjaGVNYW5hZ2VyID0gbmV3IFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyKFxuXHQgIHRoaXMuYXBwLnZhdWx0LFxuXHQgIGxvYWRlZD8uZmlsZUNhY2hlID8/IHt9LFxuXHQgIGFzeW5jICgpID0+IGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKClcblx0KTtcblxuXHQvLyBHaXZlIHZhdWx0IGEgbW9tZW50IHRvIHNldHRsZSwgdGhlbiBjaGVjayBmb3IgbWFya2VyXG5cdHNldFRpbWVvdXQoKCkgPT4gdGhpcy5jaGVja01hcmtlckZpbGUoKSwgNTAwKTtcbiAgfSBcblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh7XG4gICAgICAuLi50aGlzLnNldHRpbmdzLFxuICAgICAgZmlsZUNhY2hlOiB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuZ2V0Q2FjaGUoKSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldExvY2FsVG9vbGtpdFZlcnNpb24oKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJy52ZXJzaW9uLmpzb24nKTtcbiAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgcmV0dXJuIGpzb24udmVyc2lvbiB8fCBudWxsO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byByZWFkIC52ZXJzaW9uLmpzb246JywgZXJyKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUZ1bGxUb29sa2l0UmVwbygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBleGNsdWRlZCA9IFtcbiAgICAgICcub2JzaWRpYW4nLFxuICAgICAgJy5naXRpZ25vcmUnLFxuICAgICAgJy5naXRhdHRyaWJ1dGVzJyxcbiAgICAgICcuRFNfU3RvcmUnLFxuICAgICAgJ3BsdWdpbnMnLFxuICAgICAgJ0NvbXBlbmRpdW0nLFxuICAgICAgJ1JFQURNRS5tZCcsXG4gICAgICAnLnZlcnNpb24uanNvbicsXG4gICAgICAnLmdpdGh1YidcbiAgICBdO1xuXG4gICAgY29uc3QgZmV0Y2hSZXBvUm9vdCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFwaVVybCA9XG4gICAgICAgICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvY29udGVudHMvJztcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBpVXJsKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHJlcG8gcm9vdGApO1xuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgZmV0Y2hSZXBvUm9vdCgpO1xuICAgICAgLy8gZmlsdGVyIG91dCBleGNsdWRlZCB0b3AtbGV2ZWwgaXRlbXNcbiAgICAgIGNvbnN0IGZpbHRlcmVkID0gY29udGVudHMuZmlsdGVyKFxuICAgICAgICAoaXRlbTogYW55KSA9PlxuICAgICAgICAgICFleGNsdWRlZC5zb21lKFxuICAgICAgICAgICAgKGV4KSA9PlxuICAgICAgICAgICAgICBpdGVtLnBhdGggPT09IGV4IHx8XG4gICAgICAgICAgICAgIGl0ZW0ucGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKVxuICAgICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIC8vIFNvcnQgc28gXHUyMDFDdHJlZVx1MjAxRCAoZm9sZGVycykgY29tZSBiZWZvcmUgXHUyMDFDYmxvYlx1MjAxRCAoZmlsZXMpXG4gICAgICBmaWx0ZXJlZC5zb3J0KChhOiBhbnksIGI6IGFueSkgPT4gKGEudHlwZSA9PT0gYi50eXBlID8gMCA6IGEudHlwZSA9PT0gJ3RyZWUnID8gLTEgOiAxKSk7XG5cbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBmaWx0ZXJlZCkge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZGlyJykge1xuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRm9sZGVyRnJvbUdpdEh1YihpdGVtLnBhdGgsIGl0ZW0ucGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChpdGVtLmRvd25sb2FkX3VybCk7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGl0ZW0ucGF0aDtcbiAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQgIT09IGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZShmaWxlUGF0aCwgY29udGVudCwgaXRlbS5wYXRoLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgY29uc3QgbWFya2VyUGF0aCA9ICcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJztcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlclBhdGgpKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobWFya2VyUGF0aCwgJycpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldHRpbmdzLm5lZWRzSW5zdGFsbCA9IGZhbHNlO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzVGFiKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG4gICAgICB9XG5cbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBWVnVuZGVybG9yZSBUb29sa2l0IHN1Y2Nlc3NmdWxseSBpbnN0YWxsZWQhJyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgdXBkYXRlRnVsbFRvb2xraXRSZXBvKCkgZXJyb3I6JywgZXJyKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBGYWlsZWQgdG8gaW5zdGFsbCB0b29sa2l0LiBTZWUgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVTZWxlY3RlZFRvb2xraXRDb250ZW50KCkge1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmF1dG9CYWNrdXBCZWZvcmVVcGRhdGUpIHtcbiAgICAgIGNvbnN0IGZvbGRlciA9IGF3YWl0IHRoaXMuYmFja3VwTWFuYWdlci5iYWNrdXBWYXVsdE1pcnJvcigncHJlLXVwZGF0ZScpO1xuICAgICAgbmV3IE5vdGljZShgVmF1bHQgbWlycm9yIGJhY2t1cCBjcmVhdGVkIGF0OiAke2ZvbGRlcn1gKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubGF0ZXN0RGVmYXVsdHMpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBHaXRIdWIgZGVmYXVsdHMgbm90IGxvYWRlZCB5ZXQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWxsTWFuaWZlc3RGaWxlcyA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5tYXAoKGYpID0+IGYucGF0aCk7XG4gICAgY29uc3QgZmlsZU92ZXJyaWRlcyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMubWFwKChjKSA9PiBbYy5tYW5pZmVzdEtleSwgY10pXG4gICAgKTtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKGNvbnN0IGdoUGF0aCBvZiBhbGxNYW5pZmVzdEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlID0gZmlsZU92ZXJyaWRlc1tnaFBhdGhdO1xuICAgICAgICBpZiAob3ZlcnJpZGU/LmRvVXBkYXRlID09PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTIzRURcdUZFMEYgU2tpcHBpbmcgZGVueS1saXN0ZWQ6ICR7Z2hQYXRofWApO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmF1bHRQYXRoID0gdGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzXG4gICAgICAgICAgPyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZ2hQYXRoKVxuICAgICAgICAgIDogZ2hQYXRoO1xuXG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoKGYpID0+IGYucGF0aCA9PT0gZ2hQYXRoKTtcbiAgICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRW50cnlGcm9tTWFuaWZlc3QoZW50cnksIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBmb2xkZXIgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZm9sZGVyLnBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXIucGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVWZXJzaW9uRmlsZSgpO1xuICAgICAgdGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uID0gdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiE7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFRvb2xraXQgY29udGVudCB1cGRhdGVkLicpO1xuXG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzVGFiLnVwZGF0ZVZlcnNpb25EaXNwbGF5KCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgVXBkYXRlIGZhaWxlZC4gVmVyc2lvbiBub3QgdXBkYXRlZC4nLCBlcnIpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFVwZGF0ZSBmYWlsZWQuIFNlZSBjb25zb2xlIGZvciBkZXRhaWxzLiBWZXJzaW9uIGZpbGUgTk9UIGNoYW5nZWQuJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCkge1xuICAgICAgdGhpcy5lbmFibGVIaWdobGlnaHQoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVGb2xkZXJGcm9tR2l0SHViKGdpdGh1YkZvbGRlclBhdGg6IHN0cmluZywgdmF1bHRGb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgICBjb25zdCBleGNsdWRlZCA9IFtcbiAgICAgICcub2JzaWRpYW4nLFxuICAgICAgJy5naXRpZ25vcmUnLFxuICAgICAgJy5naXRhdHRyaWJ1dGVzJyxcbiAgICAgICcuRFNfU3RvcmUnLFxuICAgICAgJ3BsdWdpbnMnLFxuICAgICAgJ0NvbXBlbmRpdW0nLFxuICAgICAgJ1JFQURNRS5tZCcsXG4gICAgICAnLnZlcnNpb24uanNvbicsXG4gICAgICAnLmdpdGh1YidcbiAgICBdO1xuICAgIGlmIChleGNsdWRlZC5zb21lKChleCkgPT4gZ2l0aHViRm9sZGVyUGF0aCA9PT0gZXggfHwgZ2l0aHViRm9sZGVyUGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYXBpVXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9jb250ZW50cy8ke2dpdGh1YkZvbGRlclBhdGh9YDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggZm9sZGVyOiAke2dpdGh1YkZvbGRlclBhdGh9YCk7XG4gICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0Rm9sZGVyUGF0aCkpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih2YXVsdEZvbGRlclBhdGgpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgIGlmIChleGNsdWRlZC5zb21lKChleCkgPT4gZmlsZS5wYXRoID09PSBleCB8fCBmaWxlLnBhdGguc3RhcnRzV2l0aChgJHtleH0vYCkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt2YXVsdEZvbGRlclBhdGh9LyR7ZmlsZS5uYW1lfWA7XG4gICAgICAgIGlmIChmaWxlLnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIGNvbnN0IGZpbGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKGZpbGUuZG93bmxvYWRfdXJsKTtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZmlsZVJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgICAgICAgaWYgKGV4aXN0cykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoY3VycmVudCAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUoZmlsZVBhdGgsIGN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpKSAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKGZpbGVQYXRoLCBjb250ZW50LCBmaWxlLnBhdGgsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChmaWxlLnR5cGUgPT09ICdkaXInKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVGb2xkZXJGcm9tR2l0SHViKGZpbGUucGF0aCwgYCR7dmF1bHRGb2xkZXJQYXRofS8ke2ZpbGUubmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGb2xkZXIgc3luY2VkOiAke3ZhdWx0Rm9sZGVyUGF0aH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIEZhaWxlZCB0byBzeW5jIGZvbGRlcjogJHt2YXVsdEZvbGRlclBhdGh9YCwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShgXHUyNzRDIEZhaWxlZCB0byB1cGRhdGUgZm9sZGVyOiAke3ZhdWx0Rm9sZGVyUGF0aH1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZWJ1aWxkRmlsZUNhY2hlKCkge1xuICAgIGNvbnN0IGNhY2hlID0gdGhpcy5maWxlQ2FjaGVNYW5hZ2VyO1xuICAgIGNvbnN0IHRhc2tzOiBQcm9taXNlPHZvaWQ+W10gPSBbXTtcblxuICAgIC8vIDEpIEluZGV4IGV4YWN0bHkgdGhlIGZpbGVzIGxpc3RlZCBpbiB0aGUgbWFuaWZlc3RcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgY29uc3QgdmF1bHRQYXRoID0gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0UGF0aCkpIHtcbiAgICAgICAgdGFza3MucHVzaCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodmF1bHRQYXRoKTtcbiAgICAgICAgICBhd2FpdCBjYWNoZS51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGVudHJ5LnBhdGgsIGZhbHNlKTtcbiAgICAgICAgfSkoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMikgSW5kZXggYW55IG1hcmtkb3duIGNoaWxkcmVuIHVuZGVyIG1hbmlmZXN0IGZvbGRlcnNcbiAgICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICBjb25zdCBmb2xkZXJQYXRoID0gZm9sZGVyRW50cnkucGF0aDtcbiAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgIFZhdWx0LnJlY3Vyc2VDaGlsZHJlbihmb2xkZXIsIChmaWxlKSA9PiB7XG4gICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnBhdGg7XG4gICAgICAgICAgICB0YXNrcy5wdXNoKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgICAgICAgICAgICBhd2FpdCBjYWNoZS51cGRhdGVDYWNoZShmaWxlUGF0aCwgY29udGVudCwgZmlsZVBhdGgsIGZhbHNlKTtcbiAgICAgICAgICAgIH0pKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXNrcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCh0YXNrcy5zbGljZShpLCBpICsgYmF0Y2hTaXplKSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgfVxuXG4gIGFzeW5jIHNob3dJbmRleGluZ01vZGFsKCkge1xuICAgIGNvbnN0IG1vZGFsID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcbiAgICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICB9XG4gICAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCgnXHVEODNEXHVERDA0IEluZGV4aW5nIFRvb2xraXQgRmlsZXMuLi4nKTtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgdGV4dDogJ0luZGV4aW5nIGFuZCBjYWNoaW5nIHlvdXIgVlZ1bmRlcmxvcmUgVmF1bHQgZm9yIGZhc3RlciB1cGRhdGVzIGFuZCBzYWZlciBzeW5jaW5nLidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSkodGhpcy5hcHApO1xuXG4gICAgbW9kYWwub3BlbigpO1xuICAgIGF3YWl0IHRoaXMucmVidWlsZEZpbGVDYWNoZSgpO1xuICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgbmV3IE5vdGljZSgnXHUyNzA1IFZWdW5kZXJsb3JlIGNhY2hpbmcgY29tcGxldGUuJyk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVWZXJzaW9uRmlsZSgpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24pIHtcbiAgICAgIGNvbnNvbGUud2FybignTm8gbGF0ZXN0IHZlcnNpb24gZm91bmQ7IHNraXBwaW5nIHZlcnNpb24gZmlsZSB1cGRhdGUuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHZlcnNpb25QYXRoID0gJy52ZXJzaW9uLmpzb24nO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gfSwgbnVsbCwgMik7XG4gICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmVyc2lvblBhdGgpO1xuICAgIGlmIChleGlzdHMpIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUodmVyc2lvblBhdGgsIGNvbnRlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUodmVyc2lvblBhdGgsIGNvbnRlbnQpO1xuICAgIH1cbiAgfVxuXG4gICAgLyoqIG1haW4udHMgKiovXG5cbiAgLyoqIFxuICAgKiBJbnN0YWxsIHRoZSBzZWxlY3RlZCBjb21wZW5kaXVtIGFuZCB6ZXJvIG9yIG1vcmUgcmVmZXJlbmNlIGVkaXRpb25zLlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluc3RhbGxGdWxsVG9vbGtpdChcbiAgICBvcHRzOiB7IGNvbXBlbmRpdW06IHN0cmluZzsgcmVmZXJlbmNlczogc3RyaW5nW10gfSA9IHsgY29tcGVuZGl1bTogXCJcIiwgcmVmZXJlbmNlczogW10gfVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IGNvbXBlbmRpdW0sIHJlZmVyZW5jZXMgfSA9IG9wdHM7XG4gICAgaWYgKCFjb21wZW5kaXVtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjb21wZW5kaXVtIGVkaXRpb24gc2VsZWN0ZWRcIik7XG4gICAgfVxuXG4gIC8vIDEpIFNob3cgdGhlIFx1MjAxQ0luc3RhbGxpbmdcdTIwMjZcdTIwMUQgc3Bpbm5lclxuICBjb25zdCBwbGFjZWhvbGRlciA9IG5ldyBJbnN0YWxsaW5nTW9kYWwodGhpcy5hcHApO1xuICBwbGFjZWhvbGRlci5vcGVuKCk7XG5cbiAgbGV0IGluc3RhbGxTdWNjZWVkZWQgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICAvLyAyKSBTdGF0aWMgY29weSBvZiBldmVyeXRoaW5nIGluIHRoZSByZXBvIEVYQ0VQVCBhbnkgQ29tcGVuZGl1bS8qXG4gICAgY29uc3QgdHJlZUFwaSA9XG4gICAgICBcImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9naXQvdHJlZXMvbWFpbj9yZWN1cnNpdmU9MVwiO1xuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaCh0cmVlQXBpKTtcbiAgICBpZiAoIXJlc3Aub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxpc3QgcmVwbyB0cmVlOiAke3Jlc3Auc3RhdHVzVGV4dH1gKTtcbiAgICB9XG4gICAgY29uc3QganNvbjogYW55ID0gYXdhaXQgcmVzcC5qc29uKCk7XG4gICAgY29uc3QgaXRlbXMgPSBBcnJheS5pc0FycmF5KGpzb24udHJlZSkgPyBqc29uLnRyZWUgOiBbXTtcblxuICAgIC8vIFVzZSB5b3VyIGV4Y2x1ZGVkUGF0aHMgKHdoaWNoIGFscmVhZHkgY29udGFpbnMgXCJDb21wZW5kaXVtXCIpXG4gICAgY29uc3Qgc3RhdGljRW50cmllcyA9IChpdGVtcyBhcyBBcnJheTx7IHBhdGg6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+KVxuICAgICAgLmZpbHRlcigoaXRlbSkgPT5cbiAgICAgICAgIXRoaXMuZXhjbHVkZWRQYXRocy5zb21lKGV4ID0+XG4gICAgICAgICAgaXRlbS5wYXRoID09PSBleCB8fCBpdGVtLnBhdGguc3RhcnRzV2l0aChgJHtleH0vYClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IChhLnR5cGUgPT09IGIudHlwZSA/IDAgOiBhLnR5cGUgPT09IFwidHJlZVwiID8gLTEgOiAxKSk7XG5cbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHN0YXRpY0VudHJpZXMpIHtcbiAgICAgIGlmIChlbnRyeS50eXBlID09PSBcInRyZWVcIikge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZW50cnkucGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJhd1VybCA9IFxuICAgICAgICAgIGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGVudHJ5LnBhdGgpfWA7XG4gICAgICAgIGNvbnN0IGZpbGVSZXNwID0gYXdhaXQgZmV0Y2gocmF3VXJsKTtcbiAgICAgICAgaWYgKCFmaWxlUmVzcC5vaykgY29udGludWU7XG4gICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBmaWxlUmVzcC50ZXh0KCk7XG4gICAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkge1xuICAgICAgICAgIGNvbnN0IG9sZCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChlbnRyeS5wYXRoKTtcbiAgICAgICAgICBpZiAob2xkICE9PSB0ZXh0KSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGVudHJ5LnBhdGgsIHRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZW50cnkucGF0aCwgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAgIHRoaXMuc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0gPSBjb21wZW5kaXVtO1xuICAgICAgdGhpcy5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlICA9IHJlZmVyZW5jZXM7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgaW1wb3J0UnVsZXNldERhdGEoeyBhcHA6IHRoaXMuYXBwLCBlZGl0aW9uS2V5OiBjb21wZW5kaXVtLCB0YXJnZXRQYXRoOiBgQ29tcGVuZGl1bWAgfSksXG4gICAgICAgLi4ucmVmZXJlbmNlcy5tYXAocmVmS2V5ID0+XG4gICAgICBpbXBvcnRSdWxlc2V0RGF0YSh7IGFwcDogdGhpcy5hcHAsIGVkaXRpb25LZXk6IHJlZktleSwgdGFyZ2V0UGF0aDogcmVmS2V5IH0pXG4gICAgKVxuICBdKTtcblxuICAgIC8vIDMpIEtpY2sgb2ZmIHlvdXIgSlNPTlx1MjE5Mk1EIHBhcnNlcnMgaW4gcGFyYWxsZWxcbiAgICBjb25zdCBwYXJzZUpvYnMgPSBbXG4gICAgICBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICAgIGFwcDogdGhpcy5hcHAsXG4gICAgICAgIGVkaXRpb25LZXk6IGNvbXBlbmRpdW0sXG4gICAgICAgIHRhcmdldFBhdGg6IGBDb21wZW5kaXVtYCxcbiAgICAgIH0pLFxuICAgICAgLi4ucmVmZXJlbmNlcy5tYXAocmVmS2V5ID0+XG4gICAgICAgIGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICAgICAgICBhcHA6IHRoaXMuYXBwLFxuICAgICAgICAgIGVkaXRpb25LZXk6IHJlZktleSxcbiAgICAgICAgICB0YXJnZXRQYXRoOiBgJHtyZWZLZXl9YCxcbiAgICAgICAgfSlcbiAgICAgICksXG4gICAgXTtcbiAgICAvLyB0aGlzIHdvblx1MjAxOXQgcmVzb2x2ZSB1bnRpbCBfYWxsXyBwYXJzZXJzIGhhdmUgZmluaXNoZWQgd3JpdGluZyB0aGVpciBNRCBmaWxlc1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHBhcnNlSm9icyk7XG5cbiAgICAvLyA0KSBQb3N0LWluc3RhbGwgaG91c2VrZWVwaW5nXG4gICAgY29uc3QgbWFya2VyID0gXCIudnZ1bmRlcmxvcmVfaW5zdGFsbGVkXCI7XG4gICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobWFya2VyKSkpIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShtYXJrZXIsIFwiXCIpO1xuICAgIH1cbiAgICB0aGlzLnNldHRpbmdzLm5lZWRzSW5zdGFsbCAgICAgPSBmYWxzZTtcbiAgICB0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQgPSB0cnVlO1xuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgdGhpcy5lbmFibGVIaWdobGlnaHQoKTtcblxuICAgIGluc3RhbGxTdWNjZWVkZWQgPSB0cnVlO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiXHUyNzRDIGluc3RhbGxGdWxsVG9vbGtpdCgpXCIsIGVycik7XG4gIH0gZmluYWxseSB7XG4gICAgLy8gb25seSBub3cgY2xvc2UgdGhlIHNwaW5uZXIgJiByZWRyYXcgdGhlIFVJXG4gICAgcGxhY2Vob2xkZXIuY2xvc2UoKTtcbiAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikgdGhpcy5zZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG4gICAgbmV3IE5vdGljZShcbiAgICAgIGluc3RhbGxTdWNjZWVkZWRcbiAgICAgICAgPyBcIlx1MjcwNSBWVnVuZGVybG9yZSBUb29sa2l0IHN1Y2Nlc3NmdWxseSBpbnN0YWxsZWQhXCJcbiAgICAgICAgOiBcIlx1Mjc0QyBGYWlsZWQgdG8gaW5zdGFsbCB0b29sa2l0LiBTZWUgY29uc29sZSBmb3IgZGV0YWlscy5cIlxuICAgICk7XG4gIH1cbn1cblxuLy8gKiBSZS1wYXJzZSBhbGwgZ2FtZXNldCBkYXRhIChydWxlc2V0IGNvbXBlbmRpdW0gKyByZWZlcmVuY2Ugc2V0cylcbmFzeW5jIHJlZnJlc2hHYW1lU2V0RGF0YSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeyBydWxlc2V0Q29tcGVuZGl1bSwgcnVsZXNldFJlZmVyZW5jZSB9ID0gdGhpcy5zZXR0aW5ncztcblxuICBpZiAoIXJ1bGVzZXRDb21wZW5kaXVtICYmIHJ1bGVzZXRSZWZlcmVuY2UubGVuZ3RoID09PSAwKSB7XG4gICAgbmV3IE5vdGljZShcIlx1MjZBMFx1RkUwRiBObyBnYW1lc2V0IGtleXMgc2V0OyBub3RoaW5nIHRvIHJlZnJlc2guXCIpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGpvYnM6IFByb21pc2U8dW5rbm93bj5bXSA9IFtdO1xuICBpZiAocnVsZXNldENvbXBlbmRpdW0pIHtcbiAgICBqb2JzLnB1c2goaW1wb3J0UnVsZXNldERhdGEoe1xuICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgIGVkaXRpb25LZXk6IHJ1bGVzZXRDb21wZW5kaXVtLFxuICAgICAgdGFyZ2V0UGF0aDogXCJDb21wZW5kaXVtXCIsXG4gICAgfSkpO1xuICB9XG4gIGZvciAoY29uc3QgcmVmIG9mIHJ1bGVzZXRSZWZlcmVuY2UpIHtcbiAgICBqb2JzLnB1c2goaW1wb3J0UnVsZXNldERhdGEoe1xuICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgIGVkaXRpb25LZXk6IHJlZixcbiAgICAgIHRhcmdldFBhdGg6IHJlZixcbiAgICB9KSk7XG4gIH1cblxuICBhd2FpdCBQcm9taXNlLmFsbChqb2JzKTtcbiAgbmV3IE5vdGljZShcIlx1MjcwNSBHYW1lIFNldCBEYXRhIHJlZnJlc2hlZC5cIik7XG59XG5cblxuXG59XG5leHBvcnQgeyBJbnN0YWxsaW5nTW9kYWwgfTsiLCAiaW1wb3J0IHtcblx0UGx1Z2luU2V0dGluZ1RhYixcblx0U2V0dGluZyxcblx0QXBwLFxuXHRURmlsZSxcblx0VEZvbGRlcixcblx0QWJzdHJhY3RJbnB1dFN1Z2dlc3QsXG5cdHNldEljb24sXG5cdE1vZGFsLFxuXHRNYXJrZG93blJlbmRlcmVyLFxuXHRDb21wb25lbnQsXG5cdE5vdGljZSxcblx0VGV4dENvbXBvbmVudCxcblx0VG9nZ2xlQ29tcG9uZW50LFxuXHRCdXR0b25Db21wb25lbnQsXG5cdERyb3Bkb3duQ29tcG9uZW50LFxuXHRTZWFyY2hDb21wb25lbnRcbn0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBDb25maXJtRnJlc2hJbnN0YWxsTW9kYWwgfSBmcm9tICcuL2ZpcnN0aW5zdGFsbGNvbmZpcm0nO1xuaW1wb3J0IHsgc2hvd0N1c3RvbUluc3RhbGxNb2RhbCB9IGZyb20gXCIuL2N1c3RvbUluc3RhbGxNb2RhbFwiO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IEFWQUlMQUJMRV9FRElUSU9OUywgRWRpdGlvbiB9IGZyb20gJy4vZWRpdGlvbnMnXG5cblxuLy8gRGVmaW5lIHlvdXIgQ3VzdG9tUGF0aEVudHJ5IGludGVyZmFjZS5cbmludGVyZmFjZSBDdXN0b21QYXRoRW50cnkge1xuXHR2YXVsdFBhdGg6IHN0cmluZztcblx0bWFuaWZlc3RLZXk6IHN0cmluZztcblx0ZG9VcGRhdGU6IGJvb2xlYW47XG59XG5cbi8vIEZpbGVQYXRoU3VnZ2VzdGVyIGZvciBsaXZlIHNlYXJjaCBvbiB2YXVsdCBmaWxlcy5cbmNsYXNzIEZpbGVQYXRoU3VnZ2VzdGVyIGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8c3RyaW5nPiB7XG5cdHByaXZhdGUgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcblx0cHJpdmF0ZSBwYXRoczogeyBwYXRoOiBzdHJpbmc7IGlzRm9sZGVyOiBib29sZWFuIH1bXSA9IFtdO1xuXHRwcml2YXRlIGN1cnJlbnRTdWdnZXN0aW9uczogc3RyaW5nW10gPSBbXTtcblx0cHJpdmF0ZSByZW5kZXJlZFN1Z2dlc3Rpb25zOiBNYXA8SFRNTEVsZW1lbnQsIHN0cmluZz4gPSBuZXcgTWFwKCk7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcblx0XHRzdXBlcihhcHAsIGlucHV0RWwpO1xuXHRcdHRoaXMuaW5wdXRFbCA9IGlucHV0RWw7XG5cblx0XHQvLyBHZXQgZm9sZGVycyBhbmQgbWFya2Rvd24gZmlsZXMgZnJvbSB0aGUgdmF1bHQuXG5cdFx0Y29uc3QgZm9sZGVycyA9IE9iamVjdC52YWx1ZXMoYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkpXG5cdFx0XHQuZmlsdGVyKChmKTogZiBpcyBURm9sZGVyID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKVxuXHRcdFx0Lm1hcChmID0+ICh7IHBhdGg6IGYucGF0aCwgaXNGb2xkZXI6IHRydWUgfSkpO1xuXHRcdGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKVxuXHRcdFx0Lm1hcChmID0+ICh7IHBhdGg6IGYucGF0aCwgaXNGb2xkZXI6IGZhbHNlIH0pKTtcblx0XHR0aGlzLnBhdGhzID0gWy4uLmZvbGRlcnMsIC4uLmZpbGVzXTtcblxuXHRcdHRoaXMuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjb250YWluZXIgPSAodGhpcyBhcyBhbnkpLmNvbnRhaW5lckVsIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRcdGlmICghY29udGFpbmVyKSByZXR1cm47XG5cdFx0XHRcdFx0Y29uc3Qgc2VsZWN0ZWRFbCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc3VnZ2VzdGlvbi1pdGVtLmlzLXNlbGVjdGVkJykgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdFx0aWYgKHNlbGVjdGVkRWwpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNlbGVjdGVkUGF0aCA9IHRoaXMucmVuZGVyZWRTdWdnZXN0aW9ucy5nZXQoc2VsZWN0ZWRFbCk7XG5cdFx0XHRcdFx0XHRpZiAoc2VsZWN0ZWRQYXRoKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0U3VnZ2VzdGlvbihzZWxlY3RlZFBhdGgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgMCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRnZXRTdWdnZXN0aW9ucyhpbnB1dFN0cjogc3RyaW5nKTogc3RyaW5nW10ge1xuXHRcdGNvbnN0IHF1ZXJ5ID0gaW5wdXRTdHIudG9Mb3dlckNhc2UoKTtcblx0XHR0aGlzLmN1cnJlbnRTdWdnZXN0aW9ucyA9IHRoaXMucGF0aHNcblx0XHRcdC5maWx0ZXIoKHsgcGF0aCB9KSA9PiBwYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpKVxuXHRcdFx0Lm1hcChwID0+IHAucGF0aCk7XG5cdFx0cmV0dXJuIHRoaXMuY3VycmVudFN1Z2dlc3Rpb25zO1xuXHR9XG5cblx0cmVuZGVyU3VnZ2VzdGlvbihwYXRoOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGlzRm9sZGVyID0gdGhpcy5wYXRocy5maW5kKHAgPT4gcC5wYXRoID09PSBwYXRoKT8uaXNGb2xkZXI7XG5cdFx0ZWwuYWRkQ2xhc3MoXCJtb2QtY29tcGxleFwiKTtcblx0XHRjb25zdCBpY29uRWwgPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWljb24nIH0pO1xuXHRcdHNldEljb24oaWNvbkVsLCBpc0ZvbGRlciA/ICdmb2xkZXInIDogJ2RvY3VtZW50Jyk7XG5cblx0XHRjb25zdCBuYW1lID0gcGF0aC5zcGxpdCgnLycpLnBvcCgpITtcblx0XHRjb25zdCBkaXNwbGF5TmFtZSA9IGlzRm9sZGVyID8gbmFtZSA6IG5hbWUucmVwbGFjZSgvXFwubWQkLywgJycpO1xuXHRcdGVsLmNyZWF0ZURpdih7IHRleHQ6IGRpc3BsYXlOYW1lLCBjbHM6ICdzdWdnZXN0aW9uLXRpdGxlJyB9KTtcblx0XHRjb25zdCBwYXJlbnRQYXRoID0gcGF0aC5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKS5qb2luKCcvJyk7XG5cdFx0ZWwuY3JlYXRlRGl2KHsgdGV4dDogcGFyZW50UGF0aCwgY2xzOiAnc2VhcmNoLXN1Z2dlc3QtaW5mby10ZXh0JyB9KTtcblx0XHRlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGU6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR0aGlzLnNlbGVjdFN1Z2dlc3Rpb24ocGF0aCk7XG5cdFx0fSk7XG5cdFx0dGhpcy5yZW5kZXJlZFN1Z2dlc3Rpb25zLnNldChlbCwgcGF0aCk7XG5cdH1cblxuXHRzZWxlY3RTdWdnZXN0aW9uKHBhdGg6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMuaW5wdXRFbC52YWx1ZSA9IHBhdGg7XG5cdFx0dGhpcy5pbnB1dEVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaW5wdXRcIikpO1xuXHRcdHRoaXMuY2xvc2UoKTtcblx0fVxufVxuXG4vLyBNb2RhbCBmb3IgZGlzcGxheWluZyB0aGUgY2hhbmdlbG9nLlxuY2xhc3MgTWFya2Rvd25QcmV2aWV3TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIGNvbnRlbnQ6IHN0cmluZykge1xuXHRcdHN1cGVyKGFwcCk7XG5cdH1cblxuXHRvbk9wZW4oKTogdm9pZCB7XG5cdFx0dGhpcy5jb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdUb29sa2l0IENoYW5nZWxvZycgfSk7XG5cdFx0Y29uc3QgbWQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcblx0XHRjb25zdCBkdW1teUNvbXBvbmVudCA9IG5ldyBjbGFzcyBleHRlbmRzIENvbXBvbmVudCB7fSgpO1xuXHRcdE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24odGhpcy5jb250ZW50LCBtZCwgJy8nLCBkdW1teUNvbXBvbmVudCk7XG5cdH1cblxuXHRvbkNsb3NlKCk6IHZvaWQge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuLy8gVGhlIGZ1bGwgc2V0dGluZ3MgdGFiLlxuZXhwb3J0IGNsYXNzIFRvb2xraXRTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47ICBcblx0fSAgIFxuXHRwcml2YXRlIHJlbmRlckhlYWRlcihyb290OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGhlYWRlciA9IHJvb3QuY3JlYXRlRGl2KCk7XG5cdFx0aGVhZGVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0aGVhZGVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nO1xuXHRcdGhlYWRlci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG5cdFx0aGVhZGVyLnN0eWxlLmJvcmRlckJvdHRvbSA9ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknO1xuXHRcdGhlYWRlci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMmVtJztcblx0XHRoZWFkZXIuc3R5bGUucGFkZGluZ0JvdHRvbSA9ICcwLjVlbSc7XG5cdCAgXG5cdFx0aGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZWdW5kZXJsb3JlIFRvb2xraXQgU2V0dGluZ3MnIH0pO1xuXHQgIFxuXHRcdGNvbnN0IGhlYWRlckJ0bnMgPSBoZWFkZXIuY3JlYXRlRGl2KCk7XG5cdFx0aGVhZGVyQnRucy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdGhlYWRlckJ0bnMuc3R5bGUuZ2FwID0gJzAuNWVtJztcblx0ICBcblx0XHRjb25zdCBkb2NzQnRuID0gaGVhZGVyQnRucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRG9jcycgfSk7XG5cdFx0ZG9jc0J0bi5vbmNsaWNrID0gKCkgPT4gd2luZG93Lm9wZW4oJ2h0dHA6Ly92dnVuZGVybG9yZS5jb20nLCAnX2JsYW5rJyk7XG5cdCAgXG5cdFx0Y29uc3QgZ2l0aHViQnRuID0gaGVhZGVyQnRucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnR2l0SHViJyB9KTtcblx0XHRnaXRodWJCdG4ub25jbGljayA9ICgpID0+XG5cdFx0ICB3aW5kb3cub3BlbignaHR0cHM6Ly9naXRodWIuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwnLCAnX2JsYW5rJyk7XG5cdCAgXG5cdFx0Y29uc3Qga29maUJ0biA9IGhlYWRlckJ0bnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHQgIHRleHQ6ICdcdTI2MTUgS28tZmknLFxuXHRcdCAgY2xzOiAnbW9kLWN0YScsXG5cdFx0fSk7XG5cdFx0a29maUJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmNTkwMCc7XG5cdFx0a29maUJ0bi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG5cdFx0a29maUJ0bi5vbmNsaWNrID0gKCkgPT4gd2luZG93Lm9wZW4oJ2h0dHBzOi8va28tZmkuY29tL3Z2dW5kZXJsb3JlJywgJ19ibGFuaycpO1xuXHQgIH1cblx0ICBcblx0XHRwcml2YXRlIHJlbmRlckZpcnN0UnVuQ2FyZChyb290OiBIVE1MRWxlbWVudCl7XG5cdFx0XHRcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZWVkc0luc3RhbGwpIHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0gID0gJyc7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UgICAgPSBbXTtcblx0XHRcdH1cblx0XHRcdC8vIDEpIE91dGVyIHdyYXBwZXJcblx0XHRcdGNvbnN0IGNhcmQgPSByb290LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Z2dW5kZXJsb3JlLWZpcnN0LXJ1bicgfSk7XG5cdFx0XHRPYmplY3QuYXNzaWduKGNhcmQuc3R5bGUsIHtcblx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdFx0YWxpZ25JdGVtczogJ2NlbnRlcicsXG5cdFx0XHR0ZXh0QWxpZ246ICdjZW50ZXInLFxuXHRcdFx0bWFyZ2luVG9wOiAnMmVtJyxcblx0XHRcdHBhZGRpbmc6ICcxZW0nLFxuXHRcdFx0Ym9yZGVyOiAnMnB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcblx0XHRcdGJvcmRlclJhZGl1czogJzE4cHgnLCAgICAgICAgLyogKG9wdGlvbmFsKSByb3VuZCB0aGUgY29ybmVycyBzbGlnaHRseSAqL1xuXHRcdFx0YmFja2dyb3VuZENvbG9yOiAndmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KScsIC8qIChvcHRpb25hbCkgd2hpdGUvZ3JheSBiYWNrZ3JvdW5kICovXG5cdFx0XHR9KTtcblx0XHRcblx0XHRcdC8vIDIpIEhlYWRlclxuXHRcdFx0Y29uc3QgdGl0bGUgPSBjYXJkLmNyZWF0ZUVsKCdoMicsIHtcblx0XHRcdHRleHQ6ICdcdUQ4M0NcdURGRjAgV2VsY29tZSB0byBWVnVuZGVybG9yZScsXG5cdFx0XHRjbHM6ICd2di1jYXJkLXRpdGxlJyxcblx0XHRcdH0pO1xuXHRcdFx0Ly8gR2l2ZSB0aGUgdGl0bGUgYSBsaXR0bGUgYm90dG9tIG1hcmdpblxuXHRcdFx0dGl0bGUuc3R5bGUubWFyZ2luQm90dG9tID0gJzAuNWVtJztcblx0XHRcblx0XHRcdC8vIDMpIEluc3RydWN0aW9uYWwgY29weVxuXHRcdFx0Y29uc3QgZGVzYyA9IGNhcmQuY3JlYXRlRWwoJ3AnLCB7XG5cdFx0XHR0ZXh0OlxuXHRcdFx0XHQnR2V0IHN0YXJ0ZWQgYnkgaW5zdGFsbGluZyB0aGUgZGVmYXVsdCB0b29sa2l0XHUyMDE0XFxub3IgY2hvb3NlIGluZGl2aWR1YWwgcGllY2VzIHRvIHN1aXQgeW91ciB2YXVsdC4nLFxuXHRcdFx0Y2xzOiAndnYtY2FyZC1kZXNjJyxcblx0XHRcdH0pO1xuXHRcdFx0Ly8gU2xpZ2h0IGJvdHRvbSBtYXJnaW4gc28gaXQgZG9lc24ndCBidXR0IHJpZ2h0IHVwIGFnYWluc3QgdGhlIGJ1dHRvbnNcblx0XHRcdGRlc2Muc3R5bGUubWFyZ2luQm90dG9tID0gJzEuMjVlbSc7XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSVUxFU0VUIC8gUkVGRVJFTkNFIEdSSUQgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBwbHVnaW4gPSB0aGlzLnBsdWdpbjtcblxuLy8gMSkgR3JpZCBjb250YWluZXJcbmNvbnN0IGdyaWQgPSBjYXJkLmNyZWF0ZURpdigpO1xuT2JqZWN0LmFzc2lnbihncmlkLnN0eWxlLCB7XG4gIGRpc3BsYXk6ICdncmlkJyxcbiAgZ3JpZFRlbXBsYXRlQ29sdW1uczogJ21heC1jb250ZW50IG1heC1jb250ZW50JyxcbiAgY29sdW1uR2FwOiAnMXJlbScsXG4gIHJvd0dhcDogJzAuMjVyZW0nLFxuICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gIGp1c3RpZnlJdGVtczogJ2NlbnRlcicsXG4gIG1hcmdpbkJvdHRvbTogJzFyZW0nLFxufSk7XG5cbi8vIDIpIEhlYWRlciByb3dcbmNvbnN0IGxhYmVsUnMgPSBncmlkLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdSdWxlc2V0JyB9KTtcbmxhYmVsUnMuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbmNvbnN0IGxhYmVsUmVmID0gZ3JpZC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnUmVmZXJlbmNlIChvcHRpb25hbCknIH0pO1xubGFiZWxSZWYuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcblxuLy8gMykgSW5wdXQgY2VsbHNcbmNvbnN0IHJzQ2VsbCA9IGdyaWQuY3JlYXRlRGl2KHsgYXR0cjogeyBzdHlsZTogJ3RleHQtYWxpZ246Y2VudGVyJyB9IH0pO1xuY29uc3QgcmVmQ2VsbCA9IGdyaWQuY3JlYXRlRGl2KHsgYXR0cjogeyBzdHlsZTogJ3RleHQtYWxpZ246Y2VudGVyJyB9IH0pO1xuXG4vLyA0KSBNdXRlZCwgaXRhbGljIHN1bW1hcnkgYmFyIChzcGFucyBib3RoIGNvbHVtbnMpXG5jb25zdCBzdW1tYXJ5QmFyID0gZ3JpZC5jcmVhdGVEaXYoKTtcbk9iamVjdC5hc3NpZ24oc3VtbWFyeUJhci5zdHlsZSwge1xuICBncmlkQ29sdW1uOiAnMSAvIHNwYW4gMicsXG4gIGRpc3BsYXk6ICdmbGV4JyxcbiAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIGZsZXhXcmFwOiAnd3JhcCcsXG4gIGdhcDogJzAuNXJlbScsXG4gIGZvbnRTaXplOiAnMC44NWVtJyxcbiAgY29sb3I6ICd2YXIoLS10ZXh0LW11dGVkKScsXG4gIGZvbnRTdHlsZTogJ2l0YWxpYycsXG4gIG1hcmdpblRvcDogJzAuMjVyZW0nLFxuICBtYXJnaW5Cb3R0b206ICcxcmVtJyxcbn0pO1xuY29uc3QgcnVsZXNldFNwYW4gPSBzdW1tYXJ5QmFyLmNyZWF0ZVNwYW4oe1xuICB0ZXh0OiBgUnVsZXNldDogJHtcbiAgICBwbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW1cbiAgICAgID8gYEQmRCA1RSAoJHtwbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW19KWBcbiAgICAgIDogJydcbiAgfWAsXG59KTtcbnJ1bGVzZXRTcGFuLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG5zdW1tYXJ5QmFyLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnUmVmZXJlbmNlczonIH0pO1xuY29uc3QgY2hpcHNXcmFwcGVyID0gc3VtbWFyeUJhci5jcmVhdGVEaXYoKTtcbk9iamVjdC5hc3NpZ24oY2hpcHNXcmFwcGVyLnN0eWxlLCB7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAnNHB4JyB9KTtcblxuLy8gSGVscGVyIHRvIHJlbmRlciBhIGNoaXBcbmZ1bmN0aW9uIGFkZENoaXAoaWQ6IHN0cmluZykge1xuXHRjb25zdCBlZCA9IEFWQUlMQUJMRV9FRElUSU9OUy5maW5kKGUgPT4gZS5pZCA9PT0gaWQpITtcblx0Y29uc3QgY2hpcCA9IGNoaXBzV3JhcHBlci5jcmVhdGVEaXYoe1xuXHQgIGF0dHI6IHtcblx0XHRzdHlsZTpcblx0XHQgICdiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6MnB4IDZweDsgJyArXG5cdFx0ICAnYm9yZGVyLXJhZGl1czo0cHg7IGRpc3BsYXk6aW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjRweDsnXG5cdCAgfVxuXHR9KTtcblx0Y2hpcC5jcmVhdGVTcGFuKHsgdGV4dDogZWQubGFiZWwgfSk7XG5cdGNvbnN0IHJlbSA9IGNoaXAuY3JlYXRlU3Bhbih7XG5cdCAgdGV4dDogJ1x1MDBENycsXG5cdCAgYXR0cjogeyBzdHlsZTogJ2N1cnNvcjpwb2ludGVyOyBtYXJnaW4tbGVmdDo0cHg7JyB9XG5cdH0pO1xuXHRyZW0ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0ICBwbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZSA9IHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlLmZpbHRlcih4ID0+IHggIT09IGlkKTtcblx0ICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdCAgY2hpcC5yZW1vdmUoKTtcblx0ICB1cGRhdGVJbnN0YWxsQnV0dG9ucygpO1xuXHR9O1xuICB9XG4gIDtcblxuLy8gSW5pdGlhbCBjaGlwcyBkcmF3XG5wbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZS5mb3JFYWNoKGUgPT4gYWRkQ2hpcChlKSk7XG5cbi8vIDUpIFJ1bGVzZXQgZHJvcGRvd25cbmNvbnN0IHJzRHJvcGRvd24gPSBuZXcgRHJvcGRvd25Db21wb25lbnQocnNDZWxsKTtcbnJzRHJvcGRvd24uYWRkT3B0aW9uKCcnLCAnU2VsZWN0IGVkaXRpb25cdTIwMjYnKTtcbkFWQUlMQUJMRV9FRElUSU9OUy5mb3JFYWNoKChlZDogRWRpdGlvbikgPT4ge1xuICByc0Ryb3Bkb3duLmFkZE9wdGlvbihlZC5pZCwgZWQubGFiZWwpO1xufSk7XG5yc0Ryb3Bkb3duXG4gIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSlcbiAgLm9uQ2hhbmdlKGFzeW5jICh2YWwpID0+IHtcbiAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSA9IHZhbDtcbiAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuICAgIC8vIExpdmVcdTIwMTB1cGRhdGUgeW91ciBzdW1tYXJ5IGJhcjpcbiAgICBjb25zdCBjaG9zZW4gPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZChlID0+IGUuaWQgPT09IHZhbCk7XG4gICAgcnVsZXNldFNwYW4udGV4dENvbnRlbnQgPSBjaG9zZW4gPyBjaG9zZW4ubGFiZWwgOiAnJztcblxuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyByZWZlcmVuY2UgY2hpcHM6XG4gICAgY2hpcHNXcmFwcGVyLmVtcHR5KCk7XG5cbiAgICB1cGRhdGVJbnN0YWxsQnV0dG9ucygpO1xuICB9KTtcblxuICBjb25zdCBzZWFyY2hXcmFwcGVyRWwgPSByZWZDZWxsLmNyZWF0ZURpdih7IGF0dHI6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOmNlbnRlcjsnIH0gfSk7XG4gIGNvbnN0IHNlYXJjaENvbXAgPSBuZXcgU2VhcmNoQ29tcG9uZW50KHNlYXJjaFdyYXBwZXJFbCk7XG4gIHNlYXJjaENvbXAuc2V0UGxhY2Vob2xkZXIoJ0FkZCByZWZlcmVuY2UgcnVsZXNcdTIwMjYnKTtcbiAgY29uc3Qgc3VnZ2VzdGlvbklucHV0RWwgPSBzZWFyY2hDb21wLmlucHV0RWw7XG4gIFxuICBuZXcgY2xhc3MgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxzdHJpbmc+IHtcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcblx0ICBzdXBlcihhcHAsIGlucHV0RWwpO1xuXHR9XG4gIFxuXHQvLyAxKSBQcm9wb3NlIGVkaXRpb24gSURzIChtaW51cyB0aGUgb25lIHRoZXkgcGlja2VkIGFzIHRoZSBtYWluIHJ1bGVzZXQpXG5cdGdldFN1Z2dlc3Rpb25zKGlucHV0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG5cdCAgcmV0dXJuIEFWQUlMQUJMRV9FRElUSU9OU1xuXHRcdC5maWx0ZXIoZWQgPT4gZWQuaWQgIT09IHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSkgICAgICAgICAgICAvLyBmaWx0ZXIgb3V0IHRoZSBjaG9zZW4gcnVsZXNldFxuXHRcdC5maWx0ZXIoZWQgPT4gZWQubGFiZWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhpbnB1dC50b0xvd2VyQ2FzZSgpKSkgICAgIC8vIG1hdGNoIG9uIGxhYmVsIHRleHRcblx0XHQubWFwKGVkID0+IGVkLmlkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gdGhlIElEIGZvciBlYWNoXG5cdH1cbiAgXG5cdC8vIDIpIFJlbmRlciB0aGUgaHVtYW4tcmVhZGFibGUgbGFiZWxcblx0cmVuZGVyU3VnZ2VzdGlvbihpdGVtOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHQgIGNvbnN0IGVkID0gQVZBSUxBQkxFX0VESVRJT05TLmZpbmQoZSA9PiBlLmlkID09PSBpdGVtKSE7XG5cdCAgZWwuY3JlYXRlRGl2KHsgdGV4dDogZWQubGFiZWwgfSk7XG5cdH1cbiAgXG5cdC8vIDMpIFdoZW4gdGhleSBwaWNrIG9uZSwgc3RvcmUgaXRzIElEIGFuZCBhZGQgYSBjaGlwXG5cdHNlbGVjdFN1Z2dlc3Rpb24oaXRlbTogc3RyaW5nKTogdm9pZCB7XG5cdCAgaWYgKCFwbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZS5pbmNsdWRlcyhpdGVtKSkge1xuXHRcdHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlLnB1c2goaXRlbSk7XG5cdFx0cGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdGFkZENoaXAoaXRlbSk7XG5cdCAgfVxuXHQgIHRoaXMuY2xvc2UoKTtcblx0ICBzdWdnZXN0aW9uSW5wdXRFbC52YWx1ZSA9ICcnO1xuXHQgIHVwZGF0ZUluc3RhbGxCdXR0b25zKCk7XG5cdH1cbiAgfSh0aGlzLmFwcCwgc3VnZ2VzdGlvbklucHV0RWwpO1xuICBcblxuXG5cblxuXHRcdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIEJ1dHRvbiByb3cgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCBidG5Sb3cxID0gY2FyZC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2di1idXR0b24tcm93JyB9KTtcblx0XHRcdE9iamVjdC5hc3NpZ24oYnRuUm93MS5zdHlsZSwge1xuXHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0Z2FwOiAnMC43NWVtJyxcblx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcblx0XHRcdG1hcmdpbkJvdHRvbTogJzEuNWVtJyxcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBpbnN0YWxsQnRuMSA9IGJ0blJvdzEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6ICdJbnN0YWxsIFRvb2xraXQnLFxuXHRcdFx0Y2xzOiAnbW9kLWN0YScsXG5cdFx0XHR9KTtcblx0XHRcdGluc3RhbGxCdG4xLm9uQ2xpY2tFdmVudCgoKSA9PlxuXHRcdFx0bmV3IENvbmZpcm1GcmVzaEluc3RhbGxNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKVxuXHRcdFx0KTtcblxuXHRcdFx0Y29uc3QgY3VzdG9tQnRuMSA9IGJ0blJvdzEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6ICdDdXN0b20gSW5zdGFsbCcsXG5cdFx0XHRjbHM6ICdtb2QtY3RhJyxcblx0XHRcdH0pO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihjdXN0b21CdG4xLnN0eWxlLCB7XG5cdFx0XHRiYWNrZ3JvdW5kOiAnbm9uZScsXG5cdFx0XHRib3JkZXI6ICcxcHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KScsXG5cdFx0XHRjb2xvcjogJ3ZhcigtLXRleHQtbm9ybWFsKScsXG5cdFx0XHR9KTtcblx0XHRcdGN1c3RvbUJ0bjEub25DbGlja0V2ZW50KCgpID0+IHNob3dDdXN0b21JbnN0YWxsTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKSk7XG5cblx0XHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIZWxwZXIgdG8gZW5hYmxlL2Rpc2FibGUgdGhlIGJ1dHRvbnMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCB1cGRhdGVJbnN0YWxsQnV0dG9ucyA9ICgpID0+IHtcblx0XHRcdGNvbnN0IGhhc1J1bGVzZXQgPSBCb29sZWFuKHRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtKTtcblx0XHRcdGluc3RhbGxCdG4xLnRvZ2dsZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAhaGFzUnVsZXNldCk7XG5cdFx0XHRjdXN0b21CdG4xLnRvZ2dsZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAhaGFzUnVsZXNldCk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyA3KSBJbml0aWFsIGNhbGwsIGluIGNhc2Ugd2VcdTIwMTlyZSByZS1yZW5kZXJpbmdcblx0XHRcdHVwZGF0ZUluc3RhbGxCdXR0b25zKCk7XG5cblx0XHRcblx0XHRcdC8vIDUpIFx1MjAxQ1NraXBcdTIwMUQgbGlua1xuXHRcdFx0Y29uc3Qgc2tpcFBhcmEgPSBjYXJkLmNyZWF0ZUVsKCdwJywgeyBjbHM6ICd2di1za2lwLWxpbmsnIH0pO1xuXHRcdFx0Ly8gQ2VudGVyIGl0IGFuZCBnaXZlIGl0IGEgdGlueSB0b3AgbWFyZ2luXG5cdFx0XHRPYmplY3QuYXNzaWduKHNraXBQYXJhLnN0eWxlLCB7XG5cdFx0XHR0ZXh0QWxpZ246ICdjZW50ZXInLFxuXHRcdFx0bWFyZ2luVG9wOiAnMC4yNWVtJyxcblx0XHRcdH0pO1xuXHRcdFx0c2tpcFBhcmFcblx0XHRcdC5jcmVhdGVFbCgnYScsIHtcblx0XHRcdHRleHQ6ICdBbHJlYWR5IGhhdmUgdGhlIFRvb2xraXQ/IFNob3cgbWUgdGhlIHNldHRpbmdzIFx1MjE5MicsXG5cdFx0XHR9KVxuXHRcdFx0Lm9uQ2xpY2tFdmVudChhc3luYyAoKSA9PiB7XG5cdFx0XHQvLyAxKSBDcmVhdGUgdGhlIGhpZGRlbiBtYXJrZXIgZmlsZSBzbyBcImZpcnN0XHUyMDEwcnVuXCIgbmV2ZXIgc2hvd3MgYWdhaW46XG5cdFx0XHRjb25zdCBtYXJrZXJQYXRoID0gJy52dnVuZGVybG9yZV9pbnN0YWxsZWQnO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Ly8gT25seSB3cml0ZSBpdCBpZiBpdCBkb2VzIG5vdCBleGlzdCB5ZXRcblx0XHRcdFx0aWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobWFya2VyUGF0aCkpKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShtYXJrZXJQYXRoLCAnJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byBjcmVhdGUgbWFya2VyIGZpbGU6JywgZSk7XG5cdFx0XHR9XG5cdFx0XG5cdFx0XHQvLyAyKSBGbGlwIG5lZWRzSW5zdGFsbCB0byBmYWxzZSAoc28gdGhlIGZpcnN0XHUyMDEwcnVuIGNhcmQgaXMgZ29uZSlcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm5lZWRzSW5zdGFsbCA9IGZhbHNlO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XG5cdFx0XHQvLyAzKSBSZVx1MjAxMHJlbmRlciB0aGUgbm9ybWFsIHNldHRpbmdzIFVJXG5cdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0ICBcblx0ICBcblx0cHJpdmF0ZSB2ZXJzaW9uVmFsdWVFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBmb3JjZVdhcm5pbmdFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnNvbGUubG9nKFwiXHVEODNEXHVERDI3IGRpc3BsYXkoKSBjYWxsZWQsIG5lZWRzSW5zdGFsbCA9XCIsIHRoaXMucGx1Z2luLnNldHRpbmdzLm5lZWRzSW5zdGFsbCk7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb25zdCBzYXZlZFNjcm9sbFRvcCA9IGNvbnRhaW5lckVsLnNjcm9sbFRvcDtcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXHRcblx0XHR0aGlzLnJlbmRlckhlYWRlcihjb250YWluZXJFbCk7IC8vIFx1RDgzRFx1REM0OFx1MDBBMEFsd2F5cyByZW5kZXIgaGVhZGVyIGZpcnN0XG5cdFxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZWVkc0luc3RhbGwpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiXHVEODNFXHVEREVBIFNob3dpbmcgZmlyc3QtcnVuIGNhcmRcIik7XG5cdFx0XHR0aGlzLnJlbmRlckZpcnN0UnVuQ2FyZChjb250YWluZXJFbCk7XG5cdFx0XHRjb250YWluZXJFbC5zY3JvbGxUb3AgPSBzYXZlZFNjcm9sbFRvcDtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdDsoYXN5bmMgKCkgPT4ge1x0XG5cdFx0XG5cdFx0LyoqIFx1MjUwMFx1MjUwMFx1MjUwMCBWRVJTSU9OIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwICovXG5cdFx0Y29uc3QgdmVyc2lvblJvdyA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuXHRcdHZlcnNpb25Sb3cuc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XG5cdFx0dmVyc2lvblJvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdHZlcnNpb25Sb3cuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7XG5cdFx0dmVyc2lvblJvdy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2ZsZXgtc3RhcnQnO1xuXHRcdHZlcnNpb25Sb3cuc3R5bGUuZ2FwID0gJzJlbSc7XG5cdFx0dmVyc2lvblJvdy5zdHlsZS5mbGV4V3JhcCA9ICd3cmFwJztcblx0XHR2ZXJzaW9uUm93LnN0eWxlLmJvcmRlckJvdHRvbSA9ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknO1xuXG5cdFx0Y29uc3QgdmVyc2lvbkluZm8gPSB2ZXJzaW9uUm93LmNyZWF0ZURpdigpO1xuXHRcdHZlcnNpb25JbmZvLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0dmVyc2lvbkluZm8uc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuXHRcdHZlcnNpb25JbmZvLnN0eWxlLmdhcCA9ICcwLjI1ZW0nO1xuXG5cdFx0bGV0IGluc3RhbGxlZCA9ICdOb3QgaW5zdGFsbGVkJztcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgdmVyQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnLnZlcnNpb24uanNvbicpO1xuXHRcdFx0Y29uc3QganNvbiA9IEpTT04ucGFyc2UodmVyQ29udGVudCk7XG5cdFx0XHRpbnN0YWxsZWQgPSBqc29uLnZlcnNpb24gPz8gJ05vdCBpbnN0YWxsZWQnO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS53YXJuKCdDb3VsZCBub3QgcmVhZCAudmVyc2lvbi5qc29uIGZyb20gdmF1bHQ6JywgZXJyKTtcblx0XHR9XG5cdFx0Y29uc3QgbGF0ZXN0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gJ0NvdWxkIG5vdCBmZXRjaCc7XG5cdFx0Y29uc3QgaXNNYXRjaCA9IGluc3RhbGxlZCA9PT0gbGF0ZXN0O1xuXG5cdFx0Y29uc3QgdmF1bHRSb3cgPSB2ZXJzaW9uSW5mby5jcmVhdGVEaXYoKTtcblx0XHR2YXVsdFJvdy5hcHBlbmRUZXh0KCdWYXVsdCBUb29sa2l0IFZlcnNpb246ICcpO1xuXHRcdFxuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwgPSB2YXVsdFJvdy5jcmVhdGVTcGFuKCk7ICAvLyBcdUQ4M0RcdUREMjUgc2F2ZSByZWZcblx0XHR0aGlzLnZlcnNpb25WYWx1ZUVsLnRleHRDb250ZW50ID0gaW5zdGFsbGVkO1xuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcblx0XHR0aGlzLnZlcnNpb25WYWx1ZUVsLnN0eWxlLmNvbG9yID0gaXNNYXRjaCA/ICd2YXIoLS10ZXh0LXN1Y2Nlc3MpJyA6ICd2YXIoLS10ZXh0LWVycm9yKSc7XG5cdFx0XG5cdFx0Y29uc3QgbGF0ZXN0Um93ID0gdmVyc2lvbkluZm8uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0xhdGVzdCBPZmZpY2lhbCBWZXJzaW9uOiAnIH0pO1xuXHRcdGxhdGVzdFJvdy5jcmVhdGVTcGFuKHtcblx0XHRcdHRleHQ6IGxhdGVzdCxcblx0XHRcdGF0dHI6IHsgc3R5bGU6ICdmb250LXdlaWdodDogYm9sZDsgY29sb3I6IHZhcigtLXRleHQtc3VjY2Vzcyk7JyB9XG5cdFx0fSk7XG5cblx0XHRjb25zdCB2ZXJzaW9uQ29udHJvbHMgPSB2ZXJzaW9uUm93LmNyZWF0ZURpdigpO1xuXHRcdHZlcnNpb25Db250cm9scy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdHZlcnNpb25Db250cm9scy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XG5cdFx0dmVyc2lvbkNvbnRyb2xzLnN0eWxlLmFsaWduSXRlbXMgPSAnZmxleC1lbmQnO1xuXHRcdHZlcnNpb25Db250cm9scy5zdHlsZS5nYXAgPSAnMC41ZW0nO1xuXG5cdFx0Y29uc3QgYnV0dG9uUm93ID0gdmVyc2lvbkNvbnRyb2xzLmNyZWF0ZURpdigpO1xuXHRcdGJ1dHRvblJvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdGJ1dHRvblJvdy5zdHlsZS5nYXAgPSAnMC41ZW0nO1xuXG5cdFx0Y29uc3QgY2hlY2tCdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6IGluc3RhbGxlZCAhPT0gbGF0ZXN0ID8gJ1ByZXZpZXcgVXBkYXRlJyA6ICdDaGVjayBmb3IgVXBkYXRlcycsXG5cdFx0XHRjbHM6ICdtb2QtY3RhJ1xuXHRcdH0pO1xuXHRcdGNoZWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKGluc3RhbGxlZCAhPT0gbGF0ZXN0KSB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnByZXZpZXdVcGRhdGVzTW9kYWwoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmNoZWNrRm9yVXBkYXRlcygpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGNvbnN0IGNoYW5nZWxvZ0J0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0Q2IFZpZXcgQ2hhbmdlbG9nJyB9KTtcblx0XHRjaGFuZ2Vsb2dCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRuZXcgTWFya2Rvd25QcmV2aWV3TW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLmNoYW5nZWxvZykub3BlbigpO1xuXHRcdH0pO1xuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXN0Q2hlY2tlZCkge1xuXHRcdFx0Y29uc3QgbGFzdENoZWNrZWQgPSB2ZXJzaW9uQ29udHJvbHMuY3JlYXRlRGl2KCk7XG5cdFx0XHRsYXN0Q2hlY2tlZC5zdHlsZS5mb250U2l6ZSA9ICcxMXB4Jztcblx0XHRcdGxhc3RDaGVja2VkLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblx0XHRcdGxhc3RDaGVja2VkLnRleHRDb250ZW50ID0gYExhc3QgY2hlY2tlZDogJHtuZXcgRGF0ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXN0Q2hlY2tlZCkudG9Mb2NhbGVTdHJpbmcoKX1gO1xuXHRcdH1cblxuXHRcdFxuXG5cdFx0LyoqIFx1MjUwMFx1MjUwMFx1MjUwMCBGSVggWU9VUiBWQVVMVCBTRUNUSU9OIChjb2xsYXBzaWJsZSwgZml4ZWRcdTIwMTBpY29uKSBcdTI1MDBcdTI1MDBcdTI1MDAgKi9cblx0XHRjb25zdCBmaXhEZXRhaWxzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIFJlcGxhY2UgeW91ciBvbGQgZml4SGVhZGVyIHdpdGggdGhpcyA8c3VtbWFyeT4gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4SGVhZGVyID0gZml4RGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oZml4SGVhZGVyLnN0eWxlLCB7XG5cdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdGFsaWduSXRlbXM6ICdzdHJldGNoJyxcblx0XHRwYWRkaW5nOiAnMC41ZW0gMCcsXG5cdFx0Ym9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcblx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHR9KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMCBDcmVhdGUgYSBzaW5nbGUgZmxleFx1MjAxMHJvdyBpbnNpZGUgdGhlIHN1bW1hcnkgZm9yIHRpdGxlK2ljb24gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4SGVhZGVyUm93ID0gZml4SGVhZGVyLmNyZWF0ZURpdih7XG5cdFx0YXR0cjoge1xuXHRcdFx0c3R5bGU6IGBcblx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG5cdFx0XHRhbGlnbi1pdGVtczogZmxleC1lbmQ7XG5cdFx0XHRgLFxuXHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDAgTGVmdCBzaWRlOiB0aXRsZSArIGRlc2NyaXB0aW9uIGJsb2NrIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGZpeFRpdGxlQmxvY2sgPSBmaXhIZWFkZXJSb3cuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsnIH1cblx0XHR9KTtcblx0XHRmaXhUaXRsZUJsb2NrLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ0ZpeCBZb3VyIFZhdWx0JyB9KTtcblx0XHRmaXhUaXRsZUJsb2NrLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0dGV4dDogJ0ZpeCBhbmQgYnJva2VuLCBkZWxldGVkLCBvciBtaXNwbGFjZWQgZmlsZXMgaW4geW91ciB0b29sa2l0LicsXG5cdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC4yNWVtOycgfSxcblx0XHR9KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMCBSaWdodCBzaWRlOiBzdGF0aWMgdG9nZ2xlIGljb24gKHJvdGF0ZXMgaW4gcGxhY2Ugb25seSkgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4VG9nZ2xlSWNvbiA9IGZpeEhlYWRlclJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oZml4VG9nZ2xlSWNvbi5zdHlsZSwge1xuXHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHR0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMnMgZWFzZScsXG5cdFx0dHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsIC8vIFJvdGF0ZSBhcm91bmQgaXRzIG93biBjZW50ZXJcblx0XHR1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFx0dHJhbnNmb3JtOiBmaXhEZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0fSk7XG5cdFx0Zml4RGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRmaXhUb2dnbGVJY29uLnN0eWxlLnRyYW5zZm9ybSA9IGZpeERldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHR9O1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIEJvZHkgKHNhbWUgYXMgYmVmb3JlLCBqdXN0IGluZGVudGVkIHVuZGVyIDxkZXRhaWxzPikgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4Qm9keSA9IGZpeERldGFpbHMuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblx0XHRmaXhCb2R5LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzFlbSc7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDAgQnV0dG9uICsgd2FybmluZyByb3cgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4QnV0dG9uUm93ID0gZml4Qm9keS5jcmVhdGVEaXYoKTtcblx0XHRmaXhCdXR0b25Sb3cuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRmaXhCdXR0b25Sb3cuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7XG5cdFx0Zml4QnV0dG9uUm93LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcblx0XHRmaXhCdXR0b25Sb3cuc3R5bGUubWFyZ2luVG9wID0gJzAuNWVtJztcblxuXHRcdGNvbnN0IHdhcm5pbmdDb250YWluZXIgPSBmaXhCdXR0b25Sb3cuY3JlYXRlRGl2KCk7XG5cdFx0dGhpcy5mb3JjZVdhcm5pbmdFbCA9IHdhcm5pbmdDb250YWluZXI7XG5cblx0XHRsZXQgaW5zdGFsbGVkVmVyc2lvblN0ciA9ICcnO1xuXHRcdHRyeSB7XG5cdFx0Y29uc3QgdmVyc2lvbkZpbGUgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCcudmVyc2lvbi5qc29uJyk7XG5cdFx0Y29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZSh2ZXJzaW9uRmlsZSk7XG5cdFx0aW5zdGFsbGVkVmVyc2lvblN0ciA9IChwYXJzZWQudmVyc2lvbiA/PyAnJykudHJpbSgpO1xuXHRcdH0gY2F0Y2gge1xuXHRcdGluc3RhbGxlZFZlcnNpb25TdHIgPSAnJztcblx0XHR9XG5cblx0XHRjb25zdCBsYXRlc3RWZXJzaW9uU3RyID0gKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uID8/ICcnKS50cmltKCk7XG5cblx0XHRjb25zb2xlLmxvZyhcIlx1RDgzRVx1RERFQSBDb21wYXJpbmcgdmVyc2lvbnM6XCIsIGluc3RhbGxlZFZlcnNpb25TdHIsIGxhdGVzdFZlcnNpb25TdHIpO1xuXG5cdFx0aWYgKGluc3RhbGxlZFZlcnNpb25TdHIgJiYgbGF0ZXN0VmVyc2lvblN0ciAmJiBpbnN0YWxsZWRWZXJzaW9uU3RyICE9PSBsYXRlc3RWZXJzaW9uU3RyKSB7XG5cdFx0Y29uc3Qgd2FybiA9IHdhcm5pbmdDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdHRleHQ6IGBcdTI2QTBcdUZFMEYgTmV3IHZlcnNpb24gYXZhaWxhYmxlICgke2luc3RhbGxlZFZlcnNpb25TdHJ9IFx1MjE5MiAke2xhdGVzdFZlcnNpb25TdHJ9KSBcdTIwMTQgdXNlIHJlZ3VsYXIgdXBkYXRlIGluc3RlYWRgLFxuXHRcdH0pO1xuXHRcdHdhcm4uc3R5bGUuZm9udFNpemUgPSAnMC44NWVtJztcblx0XHR3YXJuLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblx0XHR3YXJuLnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnO1xuXHRcdHdhcm4uc2V0QXR0cihcblx0XHRcdCd0aXRsZScsXG5cdFx0XHQnRm9yY2UgdXBkYXRpbmcgd2hpbGUgYSBuZXcgdmVyc2lvbiBpcyBhdmFpbGFibGUgbWF5IHNraXAgaW1wb3J0YW50IGNoYW5nZXMuJ1xuXHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gXHUyN0ExXHVGRTBGIFJpZ2h0IHNpZGU6IGFjdGlvbiBidXR0b25zXG5cdFx0Y29uc3QgYnV0dG9uR3JvdXAgPSBmaXhCdXR0b25Sb3cuY3JlYXRlRGl2KCk7XG5cdFx0YnV0dG9uR3JvdXAuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRidXR0b25Hcm91cC5zdHlsZS5nYXAgPSAnMC41ZW0nO1xuXG5cdFx0YnV0dG9uR3JvdXBcblx0XHQuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkZvcmNlIFVwZGF0ZSBWYXVsdFwiLCBjbHM6IFwibW9kLWN0YVwiIH0pXG5cdFx0Lm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHQvLyBmaXJzdCBkbyB5b3VyIG5vcm1hbCBcdTIwMUNmb3JjZSB1cGRhdGVcdTIwMUQgZmxvdzpcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmZvcmNlVXBkYXRlUHJldmlld0FuZENvbmZpcm0oKTtcblx0XHRcdC8vIHRoZW4sIGlmIHRoZSB1c2VyIGFza2VkIGZvciBhIHJlLXBhcnNlLCBkbyB0aGF0OlxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGFyc2VHYW1lc2V0cykge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4ucmVmcmVzaEdhbWVTZXREYXRhKCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXG5cdFx0YnV0dG9uR3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHR0ZXh0OiAnVW5kbyBVcGRhdGUnXG5cdFx0fSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi51bmRvRm9yY2VVcGRhdGUoKTtcblx0XHR9O1xuXG5cblx0XHQvLyBcdTI1MDBcdTI1MDAgVGltZXN0YW1wIHJvdyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBmaXhUaW1lc3RhbXBSb3cgPSBmaXhCb2R5LmNyZWF0ZURpdigpO1xuXHRcdE9iamVjdC5hc3NpZ24oZml4VGltZXN0YW1wUm93LnN0eWxlLCB7XG5cdFx0dGV4dEFsaWduOiAncmlnaHQnLFxuXHRcdGZvbnRTaXplOiAnMTFweCcsXG5cdFx0Y29sb3I6ICd2YXIoLS10ZXh0LW11dGVkKScsXG5cdFx0bWFyZ2luVG9wOiAnMC4yNWVtJ1xuXHRcdH0pO1xuXHRcdGZpeFRpbWVzdGFtcFJvdy50ZXh0Q29udGVudCA9IGBMYXN0IGZvcmNlZDogJHtcblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXN0Rm9yY2VVcGRhdGVcblx0XHRcdD8gbmV3IERhdGUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdEZvcmNlVXBkYXRlKS50b0xvY2FsZVN0cmluZygpXG5cdFx0XHQ6ICdOb3QgZm9yY2VkIHlldCdcblx0XHR9YDtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMCBkaXZpZGVyIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuZml4Qm9keS5jcmVhdGVFbCgnZGl2Jywge1xuICBhdHRyOiB7XG4gICAgc3R5bGU6ICdib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7IG1hcmdpbjogMC43NWVtIDA7J1xuICB9XG59KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBOZXcgXHUyMDFDcmUtcGFyc2UgZ2FtZXNldHNcdTIwMUQgdG9nZ2xlIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IHJlcGFyc2VSb3cgPSBmaXhCb2R5LmNyZWF0ZURpdigpO1xuXHRcdHJlcGFyc2VSb3cuc3R5bGUubWFyZ2luVG9wID0gXCIwLjVlbVwiO1xuXHRcdG5ldyBTZXR0aW5nKHJlcGFyc2VSb3cpXG5cdFx0LnNldE5hbWUoXCJSZS1wYXJzZSBHYW1lIFNldHMgT24gRm9yY2UgVXBkYXRlXCIpXG5cdFx0LnNldERlc2MoXG5cdFx0XHRcIkFsc28gcmUtcGFyc2UgeW91ciBydWxlc2V0IGNvbXBlbmRpdW0gYW5kIHJlZmVyZW5jZSBzZXRzLiBUaGlzIHdvbid0IGRlbGV0ZSBhbnkgZmlsZXMgaW4gdGhlIENvbXBlbmRpdW0gb3IgUmVmZXJlbmNlIGZvbGRlcnMuXCJcblx0XHQpXG5cblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nKSA9PlxuXHRcdFx0dG9nXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwYXJzZUdhbWVzZXRzKVxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBhcnNlR2FtZXNldHMgPSB2YWx1ZTtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQkFDS1VQIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgYmFja3VwRGV0YWlscyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblxuXHRcdC8vIFN1bW1hcnkgYmxvY2s6IHN0YWNrZWQgY29sdW1uIGxheW91dFxuXHRcdGNvbnN0IGJhY2t1cFN1bW1hcnkgPSBiYWNrdXBEZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG5cblx0XHRPYmplY3QuYXNzaWduKGJhY2t1cFN1bW1hcnkuc3R5bGUsIHtcblx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0ZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG5cdFx0YWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuXHRcdHBhZGRpbmc6ICcwLjVlbSAwJyxcblx0XHRib3JkZXJCb3R0b206ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuXHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdH0pO1xuXG5cdFx0Ly8gQ3JlYXRlIHRpdGxlICsgaWNvbiByb3dcblx0XHRjb25zdCBiYWNrdXBUaXRsZVJvdyA9IGJhY2t1cFN1bW1hcnkuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7XG5cdFx0XHRzdHlsZTogYFxuXHRcdFx0ZGlzcGxheTogZmxleDtcblx0XHRcdGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcblx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcblx0XHRcdGAsXG5cdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIExlZnQ6IGhlYWRlciBibG9jayAodGl0bGUgKyBkZXNjcmlwdGlvbiB0b2dldGhlcikgXG5cdFx0Y29uc3QgdGl0bGVCbG9jayA9IGJhY2t1cFRpdGxlUm93LmNyZWF0ZURpdih7XG5cdFx0YXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47JyB9XG5cdFx0fSk7XG5cblx0XHR0aXRsZUJsb2NrLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ1ZhdWx0IEJhY2t1cHMnIH0pO1xuXG5cdFx0dGl0bGVCbG9jay5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdHRleHQ6ICdUaGUgVG9vbGtpdCB3aWxsIGJhY2sgdXAgeW91ciB2YXVsdCBhdXRvbWF0aWNhbGx5IGJlZm9yZSB1cGRhdGVzLiBZb3UgY2FuIGFsc28gYmFjayB1cCBtYW51YWxseSBhbnl0aW1lLicsXG5cdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC4yNWVtOycgfSxcblx0XHR9KTtcblxuXHRcdC8vIFJpZ2h0OiBjb2xsYXBzZSBpY29uXG5cdFx0Y29uc3QgYmFja3VwVnZJY29uID0gYmFja3VwVGl0bGVSb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcblxuXHRcdE9iamVjdC5hc3NpZ24oYmFja3VwVnZJY29uLnN0eWxlLCB7XG5cdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuXHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHR1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFx0dHJhbnNmb3JtOiBiYWNrdXBEZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0fSk7XG5cblx0XHQvLyBDb2xsYXBzZSByb3RhdGlvbiBiZWhhdmlvclxuXHRcdGJhY2t1cERldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG5cdFx0YmFja3VwVnZJY29uLnN0eWxlLnRyYW5zZm9ybSA9IGJhY2t1cERldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHR9O1xuXG5cdFx0Ly8gMikgQm9keVxuXHRcdGNvbnN0IGJhY2t1cEJvZHkgPSBiYWNrdXBEZXRhaWxzLmNyZWF0ZURpdih7IGNsczogJ3ZrLXNlY3Rpb24tYm9keScgfSk7XG5cdFx0YmFja3VwQm9keS5zdHlsZS5wYWRkaW5nTGVmdCA9ICcxZW0nO1xuXG5cdFx0bmV3IFNldHRpbmcoYmFja3VwQm9keSlcblx0XHQuc2V0TmFtZSgnQXV0by1CYWNrdXAgQmVmb3JlIFVwZGF0ZScpXG5cdFx0LnNldERlc2MoJ0NyZWF0ZSBhIGZ1bGwgLnppcCBvZiB0aGUgdmF1bHQgYmVmb3JlIGFwcGx5aW5nIHZlcnNpb24gdXBkYXRlcy4gRm9yY2UgdXBkYXRlcyB3aWxsIG9ubHkgYmFjayB1cCB0aGUgZmlsZXMgdGhhdCB3aWxsIGJlIG1vZGlmaWVkIG9yIHJlbW92ZWQuJylcblx0XHQuYWRkVG9nZ2xlKHQgPT5cblx0XHRcdHRcblx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlKVxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHYgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlID0gdjtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhiYWNrdXBCb2R5KVxuXHRcdC5zZXROYW1lKCdNYW51YWwgQmFja3VwJylcblx0XHQuc2V0RGVzYygnSW1tZWRpYXRlbHkgY3JlYXRlIGEgemlwIGJhY2t1cCBvZiB5b3VyIHZhdWx0Jylcblx0XHQuYWRkQnV0dG9uKGIgPT5cblx0XHRcdGJcblx0XHRcdC5zZXRCdXR0b25UZXh0KCdCYWNrdXAgVmF1bHQgTm93Jylcblx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBwYXRoID0gYXdhaXQgdGhpcy5wbHVnaW4uYmFja3VwTWFuYWdlci5iYWNrdXBWYXVsdFRvWmlwKCdtYW51YWwnKTtcblx0XHRcdFx0bmV3IE5vdGljZShgQmFja3VwIGNyZWF0ZWQ6ICR7cGF0aH1gKTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGJhY2t1cEJvZHkpXG5cdFx0LnNldE5hbWUoJ09wZW4gQmFja3VwcyBGb2xkZXInKVxuXHRcdC5zZXREZXNjKCdPcGVuIHRoZSBiYWNrdXBzIGZvbGRlciBvbiBkaXNrLiBNYWNPUzogQ2FudCBzZWUgaXQ/IEhpdCBTaGlmdCtDbWQrKHBlcmlvZCkuJylcblx0XHQuYWRkQnV0dG9uKGIgPT5cblx0XHQgIGJcblx0XHRcdC5zZXRCdXR0b25UZXh0KCdPcGVuIEZvbGRlcicpXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHQgIHRyeSB7XG5cblx0XHRcdFx0Y29uc3QgdmF1bHRCYXNlUGF0aDogc3RyaW5nID0gKHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyIGFzIGFueSkuZ2V0QmFzZVBhdGgoKTtcblxuXHRcdFx0XHRjb25zdCBiYWNrdXBGb2xkZXJQYXRoID0gcGF0aC5qb2luKFxuXHRcdFx0XHQgIHZhdWx0QmFzZVBhdGgsXG5cdFx0XHRcdCAgJy52YXVsdC1iYWNrdXBzJ1xuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGNvbnN0IHsgc2hlbGwgfSA9ICh3aW5kb3cgYXMgYW55KS5yZXF1aXJlKCdlbGVjdHJvbicpO1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBzaGVsbC5vcGVuUGF0aChiYWNrdXBGb2xkZXJQYXRoKTtcblx0XHRcdFx0aWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnICYmIHJlc3VsdC5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdCAgY29uc29sZS5lcnJvcignXHUyNzRDIHNoZWxsLm9wZW5QYXRoIGVycm9yOicsIHJlc3VsdCk7XG5cdFx0XHRcdCAgbmV3IE5vdGljZSgnQ291bGQgbm90IG9wZW4gYmFja3VwcyBmb2xkZXIuIFNlZSBjb25zb2xlLicpO1xuXHRcdFx0XHR9XG5cdFx0XHQgIH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdcdTI3NEMgQ291bGQgbm90IG9wZW4gYmFja3VwcyBmb2xkZXI6JywgZXJyKTtcblx0XHRcdFx0bmV3IE5vdGljZSgnQ291bGQgbm90IG9wZW4gYmFja3VwcyBmb2xkZXIuIFNlZSBjb25zb2xlLicpO1xuXHRcdFx0ICB9XG5cdFx0XHR9KVxuXHRcdCk7XG5cdFx0YmFja3VwQm9keS5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0YXR0cjoge1xuXHRcdFx0ICBzdHlsZTogJ2JvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTsgbWFyZ2luLXRvcDogMS41ZW07J1xuXHRcdFx0fVxuXHRcdCAgfSk7XG5cblxuXHRcdCAgXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwIENVU1RPTSBVUERBVEVTIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgY3VzdG9taXphdGlvbkRldGFpbHMgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGV0YWlscycsIHsgY2xzOiAndmstc2VjdGlvbicgfSk7XG5cblx0XHRjb25zdCBjdXN0b21pemF0aW9uU3VtbWFyeSA9IGN1c3RvbWl6YXRpb25EZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG5cblx0XHRPYmplY3QuYXNzaWduKGN1c3RvbWl6YXRpb25TdW1tYXJ5LnN0eWxlLCB7XG5cdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0Jyxcblx0XHRwYWRkaW5nOiAnMC41ZW0gMCcsXG5cdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0fSk7XG5cblx0XHRjb25zdCB0aXRsZVJvdyA9IGN1c3RvbWl6YXRpb25TdW1tYXJ5LmNyZWF0ZURpdih7XG5cdFx0YXR0cjoge1xuXHRcdFx0c3R5bGU6IGBcblx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHR3aWR0aDogMTAwJTtcblx0XHRcdGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcblx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcblx0XHRcdGAsXG5cdFx0fSxcblx0XHR9KTtcblxuXHRcdGNvbnN0IGN1c3RvbWl6YXRpb25UaXRsZUJsb2NrID0gdGl0bGVSb3cuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsnIH1cblx0XHR9KTtcblxuXHRcdGNvbnN0IGg1ID0gY3VzdG9taXphdGlvblRpdGxlQmxvY2suY3JlYXRlRWwoJ2g1Jyk7XG5cdFx0aDUuYXBwZW5kVGV4dCgnQ3VzdG9tIEZpbGUgTWFuYWdlbWVudCAnKTtcblxuXHRcdGN1c3RvbWl6YXRpb25UaXRsZUJsb2NrLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0dGV4dDogJ1NraXAgdXBkYXRlcyBvbiBjZXJ0YWluIGZpbGVzIG9yIHJlbWFwIHJlbG9jYXRlZCBUb29sa2l0IGZpbGVzIHNvIHRoZXkgY2FuIHVwZGF0ZS4nLFxuXHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXG5cdFx0YXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDAuMjVlbTsnIH0sXG5cdFx0fSk7XG5cblx0XHRjb25zdCBjdXN0b21Wdkljb24gPSB0aXRsZVJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXG5cdFx0T2JqZWN0LmFzc2lnbihjdXN0b21Wdkljb24uc3R5bGUsIHtcblx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0dHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuXHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuXHRcdHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XHR0cmFuc2Zvcm06IGN1c3RvbWl6YXRpb25EZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0fSk7XG5cblx0XHRjdXN0b21pemF0aW9uRGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRjdXN0b21Wdkljb24uc3R5bGUudHJhbnNmb3JtID0gY3VzdG9taXphdGlvbkRldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHR9O1xuXG5cdFx0Y29uc3QgY3VzdG9taXphdGlvbkJvZHlXcmFwcGVyID0gY3VzdG9taXphdGlvbkRldGFpbHMuY3JlYXRlRGl2KHtcblx0XHRcdGF0dHI6IHsgc3R5bGU6ICdwYWRkaW5nLWxlZnQ6IDFlbTsgcGFkZGluZy1yaWdodDogMWVtOycgfVxuXHRcdCAgfSk7XG5cdFx0ICBjb25zdCBjdXN0b21pemF0aW9uQm9keSA9IGN1c3RvbWl6YXRpb25Cb2R5V3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXG5cblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTS0lQLUxJU1QgUEFORUwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cblx0XHRjb25zdCBza2lwU2VjdGlvbiA9IGN1c3RvbWl6YXRpb25Cb2R5LmNyZWF0ZURpdigpO1xuXG5cdFx0Ly8gMS4gQ3JlYXRlIHNldHRpbmcgYmxvY2sgKG1hdGNoZXMgT2JzaWRpYW4gbmF0aXZlIFVJIGxheW91dClcblx0XHRjb25zdCBzZXR0aW5nSXRlbSA9IHNraXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbScgfSk7XG5cblx0XHQvLyAyLiBMZWZ0IGNvbHVtbjogdGl0bGUgKyBkZXNjcmlwdGlvblxuXHRcdGNvbnN0IGluZm8gPSBzZXR0aW5nSXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0taW5mbycgfSk7XG5cdFx0aW5mby5jcmVhdGVEaXYoeyB0ZXh0OiAnU2tpcCBUb29sa2l0IEl0ZW1zJywgY2xzOiAnc2V0dGluZy1pdGVtLW5hbWUnIH0pO1xuXHRcdGluZm8uY3JlYXRlRGl2KHtcblx0XHR0ZXh0OiAnRmlsZXMgbGlzdGVkIGhlcmUgd2lsbCBiZSBpZ25vcmVkIGR1cmluZyB0b29sa2l0IHVwZGF0ZXMuJyxcblx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdH0pO1xuXG5cdFx0Ly8gMy4gUmlnaHQgY29sdW1uOiBkcm9wZG93biArIGJ1dHRvblxuXHRcdGNvbnN0IGNvbnRyb2wgPSBzZXR0aW5nSXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0tY29udHJvbCcgfSk7XG5cblx0XHRjb25zdCBkcm9wZG93biA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250cm9sKTtcblx0XHRkcm9wZG93bi5zZWxlY3RFbC5zdHlsZS5taW5XaWR0aCA9ICcyMjBweCc7XG5cdFx0ZHJvcGRvd24uYWRkT3B0aW9uKCcnLCAnU2VsZWN0IGFuIGl0ZW1cdTIwMjYnKTtcblx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzXG5cdFx0LmZpbHRlcihmID0+ICFmLm9wdGlvbmFsKVxuXHRcdC5mb3JFYWNoKGYgPT4gZHJvcGRvd24uYWRkT3B0aW9uKGYucGF0aCwgZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpKTtcblx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnNcblx0XHQuZmlsdGVyKGYgPT4gIWYub3B0aW9uYWwpXG5cdFx0LmZvckVhY2goZiA9PiBkcm9wZG93bi5hZGRPcHRpb24oZi5wYXRoLCAoZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpICsgJy8gKGZvbGRlciknKSk7XG5cblx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRyb2wpXG5cdFx0LnNldEJ1dHRvblRleHQoJ0FkZCcpXG5cdFx0LnNldEN0YSgpXG5cdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3Qga2V5ID0gZHJvcGRvd24uZ2V0VmFsdWUoKTtcblx0XHRcdGlmICgha2V5KSByZXR1cm4gbmV3IE5vdGljZSgnUGljayBzb21ldGhpbmcgdG8gc2tpcC4nKTtcblx0XHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuc29tZShjID0+IGMubWFuaWZlc3RLZXkgPT09IGtleSkpIHtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnB1c2goeyB2YXVsdFBhdGg6IGtleSwgbWFuaWZlc3RLZXk6IGtleSwgZG9VcGRhdGU6IGZhbHNlIH0pO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRyZW5kZXJTa2lwVGFibGUoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIDQuIFRhYmxlIHdyYXBwZXIgZm9yIHNraXBwZWQgaXRlbXNcblx0XHRjb25zdCBza2lwVGFibGVXcmFwcGVyID0gc2tpcFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAndmstdGFibGUtd3JhcHBlcicsIGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOjAuNzVlbScgfSB9KTtcblxuXHRcdGNvbnN0IHJlbmRlclNraXBUYWJsZSA9ICgpID0+IHtcblx0XHRza2lwVGFibGVXcmFwcGVyLmVtcHR5KCk7XG5cblx0XHRjb25zdCBpdGVtcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbHRlcihjID0+ICFjLmRvVXBkYXRlKTtcblxuXHRcdGlmIChpdGVtcy5sZW5ndGggPT09IDApIHtcblx0XHRcdC8vIE5vIHRhYmxlIGlmIG5vdGhpbmcgdG8gc2hvdyBcdTIwMTQganVzdCBhbiBlbXB0eSBzdGF0ZSBtZXNzYWdlXG5cdFx0XHRjb25zdCBlbXB0eU1zZyA9IHNraXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ05vIGl0ZW1zIHNraXBwZWQuJyB9KTtcblx0XHRcdGVtcHR5TXNnLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuXHRcdFx0ZW1wdHlNc2cuc3R5bGUub3BhY2l0eSA9ICcwLjYnO1xuXHRcdFx0ZW1wdHlNc2cuc3R5bGUucGFkZGluZyA9ICcwLjVlbSc7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmVuZGVyIHRhYmxlIG9ubHkgaWYgaXRlbXMgZXhpc3Rcblx0XHRjb25zdCB0YWJsZSA9IHNraXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICdzZXR0aW5nLXRhYmxlJyB9KTtcblxuXHRcdGNvbnN0IGhlYWRlciA9IHRhYmxlLmNyZWF0ZVRIZWFkKCkuaW5zZXJ0Um93KCk7XG5cdFx0aGVhZGVyLmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9ICdTa2lwcGVkIEZpbGVzL0ZvbGRlcnMnO1xuXG5cdFx0Y29uc3QgYm9keSA9IHRhYmxlLmNyZWF0ZVRCb2R5KCk7XG5cblx0XHRpdGVtcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuXHRcdFx0Y29uc3Qgcm93ID0gYm9keS5pbnNlcnRSb3coKTtcblx0XHRcdGNvbnN0IGNvbnRlbnRDZWxsID0gcm93Lmluc2VydENlbGwoKTtcblx0XHRcdGNvbnRlbnRDZWxsLmNvbFNwYW4gPSAxO1xuXHRcdFx0Y29udGVudENlbGwuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRcdGNvbnRlbnRDZWxsLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nO1xuXHRcdFx0Y29udGVudENlbGwuc3R5bGUucGFkZGluZ0xlZnQgPSAnNGVtJztcblx0XHRcdGNvbnRlbnRDZWxsLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcblx0XHRcdGNvbnRlbnRDZWxsLnN0eWxlLmdhcCA9ICcxZW0nO1xuXHRcdFx0Y29udGVudENlbGwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcblxuXHRcdFx0Y29udGVudENlbGwuY3JlYXRlU3Bhbih7IHRleHQ6IGVudHJ5Lm1hbmlmZXN0S2V5IH0pO1xuXG5cdFx0XHRjb25zdCByZW1vdmVMaW5rID0gY29udGVudENlbGwuY3JlYXRlRWwoJ2EnLCB7IHRleHQ6ICdSZW1vdmUgZW50cnknLCBocmVmOiAnIycgfSk7XG5cdFx0XHRyZW1vdmVMaW5rLnN0eWxlLmZvbnRTaXplID0gJzAuOGVtJztcblx0XHRcdHJlbW92ZUxpbmsuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1mYWludCknO1xuXHRcdFx0cmVtb3ZlTGluay5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICd1bmRlcmxpbmUnO1xuXHRcdFx0cmVtb3ZlTGluay5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnJlbW92ZShlbnRyeSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdHJlbmRlclNraXBUYWJsZSgpO1xuXHRcdFx0fTtcblx0XHR9KTtcblx0XHR9O1xuXG5cdFx0cmVuZGVyU2tpcFRhYmxlKCk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgU3BhY2VyICYgRGl2aWRlciBCZWZvcmUgUmVtYXAgUGFuZWwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y3VzdG9taXphdGlvbkJvZHkuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdGF0dHI6IHsgc3R5bGU6ICdoZWlnaHQ6IDFlbTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpOyBtYXJnaW46IDFlbSAwOycgfVxuXHRcdH0pO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwIFJFTUFQIFBBTkVMIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IHJlbWFwU2VjdGlvbiA9IGN1c3RvbWl6YXRpb25Cb2R5LmNyZWF0ZURpdigpO1xuXG5cblx0XHQvLyBTZXR0aW5nLXN0eWxlIHdyYXBwZXJcblx0XHRjb25zdCByZW1hcFNldHRpbmcgPSByZW1hcFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcblxuXHRcdC8vIExlZnQ6IGhlYWRlciArIGRlc2NyaXB0aW9uICh1bmNoYW5nZWQgc3R5bGUpXG5cdFx0Y29uc3QgcmVtYXBJbmZvID0gcmVtYXBTZXR0aW5nLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbS1pbmZvJyB9KTtcblx0XHRyZW1hcEluZm8uY3JlYXRlRGl2KHsgdGV4dDogJ1JlbWFwIEZpbGUgUGF0aHMnLCBjbHM6ICdzZXR0aW5nLWl0ZW0tbmFtZScgfSk7XG5cdFx0cmVtYXBJbmZvLmNyZWF0ZURpdih7XG5cdFx0XHR0ZXh0OiAnUmVtYXAgdG9vbGtpdCBmaWxlcyB2YXVsdCBwYXRocyBpZiB5b3UgY2hvc2UgdG8gbW92ZSBhbnl0aGluZy4gTW92aW5nIGZpbGVzIHdpdGhvdXQgcmVtYXBwaW5nIHdpbGwgcmVzdWx0IGluIGR1cGxpY2F0ZSBhbmQvb3Igb3V0LW9mLWRhdGUgZmlsZXMgYWZ0ZXIgdXBkYXRlLicsXG5cdFx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nXG5cdFx0fSk7XG5cblx0XHQvLyBOZXcgZnVsbC13aWR0aCBibG9jayBiZWxvdyBmb3IgY29udHJvbHNcblx0XHRjb25zdCByZW1hcENvbnRyb2xCbG9jayA9IHJlbWFwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICd2ay1pbmxpbmUtYWRkLWNvbnRyb2xzJyB9KTtcblx0XHRyZW1hcENvbnRyb2xCbG9jay5zdHlsZS5mbGV4V3JhcCA9ICd3cmFwJztcblx0XHRyZW1hcENvbnRyb2xCbG9jay5zdHlsZS5tYXJnaW5Ub3AgPSAnMC41ZW0nO1xuXG5cdFx0bGV0IHJlbWFwRHJvcDogRHJvcGRvd25Db21wb25lbnQ7XG5cdFx0bGV0IHJlbWFwSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cblx0XHRyZW1hcERyb3AgPSBuZXcgRHJvcGRvd25Db21wb25lbnQocmVtYXBDb250cm9sQmxvY2spO1xuXHRcdHJlbWFwRHJvcC5zZWxlY3RFbC5zdHlsZS5taW5XaWR0aCA9ICcyMjBweCc7XG5cdFx0cmVtYXBEcm9wLmFkZE9wdGlvbignJywgJ1NlbGVjdCBhbiBpdGVtXHUyMDI2Jyk7XG5cdFx0dGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcy5mb3JFYWNoKGYgPT5cblx0XHRcdHJlbWFwRHJvcC5hZGRPcHRpb24oZi5wYXRoLCBmLmRpc3BsYXlOYW1lID8/IGYucGF0aC5zcGxpdCgnLycpLnBvcCgpISlcblx0XHQpO1xuXHRcdHRoaXMucGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5mb3JFYWNoKGYgPT5cblx0XHRcdHJlbWFwRHJvcC5hZGRPcHRpb24oZi5wYXRoLCAoZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpICsgJy8gKGZvbGRlciknKVxuXHRcdCk7XG5cblx0XHRjb25zdCBzZWFyY2hXcmFwcGVyID0gcmVtYXBDb250cm9sQmxvY2suY3JlYXRlRGl2KCk7XG5cdFx0Y29uc3Qgc2VhcmNoQ29tcG9uZW50ID0gbmV3IFNlYXJjaENvbXBvbmVudChzZWFyY2hXcmFwcGVyKTtcblx0XHRzZWFyY2hDb21wb25lbnQuc2V0UGxhY2Vob2xkZXIoJ1NlYXJjaCB2YXVsdCBwYXRoXHUyMDI2Jyk7XG5cdFx0bmV3IEZpbGVQYXRoU3VnZ2VzdGVyKHRoaXMuYXBwLCBzZWFyY2hDb21wb25lbnQuaW5wdXRFbCk7XG5cdFx0cmVtYXBJbnB1dCA9IHNlYXJjaENvbXBvbmVudC5pbnB1dEVsO1xuXG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChyZW1hcENvbnRyb2xCbG9jaylcblx0XHRcdC5zZXRCdXR0b25UZXh0KCdBZGQgUmVtYXAnKVxuXHRcdFx0LnNldEN0YSgpXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGtleSA9IHJlbWFwRHJvcC5nZXRWYWx1ZSgpO1xuXHRcdFx0XHRjb25zdCB2cCA9IHJlbWFwSW5wdXQudmFsdWUudHJpbSgpO1xuXHRcdFx0XHRpZiAoIWtleSB8fCAhdnApIHJldHVybiBuZXcgTm90aWNlKCdTZWxlY3QgYW4gaXRlbSBhbmQgZW50ZXIgYSB2YXVsdCBwYXRoLicpO1xuXHRcdFx0XHRpZiAoIXRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh2cCkpIHJldHVybiBuZXcgTm90aWNlKCdWYXVsdCBwYXRoIG5vdCBmb3VuZC4nKTtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5maWx0ZXIoYyA9PiBjLm1hbmlmZXN0S2V5ICE9PSBrZXkpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5wdXNoKHsgbWFuaWZlc3RLZXk6IGtleSwgdmF1bHRQYXRoOiB2cCwgZG9VcGRhdGU6IHRydWUgfSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRyZW1hcElucHV0LnZhbHVlID0gJyc7XG5cdFx0XHRcdHJlbWFwRHJvcC5zZXRWYWx1ZSgnJyk7XG5cdFx0XHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblx0XHRcdH0pO1xuXG5cblx0XHQvLyA0LiBUYWJsZSB3cmFwcGVyXG5cdFx0Y29uc3QgcmVtYXBUYWJsZVdyYXBwZXIgPSByZW1hcFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAndmstdGFibGUtd3JhcHBlcicsIGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOiAwLjc1ZW0nIH0gfSk7XG5cblx0XHRjb25zdCByZW5kZXJSZW1hcFBhbmVsID0gKCkgPT4ge1xuXHRcdHJlbWFwVGFibGVXcmFwcGVyLmVtcHR5KCk7XG5cblx0XHRjb25zdCB0b1JlbWFwID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmlsdGVyKGMgPT4gYy5kb1VwZGF0ZSk7XG5cblx0XHRpZiAodG9SZW1hcC5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnN0IGVtcHR5TXNnID0gcmVtYXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ05vIGN1c3RvbSBwYXRocyBkZWZpbmVkLicgfSk7XG5cdFx0XHRlbXB0eU1zZy5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcblx0XHRcdGVtcHR5TXNnLnN0eWxlLm9wYWNpdHkgPSAnMC42Jztcblx0XHRcdGVtcHR5TXNnLnN0eWxlLnBhZGRpbmcgPSAnMC41ZW0nO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHRhYmxlID0gcmVtYXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICdzZXR0aW5nLXRhYmxlJyB9KTtcblx0XHRjb25zdCBoZWFkID0gdGFibGUuY3JlYXRlVEhlYWQoKS5pbnNlcnRSb3coKTtcblx0XHRbJ1Rvb2xpdCBJdGVtJywgJ05ldyBWYXVsdCBQYXRoJywgJyddLmZvckVhY2godHh0ID0+IGhlYWQuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gdHh0KTtcblxuXHRcdGNvbnN0IGJvZHkgPSB0YWJsZS5jcmVhdGVUQm9keSgpO1xuXHRcdHRvUmVtYXAuZm9yRWFjaChlbnRyeSA9PiB7XG5cdFx0XHRjb25zdCByb3cgPSBib2R5Lmluc2VydFJvdygpO1xuXG5cdFx0XHQvLyBNYW5pZmVzdCBLZXlcblx0XHRcdHJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSBlbnRyeS5tYW5pZmVzdEtleTtcblxuXHRcdFx0Ly8gVmF1bHQgUGF0aFxuXHRcdFx0cm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IGVudHJ5LnZhdWx0UGF0aDtcblxuXHRcdFx0Ly8gUmVtb3ZlIGxpbmtcblx0XHRcdGNvbnN0IHJlbW92ZUNlbGwgPSByb3cuaW5zZXJ0Q2VsbCgpO1xuXHRcdFx0Y29uc3QgcmVtb3ZlTGluayA9IHJlbW92ZUNlbGwuY3JlYXRlRWwoJ2EnLCB7IHRleHQ6ICdSZW1vdmUgZW50cnknLCBocmVmOiAnIycgfSk7XG5cdFx0XHRyZW1vdmVMaW5rLnN0eWxlLmZvbnRTaXplID0gJzAuOGVtJztcblx0XHRcdHJlbW92ZUxpbmsuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1mYWludCknO1xuXHRcdFx0cmVtb3ZlTGluay5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICd1bmRlcmxpbmUnO1xuXHRcdFx0cmVtb3ZlTGluay5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnJlbW92ZShlbnRyeSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblx0XHRcdH07XG5cdFx0fSk7XG5cdFx0fTtcblxuXHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblxuXHRcdC8vIEFkZCBkaXZpZGVyIGluc2lkZSB0aGUgYm9keSwgYXQgdGhlIHRvcFxuXHRcdGN1c3RvbWl6YXRpb25Cb2R5LmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRhdHRyOiB7XG5cdFx0XHRzdHlsZTogJ2JvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTsgbWFyZ2luOiAwLjVlbSAwOydcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMCBISUdITElHSFQgU0VDVElPTiBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBoaWdobGlnaHREZXRhaWxzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXG5cdFx0Ly8gMSkgQnVpbGQgdGhlIDxzdW1tYXJ5PiBmb3IgaGlnaGxpZ2h0LCBtYXRjaGluZyBiYWNrdXAgc3R5bGU6XG5cdFx0Y29uc3QgaGlnaGxpZ2h0U3VtbWFyeSA9IGhpZ2hsaWdodERldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcblx0XHRPYmplY3QuYXNzaWduKGhpZ2hsaWdodFN1bW1hcnkuc3R5bGUsIHtcblx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0ZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG5cdFx0YWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuXHRcdHBhZGRpbmc6ICcwLjVlbSAwJyxcblx0XHRib3JkZXJCb3R0b206ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuXHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdH0pO1xuXG5cdFx0Ly8gMWEpIENyZWF0ZSB0aGUgdGl0bGUgKyBpY29uIHJvdyAoZmxleCByb3cganVzdGlmeSBzcGFjZS1iZXR3ZWVuKTpcblx0XHRjb25zdCBoaWdobGlnaHRUaXRsZVJvdyA9IGhpZ2hsaWdodFN1bW1hcnkuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7XG5cdFx0XHRzdHlsZTogYFxuXHRcdFx0ZGlzcGxheTogZmxleDtcblx0XHRcdGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcblx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcblx0XHRcdGAsXG5cdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIDFiKSBMZWZ0IHNpZGU6IHRpdGxlICsgZGVzY3JpcHRpb25cblx0XHRjb25zdCBobFRpdGxlQmxvY2sgPSBoaWdobGlnaHRUaXRsZVJvdy5jcmVhdGVEaXYoe1xuXHRcdGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOycgfVxuXHRcdH0pO1xuXHRcdGhsVGl0bGVCbG9jay5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdGaWxlIEhpZ2hsaWdodHMnIH0pO1xuXHRcdGhsVGl0bGVCbG9jay5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdHRleHQ6ICdUb2dnbGUgb24vb2ZmIHRoZSBoaWdobGlnaHRpbmcgb2YgVG9vbGtpdC1zcGVjaWZpYyBmaWxlcy4gQWxzbyBtYWtlIHRoZSBoaWdobGlnaHRzIGNvb2wgY29sb3JzLicsXG5cdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC4yNWVtOycgfSxcblx0XHR9KTtcblxuXHRcdC8vIDFjKSBSaWdodCBzaWRlOiBjb2xsYXBzaW5nIGFycm93L2ljb25cblx0XHRjb25zdCBobFRvZ2dsZUljb24gPSBoaWdobGlnaHRUaXRsZVJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oaGxUb2dnbGVJY29uLnN0eWxlLCB7XG5cdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuXHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHR1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFx0dHJhbnNmb3JtOiBoaWdobGlnaHREZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0fSk7XG5cblx0XHQvLyAxZCkgTWFrZSB0aGUgaWNvbiByb3RhdGUgd2hlbiB0aGUgPGRldGFpbHM+IG9wZW5zL2Nsb3Nlczpcblx0XHRoaWdobGlnaHREZXRhaWxzLm9udG9nZ2xlID0gKCkgPT4ge1xuXHRcdGhsVG9nZ2xlSWNvbi5zdHlsZS50cmFuc2Zvcm0gPSBoaWdobGlnaHREZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKSc7XG5cdFx0fTtcblxuXHRcdC8vIDIpIENyZWF0ZSB0aGUgYm9keSBjb250YWluZXIgKGluZGVudGVkLCBzYW1lIGFzIGJhY2t1cClcblx0XHRjb25zdCBoaWdobGlnaHRCb2R5ID0gaGlnaGxpZ2h0RGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXHRcdGhpZ2hsaWdodEJvZHkuc3R5bGUucGFkZGluZ0xlZnQgPSAnMWVtJztcblxuXHRcdC8vIDMpIFx1MjAxQ0VuYWJsZSBIaWdobGlnaHRcdTIwMUQgdG9nZ2xlIGFzIGEgU2V0dGluZyBpbnNpZGUgaGlnaGxpZ2h0Qm9keTpcblx0XHRuZXcgU2V0dGluZyhoaWdobGlnaHRCb2R5KVxuXHRcdC5zZXROYW1lKCdFbmFibGUgRmlsZS9Gb2xkZXIgSGlnaGxpZ2h0aW5nJylcblx0XHQuc2V0RGVzYygnQW55IGZpbGUvZm9sZGVyIGluc3RhbGxlZCBieSBWVnVuZGVybG9yZSB3aWxsIGhhdmUgdGhpcyBiYWNrZ3JvdW5kLicpXG5cdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0dG9nZ2xlXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZClcblx0XHRcdC5vbkNoYW5nZShhc3luYyAoZW5hYmxlZCkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkID0gZW5hYmxlZDtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0aWYgKGVuYWJsZWQpIHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uZW5hYmxlSGlnaGxpZ2h0KCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLmRpc2FibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlXHUyMDEwcmVuZGVyIHRoZSBjb2xvciBwaWNrZXJzIHdoZW5ldmVyIHRoZSB0b2dnbGUgY2hhbmdlczpcblx0XHRcdFx0cmVuZGVySGlnaGxpZ2h0Q29sb3JQaWNrZXJzKCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIDQpIFdyYXBwZXIgZm9yIExpZ2h0L0RhcmsgY29sb3IgcGlja2Vyczpcblx0XHRjb25zdCBjb2xvclBpY2tlcldyYXBwZXIgPSBoaWdobGlnaHRCb2R5LmNyZWF0ZURpdigpO1xuXG5cdFx0Ly8gNSkgQSBmdW5jdGlvbiB0byByZW5kZXIgb3IgY2xlYXIgdGhlIHR3byBDb2xvclBpY2tlciBzZXR0aW5nczpcblx0XHRjb25zdCByZW5kZXJIaWdobGlnaHRDb2xvclBpY2tlcnMgPSAoKSA9PiB7XG5cdFx0Y29sb3JQaWNrZXJXcmFwcGVyLmVtcHR5KCk7XG5cblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQpIHtcblx0XHRcdHJldHVybjsgLy8gZG8gbm90IHNob3cgcGlja2VycyBpZiBoaWdobGlnaHRpbmcgaXMgZGlzYWJsZWRcblx0XHR9XG5cblx0XHQvLyA1YSkgTGlnaHQgbW9kZSBjb2xvciBwaWNrZXJcblx0XHRuZXcgU2V0dGluZyhjb2xvclBpY2tlcldyYXBwZXIpXG5cdFx0XHQuc2V0TmFtZSgnTGlnaHQgTW9kZSBIaWdobGlnaHQgQ29sb3InKVxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSB0aGUgYmFja2dyb3VuZCBjb2xvciBmb3IgZmlsZXMvZm9sZGVycyBpbiBMaWdodCBtb2RlLicpXG5cdFx0XHQuYWRkQ29sb3JQaWNrZXIocGlja2VyID0+IHtcblx0XHRcdHBpY2tlclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JMaWdodClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIChuZXdDb2xvcikgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckxpZ2h0ID0gbmV3Q29sb3I7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdC8vIFJlXHUyMDEwaW5qZWN0IENTUyBzbyB0aGUgbmV3IGNvbG9yIHRha2VzIGVmZmVjdCBpbW1lZGlhdGVseTpcblx0XHRcdFx0dGhpcy5wbHVnaW4uZGlzYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5lbmFibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdC8vIDViKSBEYXJrIG1vZGUgY29sb3IgcGlja2VyXG5cdFx0bmV3IFNldHRpbmcoY29sb3JQaWNrZXJXcmFwcGVyKVxuXHRcdFx0LnNldE5hbWUoJ0RhcmsgTW9kZSBIaWdobGlnaHQgQ29sb3InKVxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSB0aGUgYmFja2dyb3VuZCBjb2xvciBmb3IgZmlsZXMvZm9sZGVycyBpbiBEYXJrIG1vZGUuJylcblx0XHRcdC5hZGRDb2xvclBpY2tlcihwaWNrZXIgPT4ge1xuXHRcdFx0cGlja2VyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckRhcmspXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAobmV3Q29sb3IpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JEYXJrID0gbmV3Q29sb3I7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdC8vIFJlXHUyMDEwaW5qZWN0IENTUyBzbyB0aGUgbmV3IGNvbG9yIHRha2VzIGVmZmVjdCBpbW1lZGlhdGVseTpcblx0XHRcdFx0dGhpcy5wbHVnaW4uZGlzYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5lbmFibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Ly8gNikgQ2FsbCBvbmNlIG9uIGluaXRpYWwgcmVuZGVyIHNvIHRoYXQgaWYgaGlnaGxpZ2h0RW5hYmxlZCA9PT0gdHJ1ZSwgdGhlIHBpY2tlcnMgc2hvdyB1cC5cblx0XHRyZW5kZXJIaWdobGlnaHRDb2xvclBpY2tlcnMoKTtcblxuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIElOSVRJQUwgRFJBVyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRyZW5kZXJTa2lwVGFibGUoKTtcblx0XHRyZW5kZXJSZW1hcFBhbmVsKCk7XG5cblxuXHRcdC8vUkVNT1ZFIERFTU8gRklMRVNcblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUkVNT1ZFIERFTU8gRklMRVMgKHVwZGF0ZWQpIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4vLyAxKSBDcmVhdGUgYSBTZXR0aW5nIHJvdywgYnV0IGltbWVkaWF0ZWx5IHN0cmlwIG9mZiBpdHMgZGVmYXVsdCB0b3BcdTIwMTBib3JkZXI6XG5jb25zdCByZW1vdmVEZW1vU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKTtcbihyZW1vdmVEZW1vU2V0dGluZy5zZXR0aW5nRWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJvcmRlclRvcCA9ICdub25lJztcblxucmVtb3ZlRGVtb1NldHRpbmdcbiAgLnNldE5hbWUoJ1JlbW92ZSBEZW1vIEZpbGVzJylcbiAgLnNldERlc2MoJ0RlbGV0ZSBldmVyeSBcdTIwMUNvcHRpb25hbFx1MjAxRCBkZW1vIGZpbGUgYW5kIGZvbGRlciBmcm9tIHlvdXIgdmF1bHQuJylcbiAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxuICAgIGJ1dHRvblxuICAgICAgLnNldEJ1dHRvblRleHQoJ1JlbW92ZSBEZW1vIEZpbGVzJylcblxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBvcHRpb25hbEZpbGVFbnRyaWVzID0gdGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcy5maWx0ZXIoKGYpID0+IGYub3B0aW9uYWwpO1xuICAgICAgICBjb25zdCBvcHRpb25hbEZvbGRlckVudHJpZXMgPSB0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMuZmlsdGVyKChmKSA9PiBmLm9wdGlvbmFsKTtcblxuICAgICAgICBjb25zdCB0b3RhbENvdW50RmlsZXMgPSBvcHRpb25hbEZpbGVFbnRyaWVzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgdG90YWxDb3VudEZvbGRlcnMgPSBvcHRpb25hbEZvbGRlckVudHJpZXMubGVuZ3RoO1xuICAgICAgICBjb25zdCB0b3RhbENvdW50ID0gdG90YWxDb3VudEZpbGVzICsgdG90YWxDb3VudEZvbGRlcnM7XG5cbiAgICAgICAgaWYgKHRvdGFsQ291bnQgPT09IDApIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdObyBcdTIwMUNvcHRpb25hbFx1MjAxRCBkZW1vIGZpbGVzIG9yIGZvbGRlcnMgdG8gcmVtb3ZlLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSAyKSBBc2sgZm9yIGNvbmZpcm1hdGlvbiBpbiBhIHNtYWxsIE1vZGFsIC0tLVxuICAgICAgICBjb25zdCB1c2VyQ29uZmlybWVkID0gYXdhaXQgbmV3IFByb21pc2U8Ym9vbGVhbj4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgY2xhc3MgZXh0ZW5kcyBNb2RhbCB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb25PcGVuKCkge1xuICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdDb25maXJtIFJlbW92YWwnIH0pO1xuICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBgVGhpcyB3aWxsIHBlcm1hbmVudGx5IGRlbGV0ZSAke3RvdGFsQ291bnRGaWxlc30gZmlsZShzKSBhbmQgJHt0b3RhbENvdW50Rm9sZGVyc30gZm9sZGVyKHMpLiBDb250aW51ZT9gLFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjb25zdCBidG5Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYnRuUm93LnN0eWxlLCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLFxuICAgICAgICAgICAgICAgIGdhcDogJzAuNWVtJyxcbiAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6ICcxLjVlbScsXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGJ0blJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICBidG5Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1llcywgUmVtb3ZlJywgY2xzOiAnbW9kLWRhbmdlcicgfSkub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSh0aGlzLmFwcCk7XG5cbiAgICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXVzZXJDb25maXJtZWQpIHtcbiAgICAgICAgICByZXR1cm47IC8vIHVzZXIgY2xpY2tlZCBcdTIwMUNDYW5jZWxcdTIwMURcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSAzKSBEZWxldGUgb3B0aW9uYWwgZmlsZXMgb25lIGJ5IG9uZSAtLS1cbiAgICAgICAgbGV0IGZpbGVzRGVsZXRlZCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgZmlsZUVudHJ5IG9mIG9wdGlvbmFsRmlsZUVudHJpZXMpIHtcbiAgICAgICAgICAvLyAzYSkgUmVzcGVjdCBhbnkgcmVtYXBwaW5nIGluIGN1c3RvbVBhdGhzXG4gICAgICAgICAgY29uc3QgbWFwcGVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZmlsZUVudHJ5LmtleSk7XG4gICAgICAgICAgY29uc3QgdmF1bHRQYXRoID0gbWFwcGVkPy52YXVsdFBhdGggPz8gZmlsZUVudHJ5LnBhdGg7XG5cbiAgICAgICAgICAvLyAzYikgSWYgaXQgYWN0dWFsbHkgZXhpc3RzLCByZW1vdmUgaXRcbiAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZW1vdmUodmF1bHRQYXRoKTtcbiAgICAgICAgICAgICAgZmlsZXNEZWxldGVkKys7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGRlbGV0ZSBvcHRpb25hbCBmaWxlICR7dmF1bHRQYXRofWAsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDQpIERlbGV0ZSBvcHRpb25hbCBmb2xkZXJzIHJlY3Vyc2l2ZWx5IC0tLVxuICAgICAgICBsZXQgZm9sZGVyc0RlbGV0ZWQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIG9wdGlvbmFsRm9sZGVyRW50cmllcykge1xuICAgICAgICAgIGNvbnN0IG1hcHBlZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGZvbGRlckVudHJ5LmtleSk7XG4gICAgICAgICAgY29uc3QgdmF1bHRGb2xkZXJQYXRoID0gbWFwcGVkPy52YXVsdFBhdGggPz8gZm9sZGVyRW50cnkucGF0aDtcblxuICAgICAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdEZvbGRlclBhdGgpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAvLyBUaGUgc2Vjb25kIGFyZ3VtZW50IGB0cnVlYCBlbnN1cmVzIHJlY3Vyc2l2ZSBkZWxldGVcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5ybWRpcih2YXVsdEZvbGRlclBhdGgsIHRydWUpO1xuICAgICAgICAgICAgICBmb2xkZXJzRGVsZXRlZCsrO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBkZWxldGUgb3B0aW9uYWwgZm9sZGVyICR7dmF1bHRGb2xkZXJQYXRofWAsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDUpIENsZWFuIHVwIGFueSBcdTIwMUNjdXN0b21QYXRoc1x1MjAxRCBlbnRyaWVzIGZvciBvcHRpb25hbCBpdGVtcyAtLS1cbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5maWx0ZXIoKGMpID0+IHtcbiAgICAgICAgICAvLyBJZiB0aGlzIG1hcHBpbmdcdTIwMTlzIG1hbmlmZXN0S2V5IHdhcyBvcHRpb25hbCwgZHJvcCBpdFxuICAgICAgICAgIGNvbnN0IGlzT3B0RmlsZSA9IG9wdGlvbmFsRmlsZUVudHJpZXMuc29tZSgoZikgPT4gZi5rZXkgPT09IGMubWFuaWZlc3RLZXkpO1xuICAgICAgICAgIGNvbnN0IGlzT3B0Rm9sZGVyID0gb3B0aW9uYWxGb2xkZXJFbnRyaWVzLnNvbWUoKGYpID0+IGYua2V5ID09PSBjLm1hbmlmZXN0S2V5KTtcbiAgICAgICAgICByZXR1cm4gIWlzT3B0RmlsZSAmJiAhaXNPcHRGb2xkZXI7XG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgICAvLyAtLS0gNikgU2hvdyBhIG5vdGljZSBhbmQgcmUtcmVuZGVyIHRoZSBzZXR0aW5ncyBwYWdlIC0tLVxuICAgICAgICBuZXcgTm90aWNlKGBEZWxldGVkICR7ZmlsZXNEZWxldGVkfSBmaWxlKHMpIGFuZCAke2ZvbGRlcnNEZWxldGVkfSBmb2xkZXIocykuYCk7XG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgfSlcbiAgKTtcblxuXG5cblxuXHRcdC8qKiBcdTI1MDBcdTI1MDBcdTI1MDAgRk9PVEVSIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwICovXG5cdFx0Y29uc3QgZm9vdGVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcblx0XHRPYmplY3QuYXNzaWduKGZvb3Rlci5zdHlsZSwge1xuXHRcdGZvbnRTaXplOiAnMC44NWVtJyxcblx0XHRjb2xvcjogJ3ZhcigtLXRleHQtbXV0ZWQpJyxcblx0XHRtYXJnaW5Ub3A6ICcyZW0nLFxuXHRcdH0pO1xuXHRcdGZvb3Rlci5jcmVhdGVFbCgnc3BhbicsIHtcblx0XHRcdHRleHQ6IGBWVnVuZGVybG9yZSBUb29sa2l0IFBsdWdpbiB2JHt0aGlzLnBsdWdpbi5tYW5pZmVzdC52ZXJzaW9ufSBcdTIwMjIgYFxuXHRcdH0pO1xuXHRcdGZvb3Rlci5jcmVhdGVFbCgnYScsIHtcblx0XHRcdHRleHQ6ICdWaWV3IG9uIEdpdEh1YicsXG5cdFx0XHRocmVmOiAnaHR0cHM6Ly9naXRodWIuY29tL3NsYW13aXNlMDAwMS92dnVuZGVybG9yZS10b29sa2l0LXBsdWdpbicsXG5cdFx0XHRhdHRyOiB7IHRhcmdldDogJ19ibGFuaycgfVxuXHRcdH0pO1xuXG5cdFx0Y29udGFpbmVyRWwuc2Nyb2xsVG9wID0gc2F2ZWRTY3JvbGxUb3A7XG5cdH0pKCk7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVWZXJzaW9uRGlzcGxheSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAoIXRoaXMudmVyc2lvblZhbHVlRWwgfHwgIXRoaXMuZm9yY2VXYXJuaW5nRWwpIHJldHVybjtcblx0ICBcblx0XHQvLyByZWFkIC52ZXJzaW9uLmpzb25cblx0XHRsZXQgaW5zdGFsbGVkID0gJyc7XG5cdFx0dHJ5IHtcblx0XHQgIGNvbnN0IHZlciA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJy52ZXJzaW9uLmpzb24nKTtcblx0XHQgIGluc3RhbGxlZCA9IEpTT04ucGFyc2UodmVyKS52ZXJzaW9uID8/ICcnO1xuXHRcdH0gY2F0Y2gge31cblx0XHRjb25zdCBsYXRlc3QgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gJycpLnRyaW0oKTtcblx0XHRjb25zdCBpc01hdGNoID0gaW5zdGFsbGVkID09PSBsYXRlc3Q7XG5cdCAgXG5cdFx0Ly8gdXBkYXRlIGp1c3QgdGhlIHZlcnNpb24gc3BhblxuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwudGV4dENvbnRlbnQgPSBpbnN0YWxsZWQgfHwgJ05vdCBpbnN0YWxsZWQnO1xuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwuc3R5bGUuY29sb3IgPSBpc01hdGNoXG5cdFx0ICA/ICd2YXIoLS10ZXh0LXN1Y2Nlc3MpJ1xuXHRcdCAgOiAndmFyKC0tdGV4dC1lcnJvciknO1xuXHQgIFxuXHRcdC8vIGNsZWFyIGFuZCByZS1yZW5kZXIganVzdCB0aGUgd2FybmluZyBjb250YWluZXJcblx0XHR0aGlzLmZvcmNlV2FybmluZ0VsLmVtcHR5KCk7XG5cdFx0aWYgKGluc3RhbGxlZCAmJiBsYXRlc3QgJiYgaW5zdGFsbGVkICE9PSBsYXRlc3QpIHtcblx0XHQgIGNvbnN0IHdhcm4gPSB0aGlzLmZvcmNlV2FybmluZ0VsLmNyZWF0ZURpdih7XG5cdFx0XHR0ZXh0OiBgXHUyNkEwXHVGRTBGIE5ldyB2ZXJzaW9uIGF2YWlsYWJsZSAoJHtpbnN0YWxsZWR9IFx1MjE5MiAke2xhdGVzdH0pIFx1MjAxNCB1c2UgcmVndWxhciB1cGRhdGUgaW5zdGVhZGAsXG5cdFx0ICB9KTtcblx0XHQgIHdhcm4uc3R5bGUuY3NzVGV4dCA9IGBcblx0XHRcdGZvbnQtc2l6ZTogMC44NWVtO1xuXHRcdFx0Y29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuXHRcdFx0Zm9udC1zdHlsZTogaXRhbGljO1xuXHRcdCAgYDtcblx0XHQgIHdhcm4uc2V0QXR0cigndGl0bGUnLCAnRm9yY2UgdXBkYXRpbmcgd2hpbGUgYSBuZXcgdmVyc2lvbiBpcyBhdmFpbGFibGUgbWF5IHNraXAgaW1wb3J0YW50IGNoYW5nZXMuJyk7XG5cdFx0fVxuXHQgIH1cblx0ICBcbn0gIFxuIiwgIi8vIHNyYy9maXJzdGluc3RhbGxjb25maXJtLnRzXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBCdXR0b25Db21wb25lbnQsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgSW5zdGFsbE9wdGlvbnMgfSBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgaW1wb3J0UnVsZXNldERhdGEgfSBmcm9tIFwiLi9ydWxlc2V0SW5zdGFsbGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBDb25maXJtRnJlc2hJbnN0YWxsTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgdGhpcy50aXRsZUVsLnNldFRleHQoXCJcdTI2QTBcdUZFMEYgV2FybmluZzogRnJlc2ggVmF1bHQgUmVjb21tZW5kZWRcIik7XG5cbiAgICAvLyBEaXNjbGFpbWVyIHRleHRcbiAgICB0aGlzLmNvbnRlbnRFbFxuICAgICAgLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgIHRleHQ6XG4gICAgICAgICAgXCJUaGUgZnVsbCBWVnVuZGVybG9yZSBpbnN0YWxsIGlzIGludGVuZGVkIGZvciBhIGZyZXNoLCBlbXB0eSBPYnNpZGlhbiB2YXVsdC4gXCIgK1xuICAgICAgICAgIFwiSWYgeW91IGluc3RhbGwgaW4gYSB2YXVsdCB0aGF0IGFscmVhZHkgaGFzIGZpbGVzLCBhbnkgZmlsZSB3aG9zZSBwYXRoIG1hdGNoZXMgYSBcIiArXG4gICAgICAgICAgXCJWVnVuZGVybG9yZSBUb29sa2l0IGZpbGUgd2lsbCBiZSBvdmVyd3JpdHRlbi5cXG5cXG5cIiArXG4gICAgICAgICAgXCJBbHNvIHRoaW5ncyBjb3VsZCBqdXN0IGdldCBtZXNzeS5cXG5cXG5cIiArXG4gICAgICAgICAgXCJNYWtlIGEgcGVyY2VwdGlvbiBjaGVjayBhbmQgcHJvY2VlZCB3aXRoIGNhdXRpb24hXCIsXG4gICAgICB9KVxuICAgICAgLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMWVtO1xuICAgICAgICBsaW5lLWhlaWdodDogMS40ZW07XG4gICAgICBgO1xuXG4gICAgLy8gQnV0dG9uIHJvdyBjb250YWluZXJcbiAgICBjb25zdCBidXR0b25Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgYnV0dG9uUm93LnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgIGdhcDogMC41ZW07XG4gICAgYDtcblxuICAgIC8vIFwiT2ggZ29kLCBjYW5jZWwhXCIgYnV0dG9uXG4gICAgbmV3IEJ1dHRvbkNvbXBvbmVudChidXR0b25Sb3cpXG4gICAgICAuc2V0QnV0dG9uVGV4dChcIk9oIGdvZCwgY2FuY2VsIVwiKVxuICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KTtcblxuICAgIC8vIFwiSW5zdGFsbCEhXCIgYnV0dG9uXG4gICAgbmV3IEJ1dHRvbkNvbXBvbmVudChidXR0b25Sb3cpXG4gICAgICAuc2V0QnV0dG9uVGV4dChcIkluc3RhbGwhIVwiKVxuICAgICAgLnNldEN0YSgpIC8vIG1ha2VzIGl0IGxvb2sgbGlrZSBhIHByaW1hcnkgYWN0aW9uXG4gICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgIC8vIGNsb3NlIHRoaXMgbW9kYWwgaW1tZWRpYXRlbHlcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICBcbiAgICAgICAgY29uc3Qgb3B0czogSW5zdGFsbE9wdGlvbnMgPSB7XG4gICAgICAgICAgY29tcGVuZGl1bTogdGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0sXG4gICAgICAgICAgcmVmZXJlbmNlczogWy4uLnRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2VdLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGxldCB0aGUgdXNlciBrbm93IHdlJ3JlIHdvcmtpbmdcbiAgICAgICAgbmV3IE5vdGljZShcIlx1MjNGMyBJbnN0YWxsaW5nIHRvb2xraXRcdTIwMjZcIik7XG4gIFxuICAgICAgICAvLyBncmFiIHRoZSBzZWxlY3Rpb25zIGZyb20gc2V0dGluZ3NcbiAgICAgICAgY29uc3QgY29tcGVuZGl1bSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtO1xuICAgICAgICBjb25zdCByZWZlcmVuY2VzID0gWy4uLnRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2VdO1xuICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBydW4geW91ciBuZXcgaW5zdGFsbGVyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uaW5zdGFsbEZ1bGxUb29sa2l0KHsgY29tcGVuZGl1bSwgcmVmZXJlbmNlcyB9KTtcblxuXG4gICAgICAgICAgaWYgKGNvbXBlbmRpdW0pIHtcbiAgICAgICAgICAgIGF3YWl0IGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICAgICAgICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgICAgICAgICAgZWRpdGlvbktleTogY29tcGVuZGl1bSxcbiAgICAgICAgICAgICAgdGFyZ2V0UGF0aDogXCJDb21wZW5kaXVtXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlx1Mjc0QyBpbnN0YWxsVG9vbGtpdCgpIGZhaWxlZDpcIiwgZXJyKTtcbiAgICAgICAgICBuZXcgTm90aWNlKFwiXHUyNzRDIFRvb2xraXQgaW5zdGFsbGF0aW9uIGZhaWxlZC4gU2VlIGNvbnNvbGUuXCIpO1xuICAgICAgICB9XG4gIFxuICAgICAgICAvLyBtYXJrIGZpcnN0XHUyMDEwcnVuIGNvbXBsZXRlIHNvIHRoZSBjYXJkIG5ldmVyIHNob3dzIGFnYWluXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm5lZWRzSW5zdGFsbCA9IGZhbHNlO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgXG4gICAgICAgIC8vIHJlXHUyMDEwZHJhdyB0aGUgc2V0dGluZ3MgVUkgbm93IHRoYXQgd2UncmUgcGFzdCBmaXJzdFx1MjAxMHJ1blxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG4gICAgICB9KVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iLCAiLy8gRlVUVVJFIFNZU1RFTVM6IFxuLy8gQ2FsbCBvZiBDdGh1bHUgXG4vLyBNb3RoZXJzaGlwXG4vLyBQRjJFXG4vLyBNXHUwMEY2cmsgQm9yZ1xuLy8gQmxhZGVzIGluIHRoZSBEYXJrXG4vLyBEZWx0YSBHcmVlblxuLy8gU3RhcmZpbmRlclxuLy8gVGhlIE9uZSBSaW5nXG4vLyBGYXRlIFxuLy8gQ3liZXJwdW5rXG4vLyBMYW5jZXJcbi8vIFBvd2VyZWQgYnkgdGhlIEFwb2NhbHlwc2Vcbi8vIFN0YXIgV2FycyBSUEdcblxuZXhwb3J0IGludGVyZmFjZSBFZGl0aW9uIHtcbiAgICBpZDogc3RyaW5nOyAgICAgICAgICAgICAgLy8gZS5nLiBcIjVlLTIwMTRcIlxuICAgIGxhYmVsOiBzdHJpbmc7ICAgICAgICAgICAvLyBlLmcuIFwiRCZEIDVFICgyMDE0KVwiXG4gICAgcmVwbz86IHN0cmluZzsgICAgICAgICAgICAvLyBlLmcuIFwiNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLTIwMTQtc3JjXCJcbiAgICBwYXJzZXI/OiBzdHJpbmc7ICAgICAgIC8vIHlvdXIgcGFyc2VyXHUyMDEwc2VsZWN0b3JcbiAgICBzb3VyY2VVcmw/OiBzdHJpbmc7XG4gICAgY2F0ZWdvcmllcz86IHN0cmluZ1tdO1xuICB9XG4gIFxuICBleHBvcnQgY29uc3QgQVZBSUxBQkxFX0VESVRJT05TOiBFZGl0aW9uW10gPSBbXG4gICAge1xuICAgICAgaWQ6ICc1ZS0yMDE0JyxcbiAgICAgIGxhYmVsOiAnRCZEIDVFICgyMDE0KScsXG4gICAgICByZXBvOiAnNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLTIwMTQtc3JjJyxcbiAgICAgIHBhcnNlcjogJzVlLWpzb24nLFxuICAgICAgc291cmNlVXJsOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLzVldG9vbHMtbWlycm9yLTMvNWV0b29scy0yMDE0LXNyYy9tYWluL2RhdGEnLFxuICAgICAgY2F0ZWdvcmllczogWycnXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnNWUtMjAyNScsXG4gICAgICBsYWJlbDogJ0QmRCA1RSAoMjAyNSknLFxuICAgICAgcmVwbzogJzVldG9vbHMtbWlycm9yLTMvNWV0b29scy1zcmMnLFxuICAgICAgcGFyc2VyOiAnNWUtMjAyNScsXG4gICAgICBzb3VyY2VVcmw6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLXNyYy9tYWluL2RhdGEnLFxuICAgIH0sXG4gXG4gICAgXG5cbiAgXTtcblxuICAgIC8vIHtcbiAgICAvLyAgIGlkOiAnJyxcbiAgICAvLyAgIGxhYmVsOiAnJyxcbiAgICAvLyAgIHJlcG86ICcnLFxuICAgIC8vICAgcGFyc2VyOiAnJyxcbiAgICAvLyAgIHNvdXJjZVVybDogJycsXG4gICAgLy8gICBjYXRlZ29yaWVzOiBbJyddLFxuICAgIC8vIH0sICAiLCAiaW1wb3J0IHsgQXBwLCBub3JtYWxpemVQYXRoIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgdHlwZSB7IEVkaXRpb24gfSBmcm9tIFwiLi4vLi4vZWRpdGlvbnNcIjtcbmltcG9ydCB7IHBhcnNlU3BlbGxzRmlsZSB9IGZyb20gXCIuL3NwZWxsc1wiO1xuaW1wb3J0IHsgcGFyc2VCZXN0aWFyeUZpbGUgfSBmcm9tIFwiLi9iZXN0aWFyeVwiO1xuaW1wb3J0IHsgcGFyc2VJdGVtc0ZpbGUgfSBmcm9tIFwiLi9pdGVtc1wiO1xuaW1wb3J0IHsgcGFyc2VTcGVjaWVzRmlsZSB9IGZyb20gXCIuL3NwZWNpZXNcIjtcbmltcG9ydCB7IHBhcnNlQ2xhc3NGaWxlIH0gZnJvbSBcIi4vY2xhc3Nlc1wiO1xuaW1wb3J0IHsgcGFyc2VBY3Rpb25zRmlsZSwgcGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlLCBwYXJzZVNlbnNlc0ZpbGUsIHBhcnNlU2tpbGxzRmlsZSB9IGZyb20gXCIuL3J1bGVzXCI7XG5pbXBvcnQgeyBwYXJzZUZlYXRzRmlsZSB9IGZyb20gXCIuL2ZlYXRzXCI7XG5pbXBvcnQgeyBwYXJzZUJhY2tncm91bmRzRmlsZSB9IGZyb20gXCIuL2JhY2tncm91bmRzXCI7XG5pbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5cbi8vIFx1MjAxNCBHaXRIdWIgbGlzdGluZ3MgXHUyMDE0XG5hc3luYyBmdW5jdGlvbiBsaXN0U3BlbGxGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvc3BlbGxzYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gZGF0YVxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIGl0ZW0ubmFtZS5zdGFydHNXaXRoKFwic3BlbGxzLVwiKSAmJiBpdGVtLm5hbWUuZW5kc1dpdGgoXCIuanNvblwiKSlcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdEJlc3RpYXJ5RmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL2Jlc3RpYXJ5YDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgbGlzdCA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICBjb25zdCBDT1JFX1NPVVJDRVMgPSBbXG4gICAgXCJiZXN0aWFyeS1waGIuanNvblwiLCBcImJlc3RpYXJ5LW1tLmpzb25cIiwgXCJiZXN0aWFyeS1kbWcuanNvblwiLFxuICAgIFwiYmVzdGlhcnkteGdlLmpzb25cIiwgXCJiZXN0aWFyeS12Z20uanNvblwiLCBcImJlc3RpYXJ5LXRjZS5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1lZ3cuanNvblwiLCBcImJlc3RpYXJ5LWVybHcuanNvblwiLCBcImJlc3RpYXJ5LW10Zi5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS12cmdyLmpzb25cIiwgXCJiZXN0aWFyeS1jb3MuanNvblwiLCBcImJlc3RpYXJ5LW9vdGEuanNvblwiLFxuICAgIFwiYmVzdGlhcnktcG90YS5qc29uXCIsIFwiYmVzdGlhcnktaG90ZHEuanNvblwiLCBcImJlc3RpYXJ5LXJvdC5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1za3QuanNvblwiLCBcImJlc3RpYXJ5LXRmdHlwLmpzb25cIiwgXCJiZXN0aWFyeS10b2EuanNvblwiXG4gIF07XG4gIHJldHVybiBsaXN0XG4gICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiYgQ09SRV9TT1VSQ0VTLmluY2x1ZGVzKGl0ZW0ubmFtZSkpXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbmNvbnN0IElURU1fSlNPTl9GSUxFUyA9IFtcbiAgXCJpdGVtcy1iYXNlLmpzb25cIixcbiAgXCJpdGVtcy5qc29uXCIsXG4gIFwib2JqZWN0cy5qc29uXCIsXG4gIFwidmVoaWNsZXMuanNvblwiLFxuICBcImRlY2tzLmpzb25cIixcbl07XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RJdGVtRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gZGF0YVxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIElURU1fSlNPTl9GSUxFUy5pbmNsdWRlcyhpdGVtLm5hbWUpKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBsaXN0Q2xhc3NGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvY2xhc3NgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBsaXN0aW5nID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIHJldHVybiBsaXN0aW5nXG4gICAgLmZpbHRlcihpdGVtID0+XG4gICAgICBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmXG4gICAgICBpdGVtLm5hbWUuc3RhcnRzV2l0aChcImNsYXNzLVwiKSAmJlxuICAgICAgaXRlbS5uYW1lLmVuZHNXaXRoKFwiLmpzb25cIilcbiAgICApXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbi8vIFx1MjAxNCBlbnN1cmUgdGhlIHZhdWx0IGZvbGRlciBleGlzdHMgXHUyMDE0XG5hc3luYyBmdW5jdGlvbiBlbnN1cmVGb2xkZXIoYXBwOiBBcHAsIGZvbGRlclBhdGg6IHN0cmluZykge1xuICBjb25zdCBwYXJ0cyA9IGZvbGRlclBhdGguc3BsaXQoXCIvXCIpO1xuICBsZXQgY3VyciA9IFwiXCI7XG4gIGZvciAoY29uc3QgcCBvZiBwYXJ0cykge1xuICAgIGN1cnIgPSBjdXJyID8gYCR7Y3Vycn0vJHtwfWAgOiBwO1xuICAgIHRyeSB7IGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIoY3Vycik7IH1cbiAgICBjYXRjaCB7fSAvLyBhbHJlYWR5IGV4aXN0c1xuICB9XG59XG5cbi8vIFx1MjAxNCB0aGUgb25lIGVudHJ5LXBvaW50IHRoYXQgeW91ciB0b3AtbGV2ZWwgY2FsbHMgXHUyMDE0XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW1wb3J0RWRpdGlvbkRhdGEocGFyYW1zOiB7XG4gIGFwcDogQXBwO1xuICBlZGl0aW9uOiBFZGl0aW9uO1xuICB0YXJnZXRQYXRoOiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHsgYXBwLCBlZGl0aW9uLCB0YXJnZXRQYXRoIH0gPSBwYXJhbXM7XG4gIGNvbnN0IHJlcG8gPSBlZGl0aW9uLnJlcG8gPz8gXCJcIjtcblxuICAvLyBcdUQ4M0RcdUREMzkgU1BFTExTXG4gIHtcbiAgICBjb25zdCBzcGVsbEZpbGVzID0gYXdhaXQgbGlzdFNwZWxsRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZmlsZU5hbWUgb2Ygc3BlbGxGaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9zcGVsbHMvJHtmaWxlTmFtZX1gKTtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gcGFyc2VTcGVsbHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgICBmb3IgKGNvbnN0IG1kIG9mIGZpbGVzKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1NwZWxscy8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBzcGVsbCAke2ZpbGVOYW1lfTpgLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdUQ4M0RcdUREMzkgQkVTVElBUllcbiAge1xuICAgIGNvbnN0IGJlc3RpYXJ5RmlsZXMgPSBhd2FpdCBsaXN0QmVzdGlhcnlGaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBiZXN0aWFyeUZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgICAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYmVzdGlhcnkvJHtmaWxlTmFtZX1gKTtcbiAgICAgICAgY29uc3QganNvbiAgID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VCZXN0aWFyeUZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgcGFyc2VkKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L0Jlc3RpYXJ5LyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGJlc3RpYXJ5ICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1RDgzRFx1REQzOSBJVEVNU1xuICB7XG4gICAgY29uc3QgaXRlbUZpbGVzID0gYXdhaXQgbGlzdEl0ZW1GaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmbiBvZiBpdGVtRmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vJHtmbn1gKTtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUl0ZW1zRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGl0ZW1zIGZyb20gJHtmbn06YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4vLyBcdUQ4M0RcdUREMzkgU1BFQ0lFU1xue1xuICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3JhY2VzLmpzb25gKTtcbiAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNwZWNpZXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vUGxheWVyIEJ1aWxkLyR7bWQucGF0aH1gKTtcbiAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpKTtcbiAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gIH1cbn1cbi8vIFx1RDgzRFx1REQzOSBGRVRDSCBPUFRJT05BTCBGRUFUVVJFUyBKU09OXG5sZXQgb3B0aW9uYWxGZWF0dXJlczogYW55W10gPSBbXTtcbnRyeSB7XG4gIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vb3B0aW9uYWxmZWF0dXJlcy5qc29uYCk7XG4gIGNvbnN0IHJhdyAgPSBhd2FpdCByZXMuanNvbigpO1xuICBvcHRpb25hbEZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShyYXcub3B0aW9uYWxmZWF0dXJlKVxuICAgID8gcmF3Lm9wdGlvbmFsZmVhdHVyZVxuICAgIDogW107XG59IGNhdGNoIChlKSB7XG4gIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgb3B0aW9uYWxmZWF0dXJlcy5qc29uOlwiLCBlKTtcbn1cblxuLy8gXHVEODNEXHVERDM5IENMQVNTRVNcbntcbiAgY29uc3QgY2xhc3NGaWxlcyA9IGF3YWl0IGxpc3RDbGFzc0ZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBjbGFzc0ZpbGVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGZldGNoIHRoZSByYXcgY2xhc3MgSlNPTlxuICAgICAgY29uc3QgcmVzICAgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2NsYXNzLyR7ZmlsZU5hbWV9YCk7XG4gICAgICBjb25zdCBqc29uICAgPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICAvLyBwYXJzZSBpbnRvIG9uZSBvciBtb3JlIG1hcmtkb3duIGZpbGVzXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDbGFzc0ZpbGUoXG4gICAgICAgIGpzb24sXG4gICAgICAgIGVkaXRpb24uaWQsXG4gICAgICAgIGZpbGVOYW1lLFxuICAgICAgICBvcHRpb25hbEZlYXR1cmVzXG4gICAgICApO1xuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9QbGF5ZXIgQnVpbGQvJHttZC5wYXRofWApO1xuICAgICAgICAvLyAxKSBlbnN1cmUgdGhlIGZvbGRlciBleGlzdHNcbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKSk7XG5cbiAgICAgICAgLy8gMikgd3JpdGUgdmlhIE9ic2lkaWFuXHUyMDE5cyBBUEkgc28gbm90ZXMgcmVmcmVzaFxuICAgICAgICBjb25zdCBleGlzdGluZyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbFBhdGgpO1xuICAgICAgICBpZiAoZXhpc3RpbmcgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgIC8vIE92ZXJ3cml0ZSBhbiBleGlzdGluZyBub3RlIGFuZCBmaXJlIHRoZSBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQubW9kaWZ5KGV4aXN0aW5nLCBtZC5jb250ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDcmVhdGUgYSBicmFuZC1uZXcgbm90ZSAoYWxzbyBmaXJlcyB0aGUgY2hhbmdlIGV2ZW50KVxuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGNsYXNzICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgIH1cbiAgfVxufVxuXG5cbiAvLyBcdUQ4M0RcdUREMzkgUlVMRVM6IEFDVElPTlNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYWN0aW9ucy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUFjdGlvbnNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgIFxuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGFjdGlvbnMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cblxuICAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogQ09ORElUSU9OUyAmIERJU0VBU0VTXG4gIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9jb25kaXRpb25zZGlzZWFzZXMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBjb25kaXRpb25zZGlzZWFzZXMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogU0VOU0VTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NlbnNlcy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNlbnNlc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgc2Vuc2VzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogU0tJTExTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NraWxscy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNraWxsc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgc2tpbGxzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAvLyBcdUQ4M0RcdUREMzkgRkVBVFNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vZmVhdHMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VGZWF0c0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgZmVhdHMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbi8vIFx1RDgzRFx1REQzOSBCQUNLR1JPVU5EU1xue1xuICB0cnkge1xuICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYmFja2dyb3VuZHMuanNvbmApO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuXG4gICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAvLyBtZC5wYXRoIGlzIFwiUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLzxOYW1lPi5tZFwiXG4gICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWApO1xuICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgYmFja2dyb3VuZHMuanNvbjpcIiwgZSk7XG4gIH1cbn1cblxufSIsICIvLyBoZWxwZXJzL3NvdXJjZU1hcC50c1xuXG4vLyBNYXAgb2YgNWUgc291cmNlIGFiYnJldmlhdGlvbnMgdG8gdGhlaXIgZnVsbCB0aXRsZXNcbmNvbnN0IFNPVVJDRV9OQU1FX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgLy8gQ29yZSBydWxlYm9va3NcbiAgUEhCOiBcIlBsYXllcidzIEhhbmRib29rXCIsXG4gIE1NOiAgXCJNb25zdGVyIE1hbnVhbFwiLFxuICBETUc6IFwiRHVuZ2VvbiBNYXN0ZXIncyBHdWlkZVwiLFxuXG4gIC8vIE9mZmljaWFsIGV4cGFuc2lvbnMgJiBhZHZlbnR1cmUgbW9kdWxlc1xuICBDb1M6ICBcIkN1cnNlIG9mIFN0cmFoZFwiLFxuICBPb3RBOiBcIk91dCBvZiB0aGUgQWJ5c3NcIixcbiAgUG90QTogXCJQcmluY2VzIG9mIHRoZSBBcG9jYWx5cHNlXCIsXG4gIEhvdERROiBcIkhvYXJkIG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgUm9UOiAgXCJSaXNlIG9mIFRpYW1hdFwiLFxuICBTS1Q6ICBcIlN0b3JtIEtpbmcncyBUaHVuZGVyXCIsXG4gIFRmdFlQOlwiVGFsZXMgZnJvbSB0aGUgWWF3bmluZyBQb3J0YWxcIixcbiAgVG9BOiAgXCJUb21iIG9mIEFubmloaWxhdGlvblwiLFxuXG4gIC8vIFN1cHBsZW1lbnRhbCBndWlkZXNcbiAgWEdFOiBcIlhhbmF0aGFyJ3MgR3VpZGUgdG8gRXZlcnl0aGluZ1wiLFxuICBWR006IFwiVm9sbydzIEd1aWRlIHRvIE1vbnN0ZXJzXCIsXG4gIFRDRTogXCJUYXNoYSdzIENhdWxkcm9uIG9mIEV2ZXJ5dGhpbmdcIixcbiAgRUdXOiBcIkViZXJyb246IFJpc2luZyBmcm9tIHRoZSBMYXN0IFdhclwiLFxuICBFUkxXOlwiRXhwbG9yZXIncyBHdWlkZSB0byBXaWxkZW1vdW50XCIsXG4gIE1URjogXCJNb25zdGVycyBvZiB0aGUgTXVsdGl2ZXJzZVwiLFxuICBWUkdSOlwiVmFuIFJpY2h0ZW4ncyBHdWlkZSB0byBSYXZlbmxvZnRcIixcblxuICAvLyBBZGRpdGlvbmFsIHNvdXJjZWJvb2tzXG4gIEFBRzogICAgICBcIkFzdHJhbCBBZHZlbnR1cmVyXHUyMDE5cyBHdWlkZVwiLFxuICBBSTogICAgICAgXCJBY3F1aXNpdGlvbnMgSW5jb3Jwb3JhdGVkXCIsXG4gIEFpdEZSQVZGVDpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmlzdWFsIEZpZWxkIFRlc3RcIixcbiAgQk1UOiAgICAgIFwiQmlnIE1vbnN0ZXIgVG9tZVwiLFxuICBEb0RrOiAgICAgXCJEcmFnb24gb2YgRGFya2tlZXBcIixcbiAgRlREOiAgICAgIFwiRml6YmFuXHUyMDE5cyBUcmVhc3VyeSBvZiBEcmFnb25zXCIsXG4gIEdHUjogICAgICBcIkd1aWxkbWFzdGVyXHUyMDE5cyBHdWlkZSB0byBSYXZuaWNhXCIsXG4gIEdITG9FOiAgICBcIkdob3N0cyBvZiB0aGUgSG9yaXpvbjogTGlnaHQgT3ZlciBFbGVuc2FyaWFcIixcbiAgSURSb3RGOiAgIFwiSWNld2luZCBEYWxlOiBSaW1lIG9mIHRoZSBGcm9zdG1haWRlblwiLFxuICBMTEs6ICAgICAgXCJMb3N0IExhYm9yYXRvcnkgb2YgS3dhbGlzaFwiLFxuICBTYXRPOiAgICAgXCJTYXBwaGlyZSBvZiBUcnV0aFwiLFxuICBTQ0M6ICAgICAgXCJTdHJpeGhhdmVuOiBDdXJyaWN1bHVtIG9mIENoYW9zXCIsXG4gIFREQ1NSOiAgICBcIlRoZSBEdW5nZW9uIENvYWNoXHUyMDE5cyBSdWxlYm9va1wiLFxuICBKdHRSQzogICAgXCJKb3VybmV5cyB0aHJvdWdoIHRoZSBSYWRpYW50IENpdGFkZWxcIixcbiAgXCJBaXRGUi1BVlRcIjpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmVyZGFudCBUb21iXCIsXG4gIFwiQWl0RlItRkNEXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBGcm9tIEN5YW4gRGVwdGhzXCIsXG4gIFJNUjogICAgICBcIkR1bmdlb25zIGFuZCBEcmFnb25zOiBSaWNrIGFuZCBNb3J0eVwiLFxuICBTQ0FHOiAgICAgXCJTd29yZCBDb2FzdCBBZHZlbnR1cmVyJ3MgR3VpZGVcIixcbiAgRUVQQzogICAgIFwiRWxlbWVudGFsIEV2aWwgUGxheWVyJ3MgQ29tcGFuaW9uXCIsXG4gIE1PVDogICAgICBcIk15dGhpYyBPZHlzc2V5cyBvZiBUaGVyb3NcIixcbiAgV0J0VzogICAgIFwiVGhlIFdpbGQgQmV5b25kIHRoZSBXaXRjaGxpZ2h0XCIsXG4gIEJHRElBOiAgICBcIkJhbGR1cidzIEdhdGU6IERlc2NlbnQgSW50byBBdmVybnVzXCIsXG4gIFRvRlc6ICAgICBcIlR1cm4gb2YgRm9ydHVuZSdzIFdoZWVsXCIsXG4gIENvQTogICAgICBcIkNoYWlucyBvZiBBc21vZGV1c1wiLFxuICBDUkNvdE46ICAgXCJDcml0aWNhbCBSb2xlOiBDYWxsIG9mIHRoZSBOZXRoZXJkZWVwXCIsXG4gIFRvRDogICAgICBcIlR5cmFubnkgb2YgRHJhZ29uc1wiLFxuICBNUE1NOiAgICAgXCJNb3JkZW5rYWluZW4gUHJlc2VudHM6IE1vbnN0ZXJzIG9mIHRoZSBNdWx0aXZlcnNlXCIsXG4gIExvWDogICAgICBcIkxpZ2h0IG9mIFhhcnl4aXNcIixcbiAgUWZ0SVM6ICAgIFwiUXVlc3RzIGZyb20gdGhlIEluZmluaXRlIFN0YWlyY2FzZVwiLFxuICBXREg6ICAgICAgXCJXYXRlcmRlZXA6IERyYWdvbiBIZWlzdFwiLFxuICBXRE1NOiAgICAgXCJXYXRlcmRlZXA6IER1bmdlb24gb2YgdGhlIE1hZCBNYWdlXCIsXG4gIFBhQlRTTzogICBcIlBoYW5kZWx2ZXIgYW5kIEJlbG93OiBUaGUgU2hhdHRlcmVkIE9iZWxpc2tcIixcbiAgQ006ICAgICAgIFwiQ2FuZGxla2VlcCBNeXN0ZXJpZXNcIixcbiAgR29TOiAgICAgIFwiR2hvc3RzIG9mIFNhbHRtYXJzaFwiLFxuICBEU290RFE6ICAgXCJEcmFnb25sYW5jZTogU2hhZG93IG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgS2Z0R1Y6ICAgIFwiS2V5cyBmcm9tIHRoZSBHb2xkZW4gVmF1bHRcIixcbiAgU0RXOiAgICAgIFwiRXNzZW50aWFscyBLaXQ6IFNsZWVwaW5nIERyYWdvbidzIFdha2VcIixcbiAgRG9TSTogICAgIFwiRHJhZ29ucyBvZiBTdG9ybXdyZWNrIElzbGVcIixcbiAgR290U0Y6ICAgIFwiR2lhbnRzIG9mIHRoZSBTdGFyIEZvcmdlXCIsXG4gIERJUDogICAgICBcIkVzc2VudGlhbHMgS2l0OiBEcmFnb24gb2YgSWNlc3BpcmUgUGVha1wiLFxuICBTTFc6ICAgICAgXCJFc3NlbnRpYWxzIEtpdDogU3Rvcm0gTG9yZCdzIFdyYXRoXCIsXG4gIElNUjogICAgICBcIkluZmVybmFsIE1hY2hpbmUgUmVidWlsZFwiLFxuICBWRW9SOiAgICAgXCJWZWNuYTogRXZlIG9mIFJ1aW5cIixcbiAgUFNJOiAgICAgIFwiUGxhbmUgU2hpZnQ6IElubmlzdHJhZFwiLFxuICBBQVRNOiAgICAgXCJBZHZlbnR1cmUgQXRsYXM6IFRoZSBNb3J0dWFyeVwiLFxuICBQU1o6ICAgICAgXCJQbGFuZSBTaGlmdDogWmVuZGlrYXJcIixcbiAgREM6ICAgICAgIFwiRXNzZW50aWFscyBLaXQ6IERpdmluZSBDb250ZW50aW9uXCIsXG4gIExNb1A6ICAgICBcIkxvc3QgTWluZSBvZiBQaGFuZGVsdmVyXCIsXG4gIFJNQlJFOiAgICBcIlRoZSBMb3N0IER1bmdlb24gb2YgUmlja2VkbmVzczogQmlnIFJpY2sgRW5lcmd5XCIsXG4gIEhmdFQ6ICAgICBcIkh1bnQgZm9yIHRoZSBUaGVzc2FsaHlkcmFcIixcbiAgUFNYOiAgICAgIFwiUGxhbmUgU2hpZnQ6IEl4YWxhblwiLFxuICBIRlN0Q006ICAgXCJIZXJvZXMnIEZlYXN0OiBTYXZpbmcgdGhlIENoaWxkcmVucyBNZW51XCIsXG4gIFNqQTogICAgICBcIlNwZWxsamFtbWVyIEFjYWRlbXlcIixcbiAgTEs6ICAgICAgIFwiTGlnaHRuaW5nIEtlZXBcIixcbiAgUnRHOiAgICAgIFwiUmV0dXJuIHRvIHRoZSBHbG9yeVwiLFxuICBUVFA6ICAgICAgXCJUaGUgVG9ydGxlIFBhY2thZ2VcIixcbiAgTFI6ICAgICAgIFwiTG9jYXRoYWggUmlzaW5nXCIsXG4gIFBTQTogICAgICBcIlBsYW5lIFNoaWZ0OiBBbW9ua2hldFwiLFxuICBPR0E6ICAgICAgXCJPbmUgR3J1bmcgQWJvdmVcIixcbiAgXCJOUkgtVExUXCI6ICBcIk5lcmRzIFJlc3RvcmluZyBIYXJtb255OiBUaGUgTG9zdCBUb21iXCIsXG4gIFwiTlJILUFUXCI6ICAgXCJOZXJkcyBSZXN0b3JpbmcgSGFybW9ueTogQWR2ZW50dXJlIFRvZ2V0aGVyXCIsXG4gIEJHRzogICAgICBcIkJpZ2J5IFByZXNlbnRzOiBHbG9yeSBvZiB0aGUgR2lhbnRzXCIsXG4gIFJvVE9TOiAgICBcIlRoZSBSaXNlIG9mIFRpYW1hdCBPbmxpbmUgU3VwcGxlbWVudFwiLFxuICBYTXRTOiAgICAgXCJYIE1hcmtzIHRoZSBTcG90XCIsXG4gIFwiSEFULUxNSVwiOiAgXCJIb25vciBBbW9uZyBUaGVpdmVzOiBMZWdlbmRhcnkgTWFnaWMgSXRlbXNcIixcbiAgRGl0TENvVDogIFwiRGVzY2VudCBpbnRvIHRoZSBMb3N0IENhdmVybnMgb2YgVHNvamNhbnRoXCIsXG4gIFwiQWl0RlItRE5cIjogXCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBEZWVwZXN0IE5pZ2h0XCIsXG4gIFwiQWl0RlItVEhQXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBUaGUgSGlkZGVuIFBhZ2VzXCIsXG4gIEJBTTogICAgICBcIkJvbydzIEFzdHJhbCBNZW5hZ2VyaWVcIixcbiAgQVpmeVQ6ICAgIFwiQSBaaWIgZm9yIFlvdXIgVGhvdWd0c1wiLFxuICBNQ1YyREM6ICAgXCJNb25zdHJvdXMgQ29tcGVuZGl1bSBWb2x1bWUgMjogRHJhZ29ubGFuY2UgQ3JlYXR1cmVzXCIsXG4gIFBTSzogICAgICBcIlBsYW5lIFNoaWZ0OiBLYWxhZGVzaFwiLFxuICBQU0Q6ICAgICAgXCJQbGFuZSBTaGlmdDogRG9taW5hcmlhXCIsXG4gIEFXTTogICAgICBcIkFkdmVudHVyZSB3aXRoIE11a1wiLFxuICBVQVRoZU15c3RpY0NsYXNzOiBcIlVuZWFydGhlZCBBcmNhbmE6IFRoZSBNeXN0aWMgQ2xhc3NcIixcbiAgQUxDdXJzZU9mU3RyYWhkOiBcIkFkdmVudHVyZXJzIExlYWd1ZTogQ3Vyc2Ugb2YgU3RyYWhkXCIsXG4gIEFMRWxlbWVudGFsRXZpbDogXCJBZHZlbnR1cmVycyBMZWFndWU6IEVsZW1lbnRhbCBFdmlsXCIsXG4gIEFMUmFnZU9mRGVtb25zOiAgXCJBZHZlbnR1cmVycyBMZWFndWU6IFJhZ2Ugb2YgRGVtb25zXCJcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZnVsbCBzb3VyY2UgbmFtZSBmb3IgYSBnaXZlbiBhYmJyZXZpYXRpb24uXG4gKiBPcHRpb25hbGx5IGFwcGVuZHMgeWVhciBmb3IgUEhCIHZhcmlhbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVsbFNvdXJjZU5hbWUoYWJicmV2OiBzdHJpbmcsIGVkaXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBuYW1lID0gU09VUkNFX05BTUVfTUFQW2FiYnJldl0gPz8gYWJicmV2O1xuXG4gIC8vIEFwcGVuZCB5ZWFyIGZvciBQSEIgaWYgdGhlIGVkaXRpb24gY29udGV4dCBpcyBrbm93blxuICBpZiAoYWJicmV2ID09PSBcIlBIQlwiKSB7XG4gICAgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDE0XCIpKSBuYW1lICs9IFwiICgyMDE0KVwiO1xuICAgIGVsc2UgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDI1XCIpKSBuYW1lICs9IFwiICgyMDI1KVwiO1xuICB9XG5cbiAgcmV0dXJuIG5hbWU7XG59XG4iLCAiLy8gcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvdGFnUmVwbGFjZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2U1ZVRhZ3MoaW5wdXQ6IHVua25vd24pOiBzdHJpbmcge1xuICAvLyAxKSBUdXJuIGFycmF5cyBpbnRvIHNwYWNlLWpvaW5lZCBzdHJpbmdzXG4gIC8vIDIpIExlYXZlIHN0cmluZ3MgYWxvbmVcbiAgLy8gMykgQ29lcmNlIGV2ZXJ5dGhpbmcgZWxzZSB0byBzdHJpbmcgKG9yIGVtcHR5KVxuICBsZXQgdGV4dDogc3RyaW5nO1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICB0ZXh0ID0gaW5wdXQuam9pbihcIiBcIik7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgdGV4dCA9IGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHRleHQgPSBTdHJpbmcoaW5wdXQgPz8gXCJcIik7XG4gIH1cblxuICAvLyBub3cgcnVuIGFsbCB5b3VyIEAtdGFnIHJlcGxhY2VtZW50cyBvbiB0aGF0IHRleHRcbiAgcmV0dXJuIHRleHRcbiAgICAucmVwbGFjZSgvXFx7QChzcGVsbHxpdGVtfGNyZWF0dXJlfHJhY2UpIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgX18sIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemVFYWNoKG5hbWUpfV1dYFxuICAgIClcbiAgICAucmVwbGFjZSgvXFx7QChjb25kaXRpb258c3RhdHVzfGFjdGlvbnxza2lsbCkgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCB0YWcsIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemUodGFnKX1zIyR7bmFtZX18JHtjYXBpdGFsaXplRWFjaChuYW1lKX1dXWBcbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0BjbGFzc0ZlYXR1cmUgKFtefH1dKylcXHwoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIGZlYXR1cmUsIGNscykgPT5cbiAgICAgIGBbWyR7Y2xzfSMke2ZlYXR1cmV9XV1gXG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAKGJvb2t8ZmlsdGVyKSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIF9fLCB0eHQpID0+IHR4dClcbiAgICAucmVwbGFjZSgvXFx7QG5vdGUgKFtefV0rKVxcfS9nLCAoXywgbm90ZSkgPT4gYCoke25vdGV9KmApXG4gICAgLnJlcGxhY2UoL1xce0AoZGFtYWdlfGRpY2V8ZGN8aGl0fHNlbnNlKSAoW159XSspXFx9L2csIChfLCBfXywgdmFsdWUpID0+IHZhbHVlKVxuICAgIC5yZXBsYWNlKC9cXHtAY2hhbmNlIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgdmFsdWUpID0+IGAke3ZhbHVlfSVgKVxuICAgIC5yZXBsYWNlKC9cXHtAcXVpY2tyZWYgKFtefH1dKykoPzpcXHxbXnxdKlxcfFtefV0qKT9cXH0vZywgKF8sIHRlcm0pID0+IHtcbiAgICAgIGNvbnN0IGtub3duID0gW1xuICAgICAgICBcImRpZmZpY3VsdCB0ZXJyYWluXCIsIFwidG90YWwgY292ZXJcIiwgXCJoYWxmIGNvdmVyXCIsIFwidGhyZWUtcXVhcnRlcnMgY292ZXJcIixcbiAgICAgICAgXCJoZWF2aWx5IG9ic2N1cmVkXCIsIFwibGlnaHRseSBvYnNjdXJlZFwiXG4gICAgICBdO1xuICAgICAgcmV0dXJuIGtub3duLmluY2x1ZGVzKHRlcm0udG9Mb3dlckNhc2UoKSlcbiAgICAgICAgPyBgW1tSdWxlcyMke2NhcGl0YWxpemVFYWNoKHRlcm0pfV1dYFxuICAgICAgICA6IHRlcm07XG4gICAgfSlcbiAgICAucmVwbGFjZSgvXFx7XFxANWV0b29sc1xccysoW158fV0rKVxcfFtefV0rXFx9L2csICckMScpXG4gICAgLnJlcGxhY2UoL1xce0ByZWNoYXJnZVxccyooW159XSspXFx9L2csIChfLCBudW0pID0+IGAocmVjaGFyZ2U6ICR7bnVtLnRyaW0oKX0pYClcbiAgICAucmVwbGFjZSgvXFx7QChzY2FsZWRpY2V8c2NhbGVkYW1hZ2UpW159XSpcXHwoW158fV0rKVxcfS9nLCAoXywgX18sIHZhbHVlKSA9PiB2YWx1ZSlcbiAgICAucmVwbGFjZSgvXFx7QGQyMFtefV0qXFx9L2csIFwiXCIpXG4gICAgLnJlcGxhY2UoL1xce0BbXn1dK1xcfS9nLCBcIlwiKTtcbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZUVhY2goc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc3RyLnNwbGl0KFwiIFwiKS5tYXAoY2FwaXRhbGl6ZSkuam9pbihcIiBcIik7XG59XG4iLCAiaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJNYXJrZG93blRhYmxlKGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAoZW50cnkudHlwZSAhPT0gXCJ0YWJsZVwiIHx8ICFBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCBjYXB0aW9uID0gZW50cnkuY2FwdGlvbiA/IGAjIyMjIyAke2VudHJ5LmNhcHRpb259XFxuYCA6IFwiXCI7XG5cbiAgY29uc3QgaGVhZGVycyA9IChlbnRyeS5jb2xMYWJlbHMgPz8gW10pXG4gICAgLm1hcCgoaDogc3RyaW5nKSA9PiByZXBsYWNlNWVUYWdzKGgudHJpbSgpKSk7IC8vIFx1MjcwNSB0YWcgcmVwbGFjZSBvbiBoZWFkZXJzXG5cbiAgY29uc3QgaGVhZGVyUm93ID0gYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgO1xuICBjb25zdCBkaXZpZGVyUm93ID0gYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIjotLVwiKS5qb2luKFwiIHwgXCIpfSB8YDtcblxuICBjb25zdCBib2R5Um93cyA9IGVudHJ5LnJvd3MubWFwKChyb3c6IGFueVtdKSA9PiB7XG4gICAgY29uc3QgY2VsbHMgPSByb3cubWFwKChjZWxsKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGNlbGwgPT09IFwic3RyaW5nXCIpIHJldHVybiByZXBsYWNlNWVUYWdzKGNlbGwpOyAvLyBcdTI3MDUgdGFnIHJlcGxhY2Ugc3RyaW5nc1xuXG4gICAgICBpZiAodHlwZW9mIGNlbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKGNlbGwucm9sbD8uZXhhY3QgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGAke2NlbGwucm9sbC5leGFjdH1gO1xuICAgICAgICBpZiAoY2VsbC5yb2xsPy5taW4gIT09IHVuZGVmaW5lZCAmJiBjZWxsLnJvbGw/Lm1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2NlbGwucm9sbC5taW59XHUyMDEzJHtjZWxsLnJvbGwubWF4fWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoSlNPTi5zdHJpbmdpZnkoY2VsbCkpOyAvLyBmYWxsYmFjayBmb3IgdW5rbm93biBzaGFwZXNcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKGNlbGwpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBgfCAke2NlbGxzLmpvaW4oXCIgfCBcIil9IHxgO1xuICB9KTtcblxuICByZXR1cm4gYCR7Y2FwdGlvbn0ke2hlYWRlclJvd31cXG4ke2RpdmlkZXJSb3d9XFxuJHtib2R5Um93cy5qb2luKFwiXFxuXCIpfWA7XG59XG4iLCAiLy8gZm9ybWF0RW50cnkudHNcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL21hcmtkb3duVGFibGVcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgY2xlYW5lZCA9IGVudHJ5LnRyaW0oKTtcbiAgICBpZiAoIWNsZWFuZWQgfHwgY2xlYW5lZCA9PT0gXCJ9XCIpIHJldHVybiBcIlwiO1xuICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGNsZWFuZWQpO1xuICB9XG5cbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBib2R5ID0gZW50cnkuZW50cmllc1xuICAgICAgLm1hcChmb3JtYXRFbnRyeSlcbiAgICAgIC5maWx0ZXIoKHN0cjogc3RyaW5nKSA9PiBzdHIudHJpbSgpLmxlbmd0aCA+IDApXG4gICAgICAuam9pbihcIlxcblxcblwiKTtcblxuICAgIHJldHVybiBlbnRyeS5uYW1lXG4gICAgICA/IGAjIyMjIyAke2VudHJ5Lm5hbWV9XFxuJHtib2R5fWBcbiAgICAgIDogYm9keTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgIHJldHVybiBlbnRyeS5pdGVtc1xuICAgICAgLm1hcCgoaTogYW55KSA9PiBgLSAke3JlcGxhY2U1ZVRhZ3ModHlwZW9mIGkgPT09IFwic3RyaW5nXCIgPyBpIDogSlNPTi5zdHJpbmdpZnkoaSkpfWApXG4gICAgICAuam9pbihcIlxcblwiKTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgIHJldHVybiByZW5kZXJNYXJrZG93blRhYmxlKGVudHJ5KTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcInF1b3RlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgIGNvbnN0IHF1b3RlID0gZW50cnkuZW50cmllcy5tYXAoZm9ybWF0RW50cnkpLmpvaW4oXCIgXCIpLnRyaW0oKTtcbiAgICBjb25zdCBhdXRob3IgPSBlbnRyeS5ieSA/IGAgXHUyMDE0ICR7ZW50cnkuYnl9YCA6IFwiXCI7XG4gICAgcmV0dXJuIGAqXCIke3F1b3RlfSR7YXV0aG9yfVwiKmA7XG4gIH1cblxuICBpZiAoZW50cnkudHlwZSA9PT0gXCJpbnNldFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBpbnNldCA9IGVudHJ5LmVudHJpZXMubWFwKGZvcm1hdEVudHJ5KS5qb2luKFwiXFxuXCIpLnRyaW0oKTtcbiAgICByZXR1cm4gYD4gJHtpbnNldC5yZXBsYWNlKC9cXG4vZywgXCJcXG4+IFwiKX1gO1xuICB9XG5cbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwicmVmQ2xhc3NGZWF0dXJlXCIgJiYgdHlwZW9mIGVudHJ5LmNsYXNzRmVhdHVyZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IFtuYW1lXSA9IGVudHJ5LmNsYXNzRmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgLnJlcGxhY2UoL1teXFx3XFxzLV0vZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIGBbWyMke2FuY2hvcn1dXWA7XG4gIH1cblxuICAvLyBJZiBpdCdzIGFuIHVua25vd24gb2JqZWN0LCBza2lwIGl0IHNhZmVseVxuICByZXR1cm4gXCJcIjtcbn1cbiIsICIvLyBwYXJzZXJzLzVlLWpzb24vYmVzdGlhcnkudHNcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwic3JjL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEJFU1RJQVJZX01FVEFfREVGUywgdW5pZmllZFNraWxscywgRk1fRklFTERTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5jb25zdCBza2lwcGVkTW9uc3RlcnM6IHN0cmluZ1tdID0gW107XG5cbi8vIFNpemUgYWJicmV2aWF0aW9ucyBtYXBwaW5nXG5leHBvcnQgXG5jb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbi8vIEFsaWdubWVudCBhYmJyZXZpYXRpb25zIG1hcHBpbmdcbmNvbnN0IEFMSUdOTUVOVF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEw6IFwiTGF3ZnVsXCIsXG4gIE46IFwiTmV1dHJhbFwiLFxuICBDOiBcIkNoYW90aWNcIixcbiAgRzogXCJHb29kXCIsXG4gIEU6IFwiRXZpbFwiLFxuICBVOiBcIlVuYWxpZ25lZFwiXG59O1xuXG4vLyBIZWxwZXIgdG8gY2FwaXRhbGl6ZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmdcbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdChzdHI6IHVua25vd24pOiBzdHJpbmcge1xuICBjb25zdCBzID0gU3RyaW5nKHN0ciB8fCBcIlwiKTtcbiAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U2l6ZUFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBTSVpFX01BUFthYmJyZXZdIHx8IGFiYnJldjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEFsaWdubWVudEFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBhYmJyZXZcbiAgICAudHJpbSgpXG4gICAgLnNwbGl0KC9cXHMrLylcbiAgICAubWFwKGxldHRlciA9PiBBTElHTk1FTlRfTUFQW2xldHRlcl0gfHwgbGV0dGVyKVxuICAgIC5qb2luKFwiIFwiKTtcbn1cblxuY29uc3QgUkFXX05QQ1M6IHN0cmluZ1tdID0gW1xuICBcIkFianVyZXJcIiwgXCJBY29seXRlXCIsIFwiQXBwcmVudGljZSBXaXphcmRcIiwgXCJBcmNoZHJ1aWRcIiwgXCJBcmNoZXJcIiwgXCJBcmNobWFnZVwiLCBcIkFzc2Fzc2luXCIsXG4gIFwiQmFuZGl0XCIsIFwiQmFuZGl0IENhcHRhaW5cIiwgXCJCYXJkXCIsIFwiQmVyc2Vya2VyXCIsIFwiQmxhY2tndWFyZFwiLCBcIkNoYW1waW9uXCIsIFwiQ29tbW9uZXJcIixcbiAgXCJDb25qdXJlclwiLCBcIkN1bHQgRmFuYXRpY1wiLCBcIkN1bHRpc3RcIiwgXCJEaXZpbmVyXCIsIFwiRHJ1aWQgKE5QQylcIiwgXCJEcnVpZCBOUENcIiwgXCJFbmNoYW50ZXJcIixcbiAgXCJFdm9rZXJcIiwgXCJHbGFkaWF0b3JcIiwgXCJHdWFyZFwiLCBcIklsbHVzaW9uaXN0XCIsIFwiS25pZ2h0XCIsIFwiS3Jha2VuIFByaWVzdFwiLCBcIk1hZ2VcIixcbiAgXCJNYXJ0aWFsIEFydHMgQWRlcHRcIiwgXCJNYXN0ZXIgVGhpZWZcIiwgXCJOZWNyb21hbmNlclwiLCBcIk5vYmxlXCIsIFwiUHJpZXN0XCIsIFwiU2NvdXRcIiwgXCJTcHlcIixcbiAgXCJTd2FzaGJ1Y2tsZXJcIiwgXCJUaHVnXCIsIFwiVHJhbnNtdXRlclwiLCBcIlRyaWJhbCBXYXJyaW9yXCIsIFwiVmV0ZXJhblwiLCBcIldhciBQcmllc3RcIixcbiAgXCJXYXJsb2NrIG9mIHRoZSBBcmNoZmV5XCIsIFwiV2FybG9jayBvZiB0aGUgRmllbmRcIiwgXCJXYXJsb2NrIG9mIHRoZSBHcmVhdCBPbGQgT25lXCIsIFwiV2FybG9yZFwiXG5dO1xuY29uc3QgTk9STUFMSVpFRF9OUENfTkFNRVMgPSBuZXcgU2V0KFJBV19OUENTLm1hcChuID0+IG5vcm1hbGl6ZU5hbWUobikpKTtcblxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2F0ZWdvcml6ZUNyZWF0dXJlKG1vbnN0ZXI6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IHR5cGVWYWx1ZSA9IG1vbnN0ZXIudHlwZTtcbiAgY29uc3QgbmFtZSA9IG1vbnN0ZXIubmFtZTtcbiAgY29uc3QgdCA9IHR5cGVvZiB0eXBlVmFsdWUgPT09IFwic3RyaW5nXCJcbiAgICA/IHR5cGVWYWx1ZS50b0xvd2VyQ2FzZSgpXG4gICAgOiB0eXBlVmFsdWU/LnR5cGU/LnRvTG93ZXJDYXNlKCkgfHwgU3RyaW5nKHR5cGVWYWx1ZSkudG9Mb3dlckNhc2UoKTtcblxuICBjb25zdCBub3JtYWxpemVkTmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSk7XG5cbiAgaWYgKG1vbnN0ZXIuaXNOcGMgfHwgbW9uc3Rlci5pc05hbWVkQ3JlYXR1cmUpIHJldHVybiBcIlN0b3J5IE5QQ3NcIjtcbiAgaWYgKHQgPT09IFwiYmVhc3RcIikgcmV0dXJuIFwiQmVhc3RzXCI7XG4gIGlmICh0ID09PSBcImh1bWFub2lkXCIgJiYgTk9STUFMSVpFRF9OUENfTkFNRVMuaGFzKG5vcm1hbGl6ZWROYW1lKSkgcmV0dXJuIFwiTm9uLUJlYXN0c1wiO1xuICBpZiAodCA9PT0gXCJodW1hbm9pZFwiKSByZXR1cm4gXCJNb25zdGVyc1wiO1xuICByZXR1cm4gXCJNb25zdGVyc1wiO1xufVxuXG5mdW5jdGlvbiByZW5kZXJBYmlsaXRpZXNUYWJsZShzdHI6IG51bWJlciwgZGV4OiBudW1iZXIsIGNvbjogbnVtYmVyLCBpbnQ6IG51bWJlciwgd2lzOiBudW1iZXIsIGNoYTogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIFtcbiAgICBgfCBTVFIgfCBERVggfCBDT04gfCBJTlQgfCBXSVMgfCBDSEEgfGAsXG4gICAgYHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHxgLFxuICAgIGB8ICR7c3RyfSB8ICR7ZGV4fSB8ICR7Y29ufSB8ICR7aW50fSB8ICR7d2lzfSB8ICR7Y2hhfSB8YFxuICBdLmpvaW4oXCJcXG5cIik7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBuYW1lID0gZW50cnkubmFtZTtcbiAgbGV0IGRlc2NyaXB0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5lbnRyaWVzO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5lbnRyaWVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmVudHJpZXNdO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZGVzYykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5kZXNjO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5kZXNjID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmRlc2NdO1xuICB9XG4gIGNvbnN0IHJhdyA9IGRlc2NyaXB0aW9ucy5qb2luKFwiIFwiKTtcbiAgY29uc3QgZGVzYyA9IHJlcGxhY2U1ZVRhZ3MocmF3KTtcbiAgcmV0dXJuIGAqKioke25hbWV9LioqKiAke2Rlc2N9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmVzdGlhcnlGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gICAgaWYgKCFqc29uLm1vbnN0ZXIpIHJldHVybiBbXTtcbiAgICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG4gIFxuICAgIC8vIDEpIEZpbHRlciBvdXQgXHUyMDFDcmVmZXJlbmNlXHUyMDFEIGVudHJpZXMgd2l0aCBubyBBQyBvciBIUFxuICAgIGNvbnN0IHZhbGlkTW9uc3RlcnMgPSBqc29uLm1vbnN0ZXIuZmlsdGVyKChtOiBhbnkpID0+IHtcbiAgICBjb25zdCBhY1ZhbCA9IEFycmF5LmlzQXJyYXkobS5hYylcbiAgICAgID8gbS5hY1swXT8uYWMgPz8gbS5hY1swXVxuICAgICAgOiB0eXBlb2YgbS5hYyA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IG0uYWM/LmFjID8/IG51bGxcbiAgICAgICAgOiBtLmFjO1xuXG4gICAgY29uc3QgaHBWYWwgPSB0eXBlb2YgbS5ocCA9PT0gXCJvYmplY3RcIlxuICAgICAgPyBtLmhwPy5hdmVyYWdlID8/IG0uaHA/LmhwID8/IG51bGxcbiAgICAgIDogbS5ocDtcbiAgICAgIHJldHVybiBhY1ZhbCAhPSBudWxsICYmIGhwVmFsICE9IG51bGwgJiYgIWlzTmFOKE51bWJlcihhY1ZhbCkpICYmICFpc05hTihOdW1iZXIoaHBWYWwpKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGFsbE5hbWVzID0gbmV3IFNldChqc29uLm1vbnN0ZXIubWFwKChtOiBhbnkpID0+IG0ubmFtZSkpO1xuY29uc3QgdmFsaWROYW1lcyA9IG5ldyBTZXQodmFsaWRNb25zdGVycy5tYXAoKG06IGFueSkgPT4gbS5uYW1lKSk7XG5jb25zdCBtaXNzaW5nID0gWy4uLmFsbE5hbWVzXS5maWx0ZXIobmFtZSA9PiAhdmFsaWROYW1lcy5oYXMobmFtZSkpO1xuXG4gIFxuICAgIHJldHVybiB2YWxpZE1vbnN0ZXJzLm1hcCgobW9uc3RlcjogYW55KSA9PiB7XG4gICAgICBjb25zdCBuYW1lICAgICA9IG1vbnN0ZXIubmFtZSBhcyBzdHJpbmc7XG4gICAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvXFwvL2csIFwiLVwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgUmF3IGZpZWxkcyAmIGZvcm1hdHRpbmcgXHUyMDE0XG4gICAgICBjb25zdCByYXdTaXplICAgICAgPSBtb25zdGVyLnNpemUgfHwgXCJNXCI7XG4gICAgICBjb25zdCByYXdBbGlnbm1lbnQgPSBBcnJheS5pc0FycmF5KG1vbnN0ZXIuYWxpZ25tZW50KVxuICAgICAgICA/IG1vbnN0ZXIuYWxpZ25tZW50LmpvaW4oXCIgXCIpXG4gICAgICAgIDogbW9uc3Rlci5hbGlnbm1lbnQgfHwgXCJOXCI7XG4gICAgbGV0IHJhd1R5cGUgPSBcIlVua25vd25cIjtcblxuICAgIGlmICh0eXBlb2YgbW9uc3Rlci50eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByYXdUeXBlID0gY2FwaXRhbGl6ZUZpcnN0KG1vbnN0ZXIudHlwZSk7XG4gICAgfSBlbHNlIGlmIChtb25zdGVyLnR5cGU/LnR5cGUpIHtcbiAgICAgIGNvbnN0IGJhc2UgPSBjYXBpdGFsaXplRmlyc3QobW9uc3Rlci50eXBlLnR5cGUpO1xuICAgICAgY29uc3QgdGFncyA9IG1vbnN0ZXIudHlwZS50YWdzPy5sZW5ndGggPyBgICgke21vbnN0ZXIudHlwZS50YWdzLm1hcChjYXBpdGFsaXplRmlyc3QpLmpvaW4oXCIsIFwiKX0pYCA6IFwiXCI7XG4gICAgICByYXdUeXBlID0gYCR7YmFzZX0ke3RhZ3N9YDtcbiAgICB9XG5cbiAgICBtb25zdGVyLl9wYXJzZWRUeXBlID0gcmF3VHlwZTtcbiAgICAgIFxuICAgIC8vIFx1MjAxNCBBQywgSFAsIENSIFx1MjAxNFxuICAgIGNvbnN0IGFjID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFjKSA/IG1vbnN0ZXIuYWNbMF0uYWMgOiBtb25zdGVyLmFjO1xuICAgIGNvbnN0IGhwID0gbW9uc3Rlci5ocD8uYXZlcmFnZSA/PyBtb25zdGVyLmhwO1xuICAgIGNvbnN0IGNyID0gbW9uc3Rlci5jcjtcblxuICAgIC8vIFNraXAgbW9uc3RlcnMgd2l0aCBubyBBQyBhbmQgSFBcbiAgICBpZiAoIWFjICYmICFocCkge1xuICAgICAgc2tpcHBlZE1vbnN0ZXJzLnB1c2gobW9uc3Rlci5uYW1lKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHUyMDE0IEFiaWxpdGllcyBcdTIwMTRcbiAgICAgIGNvbnN0IGFiaWxpdGllcyA9IEFycmF5LmlzQXJyYXkobW9uc3Rlci5hYmlsaXR5KVxuICAgICAgICA/IG1vbnN0ZXIuYWJpbGl0eVxuICAgICAgICA6IFttb25zdGVyLnN0ciwgbW9uc3Rlci5kZXgsIG1vbnN0ZXIuY29uLCBtb25zdGVyLmludCwgbW9uc3Rlci53aXMsIG1vbnN0ZXIuY2hhXTtcbiAgICAgIGNvbnN0IFtzdHIgPSAxMCwgZGV4ID0gMTAsIGNvbiA9IDEwLCBpbnQgPSAxMCwgd2lzID0gMTAsIGNoYSA9IDEwXSA9IGFiaWxpdGllcztcbiAgXG4gICAgICAvLyBcdTIwMTQgU3BlZWQgKGhhbmRsZXMgaG92ZXIgJiBvYmplY3Qgc3BlZWRzKSBcdTIwMTRcbiAgICAgIGNvbnN0IHNwZWVkTGlzdDogc3RyaW5nW10gPSBbXTtcbiAgICAgIGlmICh0eXBlb2YgbW9uc3Rlci5zcGVlZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBmb3IgKGNvbnN0IFttb2RlLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKG1vbnN0ZXIuc3BlZWQpKSB7XG4gICAgICAgICAgaWYgKG1vZGUgPT09IFwiY2FuSG92ZXJcIikgY29udGludWU7XG4gICAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIFwibnVtYmVyXCIgaW4gdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBudW0gID0gKHZhbCBhcyBhbnkpLm51bWJlcjtcbiAgICAgICAgICAgIGNvbnN0IGNvbmQgPSAodmFsIGFzIGFueSkuY29uZGl0aW9uID8gYCAkeyh2YWwgYXMgYW55KS5jb25kaXRpb259YCA6IFwiXCI7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke251bX0gZnQuJHtjb25kfWApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke3ZhbH0gZnQuYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb25zdGVyLnNwZWVkfSBmdC5gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwZWVkID0gc3BlZWRMaXN0LmpvaW4oXCIsIFwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgU291cmNlIHNhbml0aXphdGlvbiBcdTIwMTRcbiAgICAgIGxldCBzb3VyY2UgPSBnZXRGdWxsU291cmNlTmFtZShtb25zdGVyLnNvdXJjZSwgZWRpdGlvbklkKTtcbiAgICAgIHNvdXJjZSAgICAgPSBzb3VyY2UucmVwbGFjZSgvOi9nLCBcIiAtXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBDYXRlZ29yeSBmb3IgZm9sZGVyIFx1MjAxNFxuICAgICAgY29uc3QgY2F0ZWdvcnkgPSBjYXRlZ29yaXplQ3JlYXR1cmUobW9uc3Rlcik7XG4gIFxuICAgICAgY29uc3QgZm0gICA9IGJ1aWxkRk0obW9uc3RlciwgQkVTVElBUllfTUVUQV9ERUZTKTtcbiAgICAgIGNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQkVTVElBUllfTUVUQV9ERUZTKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2F2aW5nVGhyb3dzID0gKGZtW0ZNX0ZJRUxEUy5TQVZJTkdfVEhST1dTXSBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgICBjb25zdCBza2lsbHMgICAgICAgPSAoZm1bRk1fRklFTERTLlNLSUxMU10gICAgICAgIGFzIHN0cmluZ1tdKSB8fCBbXTtcbiAgICAgIGNvbnN0IHNlbnNlcyAgICAgICA9IChmbVtGTV9GSUVMRFMuU0VOU0VTXSAgICAgICAgYXMgc3RyaW5nW10pIHx8IFtdO1xuICAgICAgY29uc3QgbGFuZ3VhZ2VzICAgID0gKGZtW0ZNX0ZJRUxEUy5MQU5HVUFHRVNdICAgICBhcyBzdHJpbmdbXSkgfHwgW107XG5cblxuICAgICAgLy8gXHUyMDE0IEJvZHkgXHUyMDE0XG4gICAgICBsZXQgYm9keSA9XG4gICAgICBgIyAke25hbWV9XFxuXFxuYCArXG4gICAgICBgJHtmb3JtYXRTaXplQWJicmV2KHJhd1NpemUpfSAke3Jhd1R5cGV9LCAke2Zvcm1hdEFsaWdubWVudEFiYnJldihyYXdBbGlnbm1lbnQpfVxcblxcbmAgK1xuICAgICAgYCoqQXJtb3IgQ2xhc3MqKjogJHthY31cXG5gICtcbiAgICAgIGAqKkhpdCBQb2ludHMqKjogJHtocH1cXG5gICtcbiAgICAgIGAqKlNwZWVkKio6ICR7c3BlZWR9XFxuYCArXG4gICAgICAoc2F2aW5nVGhyb3dzLmxlbmd0aFxuICAgICAgICA/IGAqKlNhdmluZyBUaHJvd3MqKjogJHtzYXZpbmdUaHJvd3Muam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICAoc2tpbGxzLmxlbmd0aFxuICAgICAgICA/IGAqKlNraWxscyoqOiAke3NraWxscy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIChzZW5zZXMubGVuZ3RoXG4gICAgICAgID8gYCoqU2Vuc2VzKio6ICR7c2Vuc2VzLmpvaW4oXCIsIFwiKX1cXG5gXG4gICAgICAgIDogXCJcIikgK1xuICAgICAgKGxhbmd1YWdlcy5sZW5ndGhcbiAgICAgICAgPyBgKipMYW5ndWFnZXMqKjogJHtsYW5ndWFnZXMuam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICBgKipDaGFsbGVuZ2UqKjogJHtjcn1cXG5cXG5gICtcbiAgICAgIHJlbmRlckFiaWxpdGllc1RhYmxlKHN0ciwgZGV4LCBjb24sIGludCwgd2lzLCBjaGEpO1xuXG4gIFxuICAgICAgaWYgKG1vbnN0ZXIudHJhaXQpICAgICBib2R5ICs9IGBcXG5cXG4jIyMgVHJhaXRzXFxuJHttb25zdGVyLnRyYWl0Lm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICAgICAgaWYgKG1vbnN0ZXIuYWN0aW9uKSAgICBib2R5ICs9IGBcXG5cXG4jIyMgQWN0aW9uc1xcbiR7bW9uc3Rlci5hY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5yZWFjdGlvbikgIGJvZHkgKz0gYFxcblxcbiMjIyBSZWFjdGlvbnNcXG4ke21vbnN0ZXIucmVhY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5sZWdlbmRhcnkpIGJvZHkgKz0gYFxcblxcbiMjIyBMZWdlbmRhcnkgQWN0aW9uc1xcbiR7bW9uc3Rlci5sZWdlbmRhcnkubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gIFxuICAgICAgY29uc3QgY29udGVudCA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtib2R5fWA7XG4gIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDogICAgYCR7Y2F0ZWdvcnl9LyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudCxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9ICAgICBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgSVRFTV9NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cblxuLyoqIEhlbHBlciB0byBjYXBpdGFsaXplIGZpcnN0IGxldHRlciBcdTIwMTMgbmV2ZXIgY3Jhc2hlcyBvbiBub24tc3RyaW5ncyAqL1xuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0KGlucHV0OiBhbnkpOiBzdHJpbmcge1xuICAvLyBpZiBpdFx1MjAxOXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZywgYmFpbCBvdXRcbiAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gXCJzdHJpbmdcIiB8fCBpbnB1dC5sZW5ndGggPT09IDApIHJldHVybiBcIlwiO1xuICBjb25zdCBzID0gaW5wdXQudHJpbSgpO1xuICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbn1cblxuXG5leHBvcnQgY29uc3QgREFNQUdFX1RZUEVfTUFQOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIFA6IFwiUGllcmNpbmdcIixcbiAgQjogXCJCbHVkZ2VvbmluZ1wiLFxuICBTOiBcIlNsYXNoaW5nXCIsXG4gIE46IFwiTmVjcm90aWNcIixcbiAgUjogXCJSYWRpYW50XCIsXG4gIEY6IFwiRmlyZVwiLFxuICBDOiBcIkNvbGRcIixcbiAgTDogXCJMaWdodG5pbmdcIixcbiAgVDogXCJUaHVuZGVyXCIsXG4gIEE6IFwiQWNpZFwiLFxuICBIOiBcIkhlYWxpbmdcIixcbiAgVTogXCJGb3JjZVwiLFxuICBWOiBcIlBzeWNoaWNcIixcbn07XG5cbmV4cG9ydCBjb25zdCBQUk9QRVJUWV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgQTogXCJBbW11bml0aW9uXCIsXG4gIEY6IFwiRmluZXNzZVwiLFxuICBIOiBcIkhlYXZ5XCIsXG4gIEw6IFwiTGlnaHRcIixcbiAgUjogXCJSZWxvYWRcIixcbiAgUzogXCJTcGVjaWFsXCIsXG4gIFwiMkhcIjogXCJUd28tSGFuZGVkXCIsXG4gIFQ6IFwiVGhyb3duXCIsXG4gIFY6IFwiVmVyc2F0aWxlXCJcbn07XG5cbmV4cG9ydCBjb25zdCBJVEVNX1RZUEVfTUFQOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gICRDOiAgXCJDdXJyZW5jeVwiLFxuICAkRzogIFwiR2VtXCIsXG4gIEE6ICAgXCJBbW11bml0aW9uXCIsXG4gIFwiQUlSfERNR1wiOiBcIlZlaGljbGUgKGFpcilcIixcbiAgXCJBRnxETUdcIjogXCJGdXR1cmUgQW1tb1wiLFxuICBBVDogIFwiQXJ0aXNhbiBUb29sc1wiLFxuICBFWFA6IFwiRXhwbG9zaXZlXCIsXG4gIEZEOiAgXCJGb29kIGFuZCBEcmlua1wiLFxuICBHOiAgIFwiR2VhclwiLFxuICBHUzogIFwiR2FtZVwiLFxuICBIQTogIFwiSGVhdnkgQXJtb3JcIixcbiAgXCJJREd8VERDU1JcIjogXCJJbGxpY2l0IERydWdcIixcbiAgSU5TOiBcIkluc3RydW1lbnRcIixcbiAgTEE6ICBcIkxpZ2h0IEFybW9yXCIsXG4gIE06ICAgXCJXZWFwb25cIixcbiAgTUE6ICBcIk1lZGl1bSBBcm1vclwiLFxuICBNTlQ6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBPREg6IFwiTWlzY2VsbGFuZW91c1wiLFxuICBQOiAgIFwiQ29uc3VtYWJsZVwiLFxuICBSOiAgIFwiUmFuZ2VkIFdlYXBvblwiLFxuICBSRDogIFwiUm9kXCIsXG4gIFJHOiAgXCJSaW5nXCIsXG4gIFM6ICAgXCJTaGllbGRcIixcbiAgU0M6ICBcIlNjcm9sbFwiLFxuICBTQ0Y6IFwiU3BlbGwgQ2FzdGluZyBGb2N1c1wiLFxuICBTSFA6IFwiU2hpcFwiLFxuICBUOiAgIFwiVG9vbFwiLFxuICBUQUg6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBURzogIFwiVHJhZGUgR29vZHNcIixcbiAgVkVIOiBcIk1vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgV0Q6ICBcIldhbmRcIixcbn07XG5cbi8qKiBjb2RlIFx1MjE5MiBmdWxsIGZvbGRlciBwYXRoIHVuZGVyIEl0ZW1zLyAqL1xuY29uc3QgY29kZUZvbGRlck1hcDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAvLyBXZWFwb25zICYgQXJtb3JcbiAgXCJBXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9BbW11bml0aW9uXCIsXG4gIFwiTVwiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvV2VhcG9uc1wiLFxuICBcIlJcIjogICBcIldlYXBvbnMgYW5kIEFybW9yL1JhbmdlZCBXZWFwb25zXCIsXG4gIFwiU1wiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvU2hpZWxkc1wiLFxuICBcIkxBXCI6ICBcIldlYXBvbnMgYW5kIEFybW9yL0FybW9yL0xpZ2h0IEFybW9yXCIsXG4gIFwiTUFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvTWVkaXVtIEFybW9yXCIsXG4gIFwiSEFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvSGVhdnkgQXJtb3JcIixcbiAgXCJFWFBcIjogXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zL0V4cGxvc2l2ZXNcIixcbiAgLy8gRnV0dXJlIEFtbW8gKEFGfERNRyBcdTIxOTIgcmF3Q29kZSBcIkFGXCIpXG4gIFwiQUZcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQW1tdW5pdGlvbi9GdXR1cmUgQW1tb1wiLFxuXG4gIC8vIE1hZ2ljYWwgSXRlbXNcbiAgXCJSRFwiOiAgXCJNYWdpY2FsIEl0ZW1zL1JvZHNcIixcbiAgXCJSR1wiOiAgXCJNYWdpY2FsIEl0ZW1zL1JpbmdzXCIsXG4gIFwiU0NcIjogIFwiTWFnaWNhbCBJdGVtcy9TY3JvbGxzXCIsXG4gIFwiU0NGXCI6IFwiTWFnaWNhbCBJdGVtcy9TcGVsbCBDYXN0aW5nIEZvY3VzXCIsXG4gIFwiV0RcIjogIFwiTWFnaWNhbCBJdGVtcy9XYW5kc1wiLFxuXG4gIC8vIFZhbHVhYmxlc1xuICBcIiRHXCI6IFwiVmFsdWFibGVzL0dlbXNcIixcbiAgLy8gQ3VycmVuY3kgKHJhd0NvZGUgYmVjb21lcyBcIkNcIiBhZnRlciBzdHJpcHBpbmcgJClcbiAgXCJDXCI6ICBcIlZhbHVhYmxlcy9DdXJyZW5jeVwiLFxuICBcIlRHXCI6IFwiVmFsdWFibGVzL1RyYWRlIEdvb2RzXCIsXG5cbiAgLy8gQXJ0aXNhbiBHb29kc1xuICBcIkFUXCI6ICBcIkFydGlzYW4gR29vZHMvVG9vbHNcIixcbiAgXCJUXCI6ICAgXCJBcnRpc2FuIEdvb2RzL1Rvb2xzXCIsXG4gIFwiSU5TXCI6IFwiQXJ0aXNhbiBHb29kcy9JbnN0cnVtZW50c1wiLFxuICBcIkdTXCI6ICBcIkFydGlzYW4gR29vZHMvR2FtZXNcIixcblxuICAvLyBHZWFyICYgTW91bnRzXG4gIFwiR1wiOiAgIFwiR2VhclwiLFxuICAvLyBNb3VudHMgJiBWZWhpY2xlc1xuICBcIk1OVFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBcIlRBSFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBcIlZFSFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICAvLyBBaXIgdmVoaWNsZXMgKEFJUnxETUcgXHUyMTkyIHJhd0NvZGUgXCJBSVJcIilcbiAgXCJBSVJcIjogXCJHZWFyL01vdW50cyBhbmQgVmVoaWNsZXMvQWlyXCIsXG5cbiAgLy8gQ29uc3VtYWJsZXNcbiAgXCJQXCI6ICAgXCJDb25zdW1hYmxlc1wiLFxuICAvLyBGb29kICYgRHJpbmtcbiAgXCJGRFwiOiAgXCJDb25zdW1hYmxlcy9Gb29kIGFuZCBEcmlua1wiLFxuXG4gIC8vIElsbGljaXQgRHJ1Z3MgKElER3xURENTUiBcdTIxOTIgcmF3Q29kZSBcIklER1wiKVxuICBcIklER1wiOiBcIkdlYXIvSWxsaWNpdCBEcnVnc1wiLFxuXG4gIC8vIE1pc2NlbGxhbmVvdXMgKE9ESClcbiAgXCJPREhcIjogXCJHZWFyL01pc2NlbGxhbmVvdXNcIixcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUl0ZW1zRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCByYXdJdGVtczogYW55W10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5iYXNlaXRlbSkpIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5iYXNlaXRlbSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24uaXRlbSkpICAgICByYXdJdGVtcy5wdXNoKC4uLmpzb24uaXRlbSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24ub2JqZWN0KSkgICByYXdJdGVtcy5wdXNoKC4uLmpzb24ub2JqZWN0KTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi52ZWhpY2xlKSkgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi52ZWhpY2xlKTtcbiAgaWYgKCFyYXdJdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBiYXNlTmFtZXMgPSBuZXcgU2V0PHN0cmluZz4oXG4gICAgQXJyYXkuaXNBcnJheShqc29uLmJhc2VpdGVtKSA/IGpzb24uYmFzZWl0ZW0ubWFwKChiOiBhbnkpID0+IGIubmFtZSkgOiBbXVxuICApO1xuICBjb25zdCBvdXQ6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgZm9yIChjb25zdCBpdCBvZiByYXdJdGVtcykge1xuICAgIGNvbnN0IG5hbWUgICAgID0gaXQubmFtZSBhcyBzdHJpbmc7XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXC9cXFxcOl0vZywgXCItXCIpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGZvbGRlclxuICAgIGNvbnN0IHJhd0NvZGUgPSAoaXQudHlwZSBhcyBzdHJpbmcgfHwgXCJcIikuc3BsaXQoXCJ8XCIpWzBdXG4gICAgICAgIC5zcGxpdChcInxcIilbMF0gICAgICAvLyBkcm9wIGFueXRoaW5nIGFmdGVyIFx1MjAxQ3xcdTIwMURcbiAgICAgICAgLnJlcGxhY2UoL15cXCQvLCBcIlwiKTsgLy8gc3RyaXAgbGVhZGluZyBcdTIwMUMkXHUyMDFEXG4gICAgbGV0IGZvbGRlciAgICA9IGNvZGVGb2xkZXJNYXBbcmF3Q29kZV0gPz8gXCJNaXNjZWxsYW5lb3VzXCI7XG5cbiAgICAvLyBWYXJpYW50c1xuICAgIGlmIChpdC5ib251c1dlYXBvbikge1xuICAgICAgZm9sZGVyID0gYCR7Zm9sZGVyfS9WYXJpYW50c2A7XG4gICAgfVxuICAgIC8vIE1hZ2ljYWxcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IGlzTWFnaWMgPSAhIWl0LndvbmRyb3VzIHx8ICEhaXQucmVxQXR0dW5lIHx8ICEhaXQucmVxX2F0dHVuZVxuICAgICAgICB8fCBTdHJpbmcoaXQucmFyaXR5KS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwibWFnaWNcIik7XG4gICAgICBpZiAoaXNNYWdpYykge1xuICAgICAgICBjb25zdCBbICwgLi4ucmVzdCBdID0gZm9sZGVyLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgZm9sZGVyID0gW1wiTWFnaWNhbCBJdGVtc1wiLCAuLi5yZXN0XS5qb2luKFwiL1wiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXZWFwb24gY2F0ZWdvcnkgc3ViZm9sZGVyXG4gICAgaWYgKChmb2xkZXIuc3RhcnRzV2l0aChcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnNcIikgfHxcbiAgICAgICAgIGZvbGRlci5zdGFydHNXaXRoKFwiV2VhcG9ucyBhbmQgQXJtb3IvUmFuZ2VkIFdlYXBvbnNcIikpICYmIGl0LndlYXBvbkNhdGVnb3J5KSB7XG4gICAgICBmb2xkZXIgPSBgJHtmb2xkZXJ9LyR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX1gO1xuICAgIH1cblxuICAgIC8vIG1ha2UgZWRpdGlvbklkIGF2YWlsYWJsZSBmb3IgdGhlIFNPVVJDRSBmaWVsZFxuKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4vLyBidWlsZCBhIEZyb250bWF0dGVyIG9iamVjdCBmcm9tIHRoZSBKU09OXG5jb25zdCBmbSAgID0gYnVpbGRGTShpdCwgSVRFTV9NRVRBX0RFRlMpO1xuXG5pZiAocmF3Q29kZSA9PT0gXCJNXCIgJiYgaXQud2VhcG9uQ2F0ZWdvcnkpIHtcbiAgLy8gXHUyMDFDTVx1MjAxRCBcdTIxOTIgdXNlIHdlYXBvbkNhdGVnb3J5IChcdTIwMUNTaW1wbGVcdTIwMUQvXHUyMDFDTWFydGlhbFx1MjAxRClcbiAgZm0udHlwZSA9IGAke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9IFdlYXBvbmA7XG59IGVsc2UgaWYgKElURU1fVFlQRV9NQVBbcmF3Q29kZV0pIHtcbiAgLy8gYW55IG90aGVyIGNvZGUgXHUyMTkyIG1hcHBlZCBsYWJlbFxuICBmbS50eXBlID0gSVRFTV9UWVBFX01BUFtyYXdDb2RlXTtcbn1cbmlmIChBcnJheS5pc0FycmF5KGZtLmRhbWFnZVR5cGVzKSkge1xuICBmbS5kYW1hZ2VUeXBlcyA9IGZtLmRhbWFnZVR5cGVzLm1hcCgoY29kZTogc3RyaW5nKSA9PlxuICAgIERBTUFHRV9UWVBFX01BUFtjb2RlXSB8fCBjb2RlXG4gICk7XG59XG4vLyBzZXJpYWxpemUgaXQgdG8gWUFNTFxubGV0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgSVRFTV9NRVRBX0RFRlMpO1xuXG4vLyBpZiB5b3Ugc3RpbGwgd2FudCBwYWNrQ29udGVudHMsIGFwcGVuZCBpdCBoZXJlOlxuaWYgKEFycmF5LmlzQXJyYXkoaXQucGFja0NvbnRlbnRzKSkge1xuICB5YW1sICs9IFwiXFxucGFja0NvbnRlbnRzOlwiO1xuICBmb3IgKGNvbnN0IHBjIG9mIGl0LnBhY2tDb250ZW50cykge1xuICAgIHlhbWwgKz0gYFxcbiAgLSBpdGVtOiBcIiR7cGMuaXRlbX1cIlxcbiAgICBxdWFudGl0eTogJHtwYy5xdWFudGl0eX1gO1xuICB9XG59XG4gXG4vLyB3cmFwIGl0IGluIHRoZSBZQU1MIGZlbmNlXG5jb25zdCBmcm9udG1hdHRlciA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tYDtcblxuXG4gICAgLy8gQm9keSBsaW5lc1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxpbmVzLnB1c2goYCMgJHtuYW1lfWApO1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG5cbiAgICAvLyBTdWJ0aXRsZVxuICAgIGNvbnN0IHN1YnRpdGxlID0gaXQud2VhcG9uXG4gICAgICA/IGAke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9IFdlYXBvbmBcbiAgICAgIDogaXQuYXJtb3JcbiAgICAgICAgPyBmb2xkZXIuc3BsaXQoXCIvXCIpLnBvcCgpIHx8IFwiQXJtb3JcIlxuICAgICAgICA6IFwiXCI7XG4gICAgaWYgKHN1YnRpdGxlKSBsaW5lcy5wdXNoKGAjIyMgKiR7c3VidGl0bGV9KmApO1xuXG4gICAgLy8gU3RhdHMgbGluZXNcbiAgICBpZiAoaXQud2VhcG9uKSB7XG4gICAgICBsaW5lcy5wdXNoKGAqKkNhdGVnb3J5Kio6ICR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX1gKTtcbiAgICAgIGxpbmVzLnB1c2goYCoqRGFtYWdlKio6ICR7aXQuZG1nMSA/PyBcIlwifSR7aXQuZG1nMiA/IGAgLyAke2l0LmRtZzJ9YCA6IFwiXCJ9YCk7XG4gICAgICBjb25zdCB0eXBlc0JvZHkgPSAoQXJyYXkuaXNBcnJheShpdC5kbWdUeXBlKSA/IGl0LmRtZ1R5cGUgOiBbaXQuZG1nVHlwZV0pXG4gICAgICAgIC5maWx0ZXIoKHQ6IGFueSkgPT4gQm9vbGVhbih0KSlcbiAgICAgICAgLm1hcCgodDogc3RyaW5nKSA9PiBEQU1BR0VfVFlQRV9NQVBbdF0gfHwgdCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkRhbWFnZSBUeXBlKio6ICR7dHlwZXNCb2R5LmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIGxpbmVzLnB1c2goYCoqUmFuZ2UqKjogJHtpdC5yYW5nZSA/PyBcIlx1MjAxNFwifWApO1xuICAgICAgbGluZXMucHVzaChgKipSZWxvYWQqKjogJHtpdC5yZWxvYWQgPz8gXCJcdTIwMTRcIn1gKTtcbiAgICAgIGlmIChpdC5hbW1vVHlwZSkgbGluZXMucHVzaChgKipBbW1vIFR5cGUqKjogJHtpdC5hbW1vVHlwZX1gKTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0LnByb3BlcnR5KSAmJiBpdC5wcm9wZXJ0eS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcHJvcHNCb2R5ID0gaXQucHJvcGVydHkubWFwKChwOiBzdHJpbmcpID0+IFBST1BFUlRZX01BUFtwXSB8fCBwKTtcbiAgICAgICAgbGluZXMucHVzaChgKipQcm9wZXJ0aWVzKio6ICR7cHJvcHNCb2R5LmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGl0LmFybW9yKSB7XG4gICAgICBsaW5lcy5wdXNoKGAqKkFybW9yIENsYXNzKio6ICR7aXQuYWN9YCk7XG4gICAgICBpZiAoaXQuc3RlYWx0aCkgbGluZXMucHVzaChgKipTdGVhbHRoIERpc2FkdmFudGFnZSoqOiB0cnVlYCk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cblxuICAgIC8vIERlc2NyaXB0aW9uIHdpdGggbmVzdGVkIGVudHJpZXNcbiAgICBjb25zdCBkZXNjID0gaXQuZW50cmllcyA/PyBpdC5kZXNjO1xuICAgIGlmIChkZXNjKSB7XG4gICAgICBmb3IgKGNvbnN0IHAgb2YgQXJyYXkuaXNBcnJheShkZXNjKSA/IGRlc2MgOiBbZGVzY10pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXBsYWNlNWVUYWdzKHApLnNwbGl0KFwiXFxuXCIpKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHAgJiYgdHlwZW9mIHAgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSB7XG4gICAgICAgICAgICBsaW5lcy5wb3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChgIyMjIyAke3AubmFtZX1gKTtcbiAgICAgICAgICBjb25zdCBzdWIgPSBBcnJheS5pc0FycmF5KHAuZW50cmllcykgPyBwLmVudHJpZXMgOiBbXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHNwIG9mIHN1Yikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHJlcGxhY2U1ZVRhZ3Moc3ApLnNwbGl0KFwiXFxuXCIpKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBib2R5ID0gbGluZXMuam9pbihcIlxcblwiKTtcblxuICAgIG91dC5wdXNoKHsgcGF0aDogYEl0ZW1zLyR7Zm9sZGVyfS8ke3NhZmVOYW1lfS5tZGAsIGNvbnRlbnQ6IGAke2Zyb250bWF0dGVyfVxcblxcbiR7Ym9keX1gIH0pO1xuICB9XG5cbiAgcmV0dXJuIG91dC5zb3J0KChhLGIpID0+IGEucGF0aC5sb2NhbGVDb21wYXJlKGIucGF0aCkpO1xufSIsICJpbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL3NvdXJjZU1hcFwiO1xuaW1wb3J0IHsgZm9ybWF0U2l6ZUFiYnJldiwgZm9ybWF0QWxpZ25tZW50QWJicmV2IH0gZnJvbSBcIi4uL2Jlc3RpYXJ5XCI7XG5pbXBvcnQgeyBmb3JtYXRSYW5nZSwgZm9ybWF0VGltZSwgZm9ybWF0RHVyYXRpb24sIFNDSE9PTF9NQVAgfSBmcm9tIFwiLi4vc3BlbGxzXCI7XG5pbXBvcnQgeyBQUk9QRVJUWV9NQVAsIERBTUFHRV9UWVBFX01BUCwgSVRFTV9UWVBFX01BUCB9IGZyb20gXCIuLi9pdGVtc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5cbmZ1bmN0aW9uIGJsYW5rVW5kZWZpbmVkKHZhbDogYW55KTogYW55IHtcbiAgcmV0dXJuIHZhbCA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHZhbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhcChzdHI6IGFueSk6IHN0cmluZyB7XG4gIGlmICh0eXBlb2Ygc3RyICE9PSBcInN0cmluZ1wiKSByZXR1cm4gXCJcIjtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cblxuZXhwb3J0IGNvbnN0IEFCSUxJVFlfRlVMTDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBzdHI6IFwiU3RyZW5ndGhcIixcbiAgZGV4OiBcIkRleHRlcml0eVwiLFxuICBjb246IFwiQ29uc3RpdHV0aW9uXCIsXG4gIGludDogXCJJbnRlbGxpZ2VuY2VcIixcbiAgd2lzOiBcIldpc2RvbVwiLFxuICBjaGE6IFwiQ2hhcmlzbWFcIixcbn07XG5cbmV4cG9ydCBjb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBVbml2ZXJzYWwgZnJvbnRtYXR0ZXIga2V5cyBcdTI1MDBcdTI1MDBcdTI1MDAgIFxuZXhwb3J0IGNvbnN0IEZNX0ZJRUxEUyA9IHtcbiAgQUJJTElUWV9CT05VU0VTOiAgICBcImFiaWxpdHlfYm9udXNlc1wiLFxuICBBQzogICAgICAgICAgICAgICAgIFwiQUNcIixcbiAgQUxJR05NRU5UOiAgICAgICAgICBcIkFsaWdubWVudFwiLFxuICBBTU1PX1RZUEU6ICAgICAgICAgIFwiQW1tbyBUeXBlXCIsXG4gIEFSTU9SX1BST0ZJQ0lFTkNJRVM6XCJhcm1vci1wcm9mXCIsXG4gIEFUVEFDS19UWVBFOiAgICAgICAgXCJhdHRhY2tfdHlwZVwiLFxuICBBVFRVTkVNRU5UOiAgICAgICAgIFwiQXR0dW5lbWVudFwiLFxuICBBVFRVTkVfUkVROiAgICAgICAgIFwiQXR0dW5lX1JlcVwiLFxuICBDQVNUSU5HX1RJTUU6ICAgICAgIFwiY2FzdGluZ190aW1lXCIsXG4gIENIQVJJU01BOiAgICAgICAgICAgXCJjaGFyaXNtYVwiLFxuICBDSEFfTU9EOiAgICAgICAgICAgIFwiY2hhX21vZFwiLFxuICBDT05DRU5UUkFUSU9OOiAgICAgIFwiY29uY2VudHJhdGlvblwiLFxuICBDT05ESVRJT05fSU1NOiAgICAgIFwiY29uZF9pbW11bml0eVwiLFxuICBDT05TVElUVVRJT046ICAgICAgIFwiY29uc3RpdHV0aW9uXCIsXG4gIENPTl9NT0Q6ICAgICAgICAgICAgXCJjb25fbW9kXCIsXG4gIENPU1Q6ICAgICAgICAgICAgICAgXCJjb3N0XCIsXG4gIENPTVBPTkVOVFM6ICAgICAgICAgXCJDb21wb25lbnRzXCIsXG4gIENIQUxMRU5HRV9SQVRJTkc6ICAgXCJDUlwiLFxuICBEQU1BR0VfVFlQRTogICAgICAgIFwiZGFtYWdlX3R5cGVcIixcbiAgREFNQUdFX1RZUEVTOiAgICAgICBcImRhbWFnZVR5cGVzXCIsXG4gIERBTUFHRTogICAgICAgICAgICAgXCJkYW1hZ2VcIixcbiAgREFNQUdFX1JFUzogICAgICAgICBcImRtZ19yZXNpc3RhbmNlXCIsXG4gIERBTUFHRV9JTU06ICAgICAgICAgXCJkbWdfaW1tdW5pdHlcIixcbiAgREVYVEVSSVRZOiAgICAgICAgICBcImRleHRlcml0eVwiLFxuICBERVhfTU9EOiAgICAgICAgICAgIFwiZGV4X21vZFwiLFxuICBEVVJBVElPTjogICAgICAgICAgIFwiZHVyYXRpb25cIixcbiAgUlVMRVNFVDogICAgICAgICAgICBcInJ1bGVzZXRcIixcbiAgSFA6ICAgICAgICAgICAgICAgICBcIkhQXCIsXG4gIElOVEVMTElHRU5DRTogICAgICAgXCJpbnRlbGxpZ2VuY2VcIixcbiAgSU5UX01PRDogICAgICAgICAgICBcImludF9tb2RcIixcbiAgTEFOR1VBR0VTOiAgICAgICAgICBcImxhbmd1YWdlc1wiLFxuICBMRVZFTDogICAgICAgICAgICAgIFwibGV2ZWxcIixcbiAgTUFHSUNBTDogICAgICAgICAgICBcIm1hZ2ljYWxcIixcbiAgTUFURVJJQUw6ICAgICAgICAgICBcIm1hdGVyaWFsXCIsXG4gIE5BTUU6ICAgICAgICAgICAgICAgXCJuYW1lXCIsXG4gIFBST1BFUlRJRVM6ICAgICAgICAgXCJwcm9wZXJ0aWVzXCIsXG4gIFJBTkdFOiAgICAgICAgICAgICAgXCJyYW5nZVwiLFxuICBSQVJJVFk6ICAgICAgICAgICAgIFwicmFyaXR5XCIsXG4gIFJFTE9BRDogICAgICAgICAgICAgXCJyZWxvYWRcIixcbiAgUklUVUFMOiAgICAgICAgICAgICBcInJpdHVhbFwiLFxuICBTQVZFOiAgICAgICAgICAgICAgIFwic2F2ZVwiLFxuICBTQVZJTkdfVEhST1dTOiAgICAgIFwic2F2aW5nX3Rocm93c1wiLFxuICBTQ0hPT0w6ICAgICAgICAgICAgIFwic2Nob29sXCIsXG4gIFNFTlNFUzogICAgICAgICAgICAgXCJzZW5zZXNcIixcbiAgU0laRTogICAgICAgICAgICAgICBcInNpemVcIixcbiAgU0tJTExTOiAgICAgICAgICAgICBcInNraWxsc1wiLFxuICBTS0lMTF9DSE9JQ0VfTElTVDogIFwic2tpbGxfY2hvaWNlX2xpc3RcIixcbiAgU09NQVRJQzogICAgICAgICAgICBcInNvbWF0aWNcIixcbiAgU09VUkNFOiAgICAgICAgICAgICBcInNvdXJjZVwiLFxuICBTUEVDSUVTOiAgICAgICAgICAgIFwic3BlY2llc1wiLFxuICBTUEVFRDogICAgICAgICAgICAgIFwic3BlZWRcIixcbiAgU1BFTExfQ0FTVF9NT0Q6ICAgICBcIlNwZWxsIENhc3QgTW9kXCIsXG4gIFNQRUxMX1JBTkdFOiAgICAgICAgXCJSYW5nZVwiLFxuICBTVEVBTFRIX0RJU0FEVkFOVEFHRTogXCJzdGVhbHRoRGlzYWR2YW50YWdlXCIsXG4gIFNUUkVOR1RIOiAgICAgICAgICAgXCJzdHJlbmd0aFwiLFxuICBTVFJfTU9EOiAgICAgICAgICAgIFwic3RyX21vZFwiLFxuICBTVUJSQUNFUzogICAgICAgICAgIFwic3VicmFjZXNcIixcbiAgVE9PTF9QUk9GSUNJRU5DSUVTOiBcInRvb2wtcHJvZlwiLFxuICBUT09MX0NIT0lDRV9MSVNUOiAgXCJ0b29sX2Nob2ljZV9saXN0XCIsXG4gIFRSQUlUUzogICAgICAgICAgICAgXCJ0cmFpdHNcIixcbiAgVFlQRTogICAgICAgICAgICAgICBcInR5cGVcIixcbiAgVkFSSUFOVDogICAgICAgICAgICBcIlZhcmlhbnRcIixcbiAgVkVSQkFMOiAgICAgICAgICAgICBcInZlcmJhbFwiLFxuICBXRUFQT05fUFJPRklDSUVOQ0lFUzogXCJ3ZWFwb24tcHJvZlwiLFxuICBXRUlHSFQ6ICAgICAgICAgICAgIFwid2VpZ2h0XCIsXG4gIFdJU0RPTTogICAgICAgICAgICAgXCJ3aXNkb21cIixcbiAgV0lTX01PRDogICAgICAgICAgICBcIndpc19tb2RcIixcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIEZNS2V5ID0ga2V5b2YgdHlwZW9mIEZNX0ZJRUxEUztcbmV4cG9ydCB0eXBlIEZyb250bWF0dGVyID0gUGFydGlhbDxSZWNvcmQ8dHlwZW9mIEZNX0ZJRUxEU1tGTUtleV0sIHVua25vd24+PjtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIERlZmluaXRpb24gb2YgYSBzaW5nbGUgZmllbGQgbWFwcGluZyBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBpbnRlcmZhY2UgRmllbGREZWYge1xuICAvKiogV2hpY2ggY2FsbFx1MjAxMHNpZ24gKGtleSBpbiBGTV9GSUVMRFMpICovXG4gIGNhbGxTaWduOiBGTUtleTtcbiAgLyoqIFdoaWNoIEpTT04gcHJvcGVydHkgdG8gcmVhZCAqL1xuICBqc29uS2V5OiAgc3RyaW5nIHwgc3RyaW5nW107XG4gIC8qKiBPcHRpb25hbCB0cmFuc2Zvcm1lcjogcmF3IEpTT04gXHUyMTkyIGZpbmFsIHZhbHVlICovXG4gIGNvbnY/OiAgICAocmF3OiBhbnksIGFsbEpzb24/OiBhbnkpID0+IHVua25vd247XG59XG5cbmNvbnN0IHVuaWZpZWRBcm1vclByb2ZzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT5cbiAgQXJyYXkuaXNBcnJheSh2YWw/LmFybW9yKSA/IHZhbC5hcm1vci5tYXAoY2FwKSA6XG4gIEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbC5tYXAoY2FwKSA6IFtdO1xuXG4vLyBmcm9udG1hdHRlci50c1xuXG5leHBvcnQgZnVuY3Rpb24gdW5pZmllZFdlYXBvblByb2ZzKHZhbDogYW55KTogc3RyaW5nW10ge1xuICAvLyBwdWxsIHRoZSBcdTIwMUN3ZWFwb25zXHUyMDFEIGFycmF5IG9mZiBlaXRoZXIgYSByYXcgYXJyYXkgb3IgYSBzdGFydGluZ1Byb2ZpY2llbmNpZXMgb2JqZWN0XG4gIGNvbnN0IHJhd0FycjogYW55W10gPSBBcnJheS5pc0FycmF5KHZhbD8ud2VhcG9ucylcbiAgICA/IHZhbC53ZWFwb25zXG4gICAgOiBBcnJheS5pc0FycmF5KHZhbClcbiAgICA/IHZhbFxuICAgIDogW107XG5cbiAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgZnVuY3Rpb24gaGFuZGxlT25lKGVudHJ5OiBhbnkpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShlbnRyeSkpIHtcbiAgICAgIC8vIGZsYXR0ZW4gbmVzdGVkIGFycmF5c1xuICAgICAgZW50cnkuZm9yRWFjaChoYW5kbGVPbmUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IGxpdCA9IGVudHJ5LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGxpdCA9PT0gXCJzaW1wbGVcIikge1xuICAgICAgICBvdXQuYWRkKFwiU2ltcGxlIFdlYXBvbnNcIik7XG4gICAgICB9IGVsc2UgaWYgKGxpdCA9PT0gXCJtYXJ0aWFsXCIpIHtcbiAgICAgICAgb3V0LmFkZChcIk1hcnRpYWwgV2VhcG9uc1wiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGRldGVjdCB0YWdnZWQgaXRlbXMgdnMgc2ltcGxlIHdvcmRzXG4gICAgICAgIGNvbnN0IHRleHQgPSBlbnRyeS5zdGFydHNXaXRoKFwie0BcIilcbiAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3MoZW50cnkpXG4gICAgICAgICAgOiBjYXAoZW50cnkpO1xuICAgICAgICBvdXQuYWRkKHRleHQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChlbnRyeSAmJiB0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIgJiYgZW50cnkucHJvZmljaWVuY3kpIHtcbiAgICAgIC8vIHsgcHJvZmljaWVuY3k6IFwiZmlyZWFybXNcIiwgb3B0aW9uYWw6IHRydWUgfVxuICAgICAgY29uc3QgbmFtZSA9IGNhcChlbnRyeS5wcm9maWNpZW5jeSk7XG4gICAgICBvdXQuYWRkKGVudHJ5Lm9wdGlvbmFsID8gYCR7bmFtZX0gKG9wdGlvbmFsKWAgOiBuYW1lKTtcbiAgICB9XG4gIH1cblxuICByYXdBcnIuZm9yRWFjaChoYW5kbGVPbmUpO1xuICByZXR1cm4gWy4uLm91dF07XG59XG5cblxuY29uc3QgdW5pZmllZFNhdmVzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT4ge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICByZXR1cm4gdmFsLm1hcCgoazogc3RyaW5nKSA9PlxuICAgICAgICAoeyBzdHI6IFwiU3RyZW5ndGhcIiwgZGV4OiBcIkRleHRlcml0eVwiLCBjb246IFwiQ29uc3RpdHV0aW9uXCIsXG4gICAgICAgICAgaW50OiBcIkludGVsbGlnZW5jZVwiLCB3aXM6IFwiV2lzZG9tXCIsIGNoYTogXCJDaGFyaXNtYVwiIH1ba10gPz8gay50b1VwcGVyQ2FzZSgpKVxuICAgICAgKTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJiB2YWwgIT09IG51bGwpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModmFsKS5tYXAoayA9PiBrLnRvVXBwZXJDYXNlKCkpO1xuICB9XG4gIHJldHVybiBbXTtcbn07XG5cbmV4cG9ydCBjb25zdCB1bmlmaWVkU2tpbGxzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT4ge1xuICAvLyAxKSBcdTIwMUNCZXN0aWFyeVx1MjAxRCBzdHlsZTogZmxhdCBvYmplY3QgbWFwcGluZyBza2lsbFx1MjE5Mm1vZGlmaWVyXG4gIGlmIChcbiAgICB2YWwgJiZcbiAgICAhQXJyYXkuaXNBcnJheSh2YWwpICYmXG4gICAgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJlxuICAgIC8vIGVuc3VyZSBldmVyeSB2YWx1ZSBpcyBhIHN0cmluZyBvciBudW1iZXJcbiAgICBPYmplY3QudmFsdWVzKHZhbCkuZXZlcnkodiA9PiB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIilcbiAgKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHZhbCkubWFwKFxuICAgICAgKFtza2lsbCwgbW9kXSkgPT4gYCR7Y2FwKHNraWxsKX0gJHttb2R9YC50cmltKClcbiAgICApO1xuICB9XG5cbiAgLy8gMikgbmVzdGVkIHVuZGVyIC5za2lsbHMgLyAuc2tpbGxQcm9maWNpZW5jaWVzIC8gLnNraWxsUHJvZlxuICBpZiAodmFsICYmICFBcnJheS5pc0FycmF5KHZhbCkgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IG5lc3RlZCA9ICh2YWwgYXMgYW55KS5za2lsbHNcbiAgICAgID8/ICh2YWwgYXMgYW55KS5za2lsbFByb2ZcbiAgICAgID8/ICh2YWwgYXMgYW55KS5za2lsbFByb2ZpY2llbmNpZXM7XG4gICAgcmV0dXJuIHVuaWZpZWRTa2lsbHMobmVzdGVkKTtcbiAgfVxuXG4gIC8vIDMpIGFycmF5LXN0eWxlXG4gIGlmICghQXJyYXkuaXNBcnJheSh2YWwpKSByZXR1cm4gW107XG5cbiAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGZvciAoY29uc3QgZSBvZiB2YWwpIHtcbiAgICAvLyAzYSkgeyBhbnk6IE4gfVxuICAgIGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiAoZSBhcyBhbnkpLmFueSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7KGUgYXMgYW55KS5hbnl9YCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gM2IpIHsgY2hvb3NlOiB7IGNvdW50LCBcdTIwMjYgfSB9XG4gICAgaWYgKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgKGUgYXMgYW55KS5jaG9vc2UpIHtcbiAgICAgIGNvbnN0IGNudCA9IChlIGFzIGFueSkuY2hvb3NlLmNvdW50ID8/IDE7XG4gICAgICBvdXQuYWRkKGBDaG9vc2UgJHtjbnR9YCk7XG4gICAgfVxuICAgIC8vIDNjKSBmaXhlZCBmbGFncyBmb286IHRydWVcbiAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZSkpIHtcbiAgICAgICAgaWYgKHYgPT09IHRydWUpIG91dC5hZGQoY2FwKGspKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gM2QpIGxpdGVyYWwgc3RyaW5nc1xuICAgIGlmICh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgb3V0LmFkZChjYXAoZSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbLi4ub3V0XTtcbn07XG5cblxuIFxuZXhwb3J0IGNvbnN0IHVuaWZpZWRUb29sUHJvZnMgPSAodmFsOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gIC8vIHB1bGwgbmVzdGVkIGFycmF5IGlmIHNvbWVvbmUgcGFzc2VkIHlvdSB0aGUgd2hvbGUgc3RhcnRpbmdQcm9maWNpZW5jaWVzIG9ialxuICBsZXQgZW50cmllczogYW55W10gPSBBcnJheS5pc0FycmF5KHZhbCkgPyB2YWxcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsPy50b29sUHJvZmljaWVuY2llcykgPyB2YWwudG9vbFByb2ZpY2llbmNpZXNcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsPy50b29scykgICAgICAgICAgICAgPyB2YWwudG9vbHNcbiAgICA6IFtdO1xuXG4gIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBsZXQgc2F3Q2hvb3NlID0gZmFsc2U7XG5cbiAgZm9yIChjb25zdCBlIG9mIGVudHJpZXMpIHtcbiAgICBpZiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG91dC5hZGQoY2FwKGUpKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChlPy5jaG9vc2UpIHtcbiAgICAgIGNvbnN0IGNudCA9IGUuY2hvb3NlLmNvdW50ID8/IDE7XG4gICAgICBzYXdDaG9vc2UgPSB0cnVlO1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7Y250fWApO1xuICAgIH1cblxuICAgIC8vIHB1bGwgb3V0IGFueSBmaXhlZCBcdTIwMUNmb286IHRydWVcdTIwMUQgb3IgbnVtZXJpYyBcdTIwMUNhbnlGb286IE5cdTIwMURcbiAgICBmb3IgKGNvbnN0IFtrLHZdIG9mIE9iamVjdC5lbnRyaWVzKGUpKSB7XG4gICAgICBpZiAodiA9PT0gdHJ1ZSkge1xuICAgICAgICBvdXQuYWRkKGNhcChrKSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2ID09PSBcIm51bWJlclwiICYmIGsuc3RhcnRzV2l0aChcImFueVwiKSkge1xuICAgICAgICAvLyBlLmcuIGFueUFydGlzYW5zVG9vbDoxXG4gICAgICAgIGNvbnN0IHJhdyA9IGsucmVwbGFjZSgvXmFueS8sIFwiXCIpO1xuICAgICAgICBjb25zdCBzcGFjZWQgPSByYXdcbiAgICAgICAgICAucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMSAkMlwiKVxuICAgICAgICAgIC5zcGxpdChcIiBcIilcbiAgICAgICAgICAubWFwKGNhcClcbiAgICAgICAgICAuam9pbihcIiBcIik7XG4gICAgICAgIG91dC5hZGQoYENob29zZSAke3Z9ICR7c3BhY2VkfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbLi4ub3V0XTtcbn07XG5cbmV4cG9ydCBjb25zdCBBTExfRklFTERfREVGUzogRmllbGREZWZbXSA9IFtcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENvcmUgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiTkFNRVwiLCAganNvbktleTogXCJuYW1lXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTT1VSQ0VcIiwganNvbktleTogW1wic291cmNlXCJdLCBjb252OiAocmF3LCBhbGwpID0+IHtcbiAgICAgIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgICAgY29uc3QgYXJyID0gQXJyYXkuaXNBcnJheShyYXcpID8gcmF3IDogW3Jhd107XG4gICAgICBhcnIuZm9yRWFjaChzcmMgPT4gb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShzcmMsIChhbGwgYXMgYW55KS5fZWRpdGlvbklkKSkpO1xuICAgICAgZm9yIChjb25zdCBvcyBvZiBhbGwub3RoZXJTb3VyY2VzID8/IFtdKSBvdXQuYWRkKGdldEZ1bGxTb3VyY2VOYW1lKG9zLnNvdXJjZSwgKGFsbCBhcyBhbnkpLl9lZGl0aW9uSWQpKTtcbiAgICAgIGZvciAoY29uc3QgcmVwIG9mIGFsbC5yZXByaW50ZWRBcyA/PyBbXSkge1xuICAgICAgICBjb25zdCBbLCBzcmNdID0gKHJlcCBhcyBzdHJpbmcpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShzcmMsIChhbGwgYXMgYW55KS5fZWRpdGlvbklkKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gWy4uLm91dF07XG4gIH19LFxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIkFSTU9SX1BST0ZJQ0lFTkNJRVNcIiwgIGpzb25LZXk6IFtcImFybW9yUHJvZmljaWVuY2llc1wiLCBcImFybW9yUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sIGNvbnY6IHVuaWZpZWRBcm1vclByb2ZzIH0sXG4gIHsgXG4gICAgY2FsbFNpZ246IFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgICBqc29uS2V5OiBbXCJ3ZWFwb25Qcm9maWNpZW5jaWVzXCIsXCJ3ZWFwb25Qcm9mc1wiLFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IHVuaWZpZWRXZWFwb25Qcm9mc1xuICB9LFxuICB7IGNhbGxTaWduOiBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLCAgIGpzb25LZXk6IFtcInRvb2xQcm9maWNpZW5jaWVzXCIsIFwidG9vbFByb2ZzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLCBjb252OiB1bmlmaWVkVG9vbFByb2ZzIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gICAganNvbktleTogW1widG9vbFByb2ZpY2llbmNpZXNcIiwgXCJ0b29sUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KHJhdylcbiAgICAgICAgPyByYXdcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8udG9vbFByb2ZpY2llbmNpZXMpXG4gICAgICAgID8gcmF3LnRvb2xQcm9maWNpZW5jaWVzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnRvb2xzKVxuICAgICAgICA/IHJhdy50b29sc1xuICAgICAgICA6IFtdO1xuICAgICAgY29uc3QgY2hvaWNlID0gYXJyLmZpbmQoKGU6IGFueSkgPT4gZT8uY2hvb3NlKTtcbiAgICAgIHJldHVybiBjaG9pY2U/LmNob29zZT8uZnJvbT8ubWFwKChzOiBzdHJpbmcpID0+IGNhcChzKSkgPz8gW107XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIlNBVklOR19USFJPV1NcIiwgICAgICAgIGpzb25LZXk6IFtcInNhdmVcIiwgXCJwcm9maWNpZW5jeVwiXSwgY29udjogdW5pZmllZFNhdmVzIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJTS0lMTFNcIixcbiAgICBqc29uS2V5OiBbXCJza2lsbFwiLCBcInNraWxsUHJvZlwiLCBcInNraWxsUHJvZmljaWVuY2llc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiB1bmlmaWVkU2tpbGxzXG4gIH0sXG5cbiAge1xuICAgIGNhbGxTaWduOiBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsXG4gICAganNvbktleTogW1wic2tpbGxcIiwgXCJza2lsbFByb2ZcIiwgXCJza2lsbFByb2ZpY2llbmNpZXNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICAvLyBub3JtYWxpemUgaW50byBhbiBhcnJheSBvZiBlbnRyaWVzXG4gICAgICBjb25zdCBhcnI6IGFueVtdID0gQXJyYXkuaXNBcnJheShyYXcpXG4gICAgICAgID8gcmF3XG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxsUHJvZmljaWVuY2llcylcbiAgICAgICAgPyByYXcuc2tpbGxQcm9maWNpZW5jaWVzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxscylcbiAgICAgICAgPyByYXcuc2tpbGxzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxsUHJvZilcbiAgICAgICAgPyByYXcuc2tpbGxQcm9mXG4gICAgICAgIDogW107XG5cbiAgICAgIC8vIGZpbmQgdGhlIG9uZSBlbnRyeSB0aGF0IHJlcHJlc2VudHMgdGhlIFx1MjAxQ2Nob29zZVx1MjAxRCBidWNrZXRcbiAgICAgIGNvbnN0IGNob2ljZU9iaiA9IGFyci5maW5kKGUgPT4gZT8uY2hvb3NlIHx8IHR5cGVvZiBlLmFueSA9PT0gXCJudW1iZXJcIik7XG4gICAgICBpZiAoIWNob2ljZU9iaikgcmV0dXJuIFtdO1xuXG4gICAgICAvLyBleHBsaWNpdCBcdTIwMUNjaG9vc2UgZnJvbSBbIC4uLiBdXHUyMDFEXG4gICAgICBpZiAoY2hvaWNlT2JqLmNob29zZSAmJiBBcnJheS5pc0FycmF5KGNob2ljZU9iai5jaG9vc2UuZnJvbSkpIHtcbiAgICAgICAgcmV0dXJuIGNob2ljZU9iai5jaG9vc2UuZnJvbS5tYXAoY2FwKTtcbiAgICAgIH1cblxuICAgICAgLy8gdGhlIFx1MjAxQ2FueTogM1x1MjAxRCBzaG9ydGhhbmQgXHUyMTkyIG9mZmVyIGV2ZXJ5IHNraWxsXG4gICAgICBpZiAodHlwZW9mIGNob2ljZU9iai5hbnkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgLy8gU0tJTExfT1BUSU9OUyBpcyB5b3VyIGNvbnN0IFtcIkFjcm9iYXRpY3NcIiwgXCJBbmltYWwgSGFuZGxpbmdcIiwgXHUyMDI2XVxuICAgICAgICByZXR1cm4gU0tJTExfT1BUSU9OUztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJTUEVMTF9DQVNUX01PRFwiLGpzb25LZXk6IFwic3BlbGxjYXN0aW5nQWJpbGl0eVwiLCAgXG4gICAgY29udjogKHJhdykgPT4ge1xuICAgIC8vIHJhdyBtaWdodCBiZSBcImNoYVwiIG9yIFwiQ0hBXCJcbiAgICBjb25zdCBrZXkgPSBTdHJpbmcocmF3KS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBBQklMSVRZX0ZVTExba2V5XSB8fCBrZXkudG9VcHBlckNhc2UoKTtcbiAgfX0sXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3BlbGxzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIkxFVkVMXCIsICAgICAgICAganNvbktleTogXCJsZXZlbFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU0NIT09MXCIsICAgICAgICBqc29uS2V5OiBcInNjaG9vbFwiLCAgIGNvbnY6IHMgPT4gU0NIT09MX01BUFtzXSA/PyBzIH0sXG4gIHsgY2FsbFNpZ246IFwiQ0FTVElOR19USU1FXCIsICBqc29uS2V5OiBcInRpbWVcIiwgICAgIGNvbnY6IGZvcm1hdFRpbWUgfSxcbiAgeyBjYWxsU2lnbjogXCJTUEVMTF9SQU5HRVwiLCAgIGpzb25LZXk6IFwicmFuZ2VcIiwgICAgY29udjogZm9ybWF0UmFuZ2UgfSxcbiAgeyBjYWxsU2lnbjogXCJEVVJBVElPTlwiLCAgICAgIGpzb25LZXk6IFwiZHVyYXRpb25cIiwgY29udjogZm9ybWF0RHVyYXRpb24gfSxcbiAgeyBjYWxsU2lnbjogXCJWRVJCQUxcIiwgICAgICAgIGpzb25LZXk6IFwiY29tcG9uZW50c1wiLCBjb252OiAoYzphbnkpID0+ICEhYy52IH0sXG4gIHsgY2FsbFNpZ246IFwiU09NQVRJQ1wiLCAgICAgICBqc29uS2V5OiBcImNvbXBvbmVudHNcIiwgY29udjogKGM6YW55KSA9PiAhIWMucyB9LFxuICB7IGNhbGxTaWduOiBcIk1BVEVSSUFMXCIsICAgICAganNvbktleTogXCJjb21wb25lbnRzXCIsIGNvbnY6IChjOmFueSkgPT4gISFjLm0gfSxcbiAgeyBjYWxsU2lnbjogXCJDT01QT05FTlRTXCIsXG4gICAganNvbktleTogIFwiY29tcG9uZW50c1wiLFxuICAgIGNvbnY6IChjOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gICAgICBpZiAoIWMubSkgcmV0dXJuIFtdO1xuXG4gICAgICBjb25zdCByYXcgPSBBcnJheS5pc0FycmF5KGMubSkgPyBjLm0gOiBbYy5tXTtcblxuICAgICAgcmV0dXJuIHJhd1xuICAgICAgICAubWFwKChpdGVtOiBhbnkpOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHJldHVybiBpdGVtO1xuICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBpdGVtLnRleHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLnRleHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KVxuICAgICAgICAuZmlsdGVyKChjb21wOiBzdHJpbmcgfCBudWxsKTogY29tcCBpcyBzdHJpbmcgPT4gY29tcCAhPT0gbnVsbCk7XG4gICAgfVxuICB9LCBcbiAgeyBjYWxsU2lnbjogXCJBVFRBQ0tfVFlQRVwiLCAgIGpzb25LZXk6IFwiYXR0YWNrVHlwZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFX1RZUEVcIiwgICBqc29uS2V5OiBcImRhbWFnZUluZmxpY3RcIiwgY29udjogZCA9PiBBcnJheS5pc0FycmF5KGQpID8gZFswXSA6IGQgfSxcbiAgeyBjYWxsU2lnbjogXCJSSVRVQUxcIiwgICAgICAgIGpzb25LZXk6IFwicml0dWFsXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJDT05DRU5UUkFUSU9OXCIsIGpzb25LZXk6IFwiZHVyYXRpb25cIiwgY29udjogZHMgPT4gQXJyYXkuaXNBcnJheShkcykgJiYgZHMuc29tZSgoeDphbnkpPT4geC5jb25jZW50cmF0aW9uKSB9LFxuICB7IGNhbGxTaWduOiBcIlNBVkVcIiwgICAgICAgICAganNvbktleTogXCJzYXZlQXR0clwiIH0sXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWNpZXMgLyBDcmVhdHVyZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiU1BFQ0lFU1wiLCBqc29uS2V5OiBcIm5hbWVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNJWkVcIiwganNvbktleTogXCJzaXplXCIsIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgLy8gaGFuZGxlIFtcIlNcIixcIk1cIl0gb3IganVzdCBcIkxcIlxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmF3KSkge1xuICAgICAgICByZXR1cm4gcmF3Lm1hcChyID0+IFNJWkVfTUFQW3JdIHx8IHIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFNJWkVfTUFQW3Jhd10gfHwgcmF3O1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgICB7XG4gIGNhbGxTaWduOiBcIlNQRUVEXCIsXG4gIGpzb25LZXk6ICAgXCJzcGVlZFwiLFxuICBjb252OiAoc3A6IG51bWJlciB8IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IHtcbiAgICAvLyBoYW5kbGUgYm90aCBudW1lcmljIHNwZWVkcyBhbmQgb2JqZWN0IHNwZWVkc1xuICAgIGlmICh0eXBlb2Ygc3AgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiBbYFdhbGsgJHtzcH0gZnQuYF07XG4gICAgfVxuICAgIGlmICghc3AgfHwgdHlwZW9mIHNwICE9PSBcIm9iamVjdFwiKSByZXR1cm4gW107XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNwKVxuICAgICAgLmZpbHRlcigoW21vZGVdKSA9PiBtb2RlICE9PSBcImNhbkhvdmVyXCIpXG4gICAgICAubWFwKChbbW9kZSwgdl0pID0+IHtcbiAgICAgICAgY29uc3QgbiA9IHR5cGVvZiB2ID09PSBcIm9iamVjdFwiICYmIHYgIT09IG51bGwgJiYgXCJudW1iZXJcIiBpbiB2ID8gKHYgYXMgYW55KS5udW1iZXIgOiB2O1xuICAgICAgICBjb25zdCBsYWJlbCA9IG1vZGUgPT09IFwid2Fsa1wiID8gXCJXYWxrXCIgOiBjYXAobW9kZSk7XG4gICAgICAgIHJldHVybiBgJHtsYWJlbH0gJHtufSBmdC5gO1xuICAgICAgfSk7XG4gIH0sXG59LFxueyBjYWxsU2lnbjogXCJMQU5HVUFHRVNcIiwganNvbktleTogW1wibGFuZ3VhZ2VzXCIsIFwibGFuZ3VhZ2VQcm9maWNpZW5jaWVzXCJdLCBjb252OiBhcnIgPT4ge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBbXTtcbiAgICAgIGNvbnN0IG91dDogc3RyaW5nW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgbHAgb2YgYXJyKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbHAgPT09IFwic3RyaW5nXCIpIG91dC5wdXNoKGNhcChscCkpO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbHAgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IFtsYW5nLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKGxwKSkge1xuICAgICAgICAgICAgaWYgKHZhbCkgb3V0LnB1c2goY2FwKGxhbmcpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBbLi4ubmV3IFNldChvdXQpXTtcbiAgfX0sXG4gIHsgY2FsbFNpZ246IFwiU0VOU0VTXCIsIGpzb25LZXk6IFwic2Vuc2VzXCIsIGNvbnY6IHNlbiA9PiB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzZW4pKSByZXR1cm4gc2VuLm1hcCgoczpzdHJpbmcpPT5zLnJlcGxhY2UoL15cXGQrXFxzKi8sXCJcIikucmVwbGFjZSgvXi4vLGM9PmMudG9VcHBlckNhc2UoKSkpO1xuICAgICAgaWYgKHNlbiAmJiB0eXBlb2Ygc2VuPT09XCJvYmplY3RcIikgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNlbikubWFwKChbayx2XSk9PmAke2suY2hhckF0KDApLnRvVXBwZXJDYXNlKCkray5zbGljZSgxKX0gJHt2fWApO1xuICAgICAgcmV0dXJuIFtdO1xuICB9fSwgXG57XG4gIGNhbGxTaWduOiBcIlRSQUlUU1wiLFxuICBqc29uS2V5OiBbXCJjbGFzc0ZlYXR1cmVzXCIsIFwiZW50cmllc1wiXSxcbiAgY29udjogKHJhdzogYW55LCBhbGxKc29uOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gICAgLy8gcHVsbCB0aGUgY2xhc3MgcmVjb3JkIHNvIHdlIGtub3cgaXRzIGRpc3BsYXkgbmFtZVxuICAgIGNvbnN0IGNsc1JlYyA9IEFycmF5LmlzQXJyYXkoYWxsSnNvbi5jbGFzcykgPyBhbGxKc29uLmNsYXNzWzBdIDogYWxsSnNvbjtcbiAgICBjb25zdCBjbGFzc05hbWUgPSB0eXBlb2YgY2xzUmVjLm5hbWUgPT09IFwic3RyaW5nXCIgPyBjbHNSZWMubmFtZSA6IFwiXCI7XG5cbiAgICAvLyBuYW1lcyB3ZSBuZXZlciB3YW50IHRvIGVtaXRcbiAgICBjb25zdCBvbWl0ID0gbmV3IFNldChbXG4gICAgICBcIkFiaWxpdHkgU2NvcmUgSW1wcm92ZW1lbnRcIixcbiAgICAgIFwiQXJjaGV0eXBlIEZlYXR1cmVcIixcbiAgICAgIFwiU3ViY2xhc3MgRmVhdHVyZVwiLFxuICAgICAgLy8gYWRkIG1vcmUgaWYgeW91IGxpa2VcdTIwMjZcbiAgICBdKTtcbiAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgICAvLyAxKSBpZiB0aGVyZSdzIGEgY2xhc3NGZWF0dXJlcyBhcnJheSwgdXNlIGl0XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsSnNvbi5jbGFzc0ZlYXR1cmVzKSkge1xuICAgICAgcmV0dXJuIGFsbEpzb24uY2xhc3NGZWF0dXJlcy5mbGF0TWFwKChmZWF0OiBhbnkpID0+IHtcbiAgICAgICAgLy8gc2tpcCBzdWJjbGFzc1x1MjAxMGluamVjdGVkIGZlYXR1cmVzIGVudGlyZWx5XG4gICAgICAgIGlmIChmZWF0ICYmIHR5cGVvZiBmZWF0ID09PSBcIm9iamVjdFwiICYmIGZlYXQuZ2FpblN1YmNsYXNzRmVhdHVyZSkgcmV0dXJuIFtdO1xuXG4gICAgICAgIC8vIG5vcm1hbGl6ZSB0byBhIHN0cmluZ1xuICAgICAgICBjb25zdCByYXdOYW1lID1cbiAgICAgICAgICB0eXBlb2YgZmVhdCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBmZWF0XG4gICAgICAgICAgICA6IHR5cGVvZiBmZWF0LmNsYXNzRmVhdHVyZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBmZWF0LmNsYXNzRmVhdHVyZVxuICAgICAgICAgICAgOiBcIlwiO1xuXG4gICAgICAgIC8vIGRyb3AgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgXHUyMDFDfFx1MjAxRFxuICAgICAgICBjb25zdCBuYW1lID0gcmF3TmFtZS5zcGxpdChcInxcIilbMF0udHJpbSgpO1xuICAgICAgICBpZiAoIW5hbWUgfHwgb21pdC5oYXMobmFtZSkgfHwgc2Vlbi5oYXMobmFtZSkpIHJldHVybiBbXTtcbiAgICAgICAgc2Vlbi5hZGQobmFtZSk7XG5cbiAgICAgICAgLy8gYnVpbGQgYSBuaWNlIGFuY2hvciAobXVzdCBtYXRjaCB5b3VyIGhlYWRlcnMpXG4gICAgICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgICAgICAucmVwbGFjZSgvW15cXHdcXHNdL2csIFwiXCIpICAgIC8vIHN0cmlwIHB1bmN0dWF0aW9uXG4gICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpICAgICAgIC8vIGNvbGxhcHNlIHNwYWNlc1xuICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAucmVwbGFjZSgvXFxiXFx3L2csIChjOiBhbnkpID0+IGMudG9VcHBlckNhc2UoKSk7IC8vIFRpdGxlIENhc2VcblxuICAgICAgICAvLyBwcm9kdWNlIGEgZmlsZS1hbmNob3IgbGlua1xuICAgICAgICByZXR1cm4gYFtbJHtjbGFzc05hbWV9IyR7YW5jaG9yfXwke25hbWV9XV1gO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gMikgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byB5b3VyIG9sZCBlbnRyaWVzLWJhc2VkIGxvZ2ljXG4gICAgY29uc3QgZW50cyA9IEFycmF5LmlzQXJyYXkocmF3KSA/IHJhdyA6IFtdO1xuICAgIGNvbnN0IGZlYXR1cmVOYW1lcyA9IGVudHNcbiAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT4gZT8uZGF0YT8uaXNGZWF0dXJlICYmIHR5cGVvZiBlLm5hbWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAubWFwKChlOiBhbnkpID0+IGUubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIikudHJpbSgpKTtcbiAgICBpZiAoZmVhdHVyZU5hbWVzLmxlbmd0aCkgcmV0dXJuIGZlYXR1cmVOYW1lcztcblxuICAgIHJldHVybiBlbnRzXG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IGUgJiYgdHlwZW9mIGUubmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgIC5tYXAoKGU6IGFueSkgPT4gZS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKS50cmltKCkpO1xuICB9LFxufSxcblxuXG4gIHsgY2FsbFNpZ246IFwiQUNcIiwganNvbktleTogXCJhY1wiLCBjb252OiBhID0+IEFycmF5LmlzQXJyYXkoYSk/YVswXS5hYzphIH0sXG4gIHsgY2FsbFNpZ246IFwiSFBcIiwganNvbktleTogXCJocFwiLCBjb252OiBocCA9PiBocD8uYXZlcmFnZSA/PyBocCB9LFxuICB7IGNhbGxTaWduOiBcIkNIQUxMRU5HRV9SQVRJTkdcIiwganNvbktleTogXCJjclwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU1RSRU5HVEhcIiwgICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbMF06YXJyPy5zdHIgPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIkRFWFRFUklUWVwiLCAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzFdOmFycj8uZGV4ID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJDT05TVElUVVRJT05cIiwganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclsyXTphcnI/LmNvbiA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiSU5URUxMSUdFTkNFXCIsIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbM106YXJyPy5pbnQgPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIldJU0RPTVwiLCAgICAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzRdOmFycj8ud2lzID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJDSEFSSVNNQVwiLCAgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2Fycls1XTphcnI/LmNoYSA/PyAwIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJBTElHTk1FTlRcIixcbiAgICBqc29uS2V5OiBcImFsaWdubWVudFwiLFxuICAgIGNvbnY6IChhOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHJhdyA9IEFycmF5LmlzQXJyYXkoYSkgPyBhLmpvaW4oXCIgXCIpIDogdHlwZW9mIGEgPT09IFwic3RyaW5nXCIgPyBhIDogU3RyaW5nKGEpO1xuICAgICAgY29uc3QgY2xlYW5lZCA9IHJhd1xuICAgICAgICAucmVwbGFjZSgvXFxiQVxcYi9nLCBcIkFueVwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiVVxcYi9nLCBcIlVuYWxpZ25lZFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiTlxcYi9nLCBcIk5ldXRyYWxcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkxcXGIvZywgXCJMYXdmdWxcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkNcXGIvZywgXCJDaGFvdGljXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJHXFxiL2csIFwiR29vZFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiRVxcYi9nLCBcIkV2aWxcIik7XG5cbiAgICAgIHJldHVybiBmb3JtYXRBbGlnbm1lbnRBYmJyZXYoY2xlYW5lZCk7IC8vIHJldXNlIHlvdXIgbm9ybWFsaXplciBpZiBpdCBleGlzdHNcbiAgICB9XG4gIH0sXG4gICAge1xuICAgICAgY2FsbFNpZ246IFwiVFlQRVwiLFxuICAgICAganNvbktleTogXCJ0eXBlXCIsXG4gICAgICBjb252OiAodDogYW55KTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgICAgLy8gMSkgSWYgaXRcdTIwMTlzIGEgc2ltcGxlIHN0cmluZyBjb2RlLCBtYXAgaXRcbiAgICAgICAgaWYgKHR5cGVvZiB0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgLy8gZGlyZWN0IGxvb2t1cFx1MjAxNGlmIG5vIG1hcHBpbmcsIGp1c3QgdGl0bGVcdTIwMTBjYXNlIHRoZSBjb2RlXG4gICAgICAgICAgcmV0dXJuIElURU1fVFlQRV9NQVBbdF0gPz8gY2FwKHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMikgSWYgaXRcdTIwMTlzIGFuIG9iamVjdCB3aXRoIGEgLnR5cGUgdGFnXG4gICAgICAgIGlmICh0ICYmIHR5cGVvZiB0ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgY29uc3QgY29kZSA9IFN0cmluZyh0LnR5cGUgfHwgXCJcIikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAvLyB0cnkgdGhlIG1hcCBmaXJzdFxuICAgICAgICAgIGlmIChJVEVNX1RZUEVfTUFQW2NvZGVdKSB7XG4gICAgICAgICAgICByZXR1cm4gSVRFTV9UWVBFX01BUFtjb2RlXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBcdTIwMUNCYXNlICh0YWdzXHUyMDI2KVx1MjAxRCBzdHlsZVxuICAgICAgICAgIGNvbnN0IGJhc2UgPSB0LnR5cGUgPyBjYXAodC50eXBlKSA6IFwiVW5rbm93blwiO1xuICAgICAgICAgIGNvbnN0IHRhZ3MgPSBBcnJheS5pc0FycmF5KHQudGFncykgPyB0LnRhZ3MubWFwKGNhcCkgOiBbXTtcbiAgICAgICAgICByZXR1cm4gdGFncy5sZW5ndGggPyBgJHtiYXNlfSAoJHt0YWdzLmpvaW4oXCIsIFwiKX0pYCA6IGJhc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0sXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSXRlbXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiVFlQRVwiLCAgIGpzb25LZXk6IFwiX3BhcnNlZFR5cGVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlJBUklUWVwiLCBqc29uS2V5OiBcInJhcml0eVwiLCBjb252OiByID0+IHtcbiAgICAgIGNvbnN0IHMgPSBTdHJpbmcocnx8XCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiBzICYmIHMhPT1cIm5vbmVcIiA/IHNbMF0udG9VcHBlckNhc2UoKStzLnNsaWNlKDEpIDogdW5kZWZpbmVkO1xuICB9fSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkNPU1RcIixcbiAgICBqc29uS2V5OiBcInZhbHVlXCIsXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBzID0gU3RyaW5nKHJhdykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBsZXQgbnVtOiBudW1iZXI7XG5cbiAgICAgIC8vIGV4cGxpY2l0IGNvcHBlcj9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwiY3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgLy8gY29udmVydCB0byBncCBvbmx5IGlmIDEwMCsgY3BcbiAgICAgICAgcmV0dXJuIG51bSA+PSAxMDBcbiAgICAgICAgICA/IGAke01hdGgucm91bmQoKG51bS8xMDApICogMTAwKS8xMDB9Z3BgXG4gICAgICAgICAgOiBgJHtudW19Y3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBleHBsaWNpdCBzaWx2ZXI/XG4gICAgICBpZiAocy5lbmRzV2l0aChcInNwXCIpKSB7XG4gICAgICAgIG51bSA9IHBhcnNlRmxvYXQocyk7XG4gICAgICAgIC8vIGNvbnZlcnQgdG8gZ3Agb25seSBpZiAxMCsgc3BcbiAgICAgICAgcmV0dXJuIG51bSA+PSAxMFxuICAgICAgICAgID8gYCR7TWF0aC5yb3VuZCgobnVtLzEwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICAgIDogYCR7bnVtfXNwYDtcbiAgICAgIH1cblxuICAgICAgLy8gZXhwbGljaXQgZ29sZD9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwiZ3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgcmV0dXJuIGAke01hdGgucm91bmQobnVtICogMTAwKS8xMDB9Z3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBiYXJlIG51bWJlciBcdTIxOTIgYXNzdW1lIGNvcHBlclxuICAgICAgbnVtID0gcGFyc2VGbG9hdChzKSB8fCAwO1xuICAgICAgcmV0dXJuIG51bSA+PSAxMDBcbiAgICAgICAgPyBgJHtNYXRoLnJvdW5kKChudW0vMTAwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICA6IGAke251bX1jcGA7XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIldFSUdIVFwiLCBqc29uS2V5OiBcIndlaWdodFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiTUFHSUNBTFwiLCBqc29uS2V5OiBcIndvbmRyb3VzXCIsIGNvbnY6IChfdyxhbGwpID0+ICEhYWxsLndvbmRyb3VzIHx8ICEhYWxsLnJlcUF0dHVuZSB9LFxuICB7IGNhbGxTaWduOiBcIlZBUklBTlRcIiwganNvbktleTogXCJib251c1dlYXBvblwiLCBjb252OiBiID0+IHR5cGVvZiBiPT09XCJzdHJpbmdcIiAmJiBiLnN0YXJ0c1dpdGgoXCIrXCIpIH0sXG4gIHsgY2FsbFNpZ246IFwiUFJPUEVSVElFU1wiLCBqc29uS2V5OiBcInByb3BlcnR5XCIsIGNvbnY6IGFyciA9PiBBcnJheS5pc0FycmF5KGFycikgPyBhcnIubWFwKHAgPT4gUFJPUEVSVFlfTUFQW3BdIHx8IHApIDogW10gfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VcIiwganNvbktleTogXCJkbWcxXCIsIGNvbnY6IChkLGFsbCkgPT4gZCA/IGFsbC5kbWcyID8gYCR7ZH0gLyAke2FsbC5kbWcyfWAgOiBgJHtkfWAgOiB1bmRlZmluZWQgfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfVFlQRVNcIiwganNvbktleTogXCJkbWdUeXBlXCIsIGNvbnY6IGR0ID0+IGR0ID09IG51bGwgPyBbXSA6IEFycmF5LmlzQXJyYXkoZHQpID8gZHQgOiBbZHRdIH0sXG4gIHsgY2FsbFNpZ246IFwiUkFOR0VcIiwganNvbktleTogXCJyYW5nZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiUkVMT0FEXCIsIGpzb25LZXk6IFwicmVsb2FkXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJBTU1PX1RZUEVcIiwganNvbktleTogXCJhbW1vVHlwZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU1RFQUxUSF9ESVNBRFZBTlRBR0VcIiwganNvbktleTogXCJzdGVhbHRoXCIgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkFUVFVORU1FTlRcIixcbiAgICBqc29uS2V5OiBbXCJ3b25kcm91c1wiLCBcInJlcUF0dHVuZVwiLCBcInJlcV9hdHR1bmVcIiwgXCJyZXFBdHR1bmVUYWdzXCJdLFxuICAgIGNvbnY6IChfcmF3LCBhbGxKc29uKSA9PiB7XG4gICAgICBjb25zdCBqID0gYWxsSnNvbiBhcyBhbnk7XG4gICAgICBjb25zdCBoYXNUZXh0ID0gdHlwZW9mIGoucmVxQXR0dW5lID09PSBcInN0cmluZ1wiICYmIGoucmVxQXR0dW5lLnRyaW0oKSAhPT0gXCJcIjtcbiAgICAgIGNvbnN0IGhhc1RhZ3MgPSBBcnJheS5pc0FycmF5KGoucmVxQXR0dW5lVGFncykgJiYgai5yZXFBdHR1bmVUYWdzLmxlbmd0aCA+IDA7XG4gICAgICByZXR1cm4gaGFzVGV4dCB8fCBoYXNUYWdzO1xuICAgIH1cbiAgfSxcbiAge1xuICBjYWxsU2lnbjogXCJBVFRVTkVfUkVRXCIsXG4gIGpzb25LZXk6IFwicmVxQXR0dW5lVGFnc1wiLFxuICBjb252OiAodGFnczogYW55W10gPSBbXSwgX2FsbCkgPT4ge1xuICAgIGNvbnN0IG1hcExldHRlcjogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAgICAgQTogXCJBbnlcIiwgVTogXCJVbmFsaWduZWRcIiwgTjogXCJOZXV0cmFsXCIsXG4gICAgICBMOiBcIkxhd2Z1bFwiLCBDOiBcIkNoYW90aWNcIiwgRzogXCJHb29kXCIsIEU6IFwiRXZpbFwiXG4gICAgfTtcbiAgICBjb25zdCByZXFzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgaWYgKHRhZy5jbGFzcyAmJiBBcnJheS5pc0FycmF5KHRhZy5hbGlnbm1lbnQpKSB7XG4gICAgICAgIGNvbnN0IGNscyA9IGNhcCh0YWcuY2xhc3MpO1xuICAgICAgICBmb3IgKGNvbnN0IGNvZGUgb2YgdGFnLmFsaWdubWVudCkge1xuICAgICAgICAgIHJlcXMucHVzaChgJHttYXBMZXR0ZXJbY29kZV0gfHwgY29kZX0gJHtjbHN9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGFnLmNsYXNzKSB7XG4gICAgICAgIHJlcXMucHVzaChjYXAodGFnLmNsYXNzKSk7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodGFnLmFsaWdubWVudCkpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb2RlIG9mIHRhZy5hbGlnbm1lbnQpIHtcbiAgICAgICAgICByZXFzLnB1c2gobWFwTGV0dGVyW2NvZGVdIHx8IGNvZGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRhZy5iYWNrZ3JvdW5kKSB7XG4gICAgICAgIGNvbnN0IFtiZ10gPSBTdHJpbmcodGFnLmJhY2tncm91bmQpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgcmVxcy5wdXNoKGJnLnNwbGl0KFwiIFwiKS5tYXAoY2FwKS5qb2luKFwiIFwiKSk7XG4gICAgICB9IGVsc2UgaWYgKHRhZy5zcGVsbGNhc3RpbmcpIHtcbiAgICAgICAgcmVxcy5wdXNoKFwiU3BlbGxjYXN0ZXJcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldChyZXFzKSk7XG4gIH1cbn0sXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBPdGhlciBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfUkVTXCIsIGpzb25LZXk6IFwicmVzaXN0XCIsIGNvbnY6IHYgPT4gQXJyYXkuaXNBcnJheSh2KSA/IHYubWFwKGNhcCkgOiBbXSB9LFxuICB7IGNhbGxTaWduOiBcIlJVTEVTRVRcIiwganNvbktleTogXCJfZWRpdGlvbklkXCIgfSxcbiAgXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEFiaWxpdHlcdTIwMTBzY29yZSBtb2RpZmllcnMgKG9ubHkgZW1pdCB3aGVuIG5vbnplcm8pIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7XG4gICAgY2FsbFNpZ246IFwiU1RSX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uc3RyID8/IDApIDogKGFyci5zdHIgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkRFWF9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLmRleCA/PyAwKSA6IChhcnIuZGV4ID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDT05fTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5jb24gPz8gMCkgOiAoYXJyLmNvbiA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiSU5UX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uaW50ID8/IDApIDogKGFyci5pbnQgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIldJU19NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLndpcyA/PyAwKSA6IChhcnIud2lzID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDSEFfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5jaGEgPz8gMCkgOiAoYXJyLmNoYSA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuXG5cbl07XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEdlbmVyaWMgYnVpbGRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBmdW5jdGlvbiBidWlsZEZNKGpzb246IGFueSwgZGVmczogRmllbGREZWZbXSk6IEZyb250bWF0dGVyIHtcbiAgY29uc3QgZm06IEZyb250bWF0dGVyID0ge307XG4gIGZvciAoY29uc3QgeyBjYWxsU2lnbiwganNvbktleSwgY29udiB9IG9mIGRlZnMpIHtcbiAgICBjb25zdCBrZXlzID0gQXJyYXkuaXNBcnJheShqc29uS2V5KSA/IGpzb25LZXkgOiBbanNvbktleV07XG4gICAgbGV0IHJhdzogYW55ID0gdW5kZWZpbmVkO1xuXG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgaWYgKGpzb25ba2V5XSAhPSBudWxsKSB7XG4gICAgICAgIHJhdyA9IGpzb25ba2V5XTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJhdyA9PSBudWxsKSBjb250aW51ZTtcbiAgICBjb25zdCB2YWwgPSBjb252ID8gY29udihyYXcsIGpzb24pIDogcmF3O1xuICAgIGZtW0ZNX0ZJRUxEU1tjYWxsU2lnbl1dID0gdmFsO1xuICB9XG4gIHJldHVybiBmbTtcbn1cblxuLy8gZnJvbnRtYXR0ZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUZyb250bWF0dGVyKFxuICBmbTogRnJvbnRtYXR0ZXIsXG4gIGRlZnM/OiBGaWVsZERlZltdXG4pOiBzdHJpbmcge1xuICBjb25zdCBmaWx0ZXJlZDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gIC8vIGRldGVjdCBpZiB3ZSBoYXZlIGFueSBhY3R1YWwgY2hvaWNlLWxpc3RzXG4gIGNvbnN0IGhhc1NraWxsQ2hvaWNlID0gQXJyYXkuaXNBcnJheShmbVtGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1RdKSBcbiAgICAmJiAoZm1bRk1fRklFTERTLlNLSUxMX0NIT0lDRV9MSVNUXSBhcyBhbnlbXSkubGVuZ3RoID4gMDtcbiAgY29uc3QgaGFzVG9vbENob2ljZSA9IEFycmF5LmlzQXJyYXkoZm1bRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1RdKSBcbiAgICAmJiAoZm1bRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1RdIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuXG5cbiAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZm0pKSB7XG4gICAgLy8gMSkgbmV2ZXIgZW1pdCB1bmRlZmluZWRcbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcbiAgICAvLyAyKSBkcm9wIGVtcHR5IENPTVBPTkVOVFMsIFRPT0xfQ0hPSUNFX0xJU1QsIFNLSUxMX0NIT0lDRV9MSVNUXG4gICAgaWYgKGsgPT09IEZNX0ZJRUxEUy5DT01QT05FTlRTICYmIEFycmF5LmlzQXJyYXkodikgJiYgdi5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xuICAgIGlmIChcbiAgICAgIChrID09PSBGTV9GSUVMRFMuVE9PTF9DSE9JQ0VfTElTVCB8fCBrID09PSBGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1QpICYmXG4gICAgICBBcnJheS5pc0FycmF5KHYpICYmIHYubGVuZ3RoID09PSAwXG4gICAgKSBjb250aW51ZTtcblxuICAgIGZpbHRlcmVkW2tdID0gdjtcbiAgfVxuXG4gIC8vIGJ1aWxkIHRoZSBsaXN0IG9mIGtleXMgaW4gdGhlIGV4YWN0IG9yZGVyIGZyb20gZGVmc1xuICBsZXQga2V5c1RvRW1pdDogc3RyaW5nW107XG4gIGlmIChkZWZzKSB7XG4gICAgLy8gbWFwIGVhY2ggRmllbGREZWYgdG8gaXRzIGZyb250bWF0dGVyIGtleVxuICAgIGNvbnN0IHdhbnRlZCA9IGRlZnMubWFwKGQgPT4gRk1fRklFTERTW2QuY2FsbFNpZ25dKTtcbiAgICAvLyBvbmx5IGtlZXAgdGhlIG9uZXMgd2UgYWN0dWFsbHkgaGF2ZSwgaW4gb3JkZXJcbiAgICBrZXlzVG9FbWl0ID0gd2FudGVkLmZpbHRlcihrID0+IGsgaW4gZmlsdGVyZWQpO1xuICAgIC8vIHRoZW4gYXBwZW5kIGFueSBleHRyYSBrZXlzIHRoYXQgd2VyZW4ndCBpbiBkZWZzXG4gICAga2V5c1RvRW1pdC5wdXNoKFxuICAgICAgLi4uT2JqZWN0LmtleXMoZmlsdGVyZWQpLmZpbHRlcihrID0+ICFrZXlzVG9FbWl0LmluY2x1ZGVzKGspKVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAga2V5c1RvRW1pdCA9IE9iamVjdC5rZXlzKGZpbHRlcmVkKTtcbiAgfVxuXG4gIC8vIG5vdyBlbWl0IFlBTUwgaW4gdGhhdCBvcmRlclxuICByZXR1cm4ga2V5c1RvRW1pdFxuICAgIC5tYXAoayA9PiB7XG4gICAgICBjb25zdCB2ID0gZmlsdGVyZWRba107XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2KSkge1xuICAgICAgICAvLyBKU09OLnN0cmluZ2lmeSB0byBoYW5kbGUgc3BhY2VzLCBjb21tYXMsIGV0Yy5cbiAgICAgICAgY29uc3QgaW5saW5lID0gdi5tYXAoaXRlbSA9PiBKU09OLnN0cmluZ2lmeShpdGVtKSkuam9pbihcIiwgXCIpO1xuICAgICAgICByZXR1cm4gYCR7a306IFske2lubGluZX1dYDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gYCR7a306IFwiJHt2fVwiYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtrfTogJHt2fWA7XG4gICAgfSlcbiAgICAuam9pbihcIlxcblwiKTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU2tpbGwgaGVscGVycyBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBjb25zdCBTS0lMTF9PUFRJT05TID0gW1xuICBcIkFjcm9iYXRpY3NcIixcIkFuaW1hbCBIYW5kbGluZ1wiLFwiQXJjYW5hXCIsXCJBdGhsZXRpY3NcIixcIkRlY2VwdGlvblwiLFwiSGlzdG9yeVwiLFxuICBcIkluc2lnaHRcIixcIkludGltaWRhdGlvblwiLFwiSW52ZXN0aWdhdGlvblwiLFwiTWVkaWNpbmVcIixcIk5hdHVyZVwiLFwiUGVyY2VwdGlvblwiLFxuICBcIlBlcmZvcm1hbmNlXCIsXCJQZXJzdWFzaW9uXCIsXCJSZWxpZ2lvblwiLFwiU2xlaWdodCBvZiBIYW5kXCIsXCJTdGVhbHRoXCIsXCJTdXJ2aXZhbFwiLFxuXSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFNraWxsT3B0aW9uID0gdHlwZW9mIFNLSUxMX09QVElPTlNbbnVtYmVyXTtcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVTa2lsbChyYXc6IHN0cmluZyk6IFNraWxsT3B0aW9uIHwgbnVsbCB7XG4gIGNvbnN0IGxvd2VyID0gcmF3LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gU0tJTExfT1BUSU9OUy5maW5kKHNraWxsID0+IHNraWxsLnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyKSA/PyBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclZhbGlkU2tpbGxzKHJhd0FycjogYW55W10pOiBTa2lsbE9wdGlvbltdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHJhd0FycikpIHJldHVybiBbXTtcbiAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8U2tpbGxPcHRpb24+KCk7XG4gIGZvciAoY29uc3QgZW50IG9mIHJhd0Fycikge1xuICAgIGxldCBjYW5kaWRhdGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikgY2FuZGlkYXRlID0gZW50O1xuICAgIGVsc2UgaWYgKGVudC5uYW1lICYmIHR5cGVvZiBlbnQubmFtZSA9PT0gXCJzdHJpbmdcIikgY2FuZGlkYXRlID0gZW50Lm5hbWU7XG4gICAgaWYgKGNhbmRpZGF0ZSkge1xuICAgICAgY29uc3Qgbm9ybSA9IG5vcm1hbGl6ZVNraWxsKGNhbmRpZGF0ZSk7XG4gICAgICBpZiAobm9ybSkgc2Vlbi5hZGQobm9ybSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBbLi4uc2Vlbl07XG59XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBXaGljaCBGTV9LRVlTIGVhY2ggcGFyc2VyIHNob3VsZCBpbmNsdWRlIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNQRUxMX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIkxFVkVMXCIsXG4gIFwiU0NIT09MXCIsXG4gIFwiQ0FTVElOR19USU1FXCIsXG4gIFwiU1BFTExfUkFOR0VcIixcbiAgXCJEVVJBVElPTlwiLFxuICBcIlZFUkJBTFwiLFxuICBcIlNPTUFUSUNcIixcbiAgXCJNQVRFUklBTFwiLFxuICBcIkNPTVBPTkVOVFNcIixcbiAgXCJDT05DRU5UUkFUSU9OXCIsXG4gIFwiU09VUkNFXCIsXG5dO1xuXG5leHBvcnQgY29uc3QgU1BFQ0lFU19LRVlTOiBGTUtleVtdID0gW1xuICBcIlNQRUNJRVNcIixcbiAgXCJTSVpFXCIsXG4gIFwiU1BFRURcIixcbiAgXCJMQU5HVUFHRVNcIixcbiAgXCJUUkFJVFNcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTVFJfTU9EXCIsXG4gIFwiREVYX01PRFwiLFxuICBcIkNPTl9NT0RcIixcbiAgXCJJTlRfTU9EXCIsXG4gIFwiV0lTX01PRFwiLFxuICBcIkNIQV9NT0RcIixcbiAgXCJTS0lMTF9DSE9JQ0VfTElTVFwiLFxuICBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgXCJXRUFQT05fUFJPRklDSUVOQ0lFU1wiLFxuICBcIlNFTlNFU1wiLFxuICBcIkRBTUFHRV9SRVNcIixcbiAgXCJTT1VSQ0VcIixcbl07XG5cbmV4cG9ydCBjb25zdCBJVEVNX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlRZUEVcIixcbiAgXCJSQVJJVFlcIixcbiAgXCJDT1NUXCIsXG4gIFwiV0VJR0hUXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUFJPUEVSVElFU1wiLFxuICBcIkRBTUFHRVwiLFxuICBcIkRBTUFHRV9UWVBFU1wiLFxuICBcIlJBTkdFXCIsXG4gIFwiUkVMT0FEXCIsXG4gIFwiQU1NT19UWVBFXCIsXG4gIFwiQUNcIixcbiAgXCJTVEVBTFRIX0RJU0FEVkFOVEFHRVwiLFxuICBcIk1BR0lDQUxcIixcbiAgXCJBVFRVTkVNRU5UXCIsXG4gIFwiQVRUVU5FX1JFUVwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IEJFU1RJQVJZX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNJWkVcIixcbiAgXCJUWVBFXCIsXG4gIFwiQUxJR05NRU5UXCIsXG4gIFwiQUNcIixcbiAgXCJIUFwiLFxuICBcIlNQRUVEXCIsXG4gIFwiU1RSRU5HVEhcIixcbiAgXCJERVhURVJJVFlcIixcbiAgXCJDT05TVElUVVRJT05cIixcbiAgXCJJTlRFTExJR0VOQ0VcIixcbiAgXCJXSVNET01cIixcbiAgXCJDSEFSSVNNQVwiLFxuICBcIlNBVklOR19USFJPV1NcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTRU5TRVNcIixcbiAgXCJMQU5HVUFHRVNcIixcbiAgXCJDSEFMTEVOR0VfUkFUSU5HXCIsXG4gIFwiU09VUkNFXCIsXG5dO1xuXG5leHBvcnQgY29uc3QgQ0xBU1NfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiU1BFTExfQ0FTVF9NT0RcIixcbiAgXCJBUk1PUl9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiU0FWSU5HX1RIUk9XU1wiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU09VUkNFXCJcbl07XG5cbmV4cG9ydCBjb25zdCBCQUNLR1JPVU5EX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsICBcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU09VUkNFXCIsXG5dO1xuXG5leHBvcnQgY29uc3QgRkVBVFNfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJTT1VSQ0VcIlxuXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZpZWxkIHN1YnNldHMgZm9yIGVhY2ggcGFyc2VyIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNQRUxMX01FVEFfREVGUzogRmllbGREZWZbXSA9IFNQRUxMX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBTUEVMTF9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBTUEVDSUVTX01FVEFfREVGUzogRmllbGREZWZbXSA9IFNQRUNJRVNfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIFNQRUNJRVNfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgSVRFTV9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBJVEVNX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBJVEVNX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEJFU1RJQVJZX01FVEFfREVGUzogRmllbGREZWZbXSA9IEJFU1RJQVJZX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCRVNUSUFSWV9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBDTEFTU19NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBDTEFTU19LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQ0xBU1NfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgQkFDS0dST1VORF9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBCQUNLR1JPVU5EX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCQUNLR1JPVU5EX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEZFQVRTX01FVEFfREVGUzogRmllbGREZWZbXSA9IEZFQVRTX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCQUNLR1JPVU5EX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pOyIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBTUEVMTF9NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cblxuZXhwb3J0IGNvbnN0IFNDSE9PTF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEE6IFwiQWJqdXJhdGlvblwiLFxuICBDOiBcIkNvbmp1cmF0aW9uXCIsXG4gIEQ6IFwiRGl2aW5hdGlvblwiLFxuICBFOiBcIkVuY2hhbnRtZW50XCIsXG4gIFY6IFwiRXZvY2F0aW9uXCIsXG4gIEk6IFwiSWxsdXNpb25cIixcbiAgTjogXCJOZWNyb21hbmN5XCIsXG4gIFQ6IFwiVHJhbnNtdXRhdGlvblwiLFxufTtcblxuZnVuY3Rpb24gb3JkaW5hbChuOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBzdWZmaXggPSAobiA9PT0gMSkgPyBcInN0XCIgOiAobiA9PT0gMikgPyBcIm5kXCIgOiAobiA9PT0gMykgPyBcInJkXCIgOiBcInRoXCI7XG4gIHJldHVybiBgJHtufSR7c3VmZml4fWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRSYW5nZShyYW5nZTogYW55KTogc3RyaW5nIHtcbiAgaWYgKCFyYW5nZSkgcmV0dXJuIFwiXCI7XG5cbiAgaWYgKHR5cGVvZiByYW5nZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHJhbmdlO1xuXG4gIGlmIChyYW5nZS50eXBlID09PSBcInNwZWNpYWxcIikgcmV0dXJuIFwiU3BlY2lhbFwiO1xuICBpZiAocmFuZ2UudHlwZSA9PT0gXCJwb2ludFwiICYmIHJhbmdlLmRpc3RhbmNlKSB7XG4gICAgY29uc3QgZGlzdCA9IHJhbmdlLmRpc3RhbmNlO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwidG91Y2hcIikgcmV0dXJuIFwiVG91Y2hcIjtcbiAgICBpZiAoZGlzdC50eXBlID09PSBcInNlbGZcIikgcmV0dXJuIFwiU2VsZlwiO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwic2lnaHRcIikgcmV0dXJuIFwiU2lnaHRcIjtcbiAgICBpZiAoZGlzdC5hbW91bnQpIHJldHVybiBgJHtkaXN0LmFtb3VudH0gJHtkaXN0LnR5cGV9YDtcbiAgfVxuXG4gIHJldHVybiBcIlZhcmllc1wiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGltZSh0aW1lOiBhbnlbXSk6IHN0cmluZyB7XG4gIGlmICghQXJyYXkuaXNBcnJheSh0aW1lKSkgcmV0dXJuIFwiXCI7XG5cbiAgcmV0dXJuIHRpbWUubWFwKHQgPT4gYCR7dC5udW1iZXJ9ICR7dC51bml0fWApLmpvaW4oXCIsIFwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdER1cmF0aW9uKGR1cmF0aW9uOiBhbnlbXSk6IHN0cmluZyB7XG4gIGlmICghQXJyYXkuaXNBcnJheShkdXJhdGlvbikpIHJldHVybiBcIlwiO1xuXG4gIHJldHVybiBkdXJhdGlvbi5tYXAoZCA9PiB7XG4gICAgaWYgKGQudHlwZSA9PT0gXCJpbnN0YW50XCIpIHJldHVybiBcIkluc3RhbnRhbmVvdXNcIjtcbiAgICBpZiAoZC50eXBlID09PSBcInRpbWVkXCIgJiYgZC5kdXJhdGlvbikge1xuICAgICAgcmV0dXJuIGAke2QuZHVyYXRpb24uYW1vdW50fSAke2QuZHVyYXRpb24udHlwZX0ke2QuY29uY2VudHJhdGlvbiA/IFwiIChjb25jZW50cmF0aW9uKVwiIDogXCJcIn1gO1xuICAgIH1cbiAgICBpZiAoZC50eXBlID09PSBcInBlcm1hbmVudFwiKSByZXR1cm4gXCJQZXJtYW5lbnRcIjtcbiAgICByZXR1cm4gXCJTcGVjaWFsXCI7XG4gIH0pLmpvaW4oXCIsIFwiKTtcbn1cbi8vIGluIHBhcnNlcnMvNWUtanNvbi9wYXJzZVNwZWxsc0ZpbGUudHMgKG9yIHdoZXJldmVyIGZvcm1hdENvbXBvbmVudHMgbGl2ZXMpXG5cbmZ1bmN0aW9uIGZvcm1hdENvbXBvbmVudHMoY29tcG9uZW50czogYW55KTogc3RyaW5nIHtcbiAgaWYgKCFjb21wb25lbnRzKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICBpZiAoY29tcG9uZW50cy52KSBwYXJ0cy5wdXNoKFwiVlwiKTtcbiAgaWYgKGNvbXBvbmVudHMucykgcGFydHMucHVzaChcIlNcIik7XG5cbiAgaWYgKGNvbXBvbmVudHMubSkge1xuICAgIC8vIHB1bGwgb3V0IHRoZSBhY3R1YWwgbWF0ZXJpYWwgdGV4dChzKVxuICAgIGxldCBtYXREZXRhaWxzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29tcG9uZW50cy5tKSkge1xuICAgICAgbWF0RGV0YWlscyA9IGNvbXBvbmVudHMubVxuICAgICAgICAubWFwKChpdGVtOmFueSkgPT5cbiAgICAgICAgICB0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBpdGVtXG4gICAgICAgICAgICA6IGl0ZW0gJiYgdHlwZW9mIGl0ZW0udGV4dCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBpdGVtLnRleHRcbiAgICAgICAgICAgIDogbnVsbFxuICAgICAgICApXG4gICAgICAgIC5maWx0ZXIoKHQ6YW55KTogdCBpcyBzdHJpbmcgPT4gISF0KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb21wb25lbnRzLm0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG1hdERldGFpbHMgPSBbY29tcG9uZW50cy5tXTtcbiAgICB9IGVsc2UgaWYgKGNvbXBvbmVudHMubS50ZXh0KSB7XG4gICAgICBtYXREZXRhaWxzID0gW2NvbXBvbmVudHMubS50ZXh0XTtcbiAgICB9XG5cbiAgICAvLyBidWlsZCB0aGUgXHUyMDFDTVx1MjAxRCBlbnRyeSwgYXBwZW5kaW5nIGRldGFpbHMgaWYgYW55XG4gICAgY29uc3QgbWF0UGFydCA9XG4gICAgICBtYXREZXRhaWxzLmxlbmd0aCA+IDBcbiAgICAgICAgPyBgTSAoJHttYXREZXRhaWxzLmpvaW4oXCIsIFwiKX0pYFxuICAgICAgICA6IFwiTVwiO1xuXG4gICAgcGFydHMucHVzaChtYXRQYXJ0KTtcbiAgfVxuXG4gIHJldHVybiBwYXJ0cy5qb2luKFwiLCBcIik7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3BlbGxzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIWpzb24uc3BlbGwpIHJldHVybiBbXTtcblxuICAvLyBtYWtlIGVkaXRpb25JZCBhdmFpbGFibGUgZm9yIG91ciBTT1VSQ0UgY29udmVydGVyXG4gIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuICByZXR1cm4ganNvbi5zcGVsbC5tYXAoKHNwZWxsOiBhbnkpID0+IHtcbiAgICAvLyBcdTIwMTQgZ2F0aGVyIGRhdGEgZm9yIGhlYWRlci9ib2R5L2Zvb3RlciBhcyBiZWZvcmUgXHUyMDE0XG4gICAgY29uc3Qgc291cmNlcyA9IHNwZWxsLnNvdXJjZVxuICAgICAgPyBBcnJheS5pc0FycmF5KHNwZWxsLnNvdXJjZSkgPyBzcGVsbC5zb3VyY2UgOiBbc3BlbGwuc291cmNlXVxuICAgICAgOiBbXCJ1bmtub3duXCJdO1xuICAgIGNvbnN0IG5hbWUgPSBzcGVsbC5uYW1lO1xuICAgIGNvbnN0IHNjaG9vbCA9IFNDSE9PTF9NQVBbc3BlbGwuc2Nob29sXSA/PyBzcGVsbC5zY2hvb2w7XG4gICAgY29uc3QgbGV2ZWwgPSBzcGVsbC5sZXZlbDtcbiAgICBjb25zdCByYW5nZSA9IGZvcm1hdFJhbmdlKHNwZWxsLnJhbmdlKTtcbiAgICBjb25zdCBjYXN0aW5nVGltZSA9IGZvcm1hdFRpbWUoc3BlbGwudGltZSk7XG4gICAgY29uc3QgZHVyYXRpb24gPSBmb3JtYXREdXJhdGlvbihzcGVsbC5kdXJhdGlvbik7XG4gICAgY29uc3QgZm9ybWF0dGVkU291cmNlcyA9IHNvdXJjZXMubWFwKChzOiBzdHJpbmcpID0+IGdldEZ1bGxTb3VyY2VOYW1lKHMsIGVkaXRpb25JZCkpO1xuXG4gICAgY29uc3QgYXR0YWNrVHlwZSA9IHNwZWxsLmF0dGFja1R5cGUgfHwgXCJcIjtcbiAgICBjb25zdCBkYW1hZ2VUeXBlID0gc3BlbGwuZGFtYWdlSW5mbGljdD8uWzBdIHx8IFwiVGVsZXBvcnRhdGlvblwiO1xuICAgIGNvbnN0IHJpdHVhbCA9IHNwZWxsLnJpdHVhbCA9PT0gdHJ1ZTtcbiAgICBjb25zdCBjb25jZW50cmF0aW9uID0gc3BlbGwuZHVyYXRpb24/LnNvbWUoKGQ6IGFueSkgPT4gZC5jb25jZW50cmF0aW9uKSA/PyBmYWxzZTtcblxuY29uc3QgRk0gICA9IGJ1aWxkRk0oc3BlbGwsIFNQRUxMX01FVEFfREVGUyk7XG5jb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoRk0sIFNQRUxMX01FVEFfREVGUyk7XG5cbiAgICAvLyBcdTIwMTQgdGl0bGUvc3VidGl0bGUgYW5kIGJvZHkgbGF5b3V0IFx1MjAxNFxuICAgIGNvbnN0IHNhZmVOYW1lID0gbmFtZS5yZXBsYWNlKC9cXC8vZywgXCItXCIpO1xuICAgIGNvbnN0IHRpdGxlID0gYCMgJHtuYW1lfWA7XG4gICAgY29uc3QgbGV2ZWxMYWJlbCA9XG4gICAgICBsZXZlbCA9PT0gMFxuICAgICAgICA/IGAke3NjaG9vbH0gQ2FudHJpcGBcbiAgICAgICAgOiBgJHtvcmRpbmFsKGxldmVsKX0tbGV2ZWwgJHtzY2hvb2x9IFNwZWxsYDtcbiAgICBjb25zdCBzdWJ0aXRsZSA9IGAjIyMgKiR7bGV2ZWxMYWJlbH0qJHtjb25jZW50cmF0aW9uID8gXCIgKihDb25jZW50cmF0aW9uKSpcIiA6IFwiXCJ9YDtcblxuICAgIGNvbnN0IGhlYWRlckxpbmVzID0gW1xuICAgICAgdGl0bGUsXG4gICAgICBzdWJ0aXRsZSxcbiAgICAgIGAqKkNhc3RpbmcgVGltZToqKiAke2Nhc3RpbmdUaW1lfWAsXG4gICAgICBgKipSYW5nZToqKiAke3JhbmdlfWAsXG4gICAgICBgKipDb21wb25lbnRzOioqICR7Zm9ybWF0Q29tcG9uZW50cyhzcGVsbC5jb21wb25lbnRzKX1gLFxuICAgICAgYCoqRHVyYXRpb246KiogJHtkdXJhdGlvbn1gLFxuICAgIF07XG5cbiAgICBjb25zdCBib2R5TGluZXMgPSBbXG4gICAgICAuLi4oKHNwZWxsLmVudHJpZXMgPz8gW10pLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkpLFxuICAgICAgLi4uKChzcGVsbC5lbnRyaWVzSGlnaGVyTGV2ZWwgPz8gW10pLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkpLFxuICAgIF07XG5cbiAgICBjb25zdCBmb290ZXJMaW5lcyA9IFtcbiAgICAgIGAtLS1gLFxuICAgICAgYCoqU291cmNlOioqICR7Zm9ybWF0dGVkU291cmNlcy5qb2luKFwiLCBcIil9YCxcbiAgICBdO1xuXG4gICAgLy8gXHUyMDE0IGFzc2VtYmxlIHRoZSBub3RlIHdpdGggWUFNTCBmcm9udG1hdHRlciBcdTIwMTRcbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDogYCR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgYC0tLVxcbiR7eWFtbH1cXG4tLS1gLFxuICAgICAgICBoZWFkZXJMaW5lcy5qb2luKFwiXFxuXCIpLFxuICAgICAgICBgYCxcbiAgICAgICAgYm9keUxpbmVzLmpvaW4oXCJcXG5cXG5cIiksXG4gICAgICAgIGBgLFxuICAgICAgICBmb290ZXJMaW5lcy5qb2luKFwiXFxuXCIpLFxuICAgICAgXS5qb2luKFwiXFxuXCIpLFxuICAgIH07XG4gIH0pO1xufVxuXG4iLCAiaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQge1xuICBidWlsZEZNLFxuICBzZXJpYWxpemVGcm9udG1hdHRlcixcbiAgRk1fRklFTERTLFxuICBTUEVDSUVTX01FVEFfREVGUyxcbiAgU0laRV9NQVAsXG59IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IGZvcm1hdEVudHJ5IH0gZnJvbSBcIi4vaGVscGVycy9mb3JtYXRFbnRyeVwiO1xuXG5mdW5jdGlvbiBzbHVnKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBuYW1lXG4gICAgLnJlcGxhY2UoLzsvZywgXCI6XCIpICAgICAgIC8vIHNlbWljb2xvbiBcdTIxOTIgZGFzaFxuICAgIC5yZXBsYWNlKC9bXFwvOlwiXS9nLCBcIjpcIikgIC8vIHNsYXNoLCBjb2xvbiwgcXVvdGUgXHUyMTkyIGRhc2hcbiAgICAudHJpbSgpO1xufVxuXG5jb25zdCBCTE9DS0VEX1RSQUlUUyA9IFtcIkFnZVwiLCBcIlNpemVcIiwgXCJMYW5ndWFnZXNcIiwgXCJDcmVhdHVyZSBUeXBlXCIsIFwiU3BlZWRcIl07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNwZWNpZXNGaWxlKFxuICBqc29uOiB7IHJhY2U6IGFueVtdOyBzdWJyYWNlPzogYW55W107IF9lZGl0aW9uSWQ/OiBzdHJpbmcgfSxcbiAgZWRpdGlvbklkOiBzdHJpbmdcbik6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24ucmFjZSkpIHJldHVybiBbXTtcbiAganNvbi5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4gIC8vIDEpIEZpbHRlciBvdXQgcmVwcmludHNcbiAgY29uc3QgcmF3VmFyaWFudHMgPSBqc29uLnJhY2UuZmlsdGVyKChyOiBhbnkpID0+XG4gICAgIShcInJlcHJpbnRlZEFzXCIgaW4gcikgJiZcbiAgICAhL1xcKCg/OkthbGFkZXNofFplbmRpa2FyfEFtb25raGV0fElubmlzdHJhZHxJeGFsYW4pXFwpJC8udGVzdChyLm5hbWUpXG4gICk7XG5cbiAgLy8gMikgR3JvdXAgYnkgcmFjZSBuYW1lXG4gIGNvbnN0IGJ5TmFtZSA9IG5ldyBNYXA8c3RyaW5nLCBhbnlbXT4oKTtcbiAgZm9yIChjb25zdCByIG9mIHJhd1ZhcmlhbnRzKSB7XG4gICAgY29uc3QgbGlzdCA9IGJ5TmFtZS5nZXQoci5uYW1lKSA/PyBbXTtcbiAgICBsaXN0LnB1c2gocik7XG4gICAgYnlOYW1lLnNldChyLm5hbWUsIGxpc3QpO1xuICB9XG5cbiAgLy8gMykgQWxsIHN1YnJhY2VzIGFycmF5XG4gIGNvbnN0IHN1YnJhY2VzTGlzdCA9IEFycmF5LmlzQXJyYXkoanNvbi5zdWJyYWNlKSA/IGpzb24uc3VicmFjZSA6IFtdO1xuXG4gIGNvbnN0IG91dDogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICAvLyA0KSBNYWluIGxvb3Agb3ZlciBlYWNoIHNwZWNpZXNcbiAgZm9yIChjb25zdCBbcmFjZU5hbWUsIHJhY2VWYXJpYW50c10gb2YgYnlOYW1lLmVudHJpZXMoKSkge1xuICAgIGNvbnN0IHNhZmVOYW1lID0gc2x1ZyhyYWNlTmFtZSk7XG5cbiAgICAvLyBwaWNrIHRoZSBcdTIwMUNmdWxsZXN0XHUyMDFEIHZhcmlhbnQgYXMgcHJpbWFyeVxuICAgIGNvbnN0IHByaW1hcnkgPSByYWNlVmFyaWFudHMucmVkdWNlKFxuICAgICAgKGJlc3QsIGN1cikgPT5cbiAgICAgICAgT2JqZWN0LmtleXMoY3VyKS5sZW5ndGggPiBPYmplY3Qua2V5cyhiZXN0KS5sZW5ndGggPyBjdXIgOiBiZXN0LFxuICAgICAgcmFjZVZhcmlhbnRzWzBdXG4gICAgKTtcblxuICAgIC8vIG9uZVx1MjAxMG9mZjogZ3JhZnQgSHVtYW4gYWJpbGl0eSBpZiBtaXNzaW5nXG4gICAgaWYgKCFwcmltYXJ5LmFiaWxpdHkpIHtcbiAgICAgIGNvbnN0IGh1bWFuRW50cnkgPSBzdWJyYWNlc0xpc3QuZmluZCgoc3I6IGFueSkgPT5cbiAgICAgICAgc3IucmFjZU5hbWUgPT09IHJhY2VOYW1lICYmXG4gICAgICAgIHNyLnJhY2VTb3VyY2UgPT09IHByaW1hcnkuc291cmNlICYmXG4gICAgICAgICEoXCJuYW1lXCIgaW4gc3IpICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkoc3IuYWJpbGl0eSlcbiAgICAgICk7XG4gICAgICBpZiAoaHVtYW5FbnRyeSkgcHJpbWFyeS5hYmlsaXR5ID0gaHVtYW5FbnRyeS5hYmlsaXR5O1xuICAgIH1cblxuICAgIC8vIGJ1aWxkIGZyb250bWF0dGVyXG4gICAgY29uc3QgZm0gPSBidWlsZEZNKHByaW1hcnksIFNQRUNJRVNfTUVUQV9ERUZTKTtcbiAgICBjb25zdCBzZW5zZXM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKHByaW1hcnkuZGFya3Zpc2lvbikgIHNlbnNlcy5wdXNoKGBEYXJrdmlzaW9uICR7cHJpbWFyeS5kYXJrdmlzaW9ufSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS5ibGluZHNpZ2h0KSAgc2Vuc2VzLnB1c2goYEJsaW5kc2lnaHQgJHtwcmltYXJ5LmJsaW5kc2lnaHR9IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LnRyZW1vcnNlbnNlKSBzZW5zZXMucHVzaChgVHJlbW9yc2Vuc2UgJHtwcmltYXJ5LnRyZW1vcnNlbnNlfSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS50cnVlc2lnaHQpICAgc2Vuc2VzLnB1c2goYFRydWVzaWdodCAke3ByaW1hcnkudHJ1ZXNpZ2h0fSBmdC5gKTtcbiAgICBpZiAoc2Vuc2VzLmxlbmd0aCkgZm0uc2Vuc2VzID0gc2Vuc2VzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZtLnRyYWl0cykpIHtcbiAgICAgIGZtLnRyYWl0cyA9IGZtLnRyYWl0cy5maWx0ZXIodCA9PiAhQkxPQ0tFRF9UUkFJVFMuaW5jbHVkZXModCkpO1xuICAgIH1cbiAgICBjb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIFNQRUNJRVNfTUVUQV9ERUZTKTtcblxuICAgIC8vIGJ1aWxkIHNwZWNpZXMgYm9keVxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxpbmVzLnB1c2goYCMgJHtyYWNlTmFtZX1gLCBgIyMgU3RhdHNgKTtcblxuICAgIC8vIFNpemVcbiAgICBjb25zdCBzaXplID0gQXJyYXkuaXNBcnJheShwcmltYXJ5LnNpemUpXG4gICAgICA/IHByaW1hcnkuc2l6ZS5tYXAoKHM6IHN0cmluZykgPT4gU0laRV9NQVBbc10gfHwgcykuam9pbihcIi9cIilcbiAgICAgIDogU0laRV9NQVBbcHJpbWFyeS5zaXplXSA/PyBwcmltYXJ5LnNpemU7XG4gICAgbGluZXMucHVzaChgKipTaXplOioqICR7c2l6ZX1gKTtcblxuICAgIC8vIFNwZWVkXG4gICAgY29uc3Qgc3BlZWQgPSB0eXBlb2YgcHJpbWFyeS5zcGVlZCA9PT0gXCJudW1iZXJcIlxuICAgICAgPyBwcmltYXJ5LnNwZWVkXG4gICAgICA6IHByaW1hcnkuc3BlZWQ/LndhbGsgPz8gcHJpbWFyeS5zcGVlZD8uYmFzZSA/PyAwO1xuICAgIGxpbmVzLnB1c2goYCoqU3BlZWQ6KiogJHtzcGVlZH0gZnQuIHdhbGtpbmdgKTtcblxuICAgIC8vIEFiaWxpdGllc1xuICAgIGNvbnN0IGtpZHMgPSBzdWJyYWNlc0xpc3QuZmlsdGVyKHNyID0+XG4gICAgICBzci5uYW1lICYmIHNyLnJhY2VOYW1lID09PSByYWNlTmFtZSAmJiBzci5yYWNlU291cmNlID09PSBwcmltYXJ5LnNvdXJjZVxuICAgICk7XG4gICAgY29uc3QgcmF3QWJpbGl0eSA9IEFycmF5LmlzQXJyYXkocHJpbWFyeS5hYmlsaXR5KVxuICAgICAgPyBwcmltYXJ5LmFiaWxpdHlcbiAgICAgIDogQXJyYXkuaXNBcnJheShraWRzWzBdPy5hYmlsaXR5KSA/IGtpZHNbMF0uYWJpbGl0eSA6IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHJhd0FiaWxpdHkpICYmIHJhd0FiaWxpdHkubGVuZ3RoKSB7XG4gICAgICBjb25zdCBib251c2VzID0geyBzdHI6MCxkZXg6MCxjb246MCxpbnQ6MCx3aXM6MCxjaGE6MCB9O1xuICAgICAgbGV0IGNob29zZU9wdDogYW55ID0gbnVsbDtcbiAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHJhd0FiaWxpdHkpIHtcbiAgICAgICAgaWYgKFwiY2hvb3NlXCIgaW4gb2JqKSBjaG9vc2VPcHQgPSBvYmouY2hvb3NlO1xuICAgICAgICBlbHNlIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkgKGJvbnVzZXMgYXMgYW55KVtrXSArPSB2IGFzIG51bWJlcjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhaXJzID0gT2JqZWN0LmVudHJpZXMoYm9udXNlcykgYXMgW3N0cmluZyxudW1iZXJdW107XG4gICAgICBjb25zdCBwYXJ0cyA9IHBhaXJzLmZpbHRlcigoWyx2XSk9PnYhPT0wKS5tYXAoKFtrLHZdKT0+YCR7ay50b1VwcGVyQ2FzZSgpfSAke3Y+PTA/XCIrXCI6XCJcIn0ke3Z9YCk7XG4gICAgICBpZiAoY2hvb3NlT3B0Py5jb3VudCAmJiBBcnJheS5pc0FycmF5KGNob29zZU9wdC5mcm9tKSkge1xuICAgICAgICBwYXJ0cy5wdXNoKGBDSE9PU0UgJHtjaG9vc2VPcHQuY291bnR9IGZyb20gJHtjaG9vc2VPcHQuZnJvbS5tYXAoKHM6c3RyaW5nKT0+cy50b1VwcGVyQ2FzZSgpKS5qb2luKFwiLCBcIil9YCk7XG4gICAgICB9XG4gICAgICBpZiAocGFydHMubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKkFiaWxpdHkgU2NvcmVzOioqICR7cGFydHMuam9pbihcIiwgXCIpfWApO1xuICAgIH1cblxuICAgIC8vIExhbmd1YWdlc1xuICAgIGNvbnN0IGxhbmdzID0gZm0ubGFuZ3VhZ2VzIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBpZiAobGFuZ3M/Lmxlbmd0aCkgbGluZXMucHVzaChgKipMYW5ndWFnZXM6KiogJHtsYW5ncy5qb2luKFwiLCBcIil9YCk7XG5cbiAgICAvLyBTa2lsbHNcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwcmltYXJ5LnNraWxsUHJvZmljaWVuY2llcykpIHtcbiAgICAgIGNvbnN0IHNraWxsTGFiZWxzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZm9yIChjb25zdCBlIG9mIHByaW1hcnkuc2tpbGxQcm9maWNpZW5jaWVzIGFzIGFueVtdKSB7XG4gICAgICAgIGlmIChlLmNob29zZT8uZnJvbSkge1xuICAgICAgICAgIHNraWxsTGFiZWxzLnB1c2goYENob29zZSBmcm9tOiAke2UuY2hvb3NlLmZyb20ubWFwKChzOnN0cmluZyk9PnMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrcy5zbGljZSgxKSkuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHZhbCA9IGUucHJvZmljaWVuY3kgPz8gZS5uYW1lID8/IGU7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIpIHNraWxsTGFiZWxzLnB1c2godmFsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3ZhbC5zbGljZSgxKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChza2lsbExhYmVscy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqU2tpbGwgUHJvZmljaWVuY2llczoqKiAke3NraWxsTGFiZWxzLmpvaW4oXCI7IFwiKX1gKTtcbiAgICB9XG5cbiAgICAvLyBUb29sIC8gV2VhcG9uIC8gQXJtb3JcbiAgICBjb25zdCB0cCA9IGZtW0ZNX0ZJRUxEUy5UT09MX1BST0ZJQ0lFTkNJRVNdIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBjb25zdCB3cCA9IGZtW0ZNX0ZJRUxEUy5XRUFQT05fUFJPRklDSUVOQ0lFU10gYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGNvbnN0IGFwID0gZm1bRk1fRklFTERTLkFSTU9SX1BST0ZJQ0lFTkNJRVNdIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBpZiAodHA/Lmxlbmd0aCkgbGluZXMucHVzaChgKipUb29sIFByb2ZpY2llbmNpZXM6KiogJHt0cC5qb2luKFwiLCBcIil9YCk7XG4gICAgaWYgKHdwPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqV2VhcG9uIFByb2ZpY2llbmNpZXM6KiogJHt3cC5qb2luKFwiLCBcIil9YCk7XG4gICAgaWYgKGFwPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqQXJtb3IgUHJvZmljaWVuY2llczoqKiAke2FwLmpvaW4oXCIsIFwiKX1gKTtcblxuICAgIC8vIFRyYWl0c1xuICAgIGxpbmVzLnB1c2goYCMjIFRyYWl0c2ApO1xuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBmb3IgKGNvbnN0IHRyYWl0IG9mIGZtLnRyYWl0cyBhcyBzdHJpbmdbXXx8W10pIHtcbiAgICAgIGxpbmVzLnB1c2goYCMjIyMjICR7dHJhaXR9YCk7XG4gICAgICBjb25zdCBlbnQgPSBwcmltYXJ5LmVudHJpZXM/LmZpbmQoKGU6YW55KT0+ZS5uYW1lPT09dHJhaXQpO1xuICAgICAgaWYgKGVudD8uZW50cmllcykge1xuICAgICAgICBlbnQuZW50cmllcy5mb3JFYWNoKChzdWI6YW55LGlkeDpudW1iZXIpPT57XG4gICAgICAgICAgbGV0IGJsazpzdHJpbmd8dW5kZWZpbmVkO1xuICAgICAgICAgIGlmIChzdWIudHlwZT09PVwidGFibGVcIikgICAgICAgYmxrID0gcmVuZGVyTWFya2Rvd25UYWJsZShzdWIpO1xuICAgICAgICAgIGVsc2UgaWYgKHN1Yi50eXBlPT09XCJsaXN0XCIpICAgYmxrID0gc3ViLml0ZW1zLm1hcCgoaXQ6YW55KT0+dHlwZW9mIGl0PT09XCJzdHJpbmdcIj9gLSAke3JlcGxhY2U1ZVRhZ3MoaXQpfWA6YC0gJHtpdC5uYW1lfWAgKS5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzdWI9PT1cInN0cmluZ1wiKSBibGsgPSByZXBsYWNlNWVUYWdzKHN1Yik7XG4gICAgICAgICAgaWYgKGJsayAmJiAhc2Vlbi5oYXMoYmxrKSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChibGspO1xuICAgICAgICAgICAgc2Vlbi5hZGQoYmxrKTtcbiAgICAgICAgICAgIGlmIChlbnQuZW50cmllcy5sZW5ndGg+MSAmJiBpZHg8ZW50LmVudHJpZXMubGVuZ3RoLTEpIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgTm93IGJyYW5jaCBvbiBzdWJyYWNlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBzdWJzID0ga2lkczsgIC8vIGFscmVhZHkgZmlsdGVyZWRcbiAgICBpZiAoc3Vicy5sZW5ndGgpIHtcbiAgICAgIC8vIDEpIG1haW4gZmlsZSBpbiBmb2xkZXJcbiAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgcGF0aDogYFNwZWNpZXMvJHtzYWZlTmFtZX0vJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgICBjb250ZW50OiBgLS0tXFxuJHt5YW1sfVxcbi0tLVxcblxcbiR7bGluZXMuam9pbihcIlxcblwiKX1gLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIDIpIGVhY2ggc3Vic3BlY2llc1xuICAgICAgY29uc3Qgc3ViRm9sZGVyID0gYFNwZWNpZXMvJHtzYWZlTmFtZX0vU3Vic3BlY2llc2A7XG4gICAgICBmb3IgKGNvbnN0IHNyIG9mIHN1YnMpIHtcbiAgICAgICAgLy8gdHVybiBzZW1pY29sb25zIFx1MjE5MiBjb2xvbnNcbiAgICAgICAgY29uc3QgZGlzcGxheSA9IHNyLm5hbWUucmVwbGFjZSgvOy9nLCBcIjpcIik7XG4gICAgICAgIGNvbnN0IHN1YkxpbmVzOiBzdHJpbmdbXSA9IFtgIyAke2Rpc3BsYXl9YF07XG5cbiAgICAgICAgLy8gY29weSBTdGF0cyBibG9jayBpZiB5b3UgbGlrZTpcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3IuYWJpbGl0eSkpIHtcbiAgICAgICAgICBjb25zdCBib251c2VzID0geyBzdHI6MCxkZXg6MCxjb246MCxpbnQ6MCx3aXM6MCxjaGE6MCB9O1xuICAgICAgICAgIGxldCBjaG9vc2VPcHQ6YW55ID0gbnVsbDtcbiAgICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiBzci5hYmlsaXR5KSB7XG4gICAgICAgICAgICBpZiAoXCJjaG9vc2VcIiBpbiBvYmopIGNob29zZU9wdCA9IG9iai5jaG9vc2U7XG4gICAgICAgICAgICBlbHNlIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkgKGJvbnVzZXMgYXMgYW55KVtrXSs9diBhcyBudW1iZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhaXJzID0gT2JqZWN0LmVudHJpZXMoYm9udXNlcykgYXMgW3N0cmluZyxudW1iZXJdW107XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBwYWlycy5maWx0ZXIoKFssdl0pPT52IT09MCkubWFwKChbayx2XSk9PmAke2sudG9VcHBlckNhc2UoKX0gJHt2Pj0wP1wiK1wiOlwiXCJ9JHt2fWApO1xuICAgICAgICAgIGlmIChjaG9vc2VPcHQ/LmNvdW50KSBwYXJ0cy5wdXNoKGBDSE9PU0UgJHtjaG9vc2VPcHQuY291bnR9IGZyb20gJHsoY2hvb3NlT3B0LmZyb20gYXMgc3RyaW5nW10pLm1hcChzPT5zLnRvVXBwZXJDYXNlKCkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgICBpZiAocGFydHMubGVuZ3RoKSBzdWJMaW5lcy5wdXNoKGAqKkFiaWxpdHkgU2NvcmVzOioqICR7cGFydHMuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhlbiB0cmFpdHMvZW50cmllc1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHNyLmVudHJpZXMgfHwgW10pIHtcbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGVudHJ5KSk7XG4gICAgICAgICAgc3ViTGluZXMucHVzaChcIlwiKTsgLy8gb3B0aW9uYWwgYmxhbmsgbGluZSBiZXR3ZWVuIGZlYXR1cmVzXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdWJZYW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoYnVpbGRGTShzciwgU1BFQ0lFU19NRVRBX0RFRlMpLCBTUEVDSUVTX01FVEFfREVGUyk7XG4gICAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgICBwYXRoOiBgJHtzdWJGb2xkZXJ9LyR7c2x1Zyhzci5uYW1lKX0ubWRgLFxuICAgICAgICAgIGNvbnRlbnQ6IGAtLS1cXG4ke3N1YllhbWx9XFxuLS0tXFxuXFxuJHtzdWJMaW5lcy5qb2luKFwiXFxuXCIpfWAsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBubyBzdWJyYWNlcyBcdTIxRDIgYSBzaW5nbGUgZmxhdCBmaWxlXG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHBhdGg6IGBTcGVjaWVzLyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudDogYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIDUpIFNvcnQgJiByZXR1cm5cbiAgcmV0dXJuIG91dC5zb3J0KChhLCBiKSA9PiBhLnBhdGgubG9jYWxlQ29tcGFyZShiLnBhdGgpKTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgXG4gIGJ1aWxkRk0sIFxuICBzZXJpYWxpemVGcm9udG1hdHRlciwgXG4gIENMQVNTX01FVEFfREVGUywgXG4gIHVuaWZpZWRUb29sUHJvZnMsIFxuICB1bmlmaWVkV2VhcG9uUHJvZnMsIFxuICBTa2lsbE9wdGlvbixcbiAgdW5pZmllZFNraWxscyxcbiAgU0tJTExfT1BUSU9OUywgXG4gIEZNX0ZJRUxEU1xufSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5cbmZ1bmN0aW9uIGZvcm1hdEZlYXR1cmVMaW5rKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgaWdub3JlID0gW1wiQWJpbGl0eSBTY29yZSBJbXByb3ZlbWVudFwiLCBcIkFyY2hldHlwZSBGZWF0dXJlXCIsIFwiU3ViY2xhc3MgRmVhdHVyZVwiXTtcbiAgICBpZiAoaWdub3JlLnNvbWUoc3ViID0+IG5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdWIudG9Mb3dlckNhc2UoKSkpKSB7XG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG4gIFxuICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgXCJcIikgICAgICAgICAgIC8vIHJlbW92ZSBwdW5jdHVhdGlvbiAoa2VlcCBzcGFjZXMpXG4gICAgICAucmVwbGFjZSgvLS9nLCBcIiBcIikgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGRhc2hlc1xuICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpICAgICAgICAgICAgICAvLyBub3JtYWxpemUgd2hpdGVzcGFjZVxuICAgICAgLnRyaW0oKVxuICAgICAgLnJlcGxhY2UoL1xcYlxcdy9nLCBsID0+IGwudG9VcHBlckNhc2UoKSk7IC8vIGNhcGl0YWxpemUgd29yZHNcbiAgXG4gICAgcmV0dXJuIGBbWyMke2FuY2hvcn1dXWA7XG4gIH1cbiAgXG5leHBvcnQgY29uc3QgT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIEFJOiAgIFwiQXJ0aWZpY2VyIEluZnVzaW9uXCIsXG4gIEVEOiAgIFwiRWxlbWVudGFsIERpc2NpcGxpbmVcIixcbiAgRUk6ICAgXCJFbGRyaXRjaCBJbnZvY2F0aW9uXCIsXG4gIE1NOiAgIFwiTWV0YW1hZ2ljXCIsXG4gIE1WOiAgIFwiTWFuZXV2ZXJcIixcbiAgXCJNVjpCXCI6ICAgIFwiTWFuZXV2ZXIsIEJhdHRsZSBNYXN0ZXJcIixcbiAgXCJNVjpDMi1VQVwiOlwiTWFuZXV2ZXIsIENhdmFsaWVyIFYyIChVQSlcIixcbiAgXCJBUzpWMS1VQVwiOlwiQXJjYW5lIFNob3QsIFYxIChVQSlcIixcbiAgXCJBUzpWMi1VQVwiOlwiQXJjYW5lIFNob3QsIFYyIChVQSlcIixcbiAgQVM6ICAgXCJBcmNhbmUgU2hvdFwiLFxuICBPVEg6ICBcIk90aGVyXCIsXG4gIFwiRlM6RlwiOlwiRmlnaHRpbmcgU3R5bGU7IEZpZ2h0ZXJcIixcbiAgXCJGUzpCXCI6XCJGaWdodGluZyBTdHlsZTsgQmFyZFwiLFxuICBcIkZTOlBcIjpcIkZpZ2h0aW5nIFN0eWxlOyBQYWxhZGluXCIsXG4gIFwiRlM6UlwiOlwiRmlnaHRpbmcgU3R5bGU7IFJhbmdlclwiLFxuICBQQjogICBcIlBhY3QgQm9vblwiLFxuICBPUjogICBcIk9ub21hbmN5IFJlc29uYW50XCIsXG4gIFJOOiAgIFwiUnVuZSBLbmlnaHQgUnVuZVwiLFxuICBBRjogICBcIkFsY2hlbWljYWwgRm9ybXVsYVwiLFxuICBUVDogICBcIlRyYXZlbGVyJ3MgVHJpY2tcIixcbn07XG4gIFxuICBmdW5jdGlvbiByZW5kZXJFbnRyaWVzKGVudHJpZXM6IGFueVtdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZW50cmllcy5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGVudHJ5KTtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGlmIChlbnRyeS50eXBlID09PSBcInJlZkNsYXNzRmVhdHVyZVwiKSB7XG4gICAgICAgICAgY29uc3QgW25hbWVdID0gZW50cnkuY2xhc3NGZWF0dXJlLnNwbGl0KFwifFwiKTtcbiAgICAgICAgICByZXR1cm4gYCpTZWUgZmVhdHVyZTogKioke25hbWV9KioqYDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIGVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyB8fCBbXSk7XG4gICAgICAgICAgcmV0dXJuIGAqKiR7ZW50cnkubmFtZX0qKlxcblxcbiR7aW5uZXJ9YDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwiaW5zZXRcIiAmJiBlbnRyeS5uYW1lKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJFbnRyaWVzKGVudHJ5LmVudHJpZXMgfHwgW10pO1xuICAgICAgICAgIHJldHVybiBgPiAqKiR7ZW50cnkubmFtZX0qKlxcbj5cXG4+ICR7aW5uZXIuc3BsaXQoXCJcXG5cIikuam9pbihcIlxcbj4gXCIpfWA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIC8vIGZhbGxiYWNrXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9KS5maWx0ZXIoQm9vbGVhbikuam9pbihcIlxcblwiKTtcbiAgfVxuICBcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNsYXNzRmlsZShcbiAganNvbjogYW55LFxuICBlZGl0aW9uSWQ6IHN0cmluZyxcbiAgZmlsZU5hbWU6IHN0cmluZyxcbiAgb3B0aW9uYWxGZWF0dXJlczogYW55W11cbik6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciBmcm9udG1hdHRlclxuICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgLy8gdW53cmFwIHRoZSByZWFsIGNsYXNzIHJlY29yZFxuICBjb25zdCBjbHMgPSBBcnJheS5pc0FycmF5KGpzb24uY2xhc3MpID8ganNvbi5jbGFzc1swXSA6IGpzb247XG4gIC8vIGRlcml2ZSB0aGUgTWFya2Rvd24gZmlsZW5hbWVcbiAgY29uc3QgY2xhc3NOYW1lID1cbiAgICB0eXBlb2YgY2xzLm5hbWUgPT09IFwic3RyaW5nXCJcbiAgICAgID8gY2xzLm5hbWVcbiAgICAgIDogZmlsZU5hbWVcbiAgICAgID8gZmlsZU5hbWUucmVwbGFjZSgvXmNsYXNzLS8sIFwiXCIpLnJlcGxhY2UoL1xcLmpzb24kLywgXCJcIilcbiAgICAgIDogXCJVbmtub3duXCI7XG5cbiAgY29uc3Qgc3ViY2xhc3NGaWxlczogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBjb25zdCBQUk9GX0JPTlVTX0JZX0xFVkVMID0gW1xuICAgIFwiKzJcIiwgXCIrMlwiLCBcIisyXCIsIFwiKzJcIixcbiAgICBcIiszXCIsIFwiKzNcIiwgXCIrM1wiLCBcIiszXCIsXG4gICAgXCIrNFwiLCBcIis0XCIsIFwiKzRcIiwgXCIrNFwiLFxuICAgIFwiKzVcIiwgXCIrNVwiLCBcIis1XCIsIFwiKzVcIixcbiAgICBcIis2XCIsIFwiKzZcIiwgXCIrNlwiLCBcIis2XCJcbiAgXTtcbiAgXG4gIC8vIG5vcm1hbGl6ZSBoaXRcdTIwMTBkaWNlXG4gIGNvbnN0IGhkTnVtICAgPSBjbHMuaGQ/Lm51bWJlciA/PyAxO1xuICBjb25zdCBoZEZhY2VzID0gY2xzLmhkPy5mYWNlcyAgPz8gNjtcbiAgY29uc3QgaGRTdHIgICA9IGAke2hkTnVtfWQke2hkRmFjZXN9YDtcbiAgY29uc3QgaGRNYXggICA9IGhkTnVtICogaGRGYWNlcztcbiAgY29uc3QgaGRBdmcgICA9IE1hdGguY2VpbCgoaGRGYWNlcyArIDEpIC8gMik7XG5cbmNvbnN0IGJhc2VGTSA9IGJ1aWxkRk0oY2xzLCBDTEFTU19NRVRBX0RFRlMpO1xuY29uc3QgZm0gICAgID0geyAuLi5iYXNlRk0sIGhkOiBoZFN0ciB9O1xuY29uc3QgeWFtbCAgID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIENMQVNTX01FVEFfREVGUyk7XG5cbi8vIDEpIERlY2xhcmUgeW91ciBsaW5lcyBidWZmZXIgaW1tZWRpYXRlbHlcbmNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4vLyA0KSBOb3cgY2Fycnkgb24gd2l0aCB0aGUgcmVzdCBvZiB5b3VyIGJvZHlcbmxpbmVzLnB1c2goYCMgJHtjbGFzc05hbWV9YCk7XG5pZiAoY2xzLnNvdXJjZSkgbGluZXMucHVzaChgKipTb3VyY2U6KiogJHtjbHMuc291cmNlfWApO1xubGluZXMucHVzaChgYCk7XG5saW5lcy5wdXNoKGAtLS1gKTtcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSGl0IFBvaW50cyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgbGluZXMucHVzaChgIyMgSGl0IFBvaW50c2ApO1xuICBsaW5lcy5wdXNoKGAqKkhpdCBEaWNlOioqICR7aGRTdHJ9IHBlciAke2NsYXNzTmFtZX0gbGV2ZWxgKTtcbiAgbGluZXMucHVzaChgKipIaXQgUG9pbnRzIGF0IDFzdCBMZXZlbDoqKiAke2hkTWF4fSArIHlvdXIgQ29uc3RpdHV0aW9uIG1vZGlmaWVyYCk7XG4gIGxpbmVzLnB1c2goXG4gICAgYCoqSGl0IFBvaW50cyBhdCBIaWdoZXIgTGV2ZWxzOioqICR7aGRTdHJ9IChvciAke2hkQXZnfSkgKyB5b3VyIENvbnN0aXR1dGlvbiBtb2RpZmllciBwZXIgbGV2ZWwgYWZ0ZXIgMXN0YFxuICApO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5saW5lcy5wdXNoKGAjIyBQcm9maWNpZW5jaWVzYCk7XG5cbmNvbnN0IHNwID0gY2xzLnN0YXJ0aW5nUHJvZmljaWVuY2llcyA/PyB7fTtcblxuLy8gQXJtb3JcbmlmIChBcnJheS5pc0FycmF5KHNwLmFybW9yKSAmJiBzcC5hcm1vci5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKkFybW9yOioqICR7c3AuYXJtb3Iuam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBXZWFwb25zXG5jb25zdCB3ZWFwb25MaXN0ID0gdW5pZmllZFdlYXBvblByb2ZzKHNwKTtcbmlmICh3ZWFwb25MaXN0Lmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqV2VhcG9uczoqKiAke3dlYXBvbkxpc3Quam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBUb29sc1xuY29uc3QgdG9vbExpc3QgPSB1bmlmaWVkVG9vbFByb2ZzKHNwKTtcbmlmICh0b29sTGlzdC5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKlRvb2xzOioqICR7dG9vbExpc3Quam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBTYXZpbmcgVGhyb3dzXG5jb25zdCBzYXZlcyA9IEFycmF5LmlzQXJyYXkoY2xzLnByb2ZpY2llbmN5KVxuICA/IGNscy5wcm9maWNpZW5jeS5tYXAoKGs6IHN0cmluZykgPT5cbiAgICAgICh7IHN0cjpcIlN0cmVuZ3RoXCIsIGRleDpcIkRleHRlcml0eVwiLCBjb246XCJDb25zdGl0dXRpb25cIixcbiAgICAgICAgIGludDpcIkludGVsbGlnZW5jZVwiLCB3aXM6XCJXaXNkb21cIiwgY2hhOlwiQ2hhcmlzbWFcIiB9W2tdIHx8IGsudG9VcHBlckNhc2UoKSlcbiAgICApXG4gIDogW107XG5pZiAoc2F2ZXMubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYC0gKipTYXZpbmcgVGhyb3dzOioqICR7c2F2ZXMuam9pbihcIiwgXCIpfWApO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTa2lsbHMgXHUyNTAwXHUyNTAwXHUyNTAwXG57XG4gIC8vIDEpIGdyYWIgd2hhdGV2ZXIgYXJyYXkgaG9sZHMgdGhlIHJhdyBvYmplY3RzL3N0cmluZ3NcbiAgY29uc3QgcmF3U2tpbGxzOiBhbnlbXSA9XG4gICAgQXJyYXkuaXNBcnJheShzcC5za2lsbFByb2ZpY2llbmNpZXMpID8gc3Auc2tpbGxQcm9maWNpZW5jaWVzXG4gICAgOiBBcnJheS5pc0FycmF5KHNwLnNraWxscykgICAgICAgICAgICAgPyBzcC5za2lsbHNcbiAgICA6IEFycmF5LmlzQXJyYXkoc3Auc2tpbGxQcm9mKSAgICAgICAgICA/IHNwLnNraWxsUHJvZlxuICAgIDogW107XG5cbiAgLy8gMikgbG9vayBmb3IgdGhlIFx1MjAxQ2Nob29zZSBOIGZyb20gW1x1MjAyNl1cdTIwMUQgZW50cnlcbiAgY29uc3QgY2hvaWNlRW50cnkgPSByYXdTa2lsbHMuZmluZChcbiAgICBlID0+IGUgJiZcbiAgICAgICAgICh0eXBlb2YgZS5jaG9vc2UgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGUuYW55ID09PSBcIm51bWJlclwiKVxuICApO1xuXG4gIGlmIChjaG9pY2VFbnRyeSkge1xuICAgIC8vIGhvdyBtYW55IHRvIGNob29zZVxuICAgIGNvbnN0IGNvdW50ID0gY2hvaWNlRW50cnkuY2hvb3NlPy5jb3VudCA/PyBjaG9pY2VFbnRyeS5hbnkgPz8gMTtcblxuICAgIC8vIHB1bGwgdGhlIGFjdHVhbCBsaXN0IG9mIG9wdGlvbnMsIG9yIGZhbGwgYmFjayB0byB0aGUgZ2xvYmFsIFNLSUxMX09QVElPTlNcbiAgICBjb25zdCBvcHRpb25zOiBzdHJpbmdbXSA9IEFycmF5LmlzQXJyYXkoY2hvaWNlRW50cnkuY2hvb3NlPy5mcm9tKVxuICAgICAgPyBjaG9pY2VFbnRyeS5jaG9vc2UuZnJvbS5tYXAoKHM6IHN0cmluZykgPT5cbiAgICAgICAgICAvLyB0aXRsZS1jYXNlIGVhY2ggd29yZCAob3IganVzdCB1c2UgcylcbiAgICAgICAgICBzLnNwbGl0KFwiIFwiKS5tYXAodyA9PiB3WzBdLnRvVXBwZXJDYXNlKCkgKyB3LnNsaWNlKDEpKS5qb2luKFwiIFwiKVxuICAgICAgICApXG4gICAgICA6IFNLSUxMX09QVElPTlM7XG5cbiAgICBsaW5lcy5wdXNoKGAtICoqU2tpbGxzIChDaG9vc2UgJHtjb3VudH0pOioqICR7b3B0aW9ucy5qb2luKFwiLCBcIil9YCk7XG5cbiAgfSBlbHNlIHtcbiAgICAvLyBubyBjaG9vc2UtZnJvbSBvYmplY3QgXHUyMTkyIGZsYXQgbGlzdCBmcm9tIHlvdXIgdW5pZmllZCBoZWxwZXJcbiAgICBjb25zdCBmbGF0ID0gdW5pZmllZFNraWxscyhzcCk7XG4gICAgaWYgKGZsYXQubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAtICoqU2tpbGxzOioqICR7ZmxhdC5qb2luKFwiLCBcIil9YCk7XG4gICAgfVxuICB9XG59XG5cblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBFcXVpcG1lbnQgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGlmIChBcnJheS5pc0FycmF5KGNscy5zdGFydGluZ0VxdWlwbWVudCkpIHtcbiAgICBsaW5lcy5wdXNoKGBcXG4jIyMgRXF1aXBtZW50YCk7XG4gICAgY2xzLnN0YXJ0aW5nRXF1aXBtZW50XG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IHR5cGVvZiBlID09PSBcInN0cmluZ1wiKVxuICAgICAgLmZvckVhY2goKGl0ZW06IHN0cmluZykgPT4gbGluZXMucHVzaChgLSAke2l0ZW19YCkpO1xuICB9XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDbGFzcyBQcm9ncmVzc2lvbiBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHByb2dHcm91cHMgPSBjbHMuY2xhc3NUYWJsZUdyb3VwcyA/PyBbXTtcbmNvbnN0IG1heExldmVsID0gMjA7XG5cbmlmICghcHJvZ0dyb3Vwcy5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgKihObyBjbGFzcyB0YWJsZSBwcm92aWRlZCBmb3IgdGhpcyBjbGFzcy4pKmApO1xufSBlbHNlIHtcbiAgLy8gMSkgQnVpbGQgbGV2ZWwgXHUyMTkyIGZlYXR1cmUgbWFwXG4gIGNvbnN0IGZlYXR1cmVzQnlMZXZlbDogUmVjb3JkPG51bWJlciwgc3RyaW5nW10+ID0ge307XG4gIGZvciAoY29uc3QgZmVhdCBvZiBjbHMuY2xhc3NGZWF0dXJlcyA/PyBbXSkge1xuICAgIGNvbnN0IHJhdyA9IHR5cGVvZiBmZWF0ID09PSBcIm9iamVjdFwiICYmIGZlYXQuY2xhc3NGZWF0dXJlID8gZmVhdC5jbGFzc0ZlYXR1cmUgOiBTdHJpbmcoZmVhdCk7XG4gICAgY29uc3QgW25hbWUsLCAsbHZsU3RyXSA9IHJhdy5zcGxpdChcInxcIik7XG4gICAgY29uc3QgbHZsID0gTnVtYmVyKGx2bFN0ciA/PyAwKTtcbiAgICBpZiAoIWZlYXR1cmVzQnlMZXZlbFtsdmxdKSBmZWF0dXJlc0J5TGV2ZWxbbHZsXSA9IFtdO1xuICAgIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2gobmFtZSk7XG4gIH1cblxuICAvLyAyKSBHYXRoZXIgZXZlcnkgY29sdW1uIGxhYmVsICYgcm93IHZhbHVlXG4gIGNvbnN0IGFsbExhYmVsc1NldCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBjb25zdCByb3dNYXBzOiBSZWNvcmQ8bnVtYmVyLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiA9IHt9O1xuXG4gIGZvciAoY29uc3QgZ3JvdXAgb2YgcHJvZ0dyb3Vwcykge1xuICAgIGNvbnN0IGxhYmVscyA9IEFycmF5LmlzQXJyYXkoZ3JvdXAuY29sTGFiZWxzKVxuICAgICAgPyBncm91cC5jb2xMYWJlbHMubWFwKChsOiBzdHJpbmcpID0+IHJlcGxhY2U1ZVRhZ3MobCkpXG4gICAgICA6IFtdO1xuICAgIGNvbnN0IHJvd3MgPSBBcnJheS5pc0FycmF5KGdyb3VwLnJvd3MpXG4gICAgICA/IGdyb3VwLnJvd3NcbiAgICAgIDogQXJyYXkuaXNBcnJheShncm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvbilcbiAgICAgICAgPyBncm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvblxuICAgICAgICA6IFtdO1xuXG4gICAgaWYgKCFsYWJlbHMubGVuZ3RoIHx8ICFyb3dzLmxlbmd0aCkgY29udGludWU7XG5cbiAgICBmb3IgKGxldCBsdmwgPSAwOyBsdmwgPCByb3dzLmxlbmd0aDsgbHZsKyspIHtcbiAgICAgIGNvbnN0IGxldmVsTnVtID0gbHZsICsgMTtcbiAgICAgIGlmICghcm93TWFwc1tsZXZlbE51bV0pIHJvd01hcHNbbGV2ZWxOdW1dID0ge307XG4gICAgICBjb25zdCByb3dNYXAgPSByb3dNYXBzW2xldmVsTnVtXTtcbiAgICAgIGNvbnN0IGNlbGxzID0gcm93c1tsdmxdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhYmVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBsYWJlbCA9IGxhYmVsc1tpXTtcbiAgICAgICAgbGV0IHZhbCA9IFwiXCI7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tpXTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjZWxsKSkge1xuICAgICAgICAgIHZhbCA9IGNlbGwuam9pbihcIiwgXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGNlbGwgJiYgdHlwZW9mIGNlbGwgPT09IFwib2JqZWN0XCIgJiYgXCJ2YWx1ZVwiIGluIGNlbGwpIHtcbiAgICAgICAgICB2YWwgPSBTdHJpbmcoY2VsbC52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsID0gU3RyaW5nKGNlbGwgPz8gXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBhbGxMYWJlbHNTZXQuYWRkKGxhYmVsKTtcbiAgICAgICAgcm93TWFwW2xhYmVsXSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAzKSAqKkZpbHRlciBvdXQqKiBhbnkgc3BlbGxcdTIwMTB0YWJsZSBjb2x1bW5zXG4gIGNvbnN0IGFsbExhYmVscyA9IEFycmF5LmZyb20oYWxsTGFiZWxzU2V0KS5maWx0ZXIobGJsID0+XG4gICAgIS9DYW50cmlwcyBLbm93bnxTcGVsbHMgS25vd258XFxkKyhzdHxuZHxyZHx0aCkvLnRlc3QobGJsKVxuICApO1xuXG4gIC8vIDQpIEJ1aWxkIGZpbmFsIGhlYWRlciAmIHJvd3NcbiAgY29uc3QgbWVyZ2VkTGFiZWxzID0gW1wiTGV2ZWxcIiwgXCJQcm9maWNpZW5jeSBCb251c1wiLCBcIkNsYXNzIEZlYXR1cmVzXCIsIC4uLmFsbExhYmVsc107XG4gIGNvbnN0IG1lcmdlZFJvd3M6IHN0cmluZ1tdW10gPSBbXTtcblxuICBmb3IgKGxldCBsdmwgPSAxOyBsdmwgPD0gbWF4TGV2ZWw7IGx2bCsrKSB7XG4gICAgY29uc3QgZmVhdHVyZUxpc3QgPSAoZmVhdHVyZXNCeUxldmVsW2x2bF0gPz8gW10pLm1hcChmb3JtYXRGZWF0dXJlTGluayk7XG4gICAgY29uc3Qgcm93TWFwID0gcm93TWFwc1tsdmxdID8/IHt9O1xuXG4gICAgbWVyZ2VkUm93cy5wdXNoKFtcbiAgICAgIGx2bC50b1N0cmluZygpLFxuICAgICAgUFJPRl9CT05VU19CWV9MRVZFTFtsdmwgLSAxXSB8fCBcIlwiLFxuICAgICAgZmVhdHVyZUxpc3Quam9pbihcIiwgXCIpLnJlcGxhY2UoL1xcfC9nLCBcIiYjMTI0O1wiKSxcbiAgICAgIC4uLmFsbExhYmVscy5tYXAobGFiZWwgPT4gcm93TWFwW2xhYmVsXSA/PyBcIlwiKVxuICAgIF0pO1xuICB9XG5cbiAgLy8gNSkgUmVuZGVyIHRoZSBmZWF0dXJlc1x1MjAxMG9ubHkgdGFibGVcbmxpbmVzLnB1c2goYFxcbj4gWyFleGFtcGxlXS0gQ2xhc3MgUHJvZ3Jlc3Npb24gVGFibGVgKTtcbmxpbmVzLnB1c2goXG4gIHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgIHR5cGU6ICAgICAgXCJ0YWJsZVwiLFxuICAgIGNhcHRpb246ICAgXCJcIixcbiAgICBjb2xMYWJlbHM6IG1lcmdlZExhYmVscyxcbiAgICByb3dzOiAgICAgIG1lcmdlZFJvd3MsXG4gIH0pKTtcbn1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWxsIFByb2dyZXNzaW9uIFx1MjUwMFx1MjUwMFx1MjUwMFxuLy8gMSkgZmluZCB0aGUgdHdvIGdyb3Vwc1xuY29uc3QgY3NHcm91cCA9IHByb2dHcm91cHMuZmluZCgoZzogYW55KSA9PlxuICBBcnJheS5pc0FycmF5KGcuY29sTGFiZWxzKSAmJlxuICBnLmNvbExhYmVscy5zb21lKChsYmw6IGFueSkgPT4gL0NhbnRyaXBzIEtub3dufFNwZWxscyBLbm93bi8udGVzdChTdHJpbmcobGJsKSkpXG4pO1xuY29uc3Qgc2xvdEdyb3VwID0gcHJvZ0dyb3Vwcy5maW5kKChnOiBhbnkpID0+XG4gIEFycmF5LmlzQXJyYXkoZy5jb2xMYWJlbHMpICYmXG4gIGcudGl0bGUgPT09IFwiU3BlbGwgU2xvdHMgcGVyIFNwZWxsIExldmVsXCJcbik7XG5cbmlmIChjc0dyb3VwICYmIHNsb3RHcm91cCkge1xuICAvLyAyKSByYXcgbGFiZWxzXG4gIGNvbnN0IGNzTGFiZWxzICAgPSAoY3NHcm91cC5jb2xMYWJlbHMgYXMgc3RyaW5nW10pLm1hcChsID0+IHJlcGxhY2U1ZVRhZ3MobCkpO1xuICBjb25zdCBzbG90TGFiZWxzID0gKHNsb3RHcm91cC5jb2xMYWJlbHMgYXMgc3RyaW5nW10pLm1hcChsID0+IHJlcGxhY2U1ZVRhZ3MobCkpO1xuXG4gIC8vIDMpIHJhdyByb3dzXG4gIGNvbnN0IGNzUm93cyAgID0gKGNzR3JvdXAucm93cyAgICAgIGFzIGFueVtdW10pICAgICAgICAgICAgICB8fCBbXTtcbiAgY29uc3Qgc2xvdFJvd3MgPSAoc2xvdEdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uIGFzIGFueVtdW10pIHx8IFtdO1xuXG4gIC8vIDQpIGJ1aWxkIGhlYWRlcjogTGV2ZWwgKyBjYW50cmlwcy9zcGVsbHMgKyBlYWNoIHNsb3QgbGV2ZWxcbiAgY29uc3QgY29sTGFiZWxzID0gW1wiTGV2ZWxcIiwgLi4uY3NMYWJlbHMsIC4uLnNsb3RMYWJlbHNdO1xuXG4gIC8vIDUpIGJ1aWxkIGVhY2ggcm93IGJ5IHppcHBpbmcgY3NSb3dzW2ldICsgc2xvdFJvd3NbaV1cbiAgY29uc3Qgc3BlbGxSb3dzOiBzdHJpbmdbXVtdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5tYXgoY3NSb3dzLmxlbmd0aCwgc2xvdFJvd3MubGVuZ3RoKTsgaSsrKSB7XG4gICAgY29uc3QgbHZsID0gU3RyaW5nKGkgKyAxKTtcbiAgICBjb25zdCBjc0NlbGxzICAgPSBjc1Jvd3NbaV0gICA/IGNzUm93c1tpXS5tYXAoU3RyaW5nKSAgIDogY3NMYWJlbHMubWFwKF8gPT4gXCJcIik7XG4gICAgY29uc3Qgc2xvdENlbGxzID0gc2xvdFJvd3NbaV0gPyBzbG90Um93c1tpXS5tYXAoU3RyaW5nKSA6IHNsb3RMYWJlbHMubWFwKF8gPT4gXCJcIik7XG4gICAgc3BlbGxSb3dzLnB1c2goW2x2bCwgLi4uY3NDZWxscywgLi4uc2xvdENlbGxzXSk7XG4gIH1cblxuICAvLyA2KSByZW5kZXIhXG4gIGxpbmVzLnB1c2goYFxcbj4gWyF0aXBdLSBTcGVsbCBQcm9ncmVzc2lvbiBUYWJsZWApO1xuICBsaW5lcy5wdXNoKFxuICAgIHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgICAgdHlwZTogICAgICBcInRhYmxlXCIsXG4gICAgICBjYXB0aW9uOiAgIFwiXCIsXG4gICAgICBjb2xMYWJlbHM6IGNvbExhYmVscyxcbiAgICAgIHJvd3M6ICAgICAgc3BlbGxSb3dzLFxuICB9KSk7XG59XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShqc29uLnN1YmNsYXNzKSA/IGpzb24uc3ViY2xhc3MgOiBbXTtcbmNvbnN0IHN1YmNsYXNzRmVhdHVyZXMgPSBBcnJheS5pc0FycmF5KGpzb24uc3ViY2xhc3NGZWF0dXJlKVxuICA/IGpzb24uc3ViY2xhc3NGZWF0dXJlXG4gIDoganNvbi5sb29rdXA/LnN1YmNsYXNzRmVhdHVyZSA/PyBbXTtcblxuZm9yIChjb25zdCBzYyBvZiBzdWJzKSB7XG4gIGNvbnN0IHN1YmNsYXNzTmFtZSA9IHNjLm5hbWU7XG4gIGNvbnN0IHN1YkxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIZWFkZXIgbWV0YWRhdGEgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHN1YkxpbmVzLnB1c2goYCMgJHtzdWJjbGFzc05hbWV9YCk7XG4gIHN1YkxpbmVzLnB1c2goYCoqUGFyZW50IENsYXNzOioqIFtbJHtjbGFzc05hbWV9XV1gKTtcbiAgaWYgKHNjLnNvdXJjZSkgc3ViTGluZXMucHVzaChgKipTb3VyY2U6KiogJHtzYy5zb3VyY2V9YCk7XG4gIHN1YkxpbmVzLnB1c2goYGApOyAvLyBibGFuayBsaW5lXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEludHJvIGVudHJ5IChsZXZlbCAzIGZlYXR1cmUgZGVzY3JpcHRpb24pIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBpbnRybyA9IHN1YmNsYXNzRmVhdHVyZXMuZmluZCgoZjogYW55KSA9PlxuICAgIGYubmFtZSA9PT0gc2MubmFtZSAmJlxuICAgIGYubGV2ZWwgPT09IDMgJiZcbiAgICBmLnN1YmNsYXNzU2hvcnROYW1lID09PSBzYy5zaG9ydE5hbWUgJiZcbiAgICBmLnN1YmNsYXNzU291cmNlID09PSBzYy5zb3VyY2VcbiAgKTtcbiAgaWYgKGludHJvPy5lbnRyaWVzPy5sZW5ndGgpIHtcbiAgICBjb25zdCBpbnRyb1RleHQgPSBBcnJheS5pc0FycmF5KGludHJvLmVudHJpZXMpXG4gICAgICA/IGludHJvLmVudHJpZXMubWFwKChlOiBhbnkpID0+XG4gICAgICAgICAgdHlwZW9mIGUgPT09IFwic3RyaW5nXCIgPyByZXBsYWNlNWVUYWdzKGUpIDogZm9ybWF0RW50cnkoZSlcbiAgICAgICAgKS5qb2luKFwiXFxuXFxuXCIpXG4gICAgICA6IGZvcm1hdEVudHJ5KGludHJvLmVudHJpZXMpO1xuICAgIHN1YkxpbmVzLnB1c2goaW50cm9UZXh0LCBgYCk7XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgT3B0aW9uYWxcdTIwMTBmZWF0dXJlIGJsb2NrIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBjb2RlID0gKE9iamVjdC5lbnRyaWVzKE9QVF9GRUFUVVJFX1RZUEVfVE9fRlVMTCkgYXMgW3N0cmluZyxzdHJpbmddW10pXG4gICAgLmZpbmQoKFssIGZ1bGxdKSA9PlxuICAgICAgZnVsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1YmNsYXNzTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICk/LlswXTtcbiAgaWYgKGNvZGUpIHtcbiAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9uYWxGZWF0dXJlcy5maWx0ZXIob2YgPT5cbiAgICAgIEFycmF5LmlzQXJyYXkob2YuZmVhdHVyZVR5cGUpICYmIG9mLmZlYXR1cmVUeXBlLmluY2x1ZGVzKGNvZGUpXG4gICAgKTtcbiAgICBpZiAobWF0Y2hlcy5sZW5ndGgpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2goYCMjICR7c3ViY2xhc3NOYW1lfSBPcHRpb25hbCBGZWF0dXJlc2ApO1xuICAgICAgZm9yIChjb25zdCBmZWF0IG9mIG1hdGNoZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBmZWF0LmVudHJpZXMpIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSB0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhlbnRyeSlcbiAgICAgICAgICAgIDogZm9ybWF0RW50cnkoZW50cnkpO1xuICAgICAgICAgIHN1YkxpbmVzLnB1c2goYCoqJHtmZWF0Lm5hbWV9OioqICR7dHh0fWApO1xuICAgICAgICB9XG4gICAgICAgIHN1YkxpbmVzLnB1c2goYGApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTdWJjbGFzcyBwcm9ncmVzc2lvbiB0YWJsZSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3QgcHJvZyA9IHNjLnN1YmNsYXNzVGFibGVHcm91cHMgPz8gW107XG4gIGlmIChwcm9nLmxlbmd0aCkge1xuICAgIGNvbnN0IGxhYmVscyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IHJvd3NNYXA6IFJlY29yZDxudW1iZXIsIFJlY29yZDxzdHJpbmcsc3RyaW5nPj4gPSB7fTtcbiAgICBmb3IgKGNvbnN0IGcgb2YgcHJvZykge1xuICAgICAgY29uc3QgY29scyA9IChnLmNvbExhYmVscyA/PyBbXSkubWFwKHJlcGxhY2U1ZVRhZ3MpO1xuICAgICAgY29uc3Qgcm93cyA9IEFycmF5LmlzQXJyYXkoZy5yb3dzKVxuICAgICAgICA/IGcucm93c1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkoZy5yb3dzU3BlbGxQcm9ncmVzc2lvbilcbiAgICAgICAgICA/IGcucm93c1NwZWxsUHJvZ3Jlc3Npb25cbiAgICAgICAgICA6IFtdO1xuICAgICAgcm93cy5mb3JFYWNoKChyOiBhbnksIGk6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBsdmwgPSBpICsgMTtcbiAgICAgICAgcm93c01hcFtsdmxdID8/PSB7fTtcbiAgICAgICAgci5mb3JFYWNoKChjOiBhbnksIGo6IG51bWJlcikgPT4ge1xuICAgICAgICAgIGNvbnN0IGxhYiA9IGNvbHNbal07XG4gICAgICAgICAgaWYgKCFsYWIpIHJldHVybjtcbiAgICAgICAgICBsYWJlbHMuYWRkKGxhYik7XG4gICAgICAgICAgcm93c01hcFtsdmxdW2xhYl0gPSB0eXBlb2YgYyA9PT0gXCJvYmplY3RcIiAmJiBjICE9PSBudWxsICYmIFwidmFsdWVcIiBpbiBjXG4gICAgICAgICAgICA/IFN0cmluZyhjLnZhbHVlKVxuICAgICAgICAgICAgOiBTdHJpbmcoYyA/PyBcIlwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgaGRycyA9IEFycmF5LmZyb20obGFiZWxzKTtcbiAgICBzdWJMaW5lcy5wdXNoKGAjIyBTdWJjbGFzcyBQcm9ncmVzc2lvbmApO1xuICAgIHN1YkxpbmVzLnB1c2gocmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgICB0eXBlOiAgICAgIFwidGFibGVcIixcbiAgICAgIGNhcHRpb246ICAgXCJcIixcbiAgICAgIGNvbExhYmVsczogW1wiTGV2ZWxcIiwgLi4uaGRyc10sXG4gICAgICByb3dzOiAgICAgIEFycmF5LmZyb20oeyBsZW5ndGg6IDIwIH0sIChfLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGx2bCA9IGkgKyAxO1xuICAgICAgICByZXR1cm4gW1N0cmluZyhsdmwpLCAuLi5oZHJzLm1hcChoID0+IHJvd3NNYXBbbHZsXT8uW2hdID8/IFwiXCIpXTtcbiAgICAgIH0pXG4gICAgfSkpO1xuICB9XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBEZXRhaWxlZCBsZXZlbFx1MjAxMGJ5XHUyMDEwbGV2ZWwgZmVhdHVyZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBmZWF0c0J5THZsOiBSZWNvcmQ8bnVtYmVyLCBhbnlbXT4gPSB7fTtcbmZvciAoY29uc3QgZiBvZiBzdWJjbGFzc0ZlYXR1cmVzKSB7XG4gIGlmIChcbiAgICBmLnN1YmNsYXNzU2hvcnROYW1lID09PSBzYy5zaG9ydE5hbWUgJiZcbiAgICBmLnN1YmNsYXNzU291cmNlID09PSBzYy5zb3VyY2UgJiZcbiAgICBmLmNsYXNzTmFtZSA9PT0gY2xhc3NOYW1lXG4gICkge1xuICAgIGNvbnN0IGx2bCA9IGYubGV2ZWwgPz8gMDtcbiAgICA7KGZlYXRzQnlMdmxbbHZsXSA/Pz0gW10pLnB1c2goZik7XG4gIH1cbn1cblxuZm9yIChjb25zdCBsdmwgb2YgT2JqZWN0LmtleXMoZmVhdHNCeUx2bCkubWFwKE51bWJlcikuc29ydCgoYSxiKT0+YS1iKSkge1xuICBzdWJMaW5lcy5wdXNoKGAtLS1gLCBgIyMgTGV2ZWwgJHtsdmx9YCk7XG5cbiAgZm9yIChjb25zdCBmIG9mIGZlYXRzQnlMdmxbbHZsXSkge1xuICBzdWJMaW5lcy5wdXNoKGAjIyMgJHtmLm5hbWV9YCk7XG5cbiAgLy8gV2FsayBlYWNoIGVudHJ5IGZvciB0aGlzIGZlYXR1cmVcbiAgZm9yIChjb25zdCBlbnQgb2YgQXJyYXkuaXNBcnJheShmLmVudHJpZXMpID8gZi5lbnRyaWVzIDogW2YuZW50cmllc10pIHtcbiAgICAvLyAxKSBQbGFpbiBwYXJhZ3JhcGggZW50cmllc1xuICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3MoZW50KSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyAyKSBJZiBpdCdzIHRoZSBcIk1hbmV1dmVyc1wiIGVudHJpZXNcdTIwMTBibG9jaywgaW5qZWN0IHlvdXIgbGlzdCBoZXJlXG4gICAgaWYgKGVudC50eXBlID09PSBcImVudHJpZXNcIiAmJiAvXk1hbmV1dmVycyQvaS50ZXN0KGVudC5uYW1lKSkge1xuICAgICAgLy8gZmlyc3QgcHJpbnQgdGhlIHN1Ylx1MjAxMGhlYWRpbmcgYW5kIGFueSB0ZXh0IGl0IGhhZFxuICAgICAgc3ViTGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgIGZvciAoY29uc3QgdHh0IG9mIEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdKSB7XG4gICAgICAgIHN1YkxpbmVzLnB1c2godHlwZW9mIHR4dCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgID8gcmVwbGFjZTVlVGFncyh0eHQpXG4gICAgICAgICAgOiBmb3JtYXRFbnRyeSh0eHQpKTtcbiAgICAgIH1cblxuICAgICAgLy8gbm93IGluamVjdCB0aGUgZnVsbCBtYW5ldXZlciBkZWZpbml0aW9ucyBmb3IgdGhpcyBzdWJjbGFzc1xuICAgICAgY29uc3QgY29kZSA9IChPYmplY3QuZW50cmllcyhPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEwpIGFzIFtzdHJpbmcsc3RyaW5nXVtdKVxuICAgICAgICAuZmluZCgoWywgZnVsbF0pID0+XG4gICAgICAgICAgZnVsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1YmNsYXNzTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICApPy5bMF07XG4gICAgICBpZiAoY29kZSkge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9uYWxGZWF0dXJlcy5maWx0ZXIob2YgPT5cbiAgICAgICAgICBBcnJheS5pc0FycmF5KG9mLmZlYXR1cmVUeXBlKSAmJiBvZi5mZWF0dXJlVHlwZS5pbmNsdWRlcyhjb2RlKVxuICAgICAgICApO1xuICAgICAgICBmb3IgKGNvbnN0IGZlYXREZWYgb2YgbWF0Y2hlcykge1xuICAgICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGZlYXREZWYuZW50cmllcykge1xuICAgICAgICAgICAgY29uc3QgbGluZSA9IHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHN1YilcbiAgICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShzdWIpO1xuICAgICAgICAgICAgc3ViTGluZXMucHVzaChgKioke2ZlYXREZWYubmFtZX06KiogJHtsaW5lfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKFwiXCIpOyAvLyBzcGFjZXJcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gMykgQW55IG90aGVyIG5lc3RlZCBcImVudHJpZXNcIiBibG9ja3NcbiAgICBpZiAoZW50LnR5cGUgPT09IFwiZW50cmllc1wiICYmIGVudC5uYW1lKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKGAjIyMjIyAke2VudC5uYW1lfWApO1xuICAgICAgZm9yIChjb25zdCBlMiBvZiBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXSkge1xuICAgICAgICBzdWJMaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGUyKSk7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyA0KSBJbnNldHNcbiAgICBpZiAoZW50LnR5cGUgPT09IFwiaW5zZXRcIiAmJiBlbnQubmFtZSkge1xuICAgICAgY29uc3QgaW5uZXIgPSBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXTtcbiAgICAgIHN1YkxpbmVzLnB1c2goYD4gKioke2VudC5uYW1lfSoqYCk7XG4gICAgICBpbm5lci5mb3JFYWNoKChlMjogYW55KSA9PiBzdWJMaW5lcy5wdXNoKGA+ICR7Zm9ybWF0RW50cnkoZTIpfWApKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIDUpIEZhbGxiYWNrXG4gICAgY29uc3QgZmIgPSBmb3JtYXRFbnRyeShlbnQpO1xuICAgIGlmIChmYikgc3ViTGluZXMucHVzaChmYik7XG4gIH1cbiAgfVxufVxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENsZWFuIHVwICYgcHVzaCBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3Qgc3ViY2xhc3NDb250ZW50ID0gc3ViTGluZXNcbiAgICAuam9pbihcIlxcblxcblwiKVxuICAgIC5yZXBsYWNlKC9cXG57Myx9L2csIFwiXFxuXFxuXCIpO1xuICBzdWJjbGFzc0ZpbGVzLnB1c2goe1xuICAgIHBhdGg6IGBDbGFzc2VzLyR7Y2xhc3NOYW1lfS9TdWJjbGFzc2VzLyR7c3ViY2xhc3NOYW1lfS5tZGAsXG4gICAgY29udGVudDogc3ViY2xhc3NDb250ZW50XG4gIH0pO1xufVxuXG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzZXMgU3VtbWFyeSBcdTI1MDBcdTI1MDBcdTI1MDBcbmlmIChzdWJzLmxlbmd0aCkge1xuICBjb25zdCBsaW5rcyA9IHN1YnMubWFwKChzYzogYW55KSA9PlxuICAgIGBbW1N1YmNsYXNzZXMvJHtzYy5uYW1lLnJlcGxhY2UoL1tcXFxcL10vZywgXCItXCIpfXwke3NjLm5hbWV9XV1gXG4gICk7XG4gIGxpbmVzLnB1c2goYFxcbioqU3ViY2xhc3NlczoqKiAke2xpbmtzLmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuXG4gIC8vIEdldCBmdWxsIGNsYXNzIGZlYXR1cmUgZGVmaW5pdGlvbnNcbmNvbnN0IGFsbEZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShqc29uLmNsYXNzRmVhdHVyZSkgPyBqc29uLmNsYXNzRmVhdHVyZSA6IGpzb24ubG9va3VwPy5jbGFzc0ZlYXR1cmUgPz8gW107XG5jb25zdCBmZWF0dXJlc0J5TGV2ZWw6IFJlY29yZDxudW1iZXIsIGFueVtdPiA9IHt9O1xuXG5mb3IgKGNvbnN0IGVudHJ5IG9mIGFsbEZlYXR1cmVzKSB7XG4gIGlmIChlbnRyeS5jbGFzc05hbWUgIT09IGNsYXNzTmFtZSkgY29udGludWU7XG4gIGNvbnN0IGx2bCA9IGVudHJ5LmxldmVsID8/IDA7XG4gIGlmICghZmVhdHVyZXNCeUxldmVsW2x2bF0pIGZlYXR1cmVzQnlMZXZlbFtsdmxdID0gW107XG4gIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2goZW50cnkpO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBMZXZlbCBGZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5saW5lcy5wdXNoKGAjIyBMZXZlbCBGZWF0dXJlc2ApO1xuXG5jb25zdCBsZXZlbHMgPSBPYmplY3RcbiAgLmtleXMoZmVhdHVyZXNCeUxldmVsKVxuICAubWFwKG4gPT4gK24pXG4gIC5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG5cbmZvciAoY29uc3QgbHZsIG9mIGxldmVscykge1xuICBsaW5lcy5wdXNoKGAjIyMgTGV2ZWwgJHtsdmx9YCk7XG5cbiAgZm9yIChjb25zdCBmZWF0IG9mIGZlYXR1cmVzQnlMZXZlbFtsdmxdKSB7XG4gICAgLy8gRmVhdHVyZSBoZWFkZXJcbiAgICBsaW5lcy5wdXNoKGAjIyMjICR7ZmVhdC5uYW1lfWApO1xuXG4gICAgLy8gRW5zdXJlIGVudHJpZXMgaXMgYWx3YXlzIGFuIGFycmF5XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoZmVhdC5lbnRyaWVzKVxuICAgICAgPyBmZWF0LmVudHJpZXNcbiAgICAgIDogW2ZlYXQuZW50cmllc107XG5cbiAgICBmb3IgKGNvbnN0IGVudCBvZiBlbnRyaWVzKSB7XG4gICAgICAvLyAxKSBQbGFpbi10ZXh0IHBhcmFncmFwaFxuICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IGZvcm1hdEVudHJ5KGVudCkudHJpbSgpO1xuICAgICAgICAgIC8vIHNraXAgYW55IHB1cmUtYnJhY2UgbGluZXNcbiAgICAgICAgICBpZiAodHh0ID09PSBcIntcIiB8fCB0eHQgPT09IFwifVwiKSBjb250aW51ZTtcbiAgICAgICAgICBsaW5lcy5wdXNoKHR4dCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50Lml0ZW1zKSkge1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBlbnQuaXRlbXMpIHtcbiAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgIH1cbiAgICBjb250aW51ZTtcbiAgfVxuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGluc2lkZSB5b3VyIGZvciAoY29uc3QgZW50IG9mIGVudHJpZXMpIGxvb3AgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICBpZiAoZW50LnR5cGUgPT09IFwib3B0aW9uc1wiKSB7XG4gIGlmIChlbnQuY291bnQpIHtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIGxpbmVzLnB1c2goYCoqQ2hvb3NlICR7ZW50LmNvdW50fSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbnM6KipgKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICB9XG5cbiAgZm9yIChjb25zdCBvcHRSZWYgb2YgQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc10pIHtcbiAgICBpZiAob3B0UmVmLnR5cGUgPT09IFwicmVmT3B0aW9uYWxmZWF0dXJlXCIpIHtcbiAgICAgIGNvbnN0IFtvcHROYW1lLCBvcHRTcmNdID0gb3B0UmVmLm9wdGlvbmFsZmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICBjb25zdCBmZWF0RGVmID0gb3B0aW9uYWxGZWF0dXJlcy5maW5kKFxuICAgICAgICBmID0+IGYubmFtZSA9PT0gb3B0TmFtZSAmJiAoIW9wdFNyYyB8fCBmLnNvdXJjZSA9PT0gb3B0U3JjKVxuICAgICAgKTtcblxuICAgICAgaWYgKGZlYXREZWYpIHtcbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGVhY2ggbGluZSBpbiB0aGUgZmVhdHVyZVx1MjAxOXMgZW50cmllc1tdXG4gICAgICAgIGZlYXREZWYuZW50cmllcy5mb3JFYWNoKChzdWJFbnRyeTogYW55LCBpZHg6IGFueSkgPT4ge1xuICAgICAgICAgIC8vIHJlbmRlciB0ZXh0XG4gICAgICAgICAgY29uc3QgdGV4dCA9IHR5cGVvZiBzdWJFbnRyeSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHN1YkVudHJ5KVxuICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShzdWJFbnRyeSk7XG5cbiAgICAgICAgICBpZiAoaWR4ID09PSAwKSB7XG4gICAgICAgICAgICAvLyBmaXJzdCBsaW5lOiBib2xkZWQgbmFtZSArIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICoqJHtmZWF0RGVmLm5hbWV9OioqICR7dGV4dH1gKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gc3Vic2VxdWVudCBsaW5lczogbmVzdGVkIGJ1bGxldFxuICAgICAgICAgICAgbGluZXMucHVzaChgICAtICR7dGV4dH1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpOyAvLyBibGFuayBsaW5lIGFmdGVyIGVhY2ggZmVhdHVyZSBibG9ja1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZmFsbGJhY2sgaWYgbm90IGZvdW5kXG4gICAgICAgIGxpbmVzLnB1c2goYCoqJHtvcHROYW1lfToqKmApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBub25cdTIwMTByZWZPcHRpb25hbGZlYXR1cmUgZmFsbGJhY2tcbiAgICAgIGNvbnN0IHR4dCA9IGZvcm1hdEVudHJ5KG9wdFJlZik7XG4gICAgICBpZiAodHh0KSBsaW5lcy5wdXNoKGAtICR7dHh0fWApO1xuICAgIH1cbiAgfVxuXG4gIGNvbnRpbnVlO1xufVxuXG5cbiAgICAgIC8vIDMpIFN0YW5kYWxvbmUgcmVmT3B0aW9uYWxmZWF0dXJlXG4gICAgICBpZiAoZW50LnR5cGUgPT09IFwicmVmT3B0aW9uYWxmZWF0dXJlXCIpIHtcbiAgICAgICAgY29uc3QgW25hbWVdID0gZW50Lm9wdGlvbmFsZmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICAgIGxpbmVzLnB1c2goYC0gW1ske25hbWV9fCR7bmFtZX1dXWApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gNCkgTmVzdGVkIFx1MjAxQ2VudHJpZXNcdTIwMUQgYmxvY2sgd2l0aCBpdHMgb3duIGhlYWRpbmdcbiAgICAgIGlmIChlbnQudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgZW50Lm5hbWUpIHtcbiAgICAgICAgbGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgICAgY29uc3QgaW5uZXIgPSBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXTtcbiAgICAgICAgZm9yIChjb25zdCBlMiBvZiBpbm5lcikge1xuICAgICAgICAgIGxpbmVzLnB1c2goZm9ybWF0RW50cnkoZTIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gNSkgRmFsbGJhY2sgZm9yIGFueSBvdGhlciBvYmplY3Qgc2hhcGVcbiAgICAgIGNvbnN0IGZhbGxiYWNrID0gZm9ybWF0RW50cnkoZW50KTtcbiAgICAgIGlmIChmYWxsYmFjaykgbGluZXMucHVzaChmYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLy8gQmxhbmsgbGluZSBhZnRlciBlYWNoIGZlYXR1cmVcbiAgICBsaW5lcy5wdXNoKGBgKTtcbiAgfSBcblxuICAvLyBEaXZpZGVyIGJldHdlZW4gbGV2ZWxzXG4gIGxpbmVzLnB1c2goYC0tLWApO1xufVxuXG5cblxuICAvLyBzdGl0Y2gsIHJlcGxhY2UgdGFncywgcmV0dXJuXG4gIGxldCBjb250ZW50ID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YDtcbiAgLy8gY29tbWVudCB0aGlzIG91dCB3aGlsZSBkZWJ1Z2dpbmc6XG4gIGNvbnRlbnQgPSByZXBsYWNlNWVUYWdzKGNvbnRlbnQpO1xuXG4gIGNvbnRlbnQgPSBjb250ZW50XG4gIC5yZXBsYWNlKC9cXG57Myx9L2csICdcXG5cXG4nKSAgIC8vIG5vIG1vcmUgdGhhbiAyIG5ld2xpbmVzIGluIGEgcm93XG4gIC5yZXBsYWNlKC9cXG4gK1xcbi9nLCAnXFxuXFxuJyk7ICAvLyB0cmltIGJsYW5rIGxpbmVzIHdpdGggdHJhaWxpbmcgc3BhY2VzXG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBgQ2xhc3Nlcy8ke2NsYXNzTmFtZX0vJHtjbGFzc05hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQsXG4gICAgfSxcbiAgICAuLi5zdWJjbGFzc0ZpbGVzLFxuICBdO1xuICBcbn1cbiIsICIvLyBzcmMvcGFyc2Vycy9ydWxlcy50c1xuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5cbi8qKlxuICogUGFyc2UgYWN0aW9ucy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggYWN0aW9uLFxuICogaGFuZGxpbmcgbmVzdGVkIGVudHJpZXMsIGluc2V0cywgbGlzdHMsIHRhYmxlcywgYW5kIGFkZGluZyBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBY3Rpb25zRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbi5hY3Rpb24pKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3QgYWN0aW9uIG9mIGpzb24uYWN0aW9uKSB7XG4gICAgbGluZXMucHVzaChgIyMgJHthY3Rpb24ubmFtZX1gKTtcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShhY3Rpb24uZW50cmllcykgPyBhY3Rpb24uZW50cmllcyA6IFthY3Rpb24uZW50cmllc107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgcGFyYXMgPSBlbnRyeS5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfSBlbHNlIGlmICgoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgfHwgZW50cnkudHlwZSA9PT0gXCJpbnNldFwiKSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGVudHJ5LmVudHJpZXMpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgY29uc3QgcHMgPSBzdWIuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcCBvZiBwcykge1xuICAgICAgICAgICAgICBjb25zdCB0dCA9IHAudHJpbSgpO1xuICAgICAgICAgICAgICBpZiAodHQpIHtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHQpKTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChzdWIudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShzdWIuaXRlbXMpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpIG9mIHN1Yi5pdGVtcykge1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhsaSl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KHN1YilcbiAgICAgICAgICAgICAgPyBzdWIuam9pbihcIiBcIilcbiAgICAgICAgICAgICAgOiB0eXBlb2Ygc3ViID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShzdWIpXG4gICAgICAgICAgICAgICAgOiBTdHJpbmcoc3ViKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiLS0tXCIpLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZW50cnkucm93cykge1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KGVudHJ5KVxuICAgICAgICAgID8gZW50cnkuam9pbihcIiBcIilcbiAgICAgICAgICA6IHR5cGVvZiBlbnRyeSA9PT0gXCJvYmplY3RcIlxuICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShlbnRyeSlcbiAgICAgICAgICAgIDogU3RyaW5nKGVudHJ5KTtcbiAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBhY3Rpb25zXG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgfVxuICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgIHJldHVybiBhY2MuY29uY2F0KGN1cnIpO1xuICB9LCBbXSk7XG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0FjdGlvbnMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogUGFyc2UgY29tYmluZWQgY29uZGl0aW9uc2Rpc2Vhc2VzLmpzb24gaW50byB0d28gTWFya2Rvd24gbm90ZXM6IENvbmRpdGlvbnMubWQgYW5kIERpc2Vhc2VzLm1kXG4gKiBhZGRpbmcgc2VwYXJhdG9ycyBiZXR3ZWVuIGVudHJpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3Qgb3V0cHV0czogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcbiAgY29uc3QgcHJvY2Vzc0l0ZW1zID0gKGl0ZW1zOiBhbnlbXSwgb3V0UGF0aDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICBsaW5lcy5wdXNoKGAjIyAke2l0ZW0ubmFtZX1gKTtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGl0ZW0uZW50cmllcykgPyBpdGVtLmVudHJpZXMgOiBbaXRlbS5lbnRyaWVzXTtcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCB0eHQgb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKHR4dCl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZW50cnkuY29sTGFiZWxzIHx8IFtdO1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIGZvciAoY29uc3Qgcm93IG9mIGVudHJ5LnJvd3MpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGVudHJ5LmVudHJpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHR4dCA9IHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCIgPyBzdWIgOiBTdHJpbmcoc3ViKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkuam9pbihcIiBcIikgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBpdGVtc1xuICAgICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgICB9XG4gICAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gICAgfSwgW10pO1xuICAgIG91dHB1dHMucHVzaCh7IHBhdGg6IG91dFBhdGgsIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiIH0pO1xuICB9O1xuICBwcm9jZXNzSXRlbXMoanNvbi5jb25kaXRpb24gfHwgW10sIFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9Db25kaXRpb25zLm1kXCIpO1xuICBwcm9jZXNzSXRlbXMoanNvbi5kaXNlYXNlIHx8IFtdLCBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvRGlzZWFzZXMubWRcIik7XG4gIHJldHVybiBvdXRwdXRzO1xufVxuXG4vKipcbiAqIFBhcnNlIHNlbnNlcy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggc2Vuc2UsXG4gKiBoYW5kbGluZyBsaXN0cywgdGFibGVzLCBuZXN0ZWQgZW50cmllcy9pbnNldHMsIGFuZCBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTZW5zZXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShqc29uLnNlbnNlKSA/IGpzb24uc2Vuc2UgOiBBcnJheS5pc0FycmF5KGpzb24uc2Vuc2VzKSA/IGpzb24uc2Vuc2VzIDogW107XG4gIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3Qgc2Vuc2Ugb2YgaXRlbXMpIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke3NlbnNlLm5hbWV9YCk7XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoc2Vuc2UuZW50cmllcykgPyBzZW5zZS5lbnRyaWVzIDogW3NlbnNlLmVudHJpZXNdO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIHBhcmFzKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSBpZiAoKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiIHx8IGVudHJ5LnR5cGUgPT09IFwiaW5zZXRcIikgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBlbnRyeS5lbnRyaWVzKSB7XG4gICAgICAgICAgY29uc3QgdHh0ID0gdHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIiA/IHN1YiA6IFN0cmluZyhzdWIpO1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiLS0tXCIpLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZW50cnkucm93cykge1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KGVudHJ5KSA/IGVudHJ5LmpvaW4oXCIgXCIpIDogU3RyaW5nKGVudHJ5KTtcbiAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBzZW5zZXNcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICB9XG4gIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9TZW5zZXMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogUGFyc2Ugc2tpbGxzLmpzb24gaW50byBhIHNpbmdsZSBNYXJrZG93biBub3RlIHdpdGggIyMgaGVhZGVycyBmb3IgZWFjaCBza2lsbCxcbiAqIHByZXBlbmRpbmcgYW4gYWJpbGl0eSBsaW5lLCBoYW5kbGluZyBwYXJhZ3JhcGhzLCBhbmQgc2VwYXJhdG9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2tpbGxzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkoanNvbi5za2lsbClcbiAgICA/IGpzb24uc2tpbGxcbiAgICA6IEFycmF5LmlzQXJyYXkoanNvbi5za2lsbHMpXG4gICAgPyBqc29uLnNraWxsc1xuICAgIDogW107XG4gIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3Qgc2tpbGwgb2YgaXRlbXMpIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke3NraWxsLm5hbWV9YCk7XG4gICAgaWYgKHNraWxsLmFiaWxpdHkpIHtcbiAgICAgIGxpbmVzLnB1c2goYCpBYmlsaXR5OiAke3NraWxsLmFiaWxpdHl9KmApO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoc2tpbGwuZW50cmllcykgPyBza2lsbC5lbnRyaWVzIDogW3NraWxsLmVudHJpZXNdO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIHBhcmFzKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkuam9pbihcIiBcIikgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIHNraWxsc1xuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL1NraWxscy5tZFwiLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSxcbiAgXTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBGRUFUU19NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cbi8qKlxuICogUGFyc2UgZmVhdHMuanNvbiBpbnRvIG9uZSBNYXJrZG93biBmaWxlIHBlciBmZWF0IHVuZGVyIFBsYXllciBCdWlsZC9GZWF0cyxcbiAqIGluY2x1ZGluZyBmcm9udG1hdHRlciwgY2xlYW5lZCBwcmVyZXF1aXNpdGVzLCBhbmQgZm9ybWF0dGVkIGVudHJpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUZlYXRzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBmZWF0czogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uZmVhdClcbiAgICA/IGpzb24uZmVhdFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmZlYXRzKVxuICAgID8ganNvbi5mZWF0c1xuICAgIDogW107XG5cbiAgcmV0dXJuIGZlYXRzLm1hcCgoZmVhdDogYW55KSA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRnJvbnRtYXR0ZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3QgZm0gPSBidWlsZEZNKHsgLi4uZmVhdCwgX2VkaXRpb25JZDogZWRpdGlvbklkIH0sIEZFQVRTX01FVEFfREVGUyk7XG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgICBsaW5lcy5wdXNoKHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBGRUFUU19NRVRBX0RFRlMpKTtcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIsIFwiXCIpO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFRpdGxlIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGxpbmVzLnB1c2goYCMgJHtmZWF0Lm5hbWV9YCwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJlcmVxdWlzaXRlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBwcmVyZXFzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQucHJlcmVxdWlzaXRlKSkge1xuICAgICAgZmVhdC5wcmVyZXF1aXNpdGUuZm9yRWFjaCgocHI6IGFueSkgPT4ge1xuICAgICAgICBpZiAocHIubGV2ZWwpIHByZXJlcXMucHVzaChgTGV2ZWwgJHtwci5sZXZlbH1gKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHIuZmVhdCkpIHtcbiAgICAgICAgICBwci5mZWF0LmZvckVhY2goKGY6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGYuc3BsaXQoXCJ8XCIpWzBdLnJlcGxhY2UoL1xcYlxcdy9nLCBjID0+IGMudG9VcHBlckNhc2UoKSk7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogW1ske25hbWV9XV1gKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChmZWF0LnNwZWxsY2FzdGluZ1ByZXBhcmVkKSBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogU3BlbGxjYXN0ZXJgKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LnRvb2xQcm9maWNpZW5jaWVzKSkge1xuICAgICAgZmVhdC50b29sUHJvZmljaWVuY2llcy5mb3JFYWNoKCh0cDogYW55KSA9PiB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHRwKS5mb3JFYWNoKChba2V5XSkgPT4ge1xuICAgICAgICAgIGlmIChrZXkgPT09ICdhbnlBcnRpc2Fuc1Rvb2wnKSB7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogUHJvZmljaWVudCB3aXRoIGFuIGFydGlzYW4ncyB0b29sYCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBQcm9maWNpZW50IHdpdGggJHtrZXkucmVwbGFjZSgvKFtBLVpdKS9nLCcgJDEnKS50cmltKCl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LmFybW9yUHJvZmljaWVuY2llcykpIHtcbiAgICAgIGZlYXQuYXJtb3JQcm9maWNpZW5jaWVzLmZvckVhY2goKGFybTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGFybVN0ciA9IHR5cGVvZiBhcm0gPT09ICdzdHJpbmcnID8gYXJtIDogSlNPTi5zdHJpbmdpZnkoYXJtKTtcbiAgICAgICAgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFByb2ZpY2llbnQgd2l0aCAke2FybVN0ci5yZXBsYWNlKC8oW0EtWl0pL2csJyAkMScpLnRyaW0oKX1gKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZmVhdC5yYWNlKSBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogJHtmZWF0LnJhY2V9YCk7XG5cbiAgICBpZiAocHJlcmVxcy5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goXCIqKlByZXJlcXVpc2l0ZXMqKlwiKTtcbiAgICAgIHByZXJlcXMuZm9yRWFjaChwID0+IGxpbmVzLnB1c2goYC0gJHtwfWApKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEVudHJpZXMgcmVuZGVyaW5nIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGZlYXQuZW50cmllcykgPyBmZWF0LmVudHJpZXMgOiBbZmVhdC5lbnRyaWVzXTtcbiAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5OiBhbnkpID0+IHtcbiAgICAgIGlmICghZW50cnkpIHJldHVybjtcblxuICAgICAgLy8gUGxhaW4gdGV4dFxuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZW50cnkuc3BsaXQoL1xcbnsyLH0vKS5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgIGNvbnN0IHQgPSBwLnRyaW0oKTtcbiAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgLy8gTGlzdFxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSAnbGlzdCcgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZW50cnkuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdCl9YCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpdC50eXBlID09PSAnaXRlbScgJiYgaXQubmFtZSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAqKiR7aXQubmFtZX0qKmApO1xuICAgICAgICAgICAgY29uc3Qgc3VicyA9IEFycmF5LmlzQXJyYXkoaXQuZW50cmllcykgPyBpdC5lbnRyaWVzIDogW2l0LmVudHJpZXNdO1xuICAgICAgICAgICAgc3Vicy5mb3JFYWNoKChzOiBhbnkpID0+XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goYCAgLSAke3JlcGxhY2U1ZVRhZ3ModHlwZW9mIHMgPT09ICdzdHJpbmcnID8gcyA6IEpTT04uc3RyaW5naWZ5KHMpKX1gKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gICAgICAvLyBJbnNldCBhcyBpbmRlbnRlZCBidWxsZXRcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ2luc2V0Jykge1xuICAgICAgICBsaW5lcy5wdXNoKGAtICoke2VudHJ5Lm5hbWV9KmApO1xuICAgICAgICBjb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSA/IGVudHJ5LmVudHJpZXMgOiBbZW50cnkuZW50cmllc107XG4gICAgICAgIHN1YnMuZm9yRWFjaCgoczogYW55KSA9PiBsaW5lcy5wdXNoKGAgIC0gJHtyZXBsYWNlNWVUYWdzKHMpfWApKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgICAgLy8gU2VjdGlvbiBvciBlbnRyaWVzXG4gICAgICB9IGVsc2UgaWYgKChlbnRyeS50eXBlID09PSAnc2VjdGlvbicgfHwgZW50cnkudHlwZSA9PT0gJ2VudHJpZXMnKSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgIGlmIChlbnRyeS5uYW1lKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgZW50cnkuZW50cmllcy5mb3JFYWNoKChzOiBhbnkpID0+IHtcbiAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHlwZW9mIHMgPT09ICdzdHJpbmcnID8gcyA6IEpTT04uc3RyaW5naWZ5KHMpKSk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIFRhYmxlXG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09ICd0YWJsZScgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgICAgICBjb25zdCBoZHIgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZHIuam9pbignIHwgJyl9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hkci5tYXAoKCkgPT4gJy0tLScpLmpvaW4oJyB8ICcpfSB8YCk7XG4gICAgICAgIGVudHJ5LnJvd3MuZm9yRWFjaCgocm93OiBhbnlbXSkgPT5cbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oJyB8ICcpfSB8YClcbiAgICAgICAgKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiBgUGxheWVyIEJ1aWxkL0ZlYXRzLyR7ZmVhdC5uYW1lfS5tZGAsXG4gICAgICBjb250ZW50OiBsaW5lcy5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfTtcbiAgfSk7XG59XG4iLCAiLy8gc3JjL3BhcnNlcnMvYmFja2dyb3VuZHMudHNcbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEZNX0ZJRUxEUywgZmlsdGVyVmFsaWRTa2lsbHMsIEJBQ0tHUk9VTkRfTUVUQV9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG4vKipcbiAqIFBhcnNlIGJhY2tncm91bmRzLmpzb24gaW50byBvbmUgTWFya2Rvd24gZmlsZSBwZXIgYmFja2dyb3VuZCB1bmRlciBQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMsXG4gKiBleGNsdWRpbmcgYW55IFx1MjAxQ1ZhcmlhbnRcdTIwMjZcdTIwMUQgb3IgXHUyMDFDQmFsZHVyXHUyMDE5cyBHYXRlXHUyMDI2XHUyMDFEIGVudHJpZXMuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIC8vIHB1bGwgaW4gdGhlIGFycmF5XG4gIGNvbnN0IHJhdzogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uYmFja2dyb3VuZClcbiAgICA/IGpzb24uYmFja2dyb3VuZFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmJhY2tncm91bmRzKVxuICAgID8ganNvbi5iYWNrZ3JvdW5kc1xuICAgIDogW107XG5cbiAgLy8gZmlsdGVyIG91dCB1bndhbnRlZCBlbnRyaWVzXG4gIGNvbnN0IGJhY2tncm91bmRzID0gcmF3LmZpbHRlcihiZyA9PiB7XG4gICAgY29uc3Qgbm06IHN0cmluZyA9IGJnLm5hbWUgfHwgXCJcIjtcbiAgICByZXR1cm4gIW5tLnN0YXJ0c1dpdGgoXCJWYXJpYW50XCIpICYmICFubS5pbmNsdWRlcyhcIkJhbGR1cidzIEdhdGVcIik7XG4gIH0pO1xuXG4gIGNvbnN0IG91dHB1dHM6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgYmFja2dyb3VuZHMuZm9yRWFjaChiZyA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBidWlsZCBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IGZtID0gYnVpbGRGTShiZywgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgY29sbGVjdCBvbmx5IHRoZSBlbnRyaWVzIGZsYWdnZWQgaXNGZWF0dXJlIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgZXh0cmFUcmFpdHM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShiZy5lbnRyaWVzKVxuICA/IChiZy5lbnRyaWVzIGFzIGFueVtdKVxuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiBlLmRhdGE/LmlzRmVhdHVyZSAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKVxuICAgICAgLm1hcCgoZTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBlLm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpO1xuICAgICAgICByZXR1cm4gYFtbJHtiZy5uYW1lfSMke25hbWV9XV1gO1xuICAgICAgfSlcbiAgOiBbXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIHNlcmlhbGl6ZSBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xubGluZXMucHVzaChcIi0tLVwiLCB5YW1sLCBcIi0tLVwiLCBcIlwiKTtcblxuIFxuICAgIC8vIHRpdGxlXG4gICAgbGluZXMucHVzaChgIyAke2JnLm5hbWV9YCwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgc2tpbGwgcHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5za2lsbFByb2ZpY2llbmNpZXMpICYmIGJnLnNraWxsUHJvZmljaWVuY2llcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNraWxsczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGJnLnNraWxsUHJvZmljaWVuY2llcy5mb3JFYWNoKChlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHNraWxscy5wdXNoKGNhcChlbnQpKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnQuY2hvb3NlICYmIEFycmF5LmlzQXJyYXkoZW50LmNob29zZS5mcm9tKSkge1xuICAgICAgICAgIHNraWxscy5wdXNoKGBDaG9vc2UgJHtlbnQuY2hvb3NlLmFtb3VudH0gZnJvbSAke2VudC5jaG9vc2UuZnJvbS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoWywgdl0pID0+IHYgPT09IHRydWUpXG4gICAgICAgICAgICAuZm9yRWFjaCgoW2tdKSA9PiBza2lsbHMucHVzaChjYXAoaykpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlNraWxsIFByb2ZpY2llbmNpZXM6KiogJHtza2lsbHMuam9pbihcIiwgXCIpfWAsIFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBsYW5ndWFnZSBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLmxhbmd1YWdlUHJvZmljaWVuY2llcykgJiYgYmcubGFuZ3VhZ2VQcm9maWNpZW5jaWVzLmxlbmd0aCkge1xuICAgICAgY29uc3QgbGFuZ3M6IHN0cmluZ1tdID0gW107XG4gICAgICBiZy5sYW5ndWFnZVByb2ZpY2llbmNpZXMuZm9yRWFjaCgoZW50OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKGVudC5hbnlTdGFuZGFyZCkge1xuICAgICAgICAgIGxhbmdzLnB1c2goYCR7ZW50LmFueVN0YW5kYXJkfSBvZiB5b3VyIGNob2ljZWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFssIHZdKSA9PiB2ID09PSB0cnVlKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrXSkgPT4gbGFuZ3MucHVzaChjYXAoaykpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkxhbmd1YWdlczoqKiAke2xhbmdzLmpvaW4oXCIsIFwiKX1gLCBcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgdG9vbCBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShiZy50b29sUHJvZmljaWVuY2llcykgJiYgYmcudG9vbFByb2ZpY2llbmNpZXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHRvb2xzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGJnLnRvb2xQcm9maWNpZW5jaWVzLmZvckVhY2goKGVudDogYW55KSA9PiB7XG4gICAgICAgICAgICAvLyBcdTIwMUNDaG9vc2UgWCBmcm9tIFx1MjAyNlx1MjAxRFxuICAgICAgICAgICAgaWYgKGVudC5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShlbnQuY2hvb3NlLmZyb20pKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gZW50LmNob29zZS5mcm9tLm1hcChodW1hbml6ZSkuam9pbihcIiwgXCIpO1xuICAgICAgICAgICAgdG9vbHMucHVzaChgQ2hvb3NlICR7ZW50LmNob29zZS5jb3VudH0gZnJvbSAke2xpc3R9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHBsYWluIHN0cmluZyAocmFyZSBoZXJlLCBidXQganVzdCBpbiBjYXNlKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRvb2xzLnB1c2goaHVtYW5pemUoZW50KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG9iamVjdCB3aXRoIGJvb2xlYW4gZmxhZ3M6IGdhdGhlciAqYWxsKiB0cnVlIGtleXNcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFtfLCB2XSkgPT4gdiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChba10pID0+IHRvb2xzLnB1c2goaHVtYW5pemUoaykpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGluZXMucHVzaChgKipUb29sIFByb2ZpY2llbmNpZXM6KiogJHt0b29scy5qb2luKFwiLCBcIil9YCwgXCJcIik7XG4gICAgICAgIH1cblxuXG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgc3RhcnRpbmcgZXF1aXBtZW50IFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnN0YXJ0aW5nRXF1aXBtZW50KSAmJiBiZy5zdGFydGluZ0VxdWlwbWVudC5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqRXF1aXBtZW50OioqYCk7XG4gICAgICBiZy5zdGFydGluZ0VxdWlwbWVudC5mb3JFYWNoKChncnA6IGFueSkgPT4ge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncnAuXykpIHtcbiAgICAgICAgICBncnAuXy5mb3JFYWNoKChpdDogYW55KSA9PiBsaW5lcy5wdXNoKGAtICR7Zm10SXRlbShpdCl9YCkpO1xuICAgICAgICB9XG4gICAgICAgIFtcImFcIiwgXCJiXCJdLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncnBba2V5XSkpIHtcbiAgICAgICAgICAgIGdycFtrZXldLmZvckVhY2goaXQgPT4gbGluZXMucHVzaChgLSAke2ZtdEl0ZW0oaXQpfWApKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBhbGwgZmVhdHVyZSAmIGVudHJpZXMgYmxvY2tzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLmVudHJpZXMpKSB7XG4gICAgICBiZy5lbnRyaWVzLmZvckVhY2goKGVudHJ5OiBhbnkpID0+IHtcbiAgICAgICAgLy8gc2tpcCB0aGUgc3VtbWFyeSBsaXN0IGJsb2NrXG4gICAgICAgIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBlbnRyeS5zdHlsZSA9PT0gXCJsaXN0LWhhbmctbm90aXRsZVwiKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNlY3Rpb24gaGVhZGVyXG4gICAgICAgIGlmIChlbnRyeS5uYW1lKSB7XG5jb25zdCBoZWFkZXIgPSBlbnRyeS5kYXRhPy5pc0ZlYXR1cmVcbiAgPyBlbnRyeS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKVxuICA6IGVudHJ5Lm5hbWU7XG5saW5lcy5wdXNoKGAjIyAke2hlYWRlcn1gLCBcIlwiKTsgICAgICAgIH1cbiAgICAgICAgLy8gZW50cnkgY29udGVudFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICAgIGVudHJ5LmVudHJpZXMuZm9yRWFjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKGUpLCBcIlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGUuaXRlbXMpKSB7XG4gICAgICAgICAgICAgIGUuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT5cbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdC5lbnRyeSA/PyBpdCl9YClcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSBcInRhYmxlXCIpIHtcbiAgICAgICAgICAgICAgY29uc3QgdGJsID0gcmVuZGVyTWFya2Rvd25UYWJsZShlKTtcbiAgICAgICAgICAgICAgaWYgKHRibCkgbGluZXMucHVzaCh0YmwsIFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgICAgZW50cnkuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT5cbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0LmVudHJ5ID8/IGl0KX1gKVxuICAgICAgICAgICk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgb3V0cHV0cy5wdXNoKHtcbiAgICAgIHBhdGg6IGBQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMvJHtiZy5uYW1lfS5tZGAsXG4gICAgICBjb250ZW50OiBsaW5lcy5qb2luKFwiXFxuXCIpLnRyaW1FbmQoKSArIFwiXFxuXCIsXG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiBvdXRwdXRzO1xufVxuXG4vLyBcdTIwMTRcdTIwMTRcdTIwMTQgaGVscGVycyBcdTIwMTRcdTIwMTRcdTIwMTRcbmZ1bmN0aW9uIGNhcChzdHI6IHN0cmluZykge1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xufVxuXG5cbmZ1bmN0aW9uIGZtdEl0ZW0oaXRlbTogYW55KTogc3RyaW5nIHtcbiAgLy8gMSkgcmF3IHN0cmluZyBvciB0YWdnZWQgaXRlbVxuICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHtcbiAgICBpZiAoaXRlbS5pbmNsdWRlcyhcInxcIikpIHtcbiAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGB7QGl0ZW0gJHtpdGVtfX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoaXRlbSk7XG4gIH1cblxuICAvLyAyKSBwdXJlIGdvbGQtcGllY2UgZW50cnk6IHsgdmFsdWU6IDEwIH0gb3IgeyBjb250YWluc1ZhbHVlOiAxNTAwIH1cbiAgY29uc3QgcHJpY2VSYXcgPSAoaXRlbS5jb250YWluc1ZhbHVlID8/IGl0ZW0udmFsdWUpIGFzIG51bWJlciB8IHVuZGVmaW5lZDtcbiAgaWYgKFxuICAgIHR5cGVvZiBwcmljZVJhdyA9PT0gXCJudW1iZXJcIiAmJlxuICAgIC8vIG1ha2Ugc3VyZSBpdFx1MjAxOXMgbm90IGFsc28gYW4gXHUyMDFDaXRlbVx1MjAxRCBvciBcdTIwMUNlcXVpcG1lbnRUeXBlXHUyMDFEXG4gICAgIWl0ZW0uaXRlbSAmJlxuICAgICFpdGVtLmVxdWlwbWVudFR5cGUgJiZcbiAgICAhaXRlbS5zcGVjaWFsXG4gICkge1xuICAgIGNvbnN0IGdwID0gcHJpY2VSYXcgPj0gMTAwID8gcHJpY2VSYXcgLyAxMDAgOiBwcmljZVJhdztcbiAgICByZXR1cm4gYCR7Z3B9IGdwYDtcbiAgfVxuXG4gIC8vIDMpIGV4cGxpY2l0IGl0ZW0gb2JqZWN0IHdpdGggb3B0aW9uYWwgcHJpY2VcbiAgaWYgKGl0ZW0uaXRlbSkge1xuICAgIGNvbnN0IGxpbmsgPSByZXBsYWNlNWVUYWdzKGB7QGl0ZW0gJHtpdGVtLml0ZW19fWApO1xuICAgIGlmICh0eXBlb2YgcHJpY2VSYXcgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIGNvbnN0IGdwID0gcHJpY2VSYXcgPj0gMTAwID8gcHJpY2VSYXcgLyAxMDAgOiBwcmljZVJhdztcbiAgICAgIHJldHVybiBgJHtsaW5rfSAoJHtncH0gZ3ApYDtcbiAgICB9XG4gICAgcmV0dXJuIGxpbms7XG4gIH1cblxuICAvLyA0KSBzcGVjaWFsLWNhc2UgdGV4dFxuICBpZiAodHlwZW9mIGl0ZW0uc3BlY2lhbCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBpdGVtLnNwZWNpYWw7XG4gIH1cblxuICAvLyA1KSBrbm93biBlcXVpcG1lbnRUeXBlIGtleXNcbiAgaWYgKGl0ZW0uZXF1aXBtZW50VHlwZSkge1xuICAgIHN3aXRjaCAoaXRlbS5lcXVpcG1lbnRUeXBlKSB7XG4gICAgICBjYXNlIFwidG9vbEFydGlzYW5cIjpcbiAgICAgICAgcmV0dXJuIFwiT25lIHR5cGUgb2YgYXJ0aXNhblx1MjAxOXMgdG9vbHMgKG9mIHlvdXIgY2hvaWNlKVwiO1xuICAgICAgY2FzZSBcImluc3RydW1lbnRNdXNpY2FsXCI6XG4gICAgICAgIHJldHVybiBcIk9uZSB0eXBlIG9mIG11c2ljYWwgaW5zdHJ1bWVudCAob2YgeW91ciBjaG9pY2UpXCI7XG4gICAgICBjYXNlIFwic2V0R2FtaW5nXCI6XG4gICAgICAgIHJldHVybiBcIk9uZSBzZXQgb2YgZ2FtaW5nIGRpY2UgKG9mIHlvdXIgY2hvaWNlKVwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGh1bWFuaXplKGl0ZW0uZXF1aXBtZW50VHlwZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gNikgZmFsbGJhY2s6IGR1bXAgYW55IGxlZnRvdmVyIHRhZyBzeW50YXhcbiAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoSlNPTi5zdHJpbmdpZnkoaXRlbSkpO1xufVxuXG5cblxuZnVuY3Rpb24gaHVtYW5pemUoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBzcGFjZWQgPSBzdHIucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMSAkMlwiKTtcbiAgcmV0dXJuIHNwYWNlZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHNwYWNlZC5zbGljZSgxKTtcbn1cbiIsICIvLzVlIDIwMjUgaW5zdGFsbGVyXG5cbmltcG9ydCB7IEFwcCwgbm9ybWFsaXplUGF0aCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBFZGl0aW9uIH0gZnJvbSBcIi4uLy4uL2VkaXRpb25zXCI7XG5pbXBvcnQgeyBwYXJzZVNwZWxsc0ZpbGUgfSBmcm9tIFwiLi9zcGVsbHNcIjtcbmltcG9ydCB7IHBhcnNlQmVzdGlhcnlGaWxlIH0gZnJvbSBcIi4vYmVzdGlhcnlcIjtcbmltcG9ydCB7IHBhcnNlSXRlbXNGaWxlIH0gZnJvbSBcIi4vaXRlbXNcIjtcbmltcG9ydCB7IHBhcnNlU3BlY2llc0ZpbGUgfSBmcm9tIFwiLi9zcGVjaWVzXCI7XG5pbXBvcnQgeyBwYXJzZUNsYXNzRmlsZSB9IGZyb20gXCIuL2NsYXNzZXNcIjtcbmltcG9ydCB7IHBhcnNlQWN0aW9uc0ZpbGUsIHBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZSwgcGFyc2VTZW5zZXNGaWxlLCBwYXJzZVNraWxsc0ZpbGUgfSBmcm9tIFwiLi9ydWxlc1wiO1xuaW1wb3J0IHsgcGFyc2VGZWF0c0ZpbGUgfSBmcm9tIFwiLi9mZWF0c1wiO1xuaW1wb3J0IHsgcGFyc2VCYWNrZ3JvdW5kc0ZpbGUgfSBmcm9tIFwiLi9iYWNrZ3JvdW5kc1wiO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuXG4vLyBcdTIwMTQgR2l0SHViIGxpc3RpbmdzIFx1MjAxNFxuYXN5bmMgZnVuY3Rpb24gbGlzdFNwZWxsRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL3NwZWxsc2A7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgcmV0dXJuIGRhdGFcbiAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSBcImZpbGVcIiAmJiBpdGVtLm5hbWUuc3RhcnRzV2l0aChcInNwZWxscy1cIikgJiYgaXRlbS5uYW1lLmVuZHNXaXRoKFwiLmpzb25cIikpXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RCZXN0aWFyeUZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YS9iZXN0aWFyeWA7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGxpc3QgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgY29uc3QgQ09SRV9TT1VSQ0VTID0gW1xuICAgIFwiYmVzdGlhcnktcGhiLmpzb25cIiwgXCJiZXN0aWFyeS1tbS5qc29uXCIsIFwiYmVzdGlhcnktZG1nLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXhnZS5qc29uXCIsIFwiYmVzdGlhcnktdmdtLmpzb25cIiwgXCJiZXN0aWFyeS10Y2UuanNvblwiLFxuICAgIFwiYmVzdGlhcnktZWd3Lmpzb25cIiwgXCJiZXN0aWFyeS1lcmx3Lmpzb25cIiwgXCJiZXN0aWFyeS1tdGYuanNvblwiLFxuICAgIFwiYmVzdGlhcnktdnJnci5qc29uXCIsIFwiYmVzdGlhcnktY29zLmpzb25cIiwgXCJiZXN0aWFyeS1vb3RhLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXBvdGEuanNvblwiLCBcImJlc3RpYXJ5LWhvdGRxLmpzb25cIiwgXCJiZXN0aWFyeS1yb3QuanNvblwiLFxuICAgIFwiYmVzdGlhcnktc2t0Lmpzb25cIiwgXCJiZXN0aWFyeS10ZnR5cC5qc29uXCIsIFwiYmVzdGlhcnktdG9hLmpzb25cIlxuICBdO1xuICByZXR1cm4gbGlzdFxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIENPUkVfU09VUkNFUy5pbmNsdWRlcyhpdGVtLm5hbWUpKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG5jb25zdCBJVEVNX0pTT05fRklMRVMgPSBbXG4gIFwiaXRlbXMtYmFzZS5qc29uXCIsXG4gIFwiaXRlbXMuanNvblwiLFxuICBcIm9iamVjdHMuanNvblwiLFxuICBcInZlaGljbGVzLmpzb25cIixcbiAgXCJkZWNrcy5qc29uXCIsXG5dO1xuXG5hc3luYyBmdW5jdGlvbiBsaXN0SXRlbUZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YWA7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgcmV0dXJuIGRhdGFcbiAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSBcImZpbGVcIiAmJiBJVEVNX0pTT05fRklMRVMuaW5jbHVkZXMoaXRlbS5uYW1lKSlcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdENsYXNzRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL2NsYXNzYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgbGlzdGluZyA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gbGlzdGluZ1xuICAgIC5maWx0ZXIoaXRlbSA9PlxuICAgICAgaXRlbS50eXBlID09PSBcImZpbGVcIiAmJlxuICAgICAgaXRlbS5uYW1lLnN0YXJ0c1dpdGgoXCJjbGFzcy1cIikgJiZcbiAgICAgIGl0ZW0ubmFtZS5lbmRzV2l0aChcIi5qc29uXCIpXG4gICAgKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG4vLyBcdTIwMTQgZW5zdXJlIHRoZSB2YXVsdCBmb2xkZXIgZXhpc3RzIFx1MjAxNFxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRm9sZGVyKGFwcDogQXBwLCBmb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgY29uc3QgcGFydHMgPSBmb2xkZXJQYXRoLnNwbGl0KFwiL1wiKTtcbiAgbGV0IGN1cnIgPSBcIlwiO1xuICBmb3IgKGNvbnN0IHAgb2YgcGFydHMpIHtcbiAgICBjdXJyID0gY3VyciA/IGAke2N1cnJ9LyR7cH1gIDogcDtcbiAgICB0cnkgeyBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGN1cnIpOyB9XG4gICAgY2F0Y2gge30gLy8gYWxyZWFkeSBleGlzdHNcbiAgfVxufVxuXG4vLyBcdTIwMTQgdGhlIG9uZSBlbnRyeS1wb2ludCB0aGF0IHlvdXIgdG9wLWxldmVsIGNhbGxzIFx1MjAxNFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltcG9ydEVkaXRpb25EYXRhKHBhcmFtczoge1xuICBhcHA6IEFwcDtcbiAgZWRpdGlvbjogRWRpdGlvbjtcbiAgdGFyZ2V0UGF0aDogc3RyaW5nO1xufSkge1xuICBjb25zdCB7IGFwcCwgZWRpdGlvbiwgdGFyZ2V0UGF0aCB9ID0gcGFyYW1zO1xuICBjb25zdCByZXBvID0gZWRpdGlvbi5yZXBvID8/IFwiXCI7XG5cbiAgLy8gXHVEODNEXHVERDM5IFNQRUxMU1xuICB7XG4gICAgY29uc3Qgc3BlbGxGaWxlcyA9IGF3YWl0IGxpc3RTcGVsbEZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgICBmb3IgKGNvbnN0IGZpbGVOYW1lIG9mIHNwZWxsRmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc3BlbGxzLyR7ZmlsZU5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBjb25zdCBmaWxlcyA9IHBhcnNlU3BlbGxzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgICAgZm9yIChjb25zdCBtZCBvZiBmaWxlcykge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9TcGVsbHMvJHttZC5wYXRofWApO1xuICAgICAgICAgIGNvbnN0IGZvbGRlciAgID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcbiAgICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgc3BlbGwgJHtmaWxlTmFtZX06YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gXHVEODNEXHVERDM5IEJFU1RJQVJZXG4gIHtcbiAgICBjb25zdCBiZXN0aWFyeUZpbGVzID0gYXdhaXQgbGlzdEJlc3RpYXJ5RmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZmlsZU5hbWUgb2YgYmVzdGlhcnlGaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzICAgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2Jlc3RpYXJ5LyR7ZmlsZU5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGpzb24gICA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlQmVzdGlhcnlGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgICBmb3IgKGNvbnN0IG1kIG9mIHBhcnNlZCkge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9CZXN0aWFyeS8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBiZXN0aWFyeSAke2ZpbGVOYW1lfTpgLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdUQ4M0RcdUREMzkgSVRFTVNcbiAge1xuICAgIGNvbnN0IGl0ZW1GaWxlcyA9IGF3YWl0IGxpc3RJdGVtRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZm4gb2YgaXRlbUZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9LyR7Zm59YCk7XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VJdGVtc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBpdGVtcyBmcm9tICR7Zm59OmAsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuLy8gXHVEODNEXHVERDM5IFNQRUNJRVNcbntcbiAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9yYWNlcy5qc29uYCk7XG4gIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICBjb25zdCBtZEZpbGVzID0gcGFyc2VTcGVjaWVzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1BsYXllciBCdWlsZC8ke21kLnBhdGh9YCk7XG4gICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKSk7XG4gICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICB9XG4vLyBcdUQ4M0RcdUREMzkgRkVUQ0ggT1BUSU9OQUwgRkVBVFVSRVMgSlNPTlxubGV0IG9wdGlvbmFsRmVhdHVyZXM6IGFueVtdID0gW107XG50cnkge1xuICBjb25zdCB1cmwgID0gYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L29wdGlvbmFsZmVhdHVyZXMuanNvbmA7XG4gIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTtcblxuICAvLyBzdHJpcCBhbnkgSlNPTi1oaWphY2sgcHJlZml4IChlLmcuICldfScsKSBhbmQgYW55IEJPTS93aGl0ZXNwYWNlXG4gIGNvbnN0IHN0YXJ0ID0gdGV4dC5pbmRleE9mKFwie1wiKTtcbiAgaWYgKHN0YXJ0ID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKFwiTm8gSlNPTiBvYmplY3QgZm91bmRcIik7XG4gIGNvbnN0IGNsZWFuSnNvbiA9IHRleHQuc2xpY2Uoc3RhcnQpO1xuXG4gIGNvbnN0IHJhdyA9IEpTT04ucGFyc2UoY2xlYW5Kc29uKTtcbiAgb3B0aW9uYWxGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkocmF3Lm9wdGlvbmFsZmVhdHVyZSlcbiAgICA/IHJhdy5vcHRpb25hbGZlYXR1cmVcbiAgICA6IFtdO1xufSBjYXRjaCAoZSkge1xuICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IG9wdGlvbmFsZmVhdHVyZXMuanNvbjpcIiwgZSk7XG59XG4vLyBcdUQ4M0RcdUREMzkgQ0xBU1NFU1xue1xuICBjb25zdCBjbGFzc0ZpbGVzID0gYXdhaXQgbGlzdENsYXNzRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICBmb3IgKGNvbnN0IGZpbGVOYW1lIG9mIGNsYXNzRmlsZXMpIHtcbiAgICB0cnkge1xuICAgICAgLy8gZmV0Y2ggdGhlIHJhdyBjbGFzcyBKU09OXG4gICAgICBjb25zdCByZXMgICAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vY2xhc3MvJHtmaWxlTmFtZX1gKTtcbiAgICAgIGNvbnN0IGpzb24gICA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgIC8vIHBhcnNlIGludG8gb25lIG9yIG1vcmUgbWFya2Rvd24gZmlsZXNcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUNsYXNzRmlsZShcbiAgICAgICAganNvbixcbiAgICAgICAgZWRpdGlvbi5pZCxcbiAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgIG9wdGlvbmFsRmVhdHVyZXNcbiAgICAgICk7XG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1BsYXllciBCdWlsZC8ke21kLnBhdGh9YCk7XG4gICAgICAgIC8vIDEpIGVuc3VyZSB0aGUgZm9sZGVyIGV4aXN0c1xuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpKTtcblxuICAgICAgICAvLyAyKSB3cml0ZSB2aWEgT2JzaWRpYW5cdTIwMTlzIEFQSSBzbyBub3RlcyByZWZyZXNoXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmdWxsUGF0aCk7XG4gICAgICAgIGlmIChleGlzdGluZyBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgLy8gT3ZlcndyaXRlIGFuIGV4aXN0aW5nIG5vdGUgYW5kIGZpcmUgdGhlIGNoYW5nZSBldmVudFxuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5tb2RpZnkoZXhpc3RpbmcsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIENyZWF0ZSBhIGJyYW5kLW5ldyBub3RlIChhbHNvIGZpcmVzIHRoZSBjaGFuZ2UgZXZlbnQpXG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgY2xhc3MgJHtmaWxlTmFtZX06YCwgZSk7XG4gICAgfVxuICB9XG59XG5cblxuIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogQUNUSU9OU1xuICB7XG4gICAgdHJ5IHtcblxuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9hY3Rpb25zLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQWN0aW9uc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgYWN0aW9ucy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuXG4gICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBDT05ESVRJT05TICYgRElTRUFTRVNcbiAge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2NvbmRpdGlvbnNkaXNlYXNlcy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGNvbmRpdGlvbnNkaXNlYXNlcy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBTRU5TRVNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc2Vuc2VzLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlU2Vuc2VzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBzZW5zZXMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBTS0lMTFNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc2tpbGxzLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlU2tpbGxzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBza2lsbHMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgIC8vIFx1RDgzRFx1REQzOSBGRUFUU1xuICB7XG4gICAgdHJ5IHtcblxuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9mZWF0cy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUZlYXRzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBmZWF0cy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuLy8gXHVEODNEXHVERDM5IEJBQ0tHUk9VTkRTXG57XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9iYWNrZ3JvdW5kcy5qc29uYCk7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VCYWNrZ3JvdW5kc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG5cbiAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgIC8vIG1kLnBhdGggaXMgXCJQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMvPE5hbWU+Lm1kXCJcbiAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YCk7XG4gICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBiYWNrZ3JvdW5kcy5qc29uOlwiLCBlKTtcbiAgfVxufVxufVxufSIsICIvLyBoZWxwZXJzL3NvdXJjZU1hcC50c1xuXG4vLyBNYXAgb2YgNWUgc291cmNlIGFiYnJldmlhdGlvbnMgdG8gdGhlaXIgZnVsbCB0aXRsZXNcbmNvbnN0IFNPVVJDRV9OQU1FX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgLy8gQ29yZSBydWxlYm9va3NcbiAgUEhCOiBcIlBsYXllcidzIEhhbmRib29rXCIsXG4gIE1NOiAgXCJNb25zdGVyIE1hbnVhbFwiLFxuICBETUc6IFwiRHVuZ2VvbiBNYXN0ZXIncyBHdWlkZVwiLFxuXG4gIC8vIE9mZmljaWFsIGV4cGFuc2lvbnMgJiBhZHZlbnR1cmUgbW9kdWxlc1xuICBDb1M6ICBcIkN1cnNlIG9mIFN0cmFoZFwiLFxuICBPb3RBOiBcIk91dCBvZiB0aGUgQWJ5c3NcIixcbiAgUG90QTogXCJQcmluY2VzIG9mIHRoZSBBcG9jYWx5cHNlXCIsXG4gIEhvdERROiBcIkhvYXJkIG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgUm9UOiAgXCJSaXNlIG9mIFRpYW1hdFwiLFxuICBTS1Q6ICBcIlN0b3JtIEtpbmcncyBUaHVuZGVyXCIsXG4gIFRmdFlQOlwiVGFsZXMgZnJvbSB0aGUgWWF3bmluZyBQb3J0YWxcIixcbiAgVG9BOiAgXCJUb21iIG9mIEFubmloaWxhdGlvblwiLFxuXG4gIC8vIFN1cHBsZW1lbnRhbCBndWlkZXNcbiAgWEdFOiBcIlhhbmF0aGFyJ3MgR3VpZGUgdG8gRXZlcnl0aGluZ1wiLFxuICBWR006IFwiVm9sbydzIEd1aWRlIHRvIE1vbnN0ZXJzXCIsXG4gIFRDRTogXCJUYXNoYSdzIENhdWxkcm9uIG9mIEV2ZXJ5dGhpbmdcIixcbiAgRUdXOiBcIkViZXJyb246IFJpc2luZyBmcm9tIHRoZSBMYXN0IFdhclwiLFxuICBFUkxXOlwiRXhwbG9yZXIncyBHdWlkZSB0byBXaWxkZW1vdW50XCIsXG4gIE1URjogXCJNb25zdGVycyBvZiB0aGUgTXVsdGl2ZXJzZVwiLFxuICBWUkdSOlwiVmFuIFJpY2h0ZW4ncyBHdWlkZSB0byBSYXZlbmxvZnRcIixcblxuICAvLyBBZGRpdGlvbmFsIHNvdXJjZWJvb2tzXG4gIEFBRzogICAgICBcIkFzdHJhbCBBZHZlbnR1cmVyXHUyMDE5cyBHdWlkZVwiLFxuICBBSTogICAgICAgXCJBY3F1aXNpdGlvbnMgSW5jb3Jwb3JhdGVkXCIsXG4gIEFpdEZSQVZGVDpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmlzdWFsIEZpZWxkIFRlc3RcIixcbiAgQk1UOiAgICAgIFwiQmlnIE1vbnN0ZXIgVG9tZVwiLFxuICBEb0RrOiAgICAgXCJEcmFnb24gb2YgRGFya2tlZXBcIixcbiAgRlREOiAgICAgIFwiRml6YmFuXHUyMDE5cyBUcmVhc3VyeSBvZiBEcmFnb25zXCIsXG4gIEdHUjogICAgICBcIkd1aWxkbWFzdGVyXHUyMDE5cyBHdWlkZSB0byBSYXZuaWNhXCIsXG4gIEdITG9FOiAgICBcIkdob3N0cyBvZiB0aGUgSG9yaXpvbjogTGlnaHQgT3ZlciBFbGVuc2FyaWFcIixcbiAgSURSb3RGOiAgIFwiSWNld2luZCBEYWxlOiBSaW1lIG9mIHRoZSBGcm9zdG1haWRlblwiLFxuICBMTEs6ICAgICAgXCJMb3N0IExhYm9yYXRvcnkgb2YgS3dhbGlzaFwiLFxuICBTYXRPOiAgICAgXCJTYXBwaGlyZSBvZiBUcnV0aFwiLFxuICBTQ0M6ICAgICAgXCJTdHJpeGhhdmVuOiBDdXJyaWN1bHVtIG9mIENoYW9zXCIsXG4gIFREQ1NSOiAgICBcIlRoZSBEdW5nZW9uIENvYWNoXHUyMDE5cyBSdWxlYm9va1wiLFxuICBKdHRSQzogICAgXCJKb3VybmV5cyB0aHJvdWdoIHRoZSBSYWRpYW50IENpdGFkZWxcIixcbiAgXCJBaXRGUi1BVlRcIjpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmVyZGFudCBUb21iXCIsXG4gIFwiQWl0RlItRkNEXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBGcm9tIEN5YW4gRGVwdGhzXCIsXG4gIFJNUjogICAgICBcIkR1bmdlb25zIGFuZCBEcmFnb25zOiBSaWNrIGFuZCBNb3J0eVwiLFxuICBTQ0FHOiAgICAgXCJTd29yZCBDb2FzdCBBZHZlbnR1cmVyJ3MgR3VpZGVcIixcbiAgRUVQQzogICAgIFwiRWxlbWVudGFsIEV2aWwgUGxheWVyJ3MgQ29tcGFuaW9uXCIsXG4gIE1PVDogICAgICBcIk15dGhpYyBPZHlzc2V5cyBvZiBUaGVyb3NcIixcbiAgV0J0VzogICAgIFwiVGhlIFdpbGQgQmV5b25kIHRoZSBXaXRjaGxpZ2h0XCIsXG4gIEJHRElBOiAgICBcIkJhbGR1cidzIEdhdGU6IERlc2NlbnQgSW50byBBdmVybnVzXCIsXG4gIFRvRlc6ICAgICBcIlR1cm4gb2YgRm9ydHVuZSdzIFdoZWVsXCIsXG4gIENvQTogICAgICBcIkNoYWlucyBvZiBBc21vZGV1c1wiLFxuICBDUkNvdE46ICAgXCJDcml0aWNhbCBSb2xlOiBDYWxsIG9mIHRoZSBOZXRoZXJkZWVwXCIsXG4gIFRvRDogICAgICBcIlR5cmFubnkgb2YgRHJhZ29uc1wiLFxuICBNUE1NOiAgICAgXCJNb3JkZW5rYWluZW4gUHJlc2VudHM6IE1vbnN0ZXJzIG9mIHRoZSBNdWx0aXZlcnNlXCIsXG4gIExvWDogICAgICBcIkxpZ2h0IG9mIFhhcnl4aXNcIixcbiAgUWZ0SVM6ICAgIFwiUXVlc3RzIGZyb20gdGhlIEluZmluaXRlIFN0YWlyY2FzZVwiLFxuICBXREg6ICAgICAgXCJXYXRlcmRlZXA6IERyYWdvbiBIZWlzdFwiLFxuICBXRE1NOiAgICAgXCJXYXRlcmRlZXA6IER1bmdlb24gb2YgdGhlIE1hZCBNYWdlXCIsXG4gIFBhQlRTTzogICBcIlBoYW5kZWx2ZXIgYW5kIEJlbG93OiBUaGUgU2hhdHRlcmVkIE9iZWxpc2tcIixcbiAgQ006ICAgICAgIFwiQ2FuZGxla2VlcCBNeXN0ZXJpZXNcIixcbiAgR29TOiAgICAgIFwiR2hvc3RzIG9mIFNhbHRtYXJzaFwiLFxuICBEU290RFE6ICAgXCJEcmFnb25sYW5jZTogU2hhZG93IG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgS2Z0R1Y6ICAgIFwiS2V5cyBmcm9tIHRoZSBHb2xkZW4gVmF1bHRcIixcbiAgU0RXOiAgICAgIFwiRXNzZW50aWFscyBLaXQ6IFNsZWVwaW5nIERyYWdvbidzIFdha2VcIixcbiAgRG9TSTogICAgIFwiRHJhZ29ucyBvZiBTdG9ybXdyZWNrIElzbGVcIixcbiAgR290U0Y6ICAgIFwiR2lhbnRzIG9mIHRoZSBTdGFyIEZvcmdlXCIsXG4gIERJUDogICAgICBcIkVzc2VudGlhbHMgS2l0OiBEcmFnb24gb2YgSWNlc3BpcmUgUGVha1wiLFxuICBTTFc6ICAgICAgXCJFc3NlbnRpYWxzIEtpdDogU3Rvcm0gTG9yZCdzIFdyYXRoXCIsXG4gIElNUjogICAgICBcIkluZmVybmFsIE1hY2hpbmUgUmVidWlsZFwiLFxuICBWRW9SOiAgICAgXCJWZWNuYTogRXZlIG9mIFJ1aW5cIixcbiAgUFNJOiAgICAgIFwiUGxhbmUgU2hpZnQ6IElubmlzdHJhZFwiLFxuICBBQVRNOiAgICAgXCJBZHZlbnR1cmUgQXRsYXM6IFRoZSBNb3J0dWFyeVwiLFxuICBQU1o6ICAgICAgXCJQbGFuZSBTaGlmdDogWmVuZGlrYXJcIixcbiAgREM6ICAgICAgIFwiRXNzZW50aWFscyBLaXQ6IERpdmluZSBDb250ZW50aW9uXCIsXG4gIExNb1A6ICAgICBcIkxvc3QgTWluZSBvZiBQaGFuZGVsdmVyXCIsXG4gIFJNQlJFOiAgICBcIlRoZSBMb3N0IER1bmdlb24gb2YgUmlja2VkbmVzczogQmlnIFJpY2sgRW5lcmd5XCIsXG4gIEhmdFQ6ICAgICBcIkh1bnQgZm9yIHRoZSBUaGVzc2FsaHlkcmFcIixcbiAgUFNYOiAgICAgIFwiUGxhbmUgU2hpZnQ6IEl4YWxhblwiLFxuICBIRlN0Q006ICAgXCJIZXJvZXMnIEZlYXN0OiBTYXZpbmcgdGhlIENoaWxkcmVucyBNZW51XCIsXG4gIFNqQTogICAgICBcIlNwZWxsamFtbWVyIEFjYWRlbXlcIixcbiAgTEs6ICAgICAgIFwiTGlnaHRuaW5nIEtlZXBcIixcbiAgUnRHOiAgICAgIFwiUmV0dXJuIHRvIHRoZSBHbG9yeVwiLFxuICBUVFA6ICAgICAgXCJUaGUgVG9ydGxlIFBhY2thZ2VcIixcbiAgTFI6ICAgICAgIFwiTG9jYXRoYWggUmlzaW5nXCIsXG4gIFBTQTogICAgICBcIlBsYW5lIFNoaWZ0OiBBbW9ua2hldFwiLFxuICBPR0E6ICAgICAgXCJPbmUgR3J1bmcgQWJvdmVcIixcbiAgXCJOUkgtVExUXCI6ICBcIk5lcmRzIFJlc3RvcmluZyBIYXJtb255OiBUaGUgTG9zdCBUb21iXCIsXG4gIFwiTlJILUFUXCI6ICAgXCJOZXJkcyBSZXN0b3JpbmcgSGFybW9ueTogQWR2ZW50dXJlIFRvZ2V0aGVyXCIsXG4gIEJHRzogICAgICBcIkJpZ2J5IFByZXNlbnRzOiBHbG9yeSBvZiB0aGUgR2lhbnRzXCIsXG4gIFJvVE9TOiAgICBcIlRoZSBSaXNlIG9mIFRpYW1hdCBPbmxpbmUgU3VwcGxlbWVudFwiLFxuICBYTXRTOiAgICAgXCJYIE1hcmtzIHRoZSBTcG90XCIsXG4gIFwiSEFULUxNSVwiOiAgXCJIb25vciBBbW9uZyBUaGVpdmVzOiBMZWdlbmRhcnkgTWFnaWMgSXRlbXNcIixcbiAgRGl0TENvVDogIFwiRGVzY2VudCBpbnRvIHRoZSBMb3N0IENhdmVybnMgb2YgVHNvamNhbnRoXCIsXG4gIFwiQWl0RlItRE5cIjogXCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBEZWVwZXN0IE5pZ2h0XCIsXG4gIFwiQWl0RlItVEhQXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBUaGUgSGlkZGVuIFBhZ2VzXCIsXG4gIEJBTTogICAgICBcIkJvbydzIEFzdHJhbCBNZW5hZ2VyaWVcIixcbiAgQVpmeVQ6ICAgIFwiQSBaaWIgZm9yIFlvdXIgVGhvdWd0c1wiLFxuICBNQ1YyREM6ICAgXCJNb25zdHJvdXMgQ29tcGVuZGl1bSBWb2x1bWUgMjogRHJhZ29ubGFuY2UgQ3JlYXR1cmVzXCIsXG4gIFBTSzogICAgICBcIlBsYW5lIFNoaWZ0OiBLYWxhZGVzaFwiLFxuICBQU0Q6ICAgICAgXCJQbGFuZSBTaGlmdDogRG9taW5hcmlhXCIsXG4gIEFXTTogICAgICBcIkFkdmVudHVyZSB3aXRoIE11a1wiLFxuICBVQVRoZU15c3RpY0NsYXNzOiBcIlVuZWFydGhlZCBBcmNhbmE6IFRoZSBNeXN0aWMgQ2xhc3NcIixcbiAgQUxDdXJzZU9mU3RyYWhkOiBcIkFkdmVudHVyZXJzIExlYWd1ZTogQ3Vyc2Ugb2YgU3RyYWhkXCIsXG4gIEFMRWxlbWVudGFsRXZpbDogXCJBZHZlbnR1cmVycyBMZWFndWU6IEVsZW1lbnRhbCBFdmlsXCIsXG4gIEFMUmFnZU9mRGVtb25zOiAgXCJBZHZlbnR1cmVycyBMZWFndWU6IFJhZ2Ugb2YgRGVtb25zXCJcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZnVsbCBzb3VyY2UgbmFtZSBmb3IgYSBnaXZlbiBhYmJyZXZpYXRpb24uXG4gKiBPcHRpb25hbGx5IGFwcGVuZHMgeWVhciBmb3IgUEhCIHZhcmlhbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVsbFNvdXJjZU5hbWUoYWJicmV2OiBzdHJpbmcsIGVkaXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBuYW1lID0gU09VUkNFX05BTUVfTUFQW2FiYnJldl0gPz8gYWJicmV2O1xuXG4gIC8vIEFwcGVuZCB5ZWFyIGZvciBQSEIgaWYgdGhlIGVkaXRpb24gY29udGV4dCBpcyBrbm93blxuICBpZiAoYWJicmV2ID09PSBcIlBIQlwiKSB7XG4gICAgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDE0XCIpKSBuYW1lICs9IFwiICgyMDE0KVwiO1xuICAgIGVsc2UgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDI1XCIpKSBuYW1lICs9IFwiICgyMDI1KVwiO1xuICB9XG5cbiAgcmV0dXJuIG5hbWU7XG59XG4iLCAiLy8gcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvdGFnUmVwbGFjZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2U1ZVRhZ3MoaW5wdXQ6IHVua25vd24pOiBzdHJpbmcge1xuICAvLyAxKSBUdXJuIGFycmF5cyBpbnRvIHNwYWNlLWpvaW5lZCBzdHJpbmdzXG4gIC8vIDIpIExlYXZlIHN0cmluZ3MgYWxvbmVcbiAgLy8gMykgQ29lcmNlIGV2ZXJ5dGhpbmcgZWxzZSB0byBzdHJpbmcgKG9yIGVtcHR5KVxuICBsZXQgdGV4dDogc3RyaW5nO1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICB0ZXh0ID0gaW5wdXQuam9pbihcIiBcIik7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgdGV4dCA9IGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHRleHQgPSBTdHJpbmcoaW5wdXQgPz8gXCJcIik7XG4gIH1cblxuICAvLyBub3cgcnVuIGFsbCB5b3VyIEAtdGFnIHJlcGxhY2VtZW50cyBvbiB0aGF0IHRleHRcbiAgcmV0dXJuIHRleHRcbiAgICAucmVwbGFjZSgvXFx7QChzcGVsbHxpdGVtfGNyZWF0dXJlfHJhY2UpIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgX18sIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemVFYWNoKG5hbWUpfV1dYFxuICAgIClcbiAgICAucmVwbGFjZSgvXFx7QChjb25kaXRpb258c3RhdHVzfGFjdGlvbnxza2lsbCkgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCB0YWcsIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemUodGFnKX1zIyR7bmFtZX18JHtjYXBpdGFsaXplRWFjaChuYW1lKX1dXWBcbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0BjbGFzc0ZlYXR1cmUgKFtefH1dKylcXHwoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIGZlYXR1cmUsIGNscykgPT5cbiAgICAgIGBbWyR7Y2xzfSMke2ZlYXR1cmV9XV1gXG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAKGJvb2t8ZmlsdGVyKSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIF9fLCB0eHQpID0+IHR4dClcbiAgICAucmVwbGFjZSgvXFx7QG5vdGUgKFtefV0rKVxcfS9nLCAoXywgbm90ZSkgPT4gYCoke25vdGV9KmApXG4gICAgLnJlcGxhY2UoL1xce0AoZGFtYWdlfGRpY2V8ZGN8aGl0fHNlbnNlKSAoW159XSspXFx9L2csIChfLCBfXywgdmFsdWUpID0+IHZhbHVlKVxuICAgIC5yZXBsYWNlKC9cXHtAY2hhbmNlIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgdmFsdWUpID0+IGAke3ZhbHVlfSVgKVxuICAgIC5yZXBsYWNlKC9cXHtAcXVpY2tyZWYgKFtefH1dKykoPzpcXHxbXnxdKlxcfFtefV0qKT9cXH0vZywgKF8sIHRlcm0pID0+IHtcbiAgICAgIGNvbnN0IGtub3duID0gW1xuICAgICAgICBcImRpZmZpY3VsdCB0ZXJyYWluXCIsIFwidG90YWwgY292ZXJcIiwgXCJoYWxmIGNvdmVyXCIsIFwidGhyZWUtcXVhcnRlcnMgY292ZXJcIixcbiAgICAgICAgXCJoZWF2aWx5IG9ic2N1cmVkXCIsIFwibGlnaHRseSBvYnNjdXJlZFwiXG4gICAgICBdO1xuICAgICAgcmV0dXJuIGtub3duLmluY2x1ZGVzKHRlcm0udG9Mb3dlckNhc2UoKSlcbiAgICAgICAgPyBgW1tSdWxlcyMke2NhcGl0YWxpemVFYWNoKHRlcm0pfV1dYFxuICAgICAgICA6IHRlcm07XG4gICAgfSlcbiAgICAucmVwbGFjZSgvXFx7XFxANWV0b29sc1xccysoW158fV0rKVxcfFtefV0rXFx9L2csICckMScpXG4gICAgLnJlcGxhY2UoL1xce0ByZWNoYXJnZVxccyooW159XSspXFx9L2csIChfLCBudW0pID0+IGAocmVjaGFyZ2U6ICR7bnVtLnRyaW0oKX0pYClcbiAgICAucmVwbGFjZSgvXFx7QChzY2FsZWRpY2V8c2NhbGVkYW1hZ2UpW159XSpcXHwoW158fV0rKVxcfS9nLCAoXywgX18sIHZhbHVlKSA9PiB2YWx1ZSlcbiAgICAucmVwbGFjZSgvXFx7QGQyMFtefV0qXFx9L2csIFwiXCIpXG4gICAgLnJlcGxhY2UoL1xce0BbXn1dK1xcfS9nLCBcIlwiKTtcbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZUVhY2goc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc3RyLnNwbGl0KFwiIFwiKS5tYXAoY2FwaXRhbGl6ZSkuam9pbihcIiBcIik7XG59XG4iLCAiaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJNYXJrZG93blRhYmxlKGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAoZW50cnkudHlwZSAhPT0gXCJ0YWJsZVwiIHx8ICFBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCBjYXB0aW9uID0gZW50cnkuY2FwdGlvbiA/IGAjIyMjIyAke2VudHJ5LmNhcHRpb259XFxuYCA6IFwiXCI7XG5cbiAgY29uc3QgaGVhZGVycyA9IChlbnRyeS5jb2xMYWJlbHMgPz8gW10pXG4gICAgLm1hcCgoaDogc3RyaW5nKSA9PiByZXBsYWNlNWVUYWdzKGgudHJpbSgpKSk7IC8vIFx1MjcwNSB0YWcgcmVwbGFjZSBvbiBoZWFkZXJzXG5cbiAgY29uc3QgaGVhZGVyUm93ID0gYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgO1xuICBjb25zdCBkaXZpZGVyUm93ID0gYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIjotLVwiKS5qb2luKFwiIHwgXCIpfSB8YDtcblxuICBjb25zdCBib2R5Um93cyA9IGVudHJ5LnJvd3MubWFwKChyb3c6IGFueVtdKSA9PiB7XG4gICAgY29uc3QgY2VsbHMgPSByb3cubWFwKChjZWxsKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGNlbGwgPT09IFwic3RyaW5nXCIpIHJldHVybiByZXBsYWNlNWVUYWdzKGNlbGwpOyAvLyBcdTI3MDUgdGFnIHJlcGxhY2Ugc3RyaW5nc1xuXG4gICAgICBpZiAodHlwZW9mIGNlbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKGNlbGwucm9sbD8uZXhhY3QgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGAke2NlbGwucm9sbC5leGFjdH1gO1xuICAgICAgICBpZiAoY2VsbC5yb2xsPy5taW4gIT09IHVuZGVmaW5lZCAmJiBjZWxsLnJvbGw/Lm1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2NlbGwucm9sbC5taW59XHUyMDEzJHtjZWxsLnJvbGwubWF4fWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoSlNPTi5zdHJpbmdpZnkoY2VsbCkpOyAvLyBmYWxsYmFjayBmb3IgdW5rbm93biBzaGFwZXNcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKGNlbGwpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBgfCAke2NlbGxzLmpvaW4oXCIgfCBcIil9IHxgO1xuICB9KTtcblxuICByZXR1cm4gYCR7Y2FwdGlvbn0ke2hlYWRlclJvd31cXG4ke2RpdmlkZXJSb3d9XFxuJHtib2R5Um93cy5qb2luKFwiXFxuXCIpfWA7XG59XG4iLCAiLy8gZm9ybWF0RW50cnkudHNcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL21hcmtkb3duVGFibGVcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgY2xlYW5lZCA9IGVudHJ5LnRyaW0oKTtcbiAgICBpZiAoIWNsZWFuZWQgfHwgY2xlYW5lZCA9PT0gXCJ9XCIpIHJldHVybiBcIlwiO1xuICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGNsZWFuZWQpO1xuICB9XG5cbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBib2R5ID0gZW50cnkuZW50cmllc1xuICAgICAgLm1hcChmb3JtYXRFbnRyeSlcbiAgICAgIC5maWx0ZXIoKHN0cjogc3RyaW5nKSA9PiBzdHIudHJpbSgpLmxlbmd0aCA+IDApXG4gICAgICAuam9pbihcIlxcblxcblwiKTtcblxuICAgIHJldHVybiBlbnRyeS5uYW1lXG4gICAgICA/IGAjIyMjIyAke2VudHJ5Lm5hbWV9XFxuJHtib2R5fWBcbiAgICAgIDogYm9keTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgIHJldHVybiBlbnRyeS5pdGVtc1xuICAgICAgLm1hcCgoaTogYW55KSA9PiBgLSAke3JlcGxhY2U1ZVRhZ3ModHlwZW9mIGkgPT09IFwic3RyaW5nXCIgPyBpIDogSlNPTi5zdHJpbmdpZnkoaSkpfWApXG4gICAgICAuam9pbihcIlxcblwiKTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgIHJldHVybiByZW5kZXJNYXJrZG93blRhYmxlKGVudHJ5KTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcInF1b3RlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgIGNvbnN0IHF1b3RlID0gZW50cnkuZW50cmllcy5tYXAoZm9ybWF0RW50cnkpLmpvaW4oXCIgXCIpLnRyaW0oKTtcbiAgICBjb25zdCBhdXRob3IgPSBlbnRyeS5ieSA/IGAgXHUyMDE0ICR7ZW50cnkuYnl9YCA6IFwiXCI7XG4gICAgcmV0dXJuIGAqXCIke3F1b3RlfSR7YXV0aG9yfVwiKmA7XG4gIH1cblxuICBpZiAoZW50cnkudHlwZSA9PT0gXCJpbnNldFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBpbnNldCA9IGVudHJ5LmVudHJpZXMubWFwKGZvcm1hdEVudHJ5KS5qb2luKFwiXFxuXCIpLnRyaW0oKTtcbiAgICByZXR1cm4gYD4gJHtpbnNldC5yZXBsYWNlKC9cXG4vZywgXCJcXG4+IFwiKX1gO1xuICB9XG5cbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwicmVmQ2xhc3NGZWF0dXJlXCIgJiYgdHlwZW9mIGVudHJ5LmNsYXNzRmVhdHVyZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IFtuYW1lXSA9IGVudHJ5LmNsYXNzRmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgLnJlcGxhY2UoL1teXFx3XFxzLV0vZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIGBbWyMke2FuY2hvcn1dXWA7XG4gIH1cblxuICAvLyBJZiBpdCdzIGFuIHVua25vd24gb2JqZWN0LCBza2lwIGl0IHNhZmVseVxuICByZXR1cm4gXCJcIjtcbn1cbiIsICIvLyBwYXJzZXJzLzVlLWpzb24vYmVzdGlhcnkudHNcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwic3JjL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEJFU1RJQVJZX01FVEFfREVGUywgdW5pZmllZFNraWxscywgRk1fRklFTERTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5jb25zdCBza2lwcGVkTW9uc3RlcnM6IHN0cmluZ1tdID0gW107XG5cbi8vIFNpemUgYWJicmV2aWF0aW9ucyBtYXBwaW5nXG5leHBvcnQgXG5jb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbi8vIEFsaWdubWVudCBhYmJyZXZpYXRpb25zIG1hcHBpbmdcbmNvbnN0IEFMSUdOTUVOVF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEw6IFwiTGF3ZnVsXCIsXG4gIE46IFwiTmV1dHJhbFwiLFxuICBDOiBcIkNoYW90aWNcIixcbiAgRzogXCJHb29kXCIsXG4gIEU6IFwiRXZpbFwiLFxuICBVOiBcIlVuYWxpZ25lZFwiXG59O1xuXG4vLyBIZWxwZXIgdG8gY2FwaXRhbGl6ZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmdcbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdChzdHI6IHVua25vd24pOiBzdHJpbmcge1xuICBjb25zdCBzID0gU3RyaW5nKHN0ciB8fCBcIlwiKTtcbiAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U2l6ZUFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBTSVpFX01BUFthYmJyZXZdIHx8IGFiYnJldjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEFsaWdubWVudEFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBhYmJyZXZcbiAgICAudHJpbSgpXG4gICAgLnNwbGl0KC9cXHMrLylcbiAgICAubWFwKGxldHRlciA9PiBBTElHTk1FTlRfTUFQW2xldHRlcl0gfHwgbGV0dGVyKVxuICAgIC5qb2luKFwiIFwiKTtcbn1cblxuY29uc3QgUkFXX05QQ1M6IHN0cmluZ1tdID0gW1xuICBcIkFianVyZXJcIiwgXCJBY29seXRlXCIsIFwiQXBwcmVudGljZSBXaXphcmRcIiwgXCJBcmNoZHJ1aWRcIiwgXCJBcmNoZXJcIiwgXCJBcmNobWFnZVwiLCBcIkFzc2Fzc2luXCIsXG4gIFwiQmFuZGl0XCIsIFwiQmFuZGl0IENhcHRhaW5cIiwgXCJCYXJkXCIsIFwiQmVyc2Vya2VyXCIsIFwiQmxhY2tndWFyZFwiLCBcIkNoYW1waW9uXCIsIFwiQ29tbW9uZXJcIixcbiAgXCJDb25qdXJlclwiLCBcIkN1bHQgRmFuYXRpY1wiLCBcIkN1bHRpc3RcIiwgXCJEaXZpbmVyXCIsIFwiRHJ1aWQgKE5QQylcIiwgXCJEcnVpZCBOUENcIiwgXCJFbmNoYW50ZXJcIixcbiAgXCJFdm9rZXJcIiwgXCJHbGFkaWF0b3JcIiwgXCJHdWFyZFwiLCBcIklsbHVzaW9uaXN0XCIsIFwiS25pZ2h0XCIsIFwiS3Jha2VuIFByaWVzdFwiLCBcIk1hZ2VcIixcbiAgXCJNYXJ0aWFsIEFydHMgQWRlcHRcIiwgXCJNYXN0ZXIgVGhpZWZcIiwgXCJOZWNyb21hbmNlclwiLCBcIk5vYmxlXCIsIFwiUHJpZXN0XCIsIFwiU2NvdXRcIiwgXCJTcHlcIixcbiAgXCJTd2FzaGJ1Y2tsZXJcIiwgXCJUaHVnXCIsIFwiVHJhbnNtdXRlclwiLCBcIlRyaWJhbCBXYXJyaW9yXCIsIFwiVmV0ZXJhblwiLCBcIldhciBQcmllc3RcIixcbiAgXCJXYXJsb2NrIG9mIHRoZSBBcmNoZmV5XCIsIFwiV2FybG9jayBvZiB0aGUgRmllbmRcIiwgXCJXYXJsb2NrIG9mIHRoZSBHcmVhdCBPbGQgT25lXCIsIFwiV2FybG9yZFwiXG5dO1xuY29uc3QgTk9STUFMSVpFRF9OUENfTkFNRVMgPSBuZXcgU2V0KFJBV19OUENTLm1hcChuID0+IG5vcm1hbGl6ZU5hbWUobikpKTtcblxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2F0ZWdvcml6ZUNyZWF0dXJlKG1vbnN0ZXI6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IHR5cGVWYWx1ZSA9IG1vbnN0ZXIudHlwZTtcbiAgY29uc3QgbmFtZSA9IG1vbnN0ZXIubmFtZTtcbiAgY29uc3QgdCA9IHR5cGVvZiB0eXBlVmFsdWUgPT09IFwic3RyaW5nXCJcbiAgICA/IHR5cGVWYWx1ZS50b0xvd2VyQ2FzZSgpXG4gICAgOiB0eXBlVmFsdWU/LnR5cGU/LnRvTG93ZXJDYXNlKCkgfHwgU3RyaW5nKHR5cGVWYWx1ZSkudG9Mb3dlckNhc2UoKTtcblxuICBjb25zdCBub3JtYWxpemVkTmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSk7XG5cbiAgaWYgKG1vbnN0ZXIuaXNOcGMgfHwgbW9uc3Rlci5pc05hbWVkQ3JlYXR1cmUpIHJldHVybiBcIlN0b3J5IE5QQ3NcIjtcbiAgaWYgKHQgPT09IFwiYmVhc3RcIikgcmV0dXJuIFwiQmVhc3RzXCI7XG4gIGlmICh0ID09PSBcImh1bWFub2lkXCIgJiYgTk9STUFMSVpFRF9OUENfTkFNRVMuaGFzKG5vcm1hbGl6ZWROYW1lKSkgcmV0dXJuIFwiTm9uLUJlYXN0c1wiO1xuICBpZiAodCA9PT0gXCJodW1hbm9pZFwiKSByZXR1cm4gXCJNb25zdGVyc1wiO1xuICByZXR1cm4gXCJNb25zdGVyc1wiO1xufVxuXG5mdW5jdGlvbiByZW5kZXJBYmlsaXRpZXNUYWJsZShzdHI6IG51bWJlciwgZGV4OiBudW1iZXIsIGNvbjogbnVtYmVyLCBpbnQ6IG51bWJlciwgd2lzOiBudW1iZXIsIGNoYTogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIFtcbiAgICBgfCBTVFIgfCBERVggfCBDT04gfCBJTlQgfCBXSVMgfCBDSEEgfGAsXG4gICAgYHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHxgLFxuICAgIGB8ICR7c3RyfSB8ICR7ZGV4fSB8ICR7Y29ufSB8ICR7aW50fSB8ICR7d2lzfSB8ICR7Y2hhfSB8YFxuICBdLmpvaW4oXCJcXG5cIik7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBuYW1lID0gZW50cnkubmFtZTtcbiAgbGV0IGRlc2NyaXB0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5lbnRyaWVzO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5lbnRyaWVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmVudHJpZXNdO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZGVzYykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5kZXNjO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5kZXNjID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmRlc2NdO1xuICB9XG4gIGNvbnN0IHJhdyA9IGRlc2NyaXB0aW9ucy5qb2luKFwiIFwiKTtcbiAgY29uc3QgZGVzYyA9IHJlcGxhY2U1ZVRhZ3MocmF3KTtcbiAgcmV0dXJuIGAqKioke25hbWV9LioqKiAke2Rlc2N9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmVzdGlhcnlGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gICAgaWYgKCFqc29uLm1vbnN0ZXIpIHJldHVybiBbXTtcbiAgICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG4gIFxuICAgIC8vIDEpIEZpbHRlciBvdXQgXHUyMDFDcmVmZXJlbmNlXHUyMDFEIGVudHJpZXMgd2l0aCBubyBBQyBvciBIUFxuICAgIGNvbnN0IHZhbGlkTW9uc3RlcnMgPSBqc29uLm1vbnN0ZXIuZmlsdGVyKChtOiBhbnkpID0+IHtcbiAgICBjb25zdCBhY1ZhbCA9IEFycmF5LmlzQXJyYXkobS5hYylcbiAgICAgID8gbS5hY1swXT8uYWMgPz8gbS5hY1swXVxuICAgICAgOiB0eXBlb2YgbS5hYyA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IG0uYWM/LmFjID8/IG51bGxcbiAgICAgICAgOiBtLmFjO1xuXG4gICAgY29uc3QgaHBWYWwgPSB0eXBlb2YgbS5ocCA9PT0gXCJvYmplY3RcIlxuICAgICAgPyBtLmhwPy5hdmVyYWdlID8/IG0uaHA/LmhwID8/IG51bGxcbiAgICAgIDogbS5ocDtcbiAgICAgIHJldHVybiBhY1ZhbCAhPSBudWxsICYmIGhwVmFsICE9IG51bGwgJiYgIWlzTmFOKE51bWJlcihhY1ZhbCkpICYmICFpc05hTihOdW1iZXIoaHBWYWwpKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGFsbE5hbWVzID0gbmV3IFNldChqc29uLm1vbnN0ZXIubWFwKChtOiBhbnkpID0+IG0ubmFtZSkpO1xuY29uc3QgdmFsaWROYW1lcyA9IG5ldyBTZXQodmFsaWRNb25zdGVycy5tYXAoKG06IGFueSkgPT4gbS5uYW1lKSk7XG5jb25zdCBtaXNzaW5nID0gWy4uLmFsbE5hbWVzXS5maWx0ZXIobmFtZSA9PiAhdmFsaWROYW1lcy5oYXMobmFtZSkpO1xuXG4gIFxuICAgIHJldHVybiB2YWxpZE1vbnN0ZXJzLm1hcCgobW9uc3RlcjogYW55KSA9PiB7XG4gICAgICBjb25zdCBuYW1lICAgICA9IG1vbnN0ZXIubmFtZSBhcyBzdHJpbmc7XG4gICAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvXFwvL2csIFwiLVwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgUmF3IGZpZWxkcyAmIGZvcm1hdHRpbmcgXHUyMDE0XG4gICAgICBjb25zdCByYXdTaXplICAgICAgPSBtb25zdGVyLnNpemUgfHwgXCJNXCI7XG4gICAgICBjb25zdCByYXdBbGlnbm1lbnQgPSBBcnJheS5pc0FycmF5KG1vbnN0ZXIuYWxpZ25tZW50KVxuICAgICAgICA/IG1vbnN0ZXIuYWxpZ25tZW50LmpvaW4oXCIgXCIpXG4gICAgICAgIDogbW9uc3Rlci5hbGlnbm1lbnQgfHwgXCJOXCI7XG4gICAgbGV0IHJhd1R5cGUgPSBcIlVua25vd25cIjtcblxuICAgIGlmICh0eXBlb2YgbW9uc3Rlci50eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByYXdUeXBlID0gY2FwaXRhbGl6ZUZpcnN0KG1vbnN0ZXIudHlwZSk7XG4gICAgfSBlbHNlIGlmIChtb25zdGVyLnR5cGU/LnR5cGUpIHtcbiAgICAgIGNvbnN0IGJhc2UgPSBjYXBpdGFsaXplRmlyc3QobW9uc3Rlci50eXBlLnR5cGUpO1xuICAgICAgY29uc3QgdGFncyA9IG1vbnN0ZXIudHlwZS50YWdzPy5sZW5ndGggPyBgICgke21vbnN0ZXIudHlwZS50YWdzLm1hcChjYXBpdGFsaXplRmlyc3QpLmpvaW4oXCIsIFwiKX0pYCA6IFwiXCI7XG4gICAgICByYXdUeXBlID0gYCR7YmFzZX0ke3RhZ3N9YDtcbiAgICB9XG5cbiAgICBtb25zdGVyLl9wYXJzZWRUeXBlID0gcmF3VHlwZTtcbiAgICAgIFxuICAgIC8vIFx1MjAxNCBBQywgSFAsIENSIFx1MjAxNFxuICAgIGNvbnN0IGFjID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFjKSA/IG1vbnN0ZXIuYWNbMF0uYWMgOiBtb25zdGVyLmFjO1xuICAgIGNvbnN0IGhwID0gbW9uc3Rlci5ocD8uYXZlcmFnZSA/PyBtb25zdGVyLmhwO1xuICAgIGNvbnN0IGNyID0gbW9uc3Rlci5jcjtcblxuICAgIC8vIFNraXAgbW9uc3RlcnMgd2l0aCBubyBBQyBhbmQgSFBcbiAgICBpZiAoIWFjICYmICFocCkge1xuICAgICAgc2tpcHBlZE1vbnN0ZXJzLnB1c2gobW9uc3Rlci5uYW1lKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHUyMDE0IEFiaWxpdGllcyBcdTIwMTRcbiAgICAgIGNvbnN0IGFiaWxpdGllcyA9IEFycmF5LmlzQXJyYXkobW9uc3Rlci5hYmlsaXR5KVxuICAgICAgICA/IG1vbnN0ZXIuYWJpbGl0eVxuICAgICAgICA6IFttb25zdGVyLnN0ciwgbW9uc3Rlci5kZXgsIG1vbnN0ZXIuY29uLCBtb25zdGVyLmludCwgbW9uc3Rlci53aXMsIG1vbnN0ZXIuY2hhXTtcbiAgICAgIGNvbnN0IFtzdHIgPSAxMCwgZGV4ID0gMTAsIGNvbiA9IDEwLCBpbnQgPSAxMCwgd2lzID0gMTAsIGNoYSA9IDEwXSA9IGFiaWxpdGllcztcbiAgXG4gICAgICAvLyBcdTIwMTQgU3BlZWQgKGhhbmRsZXMgaG92ZXIgJiBvYmplY3Qgc3BlZWRzKSBcdTIwMTRcbiAgICAgIGNvbnN0IHNwZWVkTGlzdDogc3RyaW5nW10gPSBbXTtcbiAgICAgIGlmICh0eXBlb2YgbW9uc3Rlci5zcGVlZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBmb3IgKGNvbnN0IFttb2RlLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKG1vbnN0ZXIuc3BlZWQpKSB7XG4gICAgICAgICAgaWYgKG1vZGUgPT09IFwiY2FuSG92ZXJcIikgY29udGludWU7XG4gICAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIFwibnVtYmVyXCIgaW4gdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBudW0gID0gKHZhbCBhcyBhbnkpLm51bWJlcjtcbiAgICAgICAgICAgIGNvbnN0IGNvbmQgPSAodmFsIGFzIGFueSkuY29uZGl0aW9uID8gYCAkeyh2YWwgYXMgYW55KS5jb25kaXRpb259YCA6IFwiXCI7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke251bX0gZnQuJHtjb25kfWApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke3ZhbH0gZnQuYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb25zdGVyLnNwZWVkfSBmdC5gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwZWVkID0gc3BlZWRMaXN0LmpvaW4oXCIsIFwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgU291cmNlIHNhbml0aXphdGlvbiBcdTIwMTRcbiAgICAgIGxldCBzb3VyY2UgPSBnZXRGdWxsU291cmNlTmFtZShtb25zdGVyLnNvdXJjZSwgZWRpdGlvbklkKTtcbiAgICAgIHNvdXJjZSAgICAgPSBzb3VyY2UucmVwbGFjZSgvOi9nLCBcIiAtXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBDYXRlZ29yeSBmb3IgZm9sZGVyIFx1MjAxNFxuICAgICAgY29uc3QgY2F0ZWdvcnkgPSBjYXRlZ29yaXplQ3JlYXR1cmUobW9uc3Rlcik7XG4gIFxuICAgICAgY29uc3QgZm0gICA9IGJ1aWxkRk0obW9uc3RlciwgQkVTVElBUllfTUVUQV9ERUZTKTtcbiAgICAgIGNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQkVTVElBUllfTUVUQV9ERUZTKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2F2aW5nVGhyb3dzID0gKGZtW0ZNX0ZJRUxEUy5TQVZJTkdfVEhST1dTXSBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgICBjb25zdCBza2lsbHMgICAgICAgPSAoZm1bRk1fRklFTERTLlNLSUxMU10gICAgICAgIGFzIHN0cmluZ1tdKSB8fCBbXTtcbiAgICAgIGNvbnN0IHNlbnNlcyAgICAgICA9IChmbVtGTV9GSUVMRFMuU0VOU0VTXSAgICAgICAgYXMgc3RyaW5nW10pIHx8IFtdO1xuICAgICAgY29uc3QgbGFuZ3VhZ2VzICAgID0gKGZtW0ZNX0ZJRUxEUy5MQU5HVUFHRVNdICAgICBhcyBzdHJpbmdbXSkgfHwgW107XG5cblxuICAgICAgLy8gXHUyMDE0IEJvZHkgXHUyMDE0XG4gICAgICBsZXQgYm9keSA9XG4gICAgICBgIyAke25hbWV9XFxuXFxuYCArXG4gICAgICBgJHtmb3JtYXRTaXplQWJicmV2KHJhd1NpemUpfSAke3Jhd1R5cGV9LCAke2Zvcm1hdEFsaWdubWVudEFiYnJldihyYXdBbGlnbm1lbnQpfVxcblxcbmAgK1xuICAgICAgYCoqQXJtb3IgQ2xhc3MqKjogJHthY31cXG5gICtcbiAgICAgIGAqKkhpdCBQb2ludHMqKjogJHtocH1cXG5gICtcbiAgICAgIGAqKlNwZWVkKio6ICR7c3BlZWR9XFxuYCArXG4gICAgICAoc2F2aW5nVGhyb3dzLmxlbmd0aFxuICAgICAgICA/IGAqKlNhdmluZyBUaHJvd3MqKjogJHtzYXZpbmdUaHJvd3Muam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICAoc2tpbGxzLmxlbmd0aFxuICAgICAgICA/IGAqKlNraWxscyoqOiAke3NraWxscy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIChzZW5zZXMubGVuZ3RoXG4gICAgICAgID8gYCoqU2Vuc2VzKio6ICR7c2Vuc2VzLmpvaW4oXCIsIFwiKX1cXG5gXG4gICAgICAgIDogXCJcIikgK1xuICAgICAgKGxhbmd1YWdlcy5sZW5ndGhcbiAgICAgICAgPyBgKipMYW5ndWFnZXMqKjogJHtsYW5ndWFnZXMuam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICBgKipDaGFsbGVuZ2UqKjogJHtjcn1cXG5cXG5gICtcbiAgICAgIHJlbmRlckFiaWxpdGllc1RhYmxlKHN0ciwgZGV4LCBjb24sIGludCwgd2lzLCBjaGEpO1xuXG4gIFxuICAgICAgaWYgKG1vbnN0ZXIudHJhaXQpICAgICBib2R5ICs9IGBcXG5cXG4jIyMgVHJhaXRzXFxuJHttb25zdGVyLnRyYWl0Lm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICAgICAgaWYgKG1vbnN0ZXIuYWN0aW9uKSAgICBib2R5ICs9IGBcXG5cXG4jIyMgQWN0aW9uc1xcbiR7bW9uc3Rlci5hY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5yZWFjdGlvbikgIGJvZHkgKz0gYFxcblxcbiMjIyBSZWFjdGlvbnNcXG4ke21vbnN0ZXIucmVhY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5sZWdlbmRhcnkpIGJvZHkgKz0gYFxcblxcbiMjIyBMZWdlbmRhcnkgQWN0aW9uc1xcbiR7bW9uc3Rlci5sZWdlbmRhcnkubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gIFxuICAgICAgY29uc3QgY29udGVudCA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtib2R5fWA7XG4gIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDogICAgYCR7Y2F0ZWdvcnl9LyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudCxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiIsICIvLyA1ZSAyMDI1IGl0ZW1zIHBhcnNlclxuXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9ICAgICBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgSVRFTV9NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cblxuLyoqIEhlbHBlciB0byBjYXBpdGFsaXplIGZpcnN0IGxldHRlciBcdTIwMTMgbmV2ZXIgY3Jhc2hlcyBvbiBub24tc3RyaW5ncyAqL1xuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0KGlucHV0OiBhbnkpOiBzdHJpbmcge1xuICAvLyBpZiBpdFx1MjAxOXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZywgYmFpbCBvdXRcbiAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gXCJzdHJpbmdcIiB8fCBpbnB1dC5sZW5ndGggPT09IDApIHJldHVybiBcIlwiO1xuICBjb25zdCBzID0gaW5wdXQudHJpbSgpO1xuICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbn1cblxuXG5leHBvcnQgY29uc3QgREFNQUdFX1RZUEVfTUFQOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIFA6IFwiUGllcmNpbmdcIixcbiAgQjogXCJCbHVkZ2VvbmluZ1wiLFxuICBTOiBcIlNsYXNoaW5nXCIsXG4gIE46IFwiTmVjcm90aWNcIixcbiAgUjogXCJSYWRpYW50XCIsXG4gIEY6IFwiRmlyZVwiLFxuICBDOiBcIkNvbGRcIixcbiAgTDogXCJMaWdodG5pbmdcIixcbiAgVDogXCJUaHVuZGVyXCIsXG4gIEE6IFwiQWNpZFwiLFxuICBIOiBcIkhlYWxpbmdcIixcbiAgVTogXCJGb3JjZVwiLFxuICBWOiBcIlBzeWNoaWNcIixcbn07XG5cbmV4cG9ydCBjb25zdCBQUk9QRVJUWV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgQTogXCJBbW11bml0aW9uXCIsXG4gIEY6IFwiRmluZXNzZVwiLFxuICBIOiBcIkhlYXZ5XCIsXG4gIEw6IFwiTGlnaHRcIixcbiAgUjogXCJSZWxvYWRcIixcbiAgUzogXCJTcGVjaWFsXCIsXG4gIFwiMkhcIjogXCJUd28tSGFuZGVkXCIsXG4gIFQ6IFwiVGhyb3duXCIsXG4gIFY6IFwiVmVyc2F0aWxlXCJcbn07XG5cbmV4cG9ydCBjb25zdCBJVEVNX1RZUEVfTUFQOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gICRDOiAgXCJDdXJyZW5jeVwiLFxuICAkRzogIFwiR2VtXCIsXG4gIEE6ICAgXCJBbW11bml0aW9uXCIsXG4gIFwiQUlSfERNR1wiOiBcIlZlaGljbGUgKGFpcilcIixcbiAgXCJBRnxETUdcIjogXCJGdXR1cmUgQW1tb1wiLFxuICBBVDogIFwiQXJ0aXNhbiBUb29sc1wiLFxuICBFWFA6IFwiRXhwbG9zaXZlXCIsXG4gIEZEOiAgXCJGb29kIGFuZCBEcmlua1wiLFxuICBHOiAgIFwiR2VhclwiLFxuICBHUzogIFwiR2FtZVwiLFxuICBIQTogIFwiSGVhdnkgQXJtb3JcIixcbiAgXCJJREd8VERDU1JcIjogXCJJbGxpY2l0IERydWdcIixcbiAgSU5TOiBcIkluc3RydW1lbnRcIixcbiAgTEE6ICBcIkxpZ2h0IEFybW9yXCIsXG4gIE06ICAgXCJXZWFwb25cIixcbiAgTUE6ICBcIk1lZGl1bSBBcm1vclwiLFxuICBNTlQ6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBPREg6IFwiTWlzY2VsbGFuZW91c1wiLFxuICBQOiAgIFwiQ29uc3VtYWJsZVwiLFxuICBSOiAgIFwiUmFuZ2VkIFdlYXBvblwiLFxuICBSRDogIFwiUm9kXCIsXG4gIFJHOiAgXCJSaW5nXCIsXG4gIFM6ICAgXCJTaGllbGRcIixcbiAgU0M6ICBcIlNjcm9sbFwiLFxuICBTQ0Y6IFwiU3BlbGwgQ2FzdGluZyBGb2N1c1wiLFxuICBTSFA6IFwiU2hpcFwiLFxuICBUOiAgIFwiVG9vbFwiLFxuICBUQUg6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBURzogIFwiVHJhZGUgR29vZHNcIixcbiAgVkVIOiBcIk1vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgV0Q6ICBcIldhbmRcIixcbn07XG5cbi8qKiBjb2RlIFx1MjE5MiBmdWxsIGZvbGRlciBwYXRoIHVuZGVyIEl0ZW1zLyAqL1xuY29uc3QgY29kZUZvbGRlck1hcDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAvLyBXZWFwb25zICYgQXJtb3JcbiAgXCJBXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9BbW11bml0aW9uXCIsXG4gIFwiTVwiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvV2VhcG9uc1wiLFxuICBcIlJcIjogICBcIldlYXBvbnMgYW5kIEFybW9yL1JhbmdlZCBXZWFwb25zXCIsXG4gIFwiU1wiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvU2hpZWxkc1wiLFxuICBcIkxBXCI6ICBcIldlYXBvbnMgYW5kIEFybW9yL0FybW9yL0xpZ2h0IEFybW9yXCIsXG4gIFwiTUFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvTWVkaXVtIEFybW9yXCIsXG4gIFwiSEFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvSGVhdnkgQXJtb3JcIixcbiAgXCJFWFBcIjogXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zL0V4cGxvc2l2ZXNcIixcbiAgLy8gRnV0dXJlIEFtbW8gKEFGfERNRyBcdTIxOTIgcmF3Q29kZSBcIkFGXCIpXG4gIFwiQUZcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQW1tdW5pdGlvbi9GdXR1cmUgQW1tb1wiLFxuXG4gIC8vIE1hZ2ljYWwgSXRlbXNcbiAgXCJSRFwiOiAgXCJNYWdpY2FsIEl0ZW1zL1JvZHNcIixcbiAgXCJSR1wiOiAgXCJNYWdpY2FsIEl0ZW1zL1JpbmdzXCIsXG4gIFwiU0NcIjogIFwiTWFnaWNhbCBJdGVtcy9TY3JvbGxzXCIsXG4gIFwiU0NGXCI6IFwiTWFnaWNhbCBJdGVtcy9TcGVsbCBDYXN0aW5nIEZvY3VzXCIsXG4gIFwiV0RcIjogIFwiTWFnaWNhbCBJdGVtcy9XYW5kc1wiLFxuXG4gIC8vIFZhbHVhYmxlc1xuICBcIiRHXCI6IFwiVmFsdWFibGVzL0dlbXNcIixcbiAgLy8gQ3VycmVuY3kgKHJhd0NvZGUgYmVjb21lcyBcIkNcIiBhZnRlciBzdHJpcHBpbmcgJClcbiAgXCJDXCI6ICBcIlZhbHVhYmxlcy9DdXJyZW5jeVwiLFxuICBcIlRHXCI6IFwiVmFsdWFibGVzL1RyYWRlIEdvb2RzXCIsXG5cbiAgLy8gQXJ0aXNhbiBHb29kc1xuICBcIkFUXCI6ICBcIkFydGlzYW4gR29vZHMvVG9vbHNcIixcbiAgXCJUXCI6ICAgXCJBcnRpc2FuIEdvb2RzL1Rvb2xzXCIsXG4gIFwiSU5TXCI6IFwiQXJ0aXNhbiBHb29kcy9JbnN0cnVtZW50c1wiLFxuICBcIkdTXCI6ICBcIkFydGlzYW4gR29vZHMvR2FtZXNcIixcblxuICAvLyBHZWFyICYgTW91bnRzXG4gIFwiR1wiOiAgIFwiR2VhclwiLFxuICAvLyBNb3VudHMgJiBWZWhpY2xlc1xuICBcIk1OVFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBcIlRBSFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBcIlZFSFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICAvLyBBaXIgdmVoaWNsZXMgKEFJUnxETUcgXHUyMTkyIHJhd0NvZGUgXCJBSVJcIilcbiAgXCJBSVJcIjogXCJHZWFyL01vdW50cyBhbmQgVmVoaWNsZXMvQWlyXCIsXG5cbiAgLy8gQ29uc3VtYWJsZXNcbiAgXCJQXCI6ICAgXCJDb25zdW1hYmxlc1wiLFxuICAvLyBGb29kICYgRHJpbmtcbiAgXCJGRFwiOiAgXCJDb25zdW1hYmxlcy9Gb29kIGFuZCBEcmlua1wiLFxuXG4gIC8vIElsbGljaXQgRHJ1Z3MgKElER3xURENTUiBcdTIxOTIgcmF3Q29kZSBcIklER1wiKVxuICBcIklER1wiOiBcIkdlYXIvSWxsaWNpdCBEcnVnc1wiLFxuXG4gIC8vIE1pc2NlbGxhbmVvdXMgKE9ESClcbiAgXCJPREhcIjogXCJHZWFyL01pc2NlbGxhbmVvdXNcIixcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUl0ZW1zRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCByYXdJdGVtczogYW55W10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5iYXNlaXRlbSkpIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5iYXNlaXRlbSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24uaXRlbSkpICAgICByYXdJdGVtcy5wdXNoKC4uLmpzb24uaXRlbSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24ub2JqZWN0KSkgICByYXdJdGVtcy5wdXNoKC4uLmpzb24ub2JqZWN0KTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi52ZWhpY2xlKSkgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi52ZWhpY2xlKTtcbiAgaWYgKCFyYXdJdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBiYXNlTmFtZXMgPSBuZXcgU2V0PHN0cmluZz4oXG4gICAgQXJyYXkuaXNBcnJheShqc29uLmJhc2VpdGVtKSA/IGpzb24uYmFzZWl0ZW0ubWFwKChiOiBhbnkpID0+IGIubmFtZSkgOiBbXVxuICApO1xuICBjb25zdCBvdXQ6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgZm9yIChjb25zdCBpdCBvZiByYXdJdGVtcykge1xuICAgIGNvbnN0IG5hbWUgICAgID0gaXQubmFtZSBhcyBzdHJpbmc7XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXC9cXFxcOl0vZywgXCItXCIpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGZvbGRlclxuICAgIGNvbnN0IHJhd0NvZGUgPSAoaXQudHlwZSBhcyBzdHJpbmcgfHwgXCJcIikuc3BsaXQoXCJ8XCIpWzBdXG4gICAgICAgIC5zcGxpdChcInxcIilbMF0gICAgICAvLyBkcm9wIGFueXRoaW5nIGFmdGVyIFx1MjAxQ3xcdTIwMURcbiAgICAgICAgLnJlcGxhY2UoL15cXCQvLCBcIlwiKTsgLy8gc3RyaXAgbGVhZGluZyBcdTIwMUMkXHUyMDFEXG4gICAgbGV0IGZvbGRlciAgICA9IGNvZGVGb2xkZXJNYXBbcmF3Q29kZV0gPz8gXCJNaXNjZWxsYW5lb3VzXCI7XG5cbiAgICAvLyBWYXJpYW50c1xuICAgIGlmIChpdC5ib251c1dlYXBvbikge1xuICAgICAgZm9sZGVyID0gYCR7Zm9sZGVyfS9WYXJpYW50c2A7XG4gICAgfVxuICAgIC8vIE1hZ2ljYWxcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IGlzTWFnaWMgPSAhIWl0LndvbmRyb3VzIHx8ICEhaXQucmVxQXR0dW5lIHx8ICEhaXQucmVxX2F0dHVuZVxuICAgICAgICB8fCBTdHJpbmcoaXQucmFyaXR5KS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwibWFnaWNcIik7XG4gICAgICBpZiAoaXNNYWdpYykge1xuICAgICAgICBjb25zdCBbICwgLi4ucmVzdCBdID0gZm9sZGVyLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgZm9sZGVyID0gW1wiTWFnaWNhbCBJdGVtc1wiLCAuLi5yZXN0XS5qb2luKFwiL1wiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXZWFwb24gY2F0ZWdvcnkgc3ViZm9sZGVyXG4gICAgaWYgKChmb2xkZXIuc3RhcnRzV2l0aChcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnNcIikgfHxcbiAgICAgICAgIGZvbGRlci5zdGFydHNXaXRoKFwiV2VhcG9ucyBhbmQgQXJtb3IvUmFuZ2VkIFdlYXBvbnNcIikpICYmIGl0LndlYXBvbkNhdGVnb3J5KSB7XG4gICAgICBmb2xkZXIgPSBgJHtmb2xkZXJ9LyR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX1gO1xuICAgIH1cblxuICAgIC8vIG1ha2UgZWRpdGlvbklkIGF2YWlsYWJsZSBmb3IgdGhlIFNPVVJDRSBmaWVsZFxuKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4vLyBidWlsZCBhIEZyb250bWF0dGVyIG9iamVjdCBmcm9tIHRoZSBKU09OXG5jb25zdCBmbSAgID0gYnVpbGRGTShpdCwgSVRFTV9NRVRBX0RFRlMpO1xuXG5pZiAocmF3Q29kZSA9PT0gXCJNXCIgJiYgaXQud2VhcG9uQ2F0ZWdvcnkpIHtcbiAgLy8gXHUyMDFDTVx1MjAxRCBcdTIxOTIgdXNlIHdlYXBvbkNhdGVnb3J5IChcdTIwMUNTaW1wbGVcdTIwMUQvXHUyMDFDTWFydGlhbFx1MjAxRClcbiAgZm0udHlwZSA9IGAke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9IFdlYXBvbmA7XG59IGVsc2UgaWYgKElURU1fVFlQRV9NQVBbcmF3Q29kZV0pIHtcbiAgLy8gYW55IG90aGVyIGNvZGUgXHUyMTkyIG1hcHBlZCBsYWJlbFxuICBmbS50eXBlID0gSVRFTV9UWVBFX01BUFtyYXdDb2RlXTtcbn1cbmlmIChBcnJheS5pc0FycmF5KGZtLmRhbWFnZVR5cGVzKSkge1xuICBmbS5kYW1hZ2VUeXBlcyA9IGZtLmRhbWFnZVR5cGVzLm1hcCgoY29kZTogc3RyaW5nKSA9PlxuICAgIERBTUFHRV9UWVBFX01BUFtjb2RlXSB8fCBjb2RlXG4gICk7XG59XG4vLyBzZXJpYWxpemUgaXQgdG8gWUFNTFxubGV0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgSVRFTV9NRVRBX0RFRlMpO1xuXG4vLyBpZiB5b3Ugc3RpbGwgd2FudCBwYWNrQ29udGVudHMsIGFwcGVuZCBpdCBoZXJlOlxuaWYgKEFycmF5LmlzQXJyYXkoaXQucGFja0NvbnRlbnRzKSkge1xuICB5YW1sICs9IFwiXFxucGFja0NvbnRlbnRzOlwiO1xuICBmb3IgKGNvbnN0IHBjIG9mIGl0LnBhY2tDb250ZW50cykge1xuICAgIHlhbWwgKz0gYFxcbiAgLSBpdGVtOiBcIiR7cGMuaXRlbX1cIlxcbiAgICBxdWFudGl0eTogJHtwYy5xdWFudGl0eX1gO1xuICB9XG59XG4gXG4vLyB3cmFwIGl0IGluIHRoZSBZQU1MIGZlbmNlXG5jb25zdCBmcm9udG1hdHRlciA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tYDtcblxuXG4gICAgLy8gQm9keSBsaW5lc1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxpbmVzLnB1c2goYCMgJHtuYW1lfWApO1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG5cbiAgICAvLyBTdWJ0aXRsZVxuICAgIGNvbnN0IHN1YnRpdGxlID0gaXQud2VhcG9uXG4gICAgICA/IGAke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9IFdlYXBvbmBcbiAgICAgIDogaXQuYXJtb3JcbiAgICAgICAgPyBmb2xkZXIuc3BsaXQoXCIvXCIpLnBvcCgpIHx8IFwiQXJtb3JcIlxuICAgICAgICA6IFwiXCI7XG4gICAgaWYgKHN1YnRpdGxlKSBsaW5lcy5wdXNoKGAjIyMgKiR7c3VidGl0bGV9KmApO1xuXG4gICAgLy8gU3RhdHMgbGluZXNcbiAgICBpZiAoaXQud2VhcG9uKSB7XG4gICAgICBsaW5lcy5wdXNoKGAqKkNhdGVnb3J5Kio6ICR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX1gKTtcbiAgICAgIGxpbmVzLnB1c2goYCoqRGFtYWdlKio6ICR7aXQuZG1nMSA/PyBcIlwifSR7aXQuZG1nMiA/IGAgLyAke2l0LmRtZzJ9YCA6IFwiXCJ9YCk7XG4gICAgICBjb25zdCB0eXBlc0JvZHkgPSAoQXJyYXkuaXNBcnJheShpdC5kbWdUeXBlKSA/IGl0LmRtZ1R5cGUgOiBbaXQuZG1nVHlwZV0pXG4gICAgICAgIC5maWx0ZXIoKHQ6IGFueSkgPT4gQm9vbGVhbih0KSlcbiAgICAgICAgLm1hcCgodDogc3RyaW5nKSA9PiBEQU1BR0VfVFlQRV9NQVBbdF0gfHwgdCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkRhbWFnZSBUeXBlKio6ICR7dHlwZXNCb2R5LmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIGxpbmVzLnB1c2goYCoqUmFuZ2UqKjogJHtpdC5yYW5nZSA/PyBcIlx1MjAxNFwifWApO1xuICAgICAgbGluZXMucHVzaChgKipSZWxvYWQqKjogJHtpdC5yZWxvYWQgPz8gXCJcdTIwMTRcIn1gKTtcbiAgICAgIGlmIChpdC5hbW1vVHlwZSkgbGluZXMucHVzaChgKipBbW1vIFR5cGUqKjogJHtpdC5hbW1vVHlwZX1gKTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0LnByb3BlcnR5KSAmJiBpdC5wcm9wZXJ0eS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcHJvcHNCb2R5ID0gaXQucHJvcGVydHkubWFwKChwOiBzdHJpbmcpID0+IFBST1BFUlRZX01BUFtwXSB8fCBwKTtcbiAgICAgICAgbGluZXMucHVzaChgKipQcm9wZXJ0aWVzKio6ICR7cHJvcHNCb2R5LmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGl0LmFybW9yKSB7XG4gICAgICBsaW5lcy5wdXNoKGAqKkFybW9yIENsYXNzKio6ICR7aXQuYWN9YCk7XG4gICAgICBpZiAoaXQuc3RlYWx0aCkgbGluZXMucHVzaChgKipTdGVhbHRoIERpc2FkdmFudGFnZSoqOiB0cnVlYCk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cblxuICAgIC8vIERlc2NyaXB0aW9uIHdpdGggbmVzdGVkIGVudHJpZXNcbiAgICBjb25zdCBkZXNjID0gaXQuZW50cmllcyA/PyBpdC5kZXNjO1xuICAgIGlmIChkZXNjKSB7XG4gICAgICBmb3IgKGNvbnN0IHAgb2YgQXJyYXkuaXNBcnJheShkZXNjKSA/IGRlc2MgOiBbZGVzY10pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXBsYWNlNWVUYWdzKHApLnNwbGl0KFwiXFxuXCIpKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHAgJiYgdHlwZW9mIHAgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSB7XG4gICAgICAgICAgICBsaW5lcy5wb3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChgIyMjIyAke3AubmFtZX1gKTtcbiAgICAgICAgICBjb25zdCBzdWIgPSBBcnJheS5pc0FycmF5KHAuZW50cmllcykgPyBwLmVudHJpZXMgOiBbXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHNwIG9mIHN1Yikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHJlcGxhY2U1ZVRhZ3Moc3ApLnNwbGl0KFwiXFxuXCIpKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBib2R5ID0gbGluZXMuam9pbihcIlxcblwiKTtcblxuICAgIG91dC5wdXNoKHsgcGF0aDogYEl0ZW1zLyR7Zm9sZGVyfS8ke3NhZmVOYW1lfS5tZGAsIGNvbnRlbnQ6IGAke2Zyb250bWF0dGVyfVxcblxcbiR7Ym9keX1gIH0pO1xuICB9XG5cbiAgcmV0dXJuIG91dC5zb3J0KChhLGIpID0+IGEucGF0aC5sb2NhbGVDb21wYXJlKGIucGF0aCkpO1xufSIsICIvLyBmcm9udG1hdHRlciA1ZSAyMDI1XG5cbmltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vc291cmNlTWFwXCI7XG5pbXBvcnQgeyBmb3JtYXRTaXplQWJicmV2LCBmb3JtYXRBbGlnbm1lbnRBYmJyZXYgfSBmcm9tIFwiLi4vYmVzdGlhcnlcIjtcbmltcG9ydCB7IGZvcm1hdFJhbmdlLCBmb3JtYXRUaW1lLCBmb3JtYXREdXJhdGlvbiwgU0NIT09MX01BUCB9IGZyb20gXCIuLi9zcGVsbHNcIjtcbmltcG9ydCB7IFBST1BFUlRZX01BUCwgREFNQUdFX1RZUEVfTUFQLCBJVEVNX1RZUEVfTUFQIH0gZnJvbSBcIi4uL2l0ZW1zXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vdGFnUmVwbGFjZXJcIjtcblxuZnVuY3Rpb24gYmxhbmtVbmRlZmluZWQodmFsOiBhbnkpOiBhbnkge1xuICByZXR1cm4gdmFsID09PSB1bmRlZmluZWQgPyBcIlwiIDogdmFsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FwKHN0cjogYW55KTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09IFwic3RyaW5nXCIpIHJldHVybiBcIlwiO1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xufVxuXG5leHBvcnQgY29uc3QgQUJJTElUWV9GVUxMOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIHN0cjogXCJTdHJlbmd0aFwiLFxuICBkZXg6IFwiRGV4dGVyaXR5XCIsXG4gIGNvbjogXCJDb25zdGl0dXRpb25cIixcbiAgaW50OiBcIkludGVsbGlnZW5jZVwiLFxuICB3aXM6IFwiV2lzZG9tXCIsXG4gIGNoYTogXCJDaGFyaXNtYVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IFNJWkVfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBUOiBcIlRpbnlcIixcbiAgUzogXCJTbWFsbFwiLFxuICBNOiBcIk1lZGl1bVwiLFxuICBMOiBcIkxhcmdlXCIsXG4gIEg6IFwiSHVnZVwiLFxuICBHOiBcIkdhcmdhbnR1YW5cIlxufTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFVuaXZlcnNhbCBmcm9udG1hdHRlciBrZXlzIFx1MjUwMFx1MjUwMFx1MjUwMCAgXG5leHBvcnQgY29uc3QgRk1fRklFTERTID0ge1xuICBBQklMSVRZX0JPTlVTRVM6ICAgIFwiYWJpbGl0eV9ib251c2VzXCIsXG4gIEFDOiAgICAgICAgICAgICAgICAgXCJBQ1wiLFxuICBBTElHTk1FTlQ6ICAgICAgICAgIFwiQWxpZ25tZW50XCIsXG4gIEFNTU9fVFlQRTogICAgICAgICAgXCJBbW1vIFR5cGVcIixcbiAgQVJNT1JfUFJPRklDSUVOQ0lFUzpcImFybW9yLXByb2ZcIixcbiAgQVRUQUNLX1RZUEU6ICAgICAgICBcImF0dGFja190eXBlXCIsXG4gIEFUVFVORU1FTlQ6ICAgICAgICAgXCJBdHR1bmVtZW50XCIsXG4gIEFUVFVORV9SRVE6ICAgICAgICAgXCJBdHR1bmVfUmVxXCIsXG4gIENBU1RJTkdfVElNRTogICAgICAgXCJjYXN0aW5nX3RpbWVcIixcbiAgQ0hBUklTTUE6ICAgICAgICAgICBcImNoYXJpc21hXCIsXG4gIENIQV9NT0Q6ICAgICAgICAgICAgXCJjaGFfbW9kXCIsXG4gIENPTkNFTlRSQVRJT046ICAgICAgXCJjb25jZW50cmF0aW9uXCIsXG4gIENPTkRJVElPTl9JTU06ICAgICAgXCJjb25kX2ltbXVuaXR5XCIsXG4gIENPTlNUSVRVVElPTjogICAgICAgXCJjb25zdGl0dXRpb25cIixcbiAgQ09OX01PRDogICAgICAgICAgICBcImNvbl9tb2RcIixcbiAgQ09TVDogICAgICAgICAgICAgICBcImNvc3RcIixcbiAgQ09NUE9ORU5UUzogICAgICAgICBcIkNvbXBvbmVudHNcIixcbiAgQ0hBTExFTkdFX1JBVElORzogICBcIkNSXCIsXG4gIERBTUFHRV9UWVBFOiAgICAgICAgXCJkYW1hZ2VfdHlwZVwiLFxuICBEQU1BR0VfVFlQRVM6ICAgICAgIFwiZGFtYWdlVHlwZXNcIixcbiAgREFNQUdFOiAgICAgICAgICAgICBcImRhbWFnZVwiLFxuICBEQU1BR0VfUkVTOiAgICAgICAgIFwiZG1nX3Jlc2lzdGFuY2VcIixcbiAgREFNQUdFX0lNTTogICAgICAgICBcImRtZ19pbW11bml0eVwiLFxuICBERVhURVJJVFk6ICAgICAgICAgIFwiZGV4dGVyaXR5XCIsXG4gIERFWF9NT0Q6ICAgICAgICAgICAgXCJkZXhfbW9kXCIsXG4gIERVUkFUSU9OOiAgICAgICAgICAgXCJkdXJhdGlvblwiLFxuICBSVUxFU0VUOiAgICAgICAgICAgIFwicnVsZXNldFwiLFxuICBIUDogICAgICAgICAgICAgICAgIFwiSFBcIixcbiAgSU5URUxMSUdFTkNFOiAgICAgICBcImludGVsbGlnZW5jZVwiLFxuICBJTlRfTU9EOiAgICAgICAgICAgIFwiaW50X21vZFwiLFxuICBMQU5HVUFHRVM6ICAgICAgICAgIFwibGFuZ3VhZ2VzXCIsXG4gIExFVkVMOiAgICAgICAgICAgICAgXCJsZXZlbFwiLFxuICBNQUdJQ0FMOiAgICAgICAgICAgIFwibWFnaWNhbFwiLFxuICBNQVRFUklBTDogICAgICAgICAgIFwibWF0ZXJpYWxcIixcbiAgTkFNRTogICAgICAgICAgICAgICBcIm5hbWVcIixcbiAgUFJPUEVSVElFUzogICAgICAgICBcInByb3BlcnRpZXNcIixcbiAgUkFOR0U6ICAgICAgICAgICAgICBcInJhbmdlXCIsXG4gIFJBUklUWTogICAgICAgICAgICAgXCJyYXJpdHlcIixcbiAgUkVMT0FEOiAgICAgICAgICAgICBcInJlbG9hZFwiLFxuICBSSVRVQUw6ICAgICAgICAgICAgIFwicml0dWFsXCIsXG4gIFNBVkU6ICAgICAgICAgICAgICAgXCJzYXZlXCIsXG4gIFNBVklOR19USFJPV1M6ICAgICAgXCJzYXZpbmdfdGhyb3dzXCIsXG4gIFNDSE9PTDogICAgICAgICAgICAgXCJzY2hvb2xcIixcbiAgU0VOU0VTOiAgICAgICAgICAgICBcInNlbnNlc1wiLFxuICBTSVpFOiAgICAgICAgICAgICAgIFwic2l6ZVwiLFxuICBTS0lMTFM6ICAgICAgICAgICAgIFwic2tpbGxzXCIsXG4gIFNLSUxMX0NIT0lDRV9MSVNUOiAgXCJza2lsbF9jaG9pY2VfbGlzdFwiLFxuICBTT01BVElDOiAgICAgICAgICAgIFwic29tYXRpY1wiLFxuICBTT1VSQ0U6ICAgICAgICAgICAgIFwic291cmNlXCIsXG4gIFNQRUNJRVM6ICAgICAgICAgICAgXCJzcGVjaWVzXCIsXG4gIFNQRUVEOiAgICAgICAgICAgICAgXCJzcGVlZFwiLFxuICBTUEVMTF9DQVNUX01PRDogICAgIFwiU3BlbGwgQ2FzdCBNb2RcIixcbiAgU1BFTExfUkFOR0U6ICAgICAgICBcIlJhbmdlXCIsXG4gIFNURUFMVEhfRElTQURWQU5UQUdFOiBcInN0ZWFsdGhEaXNhZHZhbnRhZ2VcIixcbiAgU1RSRU5HVEg6ICAgICAgICAgICBcInN0cmVuZ3RoXCIsXG4gIFNUUl9NT0Q6ICAgICAgICAgICAgXCJzdHJfbW9kXCIsXG4gIFNVQlJBQ0VTOiAgICAgICAgICAgXCJzdWJyYWNlc1wiLFxuICBUT09MX1BST0ZJQ0lFTkNJRVM6IFwidG9vbC1wcm9mXCIsXG4gIFRPT0xfQ0hPSUNFX0xJU1Q6ICBcInRvb2xfY2hvaWNlX2xpc3RcIixcbiAgVFJBSVRTOiAgICAgICAgICAgICBcInRyYWl0c1wiLFxuICBUWVBFOiAgICAgICAgICAgICAgIFwidHlwZVwiLFxuICBWQVJJQU5UOiAgICAgICAgICAgIFwiVmFyaWFudFwiLFxuICBWRVJCQUw6ICAgICAgICAgICAgIFwidmVyYmFsXCIsXG4gIFdFQVBPTl9QUk9GSUNJRU5DSUVTOiBcIndlYXBvbi1wcm9mXCIsXG4gIFdFSUdIVDogICAgICAgICAgICAgXCJ3ZWlnaHRcIixcbiAgV0lTRE9NOiAgICAgICAgICAgICBcIndpc2RvbVwiLFxuICBXSVNfTU9EOiAgICAgICAgICAgIFwid2lzX21vZFwiLFxufSBhcyBjb25zdDtcblxuZXhwb3J0IHR5cGUgRk1LZXkgPSBrZXlvZiB0eXBlb2YgRk1fRklFTERTO1xuZXhwb3J0IHR5cGUgRnJvbnRtYXR0ZXIgPSBQYXJ0aWFsPFJlY29yZDx0eXBlb2YgRk1fRklFTERTW0ZNS2V5XSwgdW5rbm93bj4+O1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgRGVmaW5pdGlvbiBvZiBhIHNpbmdsZSBmaWVsZCBtYXBwaW5nIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGludGVyZmFjZSBGaWVsZERlZiB7XG4gIC8qKiBXaGljaCBjYWxsXHUyMDEwc2lnbiAoa2V5IGluIEZNX0ZJRUxEUykgKi9cbiAgY2FsbFNpZ246IEZNS2V5O1xuICAvKiogV2hpY2ggSlNPTiBwcm9wZXJ0eSB0byByZWFkICovXG4gIGpzb25LZXk6ICBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgLyoqIE9wdGlvbmFsIHRyYW5zZm9ybWVyOiByYXcgSlNPTiBcdTIxOTIgZmluYWwgdmFsdWUgKi9cbiAgY29udj86ICAgIChyYXc6IGFueSwgYWxsSnNvbj86IGFueSkgPT4gdW5rbm93bjtcbn1cblxuY29uc3QgdW5pZmllZEFybW9yUHJvZnMgPSAodmFsOiBhbnkpOiBzdHJpbmdbXSA9PlxuICBBcnJheS5pc0FycmF5KHZhbD8uYXJtb3IpID8gdmFsLmFybW9yLm1hcChjYXApIDpcbiAgQXJyYXkuaXNBcnJheSh2YWwpID8gdmFsLm1hcChjYXApIDogW107XG5cbi8vIGZyb250bWF0dGVyLnRzXG5cbmV4cG9ydCBmdW5jdGlvbiB1bmlmaWVkV2VhcG9uUHJvZnModmFsOiBhbnkpOiBzdHJpbmdbXSB7XG4gIC8vIHB1bGwgdGhlIFx1MjAxQ3dlYXBvbnNcdTIwMUQgYXJyYXkgb2ZmIGVpdGhlciBhIHJhdyBhcnJheSBvciBhIHN0YXJ0aW5nUHJvZmljaWVuY2llcyBvYmplY3RcbiAgY29uc3QgcmF3QXJyOiBhbnlbXSA9IEFycmF5LmlzQXJyYXkodmFsPy53ZWFwb25zKVxuICAgID8gdmFsLndlYXBvbnNcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsKVxuICAgID8gdmFsXG4gICAgOiBbXTtcblxuICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICBmdW5jdGlvbiBoYW5kbGVPbmUoZW50cnk6IGFueSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5KSkge1xuICAgICAgLy8gZmxhdHRlbiBuZXN0ZWQgYXJyYXlzXG4gICAgICBlbnRyeS5mb3JFYWNoKGhhbmRsZU9uZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgY29uc3QgbGl0ID0gZW50cnkudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAobGl0ID09PSBcInNpbXBsZVwiKSB7XG4gICAgICAgIG91dC5hZGQoXCJTaW1wbGUgV2VhcG9uc1wiKTtcbiAgICAgIH0gZWxzZSBpZiAobGl0ID09PSBcIm1hcnRpYWxcIikge1xuICAgICAgICBvdXQuYWRkKFwiTWFydGlhbCBXZWFwb25zXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZGV0ZWN0IHRhZ2dlZCBpdGVtcyB2cyBzaW1wbGUgd29yZHNcbiAgICAgICAgY29uc3QgdGV4dCA9IGVudHJ5LnN0YXJ0c1dpdGgoXCJ7QFwiKVxuICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhlbnRyeSlcbiAgICAgICAgICA6IGNhcChlbnRyeSk7XG4gICAgICAgIG91dC5hZGQodGV4dCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGVudHJ5ICYmIHR5cGVvZiBlbnRyeSA9PT0gXCJvYmplY3RcIiAmJiBlbnRyeS5wcm9maWNpZW5jeSkge1xuICAgICAgLy8geyBwcm9maWNpZW5jeTogXCJmaXJlYXJtc1wiLCBvcHRpb25hbDogdHJ1ZSB9XG4gICAgICBjb25zdCBuYW1lID0gY2FwKGVudHJ5LnByb2ZpY2llbmN5KTtcbiAgICAgIG91dC5hZGQoZW50cnkub3B0aW9uYWwgPyBgJHtuYW1lfSAob3B0aW9uYWwpYCA6IG5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIHJhd0Fyci5mb3JFYWNoKGhhbmRsZU9uZSk7XG4gIHJldHVybiBbLi4ub3V0XTtcbn1cblxuXG5jb25zdCB1bmlmaWVkU2F2ZXMgPSAodmFsOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgIHJldHVybiB2YWwubWFwKChrOiBzdHJpbmcpID0+XG4gICAgICAgICh7IHN0cjogXCJTdHJlbmd0aFwiLCBkZXg6IFwiRGV4dGVyaXR5XCIsIGNvbjogXCJDb25zdGl0dXRpb25cIixcbiAgICAgICAgICBpbnQ6IFwiSW50ZWxsaWdlbmNlXCIsIHdpczogXCJXaXNkb21cIiwgY2hhOiBcIkNoYXJpc21hXCIgfVtrXSA/PyBrLnRvVXBwZXJDYXNlKCkpXG4gICAgICApO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIHZhbCAhPT0gbnVsbCkge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh2YWwpLm1hcChrID0+IGsudG9VcHBlckNhc2UoKSk7XG4gIH1cbiAgcmV0dXJuIFtdO1xufTtcblxuZXhwb3J0IGNvbnN0IHVuaWZpZWRTa2lsbHMgPSAodmFsOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gIC8vIDEpIFx1MjAxQ0Jlc3RpYXJ5XHUyMDFEIHN0eWxlOiBmbGF0IG9iamVjdCBtYXBwaW5nIHNraWxsXHUyMTkybW9kaWZpZXJcbiAgaWYgKFxuICAgIHZhbCAmJlxuICAgICFBcnJheS5pc0FycmF5KHZhbCkgJiZcbiAgICB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmXG4gICAgLy8gZW5zdXJlIGV2ZXJ5IHZhbHVlIGlzIGEgc3RyaW5nIG9yIG51bWJlclxuICAgIE9iamVjdC52YWx1ZXModmFsKS5ldmVyeSh2ID0+IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2ID09PSBcIm51bWJlclwiKVxuICApIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModmFsKS5tYXAoXG4gICAgICAoW3NraWxsLCBtb2RdKSA9PiBgJHtjYXAoc2tpbGwpfSAke21vZH1gLnRyaW0oKVxuICAgICk7XG4gIH1cblxuICAvLyAyKSBuZXN0ZWQgdW5kZXIgLnNraWxscyAvIC5za2lsbFByb2ZpY2llbmNpZXMgLyAuc2tpbGxQcm9mXG4gIGlmICh2YWwgJiYgIUFycmF5LmlzQXJyYXkodmFsKSAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiKSB7XG4gICAgY29uc3QgbmVzdGVkID0gKHZhbCBhcyBhbnkpLnNraWxsc1xuICAgICAgPz8gKHZhbCBhcyBhbnkpLnNraWxsUHJvZlxuICAgICAgPz8gKHZhbCBhcyBhbnkpLnNraWxsUHJvZmljaWVuY2llcztcbiAgICByZXR1cm4gdW5pZmllZFNraWxscyhuZXN0ZWQpO1xuICB9XG5cbiAgLy8gMykgYXJyYXktc3R5bGVcbiAgaWYgKCFBcnJheS5pc0FycmF5KHZhbCkpIHJldHVybiBbXTtcblxuICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgZm9yIChjb25zdCBlIG9mIHZhbCkge1xuICAgIC8vIDNhKSB7IGFueTogTiB9XG4gICAgaWYgKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIChlIGFzIGFueSkuYW55ID09PSBcIm51bWJlclwiKSB7XG4gICAgICBvdXQuYWRkKGBDaG9vc2UgJHsoZSBhcyBhbnkpLmFueX1gKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvLyAzYikgeyBjaG9vc2U6IHsgY291bnQsIFx1MjAyNiB9IH1cbiAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiAoZSBhcyBhbnkpLmNob29zZSkge1xuICAgICAgY29uc3QgY250ID0gKGUgYXMgYW55KS5jaG9vc2UuY291bnQgPz8gMTtcbiAgICAgIG91dC5hZGQoYENob29zZSAke2NudH1gKTtcbiAgICB9XG4gICAgLy8gM2MpIGZpeGVkIGZsYWdzIGZvbzogdHJ1ZVxuICAgIGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhlKSkge1xuICAgICAgICBpZiAodiA9PT0gdHJ1ZSkgb3V0LmFkZChjYXAoaykpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyAzZCkgbGl0ZXJhbCBzdHJpbmdzXG4gICAgaWYgKHR5cGVvZiBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBvdXQuYWRkKGNhcChlKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFsuLi5vdXRdO1xufTtcblxuXG4gXG5leHBvcnQgY29uc3QgdW5pZmllZFRvb2xQcm9mcyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgLy8gcHVsbCBuZXN0ZWQgYXJyYXkgaWYgc29tZW9uZSBwYXNzZWQgeW91IHRoZSB3aG9sZSBzdGFydGluZ1Byb2ZpY2llbmNpZXMgb2JqXG4gIGxldCBlbnRyaWVzOiBhbnlbXSA9IEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbFxuICAgIDogQXJyYXkuaXNBcnJheSh2YWw/LnRvb2xQcm9maWNpZW5jaWVzKSA/IHZhbC50b29sUHJvZmljaWVuY2llc1xuICAgIDogQXJyYXkuaXNBcnJheSh2YWw/LnRvb2xzKSAgICAgICAgICAgICA/IHZhbC50b29sc1xuICAgIDogW107XG5cbiAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGxldCBzYXdDaG9vc2UgPSBmYWxzZTtcblxuICBmb3IgKGNvbnN0IGUgb2YgZW50cmllcykge1xuICAgIGlmICh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgb3V0LmFkZChjYXAoZSkpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKGU/LmNob29zZSkge1xuICAgICAgY29uc3QgY250ID0gZS5jaG9vc2UuY291bnQgPz8gMTtcbiAgICAgIHNhd0Nob29zZSA9IHRydWU7XG4gICAgICBvdXQuYWRkKGBDaG9vc2UgJHtjbnR9YCk7XG4gICAgfVxuXG4gICAgLy8gcHVsbCBvdXQgYW55IGZpeGVkIFx1MjAxQ2ZvbzogdHJ1ZVx1MjAxRCBvciBudW1lcmljIFx1MjAxQ2FueUZvbzogTlx1MjAxRFxuICAgIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMoZSkpIHtcbiAgICAgIGlmICh2ID09PSB0cnVlKSB7XG4gICAgICAgIG91dC5hZGQoY2FwKGspKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHYgPT09IFwibnVtYmVyXCIgJiYgay5zdGFydHNXaXRoKFwiYW55XCIpKSB7XG4gICAgICAgIC8vIGUuZy4gYW55QXJ0aXNhbnNUb29sOjFcbiAgICAgICAgY29uc3QgcmF3ID0gay5yZXBsYWNlKC9eYW55LywgXCJcIik7XG4gICAgICAgIGNvbnN0IHNwYWNlZCA9IHJhd1xuICAgICAgICAgIC5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxICQyXCIpXG4gICAgICAgICAgLnNwbGl0KFwiIFwiKVxuICAgICAgICAgIC5tYXAoY2FwKVxuICAgICAgICAgIC5qb2luKFwiIFwiKTtcbiAgICAgICAgb3V0LmFkZChgQ2hvb3NlICR7dn0gJHtzcGFjZWR9YCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFsuLi5vdXRdO1xufTtcblxuZXhwb3J0IGNvbnN0IEFMTF9GSUVMRF9ERUZTOiBGaWVsZERlZltdID0gW1xuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQ29yZSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJOQU1FXCIsICBqc29uS2V5OiBcIm5hbWVcIiB9LFxue1xuICBjYWxsU2lnbjogXCJTT1VSQ0VcIixcbiAganNvbktleTogW1wic291cmNlXCJdLFxuICBjb252OiAocmF3OiBhbnksIGFsbEpzb246IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCBlZGl0aW9uSWQgPSAoYWxsSnNvbiBhcyBhbnkpLl9lZGl0aW9uSWQ7XG5cbiAgICAvLyAxKSBwcmltYXJ5IHNvdXJjZShzKVxuICAgIGNvbnN0IGFyciA9IEFycmF5LmlzQXJyYXkocmF3KSA/IHJhdyA6IFtyYXddO1xuICAgIGFyci5mb3JFYWNoKHNyYyA9PiB7XG4gICAgICBvdXQuYWRkKGdldEZ1bGxTb3VyY2VOYW1lKHNyYywgZWRpdGlvbklkKSk7XG4gICAgfSk7XG5cbiAgICAvLyAyKSBhbnkgb3RoZXJTb3VyY2VzIGVudHJpZXNcbiAgICBmb3IgKGNvbnN0IG9zIG9mIGFsbEpzb24ub3RoZXJTb3VyY2VzID8/IFtdKSB7XG4gICAgICBpZiAob3MgJiYgdHlwZW9mIG9zLnNvdXJjZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBvdXQuYWRkKGdldEZ1bGxTb3VyY2VOYW1lKG9zLnNvdXJjZSwgZWRpdGlvbklkKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMykgcmVwcmludGVkQXMgZW50cmllcyAoZ3VhcmQgYmVmb3JlIHNwbGl0dGluZylcbiAgICBmb3IgKGNvbnN0IHJlcCBvZiBhbGxKc29uLnJlcHJpbnRlZEFzID8/IFtdKSB7XG4gICAgICAvLyBlbnN1cmUgd2UgaGF2ZSBhIHN0cmluZyB0byBzcGxpdFxuICAgICAgY29uc3QgcmVwU3RyID0gdHlwZW9mIHJlcCA9PT0gXCJzdHJpbmdcIiA/IHJlcCA6IFN0cmluZyhyZXApO1xuICAgICAgY29uc3QgcGFydHMgPSByZXBTdHIuc3BsaXQoXCJ8XCIpO1xuICAgICAgLy8gaWYgdGhlcmUncyBubyBwaXBlLCBwYXJ0c1sxXSB3aWxsIGJlIHVuZGVmaW5lZCwgc28gZmFsbGJhY2sgdG8gcGFydHNbMF1cbiAgICAgIGNvbnN0IHNyYyA9IHBhcnRzWzFdID8/IHBhcnRzWzBdO1xuICAgICAgb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShzcmMsIGVkaXRpb25JZCkpO1xuICAgIH1cblxuICAgIHJldHVybiBbLi4ub3V0XTtcbiAgfVxufSxcblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIkFSTU9SX1BST0ZJQ0lFTkNJRVNcIiwgIGpzb25LZXk6IFtcImFybW9yUHJvZmljaWVuY2llc1wiLCBcImFybW9yUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sIGNvbnY6IHVuaWZpZWRBcm1vclByb2ZzIH0sXG4gIHsgXG4gICAgY2FsbFNpZ246IFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgICBqc29uS2V5OiBbXCJ3ZWFwb25Qcm9maWNpZW5jaWVzXCIsXCJ3ZWFwb25Qcm9mc1wiLFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IHVuaWZpZWRXZWFwb25Qcm9mc1xuICB9LFxuICB7IGNhbGxTaWduOiBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLCAgIGpzb25LZXk6IFtcInRvb2xQcm9maWNpZW5jaWVzXCIsIFwidG9vbFByb2ZzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLCBjb252OiB1bmlmaWVkVG9vbFByb2ZzIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gICAganNvbktleTogW1widG9vbFByb2ZpY2llbmNpZXNcIiwgXCJ0b29sUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KHJhdylcbiAgICAgICAgPyByYXdcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8udG9vbFByb2ZpY2llbmNpZXMpXG4gICAgICAgID8gcmF3LnRvb2xQcm9maWNpZW5jaWVzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnRvb2xzKVxuICAgICAgICA/IHJhdy50b29sc1xuICAgICAgICA6IFtdO1xuICAgICAgY29uc3QgY2hvaWNlID0gYXJyLmZpbmQoKGU6IGFueSkgPT4gZT8uY2hvb3NlKTtcbiAgICAgIHJldHVybiBjaG9pY2U/LmNob29zZT8uZnJvbT8ubWFwKChzOiBzdHJpbmcpID0+IGNhcChzKSkgPz8gW107XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIlNBVklOR19USFJPV1NcIiwgICAgICAgIGpzb25LZXk6IFtcInNhdmVcIiwgXCJwcm9maWNpZW5jeVwiXSwgY29udjogdW5pZmllZFNhdmVzIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJTS0lMTFNcIixcbiAgICBqc29uS2V5OiBbXCJza2lsbFwiLCBcInNraWxsUHJvZlwiLCBcInNraWxsUHJvZmljaWVuY2llc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiB1bmlmaWVkU2tpbGxzXG4gIH0sXG5cbiAge1xuICAgIGNhbGxTaWduOiBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsXG4gICAganNvbktleTogW1wic2tpbGxcIiwgXCJza2lsbFByb2ZcIiwgXCJza2lsbFByb2ZpY2llbmNpZXNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICAvLyBub3JtYWxpemUgaW50byBhbiBhcnJheSBvZiBlbnRyaWVzXG4gICAgICBjb25zdCBhcnI6IGFueVtdID0gQXJyYXkuaXNBcnJheShyYXcpXG4gICAgICAgID8gcmF3XG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxsUHJvZmljaWVuY2llcylcbiAgICAgICAgPyByYXcuc2tpbGxQcm9maWNpZW5jaWVzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxscylcbiAgICAgICAgPyByYXcuc2tpbGxzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxsUHJvZilcbiAgICAgICAgPyByYXcuc2tpbGxQcm9mXG4gICAgICAgIDogW107XG5cbiAgICAgIC8vIGZpbmQgdGhlIG9uZSBlbnRyeSB0aGF0IHJlcHJlc2VudHMgdGhlIFx1MjAxQ2Nob29zZVx1MjAxRCBidWNrZXRcbiAgICAgIGNvbnN0IGNob2ljZU9iaiA9IGFyci5maW5kKGUgPT4gZT8uY2hvb3NlIHx8IHR5cGVvZiBlLmFueSA9PT0gXCJudW1iZXJcIik7XG4gICAgICBpZiAoIWNob2ljZU9iaikgcmV0dXJuIFtdO1xuXG4gICAgICAvLyBleHBsaWNpdCBcdTIwMUNjaG9vc2UgZnJvbSBbIC4uLiBdXHUyMDFEXG4gICAgICBpZiAoY2hvaWNlT2JqLmNob29zZSAmJiBBcnJheS5pc0FycmF5KGNob2ljZU9iai5jaG9vc2UuZnJvbSkpIHtcbiAgICAgICAgcmV0dXJuIGNob2ljZU9iai5jaG9vc2UuZnJvbS5tYXAoY2FwKTtcbiAgICAgIH1cblxuICAgICAgLy8gdGhlIFx1MjAxQ2FueTogM1x1MjAxRCBzaG9ydGhhbmQgXHUyMTkyIG9mZmVyIGV2ZXJ5IHNraWxsXG4gICAgICBpZiAodHlwZW9mIGNob2ljZU9iai5hbnkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgLy8gU0tJTExfT1BUSU9OUyBpcyB5b3VyIGNvbnN0IFtcIkFjcm9iYXRpY3NcIiwgXCJBbmltYWwgSGFuZGxpbmdcIiwgXHUyMDI2XVxuICAgICAgICByZXR1cm4gU0tJTExfT1BUSU9OUztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJTUEVMTF9DQVNUX01PRFwiLGpzb25LZXk6IFwic3BlbGxjYXN0aW5nQWJpbGl0eVwiLCAgXG4gICAgY29udjogKHJhdykgPT4ge1xuICAgIC8vIHJhdyBtaWdodCBiZSBcImNoYVwiIG9yIFwiQ0hBXCJcbiAgICBjb25zdCBrZXkgPSBTdHJpbmcocmF3KS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBBQklMSVRZX0ZVTExba2V5XSB8fCBrZXkudG9VcHBlckNhc2UoKTtcbiAgfX0sXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3BlbGxzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIkxFVkVMXCIsICAgICAgICAganNvbktleTogXCJsZXZlbFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU0NIT09MXCIsICAgICAgICBqc29uS2V5OiBcInNjaG9vbFwiLCAgIGNvbnY6IHMgPT4gU0NIT09MX01BUFtzXSA/PyBzIH0sXG4gIHsgY2FsbFNpZ246IFwiQ0FTVElOR19USU1FXCIsICBqc29uS2V5OiBcInRpbWVcIiwgICAgIGNvbnY6IGZvcm1hdFRpbWUgfSxcbiAgeyBjYWxsU2lnbjogXCJTUEVMTF9SQU5HRVwiLCAgIGpzb25LZXk6IFwicmFuZ2VcIiwgICAgY29udjogZm9ybWF0UmFuZ2UgfSxcbiAgeyBjYWxsU2lnbjogXCJEVVJBVElPTlwiLCAgICAgIGpzb25LZXk6IFwiZHVyYXRpb25cIiwgY29udjogZm9ybWF0RHVyYXRpb24gfSxcbiAgeyBjYWxsU2lnbjogXCJWRVJCQUxcIiwgICAgICAgIGpzb25LZXk6IFwiY29tcG9uZW50c1wiLCBjb252OiAoYzphbnkpID0+ICEhYy52IH0sXG4gIHsgY2FsbFNpZ246IFwiU09NQVRJQ1wiLCAgICAgICBqc29uS2V5OiBcImNvbXBvbmVudHNcIiwgY29udjogKGM6YW55KSA9PiAhIWMucyB9LFxuICB7IGNhbGxTaWduOiBcIk1BVEVSSUFMXCIsICAgICAganNvbktleTogXCJjb21wb25lbnRzXCIsIGNvbnY6IChjOmFueSkgPT4gISFjLm0gfSxcbiAgeyBjYWxsU2lnbjogXCJDT01QT05FTlRTXCIsXG4gICAganNvbktleTogIFwiY29tcG9uZW50c1wiLFxuICAgIGNvbnY6IChjOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gICAgICBpZiAoIWMubSkgcmV0dXJuIFtdO1xuXG4gICAgICBjb25zdCByYXcgPSBBcnJheS5pc0FycmF5KGMubSkgPyBjLm0gOiBbYy5tXTtcblxuICAgICAgcmV0dXJuIHJhd1xuICAgICAgICAubWFwKChpdGVtOiBhbnkpOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHJldHVybiBpdGVtO1xuICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBpdGVtLnRleHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLnRleHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KVxuICAgICAgICAuZmlsdGVyKChjb21wOiBzdHJpbmcgfCBudWxsKTogY29tcCBpcyBzdHJpbmcgPT4gY29tcCAhPT0gbnVsbCk7XG4gICAgfVxuICB9LCBcbiAgeyBjYWxsU2lnbjogXCJBVFRBQ0tfVFlQRVwiLCAgIGpzb25LZXk6IFwiYXR0YWNrVHlwZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFX1RZUEVcIiwgICBqc29uS2V5OiBcImRhbWFnZUluZmxpY3RcIiwgY29udjogZCA9PiBBcnJheS5pc0FycmF5KGQpID8gZFswXSA6IGQgfSxcbiAgeyBjYWxsU2lnbjogXCJSSVRVQUxcIiwgICAgICAgIGpzb25LZXk6IFwicml0dWFsXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJDT05DRU5UUkFUSU9OXCIsIGpzb25LZXk6IFwiZHVyYXRpb25cIiwgY29udjogZHMgPT4gQXJyYXkuaXNBcnJheShkcykgJiYgZHMuc29tZSgoeDphbnkpPT4geC5jb25jZW50cmF0aW9uKSB9LFxuICB7IGNhbGxTaWduOiBcIlNBVkVcIiwgICAgICAgICAganNvbktleTogXCJzYXZlQXR0clwiIH0sXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWNpZXMgLyBDcmVhdHVyZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiU1BFQ0lFU1wiLCBqc29uS2V5OiBcIm5hbWVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNJWkVcIiwganNvbktleTogXCJzaXplXCIsIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgLy8gaGFuZGxlIFtcIlNcIixcIk1cIl0gb3IganVzdCBcIkxcIlxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmF3KSkge1xuICAgICAgICByZXR1cm4gcmF3Lm1hcChyID0+IFNJWkVfTUFQW3JdIHx8IHIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFNJWkVfTUFQW3Jhd10gfHwgcmF3O1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgICB7XG4gIGNhbGxTaWduOiBcIlNQRUVEXCIsXG4gIGpzb25LZXk6ICAgXCJzcGVlZFwiLFxuICBjb252OiAoc3A6IG51bWJlciB8IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IHtcbiAgICAvLyBoYW5kbGUgYm90aCBudW1lcmljIHNwZWVkcyBhbmQgb2JqZWN0IHNwZWVkc1xuICAgIGlmICh0eXBlb2Ygc3AgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiBbYFdhbGsgJHtzcH0gZnQuYF07XG4gICAgfVxuICAgIGlmICghc3AgfHwgdHlwZW9mIHNwICE9PSBcIm9iamVjdFwiKSByZXR1cm4gW107XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNwKVxuICAgICAgLmZpbHRlcigoW21vZGVdKSA9PiBtb2RlICE9PSBcImNhbkhvdmVyXCIpXG4gICAgICAubWFwKChbbW9kZSwgdl0pID0+IHtcbiAgICAgICAgY29uc3QgbiA9IHR5cGVvZiB2ID09PSBcIm9iamVjdFwiICYmIHYgIT09IG51bGwgJiYgXCJudW1iZXJcIiBpbiB2ID8gKHYgYXMgYW55KS5udW1iZXIgOiB2O1xuICAgICAgICBjb25zdCBsYWJlbCA9IG1vZGUgPT09IFwid2Fsa1wiID8gXCJXYWxrXCIgOiBjYXAobW9kZSk7XG4gICAgICAgIHJldHVybiBgJHtsYWJlbH0gJHtufSBmdC5gO1xuICAgICAgfSk7XG4gIH0sXG59LFxueyBjYWxsU2lnbjogXCJMQU5HVUFHRVNcIiwganNvbktleTogW1wibGFuZ3VhZ2VzXCIsIFwibGFuZ3VhZ2VQcm9maWNpZW5jaWVzXCJdLCBjb252OiBhcnIgPT4ge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBbXTtcbiAgICAgIGNvbnN0IG91dDogc3RyaW5nW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgbHAgb2YgYXJyKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbHAgPT09IFwic3RyaW5nXCIpIG91dC5wdXNoKGNhcChscCkpO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbHAgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IFtsYW5nLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKGxwKSkge1xuICAgICAgICAgICAgaWYgKHZhbCkgb3V0LnB1c2goY2FwKGxhbmcpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBbLi4ubmV3IFNldChvdXQpXTtcbiAgfX0sXG4gIHsgY2FsbFNpZ246IFwiU0VOU0VTXCIsIGpzb25LZXk6IFwic2Vuc2VzXCIsIGNvbnY6IHNlbiA9PiB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzZW4pKSByZXR1cm4gc2VuLm1hcCgoczpzdHJpbmcpPT5zLnJlcGxhY2UoL15cXGQrXFxzKi8sXCJcIikucmVwbGFjZSgvXi4vLGM9PmMudG9VcHBlckNhc2UoKSkpO1xuICAgICAgaWYgKHNlbiAmJiB0eXBlb2Ygc2VuPT09XCJvYmplY3RcIikgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNlbikubWFwKChbayx2XSk9PmAke2suY2hhckF0KDApLnRvVXBwZXJDYXNlKCkray5zbGljZSgxKX0gJHt2fWApO1xuICAgICAgcmV0dXJuIFtdO1xuICB9fSwgXG57XG4gIGNhbGxTaWduOiBcIlRSQUlUU1wiLFxuICBqc29uS2V5OiBbXCJjbGFzc0ZlYXR1cmVzXCIsIFwiZW50cmllc1wiXSxcbiAgY29udjogKHJhdzogYW55LCBhbGxKc29uOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gICAgLy8gcHVsbCB0aGUgY2xhc3MgcmVjb3JkIHNvIHdlIGtub3cgaXRzIGRpc3BsYXkgbmFtZVxuICAgIGNvbnN0IGNsc1JlYyA9IEFycmF5LmlzQXJyYXkoYWxsSnNvbi5jbGFzcykgPyBhbGxKc29uLmNsYXNzWzBdIDogYWxsSnNvbjtcbiAgICBjb25zdCBjbGFzc05hbWUgPSB0eXBlb2YgY2xzUmVjLm5hbWUgPT09IFwic3RyaW5nXCIgPyBjbHNSZWMubmFtZSA6IFwiXCI7XG5cbiAgICAvLyBuYW1lcyB3ZSBuZXZlciB3YW50IHRvIGVtaXRcbiAgICBjb25zdCBvbWl0ID0gbmV3IFNldChbXG4gICAgICBcIkFiaWxpdHkgU2NvcmUgSW1wcm92ZW1lbnRcIixcbiAgICAgIFwiQXJjaGV0eXBlIEZlYXR1cmVcIixcbiAgICAgIFwiU3ViY2xhc3MgRmVhdHVyZVwiLFxuICAgICAgLy8gYWRkIG1vcmUgaWYgeW91IGxpa2VcdTIwMjZcbiAgICBdKTtcbiAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgICAvLyAxKSBpZiB0aGVyZSdzIGEgY2xhc3NGZWF0dXJlcyBhcnJheSwgdXNlIGl0XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsSnNvbi5jbGFzc0ZlYXR1cmVzKSkge1xuICAgICAgcmV0dXJuIGFsbEpzb24uY2xhc3NGZWF0dXJlcy5mbGF0TWFwKChmZWF0OiBhbnkpID0+IHtcbiAgICAgICAgLy8gc2tpcCBzdWJjbGFzc1x1MjAxMGluamVjdGVkIGZlYXR1cmVzIGVudGlyZWx5XG4gICAgICAgIGlmIChmZWF0ICYmIHR5cGVvZiBmZWF0ID09PSBcIm9iamVjdFwiICYmIGZlYXQuZ2FpblN1YmNsYXNzRmVhdHVyZSkgcmV0dXJuIFtdO1xuXG4gICAgICAgIC8vIG5vcm1hbGl6ZSB0byBhIHN0cmluZ1xuICAgICAgICBjb25zdCByYXdOYW1lID1cbiAgICAgICAgICB0eXBlb2YgZmVhdCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBmZWF0XG4gICAgICAgICAgICA6IHR5cGVvZiBmZWF0LmNsYXNzRmVhdHVyZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBmZWF0LmNsYXNzRmVhdHVyZVxuICAgICAgICAgICAgOiBcIlwiO1xuXG4gICAgICAgIC8vIGRyb3AgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgXHUyMDFDfFx1MjAxRFxuICAgICAgICBjb25zdCBuYW1lID0gcmF3TmFtZS5zcGxpdChcInxcIilbMF0udHJpbSgpO1xuICAgICAgICBpZiAoIW5hbWUgfHwgb21pdC5oYXMobmFtZSkgfHwgc2Vlbi5oYXMobmFtZSkpIHJldHVybiBbXTtcbiAgICAgICAgc2Vlbi5hZGQobmFtZSk7XG5cbiAgICAgICAgLy8gYnVpbGQgYSBuaWNlIGFuY2hvciAobXVzdCBtYXRjaCB5b3VyIGhlYWRlcnMpXG4gICAgICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgICAgICAucmVwbGFjZSgvW15cXHdcXHNdL2csIFwiXCIpICAgIC8vIHN0cmlwIHB1bmN0dWF0aW9uXG4gICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpICAgICAgIC8vIGNvbGxhcHNlIHNwYWNlc1xuICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAucmVwbGFjZSgvXFxiXFx3L2csIChjOiBhbnkpID0+IGMudG9VcHBlckNhc2UoKSk7IC8vIFRpdGxlIENhc2VcblxuICAgICAgICAvLyBwcm9kdWNlIGEgZmlsZS1hbmNob3IgbGlua1xuICAgICAgICByZXR1cm4gYFtbJHtjbGFzc05hbWV9IyR7YW5jaG9yfXwke25hbWV9XV1gO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gMikgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byB5b3VyIG9sZCBlbnRyaWVzLWJhc2VkIGxvZ2ljXG4gICAgY29uc3QgZW50cyA9IEFycmF5LmlzQXJyYXkocmF3KSA/IHJhdyA6IFtdO1xuICAgIGNvbnN0IGZlYXR1cmVOYW1lcyA9IGVudHNcbiAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT4gZT8uZGF0YT8uaXNGZWF0dXJlICYmIHR5cGVvZiBlLm5hbWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAubWFwKChlOiBhbnkpID0+IGUubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIikudHJpbSgpKTtcbiAgICBpZiAoZmVhdHVyZU5hbWVzLmxlbmd0aCkgcmV0dXJuIGZlYXR1cmVOYW1lcztcblxuICAgIHJldHVybiBlbnRzXG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IGUgJiYgdHlwZW9mIGUubmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgIC5tYXAoKGU6IGFueSkgPT4gZS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKS50cmltKCkpO1xuICB9LFxufSxcblxuXG4gIHsgY2FsbFNpZ246IFwiQUNcIiwganNvbktleTogXCJhY1wiLCBjb252OiBhID0+IEFycmF5LmlzQXJyYXkoYSk/YVswXS5hYzphIH0sXG4gIHsgY2FsbFNpZ246IFwiSFBcIiwganNvbktleTogXCJocFwiLCBjb252OiBocCA9PiBocD8uYXZlcmFnZSA/PyBocCB9LFxuICB7IGNhbGxTaWduOiBcIkNIQUxMRU5HRV9SQVRJTkdcIiwganNvbktleTogXCJjclwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU1RSRU5HVEhcIiwgICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbMF06YXJyPy5zdHIgPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIkRFWFRFUklUWVwiLCAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzFdOmFycj8uZGV4ID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJDT05TVElUVVRJT05cIiwganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclsyXTphcnI/LmNvbiA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiSU5URUxMSUdFTkNFXCIsIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbM106YXJyPy5pbnQgPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIldJU0RPTVwiLCAgICAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzRdOmFycj8ud2lzID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJDSEFSSVNNQVwiLCAgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2Fycls1XTphcnI/LmNoYSA/PyAwIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJBTElHTk1FTlRcIixcbiAgICBqc29uS2V5OiBcImFsaWdubWVudFwiLFxuICAgIGNvbnY6IChhOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHJhdyA9IEFycmF5LmlzQXJyYXkoYSkgPyBhLmpvaW4oXCIgXCIpIDogdHlwZW9mIGEgPT09IFwic3RyaW5nXCIgPyBhIDogU3RyaW5nKGEpO1xuICAgICAgY29uc3QgY2xlYW5lZCA9IHJhd1xuICAgICAgICAucmVwbGFjZSgvXFxiQVxcYi9nLCBcIkFueVwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiVVxcYi9nLCBcIlVuYWxpZ25lZFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiTlxcYi9nLCBcIk5ldXRyYWxcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkxcXGIvZywgXCJMYXdmdWxcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkNcXGIvZywgXCJDaGFvdGljXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJHXFxiL2csIFwiR29vZFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiRVxcYi9nLCBcIkV2aWxcIik7XG5cbiAgICAgIHJldHVybiBmb3JtYXRBbGlnbm1lbnRBYmJyZXYoY2xlYW5lZCk7IC8vIHJldXNlIHlvdXIgbm9ybWFsaXplciBpZiBpdCBleGlzdHNcbiAgICB9XG4gIH0sXG4gICAge1xuICAgICAgY2FsbFNpZ246IFwiVFlQRVwiLFxuICAgICAganNvbktleTogXCJ0eXBlXCIsXG4gICAgICBjb252OiAodDogYW55KTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgICAgLy8gMSkgSWYgaXRcdTIwMTlzIGEgc2ltcGxlIHN0cmluZyBjb2RlLCBtYXAgaXRcbiAgICAgICAgaWYgKHR5cGVvZiB0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgLy8gZGlyZWN0IGxvb2t1cFx1MjAxNGlmIG5vIG1hcHBpbmcsIGp1c3QgdGl0bGVcdTIwMTBjYXNlIHRoZSBjb2RlXG4gICAgICAgICAgcmV0dXJuIElURU1fVFlQRV9NQVBbdF0gPz8gY2FwKHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMikgSWYgaXRcdTIwMTlzIGFuIG9iamVjdCB3aXRoIGEgLnR5cGUgdGFnXG4gICAgICAgIGlmICh0ICYmIHR5cGVvZiB0ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgY29uc3QgY29kZSA9IFN0cmluZyh0LnR5cGUgfHwgXCJcIikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAvLyB0cnkgdGhlIG1hcCBmaXJzdFxuICAgICAgICAgIGlmIChJVEVNX1RZUEVfTUFQW2NvZGVdKSB7XG4gICAgICAgICAgICByZXR1cm4gSVRFTV9UWVBFX01BUFtjb2RlXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBcdTIwMUNCYXNlICh0YWdzXHUyMDI2KVx1MjAxRCBzdHlsZVxuICAgICAgICAgIGNvbnN0IGJhc2UgPSB0LnR5cGUgPyBjYXAodC50eXBlKSA6IFwiVW5rbm93blwiO1xuICAgICAgICAgIGNvbnN0IHRhZ3MgPSBBcnJheS5pc0FycmF5KHQudGFncykgPyB0LnRhZ3MubWFwKGNhcCkgOiBbXTtcbiAgICAgICAgICByZXR1cm4gdGFncy5sZW5ndGggPyBgJHtiYXNlfSAoJHt0YWdzLmpvaW4oXCIsIFwiKX0pYCA6IGJhc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0sXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSXRlbXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiVFlQRVwiLCAgIGpzb25LZXk6IFwiX3BhcnNlZFR5cGVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlJBUklUWVwiLCBqc29uS2V5OiBcInJhcml0eVwiLCBjb252OiByID0+IHtcbiAgICAgIGNvbnN0IHMgPSBTdHJpbmcocnx8XCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiBzICYmIHMhPT1cIm5vbmVcIiA/IHNbMF0udG9VcHBlckNhc2UoKStzLnNsaWNlKDEpIDogdW5kZWZpbmVkO1xuICB9fSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkNPU1RcIixcbiAgICBqc29uS2V5OiBcInZhbHVlXCIsXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBzID0gU3RyaW5nKHJhdykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBsZXQgbnVtOiBudW1iZXI7XG5cbiAgICAgIC8vIGV4cGxpY2l0IGNvcHBlcj9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwiY3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgLy8gY29udmVydCB0byBncCBvbmx5IGlmIDEwMCsgY3BcbiAgICAgICAgcmV0dXJuIG51bSA+PSAxMDBcbiAgICAgICAgICA/IGAke01hdGgucm91bmQoKG51bS8xMDApICogMTAwKS8xMDB9Z3BgXG4gICAgICAgICAgOiBgJHtudW19Y3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBleHBsaWNpdCBzaWx2ZXI/XG4gICAgICBpZiAocy5lbmRzV2l0aChcInNwXCIpKSB7XG4gICAgICAgIG51bSA9IHBhcnNlRmxvYXQocyk7XG4gICAgICAgIC8vIGNvbnZlcnQgdG8gZ3Agb25seSBpZiAxMCsgc3BcbiAgICAgICAgcmV0dXJuIG51bSA+PSAxMFxuICAgICAgICAgID8gYCR7TWF0aC5yb3VuZCgobnVtLzEwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICAgIDogYCR7bnVtfXNwYDtcbiAgICAgIH1cblxuICAgICAgLy8gZXhwbGljaXQgZ29sZD9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwiZ3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgcmV0dXJuIGAke01hdGgucm91bmQobnVtICogMTAwKS8xMDB9Z3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBiYXJlIG51bWJlciBcdTIxOTIgYXNzdW1lIGNvcHBlclxuICAgICAgbnVtID0gcGFyc2VGbG9hdChzKSB8fCAwO1xuICAgICAgcmV0dXJuIG51bSA+PSAxMDBcbiAgICAgICAgPyBgJHtNYXRoLnJvdW5kKChudW0vMTAwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICA6IGAke251bX1jcGA7XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIldFSUdIVFwiLCBqc29uS2V5OiBcIndlaWdodFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiTUFHSUNBTFwiLCBqc29uS2V5OiBcIndvbmRyb3VzXCIsIGNvbnY6IChfdyxhbGwpID0+ICEhYWxsLndvbmRyb3VzIHx8ICEhYWxsLnJlcUF0dHVuZSB9LFxuICB7IGNhbGxTaWduOiBcIlZBUklBTlRcIiwganNvbktleTogXCJib251c1dlYXBvblwiLCBjb252OiBiID0+IHR5cGVvZiBiPT09XCJzdHJpbmdcIiAmJiBiLnN0YXJ0c1dpdGgoXCIrXCIpIH0sXG4gIHsgY2FsbFNpZ246IFwiUFJPUEVSVElFU1wiLCBqc29uS2V5OiBcInByb3BlcnR5XCIsIGNvbnY6IGFyciA9PiBBcnJheS5pc0FycmF5KGFycikgPyBhcnIubWFwKHAgPT4gUFJPUEVSVFlfTUFQW3BdIHx8IHApIDogW10gfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VcIiwganNvbktleTogXCJkbWcxXCIsIGNvbnY6IChkLGFsbCkgPT4gZCA/IGFsbC5kbWcyID8gYCR7ZH0gLyAke2FsbC5kbWcyfWAgOiBgJHtkfWAgOiB1bmRlZmluZWQgfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfVFlQRVNcIiwganNvbktleTogXCJkbWdUeXBlXCIsIGNvbnY6IGR0ID0+IGR0ID09IG51bGwgPyBbXSA6IEFycmF5LmlzQXJyYXkoZHQpID8gZHQgOiBbZHRdIH0sXG4gIHsgY2FsbFNpZ246IFwiUkFOR0VcIiwganNvbktleTogXCJyYW5nZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiUkVMT0FEXCIsIGpzb25LZXk6IFwicmVsb2FkXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJBTU1PX1RZUEVcIiwganNvbktleTogXCJhbW1vVHlwZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU1RFQUxUSF9ESVNBRFZBTlRBR0VcIiwganNvbktleTogXCJzdGVhbHRoXCIgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkFUVFVORU1FTlRcIixcbiAgICBqc29uS2V5OiBbXCJ3b25kcm91c1wiLCBcInJlcUF0dHVuZVwiLCBcInJlcV9hdHR1bmVcIiwgXCJyZXFBdHR1bmVUYWdzXCJdLFxuICAgIGNvbnY6IChfcmF3LCBhbGxKc29uKSA9PiB7XG4gICAgICBjb25zdCBqID0gYWxsSnNvbiBhcyBhbnk7XG4gICAgICBjb25zdCBoYXNUZXh0ID0gdHlwZW9mIGoucmVxQXR0dW5lID09PSBcInN0cmluZ1wiICYmIGoucmVxQXR0dW5lLnRyaW0oKSAhPT0gXCJcIjtcbiAgICAgIGNvbnN0IGhhc1RhZ3MgPSBBcnJheS5pc0FycmF5KGoucmVxQXR0dW5lVGFncykgJiYgai5yZXFBdHR1bmVUYWdzLmxlbmd0aCA+IDA7XG4gICAgICByZXR1cm4gaGFzVGV4dCB8fCBoYXNUYWdzO1xuICAgIH1cbiAgfSxcbiAge1xuICBjYWxsU2lnbjogXCJBVFRVTkVfUkVRXCIsXG4gIGpzb25LZXk6IFwicmVxQXR0dW5lVGFnc1wiLFxuICBjb252OiAodGFnczogYW55W10gPSBbXSwgX2FsbCkgPT4ge1xuICAgIGNvbnN0IG1hcExldHRlcjogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAgICAgQTogXCJBbnlcIiwgVTogXCJVbmFsaWduZWRcIiwgTjogXCJOZXV0cmFsXCIsXG4gICAgICBMOiBcIkxhd2Z1bFwiLCBDOiBcIkNoYW90aWNcIiwgRzogXCJHb29kXCIsIEU6IFwiRXZpbFwiXG4gICAgfTtcbiAgICBjb25zdCByZXFzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgaWYgKHRhZy5jbGFzcyAmJiBBcnJheS5pc0FycmF5KHRhZy5hbGlnbm1lbnQpKSB7XG4gICAgICAgIGNvbnN0IGNscyA9IGNhcCh0YWcuY2xhc3MpO1xuICAgICAgICBmb3IgKGNvbnN0IGNvZGUgb2YgdGFnLmFsaWdubWVudCkge1xuICAgICAgICAgIHJlcXMucHVzaChgJHttYXBMZXR0ZXJbY29kZV0gfHwgY29kZX0gJHtjbHN9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGFnLmNsYXNzKSB7XG4gICAgICAgIHJlcXMucHVzaChjYXAodGFnLmNsYXNzKSk7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodGFnLmFsaWdubWVudCkpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb2RlIG9mIHRhZy5hbGlnbm1lbnQpIHtcbiAgICAgICAgICByZXFzLnB1c2gobWFwTGV0dGVyW2NvZGVdIHx8IGNvZGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRhZy5iYWNrZ3JvdW5kKSB7XG4gICAgICAgIGNvbnN0IFtiZ10gPSBTdHJpbmcodGFnLmJhY2tncm91bmQpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgcmVxcy5wdXNoKGJnLnNwbGl0KFwiIFwiKS5tYXAoY2FwKS5qb2luKFwiIFwiKSk7XG4gICAgICB9IGVsc2UgaWYgKHRhZy5zcGVsbGNhc3RpbmcpIHtcbiAgICAgICAgcmVxcy5wdXNoKFwiU3BlbGxjYXN0ZXJcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldChyZXFzKSk7XG4gIH1cbn0sXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBPdGhlciBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfUkVTXCIsIGpzb25LZXk6IFwicmVzaXN0XCIsIGNvbnY6IHYgPT4gQXJyYXkuaXNBcnJheSh2KSA/IHYubWFwKGNhcCkgOiBbXSB9LFxuICB7IGNhbGxTaWduOiBcIlJVTEVTRVRcIiwganNvbktleTogXCJfZWRpdGlvbklkXCIgfSxcbiAgXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEFiaWxpdHlcdTIwMTBzY29yZSBtb2RpZmllcnMgKG9ubHkgZW1pdCB3aGVuIG5vbnplcm8pIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7XG4gICAgY2FsbFNpZ246IFwiU1RSX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uc3RyID8/IDApIDogKGFyci5zdHIgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkRFWF9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLmRleCA/PyAwKSA6IChhcnIuZGV4ID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDT05fTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5jb24gPz8gMCkgOiAoYXJyLmNvbiA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiSU5UX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uaW50ID8/IDApIDogKGFyci5pbnQgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIldJU19NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLndpcyA/PyAwKSA6IChhcnIud2lzID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDSEFfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5jaGEgPz8gMCkgOiAoYXJyLmNoYSA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuXG5cbl07XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEdlbmVyaWMgYnVpbGRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBmdW5jdGlvbiBidWlsZEZNKGpzb246IGFueSwgZGVmczogRmllbGREZWZbXSk6IEZyb250bWF0dGVyIHtcbiAgY29uc3QgZm06IEZyb250bWF0dGVyID0ge307XG4gIGZvciAoY29uc3QgeyBjYWxsU2lnbiwganNvbktleSwgY29udiB9IG9mIGRlZnMpIHtcbiAgICBjb25zdCBrZXlzID0gQXJyYXkuaXNBcnJheShqc29uS2V5KSA/IGpzb25LZXkgOiBbanNvbktleV07XG4gICAgbGV0IHJhdzogYW55ID0gdW5kZWZpbmVkO1xuXG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgaWYgKGpzb25ba2V5XSAhPSBudWxsKSB7XG4gICAgICAgIHJhdyA9IGpzb25ba2V5XTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJhdyA9PSBudWxsKSBjb250aW51ZTtcbiAgICBjb25zdCB2YWwgPSBjb252ID8gY29udihyYXcsIGpzb24pIDogcmF3O1xuICAgIGZtW0ZNX0ZJRUxEU1tjYWxsU2lnbl1dID0gdmFsO1xuICB9XG4gIHJldHVybiBmbTtcbn1cblxuLy8gZnJvbnRtYXR0ZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUZyb250bWF0dGVyKFxuICBmbTogRnJvbnRtYXR0ZXIsXG4gIGRlZnM/OiBGaWVsZERlZltdXG4pOiBzdHJpbmcge1xuICBjb25zdCBmaWx0ZXJlZDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gIC8vIGRldGVjdCBpZiB3ZSBoYXZlIGFueSBhY3R1YWwgY2hvaWNlLWxpc3RzXG4gIGNvbnN0IGhhc1NraWxsQ2hvaWNlID0gQXJyYXkuaXNBcnJheShmbVtGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1RdKSBcbiAgICAmJiAoZm1bRk1fRklFTERTLlNLSUxMX0NIT0lDRV9MSVNUXSBhcyBhbnlbXSkubGVuZ3RoID4gMDtcbiAgY29uc3QgaGFzVG9vbENob2ljZSA9IEFycmF5LmlzQXJyYXkoZm1bRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1RdKSBcbiAgICAmJiAoZm1bRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1RdIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuXG5cbiAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZm0pKSB7XG4gICAgLy8gMSkgbmV2ZXIgZW1pdCB1bmRlZmluZWRcbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcbiAgICAvLyAyKSBkcm9wIGVtcHR5IENPTVBPTkVOVFMsIFRPT0xfQ0hPSUNFX0xJU1QsIFNLSUxMX0NIT0lDRV9MSVNUXG4gICAgaWYgKGsgPT09IEZNX0ZJRUxEUy5DT01QT05FTlRTICYmIEFycmF5LmlzQXJyYXkodikgJiYgdi5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xuICAgIGlmIChcbiAgICAgIChrID09PSBGTV9GSUVMRFMuVE9PTF9DSE9JQ0VfTElTVCB8fCBrID09PSBGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1QpICYmXG4gICAgICBBcnJheS5pc0FycmF5KHYpICYmIHYubGVuZ3RoID09PSAwXG4gICAgKSBjb250aW51ZTtcblxuICAgIGZpbHRlcmVkW2tdID0gdjtcbiAgfVxuXG4gIC8vIGJ1aWxkIHRoZSBsaXN0IG9mIGtleXMgaW4gdGhlIGV4YWN0IG9yZGVyIGZyb20gZGVmc1xuICBsZXQga2V5c1RvRW1pdDogc3RyaW5nW107XG4gIGlmIChkZWZzKSB7XG4gICAgLy8gbWFwIGVhY2ggRmllbGREZWYgdG8gaXRzIGZyb250bWF0dGVyIGtleVxuICAgIGNvbnN0IHdhbnRlZCA9IGRlZnMubWFwKGQgPT4gRk1fRklFTERTW2QuY2FsbFNpZ25dKTtcbiAgICAvLyBvbmx5IGtlZXAgdGhlIG9uZXMgd2UgYWN0dWFsbHkgaGF2ZSwgaW4gb3JkZXJcbiAgICBrZXlzVG9FbWl0ID0gd2FudGVkLmZpbHRlcihrID0+IGsgaW4gZmlsdGVyZWQpO1xuICAgIC8vIHRoZW4gYXBwZW5kIGFueSBleHRyYSBrZXlzIHRoYXQgd2VyZW4ndCBpbiBkZWZzXG4gICAga2V5c1RvRW1pdC5wdXNoKFxuICAgICAgLi4uT2JqZWN0LmtleXMoZmlsdGVyZWQpLmZpbHRlcihrID0+ICFrZXlzVG9FbWl0LmluY2x1ZGVzKGspKVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAga2V5c1RvRW1pdCA9IE9iamVjdC5rZXlzKGZpbHRlcmVkKTtcbiAgfVxuXG4gIC8vIG5vdyBlbWl0IFlBTUwgaW4gdGhhdCBvcmRlclxuICByZXR1cm4ga2V5c1RvRW1pdFxuICAgIC5tYXAoayA9PiB7XG4gICAgICBjb25zdCB2ID0gZmlsdGVyZWRba107XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2KSkge1xuICAgICAgICAvLyBKU09OLnN0cmluZ2lmeSB0byBoYW5kbGUgc3BhY2VzLCBjb21tYXMsIGV0Yy5cbiAgICAgICAgY29uc3QgaW5saW5lID0gdi5tYXAoaXRlbSA9PiBKU09OLnN0cmluZ2lmeShpdGVtKSkuam9pbihcIiwgXCIpO1xuICAgICAgICByZXR1cm4gYCR7a306IFske2lubGluZX1dYDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gYCR7a306IFwiJHt2fVwiYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtrfTogJHt2fWA7XG4gICAgfSlcbiAgICAuam9pbihcIlxcblwiKTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU2tpbGwgaGVscGVycyBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBjb25zdCBTS0lMTF9PUFRJT05TID0gW1xuICBcIkFjcm9iYXRpY3NcIixcIkFuaW1hbCBIYW5kbGluZ1wiLFwiQXJjYW5hXCIsXCJBdGhsZXRpY3NcIixcIkRlY2VwdGlvblwiLFwiSGlzdG9yeVwiLFxuICBcIkluc2lnaHRcIixcIkludGltaWRhdGlvblwiLFwiSW52ZXN0aWdhdGlvblwiLFwiTWVkaWNpbmVcIixcIk5hdHVyZVwiLFwiUGVyY2VwdGlvblwiLFxuICBcIlBlcmZvcm1hbmNlXCIsXCJQZXJzdWFzaW9uXCIsXCJSZWxpZ2lvblwiLFwiU2xlaWdodCBvZiBIYW5kXCIsXCJTdGVhbHRoXCIsXCJTdXJ2aXZhbFwiLFxuXSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFNraWxsT3B0aW9uID0gdHlwZW9mIFNLSUxMX09QVElPTlNbbnVtYmVyXTtcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVTa2lsbChyYXc6IHN0cmluZyk6IFNraWxsT3B0aW9uIHwgbnVsbCB7XG4gIGNvbnN0IGxvd2VyID0gcmF3LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gU0tJTExfT1BUSU9OUy5maW5kKHNraWxsID0+IHNraWxsLnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyKSA/PyBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclZhbGlkU2tpbGxzKHJhd0FycjogYW55W10pOiBTa2lsbE9wdGlvbltdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHJhd0FycikpIHJldHVybiBbXTtcbiAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8U2tpbGxPcHRpb24+KCk7XG4gIGZvciAoY29uc3QgZW50IG9mIHJhd0Fycikge1xuICAgIGxldCBjYW5kaWRhdGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikgY2FuZGlkYXRlID0gZW50O1xuICAgIGVsc2UgaWYgKGVudC5uYW1lICYmIHR5cGVvZiBlbnQubmFtZSA9PT0gXCJzdHJpbmdcIikgY2FuZGlkYXRlID0gZW50Lm5hbWU7XG4gICAgaWYgKGNhbmRpZGF0ZSkge1xuICAgICAgY29uc3Qgbm9ybSA9IG5vcm1hbGl6ZVNraWxsKGNhbmRpZGF0ZSk7XG4gICAgICBpZiAobm9ybSkgc2Vlbi5hZGQobm9ybSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBbLi4uc2Vlbl07XG59XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBXaGljaCBGTV9LRVlTIGVhY2ggcGFyc2VyIHNob3VsZCBpbmNsdWRlIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNQRUxMX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIkxFVkVMXCIsXG4gIFwiU0NIT09MXCIsXG4gIFwiQ0FTVElOR19USU1FXCIsXG4gIFwiU1BFTExfUkFOR0VcIixcbiAgXCJEVVJBVElPTlwiLFxuICBcIlZFUkJBTFwiLFxuICBcIlNPTUFUSUNcIixcbiAgXCJNQVRFUklBTFwiLFxuICBcIkNPTVBPTkVOVFNcIixcbiAgXCJDT05DRU5UUkFUSU9OXCIsXG4gIFwiU09VUkNFXCIsXG5dO1xuXG5leHBvcnQgY29uc3QgU1BFQ0lFU19LRVlTOiBGTUtleVtdID0gW1xuICBcIlNQRUNJRVNcIixcbiAgXCJTSVpFXCIsXG4gIFwiU1BFRURcIixcbiAgXCJMQU5HVUFHRVNcIixcbiAgXCJUUkFJVFNcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTVFJfTU9EXCIsXG4gIFwiREVYX01PRFwiLFxuICBcIkNPTl9NT0RcIixcbiAgXCJJTlRfTU9EXCIsXG4gIFwiV0lTX01PRFwiLFxuICBcIkNIQV9NT0RcIixcbiAgXCJTS0lMTF9DSE9JQ0VfTElTVFwiLFxuICBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgXCJXRUFQT05fUFJPRklDSUVOQ0lFU1wiLFxuICBcIlNFTlNFU1wiLFxuICBcIkRBTUFHRV9SRVNcIixcbiAgXCJTT1VSQ0VcIixcbl07XG5cbmV4cG9ydCBjb25zdCBJVEVNX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlRZUEVcIixcbiAgXCJSQVJJVFlcIixcbiAgXCJDT1NUXCIsXG4gIFwiV0VJR0hUXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUFJPUEVSVElFU1wiLFxuICBcIkRBTUFHRVwiLFxuICBcIkRBTUFHRV9UWVBFU1wiLFxuICBcIlJBTkdFXCIsXG4gIFwiUkVMT0FEXCIsXG4gIFwiQU1NT19UWVBFXCIsXG4gIFwiQUNcIixcbiAgXCJTVEVBTFRIX0RJU0FEVkFOVEFHRVwiLFxuICBcIk1BR0lDQUxcIixcbiAgXCJBVFRVTkVNRU5UXCIsXG4gIFwiQVRUVU5FX1JFUVwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IEJFU1RJQVJZX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNJWkVcIixcbiAgXCJUWVBFXCIsXG4gIFwiQUxJR05NRU5UXCIsXG4gIFwiQUNcIixcbiAgXCJIUFwiLFxuICBcIlNQRUVEXCIsXG4gIFwiU1RSRU5HVEhcIixcbiAgXCJERVhURVJJVFlcIixcbiAgXCJDT05TVElUVVRJT05cIixcbiAgXCJJTlRFTExJR0VOQ0VcIixcbiAgXCJXSVNET01cIixcbiAgXCJDSEFSSVNNQVwiLFxuICBcIlNBVklOR19USFJPV1NcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTRU5TRVNcIixcbiAgXCJMQU5HVUFHRVNcIixcbiAgXCJDSEFMTEVOR0VfUkFUSU5HXCIsXG4gIFwiU09VUkNFXCIsXG5dO1xuXG5leHBvcnQgY29uc3QgQ0xBU1NfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiU1BFTExfQ0FTVF9NT0RcIixcbiAgXCJBUk1PUl9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiU0FWSU5HX1RIUk9XU1wiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU09VUkNFXCJcbl07XG5cbmV4cG9ydCBjb25zdCBCQUNLR1JPVU5EX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsICBcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU09VUkNFXCIsXG5dO1xuXG5leHBvcnQgY29uc3QgRkVBVFNfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJTT1VSQ0VcIlxuXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZpZWxkIHN1YnNldHMgZm9yIGVhY2ggcGFyc2VyIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNQRUxMX01FVEFfREVGUzogRmllbGREZWZbXSA9IFNQRUxMX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBTUEVMTF9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBTUEVDSUVTX01FVEFfREVGUzogRmllbGREZWZbXSA9IFNQRUNJRVNfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIFNQRUNJRVNfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgSVRFTV9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBJVEVNX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBJVEVNX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEJFU1RJQVJZX01FVEFfREVGUzogRmllbGREZWZbXSA9IEJFU1RJQVJZX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCRVNUSUFSWV9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBDTEFTU19NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBDTEFTU19LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQ0xBU1NfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgQkFDS0dST1VORF9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBCQUNLR1JPVU5EX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCQUNLR1JPVU5EX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEZFQVRTX01FVEFfREVGUzogRmllbGREZWZbXSA9IEZFQVRTX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCQUNLR1JPVU5EX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pOyIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBTUEVMTF9NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cblxuZXhwb3J0IGNvbnN0IFNDSE9PTF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEE6IFwiQWJqdXJhdGlvblwiLFxuICBDOiBcIkNvbmp1cmF0aW9uXCIsXG4gIEQ6IFwiRGl2aW5hdGlvblwiLFxuICBFOiBcIkVuY2hhbnRtZW50XCIsXG4gIFY6IFwiRXZvY2F0aW9uXCIsXG4gIEk6IFwiSWxsdXNpb25cIixcbiAgTjogXCJOZWNyb21hbmN5XCIsXG4gIFQ6IFwiVHJhbnNtdXRhdGlvblwiLFxufTtcblxuZnVuY3Rpb24gb3JkaW5hbChuOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBzdWZmaXggPSAobiA9PT0gMSkgPyBcInN0XCIgOiAobiA9PT0gMikgPyBcIm5kXCIgOiAobiA9PT0gMykgPyBcInJkXCIgOiBcInRoXCI7XG4gIHJldHVybiBgJHtufSR7c3VmZml4fWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRSYW5nZShyYW5nZTogYW55KTogc3RyaW5nIHtcbiAgaWYgKCFyYW5nZSkgcmV0dXJuIFwiXCI7XG5cbiAgaWYgKHR5cGVvZiByYW5nZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHJhbmdlO1xuXG4gIGlmIChyYW5nZS50eXBlID09PSBcInNwZWNpYWxcIikgcmV0dXJuIFwiU3BlY2lhbFwiO1xuICBpZiAocmFuZ2UudHlwZSA9PT0gXCJwb2ludFwiICYmIHJhbmdlLmRpc3RhbmNlKSB7XG4gICAgY29uc3QgZGlzdCA9IHJhbmdlLmRpc3RhbmNlO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwidG91Y2hcIikgcmV0dXJuIFwiVG91Y2hcIjtcbiAgICBpZiAoZGlzdC50eXBlID09PSBcInNlbGZcIikgcmV0dXJuIFwiU2VsZlwiO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwic2lnaHRcIikgcmV0dXJuIFwiU2lnaHRcIjtcbiAgICBpZiAoZGlzdC5hbW91bnQpIHJldHVybiBgJHtkaXN0LmFtb3VudH0gJHtkaXN0LnR5cGV9YDtcbiAgfVxuXG4gIHJldHVybiBcIlZhcmllc1wiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGltZSh0aW1lOiBhbnlbXSk6IHN0cmluZyB7XG4gIGlmICghQXJyYXkuaXNBcnJheSh0aW1lKSkgcmV0dXJuIFwiXCI7XG5cbiAgcmV0dXJuIHRpbWUubWFwKHQgPT4gYCR7dC5udW1iZXJ9ICR7dC51bml0fWApLmpvaW4oXCIsIFwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdER1cmF0aW9uKGR1cmF0aW9uOiBhbnlbXSk6IHN0cmluZyB7XG4gIGlmICghQXJyYXkuaXNBcnJheShkdXJhdGlvbikpIHJldHVybiBcIlwiO1xuXG4gIHJldHVybiBkdXJhdGlvbi5tYXAoZCA9PiB7XG4gICAgaWYgKGQudHlwZSA9PT0gXCJpbnN0YW50XCIpIHJldHVybiBcIkluc3RhbnRhbmVvdXNcIjtcbiAgICBpZiAoZC50eXBlID09PSBcInRpbWVkXCIgJiYgZC5kdXJhdGlvbikge1xuICAgICAgcmV0dXJuIGAke2QuZHVyYXRpb24uYW1vdW50fSAke2QuZHVyYXRpb24udHlwZX0ke2QuY29uY2VudHJhdGlvbiA/IFwiIChjb25jZW50cmF0aW9uKVwiIDogXCJcIn1gO1xuICAgIH1cbiAgICBpZiAoZC50eXBlID09PSBcInBlcm1hbmVudFwiKSByZXR1cm4gXCJQZXJtYW5lbnRcIjtcbiAgICByZXR1cm4gXCJTcGVjaWFsXCI7XG4gIH0pLmpvaW4oXCIsIFwiKTtcbn1cbi8vIGluIHBhcnNlcnMvNWUtanNvbi9wYXJzZVNwZWxsc0ZpbGUudHMgKG9yIHdoZXJldmVyIGZvcm1hdENvbXBvbmVudHMgbGl2ZXMpXG5cbmZ1bmN0aW9uIGZvcm1hdENvbXBvbmVudHMoY29tcG9uZW50czogYW55KTogc3RyaW5nIHtcbiAgaWYgKCFjb21wb25lbnRzKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICBpZiAoY29tcG9uZW50cy52KSBwYXJ0cy5wdXNoKFwiVlwiKTtcbiAgaWYgKGNvbXBvbmVudHMucykgcGFydHMucHVzaChcIlNcIik7XG5cbiAgaWYgKGNvbXBvbmVudHMubSkge1xuICAgIC8vIHB1bGwgb3V0IHRoZSBhY3R1YWwgbWF0ZXJpYWwgdGV4dChzKVxuICAgIGxldCBtYXREZXRhaWxzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29tcG9uZW50cy5tKSkge1xuICAgICAgbWF0RGV0YWlscyA9IGNvbXBvbmVudHMubVxuICAgICAgICAubWFwKChpdGVtOmFueSkgPT5cbiAgICAgICAgICB0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBpdGVtXG4gICAgICAgICAgICA6IGl0ZW0gJiYgdHlwZW9mIGl0ZW0udGV4dCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBpdGVtLnRleHRcbiAgICAgICAgICAgIDogbnVsbFxuICAgICAgICApXG4gICAgICAgIC5maWx0ZXIoKHQ6YW55KTogdCBpcyBzdHJpbmcgPT4gISF0KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb21wb25lbnRzLm0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG1hdERldGFpbHMgPSBbY29tcG9uZW50cy5tXTtcbiAgICB9IGVsc2UgaWYgKGNvbXBvbmVudHMubS50ZXh0KSB7XG4gICAgICBtYXREZXRhaWxzID0gW2NvbXBvbmVudHMubS50ZXh0XTtcbiAgICB9XG5cbiAgICAvLyBidWlsZCB0aGUgXHUyMDFDTVx1MjAxRCBlbnRyeSwgYXBwZW5kaW5nIGRldGFpbHMgaWYgYW55XG4gICAgY29uc3QgbWF0UGFydCA9XG4gICAgICBtYXREZXRhaWxzLmxlbmd0aCA+IDBcbiAgICAgICAgPyBgTSAoJHttYXREZXRhaWxzLmpvaW4oXCIsIFwiKX0pYFxuICAgICAgICA6IFwiTVwiO1xuXG4gICAgcGFydHMucHVzaChtYXRQYXJ0KTtcbiAgfVxuXG4gIHJldHVybiBwYXJ0cy5qb2luKFwiLCBcIik7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3BlbGxzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIWpzb24uc3BlbGwpIHJldHVybiBbXTtcblxuICAvLyBtYWtlIGVkaXRpb25JZCBhdmFpbGFibGUgZm9yIG91ciBTT1VSQ0UgY29udmVydGVyXG4gIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuICByZXR1cm4ganNvbi5zcGVsbC5tYXAoKHNwZWxsOiBhbnkpID0+IHtcbiAgICAvLyBcdTIwMTQgZ2F0aGVyIGRhdGEgZm9yIGhlYWRlci9ib2R5L2Zvb3RlciBhcyBiZWZvcmUgXHUyMDE0XG4gICAgY29uc3Qgc291cmNlcyA9IHNwZWxsLnNvdXJjZVxuICAgICAgPyBBcnJheS5pc0FycmF5KHNwZWxsLnNvdXJjZSkgPyBzcGVsbC5zb3VyY2UgOiBbc3BlbGwuc291cmNlXVxuICAgICAgOiBbXCJ1bmtub3duXCJdO1xuICAgIGNvbnN0IG5hbWUgPSBzcGVsbC5uYW1lO1xuICAgIGNvbnN0IHNjaG9vbCA9IFNDSE9PTF9NQVBbc3BlbGwuc2Nob29sXSA/PyBzcGVsbC5zY2hvb2w7XG4gICAgY29uc3QgbGV2ZWwgPSBzcGVsbC5sZXZlbDtcbiAgICBjb25zdCByYW5nZSA9IGZvcm1hdFJhbmdlKHNwZWxsLnJhbmdlKTtcbiAgICBjb25zdCBjYXN0aW5nVGltZSA9IGZvcm1hdFRpbWUoc3BlbGwudGltZSk7XG4gICAgY29uc3QgZHVyYXRpb24gPSBmb3JtYXREdXJhdGlvbihzcGVsbC5kdXJhdGlvbik7XG4gICAgY29uc3QgZm9ybWF0dGVkU291cmNlcyA9IHNvdXJjZXMubWFwKChzOiBzdHJpbmcpID0+IGdldEZ1bGxTb3VyY2VOYW1lKHMsIGVkaXRpb25JZCkpO1xuXG4gICAgY29uc3QgYXR0YWNrVHlwZSA9IHNwZWxsLmF0dGFja1R5cGUgfHwgXCJcIjtcbiAgICBjb25zdCBkYW1hZ2VUeXBlID0gc3BlbGwuZGFtYWdlSW5mbGljdD8uWzBdIHx8IFwiVGVsZXBvcnRhdGlvblwiO1xuICAgIGNvbnN0IHJpdHVhbCA9IHNwZWxsLnJpdHVhbCA9PT0gdHJ1ZTtcbiAgICBjb25zdCBjb25jZW50cmF0aW9uID0gc3BlbGwuZHVyYXRpb24/LnNvbWUoKGQ6IGFueSkgPT4gZC5jb25jZW50cmF0aW9uKSA/PyBmYWxzZTtcblxuY29uc3QgRk0gICA9IGJ1aWxkRk0oc3BlbGwsIFNQRUxMX01FVEFfREVGUyk7XG5jb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoRk0sIFNQRUxMX01FVEFfREVGUyk7XG5cbiAgICAvLyBcdTIwMTQgdGl0bGUvc3VidGl0bGUgYW5kIGJvZHkgbGF5b3V0IFx1MjAxNFxuICAgIGNvbnN0IHNhZmVOYW1lID0gbmFtZS5yZXBsYWNlKC9cXC8vZywgXCItXCIpO1xuICAgIGNvbnN0IHRpdGxlID0gYCMgJHtuYW1lfWA7XG4gICAgY29uc3QgbGV2ZWxMYWJlbCA9XG4gICAgICBsZXZlbCA9PT0gMFxuICAgICAgICA/IGAke3NjaG9vbH0gQ2FudHJpcGBcbiAgICAgICAgOiBgJHtvcmRpbmFsKGxldmVsKX0tbGV2ZWwgJHtzY2hvb2x9IFNwZWxsYDtcbiAgICBjb25zdCBzdWJ0aXRsZSA9IGAjIyMgKiR7bGV2ZWxMYWJlbH0qJHtjb25jZW50cmF0aW9uID8gXCIgKihDb25jZW50cmF0aW9uKSpcIiA6IFwiXCJ9YDtcblxuICAgIGNvbnN0IGhlYWRlckxpbmVzID0gW1xuICAgICAgdGl0bGUsXG4gICAgICBzdWJ0aXRsZSxcbiAgICAgIGAqKkNhc3RpbmcgVGltZToqKiAke2Nhc3RpbmdUaW1lfWAsXG4gICAgICBgKipSYW5nZToqKiAke3JhbmdlfWAsXG4gICAgICBgKipDb21wb25lbnRzOioqICR7Zm9ybWF0Q29tcG9uZW50cyhzcGVsbC5jb21wb25lbnRzKX1gLFxuICAgICAgYCoqRHVyYXRpb246KiogJHtkdXJhdGlvbn1gLFxuICAgIF07XG5cbiAgICBjb25zdCBib2R5TGluZXMgPSBbXG4gICAgICAuLi4oKHNwZWxsLmVudHJpZXMgPz8gW10pLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkpLFxuICAgICAgLi4uKChzcGVsbC5lbnRyaWVzSGlnaGVyTGV2ZWwgPz8gW10pLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkpLFxuICAgIF07XG5cbiAgICBjb25zdCBmb290ZXJMaW5lcyA9IFtcbiAgICAgIGAtLS1gLFxuICAgICAgYCoqU291cmNlOioqICR7Zm9ybWF0dGVkU291cmNlcy5qb2luKFwiLCBcIil9YCxcbiAgICBdO1xuXG4gICAgLy8gXHUyMDE0IGFzc2VtYmxlIHRoZSBub3RlIHdpdGggWUFNTCBmcm9udG1hdHRlciBcdTIwMTRcbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDogYCR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgYC0tLVxcbiR7eWFtbH1cXG4tLS1gLFxuICAgICAgICBoZWFkZXJMaW5lcy5qb2luKFwiXFxuXCIpLFxuICAgICAgICBgYCxcbiAgICAgICAgYm9keUxpbmVzLmpvaW4oXCJcXG5cXG5cIiksXG4gICAgICAgIGBgLFxuICAgICAgICBmb290ZXJMaW5lcy5qb2luKFwiXFxuXCIpLFxuICAgICAgXS5qb2luKFwiXFxuXCIpLFxuICAgIH07XG4gIH0pO1xufVxuXG4iLCAiaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQge1xuICBidWlsZEZNLFxuICBzZXJpYWxpemVGcm9udG1hdHRlcixcbiAgRk1fRklFTERTLFxuICBTUEVDSUVTX01FVEFfREVGUyxcbiAgU0laRV9NQVAsXG59IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IGZvcm1hdEVudHJ5IH0gZnJvbSBcIi4vaGVscGVycy9mb3JtYXRFbnRyeVwiO1xuXG5mdW5jdGlvbiBzbHVnKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBuYW1lXG4gICAgLnJlcGxhY2UoLzsvZywgXCI6XCIpICAgICAgIC8vIHNlbWljb2xvbiBcdTIxOTIgZGFzaFxuICAgIC5yZXBsYWNlKC9bXFwvOlwiXS9nLCBcIjpcIikgIC8vIHNsYXNoLCBjb2xvbiwgcXVvdGUgXHUyMTkyIGRhc2hcbiAgICAudHJpbSgpO1xufVxuXG5jb25zdCBCTE9DS0VEX1RSQUlUUyA9IFtcIkFnZVwiLCBcIlNpemVcIiwgXCJMYW5ndWFnZXNcIiwgXCJDcmVhdHVyZSBUeXBlXCIsIFwiU3BlZWRcIl07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNwZWNpZXNGaWxlKFxuICBqc29uOiB7IHJhY2U6IGFueVtdOyBzdWJyYWNlPzogYW55W107IF9lZGl0aW9uSWQ/OiBzdHJpbmcgfSxcbiAgZWRpdGlvbklkOiBzdHJpbmdcbik6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24ucmFjZSkpIHJldHVybiBbXTtcbiAganNvbi5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4gIC8vIDEpIEZpbHRlciBvdXQgcmVwcmludHNcbiAgY29uc3QgcmF3VmFyaWFudHMgPSBqc29uLnJhY2UuZmlsdGVyKChyOiBhbnkpID0+XG4gICAgIShcInJlcHJpbnRlZEFzXCIgaW4gcikgJiZcbiAgICAhL1xcKCg/OkthbGFkZXNofFplbmRpa2FyfEFtb25raGV0fElubmlzdHJhZHxJeGFsYW4pXFwpJC8udGVzdChyLm5hbWUpXG4gICk7XG5cbiAgLy8gMikgR3JvdXAgYnkgcmFjZSBuYW1lXG4gIGNvbnN0IGJ5TmFtZSA9IG5ldyBNYXA8c3RyaW5nLCBhbnlbXT4oKTtcbiAgZm9yIChjb25zdCByIG9mIHJhd1ZhcmlhbnRzKSB7XG4gICAgY29uc3QgbGlzdCA9IGJ5TmFtZS5nZXQoci5uYW1lKSA/PyBbXTtcbiAgICBsaXN0LnB1c2gocik7XG4gICAgYnlOYW1lLnNldChyLm5hbWUsIGxpc3QpO1xuICB9XG5cbiAgLy8gMykgQWxsIHN1YnJhY2VzIGFycmF5XG4gIGNvbnN0IHN1YnJhY2VzTGlzdCA9IEFycmF5LmlzQXJyYXkoanNvbi5zdWJyYWNlKSA/IGpzb24uc3VicmFjZSA6IFtdO1xuXG4gIGNvbnN0IG91dDogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICAvLyA0KSBNYWluIGxvb3Agb3ZlciBlYWNoIHNwZWNpZXNcbiAgZm9yIChjb25zdCBbcmFjZU5hbWUsIHJhY2VWYXJpYW50c10gb2YgYnlOYW1lLmVudHJpZXMoKSkge1xuICAgIGNvbnN0IHNhZmVOYW1lID0gc2x1ZyhyYWNlTmFtZSk7XG5cbiAgICAvLyBwaWNrIHRoZSBcdTIwMUNmdWxsZXN0XHUyMDFEIHZhcmlhbnQgYXMgcHJpbWFyeVxuICAgIGNvbnN0IHByaW1hcnkgPSByYWNlVmFyaWFudHMucmVkdWNlKFxuICAgICAgKGJlc3QsIGN1cikgPT5cbiAgICAgICAgT2JqZWN0LmtleXMoY3VyKS5sZW5ndGggPiBPYmplY3Qua2V5cyhiZXN0KS5sZW5ndGggPyBjdXIgOiBiZXN0LFxuICAgICAgcmFjZVZhcmlhbnRzWzBdXG4gICAgKTtcblxuICAgIC8vIG9uZVx1MjAxMG9mZjogZ3JhZnQgSHVtYW4gYWJpbGl0eSBpZiBtaXNzaW5nXG4gICAgaWYgKCFwcmltYXJ5LmFiaWxpdHkpIHtcbiAgICAgIGNvbnN0IGh1bWFuRW50cnkgPSBzdWJyYWNlc0xpc3QuZmluZCgoc3I6IGFueSkgPT5cbiAgICAgICAgc3IucmFjZU5hbWUgPT09IHJhY2VOYW1lICYmXG4gICAgICAgIHNyLnJhY2VTb3VyY2UgPT09IHByaW1hcnkuc291cmNlICYmXG4gICAgICAgICEoXCJuYW1lXCIgaW4gc3IpICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkoc3IuYWJpbGl0eSlcbiAgICAgICk7XG4gICAgICBpZiAoaHVtYW5FbnRyeSkgcHJpbWFyeS5hYmlsaXR5ID0gaHVtYW5FbnRyeS5hYmlsaXR5O1xuICAgIH1cblxuICAgIC8vIGJ1aWxkIGZyb250bWF0dGVyXG4gICAgY29uc3QgZm0gPSBidWlsZEZNKHByaW1hcnksIFNQRUNJRVNfTUVUQV9ERUZTKTtcbiAgICBjb25zdCBzZW5zZXM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKHByaW1hcnkuZGFya3Zpc2lvbikgIHNlbnNlcy5wdXNoKGBEYXJrdmlzaW9uICR7cHJpbWFyeS5kYXJrdmlzaW9ufSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS5ibGluZHNpZ2h0KSAgc2Vuc2VzLnB1c2goYEJsaW5kc2lnaHQgJHtwcmltYXJ5LmJsaW5kc2lnaHR9IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LnRyZW1vcnNlbnNlKSBzZW5zZXMucHVzaChgVHJlbW9yc2Vuc2UgJHtwcmltYXJ5LnRyZW1vcnNlbnNlfSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS50cnVlc2lnaHQpICAgc2Vuc2VzLnB1c2goYFRydWVzaWdodCAke3ByaW1hcnkudHJ1ZXNpZ2h0fSBmdC5gKTtcbiAgICBpZiAoc2Vuc2VzLmxlbmd0aCkgZm0uc2Vuc2VzID0gc2Vuc2VzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZtLnRyYWl0cykpIHtcbiAgICAgIGZtLnRyYWl0cyA9IGZtLnRyYWl0cy5maWx0ZXIodCA9PiAhQkxPQ0tFRF9UUkFJVFMuaW5jbHVkZXModCkpO1xuICAgIH1cbiAgICBjb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIFNQRUNJRVNfTUVUQV9ERUZTKTtcblxuICAgIC8vIGJ1aWxkIHNwZWNpZXMgYm9keVxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxpbmVzLnB1c2goYCMgJHtyYWNlTmFtZX1gLCBgIyMgU3RhdHNgKTtcblxuICAgIC8vIFNpemVcbiAgICBjb25zdCBzaXplID0gQXJyYXkuaXNBcnJheShwcmltYXJ5LnNpemUpXG4gICAgICA/IHByaW1hcnkuc2l6ZS5tYXAoKHM6IHN0cmluZykgPT4gU0laRV9NQVBbc10gfHwgcykuam9pbihcIi9cIilcbiAgICAgIDogU0laRV9NQVBbcHJpbWFyeS5zaXplXSA/PyBwcmltYXJ5LnNpemU7XG4gICAgbGluZXMucHVzaChgKipTaXplOioqICR7c2l6ZX1gKTtcblxuICAgIC8vIFNwZWVkXG4gICAgY29uc3Qgc3BlZWQgPSB0eXBlb2YgcHJpbWFyeS5zcGVlZCA9PT0gXCJudW1iZXJcIlxuICAgICAgPyBwcmltYXJ5LnNwZWVkXG4gICAgICA6IHByaW1hcnkuc3BlZWQ/LndhbGsgPz8gcHJpbWFyeS5zcGVlZD8uYmFzZSA/PyAwO1xuICAgIGxpbmVzLnB1c2goYCoqU3BlZWQ6KiogJHtzcGVlZH0gZnQuIHdhbGtpbmdgKTtcblxuICAgIC8vIEFiaWxpdGllc1xuICAgIGNvbnN0IGtpZHMgPSBzdWJyYWNlc0xpc3QuZmlsdGVyKHNyID0+XG4gICAgICBzci5uYW1lICYmIHNyLnJhY2VOYW1lID09PSByYWNlTmFtZSAmJiBzci5yYWNlU291cmNlID09PSBwcmltYXJ5LnNvdXJjZVxuICAgICk7XG4gICAgY29uc3QgcmF3QWJpbGl0eSA9IEFycmF5LmlzQXJyYXkocHJpbWFyeS5hYmlsaXR5KVxuICAgICAgPyBwcmltYXJ5LmFiaWxpdHlcbiAgICAgIDogQXJyYXkuaXNBcnJheShraWRzWzBdPy5hYmlsaXR5KSA/IGtpZHNbMF0uYWJpbGl0eSA6IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHJhd0FiaWxpdHkpICYmIHJhd0FiaWxpdHkubGVuZ3RoKSB7XG4gICAgICBjb25zdCBib251c2VzID0geyBzdHI6MCxkZXg6MCxjb246MCxpbnQ6MCx3aXM6MCxjaGE6MCB9O1xuICAgICAgbGV0IGNob29zZU9wdDogYW55ID0gbnVsbDtcbiAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHJhd0FiaWxpdHkpIHtcbiAgICAgICAgaWYgKFwiY2hvb3NlXCIgaW4gb2JqKSBjaG9vc2VPcHQgPSBvYmouY2hvb3NlO1xuICAgICAgICBlbHNlIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkgKGJvbnVzZXMgYXMgYW55KVtrXSArPSB2IGFzIG51bWJlcjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhaXJzID0gT2JqZWN0LmVudHJpZXMoYm9udXNlcykgYXMgW3N0cmluZyxudW1iZXJdW107XG4gICAgICBjb25zdCBwYXJ0cyA9IHBhaXJzLmZpbHRlcigoWyx2XSk9PnYhPT0wKS5tYXAoKFtrLHZdKT0+YCR7ay50b1VwcGVyQ2FzZSgpfSAke3Y+PTA/XCIrXCI6XCJcIn0ke3Z9YCk7XG4gICAgICBpZiAoY2hvb3NlT3B0Py5jb3VudCAmJiBBcnJheS5pc0FycmF5KGNob29zZU9wdC5mcm9tKSkge1xuICAgICAgICBwYXJ0cy5wdXNoKGBDSE9PU0UgJHtjaG9vc2VPcHQuY291bnR9IGZyb20gJHtjaG9vc2VPcHQuZnJvbS5tYXAoKHM6c3RyaW5nKT0+cy50b1VwcGVyQ2FzZSgpKS5qb2luKFwiLCBcIil9YCk7XG4gICAgICB9XG4gICAgICBpZiAocGFydHMubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKkFiaWxpdHkgU2NvcmVzOioqICR7cGFydHMuam9pbihcIiwgXCIpfWApO1xuICAgIH1cblxuICAgIC8vIExhbmd1YWdlc1xuICAgIGNvbnN0IGxhbmdzID0gZm0ubGFuZ3VhZ2VzIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBpZiAobGFuZ3M/Lmxlbmd0aCkgbGluZXMucHVzaChgKipMYW5ndWFnZXM6KiogJHtsYW5ncy5qb2luKFwiLCBcIil9YCk7XG5cbiAgICAvLyBTa2lsbHNcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwcmltYXJ5LnNraWxsUHJvZmljaWVuY2llcykpIHtcbiAgICAgIGNvbnN0IHNraWxsTGFiZWxzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZm9yIChjb25zdCBlIG9mIHByaW1hcnkuc2tpbGxQcm9maWNpZW5jaWVzIGFzIGFueVtdKSB7XG4gICAgICAgIGlmIChlLmNob29zZT8uZnJvbSkge1xuICAgICAgICAgIHNraWxsTGFiZWxzLnB1c2goYENob29zZSBmcm9tOiAke2UuY2hvb3NlLmZyb20ubWFwKChzOnN0cmluZyk9PnMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrcy5zbGljZSgxKSkuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHZhbCA9IGUucHJvZmljaWVuY3kgPz8gZS5uYW1lID8/IGU7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIpIHNraWxsTGFiZWxzLnB1c2godmFsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3ZhbC5zbGljZSgxKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChza2lsbExhYmVscy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqU2tpbGwgUHJvZmljaWVuY2llczoqKiAke3NraWxsTGFiZWxzLmpvaW4oXCI7IFwiKX1gKTtcbiAgICB9XG5cbiAgICAvLyBUb29sIC8gV2VhcG9uIC8gQXJtb3JcbiAgICBjb25zdCB0cCA9IGZtW0ZNX0ZJRUxEUy5UT09MX1BST0ZJQ0lFTkNJRVNdIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBjb25zdCB3cCA9IGZtW0ZNX0ZJRUxEUy5XRUFQT05fUFJPRklDSUVOQ0lFU10gYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGNvbnN0IGFwID0gZm1bRk1fRklFTERTLkFSTU9SX1BST0ZJQ0lFTkNJRVNdIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBpZiAodHA/Lmxlbmd0aCkgbGluZXMucHVzaChgKipUb29sIFByb2ZpY2llbmNpZXM6KiogJHt0cC5qb2luKFwiLCBcIil9YCk7XG4gICAgaWYgKHdwPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqV2VhcG9uIFByb2ZpY2llbmNpZXM6KiogJHt3cC5qb2luKFwiLCBcIil9YCk7XG4gICAgaWYgKGFwPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqQXJtb3IgUHJvZmljaWVuY2llczoqKiAke2FwLmpvaW4oXCIsIFwiKX1gKTtcblxuICAgIC8vIFRyYWl0c1xuICAgIGxpbmVzLnB1c2goYCMjIFRyYWl0c2ApO1xuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBmb3IgKGNvbnN0IHRyYWl0IG9mIGZtLnRyYWl0cyBhcyBzdHJpbmdbXXx8W10pIHtcbiAgICAgIGxpbmVzLnB1c2goYCMjIyMjICR7dHJhaXR9YCk7XG4gICAgICBjb25zdCBlbnQgPSBwcmltYXJ5LmVudHJpZXM/LmZpbmQoKGU6YW55KT0+ZS5uYW1lPT09dHJhaXQpO1xuICAgICAgaWYgKGVudD8uZW50cmllcykge1xuICAgICAgICBlbnQuZW50cmllcy5mb3JFYWNoKChzdWI6YW55LGlkeDpudW1iZXIpPT57XG4gICAgICAgICAgbGV0IGJsazpzdHJpbmd8dW5kZWZpbmVkO1xuICAgICAgICAgIGlmIChzdWIudHlwZT09PVwidGFibGVcIikgICAgICAgYmxrID0gcmVuZGVyTWFya2Rvd25UYWJsZShzdWIpO1xuICAgICAgICAgIGVsc2UgaWYgKHN1Yi50eXBlPT09XCJsaXN0XCIpICAgYmxrID0gc3ViLml0ZW1zLm1hcCgoaXQ6YW55KT0+dHlwZW9mIGl0PT09XCJzdHJpbmdcIj9gLSAke3JlcGxhY2U1ZVRhZ3MoaXQpfWA6YC0gJHtpdC5uYW1lfWAgKS5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzdWI9PT1cInN0cmluZ1wiKSBibGsgPSByZXBsYWNlNWVUYWdzKHN1Yik7XG4gICAgICAgICAgaWYgKGJsayAmJiAhc2Vlbi5oYXMoYmxrKSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChibGspO1xuICAgICAgICAgICAgc2Vlbi5hZGQoYmxrKTtcbiAgICAgICAgICAgIGlmIChlbnQuZW50cmllcy5sZW5ndGg+MSAmJiBpZHg8ZW50LmVudHJpZXMubGVuZ3RoLTEpIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgTm93IGJyYW5jaCBvbiBzdWJyYWNlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBzdWJzID0ga2lkczsgIC8vIGFscmVhZHkgZmlsdGVyZWRcbiAgICBpZiAoc3Vicy5sZW5ndGgpIHtcbiAgICAgIC8vIDEpIG1haW4gZmlsZSBpbiBmb2xkZXJcbiAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgcGF0aDogYFNwZWNpZXMvJHtzYWZlTmFtZX0vJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgICBjb250ZW50OiBgLS0tXFxuJHt5YW1sfVxcbi0tLVxcblxcbiR7bGluZXMuam9pbihcIlxcblwiKX1gLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIDIpIGVhY2ggc3Vic3BlY2llc1xuICAgICAgY29uc3Qgc3ViRm9sZGVyID0gYFNwZWNpZXMvJHtzYWZlTmFtZX0vU3Vic3BlY2llc2A7XG4gICAgICBmb3IgKGNvbnN0IHNyIG9mIHN1YnMpIHtcbiAgICAgICAgLy8gdHVybiBzZW1pY29sb25zIFx1MjE5MiBjb2xvbnNcbiAgICAgICAgY29uc3QgZGlzcGxheSA9IHNyLm5hbWUucmVwbGFjZSgvOy9nLCBcIjpcIik7XG4gICAgICAgIGNvbnN0IHN1YkxpbmVzOiBzdHJpbmdbXSA9IFtgIyAke2Rpc3BsYXl9YF07XG5cbiAgICAgICAgLy8gY29weSBTdGF0cyBibG9jayBpZiB5b3UgbGlrZTpcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3IuYWJpbGl0eSkpIHtcbiAgICAgICAgICBjb25zdCBib251c2VzID0geyBzdHI6MCxkZXg6MCxjb246MCxpbnQ6MCx3aXM6MCxjaGE6MCB9O1xuICAgICAgICAgIGxldCBjaG9vc2VPcHQ6YW55ID0gbnVsbDtcbiAgICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiBzci5hYmlsaXR5KSB7XG4gICAgICAgICAgICBpZiAoXCJjaG9vc2VcIiBpbiBvYmopIGNob29zZU9wdCA9IG9iai5jaG9vc2U7XG4gICAgICAgICAgICBlbHNlIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkgKGJvbnVzZXMgYXMgYW55KVtrXSs9diBhcyBudW1iZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhaXJzID0gT2JqZWN0LmVudHJpZXMoYm9udXNlcykgYXMgW3N0cmluZyxudW1iZXJdW107XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBwYWlycy5maWx0ZXIoKFssdl0pPT52IT09MCkubWFwKChbayx2XSk9PmAke2sudG9VcHBlckNhc2UoKX0gJHt2Pj0wP1wiK1wiOlwiXCJ9JHt2fWApO1xuICAgICAgICAgIGlmIChjaG9vc2VPcHQ/LmNvdW50KSBwYXJ0cy5wdXNoKGBDSE9PU0UgJHtjaG9vc2VPcHQuY291bnR9IGZyb20gJHsoY2hvb3NlT3B0LmZyb20gYXMgc3RyaW5nW10pLm1hcChzPT5zLnRvVXBwZXJDYXNlKCkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgICBpZiAocGFydHMubGVuZ3RoKSBzdWJMaW5lcy5wdXNoKGAqKkFiaWxpdHkgU2NvcmVzOioqICR7cGFydHMuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhlbiB0cmFpdHMvZW50cmllc1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHNyLmVudHJpZXMgfHwgW10pIHtcbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGVudHJ5KSk7XG4gICAgICAgICAgc3ViTGluZXMucHVzaChcIlwiKTsgLy8gb3B0aW9uYWwgYmxhbmsgbGluZSBiZXR3ZWVuIGZlYXR1cmVzXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdWJZYW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoYnVpbGRGTShzciwgU1BFQ0lFU19NRVRBX0RFRlMpLCBTUEVDSUVTX01FVEFfREVGUyk7XG4gICAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgICBwYXRoOiBgJHtzdWJGb2xkZXJ9LyR7c2x1Zyhzci5uYW1lKX0ubWRgLFxuICAgICAgICAgIGNvbnRlbnQ6IGAtLS1cXG4ke3N1YllhbWx9XFxuLS0tXFxuXFxuJHtzdWJMaW5lcy5qb2luKFwiXFxuXCIpfWAsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBubyBzdWJyYWNlcyBcdTIxRDIgYSBzaW5nbGUgZmxhdCBmaWxlXG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHBhdGg6IGBTcGVjaWVzLyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudDogYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIDUpIFNvcnQgJiByZXR1cm5cbiAgcmV0dXJuIG91dC5zb3J0KChhLCBiKSA9PiBhLnBhdGgubG9jYWxlQ29tcGFyZShiLnBhdGgpKTtcbn1cbiIsICIvLzVlIDIwMjUgY2xhc3Nlc1xuXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgXG4gIGJ1aWxkRk0sIFxuICBzZXJpYWxpemVGcm9udG1hdHRlciwgXG4gIENMQVNTX01FVEFfREVGUywgXG4gIHVuaWZpZWRUb29sUHJvZnMsIFxuICB1bmlmaWVkV2VhcG9uUHJvZnMsIFxuICBTa2lsbE9wdGlvbixcbiAgdW5pZmllZFNraWxscyxcbiAgU0tJTExfT1BUSU9OUywgXG4gIEZNX0ZJRUxEU1xufSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5cbmZ1bmN0aW9uIGlzVHlwZWRFbnRyeSh4OiBhbnkpOiB4IGlzIHsgdHlwZTogc3RyaW5nOyBbazogc3RyaW5nXTogYW55IH0ge1xuICByZXR1cm4gKFxuICAgIHggIT0gbnVsbCAmJlxuICAgIHR5cGVvZiB4ID09PSBcIm9iamVjdFwiICYmXG4gICAgIUFycmF5LmlzQXJyYXkoeCkgJiZcbiAgICB0eXBlb2YgKHggYXMgYW55KS50eXBlID09PSBcInN0cmluZ1wiXG4gICk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEZlYXR1cmVMaW5rKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgaWdub3JlID0gW1wiQWJpbGl0eSBTY29yZSBJbXByb3ZlbWVudFwiLCBcIkFyY2hldHlwZSBGZWF0dXJlXCIsIFwiU3ViY2xhc3MgRmVhdHVyZVwiXTtcbiAgICBpZiAoaWdub3JlLnNvbWUoc3ViID0+IG5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdWIudG9Mb3dlckNhc2UoKSkpKSB7XG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG4gIFxuICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgXCJcIikgICAgICAgICAgIC8vIHJlbW92ZSBwdW5jdHVhdGlvbiAoa2VlcCBzcGFjZXMpXG4gICAgICAucmVwbGFjZSgvLS9nLCBcIiBcIikgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGRhc2hlc1xuICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpICAgICAgICAgICAgICAvLyBub3JtYWxpemUgd2hpdGVzcGFjZVxuICAgICAgLnRyaW0oKVxuICAgICAgLnJlcGxhY2UoL1xcYlxcdy9nLCBsID0+IGwudG9VcHBlckNhc2UoKSk7IC8vIGNhcGl0YWxpemUgd29yZHNcbiAgXG4gICAgcmV0dXJuIGBbWyMke2FuY2hvcn1dXWA7XG4gIH1cbiAgXG5leHBvcnQgY29uc3QgT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIEFJOiAgIFwiQXJ0aWZpY2VyIEluZnVzaW9uXCIsXG4gIEVEOiAgIFwiRWxlbWVudGFsIERpc2NpcGxpbmVcIixcbiAgRUk6ICAgXCJFbGRyaXRjaCBJbnZvY2F0aW9uXCIsXG4gIE1NOiAgIFwiTWV0YW1hZ2ljXCIsXG4gIE1WOiAgIFwiTWFuZXV2ZXJcIixcbiAgXCJNVjpCXCI6ICAgIFwiTWFuZXV2ZXIsIEJhdHRsZSBNYXN0ZXJcIixcbiAgXCJNVjpDMi1VQVwiOlwiTWFuZXV2ZXIsIENhdmFsaWVyIFYyIChVQSlcIixcbiAgXCJBUzpWMS1VQVwiOlwiQXJjYW5lIFNob3QsIFYxIChVQSlcIixcbiAgXCJBUzpWMi1VQVwiOlwiQXJjYW5lIFNob3QsIFYyIChVQSlcIixcbiAgQVM6ICAgXCJBcmNhbmUgU2hvdFwiLFxuICBPVEg6ICBcIk90aGVyXCIsXG4gIFwiRlM6RlwiOlwiRmlnaHRpbmcgU3R5bGU7IEZpZ2h0ZXJcIixcbiAgXCJGUzpCXCI6XCJGaWdodGluZyBTdHlsZTsgQmFyZFwiLFxuICBcIkZTOlBcIjpcIkZpZ2h0aW5nIFN0eWxlOyBQYWxhZGluXCIsXG4gIFwiRlM6UlwiOlwiRmlnaHRpbmcgU3R5bGU7IFJhbmdlclwiLFxuICBQQjogICBcIlBhY3QgQm9vblwiLFxuICBPUjogICBcIk9ub21hbmN5IFJlc29uYW50XCIsXG4gIFJOOiAgIFwiUnVuZSBLbmlnaHQgUnVuZVwiLFxuICBBRjogICBcIkFsY2hlbWljYWwgRm9ybXVsYVwiLFxuICBUVDogICBcIlRyYXZlbGVyJ3MgVHJpY2tcIixcbn07XG4gIFxuICBmdW5jdGlvbiByZW5kZXJFbnRyaWVzKGVudHJpZXM6IGFueVtdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZW50cmllcy5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGVudHJ5KTtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwicmVmQ2xhc3NGZWF0dXJlXCIpIHtcbiAgICAgICAgICBjb25zdCBbbmFtZV0gPSBlbnRyeS5jbGFzc0ZlYXR1cmUuc3BsaXQoXCJ8XCIpO1xuICAgICAgICAgIHJldHVybiBgKlNlZSBmZWF0dXJlOiAqKiR7bmFtZX0qKipgO1xuICAgICAgICB9XG4gIFxuICAgICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudHJ5KSAmJiBlbnRyeS50eXBlID09PSBcImVudHJpZXNcIikge1xuICAgICAgICAgIGNvbnN0IGlubmVyID0gcmVuZGVyRW50cmllcyhlbnRyeS5lbnRyaWVzIHx8IFtdKTtcbiAgICAgICAgICByZXR1cm4gYCoqJHtlbnRyeS5uYW1lfSoqXFxuXFxuJHtpbm5lcn1gO1xuICAgICAgICB9XG4gIFxuICAgICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudHJ5KSAmJiBlbnRyeS50eXBlID09PSBcImVudHJpZXNcIikge1xuICAgICAgICAgIGNvbnN0IGlubmVyID0gcmVuZGVyRW50cmllcyhlbnRyeS5lbnRyaWVzIHx8IFtdKTtcbiAgICAgICAgICByZXR1cm4gYD4gKioke2VudHJ5Lm5hbWV9KipcXG4+XFxuPiAke2lubmVyLnNwbGl0KFwiXFxuXCIpLmpvaW4oXCJcXG4+IFwiKX1gO1xuICAgICAgICB9XG4gIFxuICAgICAgICAvLyBmYWxsYmFja1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICAgIHJldHVybiByZW5kZXJFbnRyaWVzKGVudHJ5LmVudHJpZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfSkuZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCJcXG5cIik7XG4gIH1cbiAgXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDbGFzc0ZpbGUoXG4gIGpzb246IGFueSxcbiAgZWRpdGlvbklkOiBzdHJpbmcsXG4gIGZpbGVOYW1lOiBzdHJpbmcsXG4gIG9wdGlvbmFsRmVhdHVyZXM6IGFueVtdXG4pOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIC8vIG1ha2UgZWRpdGlvbklkIGF2YWlsYWJsZSBmb3IgZnJvbnRtYXR0ZXJcbiAgKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4gIC8vIHVud3JhcCB0aGUgcmVhbCBjbGFzcyByZWNvcmRcbiAgY29uc3QgY2xzID0gQXJyYXkuaXNBcnJheShqc29uLmNsYXNzKSA/IGpzb24uY2xhc3NbMF0gOiBqc29uO1xuICAvLyBkZXJpdmUgdGhlIE1hcmtkb3duIGZpbGVuYW1lXG4gIGNvbnN0IGNsYXNzTmFtZSA9XG4gICAgdHlwZW9mIGNscy5uYW1lID09PSBcInN0cmluZ1wiXG4gICAgICA/IGNscy5uYW1lXG4gICAgICA6IGZpbGVOYW1lXG4gICAgICA/IGZpbGVOYW1lLnJlcGxhY2UoL15jbGFzcy0vLCBcIlwiKS5yZXBsYWNlKC9cXC5qc29uJC8sIFwiXCIpXG4gICAgICA6IFwiVW5rbm93blwiO1xuXG4gIGNvbnN0IHN1YmNsYXNzRmlsZXM6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgY29uc3QgUFJPRl9CT05VU19CWV9MRVZFTCA9IFtcbiAgICBcIisyXCIsIFwiKzJcIiwgXCIrMlwiLCBcIisyXCIsXG4gICAgXCIrM1wiLCBcIiszXCIsIFwiKzNcIiwgXCIrM1wiLFxuICAgIFwiKzRcIiwgXCIrNFwiLCBcIis0XCIsIFwiKzRcIixcbiAgICBcIis1XCIsIFwiKzVcIiwgXCIrNVwiLCBcIis1XCIsXG4gICAgXCIrNlwiLCBcIis2XCIsIFwiKzZcIiwgXCIrNlwiXG4gIF07XG4gIFxuICAvLyBub3JtYWxpemUgaGl0XHUyMDEwZGljZVxuICBjb25zdCBoZE51bSAgID0gY2xzLmhkPy5udW1iZXIgPz8gMTtcbiAgY29uc3QgaGRGYWNlcyA9IGNscy5oZD8uZmFjZXMgID8/IDY7XG4gIGNvbnN0IGhkU3RyICAgPSBgJHtoZE51bX1kJHtoZEZhY2VzfWA7XG4gIGNvbnN0IGhkTWF4ICAgPSBoZE51bSAqIGhkRmFjZXM7XG4gIGNvbnN0IGhkQXZnICAgPSBNYXRoLmNlaWwoKGhkRmFjZXMgKyAxKSAvIDIpO1xuXG5jb25zdCBiYXNlRk0gPSBidWlsZEZNKGNscywgQ0xBU1NfTUVUQV9ERUZTKTtcbmNvbnN0IGZtICAgICA9IHsgLi4uYmFzZUZNLCBoZDogaGRTdHIgfTtcbmNvbnN0IHlhbWwgICA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBDTEFTU19NRVRBX0RFRlMpO1xuXG4vLyAxKSBEZWNsYXJlIHlvdXIgbGluZXMgYnVmZmVyIGltbWVkaWF0ZWx5XG5jb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuLy8gNCkgTm93IGNhcnJ5IG9uIHdpdGggdGhlIHJlc3Qgb2YgeW91ciBib2R5XG5saW5lcy5wdXNoKGAjICR7Y2xhc3NOYW1lfWApO1xuaWYgKGNscy5zb3VyY2UpIGxpbmVzLnB1c2goYCoqU291cmNlOioqICR7Y2xzLnNvdXJjZX1gKTtcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEhpdCBQb2ludHMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGxpbmVzLnB1c2goYCMjIEhpdCBQb2ludHNgKTtcbiAgbGluZXMucHVzaChgKipIaXQgRGljZToqKiAke2hkU3RyfSBwZXIgJHtjbGFzc05hbWV9IGxldmVsYCk7XG4gIGxpbmVzLnB1c2goYCoqSGl0IFBvaW50cyBhdCAxc3QgTGV2ZWw6KiogJHtoZE1heH0gKyB5b3VyIENvbnN0aXR1dGlvbiBtb2RpZmllcmApO1xuICBsaW5lcy5wdXNoKFxuICAgIGAqKkhpdCBQb2ludHMgYXQgSGlnaGVyIExldmVsczoqKiAke2hkU3RyfSAob3IgJHtoZEF2Z30pICsgeW91ciBDb25zdGl0dXRpb24gbW9kaWZpZXIgcGVyIGxldmVsIGFmdGVyIDFzdGBcbiAgKTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5saW5lcy5wdXNoKGBgKTtcbmxpbmVzLnB1c2goYC0tLWApO1xubGluZXMucHVzaChgIyMgUHJvZmljaWVuY2llc2ApO1xuXG5jb25zdCBzcCA9IGNscy5zdGFydGluZ1Byb2ZpY2llbmNpZXMgPz8ge307XG5cbi8vIEFybW9yXG5pZiAoQXJyYXkuaXNBcnJheShzcC5hcm1vcikgJiYgc3AuYXJtb3IubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYC0gKipBcm1vcjoqKiAke3NwLmFybW9yLmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuLy8gV2VhcG9uc1xuY29uc3Qgd2VhcG9uTGlzdCA9IHVuaWZpZWRXZWFwb25Qcm9mcyhzcCk7XG5pZiAod2VhcG9uTGlzdC5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKldlYXBvbnM6KiogJHt3ZWFwb25MaXN0LmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuLy8gVG9vbHNcbmNvbnN0IHRvb2xMaXN0ID0gdW5pZmllZFRvb2xQcm9mcyhzcCk7XG5pZiAodG9vbExpc3QubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYC0gKipUb29sczoqKiAke3Rvb2xMaXN0LmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuLy8gU2F2aW5nIFRocm93c1xuY29uc3Qgc2F2ZXMgPSBBcnJheS5pc0FycmF5KGNscy5wcm9maWNpZW5jeSlcbiAgPyBjbHMucHJvZmljaWVuY3kubWFwKChrOiBzdHJpbmcpID0+XG4gICAgICAoeyBzdHI6XCJTdHJlbmd0aFwiLCBkZXg6XCJEZXh0ZXJpdHlcIiwgY29uOlwiQ29uc3RpdHV0aW9uXCIsXG4gICAgICAgICBpbnQ6XCJJbnRlbGxpZ2VuY2VcIiwgd2lzOlwiV2lzZG9tXCIsIGNoYTpcIkNoYXJpc21hXCIgfVtrXSB8fCBrLnRvVXBwZXJDYXNlKCkpXG4gICAgKVxuICA6IFtdO1xuaWYgKHNhdmVzLmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqU2F2aW5nIFRocm93czoqKiAke3NhdmVzLmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU2tpbGxzIFx1MjUwMFx1MjUwMFx1MjUwMFxue1xuICAvLyAxKSBncmFiIHdoYXRldmVyIGFycmF5IGhvbGRzIHRoZSByYXcgb2JqZWN0cy9zdHJpbmdzXG4gIGNvbnN0IHJhd1NraWxsczogYW55W10gPVxuICAgIEFycmF5LmlzQXJyYXkoc3Auc2tpbGxQcm9maWNpZW5jaWVzKSA/IHNwLnNraWxsUHJvZmljaWVuY2llc1xuICAgIDogQXJyYXkuaXNBcnJheShzcC5za2lsbHMpICAgICAgICAgICAgID8gc3Auc2tpbGxzXG4gICAgOiBBcnJheS5pc0FycmF5KHNwLnNraWxsUHJvZikgICAgICAgICAgPyBzcC5za2lsbFByb2ZcbiAgICA6IFtdO1xuXG4gIC8vIDIpIGxvb2sgZm9yIHRoZSBcdTIwMUNjaG9vc2UgTiBmcm9tIFtcdTIwMjZdXHUyMDFEIGVudHJ5XG4gIGNvbnN0IGNob2ljZUVudHJ5ID0gcmF3U2tpbGxzLmZpbmQoXG4gICAgZSA9PiBlICYmXG4gICAgICAgICAodHlwZW9mIGUuY2hvb3NlID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBlLmFueSA9PT0gXCJudW1iZXJcIilcbiAgKTtcblxuICBpZiAoY2hvaWNlRW50cnkpIHtcbiAgICAvLyBob3cgbWFueSB0byBjaG9vc2VcbiAgICBjb25zdCBjb3VudCA9IGNob2ljZUVudHJ5LmNob29zZT8uY291bnQgPz8gY2hvaWNlRW50cnkuYW55ID8/IDE7XG5cbiAgICAvLyBwdWxsIHRoZSBhY3R1YWwgbGlzdCBvZiBvcHRpb25zLCBvciBmYWxsIGJhY2sgdG8gdGhlIGdsb2JhbCBTS0lMTF9PUFRJT05TXG4gICAgY29uc3Qgb3B0aW9uczogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KGNob2ljZUVudHJ5LmNob29zZT8uZnJvbSlcbiAgICAgID8gY2hvaWNlRW50cnkuY2hvb3NlLmZyb20ubWFwKChzOiBzdHJpbmcpID0+XG4gICAgICAgICAgLy8gdGl0bGUtY2FzZSBlYWNoIHdvcmQgKG9yIGp1c3QgdXNlIHMpXG4gICAgICAgICAgcy5zcGxpdChcIiBcIikubWFwKHcgPT4gd1swXS50b1VwcGVyQ2FzZSgpICsgdy5zbGljZSgxKSkuam9pbihcIiBcIilcbiAgICAgICAgKVxuICAgICAgOiBTS0lMTF9PUFRJT05TO1xuXG4gICAgbGluZXMucHVzaChgLSAqKlNraWxscyAoQ2hvb3NlICR7Y291bnR9KToqKiAke29wdGlvbnMuam9pbihcIiwgXCIpfWApO1xuXG4gIH0gZWxzZSB7XG4gICAgLy8gbm8gY2hvb3NlLWZyb20gb2JqZWN0IFx1MjE5MiBmbGF0IGxpc3QgZnJvbSB5b3VyIHVuaWZpZWQgaGVscGVyXG4gICAgY29uc3QgZmxhdCA9IHVuaWZpZWRTa2lsbHMoc3ApO1xuICAgIGlmIChmbGF0Lmxlbmd0aCkge1xuICAgICAgbGluZXMucHVzaChgLSAqKlNraWxsczoqKiAke2ZsYXQuam9pbihcIiwgXCIpfWApO1xuICAgIH1cbiAgfVxufVxuXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRXF1aXBtZW50IFx1MjUwMFx1MjUwMFx1MjUwMFxuICBpZiAoQXJyYXkuaXNBcnJheShjbHMuc3RhcnRpbmdFcXVpcG1lbnQpKSB7XG4gICAgbGluZXMucHVzaChgXFxuIyMjIEVxdWlwbWVudGApO1xuICAgIGNscy5zdGFydGluZ0VxdWlwbWVudFxuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiB0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgIC5mb3JFYWNoKChpdGVtOiBzdHJpbmcpID0+IGxpbmVzLnB1c2goYC0gJHtpdGVtfWApKTtcbiAgfVxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgQ2xhc3MgUHJvZ3Jlc3Npb24gXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBwcm9nR3JvdXBzID0gY2xzLmNsYXNzVGFibGVHcm91cHMgPz8gW107XG5jb25zdCBtYXhMZXZlbCA9IDIwO1xuXG5pZiAoIXByb2dHcm91cHMubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYCooTm8gY2xhc3MgdGFibGUgcHJvdmlkZWQgZm9yIHRoaXMgY2xhc3MuKSpgKTtcbn0gZWxzZSB7XG4gIC8vIDEpIEJ1aWxkIGxldmVsIFx1MjE5MiBmZWF0dXJlIG1hcFxuICBjb25zdCBmZWF0dXJlc0J5TGV2ZWw6IFJlY29yZDxudW1iZXIsIHN0cmluZ1tdPiA9IHt9O1xuICBmb3IgKGNvbnN0IGZlYXQgb2YgY2xzLmNsYXNzRmVhdHVyZXMgPz8gW10pIHtcbiAgICBjb25zdCByYXcgPSB0eXBlb2YgZmVhdCA9PT0gXCJvYmplY3RcIiAmJiBmZWF0LmNsYXNzRmVhdHVyZSA/IGZlYXQuY2xhc3NGZWF0dXJlIDogU3RyaW5nKGZlYXQpO1xuICAgIGNvbnN0IFtuYW1lLCwgLGx2bFN0cl0gPSByYXcuc3BsaXQoXCJ8XCIpO1xuICAgIGNvbnN0IGx2bCA9IE51bWJlcihsdmxTdHIgPz8gMCk7XG4gICAgaWYgKCFmZWF0dXJlc0J5TGV2ZWxbbHZsXSkgZmVhdHVyZXNCeUxldmVsW2x2bF0gPSBbXTtcbiAgICBmZWF0dXJlc0J5TGV2ZWxbbHZsXS5wdXNoKG5hbWUpO1xuICB9XG5cbiAgLy8gMikgR2F0aGVyIGV2ZXJ5IGNvbHVtbiBsYWJlbCAmIHJvdyB2YWx1ZVxuICBjb25zdCBhbGxMYWJlbHNTZXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgY29uc3Qgcm93TWFwczogUmVjb3JkPG51bWJlciwgUmVjb3JkPHN0cmluZywgc3RyaW5nPj4gPSB7fTtcblxuICBmb3IgKGNvbnN0IGdyb3VwIG9mIHByb2dHcm91cHMpIHtcbiAgICBjb25zdCBsYWJlbHMgPSBBcnJheS5pc0FycmF5KGdyb3VwLmNvbExhYmVscylcbiAgICAgID8gZ3JvdXAuY29sTGFiZWxzLm1hcCgobDogc3RyaW5nKSA9PiByZXBsYWNlNWVUYWdzKGwpKVxuICAgICAgOiBbXTtcbiAgICBjb25zdCByb3dzID0gQXJyYXkuaXNBcnJheShncm91cC5yb3dzKVxuICAgICAgPyBncm91cC5yb3dzXG4gICAgICA6IEFycmF5LmlzQXJyYXkoZ3JvdXAucm93c1NwZWxsUHJvZ3Jlc3Npb24pXG4gICAgICAgID8gZ3JvdXAucm93c1NwZWxsUHJvZ3Jlc3Npb25cbiAgICAgICAgOiBbXTtcblxuICAgIGlmICghbGFiZWxzLmxlbmd0aCB8fCAhcm93cy5sZW5ndGgpIGNvbnRpbnVlO1xuXG4gICAgZm9yIChsZXQgbHZsID0gMDsgbHZsIDwgcm93cy5sZW5ndGg7IGx2bCsrKSB7XG4gICAgICBjb25zdCBsZXZlbE51bSA9IGx2bCArIDE7XG4gICAgICBpZiAoIXJvd01hcHNbbGV2ZWxOdW1dKSByb3dNYXBzW2xldmVsTnVtXSA9IHt9O1xuICAgICAgY29uc3Qgcm93TWFwID0gcm93TWFwc1tsZXZlbE51bV07XG4gICAgICBjb25zdCBjZWxscyA9IHJvd3NbbHZsXTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYWJlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbGFiZWwgPSBsYWJlbHNbaV07XG4gICAgICAgIGxldCB2YWwgPSBcIlwiO1xuICAgICAgICBjb25zdCBjZWxsID0gY2VsbHNbaV07XG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2VsbCkpIHtcbiAgICAgICAgICB2YWwgPSBjZWxsLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChjZWxsICYmIHR5cGVvZiBjZWxsID09PSBcIm9iamVjdFwiICYmIFwidmFsdWVcIiBpbiBjZWxsKSB7XG4gICAgICAgICAgdmFsID0gU3RyaW5nKGNlbGwudmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbCA9IFN0cmluZyhjZWxsID8/IFwiXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgYWxsTGFiZWxzU2V0LmFkZChsYWJlbCk7XG4gICAgICAgIHJvd01hcFtsYWJlbF0gPSB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gMykgKipGaWx0ZXIgb3V0KiogYW55IHNwZWxsXHUyMDEwdGFibGUgY29sdW1uc1xuICBjb25zdCBhbGxMYWJlbHMgPSBBcnJheS5mcm9tKGFsbExhYmVsc1NldCkuZmlsdGVyKGxibCA9PlxuICAgICEvQ2FudHJpcHMgS25vd258U3BlbGxzIEtub3dufFxcZCsoc3R8bmR8cmR8dGgpLy50ZXN0KGxibClcbiAgKTtcblxuICAvLyA0KSBCdWlsZCBmaW5hbCBoZWFkZXIgJiByb3dzXG4gIGNvbnN0IG1lcmdlZExhYmVscyA9IFtcIkxldmVsXCIsIFwiUHJvZmljaWVuY3kgQm9udXNcIiwgXCJDbGFzcyBGZWF0dXJlc1wiLCAuLi5hbGxMYWJlbHNdO1xuICBjb25zdCBtZXJnZWRSb3dzOiBzdHJpbmdbXVtdID0gW107XG5cbiAgZm9yIChsZXQgbHZsID0gMTsgbHZsIDw9IG1heExldmVsOyBsdmwrKykge1xuICAgIGNvbnN0IGZlYXR1cmVMaXN0ID0gKGZlYXR1cmVzQnlMZXZlbFtsdmxdID8/IFtdKS5tYXAoZm9ybWF0RmVhdHVyZUxpbmspO1xuICAgIGNvbnN0IHJvd01hcCA9IHJvd01hcHNbbHZsXSA/PyB7fTtcblxuICAgIG1lcmdlZFJvd3MucHVzaChbXG4gICAgICBsdmwudG9TdHJpbmcoKSxcbiAgICAgIFBST0ZfQk9OVVNfQllfTEVWRUxbbHZsIC0gMV0gfHwgXCJcIixcbiAgICAgIGZlYXR1cmVMaXN0LmpvaW4oXCIsIFwiKS5yZXBsYWNlKC9cXHwvZywgXCImIzEyNDtcIiksXG4gICAgICAuLi5hbGxMYWJlbHMubWFwKGxhYmVsID0+IHJvd01hcFtsYWJlbF0gPz8gXCJcIilcbiAgICBdKTtcbiAgfVxuXG4gIC8vIDUpIFJlbmRlciB0aGUgZmVhdHVyZXNcdTIwMTBvbmx5IHRhYmxlXG5saW5lcy5wdXNoKGBcXG4+IFshZXhhbXBsZV0tIENsYXNzIFByb2dyZXNzaW9uIFRhYmxlYCk7XG5saW5lcy5wdXNoKFxuICByZW5kZXJNYXJrZG93blRhYmxlKHtcbiAgICB0eXBlOiAgICAgIFwidGFibGVcIixcbiAgICBjYXB0aW9uOiAgIFwiXCIsXG4gICAgY29sTGFiZWxzOiBtZXJnZWRMYWJlbHMsXG4gICAgcm93czogICAgICBtZXJnZWRSb3dzLFxuICB9KSk7XG59XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTcGVsbCBQcm9ncmVzc2lvbiBcdTI1MDBcdTI1MDBcdTI1MDBcbi8vIDEpIGZpbmQgdGhlIHR3byBncm91cHNcbmNvbnN0IGNzR3JvdXAgPSBwcm9nR3JvdXBzLmZpbmQoKGc6IGFueSkgPT5cbiAgQXJyYXkuaXNBcnJheShnLmNvbExhYmVscykgJiZcbiAgZy5jb2xMYWJlbHMuc29tZSgobGJsOiBhbnkpID0+IC9DYW50cmlwcyBLbm93bnxTcGVsbHMgS25vd24vLnRlc3QoU3RyaW5nKGxibCkpKVxuKTtcbmNvbnN0IHNsb3RHcm91cCA9IHByb2dHcm91cHMuZmluZCgoZzogYW55KSA9PlxuICBBcnJheS5pc0FycmF5KGcuY29sTGFiZWxzKSAmJlxuICBnLnRpdGxlID09PSBcIlNwZWxsIFNsb3RzIHBlciBTcGVsbCBMZXZlbFwiXG4pO1xuXG5pZiAoY3NHcm91cCAmJiBzbG90R3JvdXApIHtcbiAgLy8gMikgcmF3IGxhYmVsc1xuICBjb25zdCBjc0xhYmVscyAgID0gKGNzR3JvdXAuY29sTGFiZWxzIGFzIHN0cmluZ1tdKS5tYXAobCA9PiByZXBsYWNlNWVUYWdzKGwpKTtcbiAgY29uc3Qgc2xvdExhYmVscyA9IChzbG90R3JvdXAuY29sTGFiZWxzIGFzIHN0cmluZ1tdKS5tYXAobCA9PiByZXBsYWNlNWVUYWdzKGwpKTtcblxuICAvLyAzKSByYXcgcm93c1xuICBjb25zdCBjc1Jvd3MgICA9IChjc0dyb3VwLnJvd3MgICAgICBhcyBhbnlbXVtdKSAgICAgICAgICAgICAgfHwgW107XG4gIGNvbnN0IHNsb3RSb3dzID0gKHNsb3RHcm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvbiBhcyBhbnlbXVtdKSB8fCBbXTtcblxuICAvLyA0KSBidWlsZCBoZWFkZXI6IExldmVsICsgY2FudHJpcHMvc3BlbGxzICsgZWFjaCBzbG90IGxldmVsXG4gIGNvbnN0IGNvbExhYmVscyA9IFtcIkxldmVsXCIsIC4uLmNzTGFiZWxzLCAuLi5zbG90TGFiZWxzXTtcblxuICAvLyA1KSBidWlsZCBlYWNoIHJvdyBieSB6aXBwaW5nIGNzUm93c1tpXSArIHNsb3RSb3dzW2ldXG4gIGNvbnN0IHNwZWxsUm93czogc3RyaW5nW11bXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGgubWF4KGNzUm93cy5sZW5ndGgsIHNsb3RSb3dzLmxlbmd0aCk7IGkrKykge1xuICAgIGNvbnN0IGx2bCA9IFN0cmluZyhpICsgMSk7XG4gICAgY29uc3QgY3NDZWxscyAgID0gY3NSb3dzW2ldICAgPyBjc1Jvd3NbaV0ubWFwKFN0cmluZykgICA6IGNzTGFiZWxzLm1hcChfID0+IFwiXCIpO1xuICAgIGNvbnN0IHNsb3RDZWxscyA9IHNsb3RSb3dzW2ldID8gc2xvdFJvd3NbaV0ubWFwKFN0cmluZykgOiBzbG90TGFiZWxzLm1hcChfID0+IFwiXCIpO1xuICAgIHNwZWxsUm93cy5wdXNoKFtsdmwsIC4uLmNzQ2VsbHMsIC4uLnNsb3RDZWxsc10pO1xuICB9XG5cbiAgLy8gNikgcmVuZGVyIVxuICBsaW5lcy5wdXNoKGBcXG4+IFshdGlwXS0gU3BlbGwgUHJvZ3Jlc3Npb24gVGFibGVgKTtcbiAgbGluZXMucHVzaChcbiAgICByZW5kZXJNYXJrZG93blRhYmxlKHtcbiAgICAgIHR5cGU6ICAgICAgXCJ0YWJsZVwiLFxuICAgICAgY2FwdGlvbjogICBcIlwiLFxuICAgICAgY29sTGFiZWxzOiBjb2xMYWJlbHMsXG4gICAgICByb3dzOiAgICAgIHNwZWxsUm93cyxcbiAgfSkpO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTdWJjbGFzc2VzIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3Qgc3VicyA9IEFycmF5LmlzQXJyYXkoanNvbi5zdWJjbGFzcykgPyBqc29uLnN1YmNsYXNzIDogW107XG5jb25zdCBzdWJjbGFzc0ZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShqc29uLnN1YmNsYXNzRmVhdHVyZSlcbiAgPyBqc29uLnN1YmNsYXNzRmVhdHVyZVxuICA6IGpzb24ubG9va3VwPy5zdWJjbGFzc0ZlYXR1cmUgPz8gW107XG5cbmZvciAoY29uc3Qgc2Mgb2Ygc3Vicykge1xuICBjb25zdCBzdWJjbGFzc05hbWUgPSBzYy5uYW1lO1xuICBjb25zdCBzdWJMaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSGVhZGVyIG1ldGFkYXRhIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBzdWJMaW5lcy5wdXNoKGAjICR7c3ViY2xhc3NOYW1lfWApO1xuICBzdWJMaW5lcy5wdXNoKGAqKlBhcmVudCBDbGFzczoqKiBbWyR7Y2xhc3NOYW1lfV1dYCk7XG4gIGlmIChzYy5zb3VyY2UpIHN1YkxpbmVzLnB1c2goYCoqU291cmNlOioqICR7c2Muc291cmNlfWApO1xuICBzdWJMaW5lcy5wdXNoKGBgKTsgLy8gYmxhbmsgbGluZVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBJbnRybyBlbnRyeSAobGV2ZWwgMyBmZWF0dXJlIGRlc2NyaXB0aW9uKSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3QgaW50cm8gPSBzdWJjbGFzc0ZlYXR1cmVzLmZpbmQoKGY6IGFueSkgPT5cbiAgICBmLm5hbWUgPT09IHNjLm5hbWUgJiZcbiAgICBmLmxldmVsID09PSAzICYmXG4gICAgZi5zdWJjbGFzc1Nob3J0TmFtZSA9PT0gc2Muc2hvcnROYW1lICYmXG4gICAgZi5zdWJjbGFzc1NvdXJjZSA9PT0gc2Muc291cmNlXG4gICk7XG4gIGlmIChpbnRybz8uZW50cmllcz8ubGVuZ3RoKSB7XG4gICAgY29uc3QgaW50cm9UZXh0ID0gQXJyYXkuaXNBcnJheShpbnRyby5lbnRyaWVzKVxuICAgICAgPyBpbnRyby5lbnRyaWVzLm1hcCgoZTogYW55KSA9PlxuICAgICAgICAgIHR5cGVvZiBlID09PSBcInN0cmluZ1wiID8gcmVwbGFjZTVlVGFncyhlKSA6IGZvcm1hdEVudHJ5KGUpXG4gICAgICAgICkuam9pbihcIlxcblxcblwiKVxuICAgICAgOiBmb3JtYXRFbnRyeShpbnRyby5lbnRyaWVzKTtcbiAgICBzdWJMaW5lcy5wdXNoKGludHJvVGV4dCwgYGApO1xuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE9wdGlvbmFsXHUyMDEwZmVhdHVyZSBibG9jayBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3QgY29kZSA9IChPYmplY3QuZW50cmllcyhPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEwpIGFzIFtzdHJpbmcsc3RyaW5nXVtdKVxuICAgIC5maW5kKChbLCBmdWxsXSkgPT5cbiAgICAgIGZ1bGwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdWJjbGFzc05hbWUudG9Mb3dlckNhc2UoKSlcbiAgICApPy5bMF07XG4gIGlmIChjb2RlKSB7XG4gICAgY29uc3QgbWF0Y2hlcyA9IG9wdGlvbmFsRmVhdHVyZXMuZmlsdGVyKG9mID0+XG4gICAgICBBcnJheS5pc0FycmF5KG9mLmZlYXR1cmVUeXBlKSAmJiBvZi5mZWF0dXJlVHlwZS5pbmNsdWRlcyhjb2RlKVxuICAgICk7XG4gICAgaWYgKG1hdGNoZXMubGVuZ3RoKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKGAjIyAke3N1YmNsYXNzTmFtZX0gT3B0aW9uYWwgRmVhdHVyZXNgKTtcbiAgICAgIGZvciAoY29uc3QgZmVhdCBvZiBtYXRjaGVzKSB7XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZmVhdC5lbnRyaWVzKSB7XG4gICAgICAgICAgY29uc3QgdHh0ID0gdHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3MoZW50cnkpXG4gICAgICAgICAgICA6IGZvcm1hdEVudHJ5KGVudHJ5KTtcbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKGAqKiR7ZmVhdC5uYW1lfToqKiAke3R4dH1gKTtcbiAgICAgICAgfVxuICAgICAgICBzdWJMaW5lcy5wdXNoKGBgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3ViY2xhc3MgcHJvZ3Jlc3Npb24gdGFibGUgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGNvbnN0IHByb2cgPSBzYy5zdWJjbGFzc1RhYmxlR3JvdXBzID8/IFtdO1xuICBpZiAocHJvZy5sZW5ndGgpIHtcbiAgICBjb25zdCBsYWJlbHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCByb3dzTWFwOiBSZWNvcmQ8bnVtYmVyLCBSZWNvcmQ8c3RyaW5nLHN0cmluZz4+ID0ge307XG4gICAgZm9yIChjb25zdCBnIG9mIHByb2cpIHtcbiAgICAgIGNvbnN0IGNvbHMgPSAoZy5jb2xMYWJlbHMgPz8gW10pLm1hcChyZXBsYWNlNWVUYWdzKTtcbiAgICAgIGNvbnN0IHJvd3MgPSBBcnJheS5pc0FycmF5KGcucm93cylcbiAgICAgICAgPyBnLnJvd3NcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KGcucm93c1NwZWxsUHJvZ3Jlc3Npb24pXG4gICAgICAgICAgPyBnLnJvd3NTcGVsbFByb2dyZXNzaW9uXG4gICAgICAgICAgOiBbXTtcbiAgICAgIHJvd3MuZm9yRWFjaCgocjogYW55LCBpOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgbHZsID0gaSArIDE7XG4gICAgICAgIHJvd3NNYXBbbHZsXSA/Pz0ge307XG4gICAgICAgIHIuZm9yRWFjaCgoYzogYW55LCBqOiBudW1iZXIpID0+IHtcbiAgICAgICAgICBjb25zdCBsYWIgPSBjb2xzW2pdO1xuICAgICAgICAgIGlmICghbGFiKSByZXR1cm47XG4gICAgICAgICAgbGFiZWxzLmFkZChsYWIpO1xuICAgICAgICAgIHJvd3NNYXBbbHZsXVtsYWJdID0gdHlwZW9mIGMgPT09IFwib2JqZWN0XCIgJiYgYyAhPT0gbnVsbCAmJiBcInZhbHVlXCIgaW4gY1xuICAgICAgICAgICAgPyBTdHJpbmcoYy52YWx1ZSlcbiAgICAgICAgICAgIDogU3RyaW5nKGMgPz8gXCJcIik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGhkcnMgPSBBcnJheS5mcm9tKGxhYmVscyk7XG4gICAgc3ViTGluZXMucHVzaChgIyMgU3ViY2xhc3MgUHJvZ3Jlc3Npb25gKTtcbiAgICBzdWJMaW5lcy5wdXNoKHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgICAgdHlwZTogICAgICBcInRhYmxlXCIsXG4gICAgICBjYXB0aW9uOiAgIFwiXCIsXG4gICAgICBjb2xMYWJlbHM6IFtcIkxldmVsXCIsIC4uLmhkcnNdLFxuICAgICAgcm93czogICAgICBBcnJheS5mcm9tKHsgbGVuZ3RoOiAyMCB9LCAoXywgaSkgPT4ge1xuICAgICAgICBjb25zdCBsdmwgPSBpICsgMTtcbiAgICAgICAgcmV0dXJuIFtTdHJpbmcobHZsKSwgLi4uaGRycy5tYXAoaCA9PiByb3dzTWFwW2x2bF0/LltoXSA/PyBcIlwiKV07XG4gICAgICB9KVxuICAgIH0pKTtcbiAgfVxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgRGV0YWlsZWQgbGV2ZWxcdTIwMTBieVx1MjAxMGxldmVsIGZlYXR1cmVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgZmVhdHNCeUx2bDogUmVjb3JkPG51bWJlciwgYW55W10+ID0ge307XG5mb3IgKGNvbnN0IGYgb2Ygc3ViY2xhc3NGZWF0dXJlcykge1xuICBpZiAoXG4gICAgZi5zdWJjbGFzc1Nob3J0TmFtZSA9PT0gc2Muc2hvcnROYW1lICYmXG4gICAgZi5zdWJjbGFzc1NvdXJjZSA9PT0gc2Muc291cmNlICYmXG4gICAgZi5jbGFzc05hbWUgPT09IGNsYXNzTmFtZVxuICApIHtcbiAgICBjb25zdCBsdmwgPSBmLmxldmVsID8/IDA7XG4gICAgOyhmZWF0c0J5THZsW2x2bF0gPz89IFtdKS5wdXNoKGYpO1xuICB9XG59XG5cbmZvciAoY29uc3QgbHZsIG9mIE9iamVjdC5rZXlzKGZlYXRzQnlMdmwpLm1hcChOdW1iZXIpLnNvcnQoKGEsYik9PmEtYikpIHtcbiAgc3ViTGluZXMucHVzaChgLS0tYCwgYCMjIExldmVsICR7bHZsfWApO1xuXG4gIGZvciAoY29uc3QgZiBvZiBmZWF0c0J5THZsW2x2bF0pIHtcbiAgc3ViTGluZXMucHVzaChgIyMjICR7Zi5uYW1lfWApO1xuXG4gIC8vIFdhbGsgZWFjaCBlbnRyeSBmb3IgdGhpcyBmZWF0dXJlXG4gIGZvciAoY29uc3QgZW50IG9mIEFycmF5LmlzQXJyYXkoZi5lbnRyaWVzKSA/IGYuZW50cmllcyA6IFtmLmVudHJpZXNdKSB7XG4gICAgLy8gMSkgUGxhaW4gcGFyYWdyYXBoIGVudHJpZXNcbiAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgc3ViTGluZXMucHVzaChyZXBsYWNlNWVUYWdzKGVudCkpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gMikgSWYgaXQncyB0aGUgXCJNYW5ldXZlcnNcIiBlbnRyaWVzXHUyMDEwYmxvY2ssIGluamVjdCB5b3VyIGxpc3QgaGVyZVxuICAgIGlmIChpc1R5cGVkRW50cnkoZW50KSAmJiBlbnQudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgL15NYW5ldXZlcnMkL2kudGVzdChlbnQubmFtZSkpIHtcbiAgICAgIC8vIGZpcnN0IHByaW50IHRoZSBzdWJcdTIwMTBoZWFkaW5nIGFuZCBhbnkgdGV4dCBpdCBoYWRcbiAgICAgIHN1YkxpbmVzLnB1c2goYCMjIyMjICR7ZW50Lm5hbWV9YCk7XG4gICAgICBmb3IgKGNvbnN0IHR4dCBvZiBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXSkge1xuICAgICAgICBzdWJMaW5lcy5wdXNoKHR5cGVvZiB0eHQgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3ModHh0KVxuICAgICAgICAgIDogZm9ybWF0RW50cnkodHh0KSk7XG4gICAgICB9XG5cbiAgICAgIC8vIG5vdyBpbmplY3QgdGhlIGZ1bGwgbWFuZXV2ZXIgZGVmaW5pdGlvbnMgZm9yIHRoaXMgc3ViY2xhc3NcbiAgICAgIGNvbnN0IGNvZGUgPSAoT2JqZWN0LmVudHJpZXMoT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMKSBhcyBbc3RyaW5nLHN0cmluZ11bXSlcbiAgICAgICAgLmZpbmQoKFssIGZ1bGxdKSA9PlxuICAgICAgICAgIGZ1bGwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdWJjbGFzc05hbWUudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgKT8uWzBdO1xuICAgICAgaWYgKGNvZGUpIHtcbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IG9wdGlvbmFsRmVhdHVyZXMuZmlsdGVyKG9mID0+XG4gICAgICAgICAgQXJyYXkuaXNBcnJheShvZi5mZWF0dXJlVHlwZSkgJiYgb2YuZmVhdHVyZVR5cGUuaW5jbHVkZXMoY29kZSlcbiAgICAgICAgKTtcbiAgICAgICAgZm9yIChjb25zdCBmZWF0RGVmIG9mIG1hdGNoZXMpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBmZWF0RGVmLmVudHJpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSB0eXBlb2Ygc3ViID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhzdWIpXG4gICAgICAgICAgICAgIDogZm9ybWF0RW50cnkoc3ViKTtcbiAgICAgICAgICAgIHN1YkxpbmVzLnB1c2goYCoqJHtmZWF0RGVmLm5hbWV9OioqICR7bGluZX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc3ViTGluZXMucHVzaChcIlwiKTsgLy8gc3BhY2VyXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIDMpIEFueSBvdGhlciBuZXN0ZWQgXCJlbnRyaWVzXCIgYmxvY2tzXG4gICAgaWYgKGlzVHlwZWRFbnRyeShlbnQpICYmIGVudC50eXBlID09PSBcImVudHJpZXNcIiAmJiBlbnQubmFtZSkge1xuICAgICAgc3ViTGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgIGZvciAoY29uc3QgZTIgb2YgQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc10pIHtcbiAgICAgICAgc3ViTGluZXMucHVzaChmb3JtYXRFbnRyeShlMikpO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gNCkgSW5zZXRzXG4gICAgaWYgKGlzVHlwZWRFbnRyeShlbnQpICYmIGVudC50eXBlID09PSBcImluc2V0XCIgJiYgZW50Lm5hbWUpIHtcbiAgICAgIGNvbnN0IGlubmVyID0gQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc107XG4gICAgICBzdWJMaW5lcy5wdXNoKGA+ICoqJHtlbnQubmFtZX0qKmApO1xuICAgICAgaW5uZXIuZm9yRWFjaCgoZTI6IGFueSkgPT4gc3ViTGluZXMucHVzaChgPiAke2Zvcm1hdEVudHJ5KGUyKX1gKSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyA1KSBGYWxsYmFja1xuICAgIGNvbnN0IGZiID0gZm9ybWF0RW50cnkoZW50KTtcbiAgICBpZiAoZmIpIHN1YkxpbmVzLnB1c2goZmIpO1xuICB9XG4gIH1cbn1cblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDbGVhbiB1cCAmIHB1c2ggXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGNvbnN0IHN1YmNsYXNzQ29udGVudCA9IHN1YkxpbmVzXG4gICAgLmpvaW4oXCJcXG5cXG5cIilcbiAgICAucmVwbGFjZSgvXFxuezMsfS9nLCBcIlxcblxcblwiKTtcbiAgc3ViY2xhc3NGaWxlcy5wdXNoKHtcbiAgICBwYXRoOiBgQ2xhc3Nlcy8ke2NsYXNzTmFtZX0vU3ViY2xhc3Nlcy8ke3N1YmNsYXNzTmFtZX0ubWRgLFxuICAgIGNvbnRlbnQ6IHN1YmNsYXNzQ29udGVudFxuICB9KTtcbn1cblxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTdWJjbGFzc2VzIFN1bW1hcnkgXHUyNTAwXHUyNTAwXHUyNTAwXG5pZiAoc3Vicy5sZW5ndGgpIHtcbiAgY29uc3QgbGlua3MgPSBzdWJzLm1hcCgoc2M6IGFueSkgPT5cbiAgICBgW1tTdWJjbGFzc2VzLyR7c2MubmFtZS5yZXBsYWNlKC9bXFxcXC9dL2csIFwiLVwiKX18JHtzYy5uYW1lfV1dYFxuICApO1xuICBsaW5lcy5wdXNoKGBcXG4qKlN1YmNsYXNzZXM6KiogJHtsaW5rcy5qb2luKFwiLCBcIil9YCk7XG59XG5cblxuICAvLyBHZXQgZnVsbCBjbGFzcyBmZWF0dXJlIGRlZmluaXRpb25zXG5jb25zdCBhbGxGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkoanNvbi5jbGFzc0ZlYXR1cmUpID8ganNvbi5jbGFzc0ZlYXR1cmUgOiBqc29uLmxvb2t1cD8uY2xhc3NGZWF0dXJlID8/IFtdO1xuY29uc3QgZmVhdHVyZXNCeUxldmVsOiBSZWNvcmQ8bnVtYmVyLCBhbnlbXT4gPSB7fTtcblxuZm9yIChjb25zdCBlbnRyeSBvZiBhbGxGZWF0dXJlcykge1xuICBpZiAoZW50cnkuY2xhc3NOYW1lICE9PSBjbGFzc05hbWUpIGNvbnRpbnVlO1xuICBjb25zdCBsdmwgPSBlbnRyeS5sZXZlbCA/PyAwO1xuICBpZiAoIWZlYXR1cmVzQnlMZXZlbFtsdmxdKSBmZWF0dXJlc0J5TGV2ZWxbbHZsXSA9IFtdO1xuICBmZWF0dXJlc0J5TGV2ZWxbbHZsXS5wdXNoKGVudHJ5KTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgTGV2ZWwgRmVhdHVyZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5saW5lcy5wdXNoKGBgKTtcbmxpbmVzLnB1c2goYC0tLWApO1xubGluZXMucHVzaChgIyMgTGV2ZWwgRmVhdHVyZXNgKTtcblxuY29uc3QgbGV2ZWxzID0gT2JqZWN0XG4gIC5rZXlzKGZlYXR1cmVzQnlMZXZlbClcbiAgLm1hcChuID0+ICtuKVxuICAuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuXG5mb3IgKGNvbnN0IGx2bCBvZiBsZXZlbHMpIHtcbiAgbGluZXMucHVzaChgIyMjIExldmVsICR7bHZsfWApO1xuXG4gIGZvciAoY29uc3QgZmVhdCBvZiBmZWF0dXJlc0J5TGV2ZWxbbHZsXSkge1xuICAgIC8vIEZlYXR1cmUgaGVhZGVyXG4gICAgbGluZXMucHVzaChgIyMjIyAke2ZlYXQubmFtZX1gKTtcblxuICAgIC8vIEVuc3VyZSBlbnRyaWVzIGlzIGFsd2F5cyBhbiBhcnJheVxuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGZlYXQuZW50cmllcylcbiAgICAgID8gZmVhdC5lbnRyaWVzXG4gICAgICA6IFtmZWF0LmVudHJpZXNdO1xuXG4gICAgZm9yIChjb25zdCBlbnQgb2YgZW50cmllcykge1xuICAgICAgLy8gMSkgUGxhaW4tdGV4dCBwYXJhZ3JhcGhcbiAgICAgICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSBmb3JtYXRFbnRyeShlbnQpLnRyaW0oKTtcbiAgICAgICAgICAvLyBza2lwIGFueSBwdXJlLWJyYWNlIGxpbmVzXG4gICAgICAgICAgaWYgKHR4dCA9PT0gXCJ7XCIgfHwgdHh0ID09PSBcIn1cIikgY29udGludWU7XG4gICAgICAgICAgbGluZXMucHVzaCh0eHQpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzVHlwZWRFbnRyeShlbnQpICYmIGVudC50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudC5pdGVtcykpIHtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZW50Lml0ZW1zKSB7XG4gICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICB9XG4gICAgY29udGludWU7XG4gIH1cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBpbnNpZGUgeW91ciBmb3IgKGNvbnN0IGVudCBvZiBlbnRyaWVzKSBsb29wIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgaWYgKGlzVHlwZWRFbnRyeShlbnQpICYmIGVudC50eXBlID09PSBcIm9wdGlvbnNcIikge1xuICBpZiAoZW50LmNvdW50KSB7XG4gICAgbGluZXMucHVzaChcIlwiKTtcbiAgICBsaW5lcy5wdXNoKGAqKkNob29zZSAke2VudC5jb3VudH0gb2YgdGhlIGZvbGxvd2luZyBvcHRpb25zOioqYCk7XG4gICAgbGluZXMucHVzaChcIlwiKTtcbiAgfVxuXG4gIGZvciAoY29uc3Qgb3B0UmVmIG9mIEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdKSB7XG4gICAgaWYgKG9wdFJlZi50eXBlID09PSBcInJlZk9wdGlvbmFsZmVhdHVyZVwiKSB7XG4gICAgICBjb25zdCBbb3B0TmFtZSwgb3B0U3JjXSA9IG9wdFJlZi5vcHRpb25hbGZlYXR1cmUuc3BsaXQoXCJ8XCIpO1xuICAgICAgY29uc3QgZmVhdERlZiA9IG9wdGlvbmFsRmVhdHVyZXMuZmluZChcbiAgICAgICAgZiA9PiBmLm5hbWUgPT09IG9wdE5hbWUgJiYgKCFvcHRTcmMgfHwgZi5zb3VyY2UgPT09IG9wdFNyYylcbiAgICAgICk7XG5cbiAgICAgIGlmIChmZWF0RGVmKSB7XG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBlYWNoIGxpbmUgaW4gdGhlIGZlYXR1cmVcdTIwMTlzIGVudHJpZXNbXVxuICAgICAgICBmZWF0RGVmLmVudHJpZXMuZm9yRWFjaCgoc3ViRW50cnk6IGFueSwgaWR4OiBhbnkpID0+IHtcbiAgICAgICAgICAvLyByZW5kZXIgdGV4dFxuICAgICAgICAgIGNvbnN0IHRleHQgPSB0eXBlb2Ygc3ViRW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhzdWJFbnRyeSlcbiAgICAgICAgICAgIDogZm9ybWF0RW50cnkoc3ViRW50cnkpO1xuXG4gICAgICAgICAgaWYgKGlkeCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gZmlyc3QgbGluZTogYm9sZGVkIG5hbWUgKyBkZXNjcmlwdGlvblxuICAgICAgICAgICAgbGluZXMucHVzaChgLSAqKiR7ZmVhdERlZi5uYW1lfToqKiAke3RleHR9YCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHN1YnNlcXVlbnQgbGluZXM6IG5lc3RlZCBidWxsZXRcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYCAgLSAke3RleHR9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTsgLy8gYmxhbmsgbGluZSBhZnRlciBlYWNoIGZlYXR1cmUgYmxvY2tcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGZhbGxiYWNrIGlmIG5vdCBmb3VuZFxuICAgICAgICBsaW5lcy5wdXNoKGAqKiR7b3B0TmFtZX06KipgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9uXHUyMDEwcmVmT3B0aW9uYWxmZWF0dXJlIGZhbGxiYWNrXG4gICAgICBjb25zdCB0eHQgPSBmb3JtYXRFbnRyeShvcHRSZWYpO1xuICAgICAgaWYgKHR4dCkgbGluZXMucHVzaChgLSAke3R4dH1gKTtcbiAgICB9XG4gIH1cblxuICBjb250aW51ZTtcbn1cblxuXG4gICAgICAvLyAzKSBTdGFuZGFsb25lIHJlZk9wdGlvbmFsZmVhdHVyZVxuICAgICAgaWYgKGlzVHlwZWRFbnRyeShlbnQpICYmIGVudC50eXBlID09PSBcInJlZk9wdGlvbmFsZmVhdHVyZVwiKSB7XG4gICAgICAgIGNvbnN0IFtuYW1lXSA9IGVudC5vcHRpb25hbGZlYXR1cmUuc3BsaXQoXCJ8XCIpO1xuICAgICAgICBsaW5lcy5wdXNoKGAtIFtbJHtuYW1lfXwke25hbWV9XV1gKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIDQpIE5lc3RlZCBcdTIwMUNlbnRyaWVzXHUyMDFEIGJsb2NrIHdpdGggaXRzIG93biBoZWFkaW5nXG4gICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwiZW50cmllc1wiICYmIGVudC5uYW1lKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYCMjIyMjICR7ZW50Lm5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGlubmVyID0gQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc107XG4gICAgICAgIGZvciAoY29uc3QgZTIgb2YgaW5uZXIpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGUyKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIDUpIEZhbGxiYWNrIGZvciBhbnkgb3RoZXIgb2JqZWN0IHNoYXBlXG4gICAgICBjb25zdCBmYWxsYmFjayA9IGZvcm1hdEVudHJ5KGVudCk7XG4gICAgICBpZiAoZmFsbGJhY2spIGxpbmVzLnB1c2goZmFsbGJhY2spO1xuICAgIH1cblxuICAgIC8vIEJsYW5rIGxpbmUgYWZ0ZXIgZWFjaCBmZWF0dXJlXG4gICAgbGluZXMucHVzaChgYCk7XG4gIH0gXG5cbiAgLy8gRGl2aWRlciBiZXR3ZWVuIGxldmVsc1xuICBsaW5lcy5wdXNoKGAtLS1gKTtcbn1cblxuXG5cbiAgLy8gc3RpdGNoLCByZXBsYWNlIHRhZ3MsIHJldHVyblxuICBsZXQgY29udGVudCA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtsaW5lcy5qb2luKFwiXFxuXCIpfWA7XG4gIC8vIGNvbW1lbnQgdGhpcyBvdXQgd2hpbGUgZGVidWdnaW5nOlxuICBjb250ZW50ID0gcmVwbGFjZTVlVGFncyhjb250ZW50KTtcblxuICBjb250ZW50ID0gY29udGVudFxuICAucmVwbGFjZSgvXFxuezMsfS9nLCAnXFxuXFxuJykgICAvLyBubyBtb3JlIHRoYW4gMiBuZXdsaW5lcyBpbiBhIHJvd1xuICAucmVwbGFjZSgvXFxuICtcXG4vZywgJ1xcblxcbicpOyAgLy8gdHJpbSBibGFuayBsaW5lcyB3aXRoIHRyYWlsaW5nIHNwYWNlc1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogYENsYXNzZXMvJHtjbGFzc05hbWV9LyR7Y2xhc3NOYW1lfS5tZGAsXG4gICAgICBjb250ZW50LFxuICAgIH0sXG4gICAgLi4uc3ViY2xhc3NGaWxlcyxcbiAgXTtcbiAgXG59XG4iLCAiLy81ZSAyMDI1IHJ1bGVzXG5cbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuXG4vKipcbiAqIFBhcnNlIGFjdGlvbnMuanNvbiBpbnRvIGEgc2luZ2xlIE1hcmtkb3duIG5vdGUgd2l0aCAjIyBoZWFkZXJzIGZvciBlYWNoIGFjdGlvbixcbiAqIGhhbmRsaW5nIG5lc3RlZCBlbnRyaWVzLCBpbnNldHMsIGxpc3RzLCB0YWJsZXMsIGFuZCBhZGRpbmcgc2VwYXJhdG9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQWN0aW9uc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24uYWN0aW9uKSkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8qKiBSZWN1cnNpdmVseSBlbWl0IGFueSBibG9jazogdGV4dCwgbGlzdCwgdGFibGUsIGVudHJpZXMvaW5zZXQsIG9yIGZhbGxiYWNrICovXG4gIGZ1bmN0aW9uIGVtaXRCbG9jayhibG9jazogYW55KSB7XG4gICAgaWYgKCFibG9jaykgcmV0dXJuO1xuXG4gICAgLy8gMSkgUGxhaW4gdGV4dCBwYXJhZ3JhcGhzXG4gICAgaWYgKHR5cGVvZiBibG9jayA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgZm9yIChjb25zdCBwYXJhIG9mIGJsb2NrLnNwbGl0KC9cXG57Mix9LykpIHtcbiAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDIpIEJ1bGxldCBsaXN0XG4gICAgaWYgKGJsb2NrLnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoYmxvY2suaXRlbXMpKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYmxvY2suaXRlbXMpIHtcbiAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICB9XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDMpIFRhYmxlXG4gICAgaWYgKGJsb2NrLnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGJsb2NrLnJvd3MpKSB7XG4gICAgICBjb25zdCBoZWFkZXJzID0gYmxvY2suY29sTGFiZWxzIHx8IFtdO1xuICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiLS0tXCIpLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgIGZvciAoY29uc3Qgcm93IG9mIGJsb2NrLnJvd3MpIHtcbiAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICB9XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDQpIE5lc3RlZCBlbnRyaWVzL2luc2V0XG4gICAgaWYgKChibG9jay50eXBlID09PSBcImVudHJpZXNcIiB8fCBibG9jay50eXBlID09PSBcImluc2V0XCIpICYmIEFycmF5LmlzQXJyYXkoYmxvY2suZW50cmllcykpIHtcbiAgICAgIGlmIChibG9jay5uYW1lKSB7XG4gICAgICAgIGlmIChsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSA9PT0gXCJcIikgbGluZXMucG9wKCk7XG4gICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2Jsb2NrLm5hbWV9YCk7XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGJsb2NrLmVudHJpZXMpIHtcbiAgICAgICAgZW1pdEJsb2NrKGNoaWxkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyA1KSBGYWxsYmFjayBmb3IgYW55IG90aGVyIG9iamVjdCBvciBhcnJheVxuICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoYmxvY2spXG4gICAgICA/IGJsb2NrLmpvaW4oXCIgXCIpXG4gICAgICA6IHR5cGVvZiBibG9jayA9PT0gXCJvYmplY3RcIlxuICAgICAgPyBKU09OLnN0cmluZ2lmeShibG9jaylcbiAgICAgIDogU3RyaW5nKGJsb2NrKTtcbiAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgbGluZXMucHVzaChcIlwiKTtcbiAgfVxuXG4gIC8vIExvb3AgdGhyb3VnaCBlYWNoIGFjdGlvblxuICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBqc29uLmFjdGlvbikge1xuICAgIGxpbmVzLnB1c2goYCMjICR7YWN0aW9uLm5hbWV9YCk7XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBBcnJheS5pc0FycmF5KGFjdGlvbi5lbnRyaWVzKSA/IGFjdGlvbi5lbnRyaWVzIDogW2FjdGlvbi5lbnRyaWVzXSkge1xuICAgICAgZW1pdEJsb2NrKGVudHJ5KTtcbiAgICB9XG5cbiAgICAvLyBcdTIwMUNTZWUgQWxzb1x1MjAxRCBzZWN0aW9uXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWN0aW9uLnNlZUFsc29BY3Rpb24pKSB7XG4gICAgICBsaW5lcy5wdXNoKFwiKipTZWUgQWxzbzoqKlwiKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICBmb3IgKGNvbnN0IHJlZiBvZiBhY3Rpb24uc2VlQWxzb0FjdGlvbikge1xuICAgICAgICBjb25zdCBbbmFtZV0gPSBTdHJpbmcocmVmKS5zcGxpdChcInxcIik7XG4gICAgICAgIGxpbmVzLnB1c2goYC0gW1ske25hbWV9XV1gKTtcbiAgICAgIH1cbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gU2VwYXJhdG9yXG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgfVxuXG4gIC8vIFJlbW92ZSBhbnkgZG91YmxlLWJsYW5rIGxpbmVzXG4gIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9BY3Rpb25zLm1kXCIsXG4gICAgICBjb250ZW50OiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9LFxuICBdO1xufVxuXG4vKipcbiAqIFBhcnNlIGNvbWJpbmVkIGNvbmRpdGlvbnNkaXNlYXNlcy5qc29uIGludG8gdHdvIE1hcmtkb3duIG5vdGVzOiBDb25kaXRpb25zLm1kIGFuZCBEaXNlYXNlcy5tZFxuICogYWRkaW5nIHNlcGFyYXRvcnMgYmV0d2VlbiBlbnRyaWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IG91dHB1dHM6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgY29uc3QgcHJvY2Vzc0l0ZW1zID0gKGl0ZW1zOiBhbnlbXSwgb3V0UGF0aDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgIC8vIFRvcFx1MjAxMGxldmVsIGhlYWRlciBmb3IgZWFjaCBjb25kaXRpb24vZGlzZWFzZVxuICAgICAgbGluZXMucHVzaChgIyMgJHtpdGVtLm5hbWV9YCk7XG5cbiAgICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGl0ZW0uZW50cmllcykgPyBpdGVtLmVudHJpZXMgOiBbaXRlbS5lbnRyaWVzXTtcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcblxuICAgICAgICAvLyAxKSBQbGFpbiB0ZXh0IHBhcmFncmFwaHNcbiAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGZvciAoY29uc3QgcGFyYSBvZiBlbnRyeS5zcGxpdCgvXFxuezIsfS8pKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyAyKSBCdWxsZXQgbGlzdHNcbiAgICAgICAgZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHR4dCBvZiBlbnRyeS5pdGVtcykge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3ModHh0KX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyAzKSBUYWJsZXNcbiAgICAgICAgZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZW50cnkuY29sTGFiZWxzIHx8IFtdO1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIGZvciAoY29uc3Qgcm93IG9mIGVudHJ5LnJvd3MpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDQpIE5lc3RlZCBcImVudHJpZXNcIiBibG9ja3NcbiAgICAgICAgZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICAgIC8vIElmIHRoaXMgYmxvY2sgaGFzIGl0cyBvd24gbmFtZSwgZW1pdCBpdFxuICAgICAgICAgIGlmIChlbnRyeS5uYW1lKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgZW50cnkuZW50cmllcykge1xuICAgICAgICAgICAgICAvLyBOYW1lZCBzdWJcdTIwMTBibG9jayAoZS5nLiBcIkNhbid0IFNlZVwiKVxuICAgICAgICAgICAgICBpZiAoc3ViLnR5cGUgPT09IFwiZW50cmllc1wiICYmIHN1Yi5uYW1lICYmIEFycmF5LmlzQXJyYXkoc3ViLmVudHJpZXMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSBsaW5lcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMjICR7c3ViLm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0eHRFbnRyeSBvZiBzdWIuZW50cmllcykge1xuICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IHR5cGVvZiB0eHRFbnRyeSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3ModHh0RW50cnkpXG4gICAgICAgICAgICAgICAgICAgIDogcmVwbGFjZTVlVGFncyhTdHJpbmcodHh0RW50cnkpKTtcbiAgICAgICAgICAgICAgICAgIGxpbmVzLnB1c2godGV4dCk7XG4gICAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBQbGFpblx1MjAxMHRleHQgc3ViXHUyMDEwZW50cnlcbiAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhzdWIpKTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFVubmFtZWQgd3JhcHBlcjoganVzdCBmbGF0dGVuIGl0cyBjaGlsZHJlblxuICAgICAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgZW50cnkuZW50cmllcykge1xuICAgICAgICAgICAgICBpZiAoc3ViLnR5cGUgPT09IFwiZW50cmllc1wiICYmIHN1Yi5uYW1lICYmIEFycmF5LmlzQXJyYXkoc3ViLmVudHJpZXMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSBsaW5lcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtzdWIubmFtZX1gKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHR4dEVudHJ5IG9mIHN1Yi5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gdHlwZW9mIHR4dEVudHJ5ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyh0eHRFbnRyeSlcbiAgICAgICAgICAgICAgICAgICAgOiByZXBsYWNlNWVUYWdzKFN0cmluZyh0eHRFbnRyeSkpO1xuICAgICAgICAgICAgICAgICAgbGluZXMucHVzaCh0ZXh0KTtcbiAgICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3Moc3ViKSk7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyA1KSBBbnl0aGluZyBlbHNlIChmYWxsYmFjaylcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY29uc3QgdHh0ID0gQXJyYXkuaXNBcnJheShlbnRyeSlcbiAgICAgICAgICAgID8gZW50cnkuam9pbihcIiBcIilcbiAgICAgICAgICAgIDogdHlwZW9mIGVudHJ5ID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgICAgID8gSlNPTi5zdHJpbmdpZnkoZW50cnkpXG4gICAgICAgICAgICAgIDogU3RyaW5nKGVudHJ5KTtcbiAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBlbnRyaWVzXG4gICAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICAgIH1cblxuICAgIC8vIENsZWFuIHVwIGFueSBkb3VibGVcdTIwMTBibGFuayBsaW5lc1xuICAgIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICAgIHJldHVybiBhY2MuY29uY2F0KGN1cnIpO1xuICAgIH0sIFtdKTtcblxuICAgIG91dHB1dHMucHVzaCh7XG4gICAgICBwYXRoOiBvdXRQYXRoLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSk7XG4gIH07XG5cbiAgcHJvY2Vzc0l0ZW1zKGpzb24uY29uZGl0aW9uIHx8IFtdLCAgIFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9Db25kaXRpb25zLm1kXCIpO1xuICBwcm9jZXNzSXRlbXMoanNvbi5kaXNlYXNlICAgfHwgW10sICAgXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0Rpc2Vhc2VzLm1kXCIpO1xuICByZXR1cm4gb3V0cHV0cztcbn1cblxuLyoqXG4gKiBQYXJzZSBzZW5zZXMuanNvbiBpbnRvIGEgc2luZ2xlIE1hcmtkb3duIG5vdGUgd2l0aCAjIyBoZWFkZXJzIGZvciBlYWNoIHNlbnNlLFxuICogaGFuZGxpbmcgbGlzdHMsIHRhYmxlcywgbmVzdGVkIGVudHJpZXMvaW5zZXRzLCBhbmQgc2VwYXJhdG9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2Vuc2VzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkoanNvbi5zZW5zZSlcbiAgICA/IGpzb24uc2Vuc2VcbiAgICA6IEFycmF5LmlzQXJyYXkoanNvbi5zZW5zZXMpXG4gICAgPyBqc29uLnNlbnNlc1xuICAgIDogW107XG4gIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgZnVuY3Rpb24gZW1pdEJsb2NrKGJsb2NrOiBhbnkpIHtcbiAgICBpZiAoIWJsb2NrKSByZXR1cm47XG5cbiAgICAvLyAxKSBQbGFpblx1MjAxMHRleHQgcGFyYWdyYXBoKHMpXG4gICAgaWYgKHR5cGVvZiBibG9jayA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgZm9yIChjb25zdCBwYXJhIG9mIGJsb2NrLnNwbGl0KC9cXG57Mix9LykpIHtcbiAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDIpIEJ1bGxldCBsaXN0IChoYW5kbGVzIGJvdGggc3RyaW5nIGl0ZW1zIGFuZCBvYmplY3QgaXRlbXMpXG4gICAgaWYgKGJsb2NrLnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoYmxvY2suaXRlbXMpKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYmxvY2suaXRlbXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgLy8gb2JqZWN0IGl0ZW1zIHdpdGggbmFtZStlbnRyaWVzXG4gICAgICAgICAgaWYgKGl0ZW0ubmFtZSAmJiBBcnJheS5pc0FycmF5KGl0ZW0uZW50cmllcykpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gKioke2l0ZW0ubmFtZX0qKmApO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbnQgb2YgaXRlbS5lbnRyaWVzKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goYCAgLSAke3JlcGxhY2U1ZVRhZ3MoZW50KX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZhbGxiYWNrOiBzdHJpbmdpZnlcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKEpTT04uc3RyaW5naWZ5KGl0ZW0pKX1gKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gMykgVGFibGVcbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoYmxvY2sucm93cykpIHtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSBibG9jay5jb2xMYWJlbHMgfHwgW107XG4gICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgZm9yIChjb25zdCByb3cgb2YgYmxvY2sucm93cykge1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgIH1cbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gNCkgTmVzdGVkIGVudHJpZXMgLyBpbnNldHNcbiAgICBpZiAoKGJsb2NrLnR5cGUgPT09IFwiZW50cmllc1wiIHx8IGJsb2NrLnR5cGUgPT09IFwiaW5zZXRcIikgJiYgQXJyYXkuaXNBcnJheShibG9jay5lbnRyaWVzKSkge1xuICAgICAgLy8gbmFtZWQgYmxvY2sgXHUyMTkyIFwiIyMjIE5hbWVcIlxuICAgICAgaWYgKGJsb2NrLm5hbWUpIHtcbiAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSBsaW5lcy5wb3AoKTtcbiAgICAgICAgbGluZXMucHVzaChgIyMjICR7YmxvY2submFtZX1gKTtcbiAgICAgIH1cbiAgICAgIC8vIHJlY3Vyc2UgaW50byBjaGlsZHJlblxuICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBibG9jay5lbnRyaWVzKSB7XG4gICAgICAgIGVtaXRCbG9jayhjaGlsZCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gNSkgRmFsbGJhY2sgZm9yIGFycmF5cyBvciBvdGhlciBvYmplY3RzXG4gICAgY29uc3QgdHh0ID1cbiAgICAgIEFycmF5LmlzQXJyYXkoYmxvY2spXG4gICAgICAgID8gYmxvY2suam9pbihcIiBcIilcbiAgICAgICAgOiB0eXBlb2YgYmxvY2sgPT09IFwib2JqZWN0XCJcbiAgICAgICAgPyBKU09OLnN0cmluZ2lmeShibG9jaylcbiAgICAgICAgOiBTdHJpbmcoYmxvY2spO1xuICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICB9XG5cbiAgLy8gQnVpbGQgb3V0IGVhY2ggc2Vuc2VcbiAgZm9yIChjb25zdCBzZW5zZSBvZiBpdGVtcykge1xuICAgIGxpbmVzLnB1c2goYCMjICR7c2Vuc2UubmFtZX1gKTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIEFycmF5LmlzQXJyYXkoc2Vuc2UuZW50cmllcykgPyBzZW5zZS5lbnRyaWVzIDogW3NlbnNlLmVudHJpZXNdKSB7XG4gICAgICBlbWl0QmxvY2soZW50cnkpO1xuICAgIH1cbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIGFueSBkb3VibGVcdTIwMTBibGFuayBsaW5lc1xuICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgIHJldHVybiBhY2MuY29uY2F0KGN1cnIpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvU2Vuc2VzLm1kXCIsXG4gICAgICBjb250ZW50OiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9LFxuICBdO1xufVxuXG4vKipcbiAqIFBhcnNlIHNraWxscy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggc2tpbGwsXG4gKiBwcmVwZW5kaW5nIGFuIGFiaWxpdHkgbGluZSwgaGFuZGxpbmcgcGFyYWdyYXBocywgYW5kIHNlcGFyYXRvcnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNraWxsc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3QgaXRlbXMgPSBBcnJheS5pc0FycmF5KGpzb24uc2tpbGwpXG4gICAgPyBqc29uLnNraWxsXG4gICAgOiBBcnJheS5pc0FycmF5KGpzb24uc2tpbGxzKVxuICAgID8ganNvbi5za2lsbHNcbiAgICA6IFtdO1xuICBpZiAoIWl0ZW1zLmxlbmd0aCkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBmb3IgKGNvbnN0IHNraWxsIG9mIGl0ZW1zKSB7XG4gICAgbGluZXMucHVzaChgIyMgJHtza2lsbC5uYW1lfWApO1xuICAgIGlmIChza2lsbC5hYmlsaXR5KSB7XG4gICAgICBsaW5lcy5wdXNoKGAqQWJpbGl0eTogJHtza2lsbC5hYmlsaXR5fSpgKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KHNraWxsLmVudHJpZXMpID8gc2tpbGwuZW50cmllcyA6IFtza2lsbC5lbnRyaWVzXTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgIGlmICghZW50cnkpIGNvbnRpbnVlO1xuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCBwYXJhcyA9IGVudHJ5LnNwbGl0KC9cXG57Mix9Lyk7XG4gICAgICAgIGZvciAoY29uc3QgcGFyYSBvZiBwYXJhcykge1xuICAgICAgICAgIGNvbnN0IHQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBlbnRyeS5pdGVtcykge1xuICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KGVudHJ5KSA/IGVudHJ5LmpvaW4oXCIgXCIpIDogU3RyaW5nKGVudHJ5KTtcbiAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBza2lsbHNcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICB9XG4gIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9Ta2lsbHMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgRkVBVFNfTUVUQV9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG4vKipcbiAqIFBhcnNlIGZlYXRzLmpzb24gaW50byBvbmUgTWFya2Rvd24gZmlsZSBwZXIgZmVhdCB1bmRlciBQbGF5ZXIgQnVpbGQvRmVhdHMsXG4gKiBpbmNsdWRpbmcgZnJvbnRtYXR0ZXIsIGNsZWFuZWQgcHJlcmVxdWlzaXRlcywgYW5kIGZvcm1hdHRlZCBlbnRyaWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VGZWF0c0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3QgZmVhdHM6IGFueVtdID0gQXJyYXkuaXNBcnJheShqc29uLmZlYXQpXG4gICAgPyBqc29uLmZlYXRcbiAgICA6IEFycmF5LmlzQXJyYXkoanNvbi5mZWF0cylcbiAgICA/IGpzb24uZmVhdHNcbiAgICA6IFtdO1xuXG4gIHJldHVybiBmZWF0cy5tYXAoKGZlYXQ6IGFueSkgPT4ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZyb250bWF0dGVyIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IGZtID0gYnVpbGRGTSh7IC4uLmZlYXQsIF9lZGl0aW9uSWQ6IGVkaXRpb25JZCB9LCBGRUFUU19NRVRBX0RFRlMpO1xuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gICAgbGluZXMucHVzaChzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgRkVBVFNfTUVUQV9ERUZTKSk7XG4gICAgbGluZXMucHVzaChcIi0tLVwiLCBcIlwiKTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBUaXRsZSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBsaW5lcy5wdXNoKGAjICR7ZmVhdC5uYW1lfWAsIFwiXCIpO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFByZXJlcXVpc2l0ZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3QgcHJlcmVxczogc3RyaW5nW10gPSBbXTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LnByZXJlcXVpc2l0ZSkpIHtcbiAgICAgIGZlYXQucHJlcmVxdWlzaXRlLmZvckVhY2goKHByOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKHByLmxldmVsKSBwcmVyZXFzLnB1c2goYExldmVsICR7cHIubGV2ZWx9YCk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHByLmZlYXQpKSB7XG4gICAgICAgICAgcHIuZmVhdC5mb3JFYWNoKChmOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBmLnNwbGl0KFwifFwiKVswXS5yZXBsYWNlKC9cXGJcXHcvZywgYyA9PiBjLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgICAgICAgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFtbJHtuYW1lfV1dYCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZmVhdC5zcGVsbGNhc3RpbmdQcmVwYXJlZCkgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFNwZWxsY2FzdGVyYCk7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmVhdC50b29sUHJvZmljaWVuY2llcykpIHtcbiAgICAgIGZlYXQudG9vbFByb2ZpY2llbmNpZXMuZm9yRWFjaCgodHA6IGFueSkgPT4ge1xuICAgICAgICBPYmplY3QuZW50cmllcyh0cCkuZm9yRWFjaCgoW2tleV0pID0+IHtcbiAgICAgICAgICBpZiAoa2V5ID09PSAnYW55QXJ0aXNhbnNUb29sJykge1xuICAgICAgICAgICAgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFByb2ZpY2llbnQgd2l0aCBhbiBhcnRpc2FuJ3MgdG9vbGApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogUHJvZmljaWVudCB3aXRoICR7a2V5LnJlcGxhY2UoLyhbQS1aXSkvZywnICQxJykudHJpbSgpfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmVhdC5hcm1vclByb2ZpY2llbmNpZXMpKSB7XG4gICAgICBmZWF0LmFybW9yUHJvZmljaWVuY2llcy5mb3JFYWNoKChhcm06IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBhcm1TdHIgPSB0eXBlb2YgYXJtID09PSAnc3RyaW5nJyA/IGFybSA6IEpTT04uc3RyaW5naWZ5KGFybSk7XG4gICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBQcm9maWNpZW50IHdpdGggJHthcm1TdHIucmVwbGFjZSgvKFtBLVpdKS9nLCcgJDEnKS50cmltKCl9YCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGZlYXQucmFjZSkgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6ICR7ZmVhdC5yYWNlfWApO1xuXG4gICAgaWYgKHByZXJlcXMubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKFwiKipQcmVyZXF1aXNpdGVzKipcIik7XG4gICAgICBwcmVyZXFzLmZvckVhY2gocCA9PiBsaW5lcy5wdXNoKGAtICR7cH1gKSk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBFbnRyaWVzIHJlbmRlcmluZyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShmZWF0LmVudHJpZXMpID8gZmVhdC5lbnRyaWVzIDogW2ZlYXQuZW50cmllc107XG4gICAgZW50cmllcy5mb3JFYWNoKChlbnRyeTogYW55KSA9PiB7XG4gICAgICBpZiAoIWVudHJ5KSByZXR1cm47XG5cbiAgICAgIC8vIFBsYWluIHRleHRcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGVudHJ5LnNwbGl0KC9cXG57Mix9LykuZm9yRWFjaChwID0+IHtcbiAgICAgICAgICBjb25zdCB0ID0gcC50cmltKCk7XG4gICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIExpc3RcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ2xpc3QnICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgIGVudHJ5Lml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGl0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXQpfWApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXQudHlwZSA9PT0gJ2l0ZW0nICYmIGl0Lm5hbWUpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gKioke2l0Lm5hbWV9KipgKTtcbiAgICAgICAgICAgIGNvbnN0IHN1YnMgPSBBcnJheS5pc0FycmF5KGl0LmVudHJpZXMpID8gaXQuZW50cmllcyA6IFtpdC5lbnRyaWVzXTtcbiAgICAgICAgICAgIHN1YnMuZm9yRWFjaCgoczogYW55KSA9PlxuICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAgIC0gJHtyZXBsYWNlNWVUYWdzKHR5cGVvZiBzID09PSAnc3RyaW5nJyA/IHMgOiBKU09OLnN0cmluZ2lmeShzKSl9YClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgICAgLy8gSW5zZXQgYXMgaW5kZW50ZWQgYnVsbGV0XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09ICdpbnNldCcpIHtcbiAgICAgICAgbGluZXMucHVzaChgLSAqJHtlbnRyeS5uYW1lfSpgKTtcbiAgICAgICAgY29uc3Qgc3VicyA9IEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykgPyBlbnRyeS5lbnRyaWVzIDogW2VudHJ5LmVudHJpZXNdO1xuICAgICAgICBzdWJzLmZvckVhY2goKHM6IGFueSkgPT4gbGluZXMucHVzaChgICAtICR7cmVwbGFjZTVlVGFncyhzKX1gKSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG5cbiAgICAgIC8vIFNlY3Rpb24gb3IgZW50cmllc1xuICAgICAgfSBlbHNlIGlmICgoZW50cnkudHlwZSA9PT0gJ3NlY3Rpb24nIHx8IGVudHJ5LnR5cGUgPT09ICdlbnRyaWVzJykgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICBpZiAoZW50cnkubmFtZSkge1xuICAgICAgICAgIGxpbmVzLnB1c2goYCMjICR7ZW50cnkubmFtZX1gKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVudHJ5LmVudHJpZXMuZm9yRWFjaCgoczogYW55KSA9PiB7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR5cGVvZiBzID09PSAnc3RyaW5nJyA/IHMgOiBKU09OLnN0cmluZ2lmeShzKSkpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAvLyBUYWJsZVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSAndGFibGUnICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICAgICAgY29uc3QgaGRyID0gZW50cnkuY29sTGFiZWxzIHx8IFtdO1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGRyLmpvaW4oJyB8ICcpfSB8YCk7XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZHIubWFwKCgpID0+ICctLS0nKS5qb2luKCcgfCAnKX0gfGApO1xuICAgICAgICBlbnRyeS5yb3dzLmZvckVhY2goKHJvdzogYW55W10pID0+XG4gICAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKCcgfCAnKX0gfGApXG4gICAgICAgICk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDogYFBsYXllciBCdWlsZC9GZWF0cy8ke2ZlYXQubmFtZX0ubWRgLFxuICAgICAgY29udGVudDogbGluZXMuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH07XG4gIH0pO1xufVxuIiwgIi8vIHNyYy9wYXJzZXJzL2JhY2tncm91bmRzLnRzXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBGTV9GSUVMRFMsIGZpbHRlclZhbGlkU2tpbGxzLCBCQUNLR1JPVU5EX01FVEFfREVGUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcblxuLyoqXG4gKiBQYXJzZSBiYWNrZ3JvdW5kcy5qc29uIGludG8gb25lIE1hcmtkb3duIGZpbGUgcGVyIGJhY2tncm91bmQgdW5kZXIgUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLFxuICogZXhjbHVkaW5nIGFueSBcdTIwMUNWYXJpYW50XHUyMDI2XHUyMDFEIG9yIFx1MjAxQ0JhbGR1clx1MjAxOXMgR2F0ZVx1MjAyNlx1MjAxRCBlbnRyaWVzLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJhY2tncm91bmRzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICAvLyBwdWxsIGluIHRoZSBhcnJheVxuICBjb25zdCByYXc6IGFueVtdID0gQXJyYXkuaXNBcnJheShqc29uLmJhY2tncm91bmQpXG4gICAgPyBqc29uLmJhY2tncm91bmRcbiAgICA6IEFycmF5LmlzQXJyYXkoanNvbi5iYWNrZ3JvdW5kcylcbiAgICA/IGpzb24uYmFja2dyb3VuZHNcbiAgICA6IFtdO1xuXG4gIC8vIGZpbHRlciBvdXQgdW53YW50ZWQgZW50cmllc1xuICBjb25zdCBiYWNrZ3JvdW5kcyA9IHJhdy5maWx0ZXIoYmcgPT4ge1xuICAgIGNvbnN0IG5tOiBzdHJpbmcgPSBiZy5uYW1lIHx8IFwiXCI7XG4gICAgcmV0dXJuICFubS5zdGFydHNXaXRoKFwiVmFyaWFudFwiKSAmJiAhbm0uaW5jbHVkZXMoXCJCYWxkdXIncyBHYXRlXCIpO1xuICB9KTtcblxuICBjb25zdCBvdXRwdXRzOiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuXG4gIGJhY2tncm91bmRzLmZvckVhY2goYmcgPT4ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgYnVpbGQgZnJvbnRtYXR0ZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBmbSA9IGJ1aWxkRk0oYmcsIEJBQ0tHUk9VTkRfTUVUQV9ERUZTKTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGNvbGxlY3Qgb25seSB0aGUgZW50cmllcyBmbGFnZ2VkIGlzRmVhdHVyZSBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IGV4dHJhVHJhaXRzOiBzdHJpbmdbXSA9IEFycmF5LmlzQXJyYXkoYmcuZW50cmllcylcbiAgPyAoYmcuZW50cmllcyBhcyBhbnlbXSlcbiAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT4gZS5kYXRhPy5pc0ZlYXR1cmUgJiYgdHlwZW9mIGUubmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgIC5tYXAoKGU6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBuYW1lID0gZS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKTtcbiAgICAgICAgcmV0dXJuIGBbWyR7YmcubmFtZX0jJHtuYW1lfV1dYDtcbiAgICAgIH0pXG4gIDogW107XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBzZXJpYWxpemUgZnJvbnRtYXR0ZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIEJBQ0tHUk9VTkRfTUVUQV9ERUZTKTtcbmxpbmVzLnB1c2goXCItLS1cIiwgeWFtbCwgXCItLS1cIiwgXCJcIik7XG5cbiBcbiAgICAvLyB0aXRsZVxuICAgIGxpbmVzLnB1c2goYCMgJHtiZy5uYW1lfWAsIFwiXCIpO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIHNraWxsIHByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYmcuc2tpbGxQcm9maWNpZW5jaWVzKSAmJiBiZy5za2lsbFByb2ZpY2llbmNpZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBza2lsbHM6IHN0cmluZ1tdID0gW107XG4gICAgICBiZy5za2lsbFByb2ZpY2llbmNpZXMuZm9yRWFjaCgoZW50OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBza2lsbHMucHVzaChjYXAoZW50KSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZW50LmNob29zZSAmJiBBcnJheS5pc0FycmF5KGVudC5jaG9vc2UuZnJvbSkpIHtcbiAgICAgICAgICBza2lsbHMucHVzaChgQ2hvb3NlICR7ZW50LmNob29zZS5hbW91bnR9IGZyb20gJHtlbnQuY2hvb3NlLmZyb20uam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFssIHZdKSA9PiB2ID09PSB0cnVlKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrXSkgPT4gc2tpbGxzLnB1c2goY2FwKGspKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbGluZXMucHVzaChgKipTa2lsbCBQcm9maWNpZW5jaWVzOioqICR7c2tpbGxzLmpvaW4oXCIsIFwiKX1gLCBcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgbGFuZ3VhZ2UgcHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5sYW5ndWFnZVByb2ZpY2llbmNpZXMpICYmIGJnLmxhbmd1YWdlUHJvZmljaWVuY2llcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGxhbmdzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgYmcubGFuZ3VhZ2VQcm9maWNpZW5jaWVzLmZvckVhY2goKGVudDogYW55KSA9PiB7XG4gICAgICAgIGlmIChlbnQuYW55U3RhbmRhcmQpIHtcbiAgICAgICAgICBsYW5ncy5wdXNoKGAke2VudC5hbnlTdGFuZGFyZH0gb2YgeW91ciBjaG9pY2VgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhlbnQpXG4gICAgICAgICAgICAuZmlsdGVyKChbLCB2XSkgPT4gdiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChba10pID0+IGxhbmdzLnB1c2goY2FwKGspKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbGluZXMucHVzaChgKipMYW5ndWFnZXM6KiogJHtsYW5ncy5qb2luKFwiLCBcIil9YCwgXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIHRvb2wgcHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYmcudG9vbFByb2ZpY2llbmNpZXMpICYmIGJnLnRvb2xQcm9maWNpZW5jaWVzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCB0b29sczogc3RyaW5nW10gPSBbXTtcblxuICAgICAgICBiZy50b29sUHJvZmljaWVuY2llcy5mb3JFYWNoKChlbnQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgLy8gXHUyMDFDQ2hvb3NlIFggZnJvbSBcdTIwMjZcdTIwMURcbiAgICAgICAgICAgIGlmIChlbnQuY2hvb3NlICYmIEFycmF5LmlzQXJyYXkoZW50LmNob29zZS5mcm9tKSkge1xuICAgICAgICAgICAgY29uc3QgbGlzdCA9IGVudC5jaG9vc2UuZnJvbS5tYXAoaHVtYW5pemUpLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgICAgIHRvb2xzLnB1c2goYENob29zZSAke2VudC5jaG9vc2UuY291bnR9IGZyb20gJHtsaXN0fWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBwbGFpbiBzdHJpbmcgKHJhcmUgaGVyZSwgYnV0IGp1c3QgaW4gY2FzZSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0b29scy5wdXNoKGh1bWFuaXplKGVudCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBvYmplY3Qgd2l0aCBib29sZWFuIGZsYWdzOiBnYXRoZXIgKmFsbCogdHJ1ZSBrZXlzXG4gICAgICAgICAgICBPYmplY3QuZW50cmllcyhlbnQpXG4gICAgICAgICAgICAuZmlsdGVyKChbXywgdl0pID0+IHYgPT09IHRydWUpXG4gICAgICAgICAgICAuZm9yRWFjaCgoW2tdKSA9PiB0b29scy5wdXNoKGh1bWFuaXplKGspKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxpbmVzLnB1c2goYCoqVG9vbCBQcm9maWNpZW5jaWVzOioqICR7dG9vbHMuam9pbihcIiwgXCIpfWAsIFwiXCIpO1xuICAgICAgICB9XG5cblxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIHN0YXJ0aW5nIGVxdWlwbWVudCBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5zdGFydGluZ0VxdWlwbWVudCkgJiYgYmcuc3RhcnRpbmdFcXVpcG1lbnQubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAqKkVxdWlwbWVudDoqKmApO1xuICAgICAgYmcuc3RhcnRpbmdFcXVpcG1lbnQuZm9yRWFjaCgoZ3JwOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZ3JwLl8pKSB7XG4gICAgICAgICAgZ3JwLl8uZm9yRWFjaCgoaXQ6IGFueSkgPT4gbGluZXMucHVzaChgLSAke2ZtdEl0ZW0oaXQpfWApKTtcbiAgICAgICAgfVxuICAgICAgICBbXCJhXCIsIFwiYlwiXS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZ3JwW2tleV0pKSB7XG4gICAgICAgICAgICBncnBba2V5XS5mb3JFYWNoKGl0ID0+IGxpbmVzLnB1c2goYC0gJHtmbXRJdGVtKGl0KX1gKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgYWxsIGZlYXR1cmUgJiBlbnRyaWVzIGJsb2NrcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5lbnRyaWVzKSkge1xuICAgICAgYmcuZW50cmllcy5mb3JFYWNoKChlbnRyeTogYW55KSA9PiB7XG4gICAgICAgIC8vIHNraXAgdGhlIHN1bW1hcnkgbGlzdCBibG9ja1xuICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgZW50cnkuc3R5bGUgPT09IFwibGlzdC1oYW5nLW5vdGl0bGVcIikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBzZWN0aW9uIGhlYWRlclxuICAgICAgICBpZiAoZW50cnkubmFtZSkge1xuY29uc3QgaGVhZGVyID0gZW50cnkuZGF0YT8uaXNGZWF0dXJlXG4gID8gZW50cnkubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIilcbiAgOiBlbnRyeS5uYW1lO1xubGluZXMucHVzaChgIyMgJHtoZWFkZXJ9YCwgXCJcIik7ICAgICAgICB9XG4gICAgICAgIC8vIGVudHJ5IGNvbnRlbnRcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICBlbnRyeS5lbnRyaWVzLmZvckVhY2goKGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhlKSwgXCJcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlLml0ZW1zKSkge1xuICAgICAgICAgICAgICBlLml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXQuZW50cnkgPz8gaXQpfWApXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gXCJ0YWJsZVwiKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHRibCA9IHJlbmRlck1hcmtkb3duVGFibGUoZSk7XG4gICAgICAgICAgICAgIGlmICh0YmwpIGxpbmVzLnB1c2godGJsLCBcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICAgIGVudHJ5Lml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdC5lbnRyeSA/PyBpdCl9YClcbiAgICAgICAgICApO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG91dHB1dHMucHVzaCh7XG4gICAgICBwYXRoOiBgUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLyR7YmcubmFtZX0ubWRgLFxuICAgICAgY29udGVudDogbGluZXMuam9pbihcIlxcblwiKS50cmltRW5kKCkgKyBcIlxcblwiLFxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gb3V0cHV0cztcbn1cblxuLy8gXHUyMDE0XHUyMDE0XHUyMDE0IGhlbHBlcnMgXHUyMDE0XHUyMDE0XHUyMDE0XG5mdW5jdGlvbiBjYXAoc3RyOiBzdHJpbmcpIHtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cblxuXG5mdW5jdGlvbiBmbXRJdGVtKGl0ZW06IGFueSk6IHN0cmluZyB7XG4gIC8vIDEpIHJhdyBzdHJpbmcgb3IgdGFnZ2VkIGl0ZW1cbiAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKGl0ZW0uaW5jbHVkZXMoXCJ8XCIpKSB7XG4gICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhge0BpdGVtICR7aXRlbX19YCk7XG4gICAgfVxuICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGl0ZW0pO1xuICB9XG5cbiAgLy8gMikgcHVyZSBnb2xkLXBpZWNlIGVudHJ5OiB7IHZhbHVlOiAxMCB9IG9yIHsgY29udGFpbnNWYWx1ZTogMTUwMCB9XG4gIGNvbnN0IHByaWNlUmF3ID0gKGl0ZW0uY29udGFpbnNWYWx1ZSA/PyBpdGVtLnZhbHVlKSBhcyBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIGlmIChcbiAgICB0eXBlb2YgcHJpY2VSYXcgPT09IFwibnVtYmVyXCIgJiZcbiAgICAvLyBtYWtlIHN1cmUgaXRcdTIwMTlzIG5vdCBhbHNvIGFuIFx1MjAxQ2l0ZW1cdTIwMUQgb3IgXHUyMDFDZXF1aXBtZW50VHlwZVx1MjAxRFxuICAgICFpdGVtLml0ZW0gJiZcbiAgICAhaXRlbS5lcXVpcG1lbnRUeXBlICYmXG4gICAgIWl0ZW0uc3BlY2lhbFxuICApIHtcbiAgICBjb25zdCBncCA9IHByaWNlUmF3ID49IDEwMCA/IHByaWNlUmF3IC8gMTAwIDogcHJpY2VSYXc7XG4gICAgcmV0dXJuIGAke2dwfSBncGA7XG4gIH1cblxuICAvLyAzKSBleHBsaWNpdCBpdGVtIG9iamVjdCB3aXRoIG9wdGlvbmFsIHByaWNlXG4gIGlmIChpdGVtLml0ZW0pIHtcbiAgICBjb25zdCBsaW5rID0gcmVwbGFjZTVlVGFncyhge0BpdGVtICR7aXRlbS5pdGVtfX1gKTtcbiAgICBpZiAodHlwZW9mIHByaWNlUmF3ID09PSBcIm51bWJlclwiKSB7XG4gICAgICBjb25zdCBncCA9IHByaWNlUmF3ID49IDEwMCA/IHByaWNlUmF3IC8gMTAwIDogcHJpY2VSYXc7XG4gICAgICByZXR1cm4gYCR7bGlua30gKCR7Z3B9IGdwKWA7XG4gICAgfVxuICAgIHJldHVybiBsaW5rO1xuICB9XG5cbiAgLy8gNCkgc3BlY2lhbC1jYXNlIHRleHRcbiAgaWYgKHR5cGVvZiBpdGVtLnNwZWNpYWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gaXRlbS5zcGVjaWFsO1xuICB9XG5cbiAgLy8gNSkga25vd24gZXF1aXBtZW50VHlwZSBrZXlzXG4gIGlmIChpdGVtLmVxdWlwbWVudFR5cGUpIHtcbiAgICBzd2l0Y2ggKGl0ZW0uZXF1aXBtZW50VHlwZSkge1xuICAgICAgY2FzZSBcInRvb2xBcnRpc2FuXCI6XG4gICAgICAgIHJldHVybiBcIk9uZSB0eXBlIG9mIGFydGlzYW5cdTIwMTlzIHRvb2xzIChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGNhc2UgXCJpbnN0cnVtZW50TXVzaWNhbFwiOlxuICAgICAgICByZXR1cm4gXCJPbmUgdHlwZSBvZiBtdXNpY2FsIGluc3RydW1lbnQgKG9mIHlvdXIgY2hvaWNlKVwiO1xuICAgICAgY2FzZSBcInNldEdhbWluZ1wiOlxuICAgICAgICByZXR1cm4gXCJPbmUgc2V0IG9mIGdhbWluZyBkaWNlIChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBodW1hbml6ZShpdGVtLmVxdWlwbWVudFR5cGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIDYpIGZhbGxiYWNrOiBkdW1wIGFueSBsZWZ0b3ZlciB0YWcgc3ludGF4XG4gIHJldHVybiByZXBsYWNlNWVUYWdzKEpTT04uc3RyaW5naWZ5KGl0ZW0pKTtcbn1cblxuXG5cbmZ1bmN0aW9uIGh1bWFuaXplKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qgc3BhY2VkID0gc3RyLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEgJDJcIik7XG4gIHJldHVybiBzcGFjZWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzcGFjZWQuc2xpY2UoMSk7XG59XG4iLCAiLy8gc3JjL3J1bGVzZXRJbnN0YWxsZXIudHNcbmltcG9ydCB7IEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQVZBSUxBQkxFX0VESVRJT05TIH0gZnJvbSBcIi4vZWRpdGlvbnNcIjtcblxuLy8gU1RBVElDIGltcG9ydCBvZiBldmVyeSBpbnN0YWxsZXIgeW91IHNoaXA6XG5pbXBvcnQgKiBhcyBmaXZlZTIwMTRJbnN0YWxsZXIgZnJvbSBcIi4vcGFyc2Vycy81ZS1qc29uL2luc3RhbGxlclwiO1xuaW1wb3J0ICogYXMgZml2ZWUyMDI1SW5zdGFsbGVyIGZyb20gXCIuL3BhcnNlcnMvNWUtMjAyNS9pbnN0YWxsZXJcIjtcbi8vIGltcG9ydCAqIGFzIGFub3RoZXJJbnN0YWxsZXIgZnJvbSBcIi4vcGFyc2Vycy9vdGhlci9pbnN0YWxsZXJcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltcG9ydFJ1bGVzZXREYXRhKHBhcmFtczoge1xuICBhcHA6IEFwcDtcbiAgZWRpdGlvbktleTogc3RyaW5nO1xuICB0YXJnZXRQYXRoOiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHsgYXBwLCBlZGl0aW9uS2V5LCB0YXJnZXRQYXRoIH0gPSBwYXJhbXM7XG4gIGNvbnN0IGVkaXRpb24gPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZCgoZSkgPT4gZS5pZCA9PT0gZWRpdGlvbktleSk7XG4gIGlmICghZWRpdGlvbikge1xuICAgIGNvbnNvbGUud2FybihcIkVkaXRpb24gbm90IGZvdW5kIGZvcjpcIiwgZWRpdGlvbktleSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghZWRpdGlvbi5wYXJzZXIpIHtcbiAgICBjb25zb2xlLndhcm4oXCJObyBwYXJzZXIgZGVmaW5lZCBmb3I6XCIsIGVkaXRpb25LZXkpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGFsbCBpbnN0YWxsZXJzIGV4cG9zZSBpbXBvcnRFZGl0aW9uRGF0YSgpXG4gIGxldCBpbnN0YWxsZXJNb2R1bGU6IHsgaW1wb3J0RWRpdGlvbkRhdGE6IChhcmdzOiB7IGFwcDogQXBwOyBlZGl0aW9uOiB0eXBlb2YgZWRpdGlvbjsgdGFyZ2V0UGF0aDogc3RyaW5nIH0pID0+IFByb21pc2U8dm9pZD4gfTtcblxuICBzd2l0Y2ggKGVkaXRpb24ucGFyc2VyKSB7XG4gICAgY2FzZSBcIjVlLWpzb25cIjpcbiAgICAgIGluc3RhbGxlck1vZHVsZSA9IGZpdmVlMjAxNEluc3RhbGxlcjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCI1ZS0yMDI1XCI6XG4gICAgICBpbnN0YWxsZXJNb2R1bGUgPSBmaXZlZTIwMjVJbnN0YWxsZXI7XG4gICAgICBicmVhaztcbiAgICAvLyBjYXNlIFwib3RoZXItcGFyc2VyXCI6XG4gICAgLy8gICBpbnN0YWxsZXJNb2R1bGUgPSBhbm90aGVySW5zdGFsbGVyO1xuICAgIC8vICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwYXJzZXI6ICR7ZWRpdGlvbi5wYXJzZXJ9YCk7XG4gIH1cblxuICBhd2FpdCBpbnN0YWxsZXJNb2R1bGUuaW1wb3J0RWRpdGlvbkRhdGEoeyBhcHAsIGVkaXRpb24sIHRhcmdldFBhdGggfSk7XG59XG4iLCAiLy8gY3VzdG9tSW5zdGFsbE1vZGFsLnRzXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBzZXRJY29uLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGNsYXNzIEluc3RhbGxpbmdNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICBzdXBlcihhcHApO1xuICB9XG4gIG9uT3BlbigpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIHRoaXMuY29udGVudEVsXG4gICAgICAuY3JlYXRlRGl2KHsgdGV4dDogJ0luc3RhbGxpbmdcdTIwMjYnLCBjbHM6ICdtb2QtcXVpZXQnIH0pXG4gICAgICAuc3R5bGUuY3NzVGV4dCA9XG4gICAgICAnZm9udC1zdHlsZTogaXRhbGljOyBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMWVtOyc7XG4gIH1cbiAgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG5cbmludGVyZmFjZSBUcmVlTm9kZSB7XG4gIG5hbWU6IHN0cmluZztcbiAgZnVsbFBhdGg6IHN0cmluZztcbiAgaXNGb2xkZXI6IGJvb2xlYW47XG4gIGNoaWxkcmVuOiBSZWNvcmQ8c3RyaW5nLCBUcmVlTm9kZT47XG59XG5cbi8qKlxuICogU2hvd3MgYSBcdTIwMUNDdXN0b20gSW5zdGFsbFx1MjAxRCBtb2RhbC4gT25jZSB0aGUgdXNlciBjbGlja3MgXHUyMDFDSW5zdGFsbCBTZWxlY3RlZCxcdTIwMURcbiAqIHRoaXMgaGFuZHMgYmFjayBhbiBhcnJheSBvZiBgeyBwYXRoLCBpc0ZvbGRlciB9YCB0byBgcGx1Z2luLnBlcmZvcm1DdXN0b21JbnN0YWxsKC4uLilgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2hvd0N1c3RvbUluc3RhbGxNb2RhbChcbiAgYXBwOiBBcHAsXG4gIHBsdWdpbjogVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luXG4pIHtcbiAgLy8gKDEpIEJ1aWxkIGEgcXVpY2sgbWFwOiBmdWxsUGF0aCBcdTIxOTIgbWFuaWZlc3RLZXkgKGZvciBkZXBlbmRlbmN5IGxvb2t1cHMpXG4gIGNvbnN0IGZ1bGxQYXRoVG9LZXk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgZm9yIChjb25zdCBmIG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICBmdWxsUGF0aFRvS2V5W2YucGF0aF0gPSBmLmtleTtcbiAgfVxuICBmb3IgKGNvbnN0IGYgb2YgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICBmdWxsUGF0aFRvS2V5W2YucGF0aF0gPSBmLmtleTtcbiAgfVxuXG4gIC8vICgyKSBCdWlsZCBhIG5lc3RlZCBUcmVlTm9kZSBzdHJ1Y3R1cmUgZnJvbSBtYW5pZmVzdENhY2hlXG4gIGNvbnN0IHJvb3Q6IFRyZWVOb2RlID0geyBuYW1lOiAnJywgZnVsbFBhdGg6ICcnLCBpc0ZvbGRlcjogdHJ1ZSwgY2hpbGRyZW46IHt9IH07XG5cbiAgZnVuY3Rpb24gZW5zdXJlRm9sZGVyTm9kZShzZWdtZW50czogc3RyaW5nW10pOiBUcmVlTm9kZSB7XG4gICAgbGV0IGN1cnNvciA9IHJvb3Q7XG4gICAgbGV0IGJ1aWx0U29GYXIgPSAnJztcbiAgICBmb3IgKGNvbnN0IHNlZyBvZiBzZWdtZW50cykge1xuICAgICAgYnVpbHRTb0ZhciA9IGJ1aWx0U29GYXIgPyBgJHtidWlsdFNvRmFyfS8ke3NlZ31gIDogc2VnO1xuICAgICAgaWYgKCFjdXJzb3IuY2hpbGRyZW5bc2VnXSkge1xuICAgICAgICBjdXJzb3IuY2hpbGRyZW5bc2VnXSA9IHtcbiAgICAgICAgICBuYW1lOiBzZWcsXG4gICAgICAgICAgZnVsbFBhdGg6IGJ1aWx0U29GYXIsXG4gICAgICAgICAgaXNGb2xkZXI6IHRydWUsXG4gICAgICAgICAgY2hpbGRyZW46IHt9LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY3Vyc29yID0gY3Vyc29yLmNoaWxkcmVuW3NlZ107XG4gICAgfVxuICAgIHJldHVybiBjdXJzb3I7XG4gIH1cblxuICAvLyBJbnNlcnQgYWxsIGZvbGRlciBlbnRyaWVzIGZpcnN0XG4gIGZvciAoY29uc3QgZm9sZGVyRW50cnkgb2YgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgIGNvbnN0IHNlZ21lbnRzID0gZm9sZGVyRW50cnkucGF0aC5zcGxpdCgnLycpO1xuICAgIGVuc3VyZUZvbGRlck5vZGUoc2VnbWVudHMpO1xuICB9XG5cbiAgLy8gSW5zZXJ0IGFsbCBmaWxlIGVudHJpZXMgdW5kZXIgdGhlaXIgcGFyZW50IGZvbGRlciBub2Rlc1xuICBmb3IgKGNvbnN0IGZpbGVFbnRyeSBvZiBwbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgIGNvbnN0IHNlZ21lbnRzID0gZmlsZUVudHJ5LnBhdGguc3BsaXQoJy8nKTtcbiAgICBjb25zdCBmaWxlTmFtZSA9IHNlZ21lbnRzLnBvcCgpITtcbiAgICBjb25zdCBwYXJlbnROb2RlID0gc2VnbWVudHMubGVuZ3RoID8gZW5zdXJlRm9sZGVyTm9kZShzZWdtZW50cykgOiByb290O1xuICAgIHBhcmVudE5vZGUuY2hpbGRyZW5bZmlsZU5hbWVdID0ge1xuICAgICAgbmFtZTogZmlsZU5hbWUsXG4gICAgICBmdWxsUGF0aDogZmlsZUVudHJ5LnBhdGgsXG4gICAgICBpc0ZvbGRlcjogZmFsc2UsXG4gICAgICBjaGlsZHJlbjoge30sXG4gICAgfTtcbiAgfVxuXG4gIC8vICgzKSBEZWZpbmUgb3VyIE1vZGFsIHN1YmNsYXNzXG4gIGNsYXNzIEN1c3RvbUluc3RhbGxNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIGNoZWNrYm94TWFwOiBSZWNvcmQ8c3RyaW5nLCBIVE1MSW5wdXRFbGVtZW50PiA9IHt9O1xuICAgIHByaXZhdGUgY29uc29sZUVsOiBIVE1MRWxlbWVudDsgICAgICAgICAgICAgICAgLy8gPGRpdj4gdGhhdCBob2xkcyBcdTIwMUNkZXBlbmRlbmN5IGNvbnNvbGVcdTIwMURcbiAgICBwcml2YXRlIGN1cnJlbnRCYXRjaExpbmVzOiBIVE1MRWxlbWVudFtdID0gW107ICAvLyBsaW5lcyBmcm9tIHRoZSBtb3N0IHJlY2VudCBkZXBlbmRlbmN5IHBhc3NcblxuICAgIC8vIFRvcFx1MjAxMGxldmVsIGZpbHRlciBjaGVja2JveGVzOlxuICAgIHByaXZhdGUgcGx1Z2luQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBkZW1vQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzZXR0aW5nc0NoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgIHN1cGVyKGFwcCk7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KCdDdXN0b20gSW5zdGFsbCcpO1xuICAgIFxuICAgICAgY29uc3QgZGVzY3JpcHRpb25FbCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgZGVzY3JpcHRpb25FbC50ZXh0Q29udGVudCA9ICdBbGwgY2hlY2tlZCBpdGVtcyB3aWxsIGJlIGluc3RhbGxlZC4gRGVwZW5kZW5jaWVzIHdpbGwgYmUgbWFuYWdlZCBhdXRvbWF0aWNhbGx5Lic7XG4gICAgICBkZXNjcmlwdGlvbkVsLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgbWFyZ2luLXRvcDogMC4yNWVtO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjc1ZW07XG4gICAgICBgO1xuXG4gICAgICAvL1xuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIChBKSBTSU5HTEUgU0NST0xMQUJMRSBCT1ggRk9SIFx1MjAxQ09QVElPTlMgKyBUUkVFXHUyMDFEIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgLy9cbiAgICAgIGNvbnN0IG9wdGlvbnNCb3ggPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24ob3B0aW9uc0JveC5zdHlsZSwge1xuICAgICAgICBtYXhIZWlnaHQ6ICc0ODBweCcsICAgICAgICAgICAgICAgLy8gRW5vdWdoIHNwYWNlIGZvciBjaGVja2JveGVzICsgdHJlZVxuICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJywgICAgICAgICAgICAgICAgLy8gRXZlcnl0aGluZyBpbnNpZGUgb3B0aW9uc0JveCB3aWxsIHNjcm9sbFxuICAgICAgICBtYXJnaW46ICcwLjVlbSAwJyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgcGFkZGluZzogJzAuNWVtJyxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy9cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCAoQTEpIFx1MjAxQ0luY2x1ZGUgXHUyMDI2XHUyMDFEIENIRUNLQk9YRVMgQVQgVEhFIFRPUCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICAvLyBXZSBjcmVhdGUgb25lIHNtYWxsIFx1MjAxQ2NoZWNrYm94IHBhbmVsXHUyMDFEIHRoYXQgc2l0cyBhdCB0aGUgdG9wIG9mIG9wdGlvbnNCb3guXG4gICAgICBjb25zdCBjaGVja2JveFNlY3Rpb24gPSBvcHRpb25zQm94LmNyZWF0ZURpdigpO1xuICAgICAgT2JqZWN0LmFzc2lnbihjaGVja2JveFNlY3Rpb24uc3R5bGUsIHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcbiAgICAgICAgZ2FwOiAnMC41ZW0nLFxuICAgICAgICBtYXJnaW5Cb3R0b206ICcwLjc1ZW0nLFxuICAgICAgfSk7XG4gICAgXG4gICAgICAvLyAxKSBcdTIwMUNJbmNsdWRlIFBsdWdpbnNcdTIwMURcbiAgICAgIGNvbnN0IHBsdWdpblJvdyA9IGNoZWNrYm94U2VjdGlvbi5jcmVhdGVEaXYoKTtcbiAgICAgIHBsdWdpblJvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgcGx1Z2luUm93LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcbiAgICAgIHRoaXMucGx1Z2luQ2hlY2tib3ggPSBwbHVnaW5Sb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICB0aGlzLnBsdWdpbkNoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgdGhpcy5wbHVnaW5DaGVja2JveC5pZCA9ICd2dnVuZGVybG9yZS1jaGVja2JveC1wbHVnaW5zJztcbiAgICAgIHRoaXMucGx1Z2luQ2hlY2tib3guc3R5bGUubWFyZ2luUmlnaHQgPSAnMC41ZW0nO1xuICAgICAgcGx1Z2luUm93LmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgICAgdGV4dDogJ0NvbW11bml0eSBQbHVnaW5zJyxcbiAgICAgICAgYXR0cjogeyBmb3I6IHRoaXMucGx1Z2luQ2hlY2tib3guaWQgfSxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy8gMikgXHUyMDFDSW5jbHVkZSBEZW1vIEZpbGVzXHUyMDFEXG4gICAgICBjb25zdCBkZW1vUm93ID0gY2hlY2tib3hTZWN0aW9uLmNyZWF0ZURpdigpO1xuICAgICAgZGVtb1Jvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgZGVtb1Jvdy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICB0aGlzLmRlbW9DaGVja2JveCA9IGRlbW9Sb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICB0aGlzLmRlbW9DaGVja2JveC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgIHRoaXMuZGVtb0NoZWNrYm94LmlkID0gJ3Z2dW5kZXJsb3JlLWNoZWNrYm94LWRlbW8nO1xuICAgICAgdGhpcy5kZW1vQ2hlY2tib3guc3R5bGUubWFyZ2luUmlnaHQgPSAnMC41ZW0nO1xuICAgICAgZGVtb1Jvdy5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICAgIHRleHQ6ICdWVnVuZGVybG9yZSBEZW1vIEZpbGVzJyxcbiAgICAgICAgYXR0cjogeyBmb3I6IHRoaXMuZGVtb0NoZWNrYm94LmlkIH0sXG4gICAgICB9KTtcbiAgICBcbiAgICAgIC8vIDMpIFx1MjAxQ0luY2x1ZGUgVmF1bHQgU2V0dGluZ3MgKGhvdGtleXMsIGV0Yy4pXHUyMDFEXG4gICAgICBjb25zdCBzZXR0aW5nc1JvdyA9IGNoZWNrYm94U2VjdGlvbi5jcmVhdGVEaXYoKTtcbiAgICAgIHNldHRpbmdzUm93LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICBzZXR0aW5nc1Jvdy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICB0aGlzLnNldHRpbmdzQ2hlY2tib3ggPSBzZXR0aW5nc1Jvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgIHRoaXMuc2V0dGluZ3NDaGVja2JveC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgIHRoaXMuc2V0dGluZ3NDaGVja2JveC5pZCA9ICd2dnVuZGVybG9yZS1jaGVja2JveC1zZXR0aW5ncyc7XG4gICAgICB0aGlzLnNldHRpbmdzQ2hlY2tib3guc3R5bGUubWFyZ2luUmlnaHQgPSAnMC41ZW0nO1xuICAgICAgc2V0dGluZ3NSb3cuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgICB0ZXh0OiAnVmF1bHQgU2V0dGluZ3MgKGFwcGVyYW5jZSwgaG90a2V5cywgZ3JhcGggc2V0dXAsIGV0Yy4pJyxcbiAgICAgICAgYXR0cjogeyBmb3I6IHRoaXMuc2V0dGluZ3NDaGVja2JveC5pZCB9LFxuICAgICAgfSk7XG4gICAgXG4gICAgICAvL1xuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIChBMikgVEhJTiBESVZJREVSIExJTkUgQkVUV0VFTiBDSEVDS0JPWEVTIEFORCBUUkVFIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgLy9cbiAgICAgIGNvbnN0IGRpdmlkZXIgPSBvcHRpb25zQm94LmNyZWF0ZURpdigpO1xuICAgICAgT2JqZWN0LmFzc2lnbihkaXZpZGVyLnN0eWxlLCB7XG4gICAgICAgIGJvcmRlclRvcDogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG4gICAgICAgIG1hcmdpbjogJzAuNWVtIDAnLFxuICAgICAgfSk7XG4gICAgXG4gICAgICAvL1xuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIChBMykgTUFOSUZFU1QgVFJFRSBSRU5ERVJFRCBCRUxPVyBUSEUgRElWSURFUiBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICBjb25zdCBjb250YWluZXIgPSBvcHRpb25zQm94LmNyZWF0ZURpdigpO1xuICAgICAgT2JqZWN0LmFzc2lnbihjb250YWluZXIuc3R5bGUsIHtcbiAgICAgICAgLy8gV2Ugbm8gbG9uZ2VyIGdpdmUgdGhpcyBpbm5lciBkaXYgaXRzIG93biBzY3JvbGxiYXIuXG4gICAgICAgIC8vIEluc3RlYWQsIGNvbnRhaW5lciB3aWxsIGV4cGFuZCBpbnNpZGUgb3B0aW9uc0JveCwgYW5kXG4gICAgICAgIC8vIG9wdGlvbnNCb3ggd2lsbCBzY3JvbGwgZXZlcnl0aGluZyAoY2hlY2tib3hlcyArIHRyZWUpIHRvZ2V0aGVyLlxuICAgICAgICBtYXJnaW46ICcwJyxcbiAgICAgICAgcGFkZGluZzogJzAnLFxuICAgICAgICBib3JkZXI6ICdub25lJyxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgY29uc3QgSU5ERU5UX1BYID0gMTY7XG4gICAgICBjb25zdCBsb29rdXBFbnRyeSA9IChmdWxsUGF0aDogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5maW5kKChmKSA9PiBmLnBhdGggPT09IGZ1bGxQYXRoKSB8fFxuICAgICAgICAgIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoKGYpID0+IGYucGF0aCA9PT0gZnVsbFBhdGgpXG4gICAgICAgICk7XG4gICAgICB9O1xuICAgIFxuICAgICAgLy8gUmVyZW5kZXIgbG9naWMgZm9yIHRoZSB0cmVlOyBoaWRlcyBvcHRpb25hbCBpdGVtcyBpZiB0aGUgZGVtb0NoZWNrYm94IGlzIHVuY2hlY2tlZFxuICAgICAgY29uc3QgcmVuZGVyVHJlZSA9ICgpID0+IHtcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgIHRoaXMuY2hlY2tib3hNYXAgPSB7fTtcbiAgICAgICAgdGhpcy5jdXJyZW50QmF0Y2hMaW5lcyA9IFtdO1xuICAgIFxuICAgICAgICBjb25zdCBkZW1vQWxsb3dlZCA9IHRoaXMuZGVtb0NoZWNrYm94LmNoZWNrZWQ7XG4gICAgXG4gICAgICAgIGNvbnN0IHJlbmRlck5vZGUgPSAobm9kZTogVHJlZU5vZGUsIHBhcmVudEVsOiBIVE1MRWxlbWVudCwgaW5kZW50ID0gMCkgPT4ge1xuICAgICAgICAgIC8vIElmIHRoaXMgbm9kZSBjb3JyZXNwb25kcyB0byBhIG1hbmlmZXN0IGVudHJ5OlxuICAgICAgICAgIGlmIChub2RlLmZ1bGxQYXRoKSB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IGxvb2t1cEVudHJ5KG5vZGUuZnVsbFBhdGgpO1xuICAgICAgICAgICAgaWYgKGVudHJ5ICYmIGVudHJ5Lm9wdGlvbmFsICYmICFkZW1vQWxsb3dlZCkge1xuICAgICAgICAgICAgICAvLyBTa2lwIG9wdGlvbmFsIGRlbW8gaXRlbXMgd2hlbiBcdTIwMUNJbmNsdWRlIERlbW8gRmlsZXNcdTIwMUQgaXMgZmFsc2VcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICBpZiAobm9kZS5pc0ZvbGRlcikge1xuICAgICAgICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZPTERFUiBDQVNFIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgICAgICAgY29uc3QgZGV0YWlscyA9IHBhcmVudEVsLmNyZWF0ZUVsKCdkZXRhaWxzJyk7XG4gICAgICAgICAgICBkZXRhaWxzLm9wZW4gPSB0cnVlO1xuICAgICAgICAgICAgZGV0YWlscy5zdHlsZS5tYXJnaW4gPSAnNHB4IDAnO1xuICAgIFxuICAgICAgICAgICAgY29uc3Qgc3VtbWFyeSA9IGRldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc3VtbWFyeS5zdHlsZSwge1xuICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiBgJHtpbmRlbnQgKiBJTkRFTlRfUFh9cHhgLFxuICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgICAgICAgcGFkZGluZzogJzJweCA2cHgnLFxuICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLFxuICAgICAgICAgICAgICB1c2VyU2VsZWN0OiAnbm9uZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN1bW1hcnkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgc3VtbWFyeS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3ZlciknO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdW1tYXJ5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHN1bW1hcnkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgLy8gKDEpIEZvbGRlciBjaGVja2JveFxuICAgICAgICAgICAgY29uc3QgY2IgPSBzdW1tYXJ5LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgY2Iuc3R5bGUubWFyZ2luUmlnaHQgPSAnMC41ZW0nO1xuICAgICAgICAgICAgY2IuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICBjYi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICB0aGlzLmNoZWNrYm94TWFwW25vZGUuZnVsbFBhdGhdID0gY2I7XG4gICAgXG4gICAgICAgICAgICAvLyAoMikgRm9sZGVyIGljb25cbiAgICAgICAgICAgIGNvbnN0IGljb25FbCA9IHN1bW1hcnkuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi1pY29uJyB9KTtcbiAgICAgICAgICAgIHNldEljb24oaWNvbkVsLCAnZm9sZGVyJyk7XG4gICAgICAgICAgICBpY29uRWwuc3R5bGUubWFyZ2luUmlnaHQgPSAnMC4zZW0nO1xuICAgICAgICAgICAgaWNvbkVsLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgwLjkpJztcbiAgICAgICAgICAgIGljb25FbC5zdHlsZS5vcGFjaXR5ID0gJzAuNzUnO1xuICAgIFxuICAgICAgICAgICAgLy8gKDMpIEZvbGRlciBsYWJlbFxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBzdW1tYXJ5LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBub2RlLm5hbWUgfSk7XG4gICAgICAgICAgICBsYWJlbC5zdHlsZS5mb250V2VpZ2h0ID0gJzYwMCc7XG4gICAgICAgICAgICBsYWJlbC5zdHlsZS5mb250U2l6ZSA9ICcwLjk1ZW0nO1xuICAgIFxuICAgICAgICAgICAgLy8gKDQpIFdoZW4gZm9sZGVyXHUyMDEwY2hlY2tib3ggdG9nZ2xlczpcbiAgICAgICAgICAgIGNiLm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnRvZ2dsZURlc2NlbmRhbnRzKG5vZGUsIGNiLmNoZWNrZWQpO1xuICAgICAgICAgICAgICB0aGlzLmVuZm9yY2VEZXBlbmRlbmNpZXMobm9kZS5mdWxsUGF0aCwgY2IuY2hlY2tlZCk7XG4gICAgICAgICAgICAgIHRoaXMuZmFkZUFsbEV4Y2VwdEN1cnJlbnRCYXRjaCgpO1xuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgIC8vICg1KSBSZWN1cnNlIGludG8gY2hpbGRyZW5cbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuQ29udGFpbmVyID0gZGV0YWlscy5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIGNoaWxkcmVuQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICc0cHgnO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZE5hbWUgb2YgT2JqZWN0LmtleXMobm9kZS5jaGlsZHJlbikuc29ydCgpKSB7XG4gICAgICAgICAgICAgIHJlbmRlck5vZGUobm9kZS5jaGlsZHJlbltjaGlsZE5hbWVdLCBjaGlsZHJlbkNvbnRhaW5lciwgaW5kZW50ICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGSUxFIENBU0UgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAgICAgICBjb25zdCByb3cgPSBwYXJlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocm93LnN0eWxlLCB7XG4gICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IGAke2luZGVudCAqIElOREVOVF9QWH1weGAsXG4gICAgICAgICAgICAgIHBhZGRpbmc6ICcycHggNnB4JyxcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgICAgICAgbWFyZ2luVG9wOiAnMnB4JyxcbiAgICAgICAgICAgICAgbWFyZ2luQm90dG9tOiAnMnB4JyxcbiAgICAgICAgICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgcm93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKSc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgICByb3cuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgLy8gKDEpIEZpbGUgY2hlY2tib3hcbiAgICAgICAgICAgIGNvbnN0IGNiID0gcm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgY2Iuc3R5bGUubWFyZ2luUmlnaHQgPSAnMC41ZW0nO1xuICAgICAgICAgICAgY2IuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICBjYi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICB0aGlzLmNoZWNrYm94TWFwW25vZGUuZnVsbFBhdGhdID0gY2I7XG4gICAgXG4gICAgICAgICAgICAvLyAoMikgRmlsZSBpY29uXG4gICAgICAgICAgICBjb25zdCBpY29uRWwgPSByb3cuY3JlYXRlRGl2KHsgY2xzOiAnc3VnZ2VzdGlvbi1pY29uJyB9KTtcbiAgICAgICAgICAgIHNldEljb24oaWNvbkVsLCAnZG9jdW1lbnQnKTtcbiAgICAgICAgICAgIGljb25FbC5zdHlsZS5tYXJnaW5SaWdodCA9ICcwLjNlbSc7XG4gICAgICAgICAgICBpY29uRWwuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDAuOCknO1xuICAgICAgICAgICAgaWNvbkVsLnN0eWxlLm9wYWNpdHkgPSAnMC41JztcbiAgICBcbiAgICAgICAgICAgIC8vICgzKSBGaWxlIGxhYmVsXG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IHJvdy5jcmVhdGVFbCgnbGFiZWwnLCB7IHRleHQ6IG5vZGUubmFtZSB9KTtcbiAgICAgICAgICAgIGxhYmVsLnN0eWxlLmZvbnRTaXplID0gJzAuOWVtJztcbiAgICBcbiAgICAgICAgICAgIC8vICg0KSBXaGVuIGZpbGVcdTIwMTBjaGVja2JveCB0b2dnbGVzOlxuICAgICAgICAgICAgY2Iub25jaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuZW5mb3JjZURlcGVuZGVuY2llcyhub2RlLmZ1bGxQYXRoLCBjYi5jaGVja2VkKTtcbiAgICAgICAgICAgICAgdGhpcy5mYWRlQWxsRXhjZXB0Q3VycmVudEJhdGNoKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLy8gS2ljayBvZmYgcmVjdXJzaW9uIGF0IHJvb3RcbiAgICAgICAgZm9yIChjb25zdCB0b3BOYW1lIG9mIE9iamVjdC5rZXlzKHJvb3QuY2hpbGRyZW4pLnNvcnQoKSkge1xuICAgICAgICAgIHJlbmRlck5vZGUocm9vdC5jaGlsZHJlblt0b3BOYW1lXSwgY29udGFpbmVyLCAwKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICBcbiAgICAgIC8vIEZpcnN0IGRyYXcgb2YgdGhlIHRyZWUgKGJlbG93IHRoZSBkaXZpZGVyKVxuICAgICAgcmVuZGVyVHJlZSgpO1xuICAgIFxuICAgICAgLy9cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCAoQikgREVQRU5ERU5DWSBDT05TT0xFIEJFTE9XIFRIRSBTQ1JPTExBQkxFIE9QVElPTlMgQk9YIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgLy9cbiAgICAgIHRoaXMuY29uc29sZUVsID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY3VzdG9tLWNvbnNvbGUnIH0pO1xuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmNvbnNvbGVFbC5zdHlsZSwge1xuICAgICAgICBoZWlnaHQ6ICcxNDBweCcsXG4gICAgICAgIG1hcmdpbjogJzAuNWVtIDAnLFxuICAgICAgICBwYWRkaW5nOiAnOHB4JyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgZm9udEZhbWlseTogJ21vbm9zcGFjZScsXG4gICAgICAgIGZvbnRTaXplOiAnMC44MmVtJyxcbiAgICAgICAgbGluZUhlaWdodDogJzEuNGVtJyxcbiAgICAgICAgY29sb3I6ICd2YXIoLS10ZXh0LW5vcm1hbCknLFxuICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgICAgd2hpdGVTcGFjZTogJ3ByZS13cmFwJyxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSB0aGlzLmNvbnNvbGVFbC5jcmVhdGVEaXYoe1xuICAgICAgICB0ZXh0OiAnPiBEZXBlbmRlbmN5IGVycm9ycyBhbmQgd2FybmluZ3Mgd2lsbCBhcHBlYXIgaGVyZVx1MjAyNicsXG4gICAgICB9KTtcbiAgICAgIE9iamVjdC5hc3NpZ24ocGxhY2Vob2xkZXIuc3R5bGUsIHtcbiAgICAgICAgb3BhY2l0eTogJzAuNCcsXG4gICAgICAgIGZvbnRTdHlsZTogJ2l0YWxpYycsXG4gICAgICAgIG1hcmdpbkJvdHRvbTogJzRweCcsXG4gICAgICB9KTtcbiAgICBcbiAgICAgIC8vXG4gICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgKEMpIEVWRU5UIEhBTkRMRVJTIEZPUiBUSEUgVEhSRUUgQ0hFQ0tCT1hFUyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICAvLyAxKSBcdTIwMUNJbmNsdWRlIFBsdWdpbnNcdTIwMUQgdG9nZ2xlZFxuICAgICAgdGhpcy5wbHVnaW5DaGVja2JveC5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgV0FSTklOR19DTEFTUyA9ICd2dnVuZGVybG9yZS13YXJuaW5nJztcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbkNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgICAgICAvLyBJZiBjb25zb2xlIG9ubHkgaGFzIHRoZSBwbGFjZWhvbGRlciwgY2xlYXIgaXRcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmNvbnNvbGVFbC5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICAgICh0aGlzLmNvbnNvbGVFbC5jaGlsZHJlblswXSBhcyBIVE1MRWxlbWVudCkudGV4dENvbnRlbnQ/LnN0YXJ0c1dpdGgoXG4gICAgICAgICAgICAgICc+IERlcGVuZGVuY3kgY29uc29sZSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuY29uc29sZUVsLmVtcHR5KCk7XG4gICAgICAgICAgfVxuICAgIFxuICAgICAgICAgIC8vIEFkZCBhIHJlZCB3YXJuaW5nIGxpbmVcbiAgICAgICAgICBjb25zdCB3YXJuaW5nTGluZSA9IHRoaXMuY29uc29sZUVsLmNyZWF0ZURpdih7XG4gICAgICAgICAgICB0ZXh0OlxuICAgICAgICAgICAgICAnV0FSTklORzogVGhlIFZWdW5kZXJsb3JlIFRvb2xraXQgd2lsbCBub3QgZnVuY3Rpb24gd2l0aG91dCBhbGwgaW5jbHVkZWQgcGx1Z2lucyEgWW91IHByb2JhYmx5IHdhbnQgdG8gcmUtY2hlY2sgdGhhdCBvbmUuJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB3YXJuaW5nTGluZS5hZGRDbGFzcyhXQVJOSU5HX0NMQVNTKTtcbiAgICAgICAgICB3YXJuaW5nTGluZS5zdHlsZS5jb2xvciA9ICcjRkYwMDAwJztcbiAgICBcbiAgICAgICAgICAvLyBTY3JvbGwgY29uc29sZSB0byBib3R0b21cbiAgICAgICAgICB0aGlzLmNvbnNvbGVFbC5zY3JvbGxUb3AgPSB0aGlzLmNvbnNvbGVFbC5zY3JvbGxIZWlnaHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmVtb3ZlIG9ubHkgb3VyIHdhcm5pbmcgbGluZXMgKGxlYXZlIGFueSBvdGhlciBtZXNzYWdlcyBhbG9uZSlcbiAgICAgICAgICBjb25zdCBleGlzdGluZ1dhcm5pbmdzID0gdGhpcy5jb25zb2xlRWwucXVlcnlTZWxlY3RvckFsbChgLiR7V0FSTklOR19DTEFTU31gKTtcbiAgICAgICAgICBleGlzdGluZ1dhcm5pbmdzLmZvckVhY2goKGVsKSA9PiBlbC5yZW1vdmUoKSk7XG4gICAgXG4gICAgICAgICAgLy8gSWYgY29uc29sZSBpcyBub3cgZW1wdHksIHJlXHUyMDEwaW5zZXJ0IHRoZSBwbGFjZWhvbGRlclxuICAgICAgICAgIGlmICh0aGlzLmNvbnNvbGVFbC5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHBoID0gdGhpcy5jb25zb2xlRWwuY3JlYXRlRGl2KHtcbiAgICAgICAgICAgICAgdGV4dDogJz4gRGVwZW5kZW5jeSBjb25zb2xlIG91dHB1dCB3aWxsIGFwcGVhciBoZXJlXHUyMDI2JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihwaC5zdHlsZSwge1xuICAgICAgICAgICAgICBvcGFjaXR5OiAnMC40JyxcbiAgICAgICAgICAgICAgZm9udFN0eWxlOiAnaXRhbGljJyxcbiAgICAgICAgICAgICAgbWFyZ2luQm90dG9tOiAnNHB4JyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAvLyBTY3JvbGwgdG8gYm90dG9tIGFnYWluXG4gICAgICAgICAgdGhpcy5jb25zb2xlRWwuc2Nyb2xsVG9wID0gdGhpcy5jb25zb2xlRWwuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIFxuICAgICAgLy8gMikgXHUyMDFDSW5jbHVkZSBEZW1vIEZpbGVzXHUyMDFEIHRvZ2dsZWRcbiAgICAgIHRoaXMuZGVtb0NoZWNrYm94Lm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICByZW5kZXJUcmVlKCk7XG4gICAgICB9O1xuICAgIFxuICAgICAgLy8gMykgXHUyMDFDSW5jbHVkZSBWYXVsdCBTZXR0aW5nc1x1MjAxRCB0b2dnbGVkXG4gICAgICAvLyAobm8gbmVlZCB0byByZS1yZW5kZXIgdGhlIHRyZWUsIHNpbmNlIHZhdWx0IHNldHRpbmdzIGFyZW5cdTIwMTl0IGluIHRoZSBtYW5pZmVzdCB0cmVlKVxuICAgIFxuICAgICAgLy9cbiAgICAgIGNvbnN0IGJ1dHRvblJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgT2JqZWN0LmFzc2lnbihidXR0b25Sb3cuc3R5bGUsIHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLCAgIC8vIHB1c2ggbGVmdCB2cyByaWdodFxuICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgcGFkZGluZ1RvcDogJzhweCcsXG4gICAgICAgIGJvcmRlclRvcDogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG4gICAgICAgIG1hcmdpblRvcDogJzhweCcsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gMSkgXHUyMDFDUmVzZXQgU2VsZWN0aW9uXHUyMDFEIG9uIHRoZSBMRUZUXG4gICAgICBjb25zdCByZXNldEJ0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnUmVzZXQgU2VsZWN0aW9uJyB9KTtcbiAgICAgIHJlc2V0QnRuLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIGZvbnQtc2l6ZTogMC45ZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICBgO1xuICAgICAgcmVzZXRCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgLy8gMSkgR2F0aGVyIGFueSBleGlzdGluZyBXQVJOSU5HIGxpbmVzXG4gICAgICAgIGNvbnN0IHdhcm5pbmdzID0gQXJyYXkuZnJvbShcbiAgICAgICAgICB0aGlzLmNvbnNvbGVFbC5xdWVyeVNlbGVjdG9yQWxsKCcudnZ1bmRlcmxvcmUtd2FybmluZycpXG4gICAgICAgICkgYXMgSFRNTEVsZW1lbnRbXTtcbiAgICAgIFxuICAgICAgICAvLyAyKSBXaXBlIG91dCB0aGUgY29uc29sZSBlbnRpcmVseSAodGhpcyByZW1vdmVzIGFsbCBkZXBlbmRlbmN5IGxpbmVzKVxuICAgICAgICB0aGlzLmNvbnNvbGVFbC5lbXB0eSgpO1xuICAgICAgXG4gICAgICAgIC8vIDMpIFJlXHUyMDEwYXBwZW5kIGVhY2ggcGx1Z2luXHUyMDEwd2FybmluZyBiYWNrIGludG8gdGhlIGNvbnNvbGVcbiAgICAgICAgd2FybmluZ3MuZm9yRWFjaCgod2FybmluZ0VsKSA9PiB7XG4gICAgICAgICAgdGhpcy5jb25zb2xlRWwuYXBwZW5kQ2hpbGQod2FybmluZ0VsKTtcbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgICAgLy8gNCkgUmVcdTIwMTBjaGVjayBldmVyeSBzaW5nbGUgbWFuaWZlc3RcdTIwMTB0cmVlIGNoZWNrYm94XG4gICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5jaGVja2JveE1hcCkuZm9yRWFjaCgoY2IpID0+IHtcbiAgICAgICAgICBjYi5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgXG4gICAgICBcbiAgICAgIC8vIDIpIENyZWF0ZSBhIHJpZ2h0XHUyMDEwYWxpZ25lZCBzdWJcdTIwMTBjb250YWluZXIgZm9yIFx1MjAxQ0luc3RhbGwgU2VsZWN0ZWRcdTIwMUQgKyBcdTIwMUNDYW5jZWxcdTIwMURcbiAgICAgIGNvbnN0IHJpZ2h0R3JvdXAgPSBidXR0b25Sb3cuY3JlYXRlRGl2KCk7XG4gICAgICBPYmplY3QuYXNzaWduKHJpZ2h0R3JvdXAuc3R5bGUsIHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBnYXA6ICcwLjVlbScsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gMmEpIFx1MjAxQ0luc3RhbGwgU2VsZWN0ZWRcdTIwMUQgKHByaW1hcnkgQ1RBKVxuICAgICAgY29uc3QgaW5zdGFsbEJ0biA9IHJpZ2h0R3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgdGV4dDogJ0luc3RhbGwgU2VsZWN0ZWQnLFxuICAgICAgICBjbHM6ICdtb2QtY3RhJyxcbiAgICAgIH0pO1xuICAgICAgaW5zdGFsbEJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBpbnN0YWxsQnRuLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnJyk7XG4gICAgICBcbiAgICAgICAgLy8gKGkpIENsb3NlIHRoaXMgY3VzdG9tXHUyMDEwaW5zdGFsbCBtb2RhbFxuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICBcbiAgICAgICAgLy8gKGlpKSBTaG93IFx1MjAxQ0luc3RhbGxpbmdcdTIwMjZcdTIwMUQgcGxhY2Vob2xkZXJcbiAgICAgICAgY29uc3QgaW5zdGFsbGluZyA9IG5ldyBJbnN0YWxsaW5nTW9kYWwoYXBwKTtcbiAgICAgICAgaW5zdGFsbGluZy5vcGVuKCk7XG4gICAgICBcbiAgICAgICAgLy8gKGlpaSkgR2F0aGVyIGFsbCBjaGVja2VkIG1hbmlmZXN0IGVudHJpZXNcbiAgICAgICAgY29uc3QgdG9JbnN0YWxsOiB7IHBhdGg6IHN0cmluZzsgaXNGb2xkZXI6IGJvb2xlYW4gfVtdID0gW107XG4gICAgICAgIGZvciAoY29uc3QgW2ZwLCBjaGVja2JveF0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5jaGVja2JveE1hcCkpIHtcbiAgICAgICAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgICAgICAgY29uc3QgaXNGb2xkZXIgPSBwbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzLnNvbWUoKGYpID0+IGYucGF0aCA9PT0gZnApO1xuICAgICAgICAgICAgdG9JbnN0YWxsLnB1c2goeyBwYXRoOiBmcCwgaXNGb2xkZXIgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBcbiAgICAgICAgLy8gKGl2KSBJZiBcdTIwMUNJbmNsdWRlIFBsdWdpbnNcdTIwMUQgaXMgY2hlY2tlZCBcdTIxOTIgcHVsbCBkb3duIGAub2JzaWRpYW4vcGx1Z2luc2AgKyBgY29tbXVuaXR5LXBsdWdpbnMuanNvbmBcbiAgICAgICAgLy8gKGl2KSBJZiBcdTIwMUNJbmNsdWRlIFBsdWdpbnNcdTIwMUQgaXMgY2hlY2tlZCBcdTIxOTIgZmV0Y2ggdGhlIEdpdEh1Yi1zaWRlIC5vYnNpZGlhbi9wbHVnaW5zIGFuZCBvbmx5IGVucXVldWVcbi8vICAgICB0aG9zZSBmb2xkZXJzL2ZpbGVzIHRoYXQgYXJlblx1MjAxOXQgYWxyZWFkeSBpbiB0aGUgdmF1bHQuXG5pZiAodGhpcy5wbHVnaW5DaGVja2JveC5jaGVja2VkKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYXBpVXJsID1cbiAgICAgICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvY29udGVudHMvLm9ic2lkaWFuL3BsdWdpbnM/cmVmPW1haW4nO1xuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgIGlmIChyZXNwLm9rKSB7XG4gICAgICBjb25zdCBwbHVnaW5GaWxlczogQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6ICdmaWxlJyB8ICdkaXInIH0+ID0gYXdhaXQgcmVzcC5qc29uKCk7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcGx1Z2luRmlsZXMpIHtcbiAgICAgICAgY29uc3QgbG9jYWxQYXRoID0gYC5vYnNpZGlhbi9wbHVnaW5zLyR7aXRlbS5uYW1lfWA7XG4gICAgICAgIC8vIElmIHRoYXQgcGx1Z2luIGZvbGRlciAob3IgZmlsZSkgZG9lcyBfbm90XyBhbHJlYWR5IGV4aXN0IGluIHRoZSB2YXVsdCwgZW5xdWV1ZSBpdDpcbiAgICAgICAgY29uc3QgZXhpc3RzTG9jYWxseSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGxvY2FsUGF0aCk7XG4gICAgICAgIGlmICghZXhpc3RzTG9jYWxseSkge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdkaXInKSB7XG4gICAgICAgICAgICB0b0luc3RhbGwucHVzaCh7IHBhdGg6IGxvY2FsUGF0aCwgaXNGb2xkZXI6IHRydWUgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvSW5zdGFsbC5wdXNoKHsgcGF0aDogbG9jYWxQYXRoLCBpc0ZvbGRlcjogZmFsc2UgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGVudW1lcmF0ZSAub2JzaWRpYW4vcGx1Z2lucyBmcm9tIEdpdEh1YjonLCBlKTtcbiAgfVxuXG4gIC8vIEV2ZW4gaWYgY29tbXVuaXR5LXBsdWdpbnMuanNvbiBhbHJlYWR5IGV4aXN0cywgeW91IG1pZ2h0IHdhbnQgdG8gb3ZlcndyaXRlIGl0LFxuICAvLyBvciB5b3UgY2FuIGFsc28gY2hlY2sgYWRhcHRlci5leGlzdHMoLi4uKSBiZWZvcmUgcHVzaGluZyBpdC4gRXhhbXBsZSBhbHdheXMgb3ZlcndyaXRlczpcbiAgdG9JbnN0YWxsLnB1c2goeyBwYXRoOiAnLm9ic2lkaWFuL2NvbW11bml0eS1wbHVnaW5zLmpzb24nLCBpc0ZvbGRlcjogZmFsc2UgfSk7XG59XG5cbiAgICAgIFxuICAgICAgICAvLyAodikgSWYgXHUyMDFDSW5jbHVkZSBWYXVsdCBTZXR0aW5nc1x1MjAxRCBpcyBjaGVja2VkIFx1MjE5MiBhZGQgdGhlIGZvdXIgSlNPTiBmaWxlcyB1bmRlciBgLm9ic2lkaWFuL2BcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3NDaGVja2JveC5jaGVja2VkKSB7XG4gICAgICAgICAgY29uc3QgdmF1bHRTZXR0aW5nc1BhdGhzID0gW1xuICAgICAgICAgICAgJy5vYnNpZGlhbi9hcHAuanNvbicsXG4gICAgICAgICAgICAnLm9ic2lkaWFuL2FwcGVhcmFuY2UuanNvbicsXG4gICAgICAgICAgICAnLm9ic2lkaWFuL2dyYXBoLmpzb24nLFxuICAgICAgICAgICAgJy5vYnNpZGlhbi9ob3RrZXlzLmpzb24nLFxuICAgICAgICAgIF07XG4gICAgICAgICAgZm9yIChjb25zdCB2cyBvZiB2YXVsdFNldHRpbmdzUGF0aHMpIHtcbiAgICAgICAgICAgIHRvSW5zdGFsbC5wdXNoKHsgcGF0aDogdnMsIGlzRm9sZGVyOiBmYWxzZSB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIFxuICAgICAgICAvLyAodmkpIFBlcmZvcm0gdGhlIGFjdHVhbCBpbnN0YWxsXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgcGx1Z2luLnBlcmZvcm1DdXN0b21JbnN0YWxsKHRvSW5zdGFsbCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBwZXJmb3JtQ3VzdG9tSW5zdGFsbCgpIHRocmV3OicsIGVycik7XG4gICAgICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIEN1c3RvbSBpbnN0YWxsIGZhaWxlZFx1MjAxNHNlZSBjb25zb2xlJyk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgaW5zdGFsbGluZy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyAyYikgXHUyMDFDQ2FuY2VsXHUyMDFEIG9uIHRoZSByaWdodFxuICAgICAgY29uc3QgY2FuY2VsQnRuID0gcmlnaHRHcm91cC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcbiAgICAgIGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgICBcblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cblxuICAgIC8qKiBSZWN1cnNpdmVseSB0b2dnbGUgZGVzY2VuZGFudHNcdTIwMTkgY2hlY2tlZFx1MjAxMHN0YXRlIHdpdGhvdXQgbG9nZ2luZyBlYWNoIG9uZS4gKi9cbiAgICBwcml2YXRlIHRvZ2dsZURlc2NlbmRhbnRzKG5vZGU6IFRyZWVOb2RlLCBjaGVja2VkOiBib29sZWFuKSB7XG4gICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIE9iamVjdC52YWx1ZXMobm9kZS5jaGlsZHJlbikpIHtcbiAgICAgICAgY29uc3QgY2IgPSB0aGlzLmNoZWNrYm94TWFwW2NoaWxkLmZ1bGxQYXRoXTtcbiAgICAgICAgaWYgKGNiKSBjYi5jaGVja2VkID0gY2hlY2tlZDtcbiAgICAgICAgaWYgKGNoaWxkLmlzRm9sZGVyKSB7XG4gICAgICAgICAgdGhpcy50b2dnbGVEZXNjZW5kYW50cyhjaGlsZCwgY2hlY2tlZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmZvcmNlIGRlcGVuZGVuY3kgbG9naWMgKGF1dG9cdTIwMTBjaGVjayBwcmVyZXF1aXNpdGVzLCBhdXRvXHUyMDEwdW5jaGVjayBkZXBlbmRlbnRzKS5cbiAgICAgKiBFYWNoIHRpbWUgd2UgZmxpcCBhIGJveCBcdTIwMUNiZWNhdXNlIG9mIGEgZGVwZW5kZW5jeSxcdTIwMUQgd2UgbG9nIG9uZSBsaW5lIHRvIHRoZSBjb25zb2xlLlxuICAgICAqL1xuICAgIHByaXZhdGUgZW5mb3JjZURlcGVuZGVuY2llcyhjaGFuZ2VkUGF0aDogc3RyaW5nLCBpc0NoZWNrZWQ6IGJvb2xlYW4pIHtcbiAgICAgIGNvbnN0IGNoYW5nZWRLZXkgPSBmdWxsUGF0aFRvS2V5W2NoYW5nZWRQYXRoXTtcbiAgICAgIGlmICghY2hhbmdlZEtleSkgcmV0dXJuO1xuXG4gICAgICAvLyBCdWlsZCBhIHF1aWNrIG1hcDogZnVsbFBhdGggXHUyMTkyIGRpc3BsYXlOYW1lXG4gICAgICBjb25zdCBmdWxsUGF0aFRvRGlzcGxheTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgICAgZm9yIChjb25zdCBmIG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgZnVsbFBhdGhUb0Rpc3BsYXlbZi5wYXRoXSA9IGYuZGlzcGxheU5hbWUgPz8gZi5wYXRoLnNwbGl0KCcvJykucG9wKCkhO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmIG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgICAgIGZ1bGxQYXRoVG9EaXNwbGF5W2YucGF0aF0gPSBmLmRpc3BsYXlOYW1lID8/IGYucGF0aC5zcGxpdCgnLycpLnBvcCgpITtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNoYW5nZWROYW1lID0gZnVsbFBhdGhUb0Rpc3BsYXlbY2hhbmdlZFBhdGhdID8/IGNoYW5nZWRQYXRoLnNwbGl0KCcvJykucG9wKCkhO1xuXG4gICAgICAvLyBTdGFydCBhIG5ldyBcdTIwMUNiYXRjaFx1MjAxRDpcbiAgICAgIHRoaXMuY3VycmVudEJhdGNoTGluZXMgPSBbXTtcblxuICAgICAgaWYgKGlzQ2hlY2tlZCkge1xuICAgICAgICAvLyBcdTI1QjYgQXV0b1x1MjAxMGNoZWNrIHByZXJlcXVpc2l0ZXNcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBbY2hhbmdlZEtleV07XG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCBjdXIgPSBzdGFjay5wb3AoKSE7XG4gICAgICAgICAgY29uc3QgZGVwcyA9IHBsdWdpbi5yZXF1aXJlc0dyYXBoLmdldChjdXIpID8/IFtdO1xuICAgICAgICAgIGZvciAoY29uc3QgZGVwS2V5IG9mIGRlcHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlcEVudHJ5ID1cbiAgICAgICAgICAgICAgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMuZmluZCgoeCkgPT4geC5rZXkgPT09IGRlcEtleSkgfHxcbiAgICAgICAgICAgICAgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5maW5kKCh4KSA9PiB4LmtleSA9PT0gZGVwS2V5KTtcbiAgICAgICAgICAgIGlmIChkZXBFbnRyeSkge1xuICAgICAgICAgICAgICBjb25zdCBkZXBQYXRoID0gZGVwRW50cnkucGF0aDtcbiAgICAgICAgICAgICAgY29uc3QgY2IgPSB0aGlzLmNoZWNrYm94TWFwW2RlcFBhdGhdO1xuICAgICAgICAgICAgICBpZiAoY2IgJiYgIWNiLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBjYi5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXBOYW1lID0gZnVsbFBhdGhUb0Rpc3BsYXlbZGVwUGF0aF0gPz8gZGVwUGF0aC5zcGxpdCgnLycpLnBvcCgpITtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lRWwgPSB0aGlzLmFwcGVuZExvZ0xpbmUoXG4gICAgICAgICAgICAgICAgICBkZXBQYXRoLFxuICAgICAgICAgICAgICAgICAgYD4gJHtkZXBOYW1lfSBhdXRvbWF0aWNhbGx5IGNoZWNrZWQgKHJlcXVpcmVkIGJ5ICR7Y2hhbmdlZE5hbWV9KWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEJhdGNoTGluZXMucHVzaChsaW5lRWwpO1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goZGVwS2V5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gXHUyNUI2IEF1dG9cdTIwMTB1bmNoZWNrIGRlcGVuZGVudHNcbiAgICAgICAgY29uc3QgZGVwZW5kZW50c09mID0gKHRhcmdldEtleTogc3RyaW5nKSA9PlxuICAgICAgICAgIEFycmF5LmZyb20ocGx1Z2luLnJlcXVpcmVzR3JhcGguZW50cmllcygpKVxuICAgICAgICAgICAgLmZpbHRlcigoWywgZGVwc10pID0+IGRlcHMuaW5jbHVkZXModGFyZ2V0S2V5KSlcbiAgICAgICAgICAgIC5tYXAoKFtrXSkgPT4gayk7XG5cbiAgICAgICAgY29uc3Qgc3RhY2sgPSBbY2hhbmdlZEtleV07XG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCBjdXIgPSBzdGFjay5wb3AoKSE7XG4gICAgICAgICAgZm9yIChjb25zdCBjaGlsZEtleSBvZiBkZXBlbmRlbnRzT2YoY3VyKSkge1xuICAgICAgICAgICAgY29uc3QgY2hpbGRFbnRyeSA9XG4gICAgICAgICAgICAgIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoKHgpID0+IHgua2V5ID09PSBjaGlsZEtleSkgfHxcbiAgICAgICAgICAgICAgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5maW5kKCh4KSA9PiB4LmtleSA9PT0gY2hpbGRLZXkpO1xuICAgICAgICAgICAgaWYgKGNoaWxkRW50cnkpIHtcbiAgICAgICAgICAgICAgY29uc3QgY2hpbGRQYXRoID0gY2hpbGRFbnRyeS5wYXRoO1xuICAgICAgICAgICAgICBjb25zdCBjYiA9IHRoaXMuY2hlY2tib3hNYXBbY2hpbGRQYXRoXTtcbiAgICAgICAgICAgICAgaWYgKGNiICYmIGNiLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBjYi5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGROYW1lID0gZnVsbFBhdGhUb0Rpc3BsYXlbY2hpbGRQYXRoXSA/PyBjaGlsZFBhdGguc3BsaXQoJy8nKS5wb3AoKSE7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUVsID0gdGhpcy5hcHBlbmRMb2dMaW5lKFxuICAgICAgICAgICAgICAgICAgY2hpbGRQYXRoLFxuICAgICAgICAgICAgICAgICAgYD4gJHtjaGlsZE5hbWV9IGF1dG9tYXRpY2FsbHkgdW5jaGVja2VkIChkZXBlbmRzIG9uICR7Y2hhbmdlZE5hbWV9KWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEJhdGNoTGluZXMucHVzaChsaW5lRWwpO1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goY2hpbGRLZXkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZmFkZUFsbEV4Y2VwdEN1cnJlbnRCYXRjaCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFwcGVuZCBvbmUgXHUyMDFDbW9ub1x1MjAxRCBsaW5lIHBsdXMgYSB0aW55IHVuZG8gYnV0dG9uLiBSZXR1cm5zIHRoZSBuZXcgPGRpdj4uXG4gICAgICovXG4gICAgcHJpdmF0ZSBhcHBlbmRMb2dMaW5lKGZ1bGxQYXRoOiBzdHJpbmcsIHRleHQ6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcblxuICAgICAgLy8gKDIpIEJ1aWxkIGEgbmV3IDxkaXY+IGZvciB0aGlzIGxpbmVcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLmNvbnNvbGVFbC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24obGluZS5zdHlsZSwge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBtYXJnaW46ICcycHggMCcsXG4gICAgICAgIG9wYWNpdHk6ICcxLjAnLFxuICAgICAgICB0cmFuc2l0aW9uOiAnb3BhY2l0eSAwLjJzIGVhc2UnLFxuICAgICAgfSk7XG5cbiAgICAgIC8vICgzKSBMZWZ0OiB0aGUgbWVzc2FnZSB0ZXh0XG4gICAgICBsaW5lLmNyZWF0ZVNwYW4oeyB0ZXh0IH0pO1xuXG4gICAgICAvLyAoNCkgUmlnaHQ6IFx1MjAxQ3VuZG9cdTIwMUQgYnV0dG9uXG4gICAgICBjb25zdCB1bmRvQnRuID0gbGluZS5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAndW5kbycsIGNsczogJ21vZC1zbWFsbCcgfSk7XG4gICAgICBPYmplY3QuYXNzaWduKHVuZG9CdG4uc3R5bGUsIHtcbiAgICAgICAgbWFyZ2luTGVmdDogJzAuNWVtJyxcbiAgICAgICAgZm9udFNpemU6ICcwLjc1ZW0nLFxuICAgICAgICBwYWRkaW5nOiAnMnB4IDRweCcsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgfSk7XG4gICAgICB1bmRvQnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNiID0gdGhpcy5jaGVja2JveE1hcFtmdWxsUGF0aF07XG4gICAgICAgIGlmIChjYikge1xuICAgICAgICAgIGNiLmNoZWNrZWQgPSAhY2IuY2hlY2tlZDtcbiAgICAgICAgICB0aGlzLmVuZm9yY2VEZXBlbmRlbmNpZXMoZnVsbFBhdGgsIGNiLmNoZWNrZWQpO1xuICAgICAgICAgIHRoaXMuZmFkZUFsbEV4Y2VwdEN1cnJlbnRCYXRjaCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyAoNSkgU2Nyb2xsIHRoZSBjb25zb2xlIHRvIGJvdHRvbVxuICAgICAgdGhpcy5jb25zb2xlRWwuc2Nyb2xsVG9wID0gdGhpcy5jb25zb2xlRWwuc2Nyb2xsSGVpZ2h0O1xuICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfVxuXG4gICAgLyoqIEZhZGUgb3V0IGV2ZXJ5IGNvbnNvbGUgbGluZSB0aGF0IGlzICpub3QqIHBhcnQgb2YgY3VycmVudEJhdGNoTGluZXMuICovXG4gICAgcHJpdmF0ZSBmYWRlQWxsRXhjZXB0Q3VycmVudEJhdGNoKCkge1xuICAgICAgY29uc3QgdG90YWwgPSB0aGlzLmNvbnNvbGVFbC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLmNvbnNvbGVFbC5jaGlsZHJlbltpXSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJhdGNoTGluZXMuaW5jbHVkZXMoY2hpbGQpKSB7XG4gICAgICAgICAgY2hpbGQuc3R5bGUub3BhY2l0eSA9ICcxLjAnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoaWxkLnN0eWxlLm9wYWNpdHkgPSAnMC42JztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vICg0KSBGaW5hbGx5LCBvcGVuIHRoZSBtb2RhbFxuICBuZXcgQ3VzdG9tSW5zdGFsbE1vZGFsKGFwcCkub3BlbigpO1xufVxuIiwgImltcG9ydCB7IFZhdWx0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gJ2NyeXB0byc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbGtpdEZpbGVDYWNoZUVudHJ5IHtcblx0aGFzaDogc3RyaW5nO1xuXHRnaXRodWJQYXRoOiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIFRvb2xraXRGaWxlQ2FjaGUgPSBSZWNvcmQ8c3RyaW5nLCBUb29sa2l0RmlsZUNhY2hlRW50cnk+OyAvLyB2YXVsdFBhdGggPT4ge2hhc2gsIGdpdGh1YlBhdGh9XG5cbmV4cG9ydCBjbGFzcyBUb29sa2l0RmlsZUNhY2hlTWFuYWdlciB7XG5cdHByaXZhdGUgdmF1bHQ6IFZhdWx0O1xuXHRwcml2YXRlIGNhY2hlOiBUb29sa2l0RmlsZUNhY2hlO1xuXHRwcml2YXRlIHNhdmU6ICgpID0+IFByb21pc2U8dm9pZD47XG5cblx0Y29uc3RydWN0b3IodmF1bHQ6IFZhdWx0LCBpbml0aWFsQ2FjaGU6IFRvb2xraXRGaWxlQ2FjaGUgfCB1bmRlZmluZWQsIHNhdmVDYWxsYmFjazogKCkgPT4gUHJvbWlzZTx2b2lkPikge1xuXHRcdHRoaXMudmF1bHQgPSB2YXVsdDtcblx0XHR0aGlzLmNhY2hlID0gaW5pdGlhbENhY2hlIHx8IHt9O1xuXHRcdHRoaXMuc2F2ZSA9IHNhdmVDYWxsYmFjaztcblx0fVxuXG5cdHByaXZhdGUgaGFzaENvbnRlbnQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGNvbnRlbnQpLmRpZ2VzdCgnaGV4Jyk7XG5cdH1cblxuXHRhc3luYyBpc1VwVG9EYXRlKHZhdWx0UGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0Ly9jb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIENoZWNraW5nIGlmIFwiJHt2YXVsdFBhdGh9XCIgaXMgdXAgdG8gZGF0ZS5gKTtcblx0XG5cdFx0Y29uc3QgZW50cnkgPSB0aGlzLmNhY2hlW3ZhdWx0UGF0aF07XG5cdFx0aWYgKCFlbnRyeSkge1xuXHRcdFx0Ly9jb25zb2xlLmxvZyhgXHUyNzRDIE5vIGNhY2hlZCBoYXNoIGZvdW5kIGZvcjogJHt2YXVsdFBhdGh9YCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcblx0XHRjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0UGF0aCk7XG5cdFx0aWYgKCFleGlzdHMpIHtcblx0XHRcdC8vY29uc29sZS5sb2coYFx1Mjc0QyBGaWxlIGRvZXMgbm90IGV4aXN0IGluIHZhdWx0OiAke3ZhdWx0UGF0aH1gKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFxuXHRcdGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuXHRcdGNvbnN0IGxvY2FsSGFzaCA9IHRoaXMuaGFzaENvbnRlbnQoY29udGVudCk7XG5cdFx0Y29uc3QgaXNTYW1lID0gbG9jYWxIYXNoID09PSBlbnRyeS5oYXNoO1xuXHRcblx0XHQvL2NvbnNvbGUubG9nKGBcdUQ4M0RcdUREMjIgTG9jYWwgaGFzaDogICR7bG9jYWxIYXNofWApO1xuXHRcdC8vY29uc29sZS5sb2coYFx1RDgzRFx1RENFNiBDYWNoZWQgaGFzaDogJHtlbnRyeS5oYXNofWApO1xuXHRcdC8vY29uc29sZS5sb2coaXNTYW1lID8gYFx1MjcwNSBGaWxlIGlzIHVwIHRvIGRhdGUuYCA6IGBcdUQ4M0RcdUREMDEgRmlsZSBuZWVkcyB1cGRhdGUuYCk7XG5cdFxuXHRcdHJldHVybiBpc1NhbWU7XG5cdH1cblx0XG5cblx0YXN5bmMgdXBkYXRlQ2FjaGUodmF1bHRQYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZywgZ2l0aHViUGF0aDogc3RyaW5nLCBzYXZlTm93OiBib29sZWFuID0gdHJ1ZSkge1xuXHRcdHRoaXMuY2FjaGVbdmF1bHRQYXRoXSA9IHtcblx0XHRcdGhhc2g6IHRoaXMuaGFzaENvbnRlbnQoY29udGVudCksXG5cdFx0XHRnaXRodWJQYXRoXG5cdFx0fTtcblx0XHRpZiAoc2F2ZU5vdykgYXdhaXQgdGhpcy5zYXZlKCk7XG5cdH1cblxuXHRnZXRDYWNoZSgpOiBUb29sa2l0RmlsZUNhY2hlIHtcblx0XHRyZXR1cm4gdGhpcy5jYWNoZTtcblx0fVxuXG5cdGdldFRyYWNrZWRGaWxlcygpOiBzdHJpbmdbXSB7XG5cdFx0cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuY2FjaGUpO1xuXHR9XG5cblx0Z2V0R2l0SHViUGF0aCh2YXVsdFBhdGg6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG5cdFx0cmV0dXJuIHRoaXMuY2FjaGVbdmF1bHRQYXRoXT8uZ2l0aHViUGF0aDtcblx0fVxuXG5cdHJlc2V0Q2FjaGUoKSB7XG5cdFx0dGhpcy5jYWNoZSA9IHt9O1xuXHR9XG5cblx0YXN5bmMgcmVtb3ZlRnJvbUNhY2hlKHZhdWx0UGF0aDogc3RyaW5nKSB7XG5cdFx0ZGVsZXRlIHRoaXMuY2FjaGVbdmF1bHRQYXRoXTtcblx0XHRhd2FpdCB0aGlzLnNhdmUoKTtcblx0fVxufVxuIiwgImltcG9ydCB7IG5vcm1hbGl6ZVBhdGgsIFZhdWx0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgZGlybmFtZSwgYmFzZW5hbWUsIGpvaW4gfSBmcm9tICdwYXRoJztcbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnO1xuXG5leHBvcnQgY2xhc3MgQmFja3VwTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgdmF1bHQ6IFZhdWx0KSB7fVxuXG4gIC8qKlxuICAgKiBNaXJyb3IgZXZlcnkgdmF1bHQgZmlsZSAoZXhjbHVkaW5nIC5vYnNpZGlhbiAmIGJhY2t1cHMpIGludG8gYSB0aW1lc3RhbXBlZCBmb2xkZXIsXG4gICAqIHRoZW4gcHJ1bmUgdG8ga2VlcCBvbmx5IHRoZSBsYXRlc3QgTiBmdWxsIHNuYXBzaG90cy5cbiAgICogQHBhcmFtIGxhYmVsIE9wdGlvbmFsIHN1ZmZpeCBmb3IgdGhlIGJhY2t1cCBmb2xkZXIgbmFtZVxuICAgKiBAcGFyYW0gbWF4RnVsbEJhY2t1cHMgTnVtYmVyIG9mIGZ1bGwgc25hcHNob3RzIHRvIHJldGFpbiAoZGVmYXVsdDogNSlcbiAgICovXG4gIGFzeW5jIGJhY2t1cFZhdWx0TWlycm9yKGxhYmVsPzogc3RyaW5nLCBtYXhGdWxsQmFja3VwczogbnVtYmVyID0gNSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgdHMgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvWzouXS9nLCAnLScpO1xuICAgIGNvbnN0IHRhZyA9IGxhYmVsID8gYC0ke2xhYmVsfWAgOiAnJztcbiAgICBjb25zdCBiYXNlID0gbm9ybWFsaXplUGF0aChgLnZhdWx0LWJhY2t1cHMvZnVsbC8ke3RzfSR7dGFnfWApO1xuICAgIGNvbnNvbGUubG9nKGBbQmFja3VwTWFuYWdlcl0gU3RhcnRpbmcgbWlycm9yIGJhY2t1cDogJHtiYXNlfWApO1xuXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMoYmFzZSk7XG5cbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgdGhpcy52YXVsdC5nZXRGaWxlcygpKSB7XG4gICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoJy52YXVsdC1iYWNrdXBzLycpIHx8IGZpbGUucGF0aC5zdGFydHNXaXRoKCcub2JzaWRpYW4vJykpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbm9ybWFsaXplUGF0aChgJHtiYXNlfS8ke2ZpbGUucGF0aH1gKTtcbiAgICAgIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKGRpcm5hbWUodGFyZ2V0KSk7XG4gICAgICBhd2FpdCB0aGlzLnZhdWx0LmNyZWF0ZSh0YXJnZXQsIGNvbnRlbnQpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdbQmFja3VwTWFuYWdlcl0gTWlycm9yIGJhY2t1cCBjb21wbGV0ZS4gUHJ1bmluZyBvbGQgYmFja3Vwcy4uLicpO1xuICAgIGF3YWl0IHRoaXMucHJ1bmVGdWxsQmFja3VwcyhiYXNlLCBtYXhGdWxsQmFja3Vwcyk7XG4gICAvLyBjb25zb2xlLmxvZygnW0JhY2t1cE1hbmFnZXJdIFBydW5pbmcgY29tcGxldGUuJyk7XG4gICAgcmV0dXJuIGJhc2U7XG4gIH1cblxuICAvKipcbiAgICogTGVnYWN5IGFsaWFzIGZvciBtaXJyb3ItYmFzZWQgYmFja3Vwc1xuICAgKi9cbiAgYXN5bmMgYmFja3VwVmF1bHRUb1ppcChsYWJlbD86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIHRoaXMuYmFja3VwVmF1bHRNaXJyb3IobGFiZWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgb2xkZXN0IGZ1bGwgYmFja3VwIGZvbGRlcnMsIGtlZXBpbmcgb25seSB0aGUgbW9zdCByZWNlbnQgYGtlZXBgIHNuYXBzaG90cy5cbiAgICovXG4gIHByaXZhdGUgYXN5bmMgcHJ1bmVGdWxsQmFja3VwcyhjdXJyZW50UGF0aDogc3RyaW5nLCBrZWVwOiBudW1iZXIpIHtcbiAgICBjb25zdCByb290ID0gbm9ybWFsaXplUGF0aCgnLnZhdWx0LWJhY2t1cHMvZnVsbCcpO1xuICAgLy8gY29uc29sZS5sb2coYFtCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiByb290PSR7cm9vdH0sIGtlZXA9JHtrZWVwfWApO1xuXG4gICAgLy8gZW5zdXJlIHRoZSByb290IGV4aXN0c1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKHJvb3QpO1xuICAgIGlmICghKGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5leGlzdHMocm9vdCkpKSB7XG4gICAgIC8vIGNvbnNvbGUubG9nKCdbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3Vwczogcm9vdCBmb2xkZXIgbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gZ2V0IGZvbGRlciBuYW1lc1xuICAgIGNvbnN0IGxpc3RpbmcgPSBhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIubGlzdChyb290KTtcbiAgICBjb25zdCByYXdGb2xkZXJzOiBzdHJpbmdbXSA9IEFycmF5LmlzQXJyYXkobGlzdGluZylcbiAgICAgID8gbGlzdGluZyBhcyBzdHJpbmdbXVxuICAgICAgOiAnZm9sZGVycycgaW4gbGlzdGluZ1xuICAgICAgPyAobGlzdGluZyBhcyBhbnkpLmZvbGRlcnNcbiAgICAgIDogW107XG4gICAgY29uc3QgZm9sZGVycyA9IHJhd0ZvbGRlcnMubWFwKGYgPT4gYmFzZW5hbWUoZikpO1xuICAgIC8vY29uc29sZS5sb2coJ1tCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiBmb2xkZXJzIChiYXNlbmFtZXMpOicsIGZvbGRlcnMpO1xuXG4gICAgLy8gc29ydCBkZXNjZW5kaW5nIHNvIG5ld2VzdCBmaXJzdFxuICAgIGNvbnN0IHNvcnRlZCA9IFsuLi5mb2xkZXJzXS5zb3J0KChhLCBiKSA9PiBiLmxvY2FsZUNvbXBhcmUoYSkpO1xuICAgIC8vY29uc29sZS5sb2coJ1tCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiBzb3J0ZWQ6Jywgc29ydGVkKTtcblxuICAgIC8vIGNvbXB1dGUgZmlsZXN5c3RlbSByb290IHRvIHJlbW92ZSBmcm9tXG4gICAgY29uc3QgYWRhcHRlckFueSA9IHRoaXMudmF1bHQuYWRhcHRlciBhcyBhbnk7XG4gICAgY29uc3QgZnNSb290ID0gYWRhcHRlckFueS5iYXNlUGF0aCA/IGpvaW4oYWRhcHRlckFueS5iYXNlUGF0aCwgcm9vdCkgOiBudWxsO1xuICAgIGlmICghZnNSb290KSB7XG4gICAgICAvL2NvbnNvbGUud2FybignW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IGNhbm5vdCBkZXRlcm1pbmUgRlMgcm9vdCwgc2tpcHBpbmcgcHJ1bmUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyByZW1vdmUgb2xkIHNuYXBzaG90cyBiZXlvbmQgYGtlZXBgXG4gICAgZm9yIChsZXQgaSA9IGtlZXA7IGkgPCBzb3J0ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5hbWUgPSBzb3J0ZWRbaV07XG4gICAgICBjb25zdCB2YXVsdFBhdGggPSBub3JtYWxpemVQYXRoKGAke3Jvb3R9LyR7bmFtZX1gKTtcbiAgICAgIGlmICh2YXVsdFBhdGggPT09IGN1cnJlbnRQYXRoKSB7XG4gICAgICAgLy8gY29uc29sZS5sb2coYFtCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiBza2lwcGluZyBjdXJyZW50ICR7bmFtZX1gKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvL2NvbnNvbGUubG9nKGBbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3VwczogcmVtb3ZpbmcgRlMgZm9sZGVyOiAke25hbWV9YCk7XG4gICAgICBjb25zdCByZW1vdmVQYXRoID0gam9pbihmc1Jvb3QsIG5hbWUpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZnMucm0ocmVtb3ZlUGF0aCwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgICAgICAvL2NvbnNvbGUubG9nKGBbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3VwczogcmVtb3ZlZCAke3JlbW92ZVBhdGh9YCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgLy8gY29uc29sZS5lcnJvcihgW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IGZhaWxlZCB0byByZW1vdmUgJHtyZW1vdmVQYXRofWAsIGUpO1xuICAgICAgfVxuICAgICAgLy8gYWxzbyBjbGVhbiB1cCB2YXVsdCBpbmRleFxuICAgICAgY29uc3QgYWYgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh2YXVsdFBhdGgpO1xuICAgICAgaWYgKGFmKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudmF1bHQuZGVsZXRlKGFmKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVjdXJzaXZlbHkgZW5zdXJlcyB0aGF0IGEgZGlyZWN0b3J5IGV4aXN0cyBpbiB0aGUgdmF1bHQuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGVuc3VyZUZvbGRlckV4aXN0cyhmb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgICBpZiAoIWZvbGRlclBhdGggfHwgKGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5leGlzdHMoZm9sZGVyUGF0aCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHBhcmVudCA9IGRpcm5hbWUoZm9sZGVyUGF0aCk7XG4gICAgYXdhaXQgdGhpcy5lbnN1cmVGb2xkZXJFeGlzdHMocGFyZW50KTtcbiAgICBhd2FpdCB0aGlzLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcbiAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQSx5QkFBQUE7QUFBQSxFQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFDLG1CQVNPOzs7QUNUUCxJQUFBQyxtQkFpQk87OztBQ2hCUCxJQUFBQyxtQkFBb0Q7OztBQ3VCM0MsSUFBTSxxQkFBZ0M7QUFBQSxFQUMzQztBQUFBLElBQ0UsSUFBSTtBQUFBLElBQ0osT0FBTztBQUFBLElBQ1AsTUFBTTtBQUFBLElBQ04sUUFBUTtBQUFBLElBQ1IsV0FBVztBQUFBLElBQ1gsWUFBWSxDQUFDLEVBQUU7QUFBQSxFQUNqQjtBQUFBLEVBQ0E7QUFBQSxJQUNFLElBQUk7QUFBQSxJQUNKLE9BQU87QUFBQSxJQUNQLE1BQU07QUFBQSxJQUNOLFFBQVE7QUFBQSxJQUNSLFdBQVc7QUFBQSxFQUNiO0FBSUY7OztBQzNDRjtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUFtQzs7O0FDR25DLElBQU0sa0JBQTBDO0FBQUE7QUFBQSxFQUU5QyxLQUFLO0FBQUEsRUFDTCxJQUFLO0FBQUEsRUFDTCxLQUFLO0FBQUE7QUFBQSxFQUdMLEtBQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE1BQU07QUFBQSxFQUNOLE9BQU87QUFBQSxFQUNQLEtBQU07QUFBQSxFQUNOLEtBQU07QUFBQSxFQUNOLE9BQU07QUFBQSxFQUNOLEtBQU07QUFBQTtBQUFBLEVBR04sS0FBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsTUFBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsTUFBSztBQUFBO0FBQUEsRUFHTCxLQUFVO0FBQUEsRUFDVixJQUFVO0FBQUEsRUFDVixXQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixRQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixhQUFZO0FBQUEsRUFDWixhQUFZO0FBQUEsRUFDWixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixRQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixRQUFVO0FBQUEsRUFDVixJQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixRQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixL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SztBQUFBLEVBQ0wsR0FBSztBQUFBLEVBQ0wsV0FBVztBQUFBLEVBQ1gsVUFBVTtBQUFBLEVBQ1YsSUFBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsR0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsYUFBYTtBQUFBLEVBQ2IsS0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsR0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsR0FBSztBQUFBLEVBQ0wsR0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsR0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsR0FBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsSUFBSztBQUNQO0FBR0EsSUFBTSxnQkFBdUM7QUFBQTtBQUFBLEVBRTNDLEtBQU87QUFBQSxFQUNQLEtBQU87QUFBQSxFQUNQLEtBQU87QUFBQSxFQUNQLEtBQU87QUFBQSxFQUNQLE1BQU87QUFBQSxFQUNQLE1BQU87QUFBQSxFQUNQLE1BQU87QUFBQSxFQUNQLE9BQU87QUFBQTtBQUFBLEVBRVAsTUFBTztBQUFBO0FBQUEsRUFHUCxNQUFPO0FBQUEsRUFDUCxNQUFPO0FBQUEsRUFDUCxNQUFPO0FBQUEsRUFDUCxPQUFPO0FBQUEsRUFDUCxNQUFPO0FBQUE7QUFBQSxFQUdQLE1BQU07QUFBQTtBQUFBLEVBRU4sS0FBTTtBQUFBLEVBQ04sTUFBTTtBQUFBO0FBQUEsRUFHTixNQUFPO0FBQUEsRUFDUCxLQUFPO0FBQUEsRUFDUCxPQUFPO0FBQUEsRUFDUCxNQUFPO0FBQUE7QUFBQSxFQUdQLEtBQU87QUFBQTtBQUFBLEVBRVAsT0FBTztBQUFBLEVBQ1AsT0FBTztBQUFBLEVBQ1AsT0FBTztBQUFBO0FBQUEsRUFFUCxPQUFPO0FBQUE7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QSxFQUNWLEtBQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLElBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLFdBQVk7QUFBQSxFQUNaLFVBQVk7QUFBQSxFQUNaLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLE1BQVU7QUFBQSxFQUNWLFdBQVk7QUFBQSxFQUNaLFNBQVU7QUFBQSxFQUNWLFlBQVk7QUFBQSxFQUNaLGFBQVk7QUFBQSxFQUNaLEtBQVU7QUFBQSxFQUNWLE9BQVU7QUFBQSxFQUNWLFFBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLEtBQVU7QUFBQSxFQUNWLGtCQUFrQjtBQUFBLEVBQ2xCLGlCQUFpQjtBQUFBLEVBQ2pCLGlCQUFpQjtBQUFBLEVBQ2pCLGdCQUFpQjtBQUNuQjtBQU1PLFNBQVNDLG1CQUFrQixRQUFnQixXQUE0QjtBQUM1RSxNQUFJLE9BQU9ELGlCQUFnQixNQUFNLEtBQUs7QUFHdEMsTUFBSSxXQUFXLE9BQU87QUFDcEIsUUFBSSxXQUFXLFNBQVMsTUFBTSxFQUFHLFNBQVE7QUFBQSxhQUNoQyxXQUFXLFNBQVMsTUFBTSxFQUFHLFNBQVE7QUFBQSxFQUNoRDtBQUVBLFNBQU87QUFDVDs7O0FDekhPLFNBQVNFLGVBQWMsT0FBd0I7QUFJcEQsTUFBSTtBQUNKLE1BQUksTUFBTSxRQUFRLEtBQUssR0FBRztBQUN4QixXQUFPLE1BQU0sS0FBSyxHQUFHO0FBQUEsRUFDdkIsV0FBVyxPQUFPLFVBQVUsVUFBVTtBQUNwQyxXQUFPO0FBQUEsRUFDVCxPQUFPO0FBQ0wsV0FBTyxPQUFPLFNBQVMsRUFBRTtBQUFBLEVBQzNCO0FBR0EsU0FBTyxLQUNKO0FBQUEsSUFBUTtBQUFBLElBQXlELENBQUMsR0FBRyxJQUFJLFNBQ3hFLEtBQUtDLGdCQUFlLElBQUksQ0FBQztBQUFBLEVBQzNCLEVBQ0M7QUFBQSxJQUFRO0FBQUEsSUFBOEQsQ0FBQyxHQUFHLEtBQUssU0FDOUUsS0FBS0MsWUFBVyxHQUFHLENBQUMsS0FBSyxJQUFJLElBQUlELGdCQUFlLElBQUksQ0FBQztBQUFBLEVBQ3ZELEVBQ0M7QUFBQSxJQUFRO0FBQUEsSUFBcUQsQ0FBQyxHQUFHLFNBQVMsUUFDekUsS0FBSyxHQUFHLElBQUksT0FBTztBQUFBLEVBQ3JCLEVBQ0MsUUFBUSw0Q0FBNEMsQ0FBQyxHQUFHLElBQUksUUFBUSxHQUFHLEVBQ3ZFLFFBQVEsc0JBQXNCLENBQUMsR0FBRyxTQUFTLElBQUksSUFBSSxHQUFHLEVBQ3RELFFBQVEsNENBQTRDLENBQUMsR0FBRyxJQUFJLFVBQVUsS0FBSyxFQUMzRSxRQUFRLHFDQUFxQyxDQUFDLEdBQUcsVUFBVSxHQUFHLEtBQUssR0FBRyxFQUN0RSxRQUFRLDhDQUE4QyxDQUFDLEdBQUcsU0FBUztBQUNsRSxVQUFNLFFBQVE7QUFBQSxNQUNaO0FBQUEsTUFBcUI7QUFBQSxNQUFlO0FBQUEsTUFBYztBQUFBLE1BQ2xEO0FBQUEsTUFBb0I7QUFBQSxJQUN0QjtBQUNBLFdBQU8sTUFBTSxTQUFTLEtBQUssWUFBWSxDQUFDLElBQ3BDLFdBQVdBLGdCQUFlLElBQUksQ0FBQyxPQUMvQjtBQUFBLEVBQ04sQ0FBQyxFQUNBLFFBQVEsb0NBQW9DLElBQUksRUFDaEQsUUFBUSw0QkFBNEIsQ0FBQyxHQUFHLFFBQVEsY0FBYyxJQUFJLEtBQUssQ0FBQyxHQUFHLEVBQzNFLFFBQVEsZ0RBQWdELENBQUMsR0FBRyxJQUFJLFVBQVUsS0FBSyxFQUMvRSxRQUFRLGtCQUFrQixFQUFFLEVBQzVCLFFBQVEsZUFBZSxFQUFFO0FBQzlCO0FBRUEsU0FBU0MsWUFBVyxLQUFxQjtBQUN2QyxTQUFPLElBQUksT0FBTyxDQUFDLEVBQUUsWUFBWSxJQUFJLElBQUksTUFBTSxDQUFDLEVBQUUsWUFBWTtBQUNoRTtBQUVBLFNBQVNELGdCQUFlLEtBQXFCO0FBQzNDLFNBQU8sSUFBSSxNQUFNLEdBQUcsRUFBRSxJQUFJQyxXQUFVLEVBQUUsS0FBSyxHQUFHO0FBQ2hEOzs7QUNsRE8sU0FBU0MscUJBQW9CLE9BQW9CO0FBQ3RELE1BQUksTUFBTSxTQUFTLFdBQVcsQ0FBQyxNQUFNLFFBQVEsTUFBTSxJQUFJLEVBQUcsUUFBTztBQUVqRSxRQUFNLFVBQVUsTUFBTSxVQUFVLFNBQVMsTUFBTSxPQUFPO0FBQUEsSUFBTztBQUU3RCxRQUFNLFdBQVcsTUFBTSxhQUFhLENBQUMsR0FDbEMsSUFBSSxDQUFDLE1BQWNDLGVBQWMsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUU3QyxRQUFNLFlBQVksS0FBSyxRQUFRLEtBQUssS0FBSyxDQUFDO0FBQzFDLFFBQU0sYUFBYSxLQUFLLFFBQVEsSUFBSSxNQUFNLEtBQUssRUFBRSxLQUFLLEtBQUssQ0FBQztBQUU1RCxRQUFNLFdBQVcsTUFBTSxLQUFLLElBQUksQ0FBQyxRQUFlO0FBQzlDLFVBQU0sUUFBUSxJQUFJLElBQUksQ0FBQyxTQUFTO0FBQzlCLFVBQUksT0FBTyxTQUFTLFNBQVUsUUFBT0EsZUFBYyxJQUFJO0FBRXZELFVBQUksT0FBTyxTQUFTLFVBQVU7QUFDNUIsWUFBSSxLQUFLLE1BQU0sVUFBVSxPQUFXLFFBQU8sR0FBRyxLQUFLLEtBQUssS0FBSztBQUM3RCxZQUFJLEtBQUssTUFBTSxRQUFRLFVBQWEsS0FBSyxNQUFNLFFBQVEsUUFBVztBQUNoRSxpQkFBTyxHQUFHLEtBQUssS0FBSyxHQUFHLFNBQUksS0FBSyxLQUFLLEdBQUc7QUFBQSxRQUMxQztBQUNBLGVBQU9BLGVBQWMsS0FBSyxVQUFVLElBQUksQ0FBQztBQUFBLE1BQzNDO0FBRUEsYUFBT0EsZUFBYyxPQUFPLElBQUksQ0FBQztBQUFBLElBQ25DLENBQUM7QUFFRCxXQUFPLEtBQUssTUFBTSxLQUFLLEtBQUssQ0FBQztBQUFBLEVBQy9CLENBQUM7QUFFRCxTQUFPLEdBQUcsT0FBTyxHQUFHLFNBQVM7QUFBQSxFQUFLLFVBQVU7QUFBQSxFQUFLLFNBQVMsS0FBSyxJQUFJLENBQUM7QUFDdEU7OztBQzVCTyxTQUFTQyxhQUFZLE9BQW9CO0FBQzlDLE1BQUksT0FBTyxVQUFVLFVBQVU7QUFDN0IsVUFBTSxVQUFVLE1BQU0sS0FBSztBQUMzQixRQUFJLENBQUMsV0FBVyxZQUFZLElBQUssUUFBTztBQUN4QyxXQUFPQyxlQUFjLE9BQU87QUFBQSxFQUM5QjtBQUVBLE1BQUksTUFBTSxTQUFTLGFBQWEsTUFBTSxRQUFRLE1BQU0sT0FBTyxHQUFHO0FBQzVELFVBQU0sT0FBTyxNQUFNLFFBQ2hCLElBQUlELFlBQVcsRUFDZixPQUFPLENBQUMsUUFBZ0IsSUFBSSxLQUFLLEVBQUUsU0FBUyxDQUFDLEVBQzdDLEtBQUssTUFBTTtBQUVkLFdBQU8sTUFBTSxPQUNULFNBQVMsTUFBTSxJQUFJO0FBQUEsRUFBSyxJQUFJLEtBQzVCO0FBQUEsRUFDTjtBQUVBLE1BQUksTUFBTSxTQUFTLFVBQVUsTUFBTSxRQUFRLE1BQU0sS0FBSyxHQUFHO0FBQ3ZELFdBQU8sTUFBTSxNQUNWLElBQUksQ0FBQyxNQUFXLEtBQUtDLGVBQWMsT0FBTyxNQUFNLFdBQVcsSUFBSSxLQUFLLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUNuRixLQUFLLElBQUk7QUFBQSxFQUNkO0FBRUEsTUFBSSxNQUFNLFNBQVMsV0FBVyxNQUFNLFFBQVEsTUFBTSxJQUFJLEdBQUc7QUFDdkQsV0FBT0MscUJBQW9CLEtBQUs7QUFBQSxFQUNsQztBQUVBLE1BQUksTUFBTSxTQUFTLFdBQVcsTUFBTSxRQUFRLE1BQU0sT0FBTyxHQUFHO0FBQzFELFVBQU0sUUFBUSxNQUFNLFFBQVEsSUFBSUYsWUFBVyxFQUFFLEtBQUssR0FBRyxFQUFFLEtBQUs7QUFDNUQsVUFBTSxTQUFTLE1BQU0sS0FBSyxXQUFNLE1BQU0sRUFBRSxLQUFLO0FBQzdDLFdBQU8sS0FBSyxLQUFLLEdBQUcsTUFBTTtBQUFBLEVBQzVCO0FBRUEsTUFBSSxNQUFNLFNBQVMsV0FBVyxNQUFNLFFBQVEsTUFBTSxPQUFPLEdBQUc7QUFDMUQsVUFBTSxRQUFRLE1BQU0sUUFBUSxJQUFJQSxZQUFXLEVBQUUsS0FBSyxJQUFJLEVBQUUsS0FBSztBQUM3RCxXQUFPLEtBQUssTUFBTSxRQUFRLE9BQU8sTUFBTSxDQUFDO0FBQUEsRUFDMUM7QUFFQSxNQUFJLE1BQU0sU0FBUyxxQkFBcUIsT0FBTyxNQUFNLGlCQUFpQixVQUFVO0FBQzlFLFVBQU0sQ0FBQyxJQUFJLElBQUksTUFBTSxhQUFhLE1BQU0sR0FBRztBQUMzQyxVQUFNLFNBQVMsS0FDWixRQUFRLGFBQWEsRUFBRSxFQUN2QixRQUFRLFFBQVEsR0FBRyxFQUNuQixZQUFZO0FBQ2YsV0FBTyxNQUFNLE1BQU07QUFBQSxFQUNyQjtBQUdBLFNBQU87QUFDVDs7O0FDOUNBLElBQU1HLG1CQUE0QixDQUFDO0FBSW5DLElBQU1DLFlBQW1DO0FBQUEsRUFDdkMsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUNMO0FBR0EsSUFBTUMsaUJBQXdDO0FBQUEsRUFDNUMsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUFBLEVBQ0gsR0FBRztBQUNMO0FBR0EsU0FBU0MsaUJBQWdCLEtBQXNCO0FBQzdDLFFBQU0sSUFBSSxPQUFPLE9BQU8sRUFBRTtBQUMxQixTQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsWUFBWSxJQUFJLEVBQUUsTUFBTSxDQUFDO0FBQzlDO0FBRU8sU0FBU0Msa0JBQWlCLFFBQXdCO0FBQ3ZELFNBQU9ILFVBQVMsTUFBTSxLQUFLO0FBQzdCO0FBRU8sU0FBU0ksdUJBQXNCLFFBQXdCO0FBQzVELFNBQU8sT0FDSixLQUFLLEVBQ0wsTUFBTSxLQUFLLEVBQ1gsSUFBSSxZQUFVSCxlQUFjLE1BQU0sS0FBSyxNQUFNLEVBQzdDLEtBQUssR0FBRztBQUNiO0FBRUEsSUFBTUksWUFBcUI7QUFBQSxFQUN6QjtBQUFBLEVBQVc7QUFBQSxFQUFXO0FBQUEsRUFBcUI7QUFBQSxFQUFhO0FBQUEsRUFBVTtBQUFBLEVBQVk7QUFBQSxFQUM5RTtBQUFBLEVBQVU7QUFBQSxFQUFrQjtBQUFBLEVBQVE7QUFBQSxFQUFhO0FBQUEsRUFBYztBQUFBLEVBQVk7QUFBQSxFQUMzRTtBQUFBLEVBQVk7QUFBQSxFQUFnQjtBQUFBLEVBQVc7QUFBQSxFQUFXO0FBQUEsRUFBZTtBQUFBLEVBQWE7QUFBQSxFQUM5RTtBQUFBLEVBQVU7QUFBQSxFQUFhO0FBQUEsRUFBUztBQUFBLEVBQWU7QUFBQSxFQUFVO0FBQUEsRUFBaUI7QUFBQSxFQUMxRTtBQUFBLEVBQXNCO0FBQUEsRUFBZ0I7QUFBQSxFQUFlO0FBQUEsRUFBUztBQUFBLEVBQVU7QUFBQSxFQUFTO0FBQUEsRUFDakY7QUFBQSxFQUFnQjtBQUFBLEVBQVE7QUFBQSxFQUFjO0FBQUEsRUFBa0I7QUFBQSxFQUFXO0FBQUEsRUFDbkU7QUFBQSxFQUEwQjtBQUFBLEVBQXdCO0FBQUEsRUFBZ0M7QUFDcEY7QUFDQSxJQUFNQyx3QkFBdUIsSUFBSSxJQUFJRCxVQUFTLElBQUksT0FBS0UsZUFBYyxDQUFDLENBQUMsQ0FBQztBQUV4RSxTQUFTQSxlQUFjLE1BQXNCO0FBQzNDLFNBQU8sS0FBSyxRQUFRLFFBQVEsR0FBRyxFQUFFLEtBQUssRUFBRSxZQUFZO0FBQ3REO0FBRUEsU0FBU0Msb0JBQW1CLFNBQXNCO0FBQ2hELFFBQU0sWUFBWSxRQUFRO0FBQzFCLFFBQU0sT0FBTyxRQUFRO0FBQ3JCLFFBQU0sSUFBSSxPQUFPLGNBQWMsV0FDM0IsVUFBVSxZQUFZLElBQ3RCLFdBQVcsTUFBTSxZQUFZLEtBQUssT0FBTyxTQUFTLEVBQUUsWUFBWTtBQUVwRSxRQUFNLGlCQUFpQkQsZUFBYyxJQUFJO0FBRXpDLE1BQUksUUFBUSxTQUFTLFFBQVEsZ0JBQWlCLFFBQU87QUFDckQsTUFBSSxNQUFNLFFBQVMsUUFBTztBQUMxQixNQUFJLE1BQU0sY0FBY0Qsc0JBQXFCLElBQUksY0FBYyxFQUFHLFFBQU87QUFDekUsTUFBSSxNQUFNLFdBQVksUUFBTztBQUM3QixTQUFPO0FBQ1Q7QUFFQSxTQUFTRyxzQkFBcUIsS0FBYSxLQUFhLEtBQWEsS0FBYSxLQUFhLEtBQXFCO0FBQ2xILFNBQU87QUFBQSxJQUNMO0FBQUEsSUFDQTtBQUFBLElBQ0EsS0FBSyxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUcsTUFBTSxHQUFHLE1BQU0sR0FBRyxNQUFNLEdBQUc7QUFBQSxFQUN2RCxFQUFFLEtBQUssSUFBSTtBQUNiO0FBRUEsU0FBU0MsYUFBWSxPQUFvQjtBQUN2QyxRQUFNLE9BQU8sTUFBTTtBQUNuQixNQUFJLGVBQXlCLENBQUM7QUFDOUIsTUFBSSxNQUFNLFFBQVEsTUFBTSxPQUFPLEdBQUc7QUFDaEMsbUJBQWUsTUFBTTtBQUFBLEVBQ3ZCLFdBQVcsT0FBTyxNQUFNLFlBQVksVUFBVTtBQUM1QyxtQkFBZSxDQUFDLE1BQU0sT0FBTztBQUFBLEVBQy9CLFdBQVcsTUFBTSxRQUFRLE1BQU0sSUFBSSxHQUFHO0FBQ3BDLG1CQUFlLE1BQU07QUFBQSxFQUN2QixXQUFXLE9BQU8sTUFBTSxTQUFTLFVBQVU7QUFDekMsbUJBQWUsQ0FBQyxNQUFNLElBQUk7QUFBQSxFQUM1QjtBQUNBLFFBQU0sTUFBTSxhQUFhLEtBQUssR0FBRztBQUNqQyxRQUFNLE9BQU9DLGVBQWMsR0FBRztBQUM5QixTQUFPLE1BQU0sSUFBSSxRQUFRLElBQUk7QUFDL0I7QUFFTyxTQUFTQyxtQkFBa0IsTUFBVyxXQUF5QztBQUNsRixNQUFJLENBQUMsS0FBSyxRQUFTLFFBQU8sQ0FBQztBQUMzQixFQUFDLEtBQWEsYUFBYTtBQUczQixRQUFNLGdCQUFnQixLQUFLLFFBQVEsT0FBTyxDQUFDLE1BQVc7QUFDdEQsVUFBTSxRQUFRLE1BQU0sUUFBUSxFQUFFLEVBQUUsSUFDNUIsRUFBRSxHQUFHLENBQUMsR0FBRyxNQUFNLEVBQUUsR0FBRyxDQUFDLElBQ3JCLE9BQU8sRUFBRSxPQUFPLFdBQ2QsRUFBRSxJQUFJLE1BQU0sT0FDWixFQUFFO0FBRVIsVUFBTSxRQUFRLE9BQU8sRUFBRSxPQUFPLFdBQzFCLEVBQUUsSUFBSSxXQUFXLEVBQUUsSUFBSSxNQUFNLE9BQzdCLEVBQUU7QUFDSixXQUFPLFNBQVMsUUFBUSxTQUFTLFFBQVEsQ0FBQyxNQUFNLE9BQU8sS0FBSyxDQUFDLEtBQUssQ0FBQyxNQUFNLE9BQU8sS0FBSyxDQUFDO0FBQUEsRUFDeEYsQ0FBQztBQUVELFFBQU0sV0FBVyxJQUFJLElBQUksS0FBSyxRQUFRLElBQUksQ0FBQyxNQUFXLEVBQUUsSUFBSSxDQUFDO0FBQ2pFLFFBQU0sYUFBYSxJQUFJLElBQUksY0FBYyxJQUFJLENBQUMsTUFBVyxFQUFFLElBQUksQ0FBQztBQUNoRSxRQUFNLFVBQVUsQ0FBQyxHQUFHLFFBQVEsRUFBRSxPQUFPLFVBQVEsQ0FBQyxXQUFXLElBQUksSUFBSSxDQUFDO0FBRzlELFNBQU8sY0FBYyxJQUFJLENBQUMsWUFBaUI7QUFDekMsVUFBTSxPQUFXLFFBQVE7QUFDekIsVUFBTSxXQUFXLEtBQUssUUFBUSxPQUFPLEdBQUc7QUFHeEMsVUFBTSxVQUFlLFFBQVEsUUFBUTtBQUNyQyxVQUFNLGVBQWUsTUFBTSxRQUFRLFFBQVEsU0FBUyxJQUNoRCxRQUFRLFVBQVUsS0FBSyxHQUFHLElBQzFCLFFBQVEsYUFBYTtBQUMzQixRQUFJLFVBQVU7QUFFZCxRQUFJLE9BQU8sUUFBUSxTQUFTLFVBQVU7QUFDcEMsZ0JBQVVWLGlCQUFnQixRQUFRLElBQUk7QUFBQSxJQUN4QyxXQUFXLFFBQVEsTUFBTSxNQUFNO0FBQzdCLFlBQU0sT0FBT0EsaUJBQWdCLFFBQVEsS0FBSyxJQUFJO0FBQzlDLFlBQU0sT0FBTyxRQUFRLEtBQUssTUFBTSxTQUFTLEtBQUssUUFBUSxLQUFLLEtBQUssSUFBSUEsZ0JBQWUsRUFBRSxLQUFLLElBQUksQ0FBQyxNQUFNO0FBQ3JHLGdCQUFVLEdBQUcsSUFBSSxHQUFHLElBQUk7QUFBQSxJQUMxQjtBQUVBLFlBQVEsY0FBYztBQUd0QixVQUFNLEtBQUssTUFBTSxRQUFRLFFBQVEsRUFBRSxJQUFJLFFBQVEsR0FBRyxDQUFDLEVBQUUsS0FBSyxRQUFRO0FBQ2xFLFVBQU0sS0FBSyxRQUFRLElBQUksV0FBVyxRQUFRO0FBQzFDLFVBQU0sS0FBSyxRQUFRO0FBR25CLFFBQUksQ0FBQyxNQUFNLENBQUMsSUFBSTtBQUNkLE1BQUFILGlCQUFnQixLQUFLLFFBQVEsSUFBSTtBQUNqQyxhQUFPO0FBQUEsSUFDVDtBQUdFLFVBQU0sWUFBWSxNQUFNLFFBQVEsUUFBUSxPQUFPLElBQzNDLFFBQVEsVUFDUixDQUFDLFFBQVEsS0FBSyxRQUFRLEtBQUssUUFBUSxLQUFLLFFBQVEsS0FBSyxRQUFRLEtBQUssUUFBUSxHQUFHO0FBQ2pGLFVBQU0sQ0FBQyxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksTUFBTSxJQUFJLE1BQU0sRUFBRSxJQUFJO0FBR3JFLFVBQU0sWUFBc0IsQ0FBQztBQUM3QixRQUFJLE9BQU8sUUFBUSxVQUFVLFVBQVU7QUFDckMsaUJBQVcsQ0FBQyxNQUFNLEdBQUcsS0FBSyxPQUFPLFFBQVEsUUFBUSxLQUFLLEdBQUc7QUFDdkQsWUFBSSxTQUFTLFdBQVk7QUFDekIsWUFBSSxPQUFPLE9BQU8sUUFBUSxZQUFZLFlBQVksS0FBSztBQUNyRCxnQkFBTSxNQUFRLElBQVk7QUFDMUIsZ0JBQU0sT0FBUSxJQUFZLFlBQVksSUFBSyxJQUFZLFNBQVMsS0FBSztBQUNyRSxvQkFBVSxLQUFLLEdBQUcsSUFBSSxJQUFJLEdBQUcsT0FBTyxJQUFJLEVBQUU7QUFBQSxRQUM1QyxPQUFPO0FBQ0wsb0JBQVUsS0FBSyxHQUFHLElBQUksSUFBSSxHQUFHLE1BQU07QUFBQSxRQUNyQztBQUFBLE1BQ0Y7QUFBQSxJQUNGLE9BQU87QUFDTCxnQkFBVSxLQUFLLEdBQUcsUUFBUSxLQUFLLE1BQU07QUFBQSxJQUN2QztBQUNBLFVBQU0sUUFBUSxVQUFVLEtBQUssSUFBSTtBQUdqQyxRQUFJLFNBQVNjLG1CQUFrQixRQUFRLFFBQVEsU0FBUztBQUN4RCxhQUFhLE9BQU8sUUFBUSxNQUFNLElBQUk7QUFHdEMsVUFBTSxXQUFXTCxvQkFBbUIsT0FBTztBQUUzQyxVQUFNLEtBQU9NLFNBQVEsU0FBU0MsbUJBQWtCO0FBQ2hELFVBQU0sT0FBT0Msc0JBQXFCLElBQUlELG1CQUFrQjtBQUV4RCxVQUFNLGVBQWdCLEdBQUdFLFdBQVUsYUFBYSxLQUFrQixDQUFDO0FBQ25FLFVBQU0sU0FBZ0IsR0FBR0EsV0FBVSxNQUFNLEtBQXlCLENBQUM7QUFDbkUsVUFBTSxTQUFnQixHQUFHQSxXQUFVLE1BQU0sS0FBeUIsQ0FBQztBQUNuRSxVQUFNLFlBQWdCLEdBQUdBLFdBQVUsU0FBUyxLQUFzQixDQUFDO0FBSW5FLFFBQUksT0FDSixLQUFLLElBQUk7QUFBQTtBQUFBLEVBQ05kLGtCQUFpQixPQUFPLENBQUMsSUFBSSxPQUFPLEtBQUtDLHVCQUFzQixZQUFZLENBQUM7QUFBQTtBQUFBLG1CQUMzRCxFQUFFO0FBQUEsa0JBQ0gsRUFBRTtBQUFBLGFBQ1AsS0FBSztBQUFBLEtBQ2xCLGFBQWEsU0FDVixzQkFBc0IsYUFBYSxLQUFLLElBQUksQ0FBQztBQUFBLElBQzdDLE9BQ0gsT0FBTyxTQUNKLGVBQWUsT0FBTyxLQUFLLElBQUksQ0FBQztBQUFBLElBQ2hDLE9BQ0gsT0FBTyxTQUNKLGVBQWUsT0FBTyxLQUFLLElBQUksQ0FBQztBQUFBLElBQ2hDLE9BQ0gsVUFBVSxTQUNQLGtCQUFrQixVQUFVLEtBQUssSUFBSSxDQUFDO0FBQUEsSUFDdEMsTUFDSixrQkFBa0IsRUFBRTtBQUFBO0FBQUEsSUFDcEJLLHNCQUFxQixLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssR0FBRztBQUdqRCxRQUFJLFFBQVEsTUFBVyxTQUFRO0FBQUE7QUFBQTtBQUFBLEVBQW1CLFFBQVEsTUFBTSxJQUFJQyxZQUFXLEVBQUUsS0FBSyxNQUFNLENBQUM7QUFDN0YsUUFBSSxRQUFRLE9BQVcsU0FBUTtBQUFBO0FBQUE7QUFBQSxFQUFvQixRQUFRLE9BQU8sSUFBSUEsWUFBVyxFQUFFLEtBQUssTUFBTSxDQUFDO0FBQy9GLFFBQUksUUFBUSxTQUFXLFNBQVE7QUFBQTtBQUFBO0FBQUEsRUFBc0IsUUFBUSxTQUFTLElBQUlBLFlBQVcsRUFBRSxLQUFLLE1BQU0sQ0FBQztBQUNuRyxRQUFJLFFBQVEsVUFBVyxTQUFRO0FBQUE7QUFBQTtBQUFBLEVBQThCLFFBQVEsVUFBVSxJQUFJQSxZQUFXLEVBQUUsS0FBSyxNQUFNLENBQUM7QUFFNUcsVUFBTSxVQUFVO0FBQUEsRUFBUSxJQUFJO0FBQUE7QUFBQTtBQUFBLEVBQVksSUFBSTtBQUU1QyxXQUFPO0FBQUEsTUFDTCxNQUFTLEdBQUcsUUFBUSxJQUFJLFFBQVE7QUFBQSxNQUNoQztBQUFBLElBQ0Y7QUFBQSxFQUNGLENBQUM7QUFDSDs7O0FDbE9GLFNBQVNRLGlCQUFnQixPQUFvQjtBQUUzQyxNQUFJLE9BQU8sVUFBVSxZQUFZLE1BQU0sV0FBVyxFQUFHLFFBQU87QUFDNUQsUUFBTSxJQUFJLE1BQU0sS0FBSztBQUNyQixTQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsWUFBWSxJQUFJLEVBQUUsTUFBTSxDQUFDLEVBQUUsWUFBWTtBQUM1RDtBQUdPLElBQU1DLG1CQUF5QztBQUFBLEVBQ3BELEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFDTDtBQUVPLElBQU1DLGdCQUFzQztBQUFBLEVBQ2pELEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILEdBQUc7QUFBQSxFQUNILE1BQU07QUFBQSxFQUNOLEdBQUc7QUFBQSxFQUNILEdBQUc7QUFDTDtBQUVPLElBQU1DLGlCQUF1QztBQUFBLEVBQ2xELElBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLFdBQVc7QUFBQSxFQUNYLFVBQVU7QUFBQSxFQUNWLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLGFBQWE7QUFBQSxFQUNiLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFDUDtBQUdBLElBQU1DLGlCQUF1QztBQUFBO0FBQUEsRUFFM0MsS0FBTztBQUFBLEVBQ1AsS0FBTztBQUFBLEVBQ1AsS0FBTztBQUFBLEVBQ1AsS0FBTztBQUFBLEVBQ1AsTUFBTztBQUFB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QUNJLHVEQUNBO0FBQUEsTUFDTjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQUE7QUFBQSxFQUdBLE1BQU0scUJBQW9DO0FBQ3hDLFVBQU0sRUFBRSxtQkFBbUIsaUJBQWlCLElBQUksS0FBSztBQUVyRCxRQUFJLENBQUMscUJBQXFCLGlCQUFpQixXQUFXLEdBQUc7QUFDdkQsVUFBSSx3QkFBTyx1REFBNkM7QUFDeEQ7QUFBQSxJQUNGO0FBRUEsVUFBTSxPQUEyQixDQUFDO0FBQ2xDLFFBQUksbUJBQW1CO0FBQ3JCLFdBQUssS0FBSyxrQkFBa0I7QUFBQSxRQUMxQixLQUFLLEtBQUs7QUFBQSxRQUNWLFlBQVk7QUFBQSxRQUNaLFlBQVk7QUFBQSxNQUNkLENBQUMsQ0FBQztBQUFBLElBQ0o7QUFDQSxlQUFXLE9BQU8sa0JBQWtCO0FBQ2xDLFdBQUssS0FBSyxrQkFBa0I7QUFBQSxRQUMxQixLQUFLLEtBQUs7QUFBQSxRQUNWLFlBQVk7QUFBQSxRQUNaLFlBQVk7QUFBQSxNQUNkLENBQUMsQ0FBQztBQUFBLElBQ0o7QUFFQSxVQUFNLFFBQVEsSUFBSSxJQUFJO0FBQ3RCLFFBQUksd0JBQU8saUNBQTRCO0FBQUEsRUFDekM7QUFJQTsiLAogICJuYW1lcyI6IFsiSW5zdGFsbGluZ01vZGFsIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImNhcGl0YWxpemVGaXJzdCIsICJTSVpFX01BUCIsICJ1bmlmaWVkU2tpbGxzIiwgIlNJWkVfTUFQIiwgInVuaWZpZWRTa2lsbHMiLCAiZmVhdHVyZXNCeUxldmVsIiwgImNvZGUiLCAiY2FwIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbnN0YWxsZXJfZXhwb3J0cyIsICJpbXBvcnRFZGl0aW9uRGF0YSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiU09VUkNFX05BTUVfTUFQIiwgImdldEZ1bGxTb3VyY2VOYW1lIiwgInJlcGxhY2U1ZVRhZ3MiLCAiY2FwaXRhbGl6ZUVhY2giLCAiY2FwaXRhbGl6ZSIsICJyZW5kZXJNYXJrZG93blRhYmxlIiwgInJlcGxhY2U1ZVRhZ3MiLCAiZm9ybWF0RW50cnkiLCAicmVwbGFjZTVlVGFncyIsICJyZW5kZXJNYXJrZG93blRhYmxlIiwgInNraXBwZWRNb25zdGVycyIsICJTSVpFX01BUCIsICJBTElHTk1FTlRfTUFQIiwgImNhcGl0YWxpemVGaXJzdCIsICJmb3JtYXRTaXplQWJicmV2IiwgImZvcm1hdEFsaWdubWVudEFiYnJldiIsICJSQVdfTlBDUyIsICJOT1JNQUxJWkVEX05QQ19OQU1FUyIsICJub3JtYWxpemVOYW1lIiwgImNhdGVnb3JpemVDcmVhdHVyZSIsICJyZW5kZXJBYmlsaXRpZXNUYWJsZSIsICJyZW5kZXJFbnRyeSIsICJyZXBsYWNlNWVUYWdzIiwgInBhcnNlQmVzdGlhcnlGaWxlIiwgImdldEZ1bGxTb3VyY2VOYW1lIiwgImJ1aWxkRk0iLCAiQkVTVElBUllfTUVUQV9ERUZTIiwgInNlcmlhbGl6ZUZyb250bWF0dGVyIiwgIkZNX0ZJRUxEUyIsICJjYXBpdGFsaXplRmlyc3QiLCAiREFNQUdFX1RZUEVfTUFQIiwgIlBST1BFUlRZX01BUCIsICJJVEVNX1RZUEVfTUFQIiwgImNvZGVGb2xkZXJNYXAiLCAicGFyc2VJdGVtc0ZpbGUiLCAiYnVpbGRGTSIsICJJVEVNX01FVEFfREVGUyIsICJzZXJpYWxpemVGcm9udG1hdHRlciIsICJyZXBsYWNlNWVUYWdzIiwgImNhcCIsICJBQklMSVRZX0ZVTEwiLCAiU0laRV9NQVAiLCAiRk1fRklFTERTIiwgInVuaWZpZWRBcm1vclByb2ZzIiwgInVuaWZpZWRXZWFwb25Qcm9mcyIsICJyZXBsYWNlNWVUYWdzIiwgInVuaWZpZWRTYXZlcyIsICJ1bmlmaWVkU2tpbGxzIiwgInVuaWZpZWRUb29sUHJvZnMiLCAiQUxMX0ZJRUxEX0RFRlMiLCAiZ2V0RnVsbFNvdXJjZU5hbWUiLCAiU0tJTExfT1BUSU9OUyIsICJTQ0hPT0xfTUFQIiwgImZvcm1hdFRpbWUiLCAiZm9ybWF0UmFuZ2UiLCAiZm9ybWF0RHVyYXRpb24iLCAiZm9ybWF0QWxpZ25tZW50QWJicmV2IiwgIklURU1fVFlQRV9NQVAiLCAiUFJPUEVSVFlfTUFQIiwgImJ1aWxkRk0iLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiU1BFTExfS0VZUyIsICJTUEVDSUVTX0tFWVMiLCAiSVRFTV9LRVlTIiwgIkJFU1RJQVJZX0tFWVMiLCAiQ0xBU1NfS0VZUyIsICJCQUNLR1JPVU5EX0tFWVMiLCAiRkVBVFNfS0VZUyIsICJTUEVMTF9NRVRBX0RFRlMiLCAiQUxMX0ZJRUxEX0RFRlMiLCAiU1BFQ0lFU19NRVRBX0RFRlMiLCAiSVRFTV9NRVRBX0RFRlMiLCAiQkVTVElBUllfTUVUQV9ERUZTIiwgIkNMQVNTX01FVEFfREVGUyIsICJCQUNLR1JPVU5EX01FVEFfREVGUyIsICJGRUFUU19NRVRBX0RFRlMiLCAiU0NIT09MX01BUCIsICJvcmRpbmFsIiwgImZvcm1hdFJhbmdlIiwgImZvcm1hdFRpbWUiLCAiZm9ybWF0RHVyYXRpb24iLCAiZm9ybWF0Q29tcG9uZW50cyIsICJwYXJzZVNwZWxsc0ZpbGUiLCAiZ2V0RnVsbFNvdXJjZU5hbWUiLCAiYnVpbGRGTSIsICJTUEVMTF9NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiZm9ybWF0RW50cnkiLCAic2x1ZyIsICJCTE9DS0VEX1RSQUlUUyIsICJwYXJzZVNwZWNpZXNGaWxlIiwgImJ1aWxkRk0iLCAiU1BFQ0lFU19NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiU0laRV9NQVAiLCAiRk1fRklFTERTIiwgInJlbmRlck1hcmtkb3duVGFibGUiLCAicmVwbGFjZTVlVGFncyIsICJmb3JtYXRFbnRyeSIsICJmb3JtYXRGZWF0dXJlTGluayIsICJPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEwiLCAicGFyc2VDbGFzc0ZpbGUiLCAiYnVpbGRGTSIsICJDTEFTU19NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAidW5pZmllZFdlYXBvblByb2ZzIiwgInVuaWZpZWRUb29sUHJvZnMiLCAiU0tJTExfT1BUSU9OUyIsICJ1bmlmaWVkU2tpbGxzIiwgImZlYXR1cmVzQnlMZXZlbCIsICJyZXBsYWNlNWVUYWdzIiwgImZvcm1hdEZlYXR1cmVMaW5rIiwgInJlbmRlck1hcmtkb3duVGFibGUiLCAiZm9ybWF0RW50cnkiLCAiT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMIiwgImNvZGUiLCAicGFyc2VBY3Rpb25zRmlsZSIsICJyZXBsYWNlNWVUYWdzIiwgInBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZSIsICJwYXJzZVNlbnNlc0ZpbGUiLCAicGFyc2VTa2lsbHNGaWxlIiwgInBhcnNlRmVhdHNGaWxlIiwgImJ1aWxkRk0iLCAiRkVBVFNfTUVUQV9ERUZTIiwgInNlcmlhbGl6ZUZyb250bWF0dGVyIiwgInJlcGxhY2U1ZVRhZ3MiLCAicGFyc2VCYWNrZ3JvdW5kc0ZpbGUiLCAiYnVpbGRGTSIsICJCQUNLR1JPVU5EX01FVEFfREVGUyIsICJzZXJpYWxpemVGcm9udG1hdHRlciIsICJjYXAiLCAiaHVtYW5pemUiLCAiZm10SXRlbSIsICJyZXBsYWNlNWVUYWdzIiwgInJlbmRlck1hcmtkb3duVGFibGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImxpc3RTcGVsbEZpbGVzRnJvbUdpdEh1YiIsICJsaXN0QmVzdGlhcnlGaWxlc0Zyb21HaXRIdWIiLCAiSVRFTV9KU09OX0ZJTEVTIiwgImxpc3RJdGVtRmlsZXNGcm9tR2l0SHViIiwgImxpc3RDbGFzc0ZpbGVzRnJvbUdpdEh1YiIsICJlbnN1cmVGb2xkZXIiLCAiaW1wb3J0RWRpdGlvbkRhdGEiLCAicGFyc2VTcGVsbHNGaWxlIiwgInBhcnNlQmVzdGlhcnlGaWxlIiwgInBhcnNlSXRlbXNGaWxlIiwgInBhcnNlU3BlY2llc0ZpbGUiLCAicmVzIiwgImpzb24iLCAibWRGaWxlcyIsICJwYXJzZUNsYXNzRmlsZSIsICJwYXJzZUFjdGlvbnNGaWxlIiwgInBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZSIsICJwYXJzZVNlbnNlc0ZpbGUiLCAicGFyc2VTa2lsbHNGaWxlIiwgInBhcnNlRmVhdHNGaWxlIiwgInBhcnNlQmFja2dyb3VuZHNGaWxlIiwgImluc3RhbGxlcl9leHBvcnRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAicGF0aCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZnMiLCAiSW5zdGFsbGluZ01vZGFsIiwgInBhdGgiLCAiY29udGVudCJdCn0K
