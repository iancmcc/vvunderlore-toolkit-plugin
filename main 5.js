/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  InstallingModal: () => InstallingModal2,
  default: () => VVunderloreToolkitPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian9 = require("obsidian");

// src/settings.ts
var import_obsidian7 = require("obsidian");

// src/firstinstallconfirm.ts
var import_obsidian5 = require("obsidian");

// src/editions.ts
var AVAILABLE_EDITIONS = [
  {
    id: "5e-2014",
    label: "D&D 5E (2014)",
    repo: "5etools-mirror-3/5etools-2014-src",
    parser: "5e-json",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-2014-src/main/data",
    categories: [""]
  },
  {
    id: "5e-2025",
    label: "D&D 5E (2025)",
    repo: "5etools-mirror-3/5etools-src",
    parser: "5e-2025",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-src/main/data"
  }
];

// src/parsers/5e-json/installer.ts
var installer_exports = {};
__export(installer_exports, {
  importEditionData: () => importEditionData
});
var import_obsidian = require("obsidian");

// src/parsers/5e-json/helpers/sourceMap.ts
var SOURCE_NAME_MAP = {
  // Core rulebooks
  PHB: "Player's Handbook",
  MM: "Monster Manual",
  DMG: "Dungeon Master's Guide",
  // Official expansions & adventure modules
  CoS: "Curse of Strahd",
  OotA: "Out of the Abyss",
  PotA: "Princes of the Apocalypse",
  HotDQ: "Hoard of the Dragon Queen",
  RoT: "Rise of Tiamat",
  SKT: "Storm King's Thunder",
  TftYP: "Tales from the Yawning Portal",
  ToA: "Tomb of Annihilation",
  // Supplemental guides
  XGE: "Xanathar's Guide to Everything",
  VGM: "Volo's Guide to Monsters",
  TCE: "Tasha's Cauldron of Everything",
  EGW: "Eberron: Rising from the Last War",
  ERLW: "Explorer's Guide to Wildemount",
  MTF: "Monsters of the Multiverse",
  VRGR: "Van Richten's Guide to Ravenloft",
  // Additional sourcebooks
  AAG: "Astral Adventurer\u2019s Guide",
  AI: "Acquisitions Incorporated",
  AitFRAVFT: "Adventures in the Forgotten Realms: A Visual Field Test",
  BMT: "Big Monster Tome",
  DoDk: "Dragon of Darkkeep",
  FTD: "Fizban\u2019s Treasury of Dragons",
  GGR: "Guildmaster\u2019s Guide to Ravnica",
  GHLoE: "Ghosts of the Horizon: Light Over Elensaria",
  IDRotF: "Icewind Dale: Rime of the Frostmaiden",
  LLK: "Lost Laboratory of Kwalish",
  SatO: "Sapphire of Truth",
  SCC: "Strixhaven: Curriculum of Chaos",
  TDCSR: "The Dungeon Coach\u2019s Rulebook",
  JttRC: "Journeys through the Radiant Citadel",
  "AitFR-AVT": "Adventures in the Forgotten Realms: A Verdant Tomb",
  "AitFR-FCD": "Adventures in the Forgotten Realms: From Cyan Depths",
  RMR: "Dungeons and Dragons: Rick and Morty",
  SCAG: "Sword Coast Adventurer's Guide",
  EEPC: "Elemental Evil Player's Companion",
  MOT: "Mythic Odysseys of Theros",
  WBtW: "The Wild Beyond the Witchlight",
  BGDIA: "Baldur's Gate: Descent Into Avernus",
  ToFW: "Turn of Fortune's Wheel",
  CoA: "Chains of Asmodeus",
  CRCotN: "Critical Role: Call of the Netherdeep",
  ToD: "Tyranny of Dragons",
  MPMM: "Mordenkainen Presents: Monsters of the Multiverse",
  LoX: "Light of Xaryxis",
  QftIS: "Quests from the Infinite Staircase",
  WDH: "Waterdeep: Dragon Heist",
  WDMM: "Waterdeep: Dungeon of the Mad Mage",
  PaBTSO: "Phandelver and Below: The Shattered Obelisk",
  CM: "Candlekeep Mysteries",
  GoS: "Ghosts of Saltmarsh",
  DSotDQ: "Dragonlance: Shadow of the Dragon Queen",
  KftGV: "Keys from the Golden Vault",
  SDW: "Essentials Kit: Sleeping Dragon's Wake",
  DoSI: "Dragons of Stormwreck Isle",
  GotSF: "Giants of the Star Forge",
  DIP: "Essentials Kit: Dragon of Icespire Peak",
  SLW: "Essentials Kit: Storm Lord's Wrath",
  IMR: "Infernal Machine Rebuild",
  VEoR: "Vecna: Eve of Ruin",
  PSI: "Plane Shift: Innistrad",
  AATM: "Adventure Atlas: The Mortuary",
  PSZ: "Plane Shift: Zendikar",
  DC: "Essentials Kit: Divine Contention",
  LMoP: "Lost Mine of Phandelver",
  RMBRE: "The Lost Dungeon of Rickedness: Big Rick Energy",
  HftT: "Hunt for the Thessalhydra",
  PSX: "Plane Shift: Ixalan",
  HFStCM: "Heroes' Feast: Saving the Childrens Menu",
  SjA: "Spelljammer Academy",
  LK: "Lightning Keep",
  RtG: "Return to the Glory",
  TTP: "The Tortle Package",
  LR: "Locathah Rising",
  PSA: "Plane Shift: Amonkhet",
  OGA: "One Grung Above",
  "NRH-TLT": "Nerds Restoring Harmony: The Lost Tomb",
  "NRH-AT": "Nerds Restoring Harmony: Adventure Together",
  BGG: "Bigby Presents: Glory of the Giants",
  RoTOS: "The Rise of Tiamat Online Supplement",
  XMtS: "X Marks the Spot",
  "HAT-LMI": "Honor Among Theives: Legendary Magic Items",
  DitLCoT: "Descent into the Lost Caverns of Tsojcanth",
  "AitFR-DN": "Adventures in the Forgotten Realms: Deepest Night",
  "AitFR-THP": "Adventures in the Forgotten Realms: The Hidden Pages",
  BAM: "Boo's Astral Menagerie",
  AZfyT: "A Zib for Your Thougts",
  MCV2DC: "Monstrous Compendium Volume 2: Dragonlance Creatures",
  PSK: "Plane Shift: Kaladesh",
  PSD: "Plane Shift: Dominaria",
  AWM: "Adventure with Muk",
  UATheMysticClass: "Unearthed Arcana: The Mystic Class",
  ALCurseOfStrahd: "Adventurers League: Curse of Strahd",
  ALElementalEvil: "Adventurers League: Elemental Evil",
  ALRageOfDemons: "Adventurers League: Rage of Demons"
};
function getFullSourceName(abbrev, editionId) {
  let name = SOURCE_NAME_MAP[abbrev] ?? abbrev;
  if (abbrev === "PHB") {
    if (editionId?.includes("2014")) name += " (2014)";
    else if (editionId?.includes("2025")) name += " (2025)";
  }
  return name;
}

// src/parsers/5e-json/helpers/tagReplacer.ts
function replace5eTags(input) {
  let text;
  if (Array.isArray(input)) {
    text = input.join(" ");
  } else if (typeof input === "string") {
    text = input;
  } else {
    text = String(input ?? "");
  }
  return text.replace(
    /\{@(spell|item|creature|race) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, __, name) => `[[${capitalizeEach(name)}]]`
  ).replace(
    /\{@(condition|status|action|skill) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, tag, name) => `[[${capitalize(tag)}s#${name}|${capitalizeEach(name)}]]`
  ).replace(
    /\{@classFeature ([^|}]+)\|([^|}]+)(?:\|[^}]+)?\}/g,
    (_, feature, cls) => `[[${cls}#${feature}]]`
  ).replace(/\{@(book|filter) ([^|}]+)(?:\|[^}]+)?\}/g, (_, __, txt) => txt).replace(/\{@note ([^}]+)\}/g, (_, note) => `*${note}*`).replace(/\{@(damage|dice|dc|hit|sense) ([^}]+)\}/g, (_, __, value) => value).replace(/\{@chance ([^|}]+)(?:\|[^}]+)?\}/g, (_, value) => `${value}%`).replace(/\{@quickref ([^|}]+)(?:\|[^|]*\|[^}]*)?\}/g, (_, term) => {
    const known = [
      "difficult terrain",
      "total cover",
      "half cover",
      "three-quarters cover",
      "heavily obscured",
      "lightly obscured"
    ];
    return known.includes(term.toLowerCase()) ? `[[Rules#${capitalizeEach(term)}]]` : term;
  }).replace(/\{\@5etools\s+([^|}]+)\|[^}]+\}/g, "$1").replace(/\{@recharge\s*([^}]+)\}/g, (_, num) => `(recharge: ${num.trim()})`).replace(/\{@(scaledice|scaledamage)[^}]*\|([^|}]+)\}/g, (_, __, value) => value).replace(/\{@d20[^}]*\}/g, "").replace(/\{@[^}]+\}/g, "");
}
function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
function capitalizeEach(str) {
  return str.split(" ").map(capitalize).join(" ");
}

// src/parsers/5e-json/helpers/markdownTable.ts
function renderMarkdownTable(entry) {
  if (entry.type !== "table" || !Array.isArray(entry.rows)) return "";
  const caption = entry.caption ? `##### ${entry.caption}
` : "";
  const headers = (entry.colLabels ?? []).map((h) => replace5eTags(h.trim()));
  const headerRow = `| ${headers.join(" | ")} |`;
  const dividerRow = `| ${headers.map(() => ":--").join(" | ")} |`;
  const bodyRows = entry.rows.map((row) => {
    const cells = row.map((cell) => {
      if (typeof cell === "string") return replace5eTags(cell);
      if (typeof cell === "object") {
        if (cell.roll?.exact !== void 0) return `${cell.roll.exact}`;
        if (cell.roll?.min !== void 0 && cell.roll?.max !== void 0) {
          return `${cell.roll.min}\u2013${cell.roll.max}`;
        }
        return replace5eTags(JSON.stringify(cell));
      }
      return replace5eTags(String(cell));
    });
    return `| ${cells.join(" | ")} |`;
  });
  return `${caption}${headerRow}
${dividerRow}
${bodyRows.join("\n")}`;
}

// src/parsers/5e-json/helpers/formatEntry.ts
function formatEntry(entry) {
  if (typeof entry === "string") {
    const cleaned = entry.trim();
    if (!cleaned || cleaned === "}") return "";
    return replace5eTags(cleaned);
  }
  if (entry.type === "entries" && Array.isArray(entry.entries)) {
    const body = entry.entries.map(formatEntry).filter((str) => str.trim().length > 0).join("\n\n");
    return entry.name ? `##### ${entry.name}
${body}` : body;
  }
  if (entry.type === "list" && Array.isArray(entry.items)) {
    return entry.items.map((i) => `- ${replace5eTags(typeof i === "string" ? i : JSON.stringify(i))}`).join("\n");
  }
  if (entry.type === "table" && Array.isArray(entry.rows)) {
    return renderMarkdownTable(entry);
  }
  if (entry.type === "quote" && Array.isArray(entry.entries)) {
    const quote = entry.entries.map(formatEntry).join(" ").trim();
    const author = entry.by ? ` \u2014 ${entry.by}` : "";
    return `*"${quote}${author}"*`;
  }
  if (entry.type === "inset" && Array.isArray(entry.entries)) {
    const inset = entry.entries.map(formatEntry).join("\n").trim();
    return `> ${inset.replace(/\n/g, "\n> ")}`;
  }
  if (entry.type === "refClassFeature" && typeof entry.classFeature === "string") {
    const [name] = entry.classFeature.split("|");
    const anchor = name.replace(/[^\w\s-]/g, "").replace(/\s+/g, "-").toLowerCase();
    return `[[#${anchor}]]`;
  }
  return "";
}

// src/parsers/5e-json/bestiary.ts
var skippedMonsters = [];
var SIZE_MAP = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var ALIGNMENT_MAP = {
  L: "Lawful",
  N: "Neutral",
  C: "Chaotic",
  G: "Good",
  E: "Evil",
  U: "Unaligned"
};
function capitalizeFirst(str) {
  const s = String(str || "");
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function formatSizeAbbrev(abbrev) {
  return SIZE_MAP[abbrev] || abbrev;
}
function formatAlignmentAbbrev(abbrev) {
  return abbrev.trim().split(/\s+/).map((letter) => ALIGNMENT_MAP[letter] || letter).join(" ");
}
var RAW_NPCS = [
  "Abjurer",
  "Acolyte",
  "Apprentice Wizard",
  "Archdruid",
  "Archer",
  "Archmage",
  "Assassin",
  "Bandit",
  "Bandit Captain",
  "Bard",
  "Berserker",
  "Blackguard",
  "Champion",
  "Commoner",
  "Conjurer",
  "Cult Fanatic",
  "Cultist",
  "Diviner",
  "Druid (NPC)",
  "Druid NPC",
  "Enchanter",
  "Evoker",
  "Gladiator",
  "Guard",
  "Illusionist",
  "Knight",
  "Kraken Priest",
  "Mage",
  "Martial Arts Adept",
  "Master Thief",
  "Necromancer",
  "Noble",
  "Priest",
  "Scout",
  "Spy",
  "Swashbuckler",
  "Thug",
  "Transmuter",
  "Tribal Warrior",
  "Veteran",
  "War Priest",
  "Warlock of the Archfey",
  "Warlock of the Fiend",
  "Warlock of the Great Old One",
  "Warlord"
];
var NORMALIZED_NPC_NAMES = new Set(RAW_NPCS.map((n) => normalizeName(n)));
function normalizeName(name) {
  return name.replace(/\s+/g, " ").trim().toLowerCase();
}
function categorizeCreature(monster) {
  const typeValue = monster.type;
  const name = monster.name;
  const t = typeof typeValue === "string" ? typeValue.toLowerCase() : typeValue?.type?.toLowerCase() || String(typeValue).toLowerCase();
  const normalizedName = normalizeName(name);
  if (monster.isNpc || monster.isNamedCreature) return "Story NPCs";
  if (t === "beast") return "Beasts";
  if (t === "humanoid" && NORMALIZED_NPC_NAMES.has(normalizedName)) return "Non-Beasts";
  if (t === "humanoid") return "Monsters";
  return "Monsters";
}
function renderAbilitiesTable(str, dex, con, int, wis, cha) {
  return [
    `| STR | DEX | CON | INT | WIS | CHA |`,
    `| --- | --- | --- | --- | --- | --- |`,
    `| ${str} | ${dex} | ${con} | ${int} | ${wis} | ${cha} |`
  ].join("\n");
}
function renderEntry(entry) {
  const name = entry.name;
  let descriptions = [];
  if (Array.isArray(entry.entries)) {
    descriptions = entry.entries;
  } else if (typeof entry.entries === "string") {
    descriptions = [entry.entries];
  } else if (Array.isArray(entry.desc)) {
    descriptions = entry.desc;
  } else if (typeof entry.desc === "string") {
    descriptions = [entry.desc];
  }
  const raw = descriptions.join(" ");
  const desc = replace5eTags(raw);
  return `***${name}.*** ${desc}`;
}
function parseBestiaryFile(json, editionId) {
  if (!json.monster) return [];
  json._editionId = editionId;
  const validMonsters = json.monster.filter((m) => {
    const acVal = Array.isArray(m.ac) ? m.ac[0]?.ac ?? m.ac[0] : typeof m.ac === "object" ? m.ac?.ac ?? null : m.ac;
    const hpVal = typeof m.hp === "object" ? m.hp?.average ?? m.hp?.hp ?? null : m.hp;
    return acVal != null && hpVal != null && !isNaN(Number(acVal)) && !isNaN(Number(hpVal));
  });
  const allNames = new Set(json.monster.map((m) => m.name));
  const validNames = new Set(validMonsters.map((m) => m.name));
  const missing = [...allNames].filter((name) => !validNames.has(name));
  return validMonsters.map((monster) => {
    const name = monster.name;
    const safeName = name.replace(/\//g, "-");
    const rawSize = monster.size || "M";
    const rawAlignment = Array.isArray(monster.alignment) ? monster.alignment.join(" ") : monster.alignment || "N";
    let rawType = "Unknown";
    if (typeof monster.type === "string") {
      rawType = capitalizeFirst(monster.type);
    } else if (monster.type?.type) {
      const base = capitalizeFirst(monster.type.type);
      const tags = monster.type.tags?.length ? ` (${monster.type.tags.map(capitalizeFirst).join(", ")})` : "";
      rawType = `${base}${tags}`;
    }
    monster._parsedType = rawType;
    const ac = Array.isArray(monster.ac) ? monster.ac[0].ac : monster.ac;
    const hp = monster.hp?.average ?? monster.hp;
    const cr = monster.cr;
    if (!ac && !hp) {
      skippedMonsters.push(monster.name);
      return null;
    }
    const abilities = Array.isArray(monster.ability) ? monster.ability : [monster.str, monster.dex, monster.con, monster.int, monster.wis, monster.cha];
    const [str = 10, dex = 10, con = 10, int = 10, wis = 10, cha = 10] = abilities;
    const speedList = [];
    if (typeof monster.speed === "object") {
      for (const [mode, val] of Object.entries(monster.speed)) {
        if (mode === "canHover") continue;
        if (val && typeof val === "object" && "number" in val) {
          const num = val.number;
          const cond = val.condition ? ` ${val.condition}` : "";
          speedList.push(`${mode} ${num} ft.${cond}`);
        } else {
          speedList.push(`${mode} ${val} ft.`);
        }
      }
    } else {
      speedList.push(`${monster.speed} ft.`);
    }
    const speed = speedList.join(", ");
    let source = getFullSourceName(monster.source, editionId);
    source = source.replace(/:/g, " -");
    const category = categorizeCreature(monster);
    const fm = buildFM(monster, BESTIARY_META_DEFS);
    const yaml = serializeFrontmatter(fm, BESTIARY_META_DEFS);
    const savingThrows = fm[FM_FIELDS.SAVING_THROWS] || [];
    const skills = fm[FM_FIELDS.SKILLS] || [];
    const senses = fm[FM_FIELDS.SENSES] || [];
    const languages = fm[FM_FIELDS.LANGUAGES] || [];
    let body = `# ${name}

${formatSizeAbbrev(rawSize)} ${rawType}, ${formatAlignmentAbbrev(rawAlignment)}

**Armor Class**: ${ac}
**Hit Points**: ${hp}
**Speed**: ${speed}
` + (savingThrows.length ? `**Saving Throws**: ${savingThrows.join(", ")}
` : "") + (skills.length ? `**Skills**: ${skills.join(", ")}
` : "") + (senses.length ? `**Senses**: ${senses.join(", ")}
` : "") + (languages.length ? `**Languages**: ${languages.join(", ")}
` : "") + `**Challenge**: ${cr}

` + renderAbilitiesTable(str, dex, con, int, wis, cha);
    if (monster.trait) body += `

### Traits
${monster.trait.map(renderEntry).join("\n\n")}`;
    if (monster.action) body += `

### Actions
${monster.action.map(renderEntry).join("\n\n")}`;
    if (monster.reaction) body += `

### Reactions
${monster.reaction.map(renderEntry).join("\n\n")}`;
    if (monster.legendary) body += `

### Legendary Actions
${monster.legendary.map(renderEntry).join("\n\n")}`;
    const content = `---
${yaml}
---

${body}`;
    return {
      path: `${category}/${safeName}.md`,
      content
    };
  });
}

// src/parsers/5e-json/items.ts
function capitalizeFirst2(input) {
  if (typeof input !== "string" || input.length === 0) return "";
  const s = input.trim();
  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
var DAMAGE_TYPE_MAP = {
  P: "Piercing",
  B: "Bludgeoning",
  S: "Slashing",
  N: "Necrotic",
  R: "Radiant",
  F: "Fire",
  C: "Cold",
  L: "Lightning",
  T: "Thunder",
  A: "Acid",
  H: "Healing",
  U: "Force",
  V: "Psychic"
};
var PROPERTY_MAP = {
  A: "Ammunition",
  F: "Finesse",
  H: "Heavy",
  L: "Light",
  R: "Reload",
  S: "Special",
  "2H": "Two-Handed",
  T: "Thrown",
  V: "Versatile"
};
var ITEM_TYPE_MAP = {
  $C: "Currency",
  $G: "Gem",
  A: "Ammunition",
  "AIR|DMG": "Vehicle (air)",
  "AF|DMG": "Future Ammo",
  AT: "Artisan Tools",
  EXP: "Explosive",
  FD: "Food and Drink",
  G: "Gear",
  GS: "Game",
  HA: "Heavy Armor",
  "IDG|TDCSR": "Illicit Drug",
  INS: "Instrument",
  LA: "Light Armor",
  M: "Weapon",
  MA: "Medium Armor",
  MNT: "Mounts and Vehicles",
  ODH: "Miscellaneous",
  P: "Consumable",
  R: "Ranged Weapon",
  RD: "Rod",
  RG: "Ring",
  S: "Shield",
  SC: "Scroll",
  SCF: "Spell Casting Focus",
  SHP: "Ship",
  T: "Tool",
  TAH: "Mounts and Vehicles",
  TG: "Trade Goods",
  VEH: "Mounts and Vehicles",
  WD: "Wand"
};
var codeFolderMap = {
  // Weapons & Armor
  "A": "Weapons and Armor/Ammunition",
  "M": "Weapons and Armor/Weapons",
  "R": "Weapons and Armor/Ranged Weapons",
  "S": "Weapons and Armor/Shields",
  "LA": "Weapons and Armor/Armor/Light Armor",
  "MA": "Weapons and Armor/Armor/Medium Armor",
  "HA": "Weapons and Armor/Armor/Heavy Armor",
  "EXP": "Weapons and Armor/Weapons/Explosives",
  // Future Ammo (AF|DMG → rawCode "AF")
  "AF": "Weapons and Armor/Ammunition/Future Ammo",
  // Magical Items
  "RD": "Magical Items/Rods",
  "RG": "Magical Items/Rings",
  "SC": "Magical Items/Scrolls",
  "SCF": "Magical Items/Spell Casting Focus",
  "WD": "Magical Items/Wands",
  // Valuables
  "$G": "Valuables/Gems",
  // Currency (rawCode becomes "C" after stripping $)
  "C": "Valuables/Currency",
  "TG": "Valuables/Trade Goods",
  // Artisan Goods
  "AT": "Artisan Goods/Tools",
  "T": "Artisan Goods/Tools",
  "INS": "Artisan Goods/Instruments",
  "GS": "Artisan Goods/Games",
  // Gear & Mounts
  "G": "Gear",
  // Mounts & Vehicles
  "MNT": "Gear/Mounts and Vehicles",
  "TAH": "Gear/Mounts and Vehicles",
  "VEH": "Gear/Mounts and Vehicles",
  // Air vehicles (AIR|DMG → rawCode "AIR")
  "AIR": "Gear/Mounts and Vehicles/Air",
  // Consumables
  "P": "Consumables",
  // Food & Drink
  "FD": "Consumables/Food and Drink",
  // Illicit Drugs (IDG|TDCSR → rawCode "IDG")
  "IDG": "Gear/Illicit Drugs",
  // Miscellaneous (ODH)
  "ODH": "Gear/Miscellaneous"
};
function parseItemsFile(json, editionId) {
  const rawItems = [];
  if (Array.isArray(json.baseitem)) rawItems.push(...json.baseitem);
  if (Array.isArray(json.item)) rawItems.push(...json.item);
  if (Array.isArray(json.object)) rawItems.push(...json.object);
  if (Array.isArray(json.vehicle)) rawItems.push(...json.vehicle);
  if (!rawItems.length) return [];
  const baseNames = new Set(
    Array.isArray(json.baseitem) ? json.baseitem.map((b) => b.name) : []
  );
  const out = [];
  for (const it of rawItems) {
    const name = it.name;
    const safeName = name.replace(/[\/\\:]/g, "-");
    const rawCode = (it.type || "").split("|")[0].split("|")[0].replace(/^\$/, "");
    let folder = codeFolderMap[rawCode] ?? "Miscellaneous";
    if (it.bonusWeapon) {
      folder = `${folder}/Variants`;
    } else {
      const isMagic = !!it.wondrous || !!it.reqAttune || !!it.req_attune || String(it.rarity).toLowerCase().includes("magic");
      if (isMagic) {
        const [, ...rest] = folder.split("/");
        folder = ["Magical Items", ...rest].join("/");
      }
    }
    if ((folder.startsWith("Weapons and Armor/Weapons") || folder.startsWith("Weapons and Armor/Ranged Weapons")) && it.weaponCategory) {
      folder = `${folder}/${capitalizeFirst2(it.weaponCategory)}`;
    }
    json._editionId = editionId;
    const fm = buildFM(it, ITEM_META_DEFS);
    if (rawCode === "M" && it.weaponCategory) {
      fm.type = `${capitalizeFirst2(it.weaponCategory)} Weapon`;
    } else if (ITEM_TYPE_MAP[rawCode]) {
      fm.type = ITEM_TYPE_MAP[rawCode];
    }
    if (Array.isArray(fm.damageTypes)) {
      fm.damageTypes = fm.damageTypes.map(
        (code) => DAMAGE_TYPE_MAP[code] || code
      );
    }
    let yaml = serializeFrontmatter(fm, ITEM_META_DEFS);
    if (Array.isArray(it.packContents)) {
      yaml += "\npackContents:";
      for (const pc of it.packContents) {
        yaml += `
  - item: "${pc.item}"
    quantity: ${pc.quantity}`;
      }
    }
    const frontmatter = `---
${yaml}
---`;
    const lines = [];
    lines.push(`# ${name}`);
    lines.push("");
    const subtitle = it.weapon ? `${capitalizeFirst2(it.weaponCategory)} Weapon` : it.armor ? folder.split("/").pop() || "Armor" : "";
    if (subtitle) lines.push(`### *${subtitle}*`);
    if (it.weapon) {
      lines.push(`**Category**: ${capitalizeFirst2(it.weaponCategory)}`);
      lines.push(`**Damage**: ${it.dmg1 ?? ""}${it.dmg2 ? ` / ${it.dmg2}` : ""}`);
      const typesBody = (Array.isArray(it.dmgType) ? it.dmgType : [it.dmgType]).filter((t) => Boolean(t)).map((t) => DAMAGE_TYPE_MAP[t] || t);
      lines.push(`**Damage Type**: ${typesBody.join(", ")}`);
      lines.push(`**Range**: ${it.range ?? "\u2014"}`);
      lines.push(`**Reload**: ${it.reload ?? "\u2014"}`);
      if (it.ammoType) lines.push(`**Ammo Type**: ${it.ammoType}`);
      if (Array.isArray(it.property) && it.property.length) {
        const propsBody = it.property.map((p) => PROPERTY_MAP[p] || p);
        lines.push(`**Properties**: ${propsBody.join(", ")}`);
      }
    }
    if (it.armor) {
      lines.push(`**Armor Class**: ${it.ac}`);
      if (it.stealth) lines.push(`**Stealth Disadvantage**: true`);
      lines.push("");
    }
    const desc = it.entries ?? it.desc;
    if (desc) {
      for (const p of Array.isArray(desc) ? desc : [desc]) {
        if (typeof p === "string") {
          for (const line of replace5eTags(p).split("\n")) {
            lines.push(line);
          }
          lines.push("");
        } else if (p && typeof p === "object") {
          if (lines[lines.length - 1] === "") {
            lines.pop();
          }
          lines.push(`#### ${p.name}`);
          const sub = Array.isArray(p.entries) ? p.entries : [];
          for (const sp of sub) {
            for (const line of replace5eTags(sp).split("\n")) {
              lines.push(line);
            }
          }
          lines.push("");
        }
      }
    }
    const body = lines.join("\n");
    out.push({ path: `Items/${folder}/${safeName}.md`, content: `${frontmatter}

${body}` });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-json/helpers/frontmatter.ts
function cap(str) {
  if (typeof str !== "string") return "";
  return str.charAt(0).toUpperCase() + str.slice(1);
}
var ABILITY_FULL = {
  str: "Strength",
  dex: "Dexterity",
  con: "Constitution",
  int: "Intelligence",
  wis: "Wisdom",
  cha: "Charisma"
};
var SIZE_MAP2 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var FM_FIELDS = {
  ABILITY_BONUSES: "ability_bonuses",
  AC: "AC",
  ALIGNMENT: "Alignment",
  AMMO_TYPE: "Ammo Type",
  ARMOR_PROFICIENCIES: "armor-prof",
  ATTACK_TYPE: "attack_type",
  ATTUNEMENT: "Attunement",
  ATTUNE_REQ: "Attune_Req",
  CASTING_TIME: "casting_time",
  CHARISMA: "charisma",
  CHA_MOD: "cha_mod",
  CONCENTRATION: "concentration",
  CONDITION_IMM: "cond_immunity",
  CONSTITUTION: "constitution",
  CON_MOD: "con_mod",
  COST: "cost",
  COMPONENTS: "Components",
  CHALLENGE_RATING: "CR",
  DAMAGE_TYPE: "damage_type",
  DAMAGE_TYPES: "damageTypes",
  DAMAGE: "damage",
  DAMAGE_RES: "dmg_resistance",
  DAMAGE_IMM: "dmg_immunity",
  DEXTERITY: "dexterity",
  DEX_MOD: "dex_mod",
  DURATION: "duration",
  RULESET: "ruleset",
  HP: "HP",
  INTELLIGENCE: "intelligence",
  INT_MOD: "int_mod",
  LANGUAGES: "languages",
  LEVEL: "level",
  MAGICAL: "magical",
  MATERIAL: "material",
  NAME: "name",
  PROPERTIES: "properties",
  RANGE: "range",
  RARITY: "rarity",
  RELOAD: "reload",
  RITUAL: "ritual",
  SAVE: "save",
  SAVING_THROWS: "saving_throws",
  SCHOOL: "school",
  SENSES: "senses",
  SIZE: "size",
  SKILLS: "skills",
  SKILL_CHOICE_LIST: "skill_choice_list",
  SOMATIC: "somatic",
  SOURCE: "source",
  SPECIES: "species",
  SPEED: "speed",
  SPELL_CAST_MOD: "Spell Cast Mod",
  SPELL_RANGE: "Range",
  STEALTH_DISADVANTAGE: "stealthDisadvantage",
  STRENGTH: "strength",
  STR_MOD: "str_mod",
  SUBRACES: "subraces",
  TOOL_PROFICIENCIES: "tool-prof",
  TOOL_CHOICE_LIST: "tool_choice_list",
  TRAITS: "traits",
  TYPE: "type",
  VARIANT: "Variant",
  VERBAL: "verbal",
  WEAPON_PROFICIENCIES: "weapon-prof",
  WEIGHT: "weight",
  WISDOM: "wisdom",
  WIS_MOD: "wis_mod"
};
var unifiedArmorProfs = (val) => Array.isArray(val?.armor) ? val.armor.map(cap) : Array.isArray(val) ? val.map(cap) : [];
function unifiedWeaponProfs(val) {
  const rawArr = Array.isArray(val?.weapons) ? val.weapons : Array.isArray(val) ? val : [];
  const out = /* @__PURE__ */ new Set();
  function handleOne(entry) {
    if (Array.isArray(entry)) {
      entry.forEach(handleOne);
      return;
    }
    if (typeof entry === "string") {
      const lit = entry.trim().toLowerCase();
      if (lit === "simple") {
        out.add("Simple Weapons");
      } else if (lit === "martial") {
        out.add("Martial Weapons");
      } else {
        const text = entry.startsWith("{@") ? replace5eTags(entry) : cap(entry);
        out.add(text);
      }
      return;
    }
    if (entry && typeof entry === "object" && entry.proficiency) {
      const name = cap(entry.proficiency);
      out.add(entry.optional ? `${name} (optional)` : name);
    }
  }
  rawArr.forEach(handleOne);
  return [...out];
}
var unifiedSaves = (val) => {
  if (Array.isArray(val)) {
    return val.map(
      (k) => ({
        str: "Strength",
        dex: "Dexterity",
        con: "Constitution",
        int: "Intelligence",
        wis: "Wisdom",
        cha: "Charisma"
      })[k] ?? k.toUpperCase()
    );
  }
  if (typeof val === "object" && val !== null) {
    return Object.keys(val).map((k) => k.toUpperCase());
  }
  return [];
};
var unifiedSkills2 = (val) => {
  if (val && !Array.isArray(val) && typeof val === "object" && // ensure every value is a string or number
  Object.values(val).every((v) => typeof v === "string" || typeof v === "number")) {
    return Object.entries(val).map(
      ([skill, mod]) => `${cap(skill)} ${mod}`.trim()
    );
  }
  if (val && !Array.isArray(val) && typeof val === "object") {
    const nested = val.skills ?? val.skillProf ?? val.skillProficiencies;
    return unifiedSkills2(nested);
  }
  if (!Array.isArray(val)) return [];
  const out = /* @__PURE__ */ new Set();
  for (const e of val) {
    if (e && typeof e === "object" && typeof e.any === "number") {
      out.add(`Choose ${e.any}`);
      continue;
    }
    if (e && typeof e === "object" && e.choose) {
      const cnt = e.choose.count ?? 1;
      out.add(`Choose ${cnt}`);
    }
    if (e && typeof e === "object") {
      for (const [k, v] of Object.entries(e)) {
        if (v === true) out.add(cap(k));
      }
    }
    if (typeof e === "string") {
      out.add(cap(e));
    }
  }
  return [...out];
};
var unifiedToolProfs = (val) => {
  let entries = Array.isArray(val) ? val : Array.isArray(val?.toolProficiencies) ? val.toolProficiencies : Array.isArray(val?.tools) ? val.tools : [];
  const out = /* @__PURE__ */ new Set();
  let sawChoose = false;
  for (const e of entries) {
    if (typeof e === "string") {
      out.add(cap(e));
      continue;
    }
    if (e?.choose) {
      const cnt = e.choose.count ?? 1;
      sawChoose = true;
      out.add(`Choose ${cnt}`);
    }
    for (const [k, v] of Object.entries(e)) {
      if (v === true) {
        out.add(cap(k));
      } else if (typeof v === "number" && k.startsWith("any")) {
        const raw = k.replace(/^any/, "");
        const spaced = raw.replace(/([a-z])([A-Z])/g, "$1 $2").split(" ").map(cap).join(" ");
        out.add(`Choose ${v} ${spaced}`);
      }
    }
  }
  return [...out];
};
var ALL_FIELD_DEFS = [
  // ─── Core ───
  { callSign: "NAME", jsonKey: "name" },
  { callSign: "SOURCE", jsonKey: ["source"], conv: (raw, all) => {
    const out = /* @__PURE__ */ new Set();
    const arr = Array.isArray(raw) ? raw : [raw];
    arr.forEach((src) => out.add(getFullSourceName(src, all._editionId)));
    for (const os of all.otherSources ?? []) out.add(getFullSourceName(os.source, all._editionId));
    for (const rep of all.reprintedAs ?? []) {
      const [, src] = rep.split("|");
      out.add(getFullSourceName(src, all._editionId));
    }
    return [...out];
  } },
  // ─── Proficiencies ───
  { callSign: "ARMOR_PROFICIENCIES", jsonKey: ["armorProficiencies", "armorProfs", "startingProficiencies"], conv: unifiedArmorProfs },
  {
    callSign: "WEAPON_PROFICIENCIES",
    jsonKey: ["weaponProficiencies", "weaponProfs", "startingProficiencies"],
    conv: unifiedWeaponProfs
  },
  { callSign: "TOOL_PROFICIENCIES", jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"], conv: unifiedToolProfs },
  {
    callSign: "TOOL_CHOICE_LIST",
    jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.toolProficiencies) ? raw.toolProficiencies : Array.isArray(raw?.tools) ? raw.tools : [];
      const choice = arr.find((e) => e?.choose);
      return choice?.choose?.from?.map((s) => cap(s)) ?? [];
    }
  },
  { callSign: "SAVING_THROWS", jsonKey: ["save", "proficiency"], conv: unifiedSaves },
  {
    callSign: "SKILLS",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: unifiedSkills2
  },
  {
    callSign: "SKILL_CHOICE_LIST",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.skillProficiencies) ? raw.skillProficiencies : Array.isArray(raw?.skills) ? raw.skills : Array.isArray(raw?.skillProf) ? raw.skillProf : [];
      const choiceObj = arr.find((e) => e?.choose || typeof e.any === "number");
      if (!choiceObj) return [];
      if (choiceObj.choose && Array.isArray(choiceObj.choose.from)) {
        return choiceObj.choose.from.map(cap);
      }
      if (typeof choiceObj.any === "number") {
        return SKILL_OPTIONS;
      }
      return [];
    }
  },
  {
    callSign: "SPELL_CAST_MOD",
    jsonKey: "spellcastingAbility",
    conv: (raw) => {
      const key = String(raw).toLowerCase();
      return ABILITY_FULL[key] || key.toUpperCase();
    }
  },
  // ─── Spells ───
  { callSign: "LEVEL", jsonKey: "level" },
  { callSign: "SCHOOL", jsonKey: "school", conv: (s) => SCHOOL_MAP[s] ?? s },
  { callSign: "CASTING_TIME", jsonKey: "time", conv: formatTime },
  { callSign: "SPELL_RANGE", jsonKey: "range", conv: formatRange },
  { callSign: "DURATION", jsonKey: "duration", conv: formatDuration },
  { callSign: "VERBAL", jsonKey: "components", conv: (c) => !!c.v },
  { callSign: "SOMATIC", jsonKey: "components", conv: (c) => !!c.s },
  { callSign: "MATERIAL", jsonKey: "components", conv: (c) => !!c.m },
  {
    callSign: "COMPONENTS",
    jsonKey: "components",
    conv: (c) => {
      if (!c.m) return [];
      const raw = Array.isArray(c.m) ? c.m : [c.m];
      return raw.map((item) => {
        if (typeof item === "string") return item;
        if (item && typeof item === "object" && typeof item.text === "string") {
          return item.text;
        }
        return null;
      }).filter((comp) => comp !== null);
    }
  },
  { callSign: "ATTACK_TYPE", jsonKey: "attackType" },
  { callSign: "DAMAGE_TYPE", jsonKey: "damageInflict", conv: (d) => Array.isArray(d) ? d[0] : d },
  { callSign: "RITUAL", jsonKey: "ritual" },
  { callSign: "CONCENTRATION", jsonKey: "duration", conv: (ds) => Array.isArray(ds) && ds.some((x) => x.concentration) },
  { callSign: "SAVE", jsonKey: "saveAttr" },
  // ─── Species / Creatures ───
  { callSign: "SPECIES", jsonKey: "name" },
  {
    callSign: "SIZE",
    jsonKey: "size",
    conv: (raw) => {
      if (Array.isArray(raw)) {
        return raw.map((r) => SIZE_MAP2[r] || r);
      } else {
        return SIZE_MAP2[raw] || raw;
      }
    }
  },
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (sp) => {
      if (typeof sp === "number") {
        return [`Walk ${sp} ft.`];
      }
      if (!sp || typeof sp !== "object") return [];
      return Object.entries(sp).filter(([mode]) => mode !== "canHover").map(([mode, v]) => {
        const n = typeof v === "object" && v !== null && "number" in v ? v.number : v;
        const label = mode === "walk" ? "Walk" : cap(mode);
        return `${label} ${n} ft.`;
      });
    }
  },
  { callSign: "LANGUAGES", jsonKey: ["languages", "languageProficiencies"], conv: (arr) => {
    if (!Array.isArray(arr)) return [];
    const out = [];
    for (const lp of arr) {
      if (typeof lp === "string") out.push(cap(lp));
      else if (typeof lp === "object") {
        for (const [lang, val] of Object.entries(lp)) {
          if (val) out.push(cap(lang));
        }
      }
    }
    return [...new Set(out)];
  } },
  { callSign: "SENSES", jsonKey: "senses", conv: (sen) => {
    if (Array.isArray(sen)) return sen.map((s) => s.replace(/^\d+\s*/, "").replace(/^./, (c) => c.toUpperCase()));
    if (sen && typeof sen === "object") return Object.entries(sen).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)} ${v}`);
    return [];
  } },
  {
    callSign: "TRAITS",
    jsonKey: ["classFeatures", "entries"],
    conv: (raw, allJson) => {
      const clsRec = Array.isArray(allJson.class) ? allJson.class[0] : allJson;
      const className = typeof clsRec.name === "string" ? clsRec.name : "";
      const omit = /* @__PURE__ */ new Set([
        "Ability Score Improvement",
        "Archetype Feature",
        "Subclass Feature"
        // add more if you like…
      ]);
      const seen = /* @__PURE__ */ new Set();
      if (Array.isArray(allJson.classFeatures)) {
        return allJson.classFeatures.flatMap((feat) => {
          if (feat && typeof feat === "object" && feat.gainSubclassFeature) return [];
          const rawName = typeof feat === "string" ? feat : typeof feat.classFeature === "string" ? feat.classFeature : "";
          const name = rawName.split("|")[0].trim();
          if (!name || omit.has(name) || seen.has(name)) return [];
          seen.add(name);
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return `[[${className}#${anchor}|${name}]]`;
        });
      }
      const ents = Array.isArray(raw) ? raw : [];
      const featureNames = ents.filter((e) => e?.data?.isFeature && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
      if (featureNames.length) return featureNames;
      return ents.filter((e) => e && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
    }
  },
  { callSign: "AC", jsonKey: "ac", conv: (a) => Array.isArray(a) ? a[0].ac : a },
  { callSign: "HP", jsonKey: "hp", conv: (hp) => hp?.average ?? hp },
  { callSign: "CHALLENGE_RATING", jsonKey: "cr" },
  { callSign: "STRENGTH", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[0] : arr?.str ?? 0 },
  { callSign: "DEXTERITY", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[1] : arr?.dex ?? 0 },
  { callSign: "CONSTITUTION", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[2] : arr?.con ?? 0 },
  { callSign: "INTELLIGENCE", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[3] : arr?.int ?? 0 },
  { callSign: "WISDOM", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[4] : arr?.wis ?? 0 },
  { callSign: "CHARISMA", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[5] : arr?.cha ?? 0 },
  {
    callSign: "ALIGNMENT",
    jsonKey: "alignment",
    conv: (a) => {
      const raw = Array.isArray(a) ? a.join(" ") : typeof a === "string" ? a : String(a);
      const cleaned = raw.replace(/\bA\b/g, "Any").replace(/\bU\b/g, "Unaligned").replace(/\bN\b/g, "Neutral").replace(/\bL\b/g, "Lawful").replace(/\bC\b/g, "Chaotic").replace(/\bG\b/g, "Good").replace(/\bE\b/g, "Evil");
      return formatAlignmentAbbrev(cleaned);
    }
  },
  {
    callSign: "TYPE",
    jsonKey: "type",
    conv: (t) => {
      if (typeof t === "string") {
        return ITEM_TYPE_MAP[t] ?? cap(t);
      }
      if (t && typeof t === "object") {
        const code = String(t.type || "").toUpperCase();
        if (ITEM_TYPE_MAP[code]) {
          return ITEM_TYPE_MAP[code];
        }
        const base = t.type ? cap(t.type) : "Unknown";
        const tags = Array.isArray(t.tags) ? t.tags.map(cap) : [];
        return tags.length ? `${base} (${tags.join(", ")})` : base;
      }
      return void 0;
    }
  },
  // ─── Items ───
  { callSign: "TYPE", jsonKey: "_parsedType" },
  { callSign: "RARITY", jsonKey: "rarity", conv: (r) => {
    const s = String(r || "").toLowerCase();
    return s && s !== "none" ? s[0].toUpperCase() + s.slice(1) : void 0;
  } },
  {
    callSign: "COST",
    jsonKey: "value",
    conv: (raw) => {
      const s = String(raw).trim().toLowerCase();
      let num;
      if (s.endsWith("cp")) {
        num = parseFloat(s);
        return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
      }
      if (s.endsWith("sp")) {
        num = parseFloat(s);
        return num >= 10 ? `${Math.round(num / 10 * 100) / 100}gp` : `${num}sp`;
      }
      if (s.endsWith("gp")) {
        num = parseFloat(s);
        return `${Math.round(num * 100) / 100}gp`;
      }
      num = parseFloat(s) || 0;
      return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
    }
  },
  { callSign: "WEIGHT", jsonKey: "weight" },
  { callSign: "MAGICAL", jsonKey: "wondrous", conv: (_w, all) => !!all.wondrous || !!all.reqAttune },
  { callSign: "VARIANT", jsonKey: "bonusWeapon", conv: (b) => typeof b === "string" && b.startsWith("+") },
  { callSign: "PROPERTIES", jsonKey: "property", conv: (arr) => Array.isArray(arr) ? arr.map((p) => PROPERTY_MAP[p] || p) : [] },
  { callSign: "DAMAGE", jsonKey: "dmg1", conv: (d, all) => d ? all.dmg2 ? `${d} / ${all.dmg2}` : `${d}` : void 0 },
  { callSign: "DAMAGE_TYPES", jsonKey: "dmgType", conv: (dt) => dt == null ? [] : Array.isArray(dt) ? dt : [dt] },
  { callSign: "RANGE", jsonKey: "range" },
  { callSign: "RELOAD", jsonKey: "reload" },
  { callSign: "AMMO_TYPE", jsonKey: "ammoType" },
  { callSign: "STEALTH_DISADVANTAGE", jsonKey: "stealth" },
  {
    callSign: "ATTUNEMENT",
    jsonKey: ["wondrous", "reqAttune", "req_attune", "reqAttuneTags"],
    conv: (_raw, allJson) => {
      const j = allJson;
      const hasText = typeof j.reqAttune === "string" && j.reqAttune.trim() !== "";
      const hasTags = Array.isArray(j.reqAttuneTags) && j.reqAttuneTags.length > 0;
      return hasText || hasTags;
    }
  },
  {
    callSign: "ATTUNE_REQ",
    jsonKey: "reqAttuneTags",
    conv: (tags = [], _all) => {
      const mapLetter = {
        A: "Any",
        U: "Unaligned",
        N: "Neutral",
        L: "Lawful",
        C: "Chaotic",
        G: "Good",
        E: "Evil"
      };
      const reqs = [];
      for (const tag of tags) {
        if (tag.class && Array.isArray(tag.alignment)) {
          const cls = cap(tag.class);
          for (const code of tag.alignment) {
            reqs.push(`${mapLetter[code] || code} ${cls}`);
          }
        } else if (tag.class) {
          reqs.push(cap(tag.class));
        } else if (Array.isArray(tag.alignment)) {
          for (const code of tag.alignment) {
            reqs.push(mapLetter[code] || code);
          }
        } else if (tag.background) {
          const [bg] = String(tag.background).split("|");
          reqs.push(bg.split(" ").map(cap).join(" "));
        } else if (tag.spellcasting) {
          reqs.push("Spellcaster");
        }
      }
      return Array.from(new Set(reqs));
    }
  },
  // ─── Other ───
  { callSign: "DAMAGE_RES", jsonKey: "resist", conv: (v) => Array.isArray(v) ? v.map(cap) : [] },
  { callSign: "RULESET", jsonKey: "_editionId" },
  // ─── Ability‐score modifiers (only emit when nonzero) ───
  {
    callSign: "STR_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].str ?? 0 : arr.str ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "DEX_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].dex ?? 0 : arr.dex ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CON_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].con ?? 0 : arr.con ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "INT_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].int ?? 0 : arr.int ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "WIS_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].wis ?? 0 : arr.wis ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CHA_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].cha ?? 0 : arr.cha ?? 0;
      return v !== 0 ? v : void 0;
    }
  }
];
function buildFM(json, defs) {
  const fm = {};
  for (const { callSign, jsonKey, conv } of defs) {
    const keys = Array.isArray(jsonKey) ? jsonKey : [jsonKey];
    let raw = void 0;
    for (const key of keys) {
      if (json[key] != null) {
        raw = json[key];
        break;
      }
    }
    if (raw == null) continue;
    const val = conv ? conv(raw, json) : raw;
    fm[FM_FIELDS[callSign]] = val;
  }
  return fm;
}
function serializeFrontmatter(fm, defs) {
  const filtered = {};
  const hasSkillChoice = Array.isArray(fm[FM_FIELDS.SKILL_CHOICE_LIST]) && fm[FM_FIELDS.SKILL_CHOICE_LIST].length > 0;
  const hasToolChoice = Array.isArray(fm[FM_FIELDS.TOOL_CHOICE_LIST]) && fm[FM_FIELDS.TOOL_CHOICE_LIST].length > 0;
  for (const [k, v] of Object.entries(fm)) {
    if (v === void 0) continue;
    if (k === FM_FIELDS.COMPONENTS && Array.isArray(v) && v.length === 0) continue;
    if ((k === FM_FIELDS.TOOL_CHOICE_LIST || k === FM_FIELDS.SKILL_CHOICE_LIST) && Array.isArray(v) && v.length === 0) continue;
    filtered[k] = v;
  }
  let keysToEmit;
  if (defs) {
    const wanted = defs.map((d) => FM_FIELDS[d.callSign]);
    keysToEmit = wanted.filter((k) => k in filtered);
    keysToEmit.push(
      ...Object.keys(filtered).filter((k) => !keysToEmit.includes(k))
    );
  } else {
    keysToEmit = Object.keys(filtered);
  }
  return keysToEmit.map((k) => {
    const v = filtered[k];
    if (Array.isArray(v)) {
      const inline = v.map((item) => JSON.stringify(item)).join(", ");
      return `${k}: [${inline}]`;
    }
    if (typeof v === "string") {
      return `${k}: "${v}"`;
    }
    return `${k}: ${v}`;
  }).join("\n");
}
var SKILL_OPTIONS = [
  "Acrobatics",
  "Animal Handling",
  "Arcana",
  "Athletics",
  "Deception",
  "History",
  "Insight",
  "Intimidation",
  "Investigation",
  "Medicine",
  "Nature",
  "Perception",
  "Performance",
  "Persuasion",
  "Religion",
  "Sleight of Hand",
  "Stealth",
  "Survival"
];
var SPELL_KEYS = [
  "NAME",
  "LEVEL",
  "SCHOOL",
  "CASTING_TIME",
  "SPELL_RANGE",
  "DURATION",
  "VERBAL",
  "SOMATIC",
  "MATERIAL",
  "COMPONENTS",
  "CONCENTRATION",
  "SOURCE"
];
var SPECIES_KEYS = [
  "SPECIES",
  "SIZE",
  "SPEED",
  "LANGUAGES",
  "TRAITS",
  "SKILLS",
  "STR_MOD",
  "DEX_MOD",
  "CON_MOD",
  "INT_MOD",
  "WIS_MOD",
  "CHA_MOD",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "WEAPON_PROFICIENCIES",
  "SENSES",
  "DAMAGE_RES",
  "SOURCE"
];
var ITEM_KEYS = [
  "NAME",
  "TYPE",
  "RARITY",
  "COST",
  "WEIGHT",
  "SOURCE",
  "PROPERTIES",
  "DAMAGE",
  "DAMAGE_TYPES",
  "RANGE",
  "RELOAD",
  "AMMO_TYPE",
  "AC",
  "STEALTH_DISADVANTAGE",
  "MAGICAL",
  "ATTUNEMENT",
  "ATTUNE_REQ"
];
var BESTIARY_KEYS = [
  "NAME",
  "SIZE",
  "TYPE",
  "ALIGNMENT",
  "AC",
  "HP",
  "SPEED",
  "STRENGTH",
  "DEXTERITY",
  "CONSTITUTION",
  "INTELLIGENCE",
  "WISDOM",
  "CHARISMA",
  "SAVING_THROWS",
  "SKILLS",
  "SENSES",
  "LANGUAGES",
  "CHALLENGE_RATING",
  "SOURCE"
];
var CLASS_KEYS = [
  "NAME",
  "SPELL_CAST_MOD",
  "ARMOR_PROFICIENCIES",
  "WEAPON_PROFICIENCIES",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "SAVING_THROWS",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TRAITS",
  "SOURCE"
];
var BACKGROUND_KEYS = [
  "NAME",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "TRAITS",
  "SOURCE"
];
var FEATS_KEYS = [
  "SOURCE"
];
var SPELL_META_DEFS = SPELL_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPELL_KEY ${key}`);
  return def;
});
var SPECIES_META_DEFS = SPECIES_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPECIES_KEY ${key}`);
  return def;
});
var ITEM_META_DEFS = ITEM_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for ITEM_KEY ${key}`);
  return def;
});
var BESTIARY_META_DEFS = BESTIARY_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BESTIARY_KEY ${key}`);
  return def;
});
var CLASS_META_DEFS = CLASS_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for CLASS_KEY ${key}`);
  return def;
});
var BACKGROUND_META_DEFS = BACKGROUND_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});
var FEATS_META_DEFS = FEATS_KEYS.map((key) => {
  const def = ALL_FIELD_DEFS.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});

// src/parsers/5e-json/spells.ts
var SCHOOL_MAP = {
  A: "Abjuration",
  C: "Conjuration",
  D: "Divination",
  E: "Enchantment",
  V: "Evocation",
  I: "Illusion",
  N: "Necromancy",
  T: "Transmutation"
};
function ordinal(n) {
  const suffix = n === 1 ? "st" : n === 2 ? "nd" : n === 3 ? "rd" : "th";
  return `${n}${suffix}`;
}
function formatRange(range) {
  if (!range) return "";
  if (typeof range === "string") return range;
  if (range.type === "special") return "Special";
  if (range.type === "point" && range.distance) {
    const dist = range.distance;
    if (dist.type === "touch") return "Touch";
    if (dist.type === "self") return "Self";
    if (dist.type === "sight") return "Sight";
    if (dist.amount) return `${dist.amount} ${dist.type}`;
  }
  return "Varies";
}
function formatTime(time) {
  if (!Array.isArray(time)) return "";
  return time.map((t) => `${t.number} ${t.unit}`).join(", ");
}
function formatDuration(duration) {
  if (!Array.isArray(duration)) return "";
  return duration.map((d) => {
    if (d.type === "instant") return "Instantaneous";
    if (d.type === "timed" && d.duration) {
      return `${d.duration.amount} ${d.duration.type}${d.concentration ? " (concentration)" : ""}`;
    }
    if (d.type === "permanent") return "Permanent";
    return "Special";
  }).join(", ");
}
function formatComponents(components) {
  if (!components) return "";
  const parts = [];
  if (components.v) parts.push("V");
  if (components.s) parts.push("S");
  if (components.m) {
    let matDetails = [];
    if (Array.isArray(components.m)) {
      matDetails = components.m.map(
        (item) => typeof item === "string" ? item : item && typeof item.text === "string" ? item.text : null
      ).filter((t) => !!t);
    } else if (typeof components.m === "string") {
      matDetails = [components.m];
    } else if (components.m.text) {
      matDetails = [components.m.text];
    }
    const matPart = matDetails.length > 0 ? `M (${matDetails.join(", ")})` : "M";
    parts.push(matPart);
  }
  return parts.join(", ");
}
function parseSpellsFile(json, editionId) {
  if (!json.spell) return [];
  json._editionId = editionId;
  return json.spell.map((spell) => {
    const sources = spell.source ? Array.isArray(spell.source) ? spell.source : [spell.source] : ["unknown"];
    const name = spell.name;
    const school = SCHOOL_MAP[spell.school] ?? spell.school;
    const level = spell.level;
    const range = formatRange(spell.range);
    const castingTime = formatTime(spell.time);
    const duration = formatDuration(spell.duration);
    const formattedSources = sources.map((s) => getFullSourceName(s, editionId));
    const attackType = spell.attackType || "";
    const damageType = spell.damageInflict?.[0] || "Teleportation";
    const ritual = spell.ritual === true;
    const concentration = spell.duration?.some((d) => d.concentration) ?? false;
    const FM = buildFM(spell, SPELL_META_DEFS);
    const yaml = serializeFrontmatter(FM, SPELL_META_DEFS);
    const safeName = name.replace(/\//g, "-");
    const title = `# ${name}`;
    const levelLabel = level === 0 ? `${school} Cantrip` : `${ordinal(level)}-level ${school} Spell`;
    const subtitle = `### *${levelLabel}*${concentration ? " *(Concentration)*" : ""}`;
    const headerLines = [
      title,
      subtitle,
      `**Casting Time:** ${castingTime}`,
      `**Range:** ${range}`,
      `**Components:** ${formatComponents(spell.components)}`,
      `**Duration:** ${duration}`
    ];
    const bodyLines = [
      ...(spell.entries ?? []).map((e) => formatEntry(e)),
      ...(spell.entriesHigherLevel ?? []).map((e) => formatEntry(e))
    ];
    const footerLines = [
      `---`,
      `**Source:** ${formattedSources.join(", ")}`
    ];
    return {
      path: `${safeName}.md`,
      content: [
        `---
${yaml}
---`,
        headerLines.join("\n"),
        ``,
        bodyLines.join("\n\n"),
        ``,
        footerLines.join("\n")
      ].join("\n")
    };
  });
}

// src/parsers/5e-json/species.ts
function slug(name) {
  return name.replace(/;/g, ":").replace(/[\/:"]/g, ":").trim();
}
var BLOCKED_TRAITS = ["Age", "Size", "Languages", "Creature Type", "Speed"];
function parseSpeciesFile(json, editionId) {
  if (!Array.isArray(json.race)) return [];
  json._editionId = editionId;
  const rawVariants = json.race.filter(
    (r) => !("reprintedAs" in r) && !/\((?:Kaladesh|Zendikar|Amonkhet|Innistrad|Ixalan)\)$/.test(r.name)
  );
  const byName = /* @__PURE__ */ new Map();
  for (const r of rawVariants) {
    const list = byName.get(r.name) ?? [];
    list.push(r);
    byName.set(r.name, list);
  }
  const subracesList = Array.isArray(json.subrace) ? json.subrace : [];
  const out = [];
  for (const [raceName, raceVariants] of byName.entries()) {
    const safeName = slug(raceName);
    const primary = raceVariants.reduce(
      (best, cur) => Object.keys(cur).length > Object.keys(best).length ? cur : best,
      raceVariants[0]
    );
    if (!primary.ability) {
      const humanEntry = subracesList.find(
        (sr) => sr.raceName === raceName && sr.raceSource === primary.source && !("name" in sr) && Array.isArray(sr.ability)
      );
      if (humanEntry) primary.ability = humanEntry.ability;
    }
    const fm = buildFM(primary, SPECIES_META_DEFS);
    const senses = [];
    if (primary.darkvision) senses.push(`Darkvision ${primary.darkvision} ft.`);
    if (primary.blindsight) senses.push(`Blindsight ${primary.blindsight} ft.`);
    if (primary.tremorsense) senses.push(`Tremorsense ${primary.tremorsense} ft.`);
    if (primary.truesight) senses.push(`Truesight ${primary.truesight} ft.`);
    if (senses.length) fm.senses = senses;
    if (Array.isArray(fm.traits)) {
      fm.traits = fm.traits.filter((t) => !BLOCKED_TRAITS.includes(t));
    }
    const yaml = serializeFrontmatter(fm, SPECIES_META_DEFS);
    const lines = [];
    lines.push(`# ${raceName}`, `## Stats`);
    const size = Array.isArray(primary.size) ? primary.size.map((s) => SIZE_MAP2[s] || s).join("/") : SIZE_MAP2[primary.size] ?? primary.size;
    lines.push(`**Size:** ${size}`);
    const speed = typeof primary.speed === "number" ? primary.speed : primary.speed?.walk ?? primary.speed?.base ?? 0;
    lines.push(`**Speed:** ${speed} ft. walking`);
    const kids = subracesList.filter(
      (sr) => sr.name && sr.raceName === raceName && sr.raceSource === primary.source
    );
    const rawAbility = Array.isArray(primary.ability) ? primary.ability : Array.isArray(kids[0]?.ability) ? kids[0].ability : [];
    if (Array.isArray(rawAbility) && rawAbility.length) {
      const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
      let chooseOpt = null;
      for (const obj of rawAbility) {
        if ("choose" in obj) chooseOpt = obj.choose;
        else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
      }
      const pairs = Object.entries(bonuses);
      const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
      if (chooseOpt?.count && Array.isArray(chooseOpt.from)) {
        parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
      }
      if (parts.length) lines.push(`**Ability Scores:** ${parts.join(", ")}`);
    }
    const langs = fm.languages;
    if (langs?.length) lines.push(`**Languages:** ${langs.join(", ")}`);
    if (Array.isArray(primary.skillProficiencies)) {
      const skillLabels = [];
      for (const e of primary.skillProficiencies) {
        if (e.choose?.from) {
          skillLabels.push(`Choose from: ${e.choose.from.map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(", ")}`);
        } else {
          const val = e.proficiency ?? e.name ?? e;
          if (typeof val === "string") skillLabels.push(val.charAt(0).toUpperCase() + val.slice(1));
        }
      }
      if (skillLabels.length) lines.push(`**Skill Proficiencies:** ${skillLabels.join("; ")}`);
    }
    const tp = fm[FM_FIELDS.TOOL_PROFICIENCIES];
    const wp = fm[FM_FIELDS.WEAPON_PROFICIENCIES];
    const ap = fm[FM_FIELDS.ARMOR_PROFICIENCIES];
    if (tp?.length) lines.push(`**Tool Proficiencies:** ${tp.join(", ")}`);
    if (wp?.length) lines.push(`**Weapon Proficiencies:** ${wp.join(", ")}`);
    if (ap?.length) lines.push(`**Armor Proficiencies:** ${ap.join(", ")}`);
    lines.push(`## Traits`);
    const seen = /* @__PURE__ */ new Set();
    for (const trait of fm.traits || []) {
      lines.push(`##### ${trait}`);
      const ent = primary.entries?.find((e) => e.name === trait);
      if (ent?.entries) {
        ent.entries.forEach((sub, idx) => {
          let blk;
          if (sub.type === "table") blk = renderMarkdownTable(sub);
          else if (sub.type === "list") blk = sub.items.map((it) => typeof it === "string" ? `- ${replace5eTags(it)}` : `- ${it.name}`).join("\n");
          else if (typeof sub === "string") blk = replace5eTags(sub);
          if (blk && !seen.has(blk)) {
            lines.push(blk);
            seen.add(blk);
            if (ent.entries.length > 1 && idx < ent.entries.length - 1) lines.push("");
          }
        });
      }
    }
    const subs = kids;
    if (subs.length) {
      out.push({
        path: `Species/${safeName}/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
      const subFolder = `Species/${safeName}/Subspecies`;
      for (const sr of subs) {
        const display = sr.name.replace(/;/g, ":");
        const subLines = [`# ${display}`];
        if (Array.isArray(sr.ability)) {
          const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
          let chooseOpt = null;
          for (const obj of sr.ability) {
            if ("choose" in obj) chooseOpt = obj.choose;
            else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
          }
          const pairs = Object.entries(bonuses);
          const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
          if (chooseOpt?.count) parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
          if (parts.length) subLines.push(`**Ability Scores:** ${parts.join(", ")}`);
        }
        for (const entry of sr.entries || []) {
          subLines.push(formatEntry(entry));
          subLines.push("");
        }
        const subYaml = serializeFrontmatter(buildFM(sr, SPECIES_META_DEFS), SPECIES_META_DEFS);
        out.push({
          path: `${subFolder}/${slug(sr.name)}.md`,
          content: `---
${subYaml}
---

${subLines.join("\n")}`
        });
      }
    } else {
      out.push({
        path: `Species/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
    }
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-json/classes.ts
function formatFeatureLink(name) {
  const ignore = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
  if (ignore.some((sub) => name.toLowerCase().includes(sub.toLowerCase()))) {
    return name;
  }
  const anchor = name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
  return `[[#${anchor}]]`;
}
var OPT_FEATURE_TYPE_TO_FULL = {
  AI: "Artificer Infusion",
  ED: "Elemental Discipline",
  EI: "Eldritch Invocation",
  MM: "Metamagic",
  MV: "Maneuver",
  "MV:B": "Maneuver, Battle Master",
  "MV:C2-UA": "Maneuver, Cavalier V2 (UA)",
  "AS:V1-UA": "Arcane Shot, V1 (UA)",
  "AS:V2-UA": "Arcane Shot, V2 (UA)",
  AS: "Arcane Shot",
  OTH: "Other",
  "FS:F": "Fighting Style; Fighter",
  "FS:B": "Fighting Style; Bard",
  "FS:P": "Fighting Style; Paladin",
  "FS:R": "Fighting Style; Ranger",
  PB: "Pact Boon",
  OR: "Onomancy Resonant",
  RN: "Rune Knight Rune",
  AF: "Alchemical Formula",
  TT: "Traveler's Trick"
};
function parseClassFile(json, editionId, fileName, optionalFeatures) {
  json._editionId = editionId;
  const cls = Array.isArray(json.class) ? json.class[0] : json;
  const className = typeof cls.name === "string" ? cls.name : fileName ? fileName.replace(/^class-/, "").replace(/\.json$/, "") : "Unknown";
  const subclassFiles = [];
  const PROF_BONUS_BY_LEVEL = [
    "+2",
    "+2",
    "+2",
    "+2",
    "+3",
    "+3",
    "+3",
    "+3",
    "+4",
    "+4",
    "+4",
    "+4",
    "+5",
    "+5",
    "+5",
    "+5",
    "+6",
    "+6",
    "+6",
    "+6"
  ];
  const hdNum = cls.hd?.number ?? 1;
  const hdFaces = cls.hd?.faces ?? 6;
  const hdStr = `${hdNum}d${hdFaces}`;
  const hdMax = hdNum * hdFaces;
  const hdAvg = Math.ceil((hdFaces + 1) / 2);
  const baseFM = buildFM(cls, CLASS_META_DEFS);
  const fm = { ...baseFM, hd: hdStr };
  const yaml = serializeFrontmatter(fm, CLASS_META_DEFS);
  const lines = [];
  lines.push(`# ${className}`);
  if (cls.source) lines.push(`**Source:** ${cls.source}`);
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Hit Points`);
  lines.push(`**Hit Dice:** ${hdStr} per ${className} level`);
  lines.push(`**Hit Points at 1st Level:** ${hdMax} + your Constitution modifier`);
  lines.push(
    `**Hit Points at Higher Levels:** ${hdStr} (or ${hdAvg}) + your Constitution modifier per level after 1st`
  );
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Proficiencies`);
  const sp = cls.startingProficiencies ?? {};
  if (Array.isArray(sp.armor) && sp.armor.length) {
    lines.push(`- **Armor:** ${sp.armor.join(", ")}`);
  }
  const weaponList = unifiedWeaponProfs(sp);
  if (weaponList.length) {
    lines.push(`- **Weapons:** ${weaponList.join(", ")}`);
  }
  const toolList = unifiedToolProfs(sp);
  if (toolList.length) {
    lines.push(`- **Tools:** ${toolList.join(", ")}`);
  }
  const saves = Array.isArray(cls.proficiency) ? cls.proficiency.map(
    (k) => ({
      str: "Strength",
      dex: "Dexterity",
      con: "Constitution",
      int: "Intelligence",
      wis: "Wisdom",
      cha: "Charisma"
    })[k] || k.toUpperCase()
  ) : [];
  if (saves.length) {
    lines.push(`- **Saving Throws:** ${saves.join(", ")}`);
  }
  {
    const rawSkills = Array.isArray(sp.skillProficiencies) ? sp.skillProficiencies : Array.isArray(sp.skills) ? sp.skills : Array.isArray(sp.skillProf) ? sp.skillProf : [];
    const choiceEntry = rawSkills.find(
      (e) => e && (typeof e.choose === "object" || typeof e.any === "number")
    );
    if (choiceEntry) {
      const count = choiceEntry.choose?.count ?? choiceEntry.any ?? 1;
      const options = Array.isArray(choiceEntry.choose?.from) ? choiceEntry.choose.from.map(
        (s) => (
          // title-case each word (or just use s)
          s.split(" ").map((w) => w[0].toUpperCase() + w.slice(1)).join(" ")
        )
      ) : SKILL_OPTIONS;
      lines.push(`- **Skills (Choose ${count}):** ${options.join(", ")}`);
    } else {
      const flat = unifiedSkills2(sp);
      if (flat.length) {
        lines.push(`- **Skills:** ${flat.join(", ")}`);
      }
    }
  }
  if (Array.isArray(cls.startingEquipment)) {
    lines.push(`
### Equipment`);
    cls.startingEquipment.filter((e) => typeof e === "string").forEach((item) => lines.push(`- ${item}`));
  }
  const progGroups = cls.classTableGroups ?? [];
  const maxLevel = 20;
  if (!progGroups.length) {
    lines.push(`*(No class table provided for this class.)*`);
  } else {
    const featuresByLevel2 = {};
    for (const feat of cls.classFeatures ?? []) {
      const raw = typeof feat === "object" && feat.classFeature ? feat.classFeature : String(feat);
      const [name, , , lvlStr] = raw.split("|");
      const lvl = Number(lvlStr ?? 0);
      if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
      featuresByLevel2[lvl].push(name);
    }
    const allLabelsSet = /* @__PURE__ */ new Set();
    const rowMaps = {};
    for (const group of progGroups) {
      const labels = Array.isArray(group.colLabels) ? group.colLabels.map((l) => replace5eTags(l)) : [];
      const rows = Array.isArray(group.rows) ? group.rows : Array.isArray(group.rowsSpellProgression) ? group.rowsSpellProgression : [];
      if (!labels.length || !rows.length) continue;
      for (let lvl = 0; lvl < rows.length; lvl++) {
        const levelNum = lvl + 1;
        if (!rowMaps[levelNum]) rowMaps[levelNum] = {};
        const rowMap = rowMaps[levelNum];
        const cells = rows[lvl];
        for (let i = 0; i < labels.length; i++) {
          const label = labels[i];
          let val = "";
          const cell = cells[i];
          if (Array.isArray(cell)) {
            val = cell.join(", ");
          } else if (cell && typeof cell === "object" && "value" in cell) {
            val = String(cell.value);
          } else {
            val = String(cell ?? "");
          }
          allLabelsSet.add(label);
          rowMap[label] = val;
        }
      }
    }
    const allLabels = Array.from(allLabelsSet).filter(
      (lbl) => !/Cantrips Known|Spells Known|\d+(st|nd|rd|th)/.test(lbl)
    );
    const mergedLabels = ["Level", "Proficiency Bonus", "Class Features", ...allLabels];
    const mergedRows = [];
    for (let lvl = 1; lvl <= maxLevel; lvl++) {
      const featureList = (featuresByLevel2[lvl] ?? []).map(formatFeatureLink);
      const rowMap = rowMaps[lvl] ?? {};
      mergedRows.push([
        lvl.toString(),
        PROF_BONUS_BY_LEVEL[lvl - 1] || "",
        featureList.join(", ").replace(/\|/g, "&#124;"),
        ...allLabels.map((label) => rowMap[label] ?? "")
      ]);
    }
    lines.push(`
> [!example]- Class Progression Table`);
    lines.push(
      renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels: mergedLabels,
        rows: mergedRows
      })
    );
  }
  const csGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.colLabels.some((lbl) => /Cantrips Known|Spells Known/.test(String(lbl)))
  );
  const slotGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.title === "Spell Slots per Spell Level"
  );
  if (csGroup && slotGroup) {
    const csLabels = csGroup.colLabels.map((l) => replace5eTags(l));
    const slotLabels = slotGroup.colLabels.map((l) => replace5eTags(l));
    const csRows = csGroup.rows || [];
    const slotRows = slotGroup.rowsSpellProgression || [];
    const colLabels = ["Level", ...csLabels, ...slotLabels];
    const spellRows = [];
    for (let i = 0; i < Math.max(csRows.length, slotRows.length); i++) {
      const lvl = String(i + 1);
      const csCells = csRows[i] ? csRows[i].map(String) : csLabels.map((_) => "");
      const slotCells = slotRows[i] ? slotRows[i].map(String) : slotLabels.map((_) => "");
      spellRows.push([lvl, ...csCells, ...slotCells]);
    }
    lines.push(`
> [!tip]- Spell Progression Table`);
    lines.push(
      renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels,
        rows: spellRows
      })
    );
  }
  const subs = Array.isArray(json.subclass) ? json.subclass : [];
  const subclassFeatures = Array.isArray(json.subclassFeature) ? json.subclassFeature : json.lookup?.subclassFeature ?? [];
  for (const sc of subs) {
    const subclassName = sc.name;
    const subLines = [];
    subLines.push(`# ${subclassName}`);
    subLines.push(`**Parent Class:** [[${className}]]`);
    if (sc.source) subLines.push(`**Source:** ${sc.source}`);
    subLines.push(``);
    const intro = subclassFeatures.find(
      (f) => f.name === sc.name && f.level === 3 && f.subclassShortName === sc.shortName && f.subclassSource === sc.source
    );
    if (intro?.entries?.length) {
      const introText = Array.isArray(intro.entries) ? intro.entries.map(
        (e) => typeof e === "string" ? replace5eTags(e) : formatEntry(e)
      ).join("\n\n") : formatEntry(intro.entries);
      subLines.push(introText, ``);
    }
    const code = Object.entries(OPT_FEATURE_TYPE_TO_FULL).find(
      ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
    )?.[0];
    if (code) {
      const matches = optionalFeatures.filter(
        (of) => Array.isArray(of.featureType) && of.featureType.includes(code)
      );
      if (matches.length) {
        subLines.push(`## ${subclassName} Optional Features`);
        for (const feat of matches) {
          for (const entry of feat.entries) {
            const txt = typeof entry === "string" ? replace5eTags(entry) : formatEntry(entry);
            subLines.push(`**${feat.name}:** ${txt}`);
          }
          subLines.push(``);
        }
      }
    }
    const prog = sc.subclassTableGroups ?? [];
    if (prog.length) {
      const labels = /* @__PURE__ */ new Set();
      const rowsMap = {};
      for (const g of prog) {
        const cols = (g.colLabels ?? []).map(replace5eTags);
        const rows = Array.isArray(g.rows) ? g.rows : Array.isArray(g.rowsSpellProgression) ? g.rowsSpellProgression : [];
        rows.forEach((r, i) => {
          const lvl = i + 1;
          rowsMap[lvl] ?? (rowsMap[lvl] = {});
          r.forEach((c, j) => {
            const lab = cols[j];
            if (!lab) return;
            labels.add(lab);
            rowsMap[lvl][lab] = typeof c === "object" && c !== null && "value" in c ? String(c.value) : String(c ?? "");
          });
        });
      }
      const hdrs = Array.from(labels);
      subLines.push(`## Subclass Progression`);
      subLines.push(renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels: ["Level", ...hdrs],
        rows: Array.from({ length: 20 }, (_, i) => {
          const lvl = i + 1;
          return [String(lvl), ...hdrs.map((h) => rowsMap[lvl]?.[h] ?? "")];
        })
      }));
    }
    const featsByLvl = {};
    for (const f of subclassFeatures) {
      if (f.subclassShortName === sc.shortName && f.subclassSource === sc.source && f.className === className) {
        const lvl = f.level ?? 0;
        ;
        (featsByLvl[lvl] ?? (featsByLvl[lvl] = [])).push(f);
      }
    }
    for (const lvl of Object.keys(featsByLvl).map(Number).sort((a, b) => a - b)) {
      subLines.push(`---`, `## Level ${lvl}`);
      for (const f of featsByLvl[lvl]) {
        subLines.push(`### ${f.name}`);
        for (const ent of Array.isArray(f.entries) ? f.entries : [f.entries]) {
          if (typeof ent === "string") {
            subLines.push(replace5eTags(ent));
            continue;
          }
          if (ent.type === "entries" && /^Maneuvers$/i.test(ent.name)) {
            subLines.push(`##### ${ent.name}`);
            for (const txt of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(typeof txt === "string" ? replace5eTags(txt) : formatEntry(txt));
            }
            const code2 = Object.entries(OPT_FEATURE_TYPE_TO_FULL).find(
              ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
            )?.[0];
            if (code2) {
              const matches = optionalFeatures.filter(
                (of) => Array.isArray(of.featureType) && of.featureType.includes(code2)
              );
              for (const featDef of matches) {
                for (const sub of featDef.entries) {
                  const line = typeof sub === "string" ? replace5eTags(sub) : formatEntry(sub);
                  subLines.push(`**${featDef.name}:** ${line}`);
                }
                subLines.push("");
              }
            }
            continue;
          }
          if (ent.type === "entries" && ent.name) {
            subLines.push(`##### ${ent.name}`);
            for (const e2 of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(formatEntry(e2));
            }
            continue;
          }
          if (ent.type === "inset" && ent.name) {
            const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
            subLines.push(`> **${ent.name}**`);
            inner.forEach((e2) => subLines.push(`> ${formatEntry(e2)}`));
            continue;
          }
          const fb = formatEntry(ent);
          if (fb) subLines.push(fb);
        }
      }
    }
    const subclassContent = subLines.join("\n\n").replace(/\n{3,}/g, "\n\n");
    subclassFiles.push({
      path: `Classes/${className}/Subclasses/${subclassName}.md`,
      content: subclassContent
    });
  }
  if (subs.length) {
    const links = subs.map(
      (sc) => `[[Subclasses/${sc.name.replace(/[\\/]/g, "-")}|${sc.name}]]`
    );
    lines.push(`
**Subclasses:** ${links.join(", ")}`);
  }
  const allFeatures = Array.isArray(json.classFeature) ? json.classFeature : json.lookup?.classFeature ?? [];
  const featuresByLevel = {};
  for (const entry of allFeatures) {
    if (entry.className !== className) continue;
    const lvl = entry.level ?? 0;
    if (!featuresByLevel[lvl]) featuresByLevel[lvl] = [];
    featuresByLevel[lvl].push(entry);
  }
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Level Features`);
  const levels = Object.keys(featuresByLevel).map((n) => +n).sort((a, b) => a - b);
  for (const lvl of levels) {
    lines.push(`### Level ${lvl}`);
    for (const feat of featuresByLevel[lvl]) {
      lines.push(`#### ${feat.name}`);
      const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
      for (const ent of entries) {
        if (typeof ent === "string") {
          const txt = formatEntry(ent).trim();
          if (txt === "{" || txt === "}") continue;
          lines.push(txt);
          continue;
        }
        if (ent.type === "list" && Array.isArray(ent.items)) {
          for (const item of ent.items) {
            lines.push(`- ${replace5eTags(item)}`);
          }
          continue;
        }
        if (ent.type === "options") {
          if (ent.count) {
            lines.push("");
            lines.push(`**Choose ${ent.count} of the following options:**`);
            lines.push("");
          }
          for (const optRef of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
            if (optRef.type === "refOptionalfeature") {
              const [optName, optSrc] = optRef.optionalfeature.split("|");
              const featDef = optionalFeatures.find(
                (f) => f.name === optName && (!optSrc || f.source === optSrc)
              );
              if (featDef) {
                featDef.entries.forEach((subEntry, idx) => {
                  const text = typeof subEntry === "string" ? replace5eTags(subEntry) : formatEntry(subEntry);
                  if (idx === 0) {
                    lines.push(`- **${featDef.name}:** ${text}`);
                  } else {
                    lines.push(`  - ${text}`);
                  }
                });
                lines.push("");
              } else {
                lines.push(`**${optName}:**`);
              }
            } else {
              const txt = formatEntry(optRef);
              if (txt) lines.push(`- ${txt}`);
            }
          }
          continue;
        }
        if (ent.type === "refOptionalfeature") {
          const [name] = ent.optionalfeature.split("|");
          lines.push(`- [[${name}|${name}]]`);
          continue;
        }
        if (ent.type === "entries" && ent.name) {
          lines.push(`##### ${ent.name}`);
          const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
          for (const e2 of inner) {
            lines.push(formatEntry(e2));
          }
          continue;
        }
        const fallback = formatEntry(ent);
        if (fallback) lines.push(fallback);
      }
      lines.push(``);
    }
    lines.push(`---`);
  }
  let content = `---
${yaml}
---

${lines.join("\n")}`;
  content = replace5eTags(content);
  content = content.replace(/\n{3,}/g, "\n\n").replace(/\n +\n/g, "\n\n");
  return [
    {
      path: `Classes/${className}/${className}.md`,
      content
    },
    ...subclassFiles
  ];
}

// src/parsers/5e-json/rules.ts
function parseActionsFile(json, editionId) {
  if (!Array.isArray(json.action)) return [];
  const lines = [];
  for (const action of json.action) {
    lines.push(`## ${action.name}`);
    const entries = Array.isArray(action.entries) ? action.entries : [action.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else if ((entry.type === "entries" || entry.type === "inset") && Array.isArray(entry.entries)) {
        lines.push(`### ${entry.name}`);
        for (const sub of entry.entries) {
          if (typeof sub === "string") {
            const ps = sub.split(/\n{2,}/);
            for (const p of ps) {
              const tt = p.trim();
              if (tt) {
                lines.push(replace5eTags(tt));
                lines.push("");
              }
            }
          } else if (sub.type === "list" && Array.isArray(sub.items)) {
            for (const li of sub.items) {
              lines.push(`- ${replace5eTags(li)}`);
            }
            lines.push("");
          } else {
            const txt = Array.isArray(sub) ? sub.join(" ") : typeof sub === "object" ? JSON.stringify(sub) : String(sub);
            lines.push(replace5eTags(txt));
            lines.push("");
          }
        }
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const headers = entry.colLabels || [];
        lines.push(`| ${headers.join(" | ")} |`);
        lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
        for (const row of entry.rows) {
          lines.push(`| ${row.join(" | ")} |`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : typeof entry === "object" ? JSON.stringify(entry) : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Actions.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseConditionsDiseasesFile(json, editionId) {
  const outputs = [];
  const processItems = (items, outPath) => {
    const lines = [];
    for (const item of items) {
      lines.push(`## ${item.name}`);
      const entries = Array.isArray(item.entries) ? item.entries : [item.entries];
      for (const entry of entries) {
        if (!entry) continue;
        if (typeof entry === "string") {
          const paras = entry.split(/\n{2,}/);
          for (const para of paras) {
            const t = para.trim();
            if (t) {
              lines.push(replace5eTags(t));
              lines.push("");
            }
          }
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          for (const txt of entry.items) {
            lines.push(`- ${replace5eTags(txt)}`);
          }
          lines.push("");
        } else if (entry.type === "table" && Array.isArray(entry.rows)) {
          const headers = entry.colLabels || [];
          lines.push(`| ${headers.join(" | ")} |`);
          lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
          for (const row of entry.rows) {
            lines.push(`| ${row.join(" | ")} |`);
          }
          lines.push("");
        } else if (entry.type === "entries" && Array.isArray(entry.entries)) {
          lines.push(`### ${entry.name}`);
          for (const sub of entry.entries) {
            const txt = typeof sub === "string" ? sub : String(sub);
            lines.push(replace5eTags(txt));
            lines.push("");
          }
        } else {
          const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
          lines.push(replace5eTags(txt));
          lines.push("");
        }
      }
      lines.push("---");
    }
    const cleaned = lines.reduce((acc, curr) => {
      if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
      return acc.concat(curr);
    }, []);
    outputs.push({ path: outPath, content: cleaned.join("\n").trim() + "\n" });
  };
  processItems(json.condition || [], "Rules and Reference/Conditions.md");
  processItems(json.disease || [], "Rules and Reference/Diseases.md");
  return outputs;
}
function parseSensesFile(json, editionId) {
  const items = Array.isArray(json.sense) ? json.sense : Array.isArray(json.senses) ? json.senses : [];
  if (!items.length) return [];
  const lines = [];
  for (const sense of items) {
    lines.push(`## ${sense.name}`);
    const entries = Array.isArray(sense.entries) ? sense.entries : [sense.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else if ((entry.type === "entries" || entry.type === "inset") && Array.isArray(entry.entries)) {
        lines.push(`### ${entry.name}`);
        for (const sub of entry.entries) {
          const txt = typeof sub === "string" ? sub : String(sub);
          lines.push(replace5eTags(txt));
          lines.push("");
        }
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const headers = entry.colLabels || [];
        lines.push(`| ${headers.join(" | ")} |`);
        lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
        for (const row of entry.rows) {
          lines.push(`| ${row.join(" | ")} |`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Senses.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseSkillsFile(json, editionId) {
  const items = Array.isArray(json.skill) ? json.skill : Array.isArray(json.skills) ? json.skills : [];
  if (!items.length) return [];
  const lines = [];
  for (const skill of items) {
    lines.push(`## ${skill.name}`);
    if (skill.ability) {
      lines.push(`*Ability: ${skill.ability}*`);
      lines.push("");
    }
    const entries = Array.isArray(skill.entries) ? skill.entries : [skill.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Skills.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}

// src/parsers/5e-json/feats.ts
function parseFeatsFile(json, editionId) {
  const feats = Array.isArray(json.feat) ? json.feat : Array.isArray(json.feats) ? json.feats : [];
  return feats.map((feat) => {
    const lines = [];
    const fm = buildFM({ ...feat, _editionId: editionId }, FEATS_META_DEFS);
    lines.push("---");
    lines.push(serializeFrontmatter(fm, FEATS_META_DEFS));
    lines.push("---", "");
    lines.push(`# ${feat.name}`, "");
    const prereqs = [];
    if (Array.isArray(feat.prerequisite)) {
      feat.prerequisite.forEach((pr) => {
        if (pr.level) prereqs.push(`Level ${pr.level}`);
        if (Array.isArray(pr.feat)) {
          pr.feat.forEach((f) => {
            const name = f.split("|")[0].replace(/\b\w/g, (c) => c.toUpperCase());
            prereqs.push(`Prerequisite: [[${name}]]`);
          });
        }
      });
    }
    if (feat.spellcastingPrepared) prereqs.push(`Prerequisite: Spellcaster`);
    if (Array.isArray(feat.toolProficiencies)) {
      feat.toolProficiencies.forEach((tp) => {
        Object.entries(tp).forEach(([key]) => {
          if (key === "anyArtisansTool") {
            prereqs.push(`Prerequisite: Proficient with an artisan's tool`);
          } else {
            prereqs.push(`Prerequisite: Proficient with ${key.replace(/([A-Z])/g, " $1").trim()}`);
          }
        });
      });
    }
    if (Array.isArray(feat.armorProficiencies)) {
      feat.armorProficiencies.forEach((arm) => {
        const armStr = typeof arm === "string" ? arm : JSON.stringify(arm);
        prereqs.push(`Prerequisite: Proficient with ${armStr.replace(/([A-Z])/g, " $1").trim()}`);
      });
    }
    if (feat.race) prereqs.push(`Prerequisite: ${feat.race}`);
    if (prereqs.length) {
      lines.push("**Prerequisites**");
      prereqs.forEach((p) => lines.push(`- ${p}`));
      lines.push("");
    }
    const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
    entries.forEach((entry) => {
      if (!entry) return;
      if (typeof entry === "string") {
        entry.split(/\n{2,}/).forEach((p) => {
          const t = p.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        });
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        entry.items.forEach((it) => {
          if (typeof it === "string") {
            lines.push(`- ${replace5eTags(it)}`);
          } else if (it.type === "item" && it.name) {
            lines.push(`- **${it.name}**`);
            const subs = Array.isArray(it.entries) ? it.entries : [it.entries];
            subs.forEach(
              (s) => lines.push(`  - ${replace5eTags(typeof s === "string" ? s : JSON.stringify(s))}`)
            );
          }
        });
        lines.push("");
      } else if (entry.type === "inset") {
        lines.push(`- *${entry.name}*`);
        const subs = Array.isArray(entry.entries) ? entry.entries : [entry.entries];
        subs.forEach((s) => lines.push(`  - ${replace5eTags(s)}`));
        lines.push("");
      } else if ((entry.type === "section" || entry.type === "entries") && Array.isArray(entry.entries)) {
        if (entry.name) {
          lines.push(`## ${entry.name}`);
          lines.push("");
        }
        entry.entries.forEach((s) => {
          lines.push(replace5eTags(typeof s === "string" ? s : JSON.stringify(s)));
          lines.push("");
        });
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const hdr = entry.colLabels || [];
        lines.push(`| ${hdr.join(" | ")} |`);
        lines.push(`| ${hdr.map(() => "---").join(" | ")} |`);
        entry.rows.forEach(
          (row) => lines.push(`| ${row.join(" | ")} |`)
        );
        lines.push("");
      }
    });
    return {
      path: `Player Build/Feats/${feat.name}.md`,
      content: lines.join("\n").trim() + "\n"
    };
  });
}

// src/parsers/5e-json/backgrounds.ts
function parseBackgroundsFile(json, editionId) {
  const raw = Array.isArray(json.background) ? json.background : Array.isArray(json.backgrounds) ? json.backgrounds : [];
  const backgrounds = raw.filter((bg) => {
    const nm = bg.name || "";
    return !nm.startsWith("Variant") && !nm.includes("Baldur's Gate");
  });
  const outputs = [];
  backgrounds.forEach((bg) => {
    const lines = [];
    const fm = buildFM(bg, BACKGROUND_META_DEFS);
    const extraTraits = Array.isArray(bg.entries) ? bg.entries.filter((e) => e.data?.isFeature && typeof e.name === "string").map((e) => {
      const name = e.name.replace(/^Feature:\s*/, "");
      return `[[${bg.name}#${name}]]`;
    }) : [];
    const yaml = serializeFrontmatter(fm, BACKGROUND_META_DEFS);
    lines.push("---", yaml, "---", "");
    lines.push(`# ${bg.name}`, "");
    if (Array.isArray(bg.skillProficiencies) && bg.skillProficiencies.length) {
      const skills = [];
      bg.skillProficiencies.forEach((ent) => {
        if (typeof ent === "string") {
          skills.push(cap2(ent));
        } else if (ent.choose && Array.isArray(ent.choose.from)) {
          skills.push(`Choose ${ent.choose.amount} from ${ent.choose.from.join(", ")}`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => skills.push(cap2(k)));
        }
      });
      lines.push(`**Skill Proficiencies:** ${skills.join(", ")}`, "");
    }
    if (Array.isArray(bg.languageProficiencies) && bg.languageProficiencies.length) {
      const langs = [];
      bg.languageProficiencies.forEach((ent) => {
        if (ent.anyStandard) {
          langs.push(`${ent.anyStandard} of your choice`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => langs.push(cap2(k)));
        }
      });
      lines.push(`**Languages:** ${langs.join(", ")}`, "");
    }
    if (Array.isArray(bg.toolProficiencies) && bg.toolProficiencies.length) {
      const tools = [];
      bg.toolProficiencies.forEach((ent) => {
        if (ent.choose && Array.isArray(ent.choose.from)) {
          const list = ent.choose.from.map(humanize).join(", ");
          tools.push(`Choose ${ent.choose.count} from ${list}`);
          return;
        }
        if (typeof ent === "string") {
          tools.push(humanize(ent));
          return;
        }
        Object.entries(ent).filter(([_, v]) => v === true).forEach(([k]) => tools.push(humanize(k)));
      });
      lines.push(`**Tool Proficiencies:** ${tools.join(", ")}`, "");
    }
    if (Array.isArray(bg.startingEquipment) && bg.startingEquipment.length) {
      lines.push(`**Equipment:**`);
      bg.startingEquipment.forEach((grp) => {
        if (Array.isArray(grp._)) {
          grp._.forEach((it) => lines.push(`- ${fmtItem(it)}`));
        }
        ["a", "b"].forEach((key) => {
          if (Array.isArray(grp[key])) {
            grp[key].forEach((it) => lines.push(`- ${fmtItem(it)}`));
          }
        });
      });
      lines.push("");
    }
    if (Array.isArray(bg.entries)) {
      bg.entries.forEach((entry) => {
        if (entry.type === "list" && entry.style === "list-hang-notitle") {
          return;
        }
        if (entry.name) {
          const header = entry.data?.isFeature ? entry.name.replace(/^Feature:\s*/, "") : entry.name;
          lines.push(`## ${header}`, "");
        }
        if (Array.isArray(entry.entries)) {
          entry.entries.forEach((e) => {
            if (typeof e === "string") {
              lines.push(replace5eTags(e), "");
            } else if (e.type === "list" && Array.isArray(e.items)) {
              e.items.forEach(
                (it) => lines.push(`- ${replace5eTags(it.entry ?? it)}`)
              );
              lines.push("");
            } else if (e.type === "table") {
              const tbl = renderMarkdownTable(e);
              if (tbl) lines.push(tbl, "");
            }
          });
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          entry.items.forEach(
            (it) => lines.push(`- ${replace5eTags(it.entry ?? it)}`)
          );
          lines.push("");
        }
      });
    }
    outputs.push({
      path: `Player Build/Backgrounds/${bg.name}.md`,
      content: lines.join("\n").trimEnd() + "\n"
    });
  });
  return outputs;
}
function cap2(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function fmtItem(item) {
  if (typeof item === "string") {
    if (item.includes("|")) {
      return replace5eTags(`{@item ${item}}`);
    }
    return replace5eTags(item);
  }
  const priceRaw = item.containsValue ?? item.value;
  if (typeof priceRaw === "number" && // make sure it’s not also an “item” or “equipmentType”
  !item.item && !item.equipmentType && !item.special) {
    const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
    return `${gp} gp`;
  }
  if (item.item) {
    const link = replace5eTags(`{@item ${item.item}}`);
    if (typeof priceRaw === "number") {
      const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
      return `${link} (${gp} gp)`;
    }
    return link;
  }
  if (typeof item.special === "string") {
    return item.special;
  }
  if (item.equipmentType) {
    switch (item.equipmentType) {
      case "toolArtisan":
        return "One type of artisan\u2019s tools (of your choice)";
      case "instrumentMusical":
        return "One type of musical instrument (of your choice)";
      case "setGaming":
        return "One set of gaming dice (of your choice)";
      default:
        return humanize(item.equipmentType);
    }
  }
  return replace5eTags(JSON.stringify(item));
}
function humanize(str) {
  const spaced = str.replace(/([a-z])([A-Z])/g, "$1 $2");
  return spaced.charAt(0).toUpperCase() + spaced.slice(1);
}

// src/parsers/5e-json/installer.ts
var import_obsidian2 = require("obsidian");
async function listSpellFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/spells`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && item.name.startsWith("spells-") && item.name.endsWith(".json")).map((item) => item.name);
}
async function listBestiaryFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/bestiary`;
  const res = await fetch(url);
  const list = await res.json();
  const CORE_SOURCES = [
    "bestiary-phb.json",
    "bestiary-mm.json",
    "bestiary-dmg.json",
    "bestiary-xge.json",
    "bestiary-vgm.json",
    "bestiary-tce.json",
    "bestiary-egw.json",
    "bestiary-erlw.json",
    "bestiary-mtf.json",
    "bestiary-vrgr.json",
    "bestiary-cos.json",
    "bestiary-oota.json",
    "bestiary-pota.json",
    "bestiary-hotdq.json",
    "bestiary-rot.json",
    "bestiary-skt.json",
    "bestiary-tftyp.json",
    "bestiary-toa.json"
  ];
  return list.filter((item) => item.type === "file" && CORE_SOURCES.includes(item.name)).map((item) => item.name);
}
var ITEM_JSON_FILES = [
  "items-base.json",
  "items.json",
  "objects.json",
  "vehicles.json",
  "decks.json"
];
async function listItemFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && ITEM_JSON_FILES.includes(item.name)).map((item) => item.name);
}
async function listClassFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/class`;
  const res = await fetch(url);
  const listing = await res.json();
  return listing.filter(
    (item) => item.type === "file" && item.name.startsWith("class-") && item.name.endsWith(".json")
  ).map((item) => item.name);
}
async function ensureFolder(app, folderPath) {
  const parts = folderPath.split("/");
  let curr = "";
  for (const p of parts) {
    curr = curr ? `${curr}/${p}` : p;
    try {
      await app.vault.createFolder(curr);
    } catch {
    }
  }
}
async function importEditionData(params) {
  const { app, edition, targetPath } = params;
  const repo = edition.repo ?? "";
  {
    const spellFiles = await listSpellFilesFromGitHub(repo);
    for (const fileName of spellFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/spells/${fileName}`);
        const json = await res.json();
        const files = parseSpellsFile(json, edition.id);
        for (const md of files) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Spells/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import spell ${fileName}:`, e);
      }
    }
  }
  {
    const bestiaryFiles = await listBestiaryFilesFromGitHub(repo);
    for (const fileName of bestiaryFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/bestiary/${fileName}`);
        const json = await res.json();
        const parsed = parseBestiaryFile(json, edition.id);
        for (const md of parsed) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Bestiary/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import bestiary ${fileName}:`, e);
      }
    }
  }
  {
    const itemFiles = await listItemFilesFromGitHub(repo);
    for (const fn of itemFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/${fn}`);
        const json = await res.json();
        const mdFiles = parseItemsFile(json, edition.id);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import items from ${fn}:`, e);
      }
    }
  }
  {
    const res = await fetch(`${edition.sourceUrl}/races.json`);
    const json = await res.json();
    const mdFiles = parseSpeciesFile(json, edition.id);
    for (const md of mdFiles) {
      const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
      await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
      await app.vault.adapter.write(fullPath, md.content);
    }
  }
  let optionalFeatures = [];
  try {
    const res = await fetch(`${edition.sourceUrl}/optionalfeatures.json`);
    const raw = await res.json();
    optionalFeatures = Array.isArray(raw.optionalfeature) ? raw.optionalfeature : [];
  } catch (e) {
    console.warn("Failed to import optionalfeatures.json:", e);
  }
  {
    const classFiles = await listClassFilesFromGitHub(repo);
    for (const fileName of classFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/class/${fileName}`);
        const json = await res.json();
        const mdFiles = parseClassFile(
          json,
          edition.id,
          fileName,
          optionalFeatures
        );
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
          await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
          const existing = app.vault.getAbstractFileByPath(fullPath);
          if (existing instanceof import_obsidian2.TFile) {
            await app.vault.modify(existing, md.content);
          } else {
            await app.vault.create(fullPath, md.content);
          }
        }
      } catch (e) {
        console.warn(`Failed to import class ${fileName}:`, e);
      }
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/actions.json`);
      const json = await res.json();
      const mdFiles = parseActionsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import actions.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/conditionsdiseases.json`);
      const json = await res.json();
      const mdFiles = parseConditionsDiseasesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import conditionsdiseases.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/senses.json`);
      const json = await res.json();
      const mdFiles = parseSensesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import senses.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/skills.json`);
      const json = await res.json();
      const mdFiles = parseSkillsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import skills.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/feats.json`);
      const json = await res.json();
      const mdFiles = parseFeatsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import feats.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/backgrounds.json`);
      const json = await res.json();
      const mdFiles = parseBackgroundsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import backgrounds.json:", e);
    }
  }
}

// src/parsers/5e-2025/installer.ts
var installer_exports2 = {};
__export(installer_exports2, {
  importEditionData: () => importEditionData2
});
var import_obsidian3 = require("obsidian");

// src/parsers/5e-2025/helpers/sourceMap.ts
var SOURCE_NAME_MAP2 = {
  // Core rulebooks
  PHB: "Player's Handbook",
  MM: "Monster Manual",
  DMG: "Dungeon Master's Guide",
  // Official expansions & adventure modules
  CoS: "Curse of Strahd",
  OotA: "Out of the Abyss",
  PotA: "Princes of the Apocalypse",
  HotDQ: "Hoard of the Dragon Queen",
  RoT: "Rise of Tiamat",
  SKT: "Storm King's Thunder",
  TftYP: "Tales from the Yawning Portal",
  ToA: "Tomb of Annihilation",
  // Supplemental guides
  XGE: "Xanathar's Guide to Everything",
  VGM: "Volo's Guide to Monsters",
  TCE: "Tasha's Cauldron of Everything",
  EGW: "Eberron: Rising from the Last War",
  ERLW: "Explorer's Guide to Wildemount",
  MTF: "Monsters of the Multiverse",
  VRGR: "Van Richten's Guide to Ravenloft",
  // Additional sourcebooks
  AAG: "Astral Adventurer\u2019s Guide",
  AI: "Acquisitions Incorporated",
  AitFRAVFT: "Adventures in the Forgotten Realms: A Visual Field Test",
  BMT: "Big Monster Tome",
  DoDk: "Dragon of Darkkeep",
  FTD: "Fizban\u2019s Treasury of Dragons",
  GGR: "Guildmaster\u2019s Guide to Ravnica",
  GHLoE: "Ghosts of the Horizon: Light Over Elensaria",
  IDRotF: "Icewind Dale: Rime of the Frostmaiden",
  LLK: "Lost Laboratory of Kwalish",
  SatO: "Sapphire of Truth",
  SCC: "Strixhaven: Curriculum of Chaos",
  TDCSR: "The Dungeon Coach\u2019s Rulebook",
  JttRC: "Journeys through the Radiant Citadel",
  "AitFR-AVT": "Adventures in the Forgotten Realms: A Verdant Tomb",
  "AitFR-FCD": "Adventures in the Forgotten Realms: From Cyan Depths",
  RMR: "Dungeons and Dragons: Rick and Morty",
  SCAG: "Sword Coast Adventurer's Guide",
  EEPC: "Elemental Evil Player's Companion",
  MOT: "Mythic Odysseys of Theros",
  WBtW: "The Wild Beyond the Witchlight",
  BGDIA: "Baldur's Gate: Descent Into Avernus",
  ToFW: "Turn of Fortune's Wheel",
  CoA: "Chains of Asmodeus",
  CRCotN: "Critical Role: Call of the Netherdeep",
  ToD: "Tyranny of Dragons",
  MPMM: "Mordenkainen Presents: Monsters of the Multiverse",
  LoX: "Light of Xaryxis",
  QftIS: "Quests from the Infinite Staircase",
  WDH: "Waterdeep: Dragon Heist",
  WDMM: "Waterdeep: Dungeon of the Mad Mage",
  PaBTSO: "Phandelver and Below: The Shattered Obelisk",
  CM: "Candlekeep Mysteries",
  GoS: "Ghosts of Saltmarsh",
  DSotDQ: "Dragonlance: Shadow of the Dragon Queen",
  KftGV: "Keys from the Golden Vault",
  SDW: "Essentials Kit: Sleeping Dragon's Wake",
  DoSI: "Dragons of Stormwreck Isle",
  GotSF: "Giants of the Star Forge",
  DIP: "Essentials Kit: Dragon of Icespire Peak",
  SLW: "Essentials Kit: Storm Lord's Wrath",
  IMR: "Infernal Machine Rebuild",
  VEoR: "Vecna: Eve of Ruin",
  PSI: "Plane Shift: Innistrad",
  AATM: "Adventure Atlas: The Mortuary",
  PSZ: "Plane Shift: Zendikar",
  DC: "Essentials Kit: Divine Contention",
  LMoP: "Lost Mine of Phandelver",
  RMBRE: "The Lost Dungeon of Rickedness: Big Rick Energy",
  HftT: "Hunt for the Thessalhydra",
  PSX: "Plane Shift: Ixalan",
  HFStCM: "Heroes' Feast: Saving the Childrens Menu",
  SjA: "Spelljammer Academy",
  LK: "Lightning Keep",
  RtG: "Return to the Glory",
  TTP: "The Tortle Package",
  LR: "Locathah Rising",
  PSA: "Plane Shift: Amonkhet",
  OGA: "One Grung Above",
  "NRH-TLT": "Nerds Restoring Harmony: The Lost Tomb",
  "NRH-AT": "Nerds Restoring Harmony: Adventure Together",
  BGG: "Bigby Presents: Glory of the Giants",
  RoTOS: "The Rise of Tiamat Online Supplement",
  XMtS: "X Marks the Spot",
  "HAT-LMI": "Honor Among Theives: Legendary Magic Items",
  DitLCoT: "Descent into the Lost Caverns of Tsojcanth",
  "AitFR-DN": "Adventures in the Forgotten Realms: Deepest Night",
  "AitFR-THP": "Adventures in the Forgotten Realms: The Hidden Pages",
  BAM: "Boo's Astral Menagerie",
  AZfyT: "A Zib for Your Thougts",
  MCV2DC: "Monstrous Compendium Volume 2: Dragonlance Creatures",
  PSK: "Plane Shift: Kaladesh",
  PSD: "Plane Shift: Dominaria",
  AWM: "Adventure with Muk",
  UATheMysticClass: "Unearthed Arcana: The Mystic Class",
  ALCurseOfStrahd: "Adventurers League: Curse of Strahd",
  ALElementalEvil: "Adventurers League: Elemental Evil",
  ALRageOfDemons: "Adventurers League: Rage of Demons"
};
function getFullSourceName2(abbrev, editionId) {
  let name = SOURCE_NAME_MAP2[abbrev] ?? abbrev;
  if (abbrev === "PHB") {
    if (editionId?.includes("2014")) name += " (2014)";
    else if (editionId?.includes("2025")) name += " (2025)";
  }
  return name;
}

// src/parsers/5e-2025/helpers/tagReplacer.ts
function replace5eTags2(input) {
  let text;
  if (Array.isArray(input)) {
    text = input.join(" ");
  } else if (typeof input === "string") {
    text = input;
  } else {
    text = String(input ?? "");
  }
  return text.replace(
    /\{@(spell|item|creature|race) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, __, name) => `[[${capitalizeEach2(name)}]]`
  ).replace(
    /\{@(condition|status|action|skill) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, tag, name) => `[[${capitalize2(tag)}s#${name}|${capitalizeEach2(name)}]]`
  ).replace(
    /\{@classFeature ([^|}]+)\|([^|}]+)(?:\|[^}]+)?\}/g,
    (_, feature, cls) => `[[${cls}#${feature}]]`
  ).replace(/\{@(book|filter) ([^|}]+)(?:\|[^}]+)?\}/g, (_, __, txt) => txt).replace(/\{@note ([^}]+)\}/g, (_, note) => `*${note}*`).replace(/\{@(damage|dice|dc|hit|sense) ([^}]+)\}/g, (_, __, value) => value).replace(/\{@chance ([^|}]+)(?:\|[^}]+)?\}/g, (_, value) => `${value}%`).replace(/\{@quickref ([^|}]+)(?:\|[^|]*\|[^}]*)?\}/g, (_, term) => {
    const known = [
      "difficult terrain",
      "total cover",
      "half cover",
      "three-quarters cover",
      "heavily obscured",
      "lightly obscured"
    ];
    return known.includes(term.toLowerCase()) ? `[[Rules#${capitalizeEach2(term)}]]` : term;
  }).replace(/\{\@5etools\s+([^|}]+)\|[^}]+\}/g, "$1").replace(/\{@recharge\s*([^}]+)\}/g, (_, num) => `(recharge: ${num.trim()})`).replace(/\{@(scaledice|scaledamage)[^}]*\|([^|}]+)\}/g, (_, __, value) => value).replace(/\{@d20[^}]*\}/g, "").replace(/\{@[^}]+\}/g, "");
}
function capitalize2(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
function capitalizeEach2(str) {
  return str.split(" ").map(capitalize2).join(" ");
}

// src/parsers/5e-2025/helpers/markdownTable.ts
function renderMarkdownTable2(entry) {
  if (entry.type !== "table" || !Array.isArray(entry.rows)) return "";
  const caption = entry.caption ? `##### ${entry.caption}
` : "";
  const headers = (entry.colLabels ?? []).map((h) => replace5eTags2(h.trim()));
  const headerRow = `| ${headers.join(" | ")} |`;
  const dividerRow = `| ${headers.map(() => ":--").join(" | ")} |`;
  const bodyRows = entry.rows.map((row) => {
    const cells = row.map((cell) => {
      if (typeof cell === "string") return replace5eTags2(cell);
      if (typeof cell === "object") {
        if (cell.roll?.exact !== void 0) return `${cell.roll.exact}`;
        if (cell.roll?.min !== void 0 && cell.roll?.max !== void 0) {
          return `${cell.roll.min}\u2013${cell.roll.max}`;
        }
        return replace5eTags2(JSON.stringify(cell));
      }
      return replace5eTags2(String(cell));
    });
    return `| ${cells.join(" | ")} |`;
  });
  return `${caption}${headerRow}
${dividerRow}
${bodyRows.join("\n")}`;
}

// src/parsers/5e-2025/helpers/formatEntry.ts
function isTypedEntry(x) {
  return x != null && typeof x === "object" && !Array.isArray(x) && typeof x.type === "string";
}
function formatEntry2(entry) {
  if (typeof entry === "string") {
    const cleaned = entry.trim();
    if (!cleaned || cleaned === "}") return "";
    return replace5eTags2(cleaned);
  }
  if (isTypedEntry(entry) && entry.type === "entries" && Array.isArray(entry.entries)) {
    const body = entry.entries.map(formatEntry2).filter((str) => str.trim().length > 0).join("\n\n");
    return entry.name ? `##### ${entry.name}
${body}` : body;
  }
  if (isTypedEntry(entry) && entry.type === "list" && Array.isArray(entry.items)) {
    return entry.items.map((i) => `- ${replace5eTags2(typeof i === "string" ? i : JSON.stringify(i))}`).join("\n");
  }
  if (isTypedEntry(entry) && entry.type === "table" && Array.isArray(entry.rows)) {
    return renderMarkdownTable2(entry);
  }
  if (isTypedEntry(entry) && entry.type === "quote" && Array.isArray(entry.entries)) {
    const quote = entry.entries.map(formatEntry2).join(" ").trim();
    const author = entry.by ? ` \u2014 ${entry.by}` : "";
    return `*"${quote}${author}"*`;
  }
  if (isTypedEntry(entry) && entry.type === "inset" && Array.isArray(entry.entries)) {
    const inset = entry.entries.map(formatEntry2).join("\n").trim();
    return `> ${inset.replace(/\n/g, "\n> ")}`;
  }
  if (isTypedEntry(entry) && entry.type === "refClassFeature" && typeof entry.classFeature === "string") {
    const [name] = entry.classFeature.split("|");
    const anchor = name.replace(/[^\w\s-]/g, "").replace(/\s+/g, "-").toLowerCase();
    return `[[#${anchor}]]`;
  }
  return "";
}

// src/parsers/5e-2025/bestiary.ts
var skippedMonsters2 = [];
var SIZE_MAP3 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var ALIGNMENT_MAP2 = {
  L: "Lawful",
  N: "Neutral",
  C: "Chaotic",
  G: "Good",
  E: "Evil",
  U: "Unaligned"
};
function capitalizeFirst3(str) {
  const s = String(str || "");
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function formatSizeAbbrev3(abbrev) {
  return SIZE_MAP3[abbrev] || abbrev;
}
function formatAlignmentAbbrev2(abbrev) {
  return abbrev.trim().split(/\s+/).map((letter) => ALIGNMENT_MAP2[letter] || letter).join(" ");
}
var RAW_NPCS2 = [
  "Abjurer",
  "Acolyte",
  "Apprentice Wizard",
  "Archdruid",
  "Archer",
  "Archmage",
  "Assassin",
  "Bandit",
  "Bandit Captain",
  "Bard",
  "Berserker",
  "Blackguard",
  "Champion",
  "Commoner",
  "Conjurer",
  "Cult Fanatic",
  "Cultist",
  "Diviner",
  "Druid (NPC)",
  "Druid NPC",
  "Enchanter",
  "Evoker",
  "Gladiator",
  "Guard",
  "Illusionist",
  "Knight",
  "Kraken Priest",
  "Mage",
  "Martial Arts Adept",
  "Master Thief",
  "Necromancer",
  "Noble",
  "Priest",
  "Scout",
  "Spy",
  "Swashbuckler",
  "Thug",
  "Transmuter",
  "Tribal Warrior",
  "Veteran",
  "War Priest",
  "Warlock of the Archfey",
  "Warlock of the Fiend",
  "Warlock of the Great Old One",
  "Warlord"
];
var NORMALIZED_NPC_NAMES2 = new Set(RAW_NPCS2.map((n) => normalizeName2(n)));
function normalizeName2(name) {
  return name.replace(/\s+/g, " ").trim().toLowerCase();
}
function categorizeCreature2(monster) {
  const typeValue = monster.type;
  const name = monster.name;
  const t = typeof typeValue === "string" ? typeValue.toLowerCase() : typeValue?.type?.toLowerCase() || String(typeValue).toLowerCase();
  const normalizedName = normalizeName2(name);
  if (monster.isNpc || monster.isNamedCreature) return "Story NPCs";
  if (t === "beast") return "Beasts";
  if (t === "humanoid" && NORMALIZED_NPC_NAMES2.has(normalizedName)) return "Non-Beasts";
  if (t === "humanoid") return "Monsters";
  return "Monsters";
}
function renderAbilitiesTable2(str, dex, con, int, wis, cha) {
  return [
    `| STR | DEX | CON | INT | WIS | CHA |`,
    `| --- | --- | --- | --- | --- | --- |`,
    `| ${str} | ${dex} | ${con} | ${int} | ${wis} | ${cha} |`
  ].join("\n");
}
function renderEntry2(entry) {
  const name = entry.name;
  let descriptions = [];
  if (Array.isArray(entry.entries)) {
    descriptions = entry.entries;
  } else if (typeof entry.entries === "string") {
    descriptions = [entry.entries];
  } else if (Array.isArray(entry.desc)) {
    descriptions = entry.desc;
  } else if (typeof entry.desc === "string") {
    descriptions = [entry.desc];
  }
  const raw = descriptions.join(" ");
  const desc = replace5eTags2(raw);
  return `***${name}.*** ${desc}`;
}
function parseBestiaryFile2(json, editionId) {
  if (!json.monster) return [];
  json._editionId = editionId;
  const validMonsters = json.monster.filter((m) => {
    const acVal = Array.isArray(m.ac) ? m.ac[0]?.ac ?? m.ac[0] : typeof m.ac === "object" ? m.ac?.ac ?? null : m.ac;
    const hpVal = typeof m.hp === "object" ? m.hp?.average ?? m.hp?.hp ?? null : m.hp;
    return acVal != null && hpVal != null && !isNaN(Number(acVal)) && !isNaN(Number(hpVal));
  });
  const allNames = new Set(json.monster.map((m) => m.name));
  const validNames = new Set(validMonsters.map((m) => m.name));
  const missing = [...allNames].filter((name) => !validNames.has(name));
  return validMonsters.map((monster) => {
    const name = monster.name;
    const safeName = name.replace(/\//g, "-");
    const rawSize = monster.size || "M";
    const rawAlignment = Array.isArray(monster.alignment) ? monster.alignment.join(" ") : monster.alignment || "N";
    let rawType = "Unknown";
    if (typeof monster.type === "string") {
      rawType = capitalizeFirst3(monster.type);
    } else if (monster.type?.type) {
      const base = capitalizeFirst3(monster.type.type);
      const tags = monster.type.tags?.length ? ` (${monster.type.tags.map(capitalizeFirst3).join(", ")})` : "";
      rawType = `${base}${tags}`;
    }
    monster._parsedType = rawType;
    const ac = Array.isArray(monster.ac) ? monster.ac[0].ac : monster.ac;
    const hp = monster.hp?.average ?? monster.hp;
    const cr = monster.cr;
    if (!ac && !hp) {
      skippedMonsters2.push(monster.name);
      return null;
    }
    const abilities = Array.isArray(monster.ability) ? monster.ability : [monster.str, monster.dex, monster.con, monster.int, monster.wis, monster.cha];
    const [str = 10, dex = 10, con = 10, int = 10, wis = 10, cha = 10] = abilities;
    const speedList = [];
    if (typeof monster.speed === "object") {
      for (const [mode, val] of Object.entries(monster.speed)) {
        if (mode === "canHover") continue;
        if (val && typeof val === "object" && "number" in val) {
          const num = val.number;
          const cond = val.condition ? ` ${val.condition}` : "";
          speedList.push(`${mode} ${num} ft.${cond}`);
        } else {
          speedList.push(`${mode} ${val} ft.`);
        }
      }
    } else {
      speedList.push(`${monster.speed} ft.`);
    }
    const speed = speedList.join(", ");
    let source = getFullSourceName2(monster.source, editionId);
    source = source.replace(/:/g, " -");
    const category = categorizeCreature2(monster);
    const fm = buildFM2(monster, BESTIARY_META_DEFS2);
    const yaml = serializeFrontmatter2(fm, BESTIARY_META_DEFS2);
    const savingThrows = fm[FM_FIELDS4.SAVING_THROWS] || [];
    const skills = fm[FM_FIELDS4.SKILLS] || [];
    const senses = fm[FM_FIELDS4.SENSES] || [];
    const languages = fm[FM_FIELDS4.LANGUAGES] || [];
    let body = `# ${name}

${formatSizeAbbrev3(rawSize)} ${rawType}, ${formatAlignmentAbbrev2(rawAlignment)}

**Armor Class**: ${ac}
**Hit Points**: ${hp}
**Speed**: ${speed}
` + (savingThrows.length ? `**Saving Throws**: ${savingThrows.join(", ")}
` : "") + (skills.length ? `**Skills**: ${skills.join(", ")}
` : "") + (senses.length ? `**Senses**: ${senses.join(", ")}
` : "") + (languages.length ? `**Languages**: ${languages.join(", ")}
` : "") + `**Challenge**: ${cr}

` + renderAbilitiesTable2(str, dex, con, int, wis, cha);
    if (monster.trait) body += `

### Traits
${monster.trait.map(renderEntry2).join("\n\n")}`;
    if (monster.action) body += `

### Actions
${monster.action.map(renderEntry2).join("\n\n")}`;
    if (monster.reaction) body += `

### Reactions
${monster.reaction.map(renderEntry2).join("\n\n")}`;
    if (monster.legendary) body += `

### Legendary Actions
${monster.legendary.map(renderEntry2).join("\n\n")}`;
    const content = `---
${yaml}
---

${body}`;
    return {
      path: `${category}/${safeName}.md`,
      content
    };
  });
}

// src/parsers/5e-2025/items.ts
function capitalizeFirst4(input) {
  if (typeof input !== "string" || input.length === 0) return "";
  const s = input.trim();
  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
var DAMAGE_TYPE_MAP3 = {
  P: "Piercing",
  B: "Bludgeoning",
  S: "Slashing",
  N: "Necrotic",
  R: "Radiant",
  F: "Fire",
  C: "Cold",
  L: "Lightning",
  T: "Thunder",
  A: "Acid",
  H: "Healing",
  U: "Force",
  V: "Psychic"
};
var PROPERTY_MAP2 = {
  A: "Ammunition",
  F: "Finesse",
  H: "Heavy",
  L: "Light",
  R: "Reload",
  S: "Special",
  "2H": "Two-Handed",
  T: "Thrown",
  V: "Versatile"
};
var ITEM_TYPE_MAP2 = {
  $C: "Currency",
  $G: "Gem",
  A: "Ammunition",
  "AIR|DMG": "Vehicle (air)",
  "AF|DMG": "Future Ammo",
  AT: "Artisan Tools",
  EXP: "Explosive",
  FD: "Food and Drink",
  G: "Gear",
  GS: "Game",
  HA: "Heavy Armor",
  "IDG|TDCSR": "Illicit Drug",
  INS: "Instrument",
  LA: "Light Armor",
  M: "Weapon",
  MA: "Medium Armor",
  MNT: "Mounts and Vehicles",
  ODH: "Miscellaneous",
  P: "Consumable",
  R: "Ranged Weapon",
  RD: "Rod",
  RG: "Ring",
  S: "Shield",
  SC: "Scroll",
  SCF: "Spell Casting Focus",
  SHP: "Ship",
  T: "Tool",
  TAH: "Mounts and Vehicles",
  TG: "Trade Goods",
  VEH: "Mounts and Vehicles",
  WD: "Wand"
};
var codeFolderMap2 = {
  // Weapons & Armor
  "A": "Weapons and Armor/Ammunition",
  "M": "Weapons and Armor/Weapons",
  "R": "Weapons and Armor/Ranged Weapons",
  "S": "Weapons and Armor/Shields",
  "LA": "Weapons and Armor/Armor/Light Armor",
  "MA": "Weapons and Armor/Armor/Medium Armor",
  "HA": "Weapons and Armor/Armor/Heavy Armor",
  "EXP": "Weapons and Armor/Weapons/Explosives",
  // Future Ammo (AF|DMG → rawCode "AF")
  "AF": "Weapons and Armor/Ammunition/Future Ammo",
  // Magical Items
  "RD": "Magical Items/Rods",
  "RG": "Magical Items/Rings",
  "SC": "Magical Items/Scrolls",
  "SCF": "Magical Items/Spell Casting Focus",
  "WD": "Magical Items/Wands",
  // Valuables
  "$G": "Valuables/Gems",
  // Currency (rawCode becomes "C" after stripping $)
  "C": "Valuables/Currency",
  "TG": "Valuables/Trade Goods",
  // Artisan Goods
  "AT": "Artisan Goods/Tools",
  "T": "Artisan Goods/Tools",
  "INS": "Artisan Goods/Instruments",
  "GS": "Artisan Goods/Games",
  // Gear & Mounts
  "G": "Gear",
  // Mounts & Vehicles
  "MNT": "Gear/Mounts and Vehicles",
  "TAH": "Gear/Mounts and Vehicles",
  "VEH": "Gear/Mounts and Vehicles",
  // Air vehicles (AIR|DMG → rawCode "AIR")
  "AIR": "Gear/Mounts and Vehicles/Air",
  // Consumables
  "P": "Consumables",
  // Food & Drink
  "FD": "Consumables/Food and Drink",
  // Illicit Drugs (IDG|TDCSR → rawCode "IDG")
  "IDG": "Gear/Illicit Drugs",
  // Miscellaneous (ODH)
  "ODH": "Gear/Miscellaneous"
};
function parseItemsFile2(json, editionId) {
  const rawItems = [];
  if (Array.isArray(json.baseitem)) rawItems.push(...json.baseitem);
  if (Array.isArray(json.item)) rawItems.push(...json.item);
  if (Array.isArray(json.object)) rawItems.push(...json.object);
  if (Array.isArray(json.vehicle)) rawItems.push(...json.vehicle);
  if (!rawItems.length) return [];
  const baseNames = new Set(
    Array.isArray(json.baseitem) ? json.baseitem.map((b) => b.name) : []
  );
  const out = [];
  for (const it of rawItems) {
    const name = it.name;
    const safeName = name.replace(/[\/\\:]/g, "-");
    const rawCode = (it.type || "").split("|")[0].split("|")[0].replace(/^\$/, "");
    let folder = codeFolderMap2[rawCode] ?? "Miscellaneous";
    if (it.bonusWeapon) {
      folder = `${folder}/Variants`;
    } else {
      const isMagic = !!it.wondrous || !!it.reqAttune || !!it.req_attune || String(it.rarity).toLowerCase().includes("magic");
      if (isMagic) {
        const [, ...rest] = folder.split("/");
        folder = ["Magical Items", ...rest].join("/");
      }
    }
    if ((folder.startsWith("Weapons and Armor/Weapons") || folder.startsWith("Weapons and Armor/Ranged Weapons")) && it.weaponCategory) {
      folder = `${folder}/${capitalizeFirst4(it.weaponCategory)}`;
    }
    json._editionId = editionId;
    const fm = buildFM2(it, ITEM_META_DEFS2);
    if (rawCode === "M" && it.weaponCategory) {
      fm.type = `${capitalizeFirst4(it.weaponCategory)} Weapon`;
    } else if (ITEM_TYPE_MAP2[rawCode]) {
      fm.type = ITEM_TYPE_MAP2[rawCode];
    }
    if (Array.isArray(fm.damageTypes)) {
      fm.damageTypes = fm.damageTypes.map(
        (code) => DAMAGE_TYPE_MAP3[code] || code
      );
    }
    let yaml = serializeFrontmatter2(fm, ITEM_META_DEFS2);
    if (Array.isArray(it.packContents)) {
      yaml += "\npackContents:";
      for (const pc of it.packContents) {
        yaml += `
  - item: "${pc.item}"
    quantity: ${pc.quantity}`;
      }
    }
    const frontmatter = `---
${yaml}
---`;
    const lines = [];
    lines.push(`# ${name}`);
    lines.push("");
    const subtitle = it.weapon ? `${capitalizeFirst4(it.weaponCategory)} Weapon` : it.armor ? folder.split("/").pop() || "Armor" : "";
    if (subtitle) lines.push(`### *${subtitle}*`);
    if (it.weapon) {
      lines.push(`**Category**: ${capitalizeFirst4(it.weaponCategory)}`);
      lines.push(`**Damage**: ${it.dmg1 ?? ""}${it.dmg2 ? ` / ${it.dmg2}` : ""}`);
      const typesBody = (Array.isArray(it.dmgType) ? it.dmgType : [it.dmgType]).filter((t) => Boolean(t)).map((t) => DAMAGE_TYPE_MAP3[t] || t);
      lines.push(`**Damage Type**: ${typesBody.join(", ")}`);
      lines.push(`**Range**: ${it.range ?? "\u2014"}`);
      lines.push(`**Reload**: ${it.reload ?? "\u2014"}`);
      if (it.ammoType) lines.push(`**Ammo Type**: ${it.ammoType}`);
      if (Array.isArray(it.property) && it.property.length) {
        const propsBody = it.property.map((p) => PROPERTY_MAP2[p] || p);
        lines.push(`**Properties**: ${propsBody.join(", ")}`);
      }
    }
    if (it.armor) {
      lines.push(`**Armor Class**: ${it.ac}`);
      if (it.stealth) lines.push(`**Stealth Disadvantage**: true`);
      lines.push("");
    }
    const desc = it.entries ?? it.desc;
    if (desc) {
      for (const p of Array.isArray(desc) ? desc : [desc]) {
        if (typeof p === "string") {
          for (const line of replace5eTags2(p).split("\n")) {
            lines.push(line);
          }
          lines.push("");
        } else if (p && typeof p === "object") {
          if (lines[lines.length - 1] === "") {
            lines.pop();
          }
          lines.push(`#### ${p.name}`);
          const sub = Array.isArray(p.entries) ? p.entries : [];
          for (const sp of sub) {
            for (const line of replace5eTags2(sp).split("\n")) {
              lines.push(line);
            }
          }
          lines.push("");
        }
      }
    }
    const body = lines.join("\n");
    out.push({ path: `Items/${folder}/${safeName}.md`, content: `${frontmatter}

${body}` });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2025/helpers/frontmatter.ts
function cap3(str) {
  if (typeof str !== "string") return "";
  return str.charAt(0).toUpperCase() + str.slice(1);
}
var ABILITY_FULL2 = {
  str: "Strength",
  dex: "Dexterity",
  con: "Constitution",
  int: "Intelligence",
  wis: "Wisdom",
  cha: "Charisma"
};
var SIZE_MAP4 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var FM_FIELDS4 = {
  ABILITY_BONUSES: "ability_bonuses",
  AC: "AC",
  ALIGNMENT: "Alignment",
  AMMO_TYPE: "Ammo Type",
  ARMOR_PROFICIENCIES: "armor-prof",
  ATTACK_TYPE: "attack_type",
  ATTUNEMENT: "Attunement",
  ATTUNE_REQ: "Attune_Req",
  CASTING_TIME: "casting_time",
  CHARISMA: "charisma",
  CHA_MOD: "cha_mod",
  CONCENTRATION: "concentration",
  CONDITION_IMM: "cond_immunity",
  CONSTITUTION: "constitution",
  CON_MOD: "con_mod",
  COST: "cost",
  COMPONENTS: "Components",
  CHALLENGE_RATING: "CR",
  DAMAGE_TYPE: "damage_type",
  DAMAGE_TYPES: "damageTypes",
  DAMAGE: "damage",
  DAMAGE_RES: "dmg_resistance",
  DAMAGE_IMM: "dmg_immunity",
  DEXTERITY: "dexterity",
  DEX_MOD: "dex_mod",
  DURATION: "duration",
  RULESET: "ruleset",
  HP: "HP",
  INTELLIGENCE: "intelligence",
  INT_MOD: "int_mod",
  LANGUAGES: "languages",
  LEVEL: "level",
  MAGICAL: "magical",
  MATERIAL: "material",
  NAME: "name",
  PROPERTIES: "properties",
  RANGE: "range",
  RARITY: "rarity",
  RELOAD: "reload",
  RITUAL: "ritual",
  SAVE: "save",
  SAVING_THROWS: "saving_throws",
  SCHOOL: "school",
  SENSES: "senses",
  SIZE: "size",
  SKILLS: "skills",
  SKILL_CHOICE_LIST: "skill_choice_list",
  SOMATIC: "somatic",
  SOURCE: "source",
  SPECIES: "species",
  SPEED: "speed",
  SPELL_CAST_MOD: "Spell Cast Mod",
  SPELL_RANGE: "Range",
  STEALTH_DISADVANTAGE: "stealthDisadvantage",
  STRENGTH: "strength",
  STR_MOD: "str_mod",
  SUBRACES: "subraces",
  TOOL_PROFICIENCIES: "tool-prof",
  TOOL_CHOICE_LIST: "tool_choice_list",
  TRAITS: "traits",
  TYPE: "type",
  VARIANT: "Variant",
  VERBAL: "verbal",
  WEAPON_PROFICIENCIES: "weapon-prof",
  WEIGHT: "weight",
  WISDOM: "wisdom",
  WIS_MOD: "wis_mod"
};
var unifiedArmorProfs2 = (val) => Array.isArray(val?.armor) ? val.armor.map(cap3) : Array.isArray(val) ? val.map(cap3) : [];
function unifiedWeaponProfs2(val) {
  const rawArr = Array.isArray(val?.weapons) ? val.weapons : Array.isArray(val) ? val : [];
  const out = /* @__PURE__ */ new Set();
  function handleOne(entry) {
    if (Array.isArray(entry)) {
      entry.forEach(handleOne);
      return;
    }
    if (typeof entry === "string") {
      const lit = entry.trim().toLowerCase();
      if (lit === "simple") {
        out.add("Simple Weapons");
      } else if (lit === "martial") {
        out.add("Martial Weapons");
      } else {
        const text = entry.startsWith("{@") ? replace5eTags2(entry) : cap3(entry);
        out.add(text);
      }
      return;
    }
    if (entry && typeof entry === "object" && entry.proficiency) {
      const name = cap3(entry.proficiency);
      out.add(entry.optional ? `${name} (optional)` : name);
    }
  }
  rawArr.forEach(handleOne);
  return [...out];
}
var unifiedSaves2 = (val) => {
  if (Array.isArray(val)) {
    return val.map(
      (k) => ({
        str: "Strength",
        dex: "Dexterity",
        con: "Constitution",
        int: "Intelligence",
        wis: "Wisdom",
        cha: "Charisma"
      })[k] ?? k.toUpperCase()
    );
  }
  if (typeof val === "object" && val !== null) {
    return Object.keys(val).map((k) => k.toUpperCase());
  }
  return [];
};
var unifiedSkills4 = (val) => {
  if (val && !Array.isArray(val) && typeof val === "object" && // ensure every value is a string or number
  Object.values(val).every((v) => typeof v === "string" || typeof v === "number")) {
    return Object.entries(val).map(
      ([skill, mod]) => `${cap3(skill)} ${mod}`.trim()
    );
  }
  if (val && !Array.isArray(val) && typeof val === "object") {
    const nested = val.skills ?? val.skillProf ?? val.skillProficiencies;
    return unifiedSkills4(nested);
  }
  if (!Array.isArray(val)) return [];
  const out = /* @__PURE__ */ new Set();
  for (const e of val) {
    if (e && typeof e === "object" && typeof e.any === "number") {
      out.add(`Choose ${e.any}`);
      continue;
    }
    if (e && typeof e === "object" && e.choose) {
      const cnt = e.choose.count ?? 1;
      out.add(`Choose ${cnt}`);
    }
    if (e && typeof e === "object") {
      for (const [k, v] of Object.entries(e)) {
        if (v === true) out.add(cap3(k));
      }
    }
    if (typeof e === "string") {
      out.add(cap3(e));
    }
  }
  return [...out];
};
var unifiedToolProfs2 = (val) => {
  let entries = Array.isArray(val) ? val : Array.isArray(val?.toolProficiencies) ? val.toolProficiencies : Array.isArray(val?.tools) ? val.tools : [];
  const out = /* @__PURE__ */ new Set();
  let sawChoose = false;
  for (const e of entries) {
    if (typeof e === "string") {
      out.add(cap3(e));
      continue;
    }
    if (e?.choose) {
      const cnt = e.choose.count ?? 1;
      sawChoose = true;
      out.add(`Choose ${cnt}`);
    }
    for (const [k, v] of Object.entries(e)) {
      if (v === true) {
        out.add(cap3(k));
      } else if (typeof v === "number" && k.startsWith("any")) {
        const raw = k.replace(/^any/, "");
        const spaced = raw.replace(/([a-z])([A-Z])/g, "$1 $2").split(" ").map(cap3).join(" ");
        out.add(`Choose ${v} ${spaced}`);
      }
    }
  }
  return [...out];
};
var ALL_FIELD_DEFS2 = [
  // ─── Core ───
  { callSign: "NAME", jsonKey: "name" },
  {
    callSign: "SOURCE",
    jsonKey: ["source"],
    conv: (raw, allJson) => {
      const out = /* @__PURE__ */ new Set();
      const editionId = allJson._editionId;
      const arr = Array.isArray(raw) ? raw : [raw];
      arr.forEach((src) => {
        out.add(getFullSourceName2(src, editionId));
      });
      for (const os of allJson.otherSources ?? []) {
        if (os && typeof os.source === "string") {
          out.add(getFullSourceName2(os.source, editionId));
        }
      }
      for (const rep of allJson.reprintedAs ?? []) {
        const repStr = typeof rep === "string" ? rep : String(rep);
        const parts = repStr.split("|");
        const src = parts[1] ?? parts[0];
        out.add(getFullSourceName2(src, editionId));
      }
      return [...out];
    }
  },
  // ─── Proficiencies ───
  { callSign: "ARMOR_PROFICIENCIES", jsonKey: ["armorProficiencies", "armorProfs", "startingProficiencies"], conv: unifiedArmorProfs2 },
  {
    callSign: "WEAPON_PROFICIENCIES",
    jsonKey: ["weaponProficiencies", "weaponProfs", "startingProficiencies"],
    conv: unifiedWeaponProfs2
  },
  { callSign: "TOOL_PROFICIENCIES", jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"], conv: unifiedToolProfs2 },
  {
    callSign: "TOOL_CHOICE_LIST",
    jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.toolProficiencies) ? raw.toolProficiencies : Array.isArray(raw?.tools) ? raw.tools : [];
      const choice = arr.find((e) => e?.choose);
      return choice?.choose?.from?.map((s) => cap3(s)) ?? [];
    }
  },
  { callSign: "SAVING_THROWS", jsonKey: ["save", "proficiency"], conv: unifiedSaves2 },
  {
    callSign: "SKILLS",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: unifiedSkills4
  },
  {
    callSign: "SKILL_CHOICE_LIST",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.skillProficiencies) ? raw.skillProficiencies : Array.isArray(raw?.skills) ? raw.skills : Array.isArray(raw?.skillProf) ? raw.skillProf : [];
      const choiceObj = arr.find((e) => e?.choose || typeof e.any === "number");
      if (!choiceObj) return [];
      if (choiceObj.choose && Array.isArray(choiceObj.choose.from)) {
        return choiceObj.choose.from.map(cap3);
      }
      if (typeof choiceObj.any === "number") {
        return SKILL_OPTIONS2;
      }
      return [];
    }
  },
  {
    callSign: "SPELL_CAST_MOD",
    jsonKey: "spellcastingAbility",
    conv: (raw) => {
      const key = String(raw).toLowerCase();
      return ABILITY_FULL2[key] || key.toUpperCase();
    }
  },
  // ─── Spells ───
  { callSign: "LEVEL", jsonKey: "level" },
  { callSign: "SCHOOL", jsonKey: "school", conv: (s) => SCHOOL_MAP2[s] ?? s },
  { callSign: "CASTING_TIME", jsonKey: "time", conv: formatTime2 },
  { callSign: "SPELL_RANGE", jsonKey: "range", conv: formatRange2 },
  { callSign: "DURATION", jsonKey: "duration", conv: formatDuration2 },
  { callSign: "VERBAL", jsonKey: "components", conv: (c) => !!c.v },
  { callSign: "SOMATIC", jsonKey: "components", conv: (c) => !!c.s },
  { callSign: "MATERIAL", jsonKey: "components", conv: (c) => !!c.m },
  {
    callSign: "COMPONENTS",
    jsonKey: "components",
    conv: (c) => {
      if (!c.m) return [];
      const raw = Array.isArray(c.m) ? c.m : [c.m];
      return raw.map((item) => {
        if (typeof item === "string") return item;
        if (item && typeof item === "object" && typeof item.text === "string") {
          return item.text;
        }
        return null;
      }).filter((comp) => comp !== null);
    }
  },
  { callSign: "ATTACK_TYPE", jsonKey: "attackType" },
  { callSign: "DAMAGE_TYPE", jsonKey: "damageInflict", conv: (d) => Array.isArray(d) ? d[0] : d },
  { callSign: "RITUAL", jsonKey: "ritual" },
  { callSign: "CONCENTRATION", jsonKey: "duration", conv: (ds) => Array.isArray(ds) && ds.some((x) => x.concentration) },
  { callSign: "SAVE", jsonKey: "saveAttr" },
  // ─── Species / Creatures ───
  { callSign: "SPECIES", jsonKey: "name" },
  {
    callSign: "SIZE",
    jsonKey: "size",
    conv: (raw) => {
      if (Array.isArray(raw)) {
        return raw.map((r) => SIZE_MAP4[r] || r);
      } else {
        return SIZE_MAP4[raw] || raw;
      }
    }
  },
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (sp) => {
      if (typeof sp === "number") {
        return [`Walk ${sp} ft.`];
      }
      if (!sp || typeof sp !== "object") return [];
      return Object.entries(sp).filter(([mode]) => mode !== "canHover").map(([mode, v]) => {
        const n = typeof v === "object" && v !== null && "number" in v ? v.number : v;
        const label = mode === "walk" ? "Walk" : cap3(mode);
        return `${label} ${n} ft.`;
      });
    }
  },
  { callSign: "LANGUAGES", jsonKey: ["languages", "languageProficiencies"], conv: (arr) => {
    if (!Array.isArray(arr)) return [];
    const out = [];
    for (const lp of arr) {
      if (typeof lp === "string") out.push(cap3(lp));
      else if (typeof lp === "object") {
        for (const [lang, val] of Object.entries(lp)) {
          if (val) out.push(cap3(lang));
        }
      }
    }
    return [...new Set(out)];
  } },
  { callSign: "SENSES", jsonKey: "senses", conv: (sen) => {
    if (Array.isArray(sen)) return sen.map((s) => s.replace(/^\d+\s*/, "").replace(/^./, (c) => c.toUpperCase()));
    if (sen && typeof sen === "object") return Object.entries(sen).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)} ${v}`);
    return [];
  } },
  {
    callSign: "TRAITS",
    jsonKey: ["classFeatures", "entries"],
    conv: (raw, allJson) => {
      const clsRec = Array.isArray(allJson.class) ? allJson.class[0] : allJson;
      const className = typeof clsRec.name === "string" ? clsRec.name : "";
      const omit = /* @__PURE__ */ new Set([
        "Ability Score Improvement",
        "Archetype Feature",
        "Subclass Feature"
        // add more if you like…
      ]);
      const seen = /* @__PURE__ */ new Set();
      if (Array.isArray(allJson.classFeatures)) {
        return allJson.classFeatures.flatMap((feat) => {
          if (feat && typeof feat === "object" && feat.gainSubclassFeature) return [];
          const rawName = typeof feat === "string" ? feat : typeof feat.classFeature === "string" ? feat.classFeature : "";
          const name = rawName.split("|")[0].trim();
          if (!name || omit.has(name) || seen.has(name)) return [];
          seen.add(name);
          const anchor = name.replace(/[^\w\s]/g, "").replace(/\s+/g, " ").trim().replace(/\b\w/g, (c) => c.toUpperCase());
          return `[[${className}#${anchor}|${name}]]`;
        });
      }
      const ents = Array.isArray(raw) ? raw : [];
      const featureNames = ents.filter((e) => e?.data?.isFeature && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
      if (featureNames.length) return featureNames;
      return ents.filter((e) => e && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
    }
  },
  { callSign: "AC", jsonKey: "ac", conv: (a) => Array.isArray(a) ? a[0].ac : a },
  { callSign: "HP", jsonKey: "hp", conv: (hp) => hp?.average ?? hp },
  { callSign: "CHALLENGE_RATING", jsonKey: "cr" },
  { callSign: "STRENGTH", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[0] : arr?.str ?? 0 },
  { callSign: "DEXTERITY", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[1] : arr?.dex ?? 0 },
  { callSign: "CONSTITUTION", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[2] : arr?.con ?? 0 },
  { callSign: "INTELLIGENCE", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[3] : arr?.int ?? 0 },
  { callSign: "WISDOM", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[4] : arr?.wis ?? 0 },
  { callSign: "CHARISMA", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[5] : arr?.cha ?? 0 },
  {
    callSign: "ALIGNMENT",
    jsonKey: "alignment",
    conv: (a) => {
      const raw = Array.isArray(a) ? a.join(" ") : typeof a === "string" ? a : String(a);
      const cleaned = raw.replace(/\bA\b/g, "Any").replace(/\bU\b/g, "Unaligned").replace(/\bN\b/g, "Neutral").replace(/\bL\b/g, "Lawful").replace(/\bC\b/g, "Chaotic").replace(/\bG\b/g, "Good").replace(/\bE\b/g, "Evil");
      return formatAlignmentAbbrev2(cleaned);
    }
  },
  {
    callSign: "TYPE",
    jsonKey: "type",
    conv: (t) => {
      if (typeof t === "string") {
        return ITEM_TYPE_MAP2[t] ?? cap3(t);
      }
      if (t && typeof t === "object") {
        const code = String(t.type || "").toUpperCase();
        if (ITEM_TYPE_MAP2[code]) {
          return ITEM_TYPE_MAP2[code];
        }
        const base = t.type ? cap3(t.type) : "Unknown";
        const tags = Array.isArray(t.tags) ? t.tags.map(cap3) : [];
        return tags.length ? `${base} (${tags.join(", ")})` : base;
      }
      return void 0;
    }
  },
  // ─── Items ───
  { callSign: "TYPE", jsonKey: "_parsedType" },
  { callSign: "RARITY", jsonKey: "rarity", conv: (r) => {
    const s = String(r || "").toLowerCase();
    return s && s !== "none" ? s[0].toUpperCase() + s.slice(1) : void 0;
  } },
  {
    callSign: "COST",
    jsonKey: "value",
    conv: (raw) => {
      const s = String(raw).trim().toLowerCase();
      let num;
      if (s.endsWith("cp")) {
        num = parseFloat(s);
        return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
      }
      if (s.endsWith("sp")) {
        num = parseFloat(s);
        return num >= 10 ? `${Math.round(num / 10 * 100) / 100}gp` : `${num}sp`;
      }
      if (s.endsWith("gp")) {
        num = parseFloat(s);
        return `${Math.round(num * 100) / 100}gp`;
      }
      num = parseFloat(s) || 0;
      return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
    }
  },
  { callSign: "WEIGHT", jsonKey: "weight" },
  { callSign: "MAGICAL", jsonKey: "wondrous", conv: (_w, all) => !!all.wondrous || !!all.reqAttune },
  { callSign: "VARIANT", jsonKey: "bonusWeapon", conv: (b) => typeof b === "string" && b.startsWith("+") },
  { callSign: "PROPERTIES", jsonKey: "property", conv: (arr) => Array.isArray(arr) ? arr.map((p) => PROPERTY_MAP2[p] || p) : [] },
  { callSign: "DAMAGE", jsonKey: "dmg1", conv: (d, all) => d ? all.dmg2 ? `${d} / ${all.dmg2}` : `${d}` : void 0 },
  { callSign: "DAMAGE_TYPES", jsonKey: "dmgType", conv: (dt) => dt == null ? [] : Array.isArray(dt) ? dt : [dt] },
  { callSign: "RANGE", jsonKey: "range" },
  { callSign: "RELOAD", jsonKey: "reload" },
  { callSign: "AMMO_TYPE", jsonKey: "ammoType" },
  { callSign: "STEALTH_DISADVANTAGE", jsonKey: "stealth" },
  {
    callSign: "ATTUNEMENT",
    jsonKey: ["wondrous", "reqAttune", "req_attune", "reqAttuneTags"],
    conv: (_raw, allJson) => {
      const j = allJson;
      const hasText = typeof j.reqAttune === "string" && j.reqAttune.trim() !== "";
      const hasTags = Array.isArray(j.reqAttuneTags) && j.reqAttuneTags.length > 0;
      return hasText || hasTags;
    }
  },
  {
    callSign: "ATTUNE_REQ",
    jsonKey: "reqAttuneTags",
    conv: (tags = [], _all) => {
      const mapLetter = {
        A: "Any",
        U: "Unaligned",
        N: "Neutral",
        L: "Lawful",
        C: "Chaotic",
        G: "Good",
        E: "Evil"
      };
      const reqs = [];
      for (const tag of tags) {
        if (tag.class && Array.isArray(tag.alignment)) {
          const cls = cap3(tag.class);
          for (const code of tag.alignment) {
            reqs.push(`${mapLetter[code] || code} ${cls}`);
          }
        } else if (tag.class) {
          reqs.push(cap3(tag.class));
        } else if (Array.isArray(tag.alignment)) {
          for (const code of tag.alignment) {
            reqs.push(mapLetter[code] || code);
          }
        } else if (tag.background) {
          const [bg] = String(tag.background).split("|");
          reqs.push(bg.split(" ").map(cap3).join(" "));
        } else if (tag.spellcasting) {
          reqs.push("Spellcaster");
        }
      }
      return Array.from(new Set(reqs));
    }
  },
  // ─── Other ───
  { callSign: "DAMAGE_RES", jsonKey: "resist", conv: (v) => Array.isArray(v) ? v.map(cap3) : [] },
  {
    callSign: "RULESET",
    jsonKey: "_editionId",
    // pick up the injected editionId so buildFM will emit the key
    conv: (_raw, allJson) => {
      return "D&D 5e (2025)";
    }
  },
  // ─── Ability‐score modifiers (only emit when nonzero) ───
  {
    callSign: "STR_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].str ?? 0 : arr.str ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "DEX_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].dex ?? 0 : arr.dex ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CON_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].con ?? 0 : arr.con ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "INT_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].int ?? 0 : arr.int ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "WIS_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].wis ?? 0 : arr.wis ?? 0;
      return v !== 0 ? v : void 0;
    }
  },
  {
    callSign: "CHA_MOD",
    jsonKey: "ability",
    conv: (arr) => {
      const v = Array.isArray(arr) ? arr[0].cha ?? 0 : arr.cha ?? 0;
      return v !== 0 ? v : void 0;
    }
  }
];
function buildFM2(json, defs) {
  const fm = {};
  for (const { callSign, jsonKey, conv } of defs) {
    const keys = Array.isArray(jsonKey) ? jsonKey : [jsonKey];
    let raw = void 0;
    for (const key of keys) {
      if (json[key] != null) {
        raw = json[key];
        break;
      }
    }
    if (raw == null) continue;
    const val = conv ? conv(raw, json) : raw;
    fm[FM_FIELDS4[callSign]] = val;
  }
  return fm;
}
function serializeFrontmatter2(fm, defs) {
  const filtered = {};
  const hasSkillChoice = Array.isArray(fm[FM_FIELDS4.SKILL_CHOICE_LIST]) && fm[FM_FIELDS4.SKILL_CHOICE_LIST].length > 0;
  const hasToolChoice = Array.isArray(fm[FM_FIELDS4.TOOL_CHOICE_LIST]) && fm[FM_FIELDS4.TOOL_CHOICE_LIST].length > 0;
  for (const [k, v] of Object.entries(fm)) {
    if (v === void 0) continue;
    if (k === FM_FIELDS4.COMPONENTS && Array.isArray(v) && v.length === 0) continue;
    if ((k === FM_FIELDS4.TOOL_CHOICE_LIST || k === FM_FIELDS4.SKILL_CHOICE_LIST) && Array.isArray(v) && v.length === 0) continue;
    filtered[k] = v;
  }
  let keysToEmit;
  if (defs) {
    const wanted = defs.map((d) => FM_FIELDS4[d.callSign]);
    keysToEmit = wanted.filter((k) => k in filtered);
    keysToEmit.push(
      ...Object.keys(filtered).filter((k) => !keysToEmit.includes(k))
    );
  } else {
    keysToEmit = Object.keys(filtered);
  }
  return keysToEmit.map((k) => {
    const v = filtered[k];
    if (Array.isArray(v)) {
      const inline = v.map((item) => JSON.stringify(item)).join(", ");
      return `${k}: [${inline}]`;
    }
    if (typeof v === "string") {
      return `${k}: "${v}"`;
    }
    return `${k}: ${v}`;
  }).join("\n");
}
var SKILL_OPTIONS2 = [
  "Acrobatics",
  "Animal Handling",
  "Arcana",
  "Athletics",
  "Deception",
  "History",
  "Insight",
  "Intimidation",
  "Investigation",
  "Medicine",
  "Nature",
  "Perception",
  "Performance",
  "Persuasion",
  "Religion",
  "Sleight of Hand",
  "Stealth",
  "Survival"
];
var SPELL_KEYS2 = [
  "NAME",
  "LEVEL",
  "SCHOOL",
  "CASTING_TIME",
  "SPELL_RANGE",
  "DURATION",
  "VERBAL",
  "SOMATIC",
  "MATERIAL",
  "COMPONENTS",
  "CONCENTRATION",
  "SOURCE",
  "RULESET"
];
var SPECIES_KEYS2 = [
  "SPECIES",
  "SIZE",
  "SPEED",
  "LANGUAGES",
  "TRAITS",
  "SKILLS",
  "STR_MOD",
  "DEX_MOD",
  "CON_MOD",
  "INT_MOD",
  "WIS_MOD",
  "CHA_MOD",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "WEAPON_PROFICIENCIES",
  "SENSES",
  "DAMAGE_RES",
  "SOURCE",
  "RULESET"
];
var ITEM_KEYS2 = [
  "NAME",
  "TYPE",
  "RARITY",
  "COST",
  "WEIGHT",
  "SOURCE",
  "PROPERTIES",
  "DAMAGE",
  "DAMAGE_TYPES",
  "RANGE",
  "RELOAD",
  "AMMO_TYPE",
  "AC",
  "STEALTH_DISADVANTAGE",
  "MAGICAL",
  "ATTUNEMENT",
  "ATTUNE_REQ",
  "SOURCE",
  "RULESET"
];
var BESTIARY_KEYS2 = [
  "NAME",
  "SIZE",
  "TYPE",
  "ALIGNMENT",
  "AC",
  "HP",
  "SPEED",
  "STRENGTH",
  "DEXTERITY",
  "CONSTITUTION",
  "INTELLIGENCE",
  "WISDOM",
  "CHARISMA",
  "SAVING_THROWS",
  "SKILLS",
  "SENSES",
  "LANGUAGES",
  "CHALLENGE_RATING",
  "SOURCE",
  "RULESET"
];
var CLASS_KEYS2 = [
  "NAME",
  "SPELL_CAST_MOD",
  "ARMOR_PROFICIENCIES",
  "WEAPON_PROFICIENCIES",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "SAVING_THROWS",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var BACKGROUND_KEYS2 = [
  "NAME",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var FEATS_KEYS2 = [
  "SOURCE",
  "RULESET"
];
var SPELL_META_DEFS2 = SPELL_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPELL_KEY ${key}`);
  return def;
});
var SPECIES_META_DEFS2 = SPECIES_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for SPECIES_KEY ${key}`);
  return def;
});
var ITEM_META_DEFS2 = ITEM_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for ITEM_KEY ${key}`);
  return def;
});
var BESTIARY_META_DEFS2 = BESTIARY_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BESTIARY_KEY ${key}`);
  return def;
});
var CLASS_META_DEFS2 = CLASS_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for CLASS_KEY ${key}`);
  return def;
});
var BACKGROUND_META_DEFS2 = BACKGROUND_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});
var FEATS_META_DEFS2 = FEATS_KEYS2.map((key) => {
  const def = ALL_FIELD_DEFS2.find((d) => d.callSign === key);
  if (!def) throw new Error(`Missing FieldDef for BACKGROUND_KEY ${key}`);
  return def;
});

// src/parsers/5e-2025/spells.ts
var SCHOOL_MAP2 = {
  A: "Abjuration",
  C: "Conjuration",
  D: "Divination",
  E: "Enchantment",
  V: "Evocation",
  I: "Illusion",
  N: "Necromancy",
  T: "Transmutation"
};
function ordinal2(n) {
  const suffix = n === 1 ? "st" : n === 2 ? "nd" : n === 3 ? "rd" : "th";
  return `${n}${suffix}`;
}
function formatRange2(range) {
  if (!range) return "";
  if (typeof range === "string") return range;
  if (range.type === "special") return "Special";
  if (range.type === "point" && range.distance) {
    const dist = range.distance;
    if (dist.type === "touch") return "Touch";
    if (dist.type === "self") return "Self";
    if (dist.type === "sight") return "Sight";
    if (dist.amount) return `${dist.amount} ${dist.type}`;
  }
  return "Varies";
}
function formatTime2(time) {
  if (!Array.isArray(time)) return "";
  return time.map((t) => `${t.number} ${t.unit}`).join(", ");
}
function formatDuration2(duration) {
  if (!Array.isArray(duration)) return "";
  return duration.map((d) => {
    if (d.type === "instant") return "Instantaneous";
    if (d.type === "timed" && d.duration) {
      return `${d.duration.amount} ${d.duration.type}${d.concentration ? " (concentration)" : ""}`;
    }
    if (d.type === "permanent") return "Permanent";
    return "Special";
  }).join(", ");
}
function formatComponents2(components) {
  if (!components) return "";
  const parts = [];
  if (components.v) parts.push("V");
  if (components.s) parts.push("S");
  if (components.m) {
    let matDetails = [];
    if (Array.isArray(components.m)) {
      matDetails = components.m.map(
        (item) => typeof item === "string" ? item : item && typeof item.text === "string" ? item.text : null
      ).filter((t) => !!t);
    } else if (typeof components.m === "string") {
      matDetails = [components.m];
    } else if (components.m.text) {
      matDetails = [components.m.text];
    }
    const matPart = matDetails.length > 0 ? `M (${matDetails.join(", ")})` : "M";
    parts.push(matPart);
  }
  return parts.join(", ");
}
function parseSpellsFile2(json, editionId) {
  if (!json.spell) return [];
  json._editionId = editionId;
  return json.spell.map((spell) => {
    const sources = spell.source ? Array.isArray(spell.source) ? spell.source : [spell.source] : ["unknown"];
    const name = spell.name;
    const school = SCHOOL_MAP2[spell.school] ?? spell.school;
    const level = spell.level;
    const range = formatRange2(spell.range);
    const castingTime = formatTime2(spell.time);
    const duration = formatDuration2(spell.duration);
    const formattedSources = sources.map((s) => getFullSourceName2(s, editionId));
    const attackType = spell.attackType || "";
    const damageType = spell.damageInflict?.[0] || "Teleportation";
    const ritual = spell.ritual === true;
    const concentration = spell.duration?.some((d) => d.concentration) ?? false;
    const FM = buildFM2(spell, SPELL_META_DEFS2);
    const yaml = serializeFrontmatter2(FM, SPELL_META_DEFS2);
    const safeName = name.replace(/\//g, "-");
    const title = `# ${name}`;
    const levelLabel = level === 0 ? `${school} Cantrip` : `${ordinal2(level)}-level ${school} Spell`;
    const subtitle = `### *${levelLabel}*${concentration ? " *(Concentration)*" : ""}`;
    const headerLines = [
      title,
      subtitle,
      `**Casting Time:** ${castingTime}`,
      `**Range:** ${range}`,
      `**Components:** ${formatComponents2(spell.components)}`,
      `**Duration:** ${duration}`
    ];
    const bodyLines = [
      ...(spell.entries ?? []).map((e) => formatEntry2(e)),
      ...(spell.entriesHigherLevel ?? []).map((e) => formatEntry2(e))
    ];
    const footerLines = [
      `---`,
      `**Source:** ${formattedSources.join(", ")}`
    ];
    return {
      path: `${safeName}.md`,
      content: [
        `---
${yaml}
---`,
        headerLines.join("\n"),
        ``,
        bodyLines.join("\n\n"),
        ``,
        footerLines.join("\n")
      ].join("\n")
    };
  });
}

// src/parsers/5e-2025/species.ts
function slug2(name) {
  return name.replace(/;/g, ":").replace(/[\/:"]/g, ":").trim();
}
var BLOCKED_TRAITS2 = ["Age", "Size", "Languages", "Creature Type", "Speed"];
function parseSpeciesFile2(json, editionId) {
  if (!Array.isArray(json.race)) return [];
  json._editionId = editionId;
  const rawVariants = json.race.filter(
    (r) => (r.basicRules === true || r.basicRules2024 === true) && !/\((?:Kaladesh|Zendikar|Amonkhet|Innistrad|Ixalan)\)$/.test(r.name)
  );
  const byName = /* @__PURE__ */ new Map();
  for (const r of rawVariants) {
    const list = byName.get(r.name) ?? [];
    list.push(r);
    byName.set(r.name, list);
  }
  const subracesList = Array.isArray(json.subrace) ? json.subrace : [];
  const out = [];
  for (const [raceName, raceVariants] of byName.entries()) {
    const safeName = slug2(raceName);
    const primary = raceVariants.reduce(
      (best, cur) => Object.keys(cur).length > Object.keys(best).length ? cur : best,
      raceVariants[0]
    );
    if (!primary.ability) {
      const humanEntry = subracesList.find(
        (sr) => sr.raceName === raceName && sr.raceSource === primary.source && !("name" in sr) && Array.isArray(sr.ability)
      );
      if (humanEntry) primary.ability = humanEntry.ability;
    }
    const fm = buildFM2(primary, SPECIES_META_DEFS2);
    const senses = [];
    if (primary.darkvision) senses.push(`Darkvision ${primary.darkvision} ft.`);
    if (primary.blindsight) senses.push(`Blindsight ${primary.blindsight} ft.`);
    if (primary.tremorsense) senses.push(`Tremorsense ${primary.tremorsense} ft.`);
    if (primary.truesight) senses.push(`Truesight ${primary.truesight} ft.`);
    if (senses.length) fm.senses = senses;
    if (Array.isArray(fm.traits)) {
      fm.traits = fm.traits.filter((t) => !BLOCKED_TRAITS2.includes(t));
    }
    const yaml = serializeFrontmatter2(fm, SPECIES_META_DEFS2);
    const lines = [];
    lines.push(`# ${raceName}`, `## Stats`);
    const size = Array.isArray(primary.size) ? primary.size.map((s) => SIZE_MAP4[s] || s).join("/") : SIZE_MAP4[primary.size] ?? primary.size;
    lines.push(`**Size:** ${size}`);
    const speed = typeof primary.speed === "number" ? primary.speed : primary.speed?.walk ?? primary.speed?.base ?? 0;
    lines.push(`**Speed:** ${speed} ft. walking`);
    const kids = subracesList.filter(
      (sr) => sr.name && sr.raceName === raceName && sr.raceSource === primary.source
    );
    const rawAbility = Array.isArray(primary.ability) ? primary.ability : Array.isArray(kids[0]?.ability) ? kids[0].ability : [];
    if (Array.isArray(rawAbility) && rawAbility.length) {
      const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
      let chooseOpt = null;
      for (const obj of rawAbility) {
        if ("choose" in obj) chooseOpt = obj.choose;
        else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
      }
      const pairs = Object.entries(bonuses);
      const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
      if (chooseOpt?.count && Array.isArray(chooseOpt.from)) {
        parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
      }
      if (parts.length) lines.push(`**Ability Scores:** ${parts.join(", ")}`);
    }
    const langs = fm.languages;
    if (langs?.length) lines.push(`**Languages:** ${langs.join(", ")}`);
    if (Array.isArray(primary.skillProficiencies)) {
      const skillLabels = [];
      for (const e of primary.skillProficiencies) {
        if (e.choose?.from) {
          skillLabels.push(`Choose from: ${e.choose.from.map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(", ")}`);
        } else {
          const val = e.proficiency ?? e.name ?? e;
          if (typeof val === "string") skillLabels.push(val.charAt(0).toUpperCase() + val.slice(1));
        }
      }
      if (skillLabels.length) lines.push(`**Skill Proficiencies:** ${skillLabels.join("; ")}`);
    }
    const tp = fm[FM_FIELDS4.TOOL_PROFICIENCIES];
    const wp = fm[FM_FIELDS4.WEAPON_PROFICIENCIES];
    const ap = fm[FM_FIELDS4.ARMOR_PROFICIENCIES];
    if (tp?.length) lines.push(`**Tool Proficiencies:** ${tp.join(", ")}`);
    if (wp?.length) lines.push(`**Weapon Proficiencies:** ${wp.join(", ")}`);
    if (ap?.length) lines.push(`**Armor Proficiencies:** ${ap.join(", ")}`);
    lines.push(`## Traits`);
    const seen = /* @__PURE__ */ new Set();
    for (const trait of fm.traits || []) {
      lines.push(`##### ${trait}`);
      const ent = primary.entries?.find((e) => e.name === trait);
      if (ent?.entries) {
        ent.entries.forEach((sub, idx) => {
          let blk;
          if (sub.type === "table") blk = renderMarkdownTable2(sub);
          else if (sub.type === "list") blk = sub.items.map((it) => typeof it === "string" ? `- ${replace5eTags2(it)}` : `- ${it.name}`).join("\n");
          else if (typeof sub === "string") blk = replace5eTags2(sub);
          if (blk && !seen.has(blk)) {
            lines.push(blk);
            seen.add(blk);
            if (ent.entries.length > 1 && idx < ent.entries.length - 1) lines.push("");
          }
        });
      }
    }
    const subs = kids;
    if (subs.length) {
      out.push({
        path: `Species/${safeName}/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
      const subFolder = `Species/${safeName}/Subspecies`;
      for (const sr of subs) {
        const display = sr.name.replace(/;/g, ":");
        const subLines = [`# ${display}`];
        if (Array.isArray(sr.ability)) {
          const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
          let chooseOpt = null;
          for (const obj of sr.ability) {
            if ("choose" in obj) chooseOpt = obj.choose;
            else for (const [k, v] of Object.entries(obj)) bonuses[k] += v;
          }
          const pairs = Object.entries(bonuses);
          const parts = pairs.filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
          if (chooseOpt?.count) parts.push(`CHOOSE ${chooseOpt.count} from ${chooseOpt.from.map((s) => s.toUpperCase()).join(", ")}`);
          if (parts.length) subLines.push(`**Ability Scores:** ${parts.join(", ")}`);
        }
        for (const entry of sr.entries || []) {
          subLines.push(formatEntry2(entry));
          subLines.push("");
        }
        const subYaml = serializeFrontmatter2(buildFM2(sr, SPECIES_META_DEFS2), SPECIES_META_DEFS2);
        out.push({
          path: `${subFolder}/${slug2(sr.name)}.md`,
          content: `---
${subYaml}
---

${subLines.join("\n")}`
        });
      }
    } else {
      out.push({
        path: `Species/${safeName}.md`,
        content: `---
${yaml}
---

${lines.join("\n")}`
      });
    }
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-2025/classes.ts
function isTypedEntry2(x) {
  return x != null && typeof x === "object" && !Array.isArray(x) && typeof x.type === "string";
}
function formatFeatureLink2(name) {
  const ignore = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
  if (ignore.some((sub) => name.toLowerCase().includes(sub.toLowerCase()))) {
    return name;
  }
  const anchor = name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
  return `[[#${anchor}]]`;
}
var OPT_FEATURE_TYPE_TO_FULL2 = {
  AI: "Artificer Infusion",
  ED: "Elemental Discipline",
  EI: "Eldritch Invocation",
  MM: "Metamagic",
  MV: "Maneuver",
  "MV:B": "Maneuver, Battle Master",
  "MV:C2-UA": "Maneuver, Cavalier V2 (UA)",
  "AS:V1-UA": "Arcane Shot, V1 (UA)",
  "AS:V2-UA": "Arcane Shot, V2 (UA)",
  AS: "Arcane Shot",
  OTH: "Other",
  "FS:F": "Fighting Style; Fighter",
  "FS:B": "Fighting Style; Bard",
  "FS:P": "Fighting Style; Paladin",
  "FS:R": "Fighting Style; Ranger",
  PB: "Pact Boon",
  OR: "Onomancy Resonant",
  RN: "Rune Knight Rune",
  AF: "Alchemical Formula",
  TT: "Traveler's Trick"
};
function parseClassFile2(json, editionId, fileName, optionalFeatures) {
  json._editionId = editionId;
  const cls = Array.isArray(json.class) ? json.class[0] : json;
  const className = typeof cls.name === "string" ? cls.name : fileName ? fileName.replace(/^class-/, "").replace(/\.json$/, "") : "Unknown";
  const subclassFiles = [];
  const PROF_BONUS_BY_LEVEL = [
    "+2",
    "+2",
    "+2",
    "+2",
    "+3",
    "+3",
    "+3",
    "+3",
    "+4",
    "+4",
    "+4",
    "+4",
    "+5",
    "+5",
    "+5",
    "+5",
    "+6",
    "+6",
    "+6",
    "+6"
  ];
  const hdNum = cls.hd?.number ?? 1;
  const hdFaces = cls.hd?.faces ?? 6;
  const hdStr = `${hdNum}d${hdFaces}`;
  const hdMax = hdNum * hdFaces;
  const hdAvg = Math.ceil((hdFaces + 1) / 2);
  const baseFM = buildFM2(cls, CLASS_META_DEFS2);
  const fm = { ...baseFM, hd: hdStr };
  const yaml = serializeFrontmatter2(fm, CLASS_META_DEFS2);
  const lines = [];
  lines.push(`# ${className}`);
  if (cls.source) lines.push(`**Source:** ${cls.source}`);
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Hit Points`);
  lines.push(`**Hit Dice:** ${hdStr} per ${className} level`);
  lines.push(`**Hit Points at 1st Level:** ${hdMax} + your Constitution modifier`);
  lines.push(
    `**Hit Points at Higher Levels:** ${hdStr} (or ${hdAvg}) + your Constitution modifier per level after 1st`
  );
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Proficiencies`);
  const sp = cls.startingProficiencies ?? {};
  if (Array.isArray(sp.armor) && sp.armor.length) {
    lines.push(`- **Armor:** ${sp.armor.join(", ")}`);
  }
  const weaponList = unifiedWeaponProfs2(sp);
  if (weaponList.length) {
    lines.push(`- **Weapons:** ${weaponList.join(", ")}`);
  }
  const toolList = unifiedToolProfs2(sp);
  if (toolList.length) {
    lines.push(`- **Tools:** ${toolList.join(", ")}`);
  }
  const saves = Array.isArray(cls.proficiency) ? cls.proficiency.map(
    (k) => ({
      str: "Strength",
      dex: "Dexterity",
      con: "Constitution",
      int: "Intelligence",
      wis: "Wisdom",
      cha: "Charisma"
    })[k] || k.toUpperCase()
  ) : [];
  if (saves.length) {
    lines.push(`- **Saving Throws:** ${saves.join(", ")}`);
  }
  {
    const rawSkills = Array.isArray(sp.skillProficiencies) ? sp.skillProficiencies : Array.isArray(sp.skills) ? sp.skills : Array.isArray(sp.skillProf) ? sp.skillProf : [];
    const choiceEntry = rawSkills.find(
      (e) => e && (typeof e.choose === "object" || typeof e.any === "number")
    );
    if (choiceEntry) {
      const count = choiceEntry.choose?.count ?? choiceEntry.any ?? 1;
      const options = Array.isArray(choiceEntry.choose?.from) ? choiceEntry.choose.from.map(
        (s) => (
          // title-case each word (or just use s)
          s.split(" ").map((w) => w[0].toUpperCase() + w.slice(1)).join(" ")
        )
      ) : SKILL_OPTIONS2;
      lines.push(`- **Skills (Choose ${count}):** ${options.join(", ")}`);
    } else {
      const flat = unifiedSkills4(sp);
      if (flat.length) {
        lines.push(`- **Skills:** ${flat.join(", ")}`);
      }
    }
  }
  if (Array.isArray(cls.startingEquipment)) {
    lines.push(`
### Equipment`);
    cls.startingEquipment.filter((e) => typeof e === "string").forEach((item) => lines.push(`- ${item}`));
  }
  const progGroups = cls.classTableGroups ?? [];
  const maxLevel = 20;
  if (!progGroups.length) {
    lines.push(`*(No class table provided for this class.)*`);
  } else {
    const featuresByLevel2 = {};
    for (const feat of cls.classFeatures ?? []) {
      const raw = typeof feat === "object" && feat.classFeature ? feat.classFeature : String(feat);
      const [name, , , lvlStr] = raw.split("|");
      const lvl = Number(lvlStr ?? 0);
      if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
      featuresByLevel2[lvl].push(name);
    }
    const allLabelsSet = /* @__PURE__ */ new Set();
    const rowMaps = {};
    for (const group of progGroups) {
      const labels = Array.isArray(group.colLabels) ? group.colLabels.map((l) => replace5eTags2(l)) : [];
      const rows = Array.isArray(group.rows) ? group.rows : Array.isArray(group.rowsSpellProgression) ? group.rowsSpellProgression : [];
      if (!labels.length || !rows.length) continue;
      for (let lvl = 0; lvl < rows.length; lvl++) {
        const levelNum = lvl + 1;
        if (!rowMaps[levelNum]) rowMaps[levelNum] = {};
        const rowMap = rowMaps[levelNum];
        const cells = rows[lvl];
        for (let i = 0; i < labels.length; i++) {
          const label = labels[i];
          let val = "";
          const cell = cells[i];
          if (Array.isArray(cell)) {
            val = cell.join(", ");
          } else if (cell && typeof cell === "object" && "value" in cell) {
            val = String(cell.value);
          } else {
            val = String(cell ?? "");
          }
          allLabelsSet.add(label);
          rowMap[label] = val;
        }
      }
    }
    const allLabels = Array.from(allLabelsSet).filter(
      (lbl) => !/Cantrips Known|Spells Known|\d+(st|nd|rd|th)/.test(lbl)
    );
    const mergedLabels = ["Level", "Proficiency Bonus", "Class Features", ...allLabels];
    const mergedRows = [];
    for (let lvl = 1; lvl <= maxLevel; lvl++) {
      const featureList = (featuresByLevel2[lvl] ?? []).map(formatFeatureLink2);
      const rowMap = rowMaps[lvl] ?? {};
      mergedRows.push([
        lvl.toString(),
        PROF_BONUS_BY_LEVEL[lvl - 1] || "",
        featureList.join(", ").replace(/\|/g, "&#124;"),
        ...allLabels.map((label) => rowMap[label] ?? "")
      ]);
    }
    lines.push(`
> [!example]- Class Progression Table`);
    lines.push(
      renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels: mergedLabels,
        rows: mergedRows
      })
    );
  }
  const csGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.colLabels.some((lbl) => /Cantrips Known|Spells Known/.test(String(lbl)))
  );
  const slotGroup = progGroups.find(
    (g) => Array.isArray(g.colLabels) && g.title === "Spell Slots per Spell Level"
  );
  if (csGroup && slotGroup) {
    const csLabels = csGroup.colLabels.map((l) => replace5eTags2(l));
    const slotLabels = slotGroup.colLabels.map((l) => replace5eTags2(l));
    const csRows = csGroup.rows || [];
    const slotRows = slotGroup.rowsSpellProgression || [];
    const colLabels = ["Level", ...csLabels, ...slotLabels];
    const spellRows = [];
    for (let i = 0; i < Math.max(csRows.length, slotRows.length); i++) {
      const lvl = String(i + 1);
      const csCells = csRows[i] ? csRows[i].map(String) : csLabels.map((_) => "");
      const slotCells = slotRows[i] ? slotRows[i].map(String) : slotLabels.map((_) => "");
      spellRows.push([lvl, ...csCells, ...slotCells]);
    }
    lines.push(`
> [!tip]- Spell Progression Table`);
    lines.push(
      renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels,
        rows: spellRows
      })
    );
  }
  const subs = Array.isArray(json.subclass) ? json.subclass : [];
  const subclassFeatures = Array.isArray(json.subclassFeature) ? json.subclassFeature : json.lookup?.subclassFeature ?? [];
  for (const sc of subs) {
    const subclassName = sc.name;
    const subLines = [];
    subLines.push(`# ${subclassName}`);
    subLines.push(`**Parent Class:** [[${className}]]`);
    if (sc.source) subLines.push(`**Source:** ${sc.source}`);
    subLines.push(``);
    const intro = subclassFeatures.find(
      (f) => f.name === sc.name && f.level === 3 && f.subclassShortName === sc.shortName && f.subclassSource === sc.source
    );
    if (intro?.entries?.length) {
      const introText = Array.isArray(intro.entries) ? intro.entries.map(
        (e) => typeof e === "string" ? replace5eTags2(e) : formatEntry2(e)
      ).join("\n\n") : formatEntry2(intro.entries);
      subLines.push(introText, ``);
    }
    const code = Object.entries(OPT_FEATURE_TYPE_TO_FULL2).find(
      ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
    )?.[0];
    if (code) {
      const matches = optionalFeatures.filter(
        (of) => Array.isArray(of.featureType) && of.featureType.includes(code)
      );
      if (matches.length) {
        subLines.push(`## ${subclassName} Optional Features`);
        for (const feat of matches) {
          for (const entry of feat.entries) {
            const txt = typeof entry === "string" ? replace5eTags2(entry) : formatEntry2(entry);
            subLines.push(`**${feat.name}:** ${txt}`);
          }
          subLines.push(``);
        }
      }
    }
    const prog = sc.subclassTableGroups ?? [];
    if (prog.length) {
      const labels = /* @__PURE__ */ new Set();
      const rowsMap = {};
      for (const g of prog) {
        const cols = (g.colLabels ?? []).map(replace5eTags2);
        const rows = Array.isArray(g.rows) ? g.rows : Array.isArray(g.rowsSpellProgression) ? g.rowsSpellProgression : [];
        rows.forEach((r, i) => {
          const lvl = i + 1;
          rowsMap[lvl] ?? (rowsMap[lvl] = {});
          r.forEach((c, j) => {
            const lab = cols[j];
            if (!lab) return;
            labels.add(lab);
            rowsMap[lvl][lab] = typeof c === "object" && c !== null && "value" in c ? String(c.value) : String(c ?? "");
          });
        });
      }
      const hdrs = Array.from(labels);
      subLines.push(`## Subclass Progression`);
      subLines.push(renderMarkdownTable2({
        type: "table",
        caption: "",
        colLabels: ["Level", ...hdrs],
        rows: Array.from({ length: 20 }, (_, i) => {
          const lvl = i + 1;
          return [String(lvl), ...hdrs.map((h) => rowsMap[lvl]?.[h] ?? "")];
        })
      }));
    }
    const featsByLvl = {};
    for (const f of subclassFeatures) {
      if (f.subclassShortName === sc.shortName && f.subclassSource === sc.source && f.className === className) {
        const lvl = f.level ?? 0;
        ;
        (featsByLvl[lvl] ?? (featsByLvl[lvl] = [])).push(f);
      }
    }
    for (const lvl of Object.keys(featsByLvl).map(Number).sort((a, b) => a - b)) {
      subLines.push(`---`, `## Level ${lvl}`);
      for (const f of featsByLvl[lvl]) {
        subLines.push(`### ${f.name}`);
        for (const ent of Array.isArray(f.entries) ? f.entries : [f.entries]) {
          if (typeof ent === "string") {
            subLines.push(replace5eTags2(ent));
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "entries" && /^Maneuvers$/i.test(ent.name)) {
            subLines.push(`##### ${ent.name}`);
            for (const txt of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(typeof txt === "string" ? replace5eTags2(txt) : formatEntry2(txt));
            }
            const code2 = Object.entries(OPT_FEATURE_TYPE_TO_FULL2).find(
              ([, full]) => full.toLowerCase().includes(subclassName.toLowerCase())
            )?.[0];
            if (code2) {
              const matches = optionalFeatures.filter(
                (of) => Array.isArray(of.featureType) && of.featureType.includes(code2)
              );
              for (const featDef of matches) {
                for (const sub of featDef.entries) {
                  const line = typeof sub === "string" ? replace5eTags2(sub) : formatEntry2(sub);
                  subLines.push(`**${featDef.name}:** ${line}`);
                }
                subLines.push("");
              }
            }
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "entries" && ent.name) {
            subLines.push(`##### ${ent.name}`);
            for (const e2 of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
              subLines.push(formatEntry2(e2));
            }
            continue;
          }
          if (isTypedEntry2(ent) && ent.type === "inset" && ent.name) {
            const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
            subLines.push(`> **${ent.name}**`);
            inner.forEach((e2) => subLines.push(`> ${formatEntry2(e2)}`));
            continue;
          }
          const fb = formatEntry2(ent);
          if (fb) subLines.push(fb);
        }
      }
    }
    const subclassContent = subLines.join("\n\n").replace(/\n{3,}/g, "\n\n");
    subclassFiles.push({
      path: `Classes/${className}/Subclasses/${subclassName}.md`,
      content: subclassContent
    });
  }
  if (subs.length) {
    const links = subs.map(
      (sc) => `[[Subclasses/${sc.name.replace(/[\\/]/g, "-")}|${sc.name}]]`
    );
    lines.push(`
**Subclasses:** ${links.join(", ")}`);
  }
  const allFeatures = Array.isArray(json.classFeature) ? json.classFeature : json.lookup?.classFeature ?? [];
  const featuresByLevel = {};
  for (const entry of allFeatures) {
    if (entry.className !== className) continue;
    const lvl = entry.level ?? 0;
    if (!featuresByLevel[lvl]) featuresByLevel[lvl] = [];
    featuresByLevel[lvl].push(entry);
  }
  lines.push(``);
  lines.push(`---`);
  lines.push(`## Level Features`);
  const levels = Object.keys(featuresByLevel).map((n) => +n).sort((a, b) => a - b);
  for (const lvl of levels) {
    lines.push(`### Level ${lvl}`);
    for (const feat of featuresByLevel[lvl]) {
      lines.push(`#### ${feat.name}`);
      const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
      for (const ent of entries) {
        if (typeof ent === "string") {
          const txt = formatEntry2(ent).trim();
          if (txt === "{" || txt === "}") continue;
          lines.push(txt);
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "list" && Array.isArray(ent.items)) {
          for (const item of ent.items) {
            lines.push(`- ${replace5eTags2(item)}`);
          }
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "options") {
          if (ent.count) {
            lines.push("");
            lines.push(`**Choose ${ent.count} of the following options:**`);
            lines.push("");
          }
          for (const optRef of Array.isArray(ent.entries) ? ent.entries : [ent.entries]) {
            if (optRef.type === "refOptionalfeature") {
              const [optName, optSrc] = optRef.optionalfeature.split("|");
              const featDef = optionalFeatures.find(
                (f) => f.name === optName && (!optSrc || f.source === optSrc)
              );
              if (featDef) {
                featDef.entries.forEach((subEntry, idx) => {
                  const text = typeof subEntry === "string" ? replace5eTags2(subEntry) : formatEntry2(subEntry);
                  if (idx === 0) {
                    lines.push(`- **${featDef.name}:** ${text}`);
                  } else {
                    lines.push(`  - ${text}`);
                  }
                });
                lines.push("");
              } else {
                lines.push(`**${optName}:**`);
              }
            } else {
              const txt = formatEntry2(optRef);
              if (txt) lines.push(`- ${txt}`);
            }
          }
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "refOptionalfeature") {
          const [name] = ent.optionalfeature.split("|");
          lines.push(`- [[${name}|${name}]]`);
          continue;
        }
        if (isTypedEntry2(ent) && ent.type === "entries" && ent.name) {
          lines.push(`##### ${ent.name}`);
          const inner = Array.isArray(ent.entries) ? ent.entries : [ent.entries];
          for (const e2 of inner) {
            lines.push(formatEntry2(e2));
          }
          continue;
        }
        const fallback = formatEntry2(ent);
        if (fallback) lines.push(fallback);
      }
      lines.push(``);
    }
    lines.push(`---`);
  }
  let content = `---
${yaml}
---

${lines.join("\n")}`;
  content = replace5eTags2(content);
  content = content.replace(/\n{3,}/g, "\n\n").replace(/\n +\n/g, "\n\n");
  return [
    {
      path: `Classes/${className}/${className}.md`,
      content
    },
    ...subclassFiles
  ];
}

// src/parsers/5e-2025/rules.ts
function parseActionsFile2(json, editionId) {
  if (!Array.isArray(json.action)) return [];
  const lines = [];
  function emitBlock(block) {
    if (!block) return;
    if (typeof block === "string") {
      for (const para of block.split(/\n{2,}/)) {
        const t = para.trim();
        if (t) {
          lines.push(replace5eTags2(t));
          lines.push("");
        }
      }
      return;
    }
    if (block.type === "list" && Array.isArray(block.items)) {
      for (const item of block.items) {
        lines.push(`- ${replace5eTags2(item)}`);
      }
      lines.push("");
      return;
    }
    if (block.type === "table" && Array.isArray(block.rows)) {
      const headers = block.colLabels || [];
      lines.push(`| ${headers.join(" | ")} |`);
      lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
      for (const row of block.rows) {
        lines.push(`| ${row.join(" | ")} |`);
      }
      lines.push("");
      return;
    }
    if ((block.type === "entries" || block.type === "inset") && Array.isArray(block.entries)) {
      if (block.name) {
        if (lines[lines.length - 1] === "") lines.pop();
        lines.push(`### ${block.name}`);
      }
      for (const child of block.entries) {
        emitBlock(child);
      }
      return;
    }
    const txt = Array.isArray(block) ? block.join(" ") : typeof block === "object" ? JSON.stringify(block) : String(block);
    lines.push(replace5eTags2(txt));
    lines.push("");
  }
  for (const action of json.action) {
    lines.push(`## ${action.name}`);
    for (const entry of Array.isArray(action.entries) ? action.entries : [action.entries]) {
      emitBlock(entry);
    }
    if (Array.isArray(action.seeAlsoAction)) {
      lines.push("**See Also:**");
      lines.push("");
      for (const ref of action.seeAlsoAction) {
        const [name] = String(ref).split("|");
        lines.push(`- [[${name}]]`);
      }
      lines.push("");
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Actions.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseConditionsDiseasesFile2(json, editionId) {
  const outputs = [];
  const processItems = (items, outPath) => {
    const lines = [];
    for (const item of items) {
      lines.push(`## ${item.name}`);
      const entries = Array.isArray(item.entries) ? item.entries : [item.entries];
      for (const entry of entries) {
        if (!entry) continue;
        if (typeof entry === "string") {
          for (const para of entry.split(/\n{2,}/)) {
            const t = para.trim();
            if (t) {
              lines.push(replace5eTags2(t));
              lines.push("");
            }
          }
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          for (const txt of entry.items) {
            lines.push(`- ${replace5eTags2(txt)}`);
          }
          lines.push("");
        } else if (entry.type === "table" && Array.isArray(entry.rows)) {
          const headers = entry.colLabels || [];
          lines.push(`| ${headers.join(" | ")} |`);
          lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
          for (const row of entry.rows) {
            lines.push(`| ${row.join(" | ")} |`);
          }
          lines.push("");
        } else if (entry.type === "entries" && Array.isArray(entry.entries)) {
          if (entry.name) {
            lines.push(`### ${entry.name}`);
            for (const sub of entry.entries) {
              if (sub.type === "entries" && sub.name && Array.isArray(sub.entries)) {
                if (lines[lines.length - 1] === "") lines.pop();
                lines.push(`#### ${sub.name}`);
                for (const txtEntry of sub.entries) {
                  const text = typeof txtEntry === "string" ? replace5eTags2(txtEntry) : replace5eTags2(String(txtEntry));
                  lines.push(text);
                  lines.push("");
                }
              } else if (typeof sub === "string") {
                lines.push(replace5eTags2(sub));
                lines.push("");
              }
            }
          } else {
            for (const sub of entry.entries) {
              if (sub.type === "entries" && sub.name && Array.isArray(sub.entries)) {
                if (lines[lines.length - 1] === "") lines.pop();
                lines.push(`### ${sub.name}`);
                for (const txtEntry of sub.entries) {
                  const text = typeof txtEntry === "string" ? replace5eTags2(txtEntry) : replace5eTags2(String(txtEntry));
                  lines.push(text);
                  lines.push("");
                }
              } else if (typeof sub === "string") {
                lines.push(replace5eTags2(sub));
                lines.push("");
              }
            }
          }
        } else {
          const txt = Array.isArray(entry) ? entry.join(" ") : typeof entry === "object" ? JSON.stringify(entry) : String(entry);
          lines.push(replace5eTags2(txt));
          lines.push("");
        }
      }
      lines.push("---");
    }
    const cleaned = lines.reduce((acc, curr) => {
      if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
      return acc.concat(curr);
    }, []);
    outputs.push({
      path: outPath,
      content: cleaned.join("\n").trim() + "\n"
    });
  };
  processItems(json.condition || [], "Rules and Reference/Conditions.md");
  processItems(json.disease || [], "Rules and Reference/Diseases.md");
  return outputs;
}
function parseSensesFile2(json, editionId) {
  const items = Array.isArray(json.sense) ? json.sense : Array.isArray(json.senses) ? json.senses : [];
  if (!items.length) return [];
  const lines = [];
  function emitBlock(block) {
    if (!block) return;
    if (typeof block === "string") {
      for (const para of block.split(/\n{2,}/)) {
        const t = para.trim();
        if (t) {
          lines.push(replace5eTags2(t));
          lines.push("");
        }
      }
      return;
    }
    if (block.type === "list" && Array.isArray(block.items)) {
      for (const item of block.items) {
        if (typeof item === "string") {
          lines.push(`- ${replace5eTags2(item)}`);
          lines.push("");
        } else if (item && typeof item === "object") {
          if (item.name && Array.isArray(item.entries)) {
            lines.push(`- **${item.name}**`);
            for (const ent of item.entries) {
              lines.push(`  - ${replace5eTags2(ent)}`);
            }
            lines.push("");
          } else {
            lines.push(`- ${replace5eTags2(JSON.stringify(item))}`);
            lines.push("");
          }
        }
      }
      return;
    }
    if (block.type === "table" && Array.isArray(block.rows)) {
      const headers = block.colLabels || [];
      lines.push(`| ${headers.join(" | ")} |`);
      lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
      for (const row of block.rows) {
        lines.push(`| ${row.join(" | ")} |`);
      }
      lines.push("");
      return;
    }
    if ((block.type === "entries" || block.type === "inset") && Array.isArray(block.entries)) {
      if (block.name) {
        if (lines[lines.length - 1] === "") lines.pop();
        lines.push(`### ${block.name}`);
      }
      for (const child of block.entries) {
        emitBlock(child);
      }
      return;
    }
    const txt = Array.isArray(block) ? block.join(" ") : typeof block === "object" ? JSON.stringify(block) : String(block);
    lines.push(replace5eTags2(txt));
    lines.push("");
  }
  for (const sense of items) {
    lines.push(`## ${sense.name}`);
    for (const entry of Array.isArray(sense.entries) ? sense.entries : [sense.entries]) {
      emitBlock(entry);
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Senses.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseSkillsFile2(json, editionId) {
  const items = Array.isArray(json.skill) ? json.skill : Array.isArray(json.skills) ? json.skills : [];
  if (!items.length) return [];
  const lines = [];
  for (const skill of items) {
    lines.push(`## ${skill.name}`);
    if (skill.ability) {
      lines.push(`*Ability: ${skill.ability}*`);
      lines.push("");
    }
    const entries = Array.isArray(skill.entries) ? skill.entries : [skill.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags2(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags2(item)}`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags2(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Skills.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}

// src/parsers/5e-2025/feats.ts
function parseFeatsFile2(json, editionId) {
  const feats = Array.isArray(json.feat) ? json.feat : Array.isArray(json.feats) ? json.feats : [];
  return feats.map((feat) => {
    const lines = [];
    const fm = buildFM2({ ...feat, _editionId: editionId }, FEATS_META_DEFS2);
    lines.push("---");
    lines.push(serializeFrontmatter2(fm, FEATS_META_DEFS2));
    lines.push("---", "");
    lines.push(`# ${feat.name}`, "");
    const prereqs = [];
    if (Array.isArray(feat.prerequisite)) {
      feat.prerequisite.forEach((pr) => {
        if (pr.level) prereqs.push(`Level ${pr.level}`);
        if (Array.isArray(pr.feat)) {
          pr.feat.forEach((f) => {
            const name = f.split("|")[0].replace(/\b\w/g, (c) => c.toUpperCase());
            prereqs.push(`Prerequisite: [[${name}]]`);
          });
        }
      });
    }
    if (feat.spellcastingPrepared) prereqs.push(`Prerequisite: Spellcaster`);
    if (Array.isArray(feat.toolProficiencies)) {
      feat.toolProficiencies.forEach((tp) => {
        Object.entries(tp).forEach(([key]) => {
          if (key === "anyArtisansTool") {
            prereqs.push(`Prerequisite: Proficient with an artisan's tool`);
          } else {
            prereqs.push(`Prerequisite: Proficient with ${key.replace(/([A-Z])/g, " $1").trim()}`);
          }
        });
      });
    }
    if (Array.isArray(feat.armorProficiencies)) {
      feat.armorProficiencies.forEach((arm) => {
        const armStr = typeof arm === "string" ? arm : JSON.stringify(arm);
        prereqs.push(`Prerequisite: Proficient with ${armStr.replace(/([A-Z])/g, " $1").trim()}`);
      });
    }
    if (feat.race) prereqs.push(`Prerequisite: ${feat.race}`);
    if (prereqs.length) {
      lines.push("**Prerequisites**");
      prereqs.forEach((p) => lines.push(`- ${p}`));
      lines.push("");
    }
    const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
    entries.forEach((entry) => {
      if (!entry) return;
      if (typeof entry === "string") {
        entry.split(/\n{2,}/).forEach((p) => {
          const t = p.trim();
          if (t) {
            lines.push(replace5eTags2(t));
            lines.push("");
          }
        });
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        entry.items.forEach((it) => {
          if (typeof it === "string") {
            lines.push(`- ${replace5eTags2(it)}`);
          } else if (it.type === "item" && it.name) {
            lines.push(`- **${it.name}**`);
            const subs = Array.isArray(it.entries) ? it.entries : [it.entries];
            subs.forEach(
              (s) => lines.push(`  - ${replace5eTags2(typeof s === "string" ? s : JSON.stringify(s))}`)
            );
          }
        });
        lines.push("");
      } else if (entry.type === "inset") {
        lines.push(`- *${entry.name}*`);
        const subs = Array.isArray(entry.entries) ? entry.entries : [entry.entries];
        subs.forEach((s) => lines.push(`  - ${replace5eTags2(s)}`));
        lines.push("");
      } else if ((entry.type === "section" || entry.type === "entries") && Array.isArray(entry.entries)) {
        if (entry.name) {
          lines.push(`## ${entry.name}`);
          lines.push("");
        }
        entry.entries.forEach((s) => {
          lines.push(replace5eTags2(typeof s === "string" ? s : JSON.stringify(s)));
          lines.push("");
        });
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const hdr = entry.colLabels || [];
        lines.push(`| ${hdr.join(" | ")} |`);
        lines.push(`| ${hdr.map(() => "---").join(" | ")} |`);
        entry.rows.forEach(
          (row) => lines.push(`| ${row.join(" | ")} |`)
        );
        lines.push("");
      }
    });
    return {
      path: `Player Build/Feats/${feat.name}.md`,
      content: lines.join("\n").trim() + "\n"
    };
  });
}

// src/parsers/5e-2025/backgrounds.ts
function parseBackgroundsFile2(json, editionId) {
  const raw = Array.isArray(json.background) ? json.background : Array.isArray(json.backgrounds) ? json.backgrounds : [];
  const backgrounds = raw.filter((bg) => {
    const nm = bg.name || "";
    return !nm.startsWith("Variant") && !nm.includes("Baldur's Gate");
  });
  const outputs = [];
  backgrounds.forEach((bg) => {
    const lines = [];
    const fm = buildFM2(bg, BACKGROUND_META_DEFS2);
    const extraTraits = Array.isArray(bg.entries) ? bg.entries.filter((e) => e.data?.isFeature && typeof e.name === "string").map((e) => {
      const name = e.name.replace(/^Feature:\s*/, "");
      return `[[${bg.name}#${name}]]`;
    }) : [];
    const yaml = serializeFrontmatter2(fm, BACKGROUND_META_DEFS2);
    lines.push("---", yaml, "---", "");
    lines.push(`# ${bg.name}`, "");
    if (Array.isArray(bg.skillProficiencies) && bg.skillProficiencies.length) {
      const skills = [];
      bg.skillProficiencies.forEach((ent) => {
        if (typeof ent === "string") {
          skills.push(cap4(ent));
        } else if (ent.choose && Array.isArray(ent.choose.from)) {
          skills.push(`Choose ${ent.choose.amount} from ${ent.choose.from.join(", ")}`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => skills.push(cap4(k)));
        }
      });
      lines.push(`**Skill Proficiencies:** ${skills.join(", ")}`, "");
    }
    if (Array.isArray(bg.languageProficiencies) && bg.languageProficiencies.length) {
      const langs = [];
      bg.languageProficiencies.forEach((ent) => {
        if (ent.anyStandard) {
          langs.push(`${ent.anyStandard} of your choice`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => langs.push(cap4(k)));
        }
      });
      lines.push(`**Languages:** ${langs.join(", ")}`, "");
    }
    if (Array.isArray(bg.toolProficiencies) && bg.toolProficiencies.length) {
      const tools = [];
      bg.toolProficiencies.forEach((ent) => {
        if (ent.choose && Array.isArray(ent.choose.from)) {
          const list = ent.choose.from.map(humanize2).join(", ");
          tools.push(`Choose ${ent.choose.count} from ${list}`);
          return;
        }
        if (typeof ent === "string") {
          tools.push(humanize2(ent));
          return;
        }
        Object.entries(ent).filter(([_, v]) => v === true).forEach(([k]) => tools.push(humanize2(k)));
      });
      lines.push(`**Tool Proficiencies:** ${tools.join(", ")}`, "");
    }
    if (Array.isArray(bg.startingEquipment) && bg.startingEquipment.length) {
      lines.push(`**Equipment:**`);
      bg.startingEquipment.forEach((grp) => {
        if (Array.isArray(grp._)) {
          grp._.forEach((it) => lines.push(`- ${fmtItem2(it)}`));
        }
        ["a", "b"].forEach((key) => {
          if (Array.isArray(grp[key])) {
            grp[key].forEach((it) => lines.push(`- ${fmtItem2(it)}`));
          }
        });
      });
      lines.push("");
    }
    if (Array.isArray(bg.entries)) {
      bg.entries.forEach((entry) => {
        if (entry.type === "list" && entry.style === "list-hang-notitle") {
          return;
        }
        if (entry.name) {
          const header = entry.data?.isFeature ? entry.name.replace(/^Feature:\s*/, "") : entry.name;
          lines.push(`## ${header}`, "");
        }
        if (Array.isArray(entry.entries)) {
          entry.entries.forEach((e) => {
            if (typeof e === "string") {
              lines.push(replace5eTags2(e), "");
            } else if (e.type === "list" && Array.isArray(e.items)) {
              e.items.forEach(
                (it) => lines.push(`- ${replace5eTags2(it.entry ?? it)}`)
              );
              lines.push("");
            } else if (e.type === "table") {
              const tbl = renderMarkdownTable2(e);
              if (tbl) lines.push(tbl, "");
            }
          });
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          entry.items.forEach(
            (it) => lines.push(`- ${replace5eTags2(it.entry ?? it)}`)
          );
          lines.push("");
        }
      });
    }
    outputs.push({
      path: `Player Build/Backgrounds/${bg.name}.md`,
      content: lines.join("\n").trimEnd() + "\n"
    });
  });
  return outputs;
}
function cap4(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function fmtItem2(item) {
  if (typeof item === "string") {
    if (item.includes("|")) {
      return replace5eTags2(`{@item ${item}}`);
    }
    return replace5eTags2(item);
  }
  const priceRaw = item.containsValue ?? item.value;
  if (typeof priceRaw === "number" && // make sure it’s not also an “item” or “equipmentType”
  !item.item && !item.equipmentType && !item.special) {
    const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
    return `${gp} gp`;
  }
  if (item.item) {
    const link = replace5eTags2(`{@item ${item.item}}`);
    if (typeof priceRaw === "number") {
      const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
      return `${link} (${gp} gp)`;
    }
    return link;
  }
  if (typeof item.special === "string") {
    return item.special;
  }
  if (item.equipmentType) {
    switch (item.equipmentType) {
      case "toolArtisan":
        return "One type of artisan\u2019s tools (of your choice)";
      case "instrumentMusical":
        return "One type of musical instrument (of your choice)";
      case "setGaming":
        return "One set of gaming dice (of your choice)";
      default:
        return humanize2(item.equipmentType);
    }
  }
  return replace5eTags2(JSON.stringify(item));
}
function humanize2(str) {
  const spaced = str.replace(/([a-z])([A-Z])/g, "$1 $2");
  return spaced.charAt(0).toUpperCase() + spaced.slice(1);
}

// src/parsers/5e-2025/installer.ts
var import_obsidian4 = require("obsidian");
async function listSpellFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/spells`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && item.name.startsWith("spells-") && item.name.endsWith(".json")).map((item) => item.name);
}
async function listBestiaryFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/bestiary`;
  const res = await fetch(url);
  const list = await res.json();
  const CORE_SOURCES = [
    "bestiary-phb.json",
    "bestiary-mm.json",
    "bestiary-dmg.json",
    "bestiary-xge.json",
    "bestiary-vgm.json",
    "bestiary-tce.json",
    "bestiary-egw.json",
    "bestiary-erlw.json",
    "bestiary-mtf.json",
    "bestiary-vrgr.json",
    "bestiary-cos.json",
    "bestiary-oota.json",
    "bestiary-pota.json",
    "bestiary-hotdq.json",
    "bestiary-rot.json",
    "bestiary-skt.json",
    "bestiary-tftyp.json",
    "bestiary-toa.json"
  ];
  return list.filter((item) => item.type === "file" && CORE_SOURCES.includes(item.name)).map((item) => item.name);
}
var ITEM_JSON_FILES2 = [
  "items-base.json",
  "items.json",
  "objects.json",
  "vehicles.json",
  "decks.json"
];
async function listItemFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && ITEM_JSON_FILES2.includes(item.name)).map((item) => item.name);
}
async function listClassFilesFromGitHub2(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/class`;
  const res = await fetch(url);
  const listing = await res.json();
  return listing.filter(
    (item) => item.type === "file" && item.name.startsWith("class-") && item.name.endsWith(".json")
  ).map((item) => item.name);
}
async function ensureFolder2(app, folderPath) {
  const parts = folderPath.split("/");
  let curr = "";
  for (const p of parts) {
    curr = curr ? `${curr}/${p}` : p;
    try {
      await app.vault.createFolder(curr);
    } catch {
    }
  }
}
async function importEditionData2(params) {
  const { app, edition, targetPath } = params;
  const repo = edition.repo ?? "";
  {
    const spellFiles = await listSpellFilesFromGitHub2(repo);
    for (const fileName of spellFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/spells/${fileName}`);
        const json = await res.json();
        const files = parseSpellsFile2(json, edition.id);
        for (const md of files) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Spells/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import spell ${fileName}:`, e);
      }
    }
  }
  {
    const bestiaryFiles = await listBestiaryFilesFromGitHub2(repo);
    for (const fileName of bestiaryFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/bestiary/${fileName}`);
        const json = await res.json();
        const parsed = parseBestiaryFile2(json, edition.id);
        for (const md of parsed) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Bestiary/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import bestiary ${fileName}:`, e);
      }
    }
  }
  {
    const itemFiles = await listItemFilesFromGitHub2(repo);
    for (const fn of itemFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/${fn}`);
        const json = await res.json();
        const mdFiles = parseItemsFile2(json, edition.id);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import items from ${fn}:`, e);
      }
    }
  }
  {
    const res = await fetch(`${edition.sourceUrl}/races.json`);
    const json = await res.json();
    const mdFiles = parseSpeciesFile2(json, edition.id);
    for (const md of mdFiles) {
      const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Player Build/${md.path}`);
      await ensureFolder2(app, fullPath.split("/").slice(0, -1).join("/"));
      await app.vault.adapter.write(fullPath, md.content);
    }
    let optionalFeatures = [];
    try {
      const url = `${edition.sourceUrl}/optionalfeatures.json`;
      const res2 = await fetch(url);
      const text = await res2.text();
      const start = text.indexOf("{");
      if (start === -1) throw new Error("No JSON object found");
      const cleanJson = text.slice(start);
      const raw = JSON.parse(cleanJson);
      optionalFeatures = Array.isArray(raw.optionalfeature) ? raw.optionalfeature : [];
    } catch (e) {
      console.warn("Failed to import optionalfeatures.json:", e);
    }
    {
      const classFiles = await listClassFilesFromGitHub2(repo);
      for (const fileName of classFiles) {
        try {
          const res2 = await fetch(`${edition.sourceUrl}/class/${fileName}`);
          const json2 = await res2.json();
          const mdFiles2 = parseClassFile2(
            json2,
            edition.id,
            fileName,
            optionalFeatures
          );
          for (const md of mdFiles2) {
            const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/Player Build/${md.path}`);
            await ensureFolder2(app, fullPath.split("/").slice(0, -1).join("/"));
            const existing = app.vault.getAbstractFileByPath(fullPath);
            if (existing instanceof import_obsidian4.TFile) {
              await app.vault.modify(existing, md.content);
            } else {
              await app.vault.create(fullPath, md.content);
            }
          }
        } catch (e) {
          console.warn(`Failed to import class ${fileName}:`, e);
        }
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/actions.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseActionsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import actions.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/conditionsdiseases.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseConditionsDiseasesFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import conditionsdiseases.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/senses.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseSensesFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import senses.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/skills.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseSkillsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import skills.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/feats.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseFeatsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(
            `${targetPath}/${md.path}`
          );
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import feats.json:", e);
      }
    }
    {
      try {
        const res2 = await fetch(`${edition.sourceUrl}/backgrounds.json`);
        const json2 = await res2.json();
        const mdFiles2 = parseBackgroundsFile2(json2, edition.id);
        for (const md of mdFiles2) {
          const fullPath = (0, import_obsidian3.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder2(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn("Failed to import backgrounds.json:", e);
      }
    }
  }
}

// src/rulesetInstaller.ts
async function importRulesetData(params) {
  const { app, editionKey, targetPath } = params;
  const edition = AVAILABLE_EDITIONS.find((e) => e.id === editionKey);
  if (!edition) {
    console.warn("Edition not found for:", editionKey);
    return;
  }
  if (!edition.parser) {
    console.warn("No parser defined for:", editionKey);
    return;
  }
  let installerModule;
  switch (edition.parser) {
    case "5e-json":
      installerModule = installer_exports;
      break;
    case "5e-2025":
      installerModule = installer_exports2;
      break;
    // case "other-parser":
    //   installerModule = anotherInstaller;
    //   break;
    default:
      throw new Error(`Unknown parser: ${edition.parser}`);
  }
  await installerModule.importEditionData({ app, edition, targetPath });
}

// src/firstinstallconfirm.ts
var ConfirmFreshInstallModal = class extends import_obsidian5.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    this.contentEl.empty();
    this.titleEl.setText("\u26A0\uFE0F Warning: Fresh Vault Recommended");
    this.contentEl.createEl("div", {
      text: "The full VVunderlore install is intended for a fresh, empty Obsidian vault. If you install in a vault that already has files, any file whose path matches a VVunderlore Toolkit file will be overwritten.\n\nAlso things could just get messy.\n\nMake a perception check and proceed with caution!"
    }).style.cssText = `
        white-space: pre-wrap;
        margin-bottom: 1em;
        line-height: 1.4em;
      `;
    const buttonRow = this.contentEl.createEl("div");
    buttonRow.style.cssText = `
      display: flex;
      justify-content: flex-end;
      gap: 0.5em;
    `;
    new import_obsidian5.ButtonComponent(buttonRow).setButtonText("Oh god, cancel!").onClick(() => {
      this.close();
    });
    new import_obsidian5.ButtonComponent(buttonRow).setButtonText("Install!!").setCta().onClick(async () => {
      this.close();
      const opts = {
        compendium: this.plugin.settings.rulesetCompendium,
        references: [...this.plugin.settings.rulesetReference]
      };
      new import_obsidian5.Notice("\u23F3 Installing toolkit\u2026");
      const compendium = this.plugin.settings.rulesetCompendium;
      const references = [...this.plugin.settings.rulesetReference];
      try {
        await this.plugin.installFullToolkit({ compendium, references });
        if (compendium) {
          await importRulesetData({
            app: this.app,
            editionKey: compendium,
            targetPath: "Compendium"
          });
        }
      } catch (err) {
        console.error("\u274C installToolkit() failed:", err);
        new import_obsidian5.Notice("\u274C Toolkit installation failed. See console.");
      }
      this.plugin.settings.needsInstall = false;
      await this.plugin.saveSettings();
      this.plugin.settingsTab.display();
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/customInstallModal.ts
var import_obsidian6 = require("obsidian");
var InstallingModal = class extends import_obsidian6.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.contentEl.empty();
    this.contentEl.createDiv({ text: "Installing\u2026", cls: "mod-quiet" }).style.cssText = "font-style: italic; color: var(--text-muted); text-align: center; padding: 1em;";
  }
  onClose() {
    this.contentEl.empty();
  }
};
function showCustomInstallModal(app, plugin) {
  const fullPathToKey = {};
  for (const f of plugin.manifestCache.folders) {
    fullPathToKey[f.path] = f.key;
  }
  for (const f of plugin.manifestCache.files) {
    fullPathToKey[f.path] = f.key;
  }
  const root = { name: "", fullPath: "", isFolder: true, children: {} };
  function ensureFolderNode(segments) {
    let cursor = root;
    let builtSoFar = "";
    for (const seg of segments) {
      builtSoFar = builtSoFar ? `${builtSoFar}/${seg}` : seg;
      if (!cursor.children[seg]) {
        cursor.children[seg] = {
          name: seg,
          fullPath: builtSoFar,
          isFolder: true,
          children: {}
        };
      }
      cursor = cursor.children[seg];
    }
    return cursor;
  }
  for (const folderEntry of plugin.manifestCache.folders) {
    const segments = folderEntry.path.split("/");
    ensureFolderNode(segments);
  }
  for (const fileEntry of plugin.manifestCache.files) {
    const segments = fileEntry.path.split("/");
    const fileName = segments.pop();
    const parentNode = segments.length ? ensureFolderNode(segments) : root;
    parentNode.children[fileName] = {
      name: fileName,
      fullPath: fileEntry.path,
      isFolder: false,
      children: {}
    };
  }
  class CustomInstallModal extends import_obsidian6.Modal {
    constructor(app2) {
      super(app2);
      this.checkboxMap = {};
      // <div> that holds “dependency console”
      this.currentBatchLines = [];
    }
    onOpen() {
      this.contentEl.empty();
      this.titleEl.setText("Custom Install");
      const descriptionEl = this.contentEl.createDiv();
      descriptionEl.textContent = "All checked items will be installed. Dependencies will be managed automatically.";
      descriptionEl.style.cssText = `
        font-size: 0.9em;
        color: var(--text-muted);
        margin-top: 0.25em;
        margin-bottom: 0.75em;
      `;
      const optionsBox = this.contentEl.createDiv();
      Object.assign(optionsBox.style, {
        maxHeight: "480px",
        // Enough space for checkboxes + tree
        overflowY: "auto",
        // Everything inside optionsBox will scroll
        margin: "0.5em 0",
        border: "1px solid var(--divider-color)",
        borderRadius: "4px",
        padding: "0.5em"
      });
      const checkboxSection = optionsBox.createDiv();
      Object.assign(checkboxSection.style, {
        display: "flex",
        flexDirection: "column",
        gap: "0.5em",
        marginBottom: "0.75em"
      });
      const pluginRow = checkboxSection.createDiv();
      pluginRow.style.display = "flex";
      pluginRow.style.alignItems = "center";
      this.pluginCheckbox = pluginRow.createEl("input", { type: "checkbox" });
      this.pluginCheckbox.checked = true;
      this.pluginCheckbox.id = "vvunderlore-checkbox-plugins";
      this.pluginCheckbox.style.marginRight = "0.5em";
      pluginRow.createEl("label", {
        text: "Community Plugins",
        attr: { for: this.pluginCheckbox.id }
      });
      const demoRow = checkboxSection.createDiv();
      demoRow.style.display = "flex";
      demoRow.style.alignItems = "center";
      this.demoCheckbox = demoRow.createEl("input", { type: "checkbox" });
      this.demoCheckbox.checked = true;
      this.demoCheckbox.id = "vvunderlore-checkbox-demo";
      this.demoCheckbox.style.marginRight = "0.5em";
      demoRow.createEl("label", {
        text: "VVunderlore Demo Files",
        attr: { for: this.demoCheckbox.id }
      });
      const settingsRow = checkboxSection.createDiv();
      settingsRow.style.display = "flex";
      settingsRow.style.alignItems = "center";
      this.settingsCheckbox = settingsRow.createEl("input", { type: "checkbox" });
      this.settingsCheckbox.checked = true;
      this.settingsCheckbox.id = "vvunderlore-checkbox-settings";
      this.settingsCheckbox.style.marginRight = "0.5em";
      settingsRow.createEl("label", {
        text: "Vault Settings (apperance, hotkeys, graph setup, etc.)",
        attr: { for: this.settingsCheckbox.id }
      });
      const divider = optionsBox.createDiv();
      Object.assign(divider.style, {
        borderTop: "1px solid var(--divider-color)",
        margin: "0.5em 0"
      });
      const container = optionsBox.createDiv();
      Object.assign(container.style, {
        // We no longer give this inner div its own scrollbar.
        // Instead, container will expand inside optionsBox, and
        // optionsBox will scroll everything (checkboxes + tree) together.
        margin: "0",
        padding: "0",
        border: "none"
      });
      const INDENT_PX = 16;
      const lookupEntry = (fullPath) => {
        return plugin.manifestCache.folders.find((f) => f.path === fullPath) || plugin.manifestCache.files.find((f) => f.path === fullPath);
      };
      const renderTree = () => {
        container.empty();
        this.checkboxMap = {};
        this.currentBatchLines = [];
        const demoAllowed = this.demoCheckbox.checked;
        const renderNode = (node, parentEl, indent = 0) => {
          if (node.fullPath) {
            const entry = lookupEntry(node.fullPath);
            if (entry && entry.optional && !demoAllowed) {
              return;
            }
          }
          if (node.isFolder) {
            const details = parentEl.createEl("details");
            details.open = true;
            details.style.margin = "4px 0";
            const summary = details.createEl("summary");
            Object.assign(summary.style, {
              display: "flex",
              alignItems: "center",
              marginLeft: `${indent * INDENT_PX}px`,
              cursor: "pointer",
              padding: "2px 6px",
              borderRadius: "4px",
              userSelect: "none"
            });
            summary.addEventListener("mouseenter", () => {
              summary.style.backgroundColor = "var(--background-modifier-hover)";
            });
            summary.addEventListener("mouseleave", () => {
              summary.style.backgroundColor = "transparent";
            });
            const cb = summary.createEl("input", { type: "checkbox" });
            cb.style.marginRight = "0.5em";
            cb.checked = true;
            cb.style.cursor = "pointer";
            this.checkboxMap[node.fullPath] = cb;
            const iconEl = summary.createDiv({ cls: "suggestion-icon" });
            (0, import_obsidian6.setIcon)(iconEl, "folder");
            iconEl.style.marginRight = "0.3em";
            iconEl.style.transform = "scale(0.9)";
            iconEl.style.opacity = "0.75";
            const label = summary.createEl("span", { text: node.name });
            label.style.fontWeight = "600";
            label.style.fontSize = "0.95em";
            cb.onchange = () => {
              this.toggleDescendants(node, cb.checked);
              this.enforceDependencies(node.fullPath, cb.checked);
              this.fadeAllExceptCurrentBatch();
            };
            const childrenContainer = details.createDiv();
            childrenContainer.style.marginTop = "4px";
            for (const childName of Object.keys(node.children).sort()) {
              renderNode(node.children[childName], childrenContainer, indent + 1);
            }
          } else {
            const row = parentEl.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "center",
              marginLeft: `${indent * INDENT_PX}px`,
              padding: "2px 6px",
              borderRadius: "4px",
              marginTop: "2px",
              marginBottom: "2px",
              userSelect: "none"
            });
            row.addEventListener("mouseenter", () => {
              row.style.backgroundColor = "var(--background-modifier-hover)";
            });
            row.addEventListener("mouseleave", () => {
              row.style.backgroundColor = "transparent";
            });
            const cb = row.createEl("input", { type: "checkbox" });
            cb.style.marginRight = "0.5em";
            cb.checked = true;
            cb.style.cursor = "pointer";
            this.checkboxMap[node.fullPath] = cb;
            const iconEl = row.createDiv({ cls: "suggestion-icon" });
            (0, import_obsidian6.setIcon)(iconEl, "document");
            iconEl.style.marginRight = "0.3em";
            iconEl.style.transform = "scale(0.8)";
            iconEl.style.opacity = "0.5";
            const label = row.createEl("label", { text: node.name });
            label.style.fontSize = "0.9em";
            cb.onchange = () => {
              this.enforceDependencies(node.fullPath, cb.checked);
              this.fadeAllExceptCurrentBatch();
            };
          }
        };
        for (const topName of Object.keys(root.children).sort()) {
          renderNode(root.children[topName], container, 0);
        }
      };
      renderTree();
      this.consoleEl = this.contentEl.createDiv({ cls: "custom-console" });
      Object.assign(this.consoleEl.style, {
        height: "140px",
        margin: "0.5em 0",
        padding: "8px",
        backgroundColor: "var(--background-secondary)",
        border: "1px solid var(--divider-color)",
        borderRadius: "4px",
        fontFamily: "monospace",
        fontSize: "0.82em",
        lineHeight: "1.4em",
        color: "var(--text-normal)",
        overflowY: "auto",
        whiteSpace: "pre-wrap"
      });
      const placeholder = this.consoleEl.createDiv({
        text: "> Dependency errors and warnings will appear here\u2026"
      });
      Object.assign(placeholder.style, {
        opacity: "0.4",
        fontStyle: "italic",
        marginBottom: "4px"
      });
      this.pluginCheckbox.onchange = () => {
        const WARNING_CLASS = "vvunderlore-warning";
        if (!this.pluginCheckbox.checked) {
          if (this.consoleEl.children.length === 1 && this.consoleEl.children[0].textContent?.startsWith(
            "> Dependency console"
          )) {
            this.consoleEl.empty();
          }
          const warningLine = this.consoleEl.createDiv({
            text: "WARNING: The VVunderlore Toolkit will not function without all included plugins! You probably want to re-check that one."
          });
          warningLine.addClass(WARNING_CLASS);
          warningLine.style.color = "#FF0000";
          this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
        } else {
          const existingWarnings = this.consoleEl.querySelectorAll(`.${WARNING_CLASS}`);
          existingWarnings.forEach((el) => el.remove());
          if (this.consoleEl.children.length === 0) {
            const ph = this.consoleEl.createDiv({
              text: "> Dependency console output will appear here\u2026"
            });
            Object.assign(ph.style, {
              opacity: "0.4",
              fontStyle: "italic",
              marginBottom: "4px"
            });
          }
          this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
        }
      };
      this.demoCheckbox.onchange = () => {
        renderTree();
      };
      const buttonRow = this.contentEl.createDiv();
      Object.assign(buttonRow.style, {
        display: "flex",
        justifyContent: "space-between",
        // push left vs right
        alignItems: "center",
        paddingTop: "8px",
        borderTop: "1px solid var(--divider-color)",
        marginTop: "8px"
      });
      const resetBtn = buttonRow.createEl("button", { text: "Reset Selection" });
      resetBtn.style.cssText = `
        font-size: 0.9em;
        color: var(--text-normal);
      `;
      resetBtn.onclick = () => {
        const warnings = Array.from(
          this.consoleEl.querySelectorAll(".vvunderlore-warning")
        );
        this.consoleEl.empty();
        warnings.forEach((warningEl) => {
          this.consoleEl.appendChild(warningEl);
        });
        Object.values(this.checkboxMap).forEach((cb) => {
          cb.checked = true;
        });
      };
      const rightGroup = buttonRow.createDiv();
      Object.assign(rightGroup.style, {
        display: "flex",
        gap: "0.5em"
      });
      const installBtn = rightGroup.createEl("button", {
        text: "Install Selected",
        cls: "mod-cta"
      });
      installBtn.onclick = async () => {
        installBtn.setAttribute("disabled", "");
        this.close();
        const installing = new InstallingModal(app);
        installing.open();
        const toInstall = [];
        for (const [fp, checkbox] of Object.entries(this.checkboxMap)) {
          if (checkbox.checked) {
            const isFolder = plugin.manifestCache.folders.some((f) => f.path === fp);
            toInstall.push({ path: fp, isFolder });
          }
        }
        if (this.pluginCheckbox.checked) {
          try {
            const apiUrl = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/.obsidian/plugins?ref=main";
            const resp = await fetch(apiUrl);
            if (resp.ok) {
              const pluginFiles = await resp.json();
              for (const item of pluginFiles) {
                const localPath = `.obsidian/plugins/${item.name}`;
                const existsLocally = await this.app.vault.adapter.exists(localPath);
                if (!existsLocally) {
                  if (item.type === "dir") {
                    toInstall.push({ path: localPath, isFolder: true });
                  } else {
                    toInstall.push({ path: localPath, isFolder: false });
                  }
                }
              }
            }
          } catch (e) {
            console.error("Failed to enumerate .obsidian/plugins from GitHub:", e);
          }
          toInstall.push({ path: ".obsidian/community-plugins.json", isFolder: false });
        }
        if (this.settingsCheckbox.checked) {
          const vaultSettingsPaths = [
            ".obsidian/app.json",
            ".obsidian/appearance.json",
            ".obsidian/graph.json",
            ".obsidian/hotkeys.json"
          ];
          for (const vs of vaultSettingsPaths) {
            toInstall.push({ path: vs, isFolder: false });
          }
        }
        try {
          await plugin.performCustomInstall(toInstall);
        } catch (err) {
          console.error("\u274C performCustomInstall() threw:", err);
          new import_obsidian6.Notice("\u274C Custom install failed\u2014see console");
        } finally {
          installing.close();
        }
      };
      const cancelBtn = rightGroup.createEl("button", { text: "Cancel" });
      cancelBtn.onclick = () => this.close();
    }
    onClose() {
      this.contentEl.empty();
    }
    /** Recursively toggle descendants’ checked‐state without logging each one. */
    toggleDescendants(node, checked) {
      for (const child of Object.values(node.children)) {
        const cb = this.checkboxMap[child.fullPath];
        if (cb) cb.checked = checked;
        if (child.isFolder) {
          this.toggleDescendants(child, checked);
        }
      }
    }
    /**
     * Enforce dependency logic (auto‐check prerequisites, auto‐uncheck dependents).
     * Each time we flip a box “because of a dependency,” we log one line to the console.
     */
    enforceDependencies(changedPath, isChecked) {
      const changedKey = fullPathToKey[changedPath];
      if (!changedKey) return;
      const fullPathToDisplay = {};
      for (const f of plugin.manifestCache.folders) {
        fullPathToDisplay[f.path] = f.displayName ?? f.path.split("/").pop();
      }
      for (const f of plugin.manifestCache.files) {
        fullPathToDisplay[f.path] = f.displayName ?? f.path.split("/").pop();
      }
      const changedName = fullPathToDisplay[changedPath] ?? changedPath.split("/").pop();
      this.currentBatchLines = [];
      if (isChecked) {
        const stack = [changedKey];
        while (stack.length) {
          const cur = stack.pop();
          const deps = plugin.requiresGraph.get(cur) ?? [];
          for (const depKey of deps) {
            const depEntry = plugin.manifestCache.files.find((x) => x.key === depKey) || plugin.manifestCache.folders.find((x) => x.key === depKey);
            if (depEntry) {
              const depPath = depEntry.path;
              const cb = this.checkboxMap[depPath];
              if (cb && !cb.checked) {
                cb.checked = true;
                const depName = fullPathToDisplay[depPath] ?? depPath.split("/").pop();
                const lineEl = this.appendLogLine(
                  depPath,
                  `> ${depName} automatically checked (required by ${changedName})`
                );
                this.currentBatchLines.push(lineEl);
                stack.push(depKey);
              }
            }
          }
        }
      } else {
        const dependentsOf = (targetKey) => Array.from(plugin.requiresGraph.entries()).filter(([, deps]) => deps.includes(targetKey)).map(([k]) => k);
        const stack = [changedKey];
        while (stack.length) {
          const cur = stack.pop();
          for (const childKey of dependentsOf(cur)) {
            const childEntry = plugin.manifestCache.files.find((x) => x.key === childKey) || plugin.manifestCache.folders.find((x) => x.key === childKey);
            if (childEntry) {
              const childPath = childEntry.path;
              const cb = this.checkboxMap[childPath];
              if (cb && cb.checked) {
                cb.checked = false;
                const childName = fullPathToDisplay[childPath] ?? childPath.split("/").pop();
                const lineEl = this.appendLogLine(
                  childPath,
                  `> ${childName} automatically unchecked (depends on ${changedName})`
                );
                this.currentBatchLines.push(lineEl);
                stack.push(childKey);
              }
            }
          }
        }
      }
      this.fadeAllExceptCurrentBatch();
    }
    /**
     * Append one “mono” line plus a tiny undo button. Returns the new <div>.
     */
    appendLogLine(fullPath, text) {
      const line = this.consoleEl.createDiv();
      Object.assign(line.style, {
        display: "flex",
        justifyContent: "space-between",
        alignItems: "center",
        margin: "2px 0",
        opacity: "1.0",
        transition: "opacity 0.2s ease"
      });
      line.createSpan({ text });
      const undoBtn = line.createEl("button", { text: "undo", cls: "mod-small" });
      Object.assign(undoBtn.style, {
        marginLeft: "0.5em",
        fontSize: "0.75em",
        padding: "2px 4px",
        cursor: "pointer"
      });
      undoBtn.onclick = () => {
        const cb = this.checkboxMap[fullPath];
        if (cb) {
          cb.checked = !cb.checked;
          this.enforceDependencies(fullPath, cb.checked);
          this.fadeAllExceptCurrentBatch();
        }
      };
      this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
      return line;
    }
    /** Fade out every console line that is *not* part of currentBatchLines. */
    fadeAllExceptCurrentBatch() {
      const total = this.consoleEl.children.length;
      for (let i = 0; i < total; i++) {
        const child = this.consoleEl.children[i];
        if (this.currentBatchLines.includes(child)) {
          child.style.opacity = "1.0";
        } else {
          child.style.opacity = "0.6";
        }
      }
    }
  }
  new CustomInstallModal(app).open();
}

// src/settings.ts
var path = __toESM(require("path"));
var FilePathSuggester = class extends import_obsidian7.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.paths = [];
    this.currentSuggestions = [];
    this.renderedSuggestions = /* @__PURE__ */ new Map();
    this.inputEl = inputEl;
    const folders = Object.values(app.vault.getAllLoadedFiles()).filter((f) => f instanceof import_obsidian7.TFolder).map((f) => ({ path: f.path, isFolder: true }));
    const files = app.vault.getMarkdownFiles().map((f) => ({ path: f.path, isFolder: false }));
    this.paths = [...folders, ...files];
    this.inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        setTimeout(() => {
          const container = this.containerEl;
          if (!container) return;
          const selectedEl = container.querySelector(".suggestion-item.is-selected");
          if (selectedEl) {
            const selectedPath = this.renderedSuggestions.get(selectedEl);
            if (selectedPath) {
              this.selectSuggestion(selectedPath);
            }
          }
        }, 0);
      }
    });
  }
  getSuggestions(inputStr) {
    const query = inputStr.toLowerCase();
    this.currentSuggestions = this.paths.filter(({ path: path2 }) => path2.toLowerCase().includes(query)).map((p) => p.path);
    return this.currentSuggestions;
  }
  renderSuggestion(path2, el) {
    const isFolder = this.paths.find((p) => p.path === path2)?.isFolder;
    el.addClass("mod-complex");
    const iconEl = el.createDiv({ cls: "suggestion-icon" });
    (0, import_obsidian7.setIcon)(iconEl, isFolder ? "folder" : "document");
    const name = path2.split("/").pop();
    const displayName = isFolder ? name : name.replace(/\.md$/, "");
    el.createDiv({ text: displayName, cls: "suggestion-title" });
    const parentPath = path2.split("/").slice(0, -1).join("/");
    el.createDiv({ text: parentPath, cls: "search-suggest-info-text" });
    el.addEventListener("click", (e) => {
      e.stopPropagation();
      this.selectSuggestion(path2);
    });
    this.renderedSuggestions.set(el, path2);
  }
  selectSuggestion(path2) {
    this.inputEl.value = path2;
    this.inputEl.dispatchEvent(new Event("input"));
    this.close();
  }
};
var MarkdownPreviewModal = class extends import_obsidian7.Modal {
  constructor(app, content) {
    super(app);
    this.content = content;
  }
  onOpen() {
    this.contentEl.addEventListener("click", (e) => e.stopPropagation());
    this.contentEl.empty();
    this.contentEl.createEl("h2", { text: "Toolkit Changelog" });
    const md = this.contentEl.createDiv();
    const dummyComponent = new class extends import_obsidian7.Component {
    }();
    import_obsidian7.MarkdownRenderer.renderMarkdown(this.content, md, "/", dummyComponent);
  }
  onClose() {
    this.contentEl.empty();
  }
};
var ToolkitSettingsTab = class extends import_obsidian7.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.versionValueEl = null;
    this.forceWarningEl = null;
    this.plugin = plugin;
  }
  renderHeader(root) {
    const header = root.createDiv();
    header.style.display = "flex";
    header.style.justifyContent = "space-between";
    header.style.alignItems = "center";
    header.style.borderBottom = "1px solid var(--divider-color)";
    header.style.marginBottom = "2em";
    header.style.paddingBottom = "0.5em";
    header.createEl("h3", { text: "VVunderlore Toolkit Settings" });
    const headerBtns = header.createDiv();
    headerBtns.style.display = "flex";
    headerBtns.style.gap = "0.5em";
    const docsBtn = headerBtns.createEl("button", { text: "Docs" });
    docsBtn.onclick = () => window.open("http://vvunderlore.com", "_blank");
    const githubBtn = headerBtns.createEl("button", { text: "GitHub" });
    githubBtn.onclick = () => window.open("https://github.com/slamwise0001/VVunderlore-Toolkit-Full", "_blank");
    const kofiBtn = headerBtns.createEl("button", {
      text: "\u2615 Ko-fi",
      cls: "mod-cta"
    });
    kofiBtn.style.backgroundColor = "#ff5900";
    kofiBtn.style.color = "white";
    kofiBtn.onclick = () => window.open("https://ko-fi.com/vvunderlore", "_blank");
  }
  renderFirstRunCard(root) {
    if (this.plugin.settings.needsInstall) {
      this.plugin.settings.rulesetCompendium = "";
      this.plugin.settings.rulesetReference = [];
    }
    const card = root.createEl("div", { cls: "vvunderlore-first-run" });
    Object.assign(card.style, {
      display: "flex",
      flexDirection: "column",
      alignItems: "center",
      textAlign: "center",
      marginTop: "2em",
      padding: "1em",
      border: "2px solid var(--divider-color)",
      borderRadius: "18px",
      /* (optional) round the corners slightly */
      backgroundColor: "var(--background-primary)"
      /* (optional) white/gray background */
    });
    const title = card.createEl("h2", {
      text: "\u{1F3F0} Welcome to VVunderlore",
      cls: "vv-card-title"
    });
    title.style.marginBottom = "0.5em";
    const desc = card.createEl("p", {
      text: "Get started by installing the default toolkit\u2014\nor choose individual pieces to suit your vault.",
      cls: "vv-card-desc"
    });
    desc.style.marginBottom = "1.25em";
    const plugin = this.plugin;
    const grid = card.createDiv();
    Object.assign(grid.style, {
      display: "grid",
      gridTemplateColumns: "max-content max-content",
      columnGap: "1rem",
      rowGap: "0.25rem",
      justifyContent: "center",
      justifyItems: "center",
      marginBottom: "1rem"
    });
    const labelRs = grid.createEl("div", { text: "Ruleset" });
    labelRs.style.fontWeight = "bold";
    const labelRef = grid.createEl("div", { text: "Reference (optional)" });
    labelRef.style.fontWeight = "bold";
    const rsCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const refCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const summaryBar = grid.createDiv();
    Object.assign(summaryBar.style, {
      gridColumn: "1 / span 2",
      display: "flex",
      alignItems: "center",
      flexWrap: "wrap",
      gap: "0.5rem",
      fontSize: "0.85em",
      color: "var(--text-muted)",
      fontStyle: "italic",
      marginTop: "0.25rem",
      marginBottom: "1rem"
    });
    const rulesetSpan = summaryBar.createSpan({
      text: `Ruleset: ${plugin.settings.rulesetCompendium ? `D&D 5E (${plugin.settings.rulesetCompendium})` : ""}`
    });
    rulesetSpan.style.fontWeight = "bold";
    summaryBar.createSpan({ text: "References:" });
    const chipsWrapper = summaryBar.createDiv();
    Object.assign(chipsWrapper.style, { display: "flex", gap: "4px" });
    function addChip(id) {
      const ed = AVAILABLE_EDITIONS.find((e) => e.id === id);
      const chip = chipsWrapper.createDiv({
        attr: {
          style: "background: var(--interactive-accent); color: white; padding:2px 6px; border-radius:4px; display:inline-flex; align-items:center; gap:4px;"
        }
      });
      chip.createSpan({ text: ed.label });
      const rem = chip.createSpan({
        text: "\xD7",
        attr: { style: "cursor:pointer; margin-left:4px;" }
      });
      rem.onclick = async () => {
        plugin.settings.rulesetReference = plugin.settings.rulesetReference.filter((x) => x !== id);
        await plugin.saveSettings();
        chip.remove();
        updateInstallButtons();
      };
    }
    ;
    plugin.settings.rulesetReference.forEach((e) => addChip(e));
    const rsDropdown = new import_obsidian7.DropdownComponent(rsCell);
    rsDropdown.addOption("", "Select edition\u2026");
    AVAILABLE_EDITIONS.forEach((ed) => {
      rsDropdown.addOption(ed.id, ed.label);
    });
    rsDropdown.setValue(this.plugin.settings.rulesetCompendium).onChange(async (val) => {
      this.plugin.settings.rulesetCompendium = val;
      await this.plugin.saveSettings();
      const chosen = AVAILABLE_EDITIONS.find((e) => e.id === val);
      rulesetSpan.textContent = chosen ? chosen.label : "";
      chipsWrapper.empty();
      updateInstallButtons();
    });
    const searchWrapperEl = refCell.createDiv({ attr: { style: "text-align:center;" } });
    const searchComp = new import_obsidian7.SearchComponent(searchWrapperEl);
    searchComp.setPlaceholder("Add reference rules\u2026");
    const suggestionInputEl = searchComp.inputEl;
    new class extends import_obsidian7.AbstractInputSuggest {
      constructor(app, inputEl) {
        super(app, inputEl);
      }
      // 1) Propose edition IDs (minus the one they picked as the main ruleset)
      getSuggestions(input) {
        return AVAILABLE_EDITIONS.filter((ed) => ed.id !== plugin.settings.rulesetCompendium).filter((ed) => ed.label.toLowerCase().includes(input.toLowerCase())).map((ed) => ed.id);
      }
      // 2) Render the human-readable label
      renderSuggestion(item, el) {
        const ed = AVAILABLE_EDITIONS.find((e) => e.id === item);
        el.createDiv({ text: ed.label });
      }
      // 3) When they pick one, store its ID and add a chip
      selectSuggestion(item) {
        if (!plugin.settings.rulesetReference.includes(item)) {
          plugin.settings.rulesetReference.push(item);
          plugin.saveSettings();
          addChip(item);
        }
        this.close();
        suggestionInputEl.value = "";
        updateInstallButtons();
      }
    }(this.app, suggestionInputEl);
    const btnRow1 = card.createEl("div", { cls: "vv-button-row" });
    Object.assign(btnRow1.style, {
      display: "flex",
      gap: "0.75em",
      justifyContent: "center",
      marginBottom: "1.5em"
    });
    const installBtn1 = btnRow1.createEl("button", {
      text: "Install Toolkit",
      cls: "mod-cta"
    });
    installBtn1.onClickEvent(
      () => new ConfirmFreshInstallModal(this.app, this.plugin).open()
    );
    const customBtn1 = btnRow1.createEl("button", {
      text: "Custom Install",
      cls: "mod-cta"
    });
    Object.assign(customBtn1.style, {
      background: "none",
      border: "1px solid var(--interactive-accent)",
      color: "var(--text-normal)"
    });
    customBtn1.onClickEvent(() => showCustomInstallModal(this.app, this.plugin));
    const updateInstallButtons = () => {
      const hasRuleset = Boolean(this.plugin.settings.rulesetCompendium);
      installBtn1.toggleAttribute("disabled", !hasRuleset);
      customBtn1.toggleAttribute("disabled", !hasRuleset);
    };
    updateInstallButtons();
    const skipPara = card.createEl("p", { cls: "vv-skip-link" });
    Object.assign(skipPara.style, {
      textAlign: "center",
      marginTop: "0.25em"
    });
    skipPara.createEl("a", {
      text: "Already have the Toolkit? Show me the settings \u2192"
    }).onClickEvent(async () => {
      const markerPath = ".vvunderlore_installed";
      try {
        if (!await this.app.vault.adapter.exists(markerPath)) {
          await this.app.vault.create(markerPath, "");
        }
      } catch (e) {
        console.error("\u274C Failed to create marker file:", e);
      }
      this.plugin.settings.needsInstall = false;
      await this.plugin.saveSettings();
      this.display();
    });
  }
  display() {
    console.log("\u{1F527} display() called, needsInstall =", this.plugin.settings.needsInstall);
    const { containerEl } = this;
    const savedScrollTop = containerEl.scrollTop;
    containerEl.empty();
    this.renderHeader(containerEl);
    if (this.plugin.settings.needsInstall) {
      console.log("\u{1F9EA} Showing first-run card");
      this.renderFirstRunCard(containerEl);
      containerEl.scrollTop = savedScrollTop;
      return;
    }
    ;
    (async () => {
      const versionRow = containerEl.createDiv();
      versionRow.style.marginBottom = "1em";
      versionRow.style.display = "flex";
      versionRow.style.justifyContent = "space-between";
      versionRow.style.alignItems = "flex-start";
      versionRow.style.gap = "2em";
      versionRow.style.flexWrap = "wrap";
      versionRow.style.borderBottom = "1px solid var(--divider-color)";
      const versionInfo = versionRow.createDiv();
      versionInfo.style.display = "flex";
      versionInfo.style.flexDirection = "column";
      versionInfo.style.gap = "0.25em";
      let installed = "Not installed";
      try {
        const verContent = await this.app.vault.adapter.read(".version.json");
        const json = JSON.parse(verContent);
        installed = json.version ?? "Not installed";
      } catch (err) {
        console.warn("Could not read .version.json from vault:", err);
      }
      const latest = this.plugin.settings.latestToolkitVersion ?? "Could not fetch";
      const isMatch = installed === latest;
      const vaultRow = versionInfo.createDiv();
      vaultRow.appendText("Vault Toolkit Version: ");
      this.versionValueEl = vaultRow.createSpan();
      this.versionValueEl.textContent = installed;
      this.versionValueEl.style.fontWeight = "bold";
      this.versionValueEl.style.color = isMatch ? "var(--text-success)" : "var(--text-error)";
      const latestRow = versionInfo.createEl("div", { text: "Latest Official Version: " });
      latestRow.createSpan({
        text: latest,
        attr: { style: "font-weight: bold; color: var(--text-success);" }
      });
      const versionControls = versionRow.createDiv();
      versionControls.style.display = "flex";
      versionControls.style.flexDirection = "column";
      versionControls.style.alignItems = "flex-end";
      versionControls.style.gap = "0.5em";
      const buttonRow = versionControls.createDiv();
      buttonRow.style.display = "flex";
      buttonRow.style.gap = "0.5em";
      const checkBtn = buttonRow.createEl("button", {
        text: installed !== latest ? "Preview Update" : "Check for Updates",
        cls: "mod-cta"
      });
      checkBtn.addEventListener("click", async () => {
        if (installed !== latest) {
          this.plugin.previewUpdatesModal();
        } else {
          await this.plugin.checkForUpdates();
        }
      });
      const changelogBtn = buttonRow.createEl("button", { text: "\u{1F4D6} View Changelog" });
      changelogBtn.addEventListener("click", () => {
        new MarkdownPreviewModal(this.app, this.plugin.changelog).open();
      });
      if (this.plugin.settings.lastChecked) {
        const lastChecked = versionControls.createDiv();
        lastChecked.style.fontSize = "11px";
        lastChecked.style.color = "var(--text-muted)";
        lastChecked.textContent = `Last checked: ${new Date(this.plugin.settings.lastChecked).toLocaleString()}`;
      }
      const fixDetails = containerEl.createEl("details", { cls: "vk-section" });
      const fixHeader = fixDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(fixHeader.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const fixHeaderRow = fixHeader.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const fixTitleBlock = fixHeaderRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      fixTitleBlock.createEl("h5", { text: "Fix Your Vault" });
      fixTitleBlock.createEl("div", {
        text: "Fix and broken, deleted, or misplaced files in your toolkit.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const fixToggleIcon = fixHeaderRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(fixToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        // Rotate around its own center
        userSelect: "none",
        transform: fixDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      fixDetails.ontoggle = () => {
        fixToggleIcon.style.transform = fixDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const fixBody = fixDetails.createDiv({ cls: "vk-section-body" });
      fixBody.style.paddingLeft = "1em";
      const fixButtonRow = fixBody.createDiv();
      fixButtonRow.style.display = "flex";
      fixButtonRow.style.justifyContent = "space-between";
      fixButtonRow.style.alignItems = "center";
      fixButtonRow.style.marginTop = "0.5em";
      const warningContainer = fixButtonRow.createDiv();
      this.forceWarningEl = warningContainer;
      let installedVersionStr = "";
      try {
        const versionFile = await this.plugin.app.vault.adapter.read(".version.json");
        const parsed = JSON.parse(versionFile);
        installedVersionStr = (parsed.version ?? "").trim();
      } catch {
        installedVersionStr = "";
      }
      const latestVersionStr = (this.plugin.settings.latestToolkitVersion ?? "").trim();
      console.log("\u{1F9EA} Comparing versions:", installedVersionStr, latestVersionStr);
      if (installedVersionStr && latestVersionStr && installedVersionStr !== latestVersionStr) {
        const warn = warningContainer.createEl("div", {
          text: `\u26A0\uFE0F New version available (${installedVersionStr} \u2192 ${latestVersionStr}) \u2014 use regular update instead`
        });
        warn.style.fontSize = "0.85em";
        warn.style.color = "var(--text-muted)";
        warn.style.fontStyle = "italic";
        warn.setAttr(
          "title",
          "Force updating while a new version is available may skip important changes."
        );
      }
      const buttonGroup = fixButtonRow.createDiv();
      buttonGroup.style.display = "flex";
      buttonGroup.style.gap = "0.5em";
      buttonGroup.createEl("button", { text: "Force Update Vault", cls: "mod-cta" }).onclick = async () => {
        await this.plugin.forceUpdatePreviewAndConfirm();
        if (this.plugin.settings.reparseGamesets) {
          await this.plugin.refreshGameSetData();
        }
      };
      buttonGroup.createEl("button", {
        text: "Undo Update"
      }).onclick = async () => {
        await this.plugin.undoForceUpdate();
      };
      const fixTimestampRow = fixBody.createDiv();
      Object.assign(fixTimestampRow.style, {
        textAlign: "right",
        fontSize: "11px",
        color: "var(--text-muted)",
        marginTop: "0.25em"
      });
      fixTimestampRow.textContent = `Last forced: ${this.plugin.settings.lastForceUpdate ? new Date(this.plugin.settings.lastForceUpdate).toLocaleString() : "Not forced yet"}`;
      fixBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin: 0.75em 0;"
        }
      });
      const reparseRow = fixBody.createDiv();
      reparseRow.style.marginTop = "0.5em";
      new import_obsidian7.Setting(reparseRow).setName("Re-parse Game Sets On Force Update").setDesc(
        "Also re-parse your ruleset compendium and reference sets. This won't delete any files in the Compendium or Reference folders."
      ).addToggle(
        (tog) => tog.setValue(this.plugin.settings.reparseGamesets).onChange(async (value) => {
          this.plugin.settings.reparseGamesets = value;
          await this.plugin.saveSettings();
        })
      );
      const backupDetails = containerEl.createEl("details", { cls: "vk-section" });
      const backupSummary = backupDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(backupSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const backupTitleRow = backupSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const titleBlock = backupTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      titleBlock.createEl("h5", { text: "Vault Backups" });
      titleBlock.createEl("div", {
        text: "The Toolkit will back up your vault automatically before updates. You can also back up manually anytime.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const backupVvIcon = backupTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(backupVvIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: backupDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      backupDetails.ontoggle = () => {
        backupVvIcon.style.transform = backupDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const backupBody = backupDetails.createDiv({ cls: "vk-section-body" });
      backupBody.style.paddingLeft = "1em";
      new import_obsidian7.Setting(backupBody).setName("Auto-Backup Before Update").setDesc("Create a full .zip of the vault before applying version updates. Force updates will only back up the files that will be modified or removed.").addToggle(
        (t) => t.setValue(this.plugin.settings.autoBackupBeforeUpdate).onChange(async (v) => {
          this.plugin.settings.autoBackupBeforeUpdate = v;
          await this.plugin.saveSettings();
        })
      );
      new import_obsidian7.Setting(backupBody).setName("Manual Backup").setDesc("Immediately create a zip backup of your vault").addButton(
        (b) => b.setButtonText("Backup Vault Now").setCta().onClick(async () => {
          const path2 = await this.plugin.backupManager.backupVaultToZip("manual");
          new import_obsidian7.Notice(`Backup created: ${path2}`);
        })
      );
      new import_obsidian7.Setting(backupBody).setName("Open Backups Folder").setDesc("Open the backups folder on disk. MacOS: Cant see it? Hit Shift+Cmd+(period).").addButton(
        (b) => b.setButtonText("Open Folder").onClick(async () => {
          try {
            const vaultBasePath = this.plugin.app.vault.adapter.getBasePath();
            const backupFolderPath = path.join(
              vaultBasePath,
              ".vault-backups"
            );
            const { shell } = window.require("electron");
            const result = await shell.openPath(backupFolderPath);
            if (typeof result === "string" && result.length > 0) {
              console.error("\u274C shell.openPath error:", result);
              new import_obsidian7.Notice("Could not open backups folder. See console.");
            }
          } catch (err) {
            console.error("\u274C Could not open backups folder:", err);
            new import_obsidian7.Notice("Could not open backups folder. See console.");
          }
        })
      );
      backupBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin-top: 1.5em;"
        }
      });
      const customizationDetails = containerEl.createEl("details", { cls: "vk-section" });
      const customizationSummary = customizationDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(customizationSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "flex-start",
        padding: "0.5em 0",
        cursor: "pointer"
      });
      const titleRow = customizationSummary.createDiv({
        attr: {
          style: `
			display: flex;
			width: 100%;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const customizationTitleBlock = titleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      const h5 = customizationTitleBlock.createEl("h5");
      h5.appendText("Custom File Management ");
      customizationTitleBlock.createEl("div", {
        text: "Skip updates on certain files or remap relocated Toolkit files so they can update.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const customVvIcon = titleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(customVvIcon.style, {
        fontWeight: "bold",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: customizationDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      customizationDetails.ontoggle = () => {
        customVvIcon.style.transform = customizationDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const customizationBodyWrapper = customizationDetails.createDiv({
        attr: { style: "padding-left: 1em; padding-right: 1em;" }
      });
      const customizationBody = customizationBodyWrapper.createDiv({ cls: "vk-section-body" });
      const skipSection = customizationBody.createDiv();
      const settingItem = skipSection.createDiv({ cls: "setting-item" });
      const info = settingItem.createDiv({ cls: "setting-item-info" });
      info.createDiv({ text: "Skip Toolkit Items", cls: "setting-item-name" });
      info.createDiv({
        text: "Files listed here will be ignored during toolkit updates.",
        cls: "setting-item-description"
      });
      const control = settingItem.createDiv({ cls: "setting-item-control" });
      const dropdown = new import_obsidian7.DropdownComponent(control);
      dropdown.selectEl.style.minWidth = "220px";
      dropdown.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, f.displayName ?? f.path.split("/").pop()));
      this.plugin.manifestCache.folders.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)"));
      new import_obsidian7.ButtonComponent(control).setButtonText("Add").setCta().onClick(async () => {
        const key = dropdown.getValue();
        if (!key) return new import_obsidian7.Notice("Pick something to skip.");
        if (!this.plugin.settings.customPaths.some((c) => c.manifestKey === key)) {
          this.plugin.settings.customPaths.push({ vaultPath: key, manifestKey: key, doUpdate: false });
          await this.plugin.saveSettings();
          renderSkipTable();
        }
      });
      const skipTableWrapper = skipSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top:0.75em" } });
      const renderSkipTable = () => {
        skipTableWrapper.empty();
        const items = this.plugin.settings.customPaths.filter((c) => !c.doUpdate);
        if (items.length === 0) {
          const emptyMsg = skipTableWrapper.createEl("div", { text: "No items skipped." });
          emptyMsg.style.textAlign = "center";
          emptyMsg.style.opacity = "0.6";
          emptyMsg.style.padding = "0.5em";
          return;
        }
        const table = skipTableWrapper.createEl("table", { cls: "setting-table" });
        const header = table.createTHead().insertRow();
        header.insertCell().textContent = "Skipped Files/Folders";
        const body = table.createTBody();
        items.forEach((entry) => {
          const row = body.insertRow();
          const contentCell = row.insertCell();
          contentCell.colSpan = 1;
          contentCell.style.display = "flex";
          contentCell.style.justifyContent = "space-between";
          contentCell.style.paddingLeft = "4em";
          contentCell.style.alignItems = "center";
          contentCell.style.gap = "1em";
          contentCell.style.fontWeight = "bold";
          contentCell.createSpan({ text: entry.manifestKey });
          const removeLink = contentCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.style.fontSize = "0.8em";
          removeLink.style.color = "var(--text-faint)";
          removeLink.style.textDecoration = "underline";
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderSkipTable();
          };
        });
      };
      renderSkipTable();
      customizationBody.createEl("div", {
        attr: { style: "height: 1em; border-top: 1px solid var(--divider-color); margin: 1em 0;" }
      });
      const remapSection = customizationBody.createDiv();
      const remapSetting = remapSection.createDiv({ cls: "setting-item" });
      const remapInfo = remapSetting.createDiv({ cls: "setting-item-info" });
      remapInfo.createDiv({ text: "Remap File Paths", cls: "setting-item-name" });
      remapInfo.createDiv({
        text: "Remap toolkit files vault paths if you chose to move anything. Moving files without remapping will result in duplicate and/or out-of-date files after update.",
        cls: "setting-item-description"
      });
      const remapControlBlock = remapSection.createDiv({ cls: "vk-inline-add-controls" });
      remapControlBlock.style.flexWrap = "wrap";
      remapControlBlock.style.marginTop = "0.5em";
      let remapDrop;
      let remapInput;
      remapDrop = new import_obsidian7.DropdownComponent(remapControlBlock);
      remapDrop.selectEl.style.minWidth = "220px";
      remapDrop.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.forEach(
        (f) => remapDrop.addOption(f.path, f.displayName ?? f.path.split("/").pop())
      );
      this.plugin.manifestCache.folders.forEach(
        (f) => remapDrop.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)")
      );
      const searchWrapper = remapControlBlock.createDiv();
      const searchComponent = new import_obsidian7.SearchComponent(searchWrapper);
      searchComponent.setPlaceholder("Search vault path\u2026");
      new FilePathSuggester(this.app, searchComponent.inputEl);
      remapInput = searchComponent.inputEl;
      new import_obsidian7.ButtonComponent(remapControlBlock).setButtonText("Add Remap").setCta().onClick(async () => {
        const key = remapDrop.getValue();
        const vp = remapInput.value.trim();
        if (!key || !vp) return new import_obsidian7.Notice("Select an item and enter a vault path.");
        if (!this.app.vault.getAbstractFileByPath(vp)) return new import_obsidian7.Notice("Vault path not found.");
        this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => c.manifestKey !== key);
        this.plugin.settings.customPaths.push({ manifestKey: key, vaultPath: vp, doUpdate: true });
        await this.plugin.saveSettings();
        remapInput.value = "";
        remapDrop.setValue("");
        renderRemapPanel();
      });
      const remapTableWrapper = remapSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top: 0.75em" } });
      const renderRemapPanel = () => {
        remapTableWrapper.empty();
        const toRemap = this.plugin.settings.customPaths.filter((c) => c.doUpdate);
        if (toRemap.length === 0) {
          const emptyMsg = remapTableWrapper.createEl("div", { text: "No custom paths defined." });
          emptyMsg.style.textAlign = "center";
          emptyMsg.style.opacity = "0.6";
          emptyMsg.style.padding = "0.5em";
          return;
        }
        const table = remapTableWrapper.createEl("table", { cls: "setting-table" });
        const head = table.createTHead().insertRow();
        ["Toolit Item", "New Vault Path", ""].forEach((txt) => head.insertCell().textContent = txt);
        const body = table.createTBody();
        toRemap.forEach((entry) => {
          const row = body.insertRow();
          row.insertCell().textContent = entry.manifestKey;
          row.insertCell().textContent = entry.vaultPath;
          const removeCell = row.insertCell();
          const removeLink = removeCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.style.fontSize = "0.8em";
          removeLink.style.color = "var(--text-faint)";
          removeLink.style.textDecoration = "underline";
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderRemapPanel();
          };
        });
      };
      renderRemapPanel();
      customizationBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin: 0.5em 0;"
        }
      });
      const highlightDetails = containerEl.createEl("details", { cls: "vk-section" });
      const highlightSummary = highlightDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(highlightSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const highlightTitleRow = highlightSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const hlTitleBlock = highlightTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      hlTitleBlock.createEl("h5", { text: "File Highlights" });
      hlTitleBlock.createEl("div", {
        text: "Toggle on/off the highlighting of Toolkit-specific files. Also make the highlights cool colors.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const hlToggleIcon = highlightTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(hlToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: highlightDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      highlightDetails.ontoggle = () => {
        hlToggleIcon.style.transform = highlightDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const highlightBody = highlightDetails.createDiv({ cls: "vk-section-body" });
      highlightBody.style.paddingLeft = "1em";
      new import_obsidian7.Setting(highlightBody).setName("Enable File/Folder Highlighting").setDesc("Any file/folder installed by VVunderlore will have this background.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.highlightEnabled).onChange(async (enabled) => {
          this.plugin.settings.highlightEnabled = enabled;
          await this.plugin.saveSettings();
          if (enabled) {
            this.plugin.enableHighlight();
          } else {
            this.plugin.disableHighlight();
          }
          renderHighlightColorPickers();
        });
      });
      const colorPickerWrapper = highlightBody.createDiv();
      const renderHighlightColorPickers = () => {
        colorPickerWrapper.empty();
        if (!this.plugin.settings.highlightEnabled) {
          return;
        }
        new import_obsidian7.Setting(colorPickerWrapper).setName("Light Mode Highlight Color").setDesc("Choose the background color for files/folders in Light mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorLight).onChange(async (newColor) => {
            this.plugin.settings.highlightColorLight = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
        new import_obsidian7.Setting(colorPickerWrapper).setName("Dark Mode Highlight Color").setDesc("Choose the background color for files/folders in Dark mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorDark).onChange(async (newColor) => {
            this.plugin.settings.highlightColorDark = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
      };
      renderHighlightColorPickers();
      renderSkipTable();
      renderRemapPanel();
      const removeDemoSetting = new import_obsidian7.Setting(containerEl);
      removeDemoSetting.settingEl.style.borderTop = "none";
      removeDemoSetting.setName("Remove Demo Files").setDesc("Delete every \u201Coptional\u201D demo file and folder from your vault.").addButton(
        (button) => button.setButtonText("Remove Demo Files").onClick(async () => {
          const optionalFileEntries = this.plugin.manifestCache.files.filter((f) => f.optional);
          const optionalFolderEntries = this.plugin.manifestCache.folders.filter((f) => f.optional);
          const totalCountFiles = optionalFileEntries.length;
          const totalCountFolders = optionalFolderEntries.length;
          const totalCount = totalCountFiles + totalCountFolders;
          if (totalCount === 0) {
            new import_obsidian7.Notice("No \u201Coptional\u201D demo files or folders to remove.");
            return;
          }
          const userConfirmed = await new Promise((resolve) => {
            const confirmModal = new class extends import_obsidian7.Modal {
              constructor(app) {
                super(app);
              }
              onOpen() {
                this.contentEl.empty();
                this.contentEl.createEl("h2", { text: "Confirm Removal" });
                this.contentEl.createEl("p", {
                  text: `This will permanently delete ${totalCountFiles} file(s) and ${totalCountFolders} folder(s). Continue?`
                });
                const btnRow = this.contentEl.createEl("div");
                Object.assign(btnRow.style, {
                  display: "flex",
                  justifyContent: "flex-end",
                  gap: "0.5em",
                  marginTop: "1.5em"
                });
                btnRow.createEl("button", { text: "Cancel" }).onclick = () => {
                  resolve(false);
                  this.close();
                };
                btnRow.createEl("button", { text: "Yes, Remove", cls: "mod-danger" }).onclick = () => {
                  resolve(true);
                  this.close();
                };
              }
              onClose() {
                this.contentEl.empty();
              }
            }(this.app);
            confirmModal.open();
          });
          if (!userConfirmed) {
            return;
          }
          let filesDeleted = 0;
          for (const fileEntry of optionalFileEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === fileEntry.key);
            const vaultPath = mapped?.vaultPath ?? fileEntry.path;
            if (await this.app.vault.adapter.exists(vaultPath)) {
              try {
                await this.app.vault.adapter.remove(vaultPath);
                filesDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional file ${vaultPath}`, err);
              }
            }
          }
          let foldersDeleted = 0;
          for (const folderEntry of optionalFolderEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === folderEntry.key);
            const vaultFolderPath = mapped?.vaultPath ?? folderEntry.path;
            if (await this.app.vault.adapter.exists(vaultFolderPath)) {
              try {
                await this.app.vault.adapter.rmdir(vaultFolderPath, true);
                foldersDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional folder ${vaultFolderPath}`, err);
              }
            }
          }
          this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => {
            const isOptFile = optionalFileEntries.some((f) => f.key === c.manifestKey);
            const isOptFolder = optionalFolderEntries.some((f) => f.key === c.manifestKey);
            return !isOptFile && !isOptFolder;
          });
          await this.plugin.saveSettings();
          new import_obsidian7.Notice(`Deleted ${filesDeleted} file(s) and ${foldersDeleted} folder(s).`);
          this.display();
        })
      );
      const footer = containerEl.createDiv({ cls: "setting-item" });
      Object.assign(footer.style, {
        fontSize: "0.85em",
        color: "var(--text-muted)",
        marginTop: "2em"
      });
      footer.createEl("span", {
        text: `VVunderlore Toolkit Plugin v${this.plugin.manifest.version} \u2022 `
      });
      footer.createEl("a", {
        text: "View on GitHub",
        href: "https://github.com/slamwise0001/vvunderlore-toolkit-plugin",
        attr: { target: "_blank" }
      });
      containerEl.scrollTop = savedScrollTop;
    })();
  }
  async updateVersionDisplay() {
    if (!this.versionValueEl || !this.forceWarningEl) return;
    let installed = "";
    try {
      const ver = await this.plugin.app.vault.adapter.read(".version.json");
      installed = JSON.parse(ver).version ?? "";
    } catch {
    }
    const latest = (this.plugin.settings.latestToolkitVersion ?? "").trim();
    const isMatch = installed === latest;
    this.versionValueEl.textContent = installed || "Not installed";
    this.versionValueEl.style.color = isMatch ? "var(--text-success)" : "var(--text-error)";
    this.forceWarningEl.empty();
    if (installed && latest && installed !== latest) {
      const warn = this.forceWarningEl.createDiv({
        text: `\u26A0\uFE0F New version available (${installed} \u2192 ${latest}) \u2014 use regular update instead`
      });
      warn.style.cssText = `
			font-size: 0.85em;
			color: var(--text-muted);
			font-style: italic;
		  `;
      warn.setAttr("title", "Force updating while a new version is available may skip important changes.");
    }
  }
};

// src/fileCacheManager.ts
var import_crypto = require("crypto");
var ToolkitFileCacheManager = class {
  constructor(vault, initialCache, saveCallback) {
    this.vault = vault;
    this.cache = initialCache || {};
    this.save = saveCallback;
  }
  hashContent(content) {
    return (0, import_crypto.createHash)("sha256").update(content).digest("hex");
  }
  async isUpToDate(vaultPath) {
    const entry = this.cache[vaultPath];
    if (!entry) {
      return false;
    }
    const exists = await this.vault.adapter.exists(vaultPath);
    if (!exists) {
      return false;
    }
    const content = await this.vault.adapter.read(vaultPath);
    const localHash = this.hashContent(content);
    const isSame = localHash === entry.hash;
    return isSame;
  }
  async updateCache(vaultPath, content, githubPath, saveNow = true) {
    this.cache[vaultPath] = {
      hash: this.hashContent(content),
      githubPath
    };
    if (saveNow) await this.save();
  }
  getCache() {
    return this.cache;
  }
  getTrackedFiles() {
    return Object.keys(this.cache);
  }
  getGitHubPath(vaultPath) {
    return this.cache[vaultPath]?.githubPath;
  }
  resetCache() {
    this.cache = {};
  }
  async removeFromCache(vaultPath) {
    delete this.cache[vaultPath];
    await this.save();
  }
};

// src/backup/BackupManager.ts
var import_obsidian8 = require("obsidian");
var import_path = require("path");
var import_fs = require("fs");
var BackupManager = class {
  constructor(vault) {
    this.vault = vault;
  }
  /**
   * Mirror every vault file (excluding .obsidian & backups) into a timestamped folder,
   * then prune to keep only the latest N full snapshots.
   * @param label Optional suffix for the backup folder name
   * @param maxFullBackups Number of full snapshots to retain (default: 5)
   */
  async backupVaultMirror(label, maxFullBackups = 5) {
    const ts = (/* @__PURE__ */ new Date()).toISOString().replace(/[:.]/g, "-");
    const tag = label ? `-${label}` : "";
    const base = (0, import_obsidian8.normalizePath)(`.vault-backups/full/${ts}${tag}`);
    console.log(`[BackupManager] Starting mirror backup: ${base}`);
    await this.ensureFolderExists(base);
    for (const file of this.vault.getFiles()) {
      if (file.path.startsWith(".vault-backups/") || file.path.startsWith(".obsidian/")) {
        continue;
      }
      const content = await this.vault.read(file);
      const target = (0, import_obsidian8.normalizePath)(`${base}/${file.path}`);
      await this.ensureFolderExists((0, import_path.dirname)(target));
      await this.vault.create(target, content);
    }
    console.log("[BackupManager] Mirror backup complete. Pruning old backups...");
    await this.pruneFullBackups(base, maxFullBackups);
    return base;
  }
  /**
   * Legacy alias for mirror-based backups
   */
  async backupVaultToZip(label) {
    return this.backupVaultMirror(label);
  }
  /**
   * Deletes oldest full backup folders, keeping only the most recent `keep` snapshots.
   */
  async pruneFullBackups(currentPath, keep) {
    const root = (0, import_obsidian8.normalizePath)(".vault-backups/full");
    await this.ensureFolderExists(root);
    if (!await this.vault.adapter.exists(root)) {
      return;
    }
    const listing = await this.vault.adapter.list(root);
    const rawFolders = Array.isArray(listing) ? listing : "folders" in listing ? listing.folders : [];
    const folders = rawFolders.map((f) => (0, import_path.basename)(f));
    const sorted = [...folders].sort((a, b) => b.localeCompare(a));
    const adapterAny = this.vault.adapter;
    const fsRoot = adapterAny.basePath ? (0, import_path.join)(adapterAny.basePath, root) : null;
    if (!fsRoot) {
      return;
    }
    for (let i = keep; i < sorted.length; i++) {
      const name = sorted[i];
      const vaultPath = (0, import_obsidian8.normalizePath)(`${root}/${name}`);
      if (vaultPath === currentPath) {
        continue;
      }
      const removePath = (0, import_path.join)(fsRoot, name);
      try {
        await import_fs.promises.rm(removePath, { recursive: true, force: true });
      } catch (e) {
      }
      const af = this.vault.getAbstractFileByPath(vaultPath);
      if (af) {
        await this.vault.delete(af);
      }
    }
  }
  /**
   * Recursively ensures that a directory exists in the vault.
   */
  async ensureFolderExists(folderPath) {
    if (!folderPath || await this.vault.adapter.exists(folderPath)) {
      return;
    }
    const parent = (0, import_path.dirname)(folderPath);
    await this.ensureFolderExists(parent);
    await this.vault.createFolder(folderPath);
  }
};

// src/main.ts
function getRulesetDisplayName(key) {
  const ed = AVAILABLE_EDITIONS.find((e) => e.id === key);
  return ed?.label ?? key;
}
var loadingIcon = "data:image/png;base64,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";
var InstallingModal2 = class extends import_obsidian9.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.contentEl.empty();
    const img = this.contentEl.createEl("img", {
      attr: { src: loadingIcon, alt: "Installing\u2026" }
    });
    Object.assign(img.style, {
      display: "block",
      margin: "1em auto 0.5em",
      width: "100px",
      height: "100px"
    });
    img.animate(
      [
        { transform: "rotate(0deg)" },
        { transform: "rotate(-360deg)" }
      ],
      {
        duration: 1500,
        // one and a half seconds per revolution
        iterations: Infinity,
        easing: "linear"
      }
    );
    const txt = this.contentEl.createDiv({ text: "Installing\u2026", cls: "mod-quiet" });
    txt.style.cssText = "font-style: italic; color: var(--text-muted); text-align: center; padding: 1em;";
  }
  onClose() {
    this.contentEl.empty();
  }
};
var DEFAULT_SETTINGS = {
  installedVersion: "1.0.0",
  customizeUpdates: false,
  updateTargets: {
    tools: true,
    toolsPath: "Tools",
    templates: true,
    templatesPath: "Extras/Templates",
    omninomicon: true,
    omninomiconPath: "Adventures/Omninomicon.md",
    spellbook: true,
    spellbookPath: "Compendium/Spells/_Spellbook.md"
  },
  latestDefaults: void 0,
  pathOverrides: {},
  backupFiles: {},
  backupPath: "",
  autoBackup: false,
  lastBackupTime: "",
  backupError: "",
  customPaths: [],
  autoBackupBeforeUpdate: true,
  needsInstall: true,
  highlightEnabled: false,
  highlightColorLight: "rgb(107, 146, 120)",
  highlightColorDark: "rgb( 50,  70,  50)",
  rulesetCompendium: "",
  rulesetReference: [],
  reparseGamesets: true
};
var VVunderloreToolkitPlugin = class extends import_obsidian9.Plugin {
  constructor() {
    super(...arguments);
    this.manifestCache = { files: [], folders: [] };
    this.changelog = "";
    this.autoCheckInterval = null;
    this.oldPathsByGithub = {};
    this.styleEl = null;
    this.excludedPaths = [
      ".obsidian",
      ".DS_Store",
      ".gitignore",
      ".gitattributes",
      ".github",
      "README.md",
      ".version.json",
      "plugins",
      "Compendium"
    ];
    this.pendingRulesetKey = "";
    this.pendingReferenceKeys = [];
  }
  // ─── HELPERS ────────────────────────────────────────────────────────
  /** Given a GitHub path, return the overridden vault path or the original. */
  resolveVaultPath(githubPath) {
    const custom = this.settings.customPaths.find(
      (c) => c.manifestKey === githubPath || c.manifestKey === this.keyFor(githubPath)
    );
    return custom?.vaultPath ?? githubPath;
  }
  /** Convert “some/folder/file.md” → “some-folder-file” (lowercased, no extension). */
  keyFor(path2) {
    return path2.replace(/[/\\]/g, "-").replace(/\.[^.]+$/, "").toLowerCase();
  }
  isExcluded(path2) {
    return this.excludedPaths.some(
      (ex) => path2 === ex || path2.startsWith(`${ex}/`) || path2.includes(`/${ex}/`) || path2.endsWith(`/${ex}`) || path2.includes(`/${ex}`)
    );
  }
  // ─── CUSTOM INSTALL LOGIC ───────────────────────────────────────────
  async performCustomInstall(toInstall) {
    const allFiles = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian9.TFile).map((f) => f.path);
    const nonMarkerFiles = allFiles.filter((p) => p !== ".vvunderlore_installed");
    if (nonMarkerFiles.length > 0 && this.settings.autoBackupBeforeUpdate) {
      const folder = await this.backupManager.backupVaultMirror("pre-custom-install");
      new import_obsidian9.Notice(`Backup before custom\u2010install created at: ${folder}`);
    }
    for (const entry of toInstall) {
      if (entry.isFolder) {
        if (!await this.app.vault.adapter.exists(entry.path)) {
          await this.app.vault.createFolder(entry.path);
          console.log(`Created folder: ${entry.path}`);
        }
      } else {
        const manifestEntry = this.manifestCache.files.find(
          (f) => f.path === entry.path
        );
        if (!manifestEntry) {
          console.warn(`Could not find manifest entry for file: ${entry.path}`);
          continue;
        }
        await this.updateEntryFromManifest(manifestEntry, true);
      }
    }
    await this.updateVersionFile();
    this.settings.installedVersion = this.settings.latestToolkitVersion ?? this.settings.installedVersion;
    this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
    this.settings.needsInstall = false;
    await this.saveSettings();
    const markerPath = ".vvunderlore_installed";
    if (!await this.app.vault.adapter.exists(markerPath)) {
      await this.app.vault.create(markerPath, "");
    }
    this.settings.needsInstall = false;
    this.settings.highlightEnabled = true;
    await this.saveSettings();
    this.enableHighlight();
    if (this.settingsTab) {
      this.settingsTab.display();
    }
    new import_obsidian9.Notice("\u2705 Custom install complete \u2026");
  }
  // ─── HIGHLIGHTING (Light + Dark Mode) ──────────────────────────────
  get highlightCSS() {
    const light = this.settings.highlightColorLight.trim() || "rgba(107,146,120,1)";
    const dark = this.settings.highlightColorDark.trim() || "rgba( 50, 70, 50,1)";
    const fileSelectors = this.manifestCache.files.map((f) => {
      const escaped = f.path.replace(/"/g, '\\"');
      return `.nav-file-title[data-path="${escaped}"]`;
    });
    const folderSelectors = this.manifestCache.folders.map((f) => {
      const escaped = f.path.replace(/"/g, '\\"');
      return `.nav-folder-title[data-path="${escaped}"]`;
    });
    const lines = [
      `:root {`,
      `  --vvunderlore-toolkit-highlight: ${light};`,
      `}`,
      ``,
      `body.theme-dark {`,
      `  --vvunderlore-toolkit-highlight: ${dark};`,
      `}`,
      ``
    ];
    if (fileSelectors.length) {
      lines.push(`${fileSelectors.join(", ")} {`);
      lines.push(`  background-color: var(--vvunderlore-toolkit-highlight);`);
      lines.push(`  border-radius: 3px;`);
      lines.push(`}`);
      lines.push(``);
    }
    if (folderSelectors.length) {
      lines.push(`${folderSelectors.join(", ")} {`);
      lines.push(`  background-color: var(--vvunderlore-toolkit-highlight);`);
      lines.push(`  border-radius: 3px;`);
      lines.push(`}`);
      lines.push(``);
    }
    return lines.join("\n");
  }
  enableHighlight() {
    if (this.styleEl) return;
    this.styleEl = document.createElement("style");
    this.styleEl.id = "vvunderlore-highlight-inject";
    this.styleEl.textContent = this.highlightCSS;
    document.head.appendChild(this.styleEl);
  }
  disableHighlight() {
    if (!this.styleEl) return;
    this.styleEl.remove();
    this.styleEl = null;
  }
  // ─── REMOTE BASELINE CACHING ─────────────────────────────────────────
  async fetchRemoteBaseline() {
    console.log("\u{1F501} fetchRemoteBaseline() called");
    if (!this.manifestCache || !Array.isArray(this.manifestCache.files)) {
      console.warn("\u26A0\uFE0F manifestCache is missing or invalid");
      return;
    }
    for (const entry of this.manifestCache.files) {
      try {
        const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${entry.path}`;
        const remoteText = await (await fetch(rawUrl)).text();
        const resolved = this.resolveVaultPath(entry.path);
        if (resolved !== entry.path) {
          await this.fileCacheManager.removeFromCache(entry.path);
        }
        await this.fileCacheManager.updateCache(
          resolved,
          remoteText,
          entry.path,
          false
        );
      } catch (e) {
        console.error(`Failed to fetch raw baseline for ${entry.path}`, e);
      }
    }
    console.log("\u{1F4E6} Final cache:", this.fileCacheManager.getCache());
  }
  // ─── MARKER FILE CHECKS (first‐run detection) ───────────────────────
  async checkMarkerFile() {
    const devForce = window.forceNeedsInstall;
    if (devForce) {
      this.settings.needsInstall = true;
      console.log("\u{1F9EA} DEV MODE: Forcing needsInstall = true");
      await this.saveSettings();
      if (this.settingsTab) this.settingsTab.display();
      return;
    }
    const markerPath = ".TEST_vvunderlore_installed";
    const markerExists = await this.app.vault.adapter.exists(markerPath);
    this.settings.needsInstall = !markerExists;
    console.log(
      markerExists ? "\u2705 Marker file found \u2192 needsInstall = false" : "\u{1F7E1} Marker file NOT found \u2192 needsInstall = true"
    );
    await this.saveSettings();
    if (this.settingsTab) {
      this.settingsTab.display();
    }
  }
  // ─── MANIFEST SYNC ────────────────────────────────────────────────────
  async syncManifest() {
    try {
      const res = await fetch(
        "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/manifest.json"
      );
      if (!res.ok) throw new Error(`Failed to fetch manifest: ${res.statusText}`);
      const manifest = await res.json();
      this.settings.latestDefaults = manifest.defaultPaths || {};
      this.manifestCache = manifest;
      const manifestContent = JSON.stringify(manifest, null, 2);
      await this.app.vault.adapter.write("manifest.json", manifestContent);
      await this.saveSettings();
      console.log("Manifest synced and local manifest updated.");
    } catch (error) {
      console.error("Error syncing manifest:", error);
      new import_obsidian9.Notice("Failed to sync manifest.");
    }
  }
  // ─── PLUGIN LIFECYCLE ─────────────────────────────────────────────────
  async onload() {
    await this.loadSettings();
    this.backupManager = new BackupManager(this.app.vault);
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      this.settings.fileCache ?? {},
      async () => await this.saveSettings()
    );
    const origError = console.error.bind(console);
    console.error = (msg, ...rest) => {
      if (typeof msg === "string" && msg.includes("Cannot index file") && msg.includes("Dataview")) {
        return;
      }
      origError(msg, ...rest);
    };
    this.settingsTab = new ToolkitSettingsTab(this.app, this);
    this.addSettingTab(this.settingsTab);
    try {
      const content = await this.app.vault.adapter.read("manifest.json");
      this.manifestCache = JSON.parse(content);
      console.log("\u2705 Loaded manifest from vault:", this.manifestCache);
    } catch (err) {
      console.warn("Manifest not found in vault; will fetch from GitHub shortly.");
    }
    if (this.settings.highlightEnabled && !this.settings.needsInstall) {
      this.enableHighlight();
    }
    setTimeout(async () => {
      await this.syncManifest();
      await this.showIndexingModal();
      await this.checkForUpdates();
      this.oldPathsByGithub = Object.entries(
        this.fileCacheManager.getCache()
      ).reduce((map, [vaultPath, entry]) => {
        map[entry.githubPath] = vaultPath;
        return map;
      }, {});
      console.log("\u{1F4E6} Cached Files:", this.fileCacheManager.getCache());
    }, 250);
    this.scheduleAutoUpdateCheck();
    this.registerEvent(
      this.app.vault.on("delete", () => this.app.commands.executeCommandById("dataview:clear-cache"))
    );
    this.registerEvent(
      this.app.vault.on(
        "rename",
        () => this.app.commands.executeCommandById("dataview:clear-cache")
      )
    );
    if (!this.settings.customPaths) {
      this.settings.customPaths = [];
    }
    try {
      const raw = await this.app.vault.adapter.read("manifest.json");
      const manifest = JSON.parse(raw);
      const entries = [...manifest.folders || [], ...manifest.files || []];
      this.requiresGraph = /* @__PURE__ */ new Map();
      for (const e of entries) {
        this.requiresGraph.set(e.key, e.requires ?? []);
      }
    } catch (e) {
      console.warn("Could not build requiresGraph (manifest.json missing or invalid).");
      this.requiresGraph = /* @__PURE__ */ new Map();
    }
  }
  onunload() {
    this.disableHighlight();
    if (this.autoCheckInterval) {
      clearInterval(this.autoCheckInterval);
    }
  }
  scheduleAutoUpdateCheck() {
    this.autoCheckInterval = window.setInterval(() => {
      this.checkForUpdates();
    }, 60 * 60 * 1e3);
  }
  // ─── BACKUP & UNDO ────────────────────────────────────────────────────
  async backupFile(filePath, content) {
    this.settings.backupFiles = this.settings.backupFiles || {};
    this.settings.backupFiles[filePath] = content;
    await this.saveSettings();
    console.log(`Backup stored for ${filePath}`);
  }
  async undoForceUpdate() {
    if (!this.settings.backupFiles || Object.keys(this.settings.backupFiles).length === 0) {
      new import_obsidian9.Notice("No backups available to restore.");
      return;
    }
    for (const [filePath, backupContent] of Object.entries(this.settings.backupFiles)) {
      if (await this.app.vault.adapter.exists(filePath)) {
        await this.app.vault.adapter.write(filePath, backupContent);
        console.log(`Restored ${filePath}`);
      } else {
        await this.app.vault.create(filePath, backupContent);
        console.log(`Recreated and restored ${filePath}`);
      }
    }
    new import_obsidian9.Notice("\u2705 Force update undone.");
    this.settings.backupFiles = {};
    await this.saveSettings();
  }
  // ─── FOLDER SYNC ───────────────────────────────────────────────────────
  async syncMissingFolders() {
    if (this.manifestCache && this.manifestCache.folders) {
      for (const folderEntry of this.manifestCache.folders) {
        const folderPath = folderEntry.path;
        if (!await this.app.vault.adapter.exists(folderPath)) {
          await this.app.vault.createFolder(folderPath);
          console.log(`\u{1F4C1} Created missing folder: ${folderPath}`);
        }
      }
    }
  }
  // ─── FORCE-UPDATE PREVIEW ──────────────────────────────────────────────
  async buildForceUpdatePreview() {
    const previewList = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          previewList.push({
            filePath: vp,
            action: "deny-listed \u2013 will not update",
            selected: false
          });
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.key);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        if (!exists) {
          previewList.push({
            filePath: vp,
            action: `new file${tag}`,
            selected: true
          });
        } else if (!await this.fileCacheManager.isUpToDate(vp)) {
          previewList.push({
            filePath: vp,
            action: `will be overwritten${tag}`,
            selected: true
          });
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        if (!await this.app.vault.adapter.exists(fld.path) && !isDenyFolder) {
          previewList.push({
            filePath: fld.path,
            action: "missing folder (will be created)",
            selected: true,
            isFolder: true
          });
        }
      }
      return previewList;
    }
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
      const exists = await this.app.vault.adapter.exists(vaultPath);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vaultPath);
      let tag = "";
      if (vaultPath !== entry.path) tag = " (remapped)";
      if (!exists) {
        previewList.push({
          filePath: vaultPath,
          action: `new file${tag}`,
          selected: true
        });
      } else if (!upToDate) {
        previewList.push({
          filePath: vaultPath,
          action: `will be overwritten${tag}`,
          selected: true
        });
      }
    }
    for (const entry of this.manifestCache.folders) {
      if (entry.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(entry.path);
      if (!await this.app.vault.adapter.exists(entry.path) && !isDenyFolder) {
        previewList.push({
          filePath: entry.path,
          action: "missing folder (will be created)",
          selected: true,
          isFolder: true
        });
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        previewList.push({
          filePath: prevPath,
          action: `moved \u2192 ${manifestPath}`,
          selected: true
        });
      }
    }
    return previewList;
  }
  async forceUpdatePreviewAndConfirm() {
    const previewList = await this.buildForceUpdatePreview();
    const denyItems = [];
    const normalItems = [];
    for (const item of previewList) {
      if (item.action.startsWith("deny-listed")) {
        denyItems.push(item);
      } else {
        normalItems.push(item);
      }
    }
    const modal = new class extends import_obsidian9.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.contentEl.empty();
        this.titleEl.setText("Force Update Preview");
        this.contentEl.createEl("p", {
          text: 'The following items will be updated. Uncheck any items you do NOT want to change, then click "Confirm and Update".'
        });
        if (this.normal.length) {
          const normalContainer = this.contentEl.createEl("div");
          Object.assign(normalContainer.style, {
            maxHeight: "300px",
            overflowY: "auto",
            marginTop: "1em"
          });
          this.normal.forEach((item) => {
            const row = normalContainer.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace"
            });
            const label = row.createDiv();
            label.style.flexGrow = "1";
            label.style.display = "flex";
            label.style.flexDirection = "column";
            const labelWrapper = label.createDiv();
            labelWrapper.textContent = item.filePath;
            const note = label.createDiv({ text: item.action });
            note.style.fontSize = "13px";
            note.style.color = "var(--text-muted)";
            note.style.fontStyle = "italic";
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.onchange = () => {
              item.selected = checkbox.checked;
            };
          });
        } else {
          const noCandidates = this.contentEl.createEl("div");
          Object.assign(noCandidates.style, {
            display: "inline-block",
            fontFamily: "monospace",
            fontStyle: "italic",
            marginTop: "0.5em"
          });
          noCandidates.textContent = "No force-update candidates.";
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em",
            marginTop: "1em"
          });
          summary.createEl("span", { text: `Deny-List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.style.transform = denyDetails.open ? "rotate(0deg)" : "rotate(180deg)";
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.style.paddingLeft = "1em";
          this.denied.forEach((item) => {
            const row = denyBody.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace",
              color: "var(--text-faint)",
              fontStyle: "italic"
            });
            const labelWrapper = row.createDiv();
            labelWrapper.textContent = item.filePath;
            labelWrapper.style.textDecoration = "line-through";
            const note = row.createDiv({ text: item.action });
            note.style.fontSize = "13px";
            note.style.color = "var(--text-faint)";
            note.style.fontStyle = "italic";
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.disabled = true;
            checkbox.title = "This item is deny-listed";
          });
        }
        if (this.plugin.settings.reparseGamesets) {
          this.contentEl.createDiv({ cls: "mod-aux-text" }).setText("\u{1F504} Refreshing Gameset Data");
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          gap: "0.5em",
          marginTop: "1.5em"
        });
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm and Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          this.close();
          await this.plugin.performForceUpdateWithSelection([...this.normal, ...this.denied]);
        };
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalItems, denyItems);
    modal.plugin = this;
    modal.open();
  }
  async updateEntryFromManifest(entry, force = false) {
    const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
    if (custom?.doUpdate === false) {
      console.log(`\u23ED\uFE0F Skipping ${entry.key} (${entry.displayName}) \u2014 blacklisted`);
      return;
    }
    const finalVaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
    if (!force && await this.fileCacheManager.isUpToDate(finalVaultPath)) {
      console.log(`\u2714\uFE0F Already up to date: ${entry.displayName}`);
      return;
    }
    const url = `https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/${entry.path}`;
    try {
      const res = await fetch(url);
      const text = await res.text();
      await this.app.vault.adapter.write(finalVaultPath, text);
      await this.fileCacheManager.updateCache(finalVaultPath, text, entry.path);
      console.log(`\u2705 Updated ${entry.displayName} \u2192 ${finalVaultPath}`);
    } catch (e) {
      console.error(`\u274C Error updating ${entry.displayName}:`, e);
    }
  }
  async performForceUpdateWithSelection(previewList) {
    if (this.settings.autoBackupBeforeUpdate) {
    }
    this.settings.backupFiles = {};
    await this.saveSettings();
    try {
      const toUpdate = previewList.filter(
        (item) => item.selected && !item.isFolder && !this.settings.customPaths.some(
          (c) => c.vaultPath === item.filePath && c.doUpdate === false
        )
      );
      for (const item of toUpdate) {
        const entry = this.manifestCache.files.find(
          (f) => this.resolveVaultPath(f.path) === item.filePath
        );
        if (!entry) {
          console.warn(`\u26A0\uFE0F Could not match preview item to manifest: ${item.filePath}`);
          continue;
        }
        await this.updateEntryFromManifest(entry, true);
      }
      for (const entry of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(entry.path)) {
          await this.app.vault.createFolder(entry.path);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion ?? "unknown";
      this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
      new import_obsidian9.Notice("\u2705 Toolkit force\u2010updated with your selections.");
      if (this.settings.reparseGamesets) {
        new import_obsidian9.Notice("\u{1F504} Refreshing Game Set Data\u2026");
        await this.refreshGameSetData();
      }
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C Force update failed. Version not changed.", err);
      new import_obsidian9.Notice("\u274C One or more files failed. Version NOT updated.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  // ─── SINGLE-FILE UPDATE (with GitHub API + raw fallback) ──────────────
  async updateSingleFileFromGitHub({ githubPath, vaultPath }, force = false) {
    if (this.settings.customizeUpdates) {
      vaultPath = this.resolveVaultPath(githubPath);
      const custom = this.settings.customPaths.find((c) => c.manifestKey === githubPath);
      if (custom?.doUpdate === false) {
        return;
      }
    } else {
      vaultPath = githubPath;
    }
    if (!vaultPath) {
      console.error(`\u274C No valid vault path resolved for ${githubPath}`);
      return;
    }
    const oldVault = this.oldPathsByGithub[githubPath];
    if (oldVault && oldVault !== vaultPath) {
      if (await this.app.vault.adapter.exists(vaultPath)) {
        const stray = await this.app.vault.adapter.read(vaultPath);
        await this.backupFile(vaultPath, stray);
        await this.app.vault.adapter.remove(vaultPath);
      }
      const oldFile = this.app.vault.getAbstractFileByPath(oldVault);
      if (oldFile instanceof import_obsidian9.TFile) {
        await this.app.vault.rename(oldFile, vaultPath);
        const newContent = await this.app.vault.adapter.read(vaultPath);
        await this.fileCacheManager.updateCache(vaultPath, newContent, githubPath);
        return;
      }
    }
    const fileExists = await this.app.vault.adapter.exists(vaultPath);
    if (force && fileExists) {
      const current = await this.app.vault.adapter.read(vaultPath);
      await this.backupFile(vaultPath, current);
    }
    if (!force && fileExists && await this.fileCacheManager.isUpToDate(vaultPath)) {
      return;
    }
    const apiUrl = encodeURI(
      `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubPath}?ref=main`
    );
    try {
      let res = await fetch(apiUrl);
      if (res.status === 404) {
        const rawUrl = encodeURI(
          `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${githubPath}`
        );
        res = await fetch(rawUrl);
        if (!res.ok) throw new Error(`Raw fetch failed: ${res.statusText}`);
        const content2 = await res.text();
        if (fileExists) {
          await this.app.vault.adapter.write(vaultPath, content2);
        } else {
          await this.app.vault.create(vaultPath, content2);
        }
        await this.fileCacheManager.updateCache(vaultPath, content2, githubPath);
        return;
      }
      if (!res.ok) throw new Error(`GitHub API error: ${res.statusText}`);
      const { download_url } = await res.json();
      const content = await (await fetch(download_url)).text();
      if (fileExists) {
        await this.app.vault.adapter.write(vaultPath, content);
      } else {
        await this.app.vault.create(vaultPath, content);
      }
      await this.fileCacheManager.updateCache(vaultPath, content, githubPath);
    } catch (e) {
      console.error(`\u274C Failed to update ${vaultPath}`, e);
    }
  }
  // ─── PREVIEW + REMOTE-BASELINE + DIFF ─────────────────────────────────
  async previewUpdatesModal() {
    const loading = new class extends import_obsidian9.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.empty();
        this.contentEl.createDiv({
          text: "\u{1F504} Checking for updates\u2026",
          cls: "mod-warning"
        }).addEventListener("click", (e) => e.stopPropagation());
      }
    }(this.app);
    loading.open();
    await this.syncManifest();
    await this.fetchRemoteBaseline();
    const diffs = await this.buildUpdatePreview();
    loading.close();
    const denyListedLines = [];
    const normalLines = [];
    for (const d of diffs) {
      if (d.startsWith("\u274C deny\u2010listed")) {
        denyListedLines.push(d);
      } else {
        normalLines.push(d);
      }
    }
    const modal = new class extends import_obsidian9.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.empty();
        this.titleEl.setText("Update Preview");
        this.contentEl.createEl("p", {
          text: "Only files whose contents differ from GitHub will be updated:"
        });
        if (this.normal.length) {
          const ul = this.contentEl.createEl("ul");
          this.normal.forEach((line) => {
            const li = ul.createEl("li", { text: line });
          });
        } else {
          this.contentEl.createEl("div", {
            text: "\u2705 Everything is already up to date!",
            cls: "mod-info"
          });
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em"
          });
          summary.createEl("span", { text: `Deny\u2010List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.style.transform = denyDetails.open ? "rotate(0deg)" : "rotate(180deg)";
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.style.paddingLeft = "1em";
          const denyUl = denyBody.createEl("ul");
          this.denied.forEach((line) => {
            const li = denyUl.createEl("li", { text: line });
            li.style.color = "var(--text-faint)";
            li.style.fontStyle = "italic";
          });
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          marginTop: "1.25em"
          // tweak spacing as you like
        });
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm & Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          await this.plugin.updateSelectedToolkitContent();
          this.close();
        };
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalLines, denyListedLines);
    modal.plugin = this;
    modal.open();
  }
  async buildUpdatePreview() {
    const changes = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          changes.push(`\u274C deny\u2010listed \u2013 will not update: ${vp}`);
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists) {
          changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
        } else if (!upToDate) {
          changes.push(`\u{1F501} Will update: ${vp}${tag}`);
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        const exists = await this.app.vault.adapter.exists(fld.path);
        if (!exists && !isDenyFolder) {
          changes.push(`\u{1F4C1} New folder: ${fld.path}`);
        }
      }
      return changes.length ? changes : ["\u2705 Everything is already up to date!"];
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
      let tag = "";
      if (vp !== f.path) tag = " (remapped)";
      const exists = await this.app.vault.adapter.exists(vp);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
      if (!exists) {
        changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
      } else if (!upToDate) {
        changes.push(`\u{1F501} Will update: ${vp}${tag}`);
      }
    }
    for (const fld of this.manifestCache.folders) {
      if (fld.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(fld.path);
      const exists = await this.app.vault.adapter.exists(fld.path);
      if (!exists && !isDenyFolder) {
        changes.push(`\u{1F4C1} New folder: ${fld.path}`);
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        changes.push(`\u27A1\uFE0F Moved: ${prevPath} \u2192 ${manifestPath}`);
      }
    }
    return changes.length ? changes : ["\u2705 Everything is already up to date!"];
  }
  // ─── VERSION-CHECK / UPDATE FLOW ─────────────────────────────────────
  async checkForUpdates() {
    const isNewerVersion = (remote, local) => {
      const pa = remote.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      const pb = local.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      for (let i = 0; i < Math.max(pa.length, pb.length); i++) {
        if ((pa[i] || 0) > (pb[i] || 0)) return true;
        if ((pa[i] || 0) < (pb[i] || 0)) return false;
      }
      return false;
    };
    const toolkitPath = ".version.json";
    const toolkitUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/.version.json";
    const pluginUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-plugin/main/version.json";
    const changelogUrl = "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/README.md";
    let localTK = "0.0.0";
    try {
      const content = await this.app.vault.adapter.read(toolkitPath);
      const json = JSON.parse(content);
      localTK = json.version || localTK;
    } catch (err) {
      console.error("\u274C Failed to read local toolkit version:", err);
    }
    let remoteTK = "0.0.0";
    try {
      const res = await fetch(toolkitUrl);
      const data = await res.json();
      remoteTK = data.version || remoteTK;
      this.settings.latestToolkitVersion = remoteTK;
      if (data.defaultPaths) {
        this.settings.latestDefaults = data.defaultPaths;
      }
      this.settings.lastChecked = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
    } catch (err) {
      console.error("\u274C Failed to fetch remote toolkit version:", err);
    }
    console.log({ localTK, remoteTK });
    if (isNewerVersion(remoteTK, localTK)) {
      new import_obsidian9.Notice(`\u26A0\uFE0F Toolkit update available! Installed: v${localTK}, Latest: v${remoteTK}`);
      await this.fetchRemoteBaseline();
    } else {
      new import_obsidian9.Notice(`\u2705 Toolkit is up to date (v${localTK})`);
    }
    const localPL = this.manifest.version;
    let remotePL = localPL;
    try {
      const res = await fetch(pluginUrl);
      const data = await res.json();
      remotePL = data.version || remotePL;
    } catch (err) {
      console.error("\u274C Failed to fetch remote plugin version:", err);
    }
    console.log({ localPL, remotePL });
    if (isNewerVersion(remotePL, localPL)) {
      new import_obsidian9.Notice(`\u2699\uFE0F Plugin update available! Installed: v${localPL}, Latest: v${remotePL}`);
    } else {
      new import_obsidian9.Notice(`\u2705 Plugin is up to date (v${localPL})`);
    }
    try {
      const changelogRes = await fetch(changelogUrl);
      this.changelog = await changelogRes.text();
    } catch (err) {
      console.error("\u274C Failed to fetch changelog:", err);
    }
  }
  async loadSettings() {
    const loaded = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loaded);
    if (typeof this.settings.rulesetCompendium !== "string") {
      this.settings.rulesetCompendium = "";
    }
    if (!Array.isArray(this.settings.rulesetReference)) {
      this.settings.rulesetReference = [];
    }
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      loaded?.fileCache ?? {},
      async () => await this.saveSettings()
    );
    setTimeout(() => this.checkMarkerFile(), 500);
  }
  async saveSettings() {
    await this.saveData({
      ...this.settings,
      fileCache: this.fileCacheManager.getCache()
    });
  }
  async getLocalToolkitVersion() {
    try {
      const content = await this.app.vault.adapter.read(".version.json");
      const json = JSON.parse(content);
      return json.version || null;
    } catch (err) {
      console.error("\u274C Failed to read .version.json:", err);
      return null;
    }
  }
  async updateFullToolkitRepo() {
    const excluded = [
      ".obsidian",
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    const fetchRepoRoot = async () => {
      const apiUrl = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/";
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch repo root`);
      return await response.json();
    };
    try {
      const contents = await fetchRepoRoot();
      const filtered = contents.filter(
        (item) => !excluded.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      );
      filtered.sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const item of filtered) {
        if (item.type === "dir") {
          await this.updateFolderFromGitHub(item.path, item.path);
        }
        if (item.type === "file") {
          const response = await fetch(item.download_url);
          const content = await response.text();
          const filePath = item.path;
          const exists = await this.app.vault.adapter.exists(filePath);
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, item.path, false);
        }
      }
      await this.saveSettings();
      const markerPath = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(markerPath)) {
        await this.app.vault.create(markerPath, "");
      }
      this.settings.needsInstall = false;
      await this.saveSettings();
      if (this.settingsTab) {
        this.settingsTab.display();
      }
      if (this.settings.highlightEnabled) {
        this.enableHighlight();
      }
      new import_obsidian9.Notice("\u2705 VVunderlore Toolkit successfully installed!");
    } catch (err) {
      console.error("\u274C updateFullToolkitRepo() error:", err);
      new import_obsidian9.Notice("\u274C Failed to install toolkit. See console for details.");
    }
  }
  async updateSelectedToolkitContent() {
    if (this.settings.autoBackupBeforeUpdate) {
      const folder = await this.backupManager.backupVaultMirror("pre-update");
      new import_obsidian9.Notice(`Vault mirror backup created at: ${folder}`);
    }
    if (!this.settings.latestDefaults) {
      new import_obsidian9.Notice("\u274C GitHub defaults not loaded yet.");
      return;
    }
    const allManifestFiles = this.manifestCache.files.map((f) => f.path);
    const fileOverrides = Object.fromEntries(
      this.settings.customPaths.map((c) => [c.manifestKey, c])
    );
    try {
      for (const ghPath of allManifestFiles) {
        const override = fileOverrides[ghPath];
        if (override?.doUpdate === false) {
          console.log(`\u23ED\uFE0F Skipping deny-listed: ${ghPath}`);
          continue;
        }
        const vaultPath = this.settings.customizeUpdates ? this.resolveVaultPath(ghPath) : ghPath;
        const entry = this.manifestCache.files.find((f) => f.path === ghPath);
        if (!entry) continue;
        await this.updateEntryFromManifest(entry, false);
      }
      for (const folder of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(folder.path)) {
          await this.app.vault.createFolder(folder.path);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion;
      await this.saveSettings();
      new import_obsidian9.Notice("\u2705 Toolkit content updated.");
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C Update failed. Version not updated.", err);
      new import_obsidian9.Notice("\u274C Update failed. See console for details. Version file NOT changed.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  async updateFolderFromGitHub(githubFolderPath, vaultFolderPath) {
    const excluded = [
      ".obsidian",
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    if (excluded.some((ex) => githubFolderPath === ex || githubFolderPath.startsWith(`${ex}/`))) {
      return;
    }
    const apiUrl = `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubFolderPath}`;
    try {
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch folder: ${githubFolderPath}`);
      const files = await response.json();
      if (!await this.app.vault.adapter.exists(vaultFolderPath)) {
        await this.app.vault.createFolder(vaultFolderPath);
      }
      for (const file of files) {
        if (excluded.some((ex) => file.path === ex || file.path.startsWith(`${ex}/`))) {
          continue;
        }
        const filePath = `${vaultFolderPath}/${file.name}`;
        if (file.type === "file") {
          const fileResponse = await fetch(file.download_url);
          const content = await fileResponse.text();
          const exists = await this.app.vault.adapter.exists(filePath);
          if (exists) {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.backupFile(filePath, current);
            }
          }
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            if (await this.app.vault.adapter.read(filePath) !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, file.path, false);
        } else if (file.type === "dir") {
          await this.updateFolderFromGitHub(file.path, `${vaultFolderPath}/${file.name}`);
        }
      }
      await this.saveSettings();
      new import_obsidian9.Notice(`\u2705 Folder synced: ${vaultFolderPath}`);
    } catch (error) {
      console.error(`\u274C Failed to sync folder: ${vaultFolderPath}`, error);
      new import_obsidian9.Notice(`\u274C Failed to update folder: ${vaultFolderPath}`);
    }
  }
  async rebuildFileCache() {
    const cache = this.fileCacheManager;
    const tasks = [];
    for (const entry of this.manifestCache.files) {
      const vaultPath = this.resolveVaultPath(entry.path);
      if (await this.app.vault.adapter.exists(vaultPath)) {
        tasks.push((async () => {
          const content = await this.app.vault.adapter.read(vaultPath);
          await cache.updateCache(vaultPath, content, entry.path, false);
        })());
      }
    }
    for (const folderEntry of this.manifestCache.folders) {
      const folderPath = folderEntry.path;
      const folder = this.app.vault.getAbstractFileByPath(folderPath);
      if (folder instanceof import_obsidian9.TFolder) {
        import_obsidian9.Vault.recurseChildren(folder, (file) => {
          if (file instanceof import_obsidian9.TFile && file.extension === "md") {
            const filePath = file.path;
            tasks.push((async () => {
              const content = await this.app.vault.adapter.read(filePath);
              await cache.updateCache(filePath, content, filePath, false);
            })());
          }
        });
      }
    }
    const batchSize = 10;
    for (let i = 0; i < tasks.length; i += batchSize) {
      await Promise.all(tasks.slice(i, i + batchSize));
    }
    await this.saveSettings();
  }
  async showIndexingModal() {
    const modal = new class extends import_obsidian9.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.titleEl.setText("\u{1F504} Indexing Toolkit Files...");
        this.contentEl.createEl("p", {
          text: "Indexing and caching your VVunderlore Vault for faster updates and safer syncing."
        });
      }
    }(this.app);
    modal.open();
    await this.rebuildFileCache();
    modal.close();
    new import_obsidian9.Notice("\u2705 VVunderlore caching complete.");
  }
  async updateVersionFile() {
    if (!this.settings.latestToolkitVersion) {
      console.warn("No latest version found; skipping version file update.");
      return;
    }
    const versionPath = ".version.json";
    const content = JSON.stringify({ version: this.settings.latestToolkitVersion }, null, 2);
    const exists = await this.app.vault.adapter.exists(versionPath);
    if (exists) {
      await this.app.vault.adapter.write(versionPath, content);
    } else {
      await this.app.vault.create(versionPath, content);
    }
  }
  /** main.ts **/
  /** 
   * Install the selected compendium and zero or more reference editions.
   */
  async installFullToolkit(opts = { compendium: "", references: [] }) {
    const { compendium, references } = opts;
    if (!compendium) {
      throw new Error("No compendium edition selected");
    }
    const placeholder = new InstallingModal2(this.app);
    placeholder.open();
    let installSucceeded = false;
    try {
      const treeApi = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/git/trees/main?recursive=1";
      const resp = await fetch(treeApi);
      if (!resp.ok) {
        throw new Error(`Failed to list repo tree: ${resp.statusText}`);
      }
      const json = await resp.json();
      const items = Array.isArray(json.tree) ? json.tree : [];
      const staticEntries = items.filter(
        (item) => !this.excludedPaths.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      ).sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const entry of staticEntries) {
        if (entry.type === "tree") {
          if (!await this.app.vault.adapter.exists(entry.path)) {
            await this.app.vault.createFolder(entry.path);
          }
        } else {
          const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${encodeURIComponent(entry.path)}`;
          const fileResp = await fetch(rawUrl);
          if (!fileResp.ok) continue;
          const text = await fileResp.text();
          if (await this.app.vault.adapter.exists(entry.path)) {
            const old = await this.app.vault.adapter.read(entry.path);
            if (old !== text) {
              await this.app.vault.adapter.write(entry.path, text);
            }
          } else {
            await this.app.vault.create(entry.path, text);
          }
        }
      }
      this.settings.rulesetCompendium = compendium;
      const pickedRefs = references.length > 0 ? references : this.settings.rulesetReference;
      this.settings.rulesetReference = pickedRefs;
      await this.saveSettings();
      const jobs = [
        importRulesetData({ app: this.app, editionKey: compendium, targetPath: "Compendium" }),
        ...pickedRefs.map((refKey) => {
          const displayName = getRulesetDisplayName(refKey);
          return importRulesetData({
            app: this.app,
            editionKey: refKey,
            targetPath: `Resources/Rulesets/${displayName}`
          });
        })
      ];
      await Promise.all(jobs);
      const parseJobs = [
        importRulesetData({
          app: this.app,
          editionKey: compendium,
          targetPath: `Compendium`
        }),
        ...references.map((refKey) => {
          const displayName = getRulesetDisplayName(refKey);
          return importRulesetData({
            app: this.app,
            editionKey: refKey,
            targetPath: `Resources/Rulesets/${displayName}`
          });
        })
      ];
      await Promise.all(parseJobs);
      const marker = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(marker)) {
        await this.app.vault.create(marker, "");
      }
      this.settings.needsInstall = false;
      this.settings.highlightEnabled = true;
      await this.saveSettings();
      this.enableHighlight();
      installSucceeded = true;
    } catch (err) {
      console.error("\u274C installFullToolkit()", err);
    } finally {
      placeholder.close();
      if (this.settingsTab) this.settingsTab.display();
      new import_obsidian9.Notice(
        installSucceeded ? "\u2705 VVunderlore Toolkit successfully installed!" : "\u274C Failed to install toolkit. See console for details."
      );
    }
  }
  // * Re-parse all gameset data (ruleset compendium + reference sets)
  async refreshGameSetData() {
    const { rulesetCompendium, rulesetReference } = this.settings;
    if (!rulesetCompendium && rulesetReference.length === 0) {
      new import_obsidian9.Notice("\u26A0\uFE0F No gameset keys set; nothing to refresh.");
      return;
    }
    const jobs = [];
    if (rulesetCompendium) {
      jobs.push(importRulesetData({
        app: this.app,
        editionKey: rulesetCompendium,
        targetPath: "Compendium"
      }));
    }
    for (const ref of rulesetReference) {
      const displayName = getRulesetDisplayName(ref);
      jobs.push(importRulesetData({
        app: this.app,
        editionKey: ref,
        targetPath: `Resources/Rulesets/${displayName}`
      }));
    }
    await Promise.all(jobs);
    new import_obsidian9.Notice("\u2705 Game Set Data refreshed.");
  }
};
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  InstallingModal
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9maXJzdGluc3RhbGxjb25maXJtLnRzIiwgInNyYy9lZGl0aW9ucy50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2luc3RhbGxlci50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvc291cmNlTWFwLnRzIiwgInNyYy9wYXJzZXJzLzVlLWpzb24vaGVscGVycy90YWdSZXBsYWNlci50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvbWFya2Rvd25UYWJsZS50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvZm9ybWF0RW50cnkudHMiLCAic3JjL3BhcnNlcnMvNWUtanNvbi9iZXN0aWFyeS50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2l0ZW1zLnRzIiwgInNyYy9wYXJzZXJzLzVlLWpzb24vaGVscGVycy9mcm9udG1hdHRlci50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL3NwZWxscy50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL3NwZWNpZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtanNvbi9jbGFzc2VzLnRzIiwgInNyYy9wYXJzZXJzLzVlLWpzb24vcnVsZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtanNvbi9mZWF0cy50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2JhY2tncm91bmRzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaW5zdGFsbGVyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9zb3VyY2VNYXAudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9oZWxwZXJzL3RhZ1JlcGxhY2VyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9tYXJrZG93blRhYmxlLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaGVscGVycy9mb3JtYXRFbnRyeS50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2Jlc3RpYXJ5LnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvaXRlbXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9oZWxwZXJzL2Zyb250bWF0dGVyLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvc3BlbGxzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvc3BlY2llcy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2NsYXNzZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtMjAyNS9ydWxlcy50cyIsICJzcmMvcGFyc2Vycy81ZS0yMDI1L2ZlYXRzLnRzIiwgInNyYy9wYXJzZXJzLzVlLTIwMjUvYmFja2dyb3VuZHMudHMiLCAic3JjL3J1bGVzZXRJbnN0YWxsZXIudHMiLCAic3JjL2N1c3RvbUluc3RhbGxNb2RhbC50cyIsICJzcmMvZmlsZUNhY2hlTWFuYWdlci50cyIsICJzcmMvYmFja3VwL0JhY2t1cE1hbmFnZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7XG4gIEFwcCxcbiAgUGx1Z2luLFxuICBOb3RpY2UsXG4gIE1vZGFsLFxuICBTZXR0aW5nLFxuICBURm9sZGVyLFxuICBURmlsZSxcbiAgVmF1bHRcbn0gZnJvbSAnb2JzaWRpYW4nOyBcblxuaW1wb3J0IHsgVG9vbGtpdFNldHRpbmdzVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBUb29sa2l0RmlsZUNhY2hlTWFuYWdlciB9IGZyb20gJy4vZmlsZUNhY2hlTWFuYWdlcic7XG5pbXBvcnQgdHlwZSB7IFRvb2xraXRGaWxlQ2FjaGVFbnRyeSB9IGZyb20gJy4vZmlsZUNhY2hlTWFuYWdlcic7XG5pbXBvcnQgeyBCYWNrdXBNYW5hZ2VyIH0gZnJvbSAnLi9iYWNrdXAvQmFja3VwTWFuYWdlcic7XG5pbXBvcnQgeyBzaG93Q3VzdG9tSW5zdGFsbE1vZGFsIH0gZnJvbSAnLi9jdXN0b21JbnN0YWxsTW9kYWwnO1xuaW1wb3J0IHsgQVZBSUxBQkxFX0VESVRJT05TIH0gZnJvbSAnLi9lZGl0aW9ucyc7XG5pbXBvcnQgeyBpbXBvcnRSdWxlc2V0RGF0YSB9IGZyb20gJy4vcnVsZXNldEluc3RhbGxlcic7XG5cbmZ1bmN0aW9uIGdldFJ1bGVzZXREaXNwbGF5TmFtZShrZXk6IHN0cmluZyk6IHN0cmluZyB7XG4gY29uc3QgZWQgPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZChlID0+IGUuaWQgPT09IGtleSk7XG4gcmV0dXJuIGVkPy5sYWJlbCA/PyBrZXk7XG59XG5cbmNvbnN0IGxvYWRpbmdJY29uID0gXG4nZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgK1xuJ2lWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFORUFBQURSQ0FZQUFBQlNPbGZ2QUFBQUNYQklXWE1BQUJjUkFBQVhFUUhLSnZNL0FBQUw1a2xFUVZSNG5PM2RUNndkWlJuSDhWOWh5Z3VGWWx0S1NnWHhGQWhvUXFVVVFpQkd1Qmd4RVRHNnFVRmN0QnBOM05iRXVEQ1IyOFQ0Snk1QWpRa0xFMHQwb1NaR2RPWEMySU5LTUJyTjNZQUxHemtRSUVxVVhyRkNYNXdXRjJkTWpNN3puTjczbVpsN3p1MzNrNXpOUEpsMzNudlAvZlZNbnZQMm5VM0MvNmxTT2lUcFlNZkRIcTV6WHVsNFRNeUJhcjBuTUtkR2twWTZIbk5ieCtOaFRweTMzaE1BRmgwaEFvSUlFUkJFaUlBZ1FnUUUwWjFidTZPU0hqVnFCeVVkTW1vUFZTbXQ5akdoTm5YT2R3OTFyWE1kSVZxN1ordWN4MjJGS3FVbDU3eDl2Y3dHNjQ3Yk9TQ0lFQUZCaEFnSUlrUkFFQ0VDZ3VqT0RlZXdwSkpWM0xkSTJtN1VEa2k2cXExUXBYU3M0RnEweGdzUW91R3NXSzF4VDVWU0pXbVhVZjZIcE5OR2JXbXQxMElaYnVlQUlFSUVCQkVpSUlnUUFVR0VDQWlpTzllaE91ZGxTY3NkRC9zNWxYWGFySlhta3ZRSHExQ2w5RWJCdGNibmNtdWNUeUlnaUJBQlFZUUlDQ0pFUUJBaEFvSUlFUkMwYWIwbnNHaXFsSllsUGRqeHNQZElldHlvMVhYT3JXM25acVgya25IZVc1enJmZE9wdmRPcFBXd2MzeVBwNDBadHc3ZS8rU1FDZ2dnUkVFU0lnQ0JDQkFRUklpQ0lFQUZCRzdyRjNXenJXN1JoeHh5NXUyUnZCaytWMG5WV3JjNzV1SFBlQWFza2FZdFJ1MEhTWjR6YWhtaC84MGtFQkJFaUlJZ1FBVUdFQ0FnaVJFRFFRdXl4VUtXMFRXVVB5UnBKR25jNm1YNDZtamRKMm1iVTlsVXBXZWV0MURtWFBIM3Z0WUp6cE9tT3EyMHVrblNaVVh0Vjluc3djUjZNdGxyblhMTHQ4dUFXb3NVZGFGVjMza0t0VWpwUDl1L04rMzJla1dSdEFuSk0wbDBGMCttOC9lMnBVaG9acGQyUzdqTnF6OVE1ZjhzWWIwbjIrN293N1c5dTU0QWdRZ1FFRVNJZ2lCQUJRWVFJQ0pxYkZ2ZU1OdlpJWmExcXMwWGFkSnBHQldOdWt0K0ZzMnBubkhQZTVOUldKRmx0N0pMMnRxcVUzdWFVVHptMVM0emptNTI1bkhUR1cxVlorM3RTNXp4eHhoM1UzTFM0aDI1MzlyVGhTQi82V01YOWJhZjhuRlA3blhIOGpLVFhqZHFKT3VmZm50WEUvc3VNdjRjanpiN25jNEhiT1NDSUVBRkJoQWdJSWtSQUVDRUNnZ1p2Y1R0dHk1SHNkcWZYcWk1ZDRTM25lcDZSeWxyakhxK05uYXFVcmpacUp5WFZiWVU2NTFlYzYzbnYrOGlwV1ZzZG45WjB0WFliYng0ZXIvM3QvUjBOM3Y0ZXZNWHRQTTZ3cUkwZFdPRmQxQ2J0cVRWdXRyR3JsRDRxeVFxUkdiNDY1eWV0aTFVcFBlYk01WU5PYldRY1AxWG4vQmZudkU3TmVBOEdiMzl6T3djRUVTSWdpQkFCUVlRSUNDSkVRRkF2TFc2bi9TaDEzOFllT1dONkpnWG4vT2M4NjNvajJSMnMwdFhZdXlWZFk5VE95RmdsWFNWN2R4TkpPNTNhRTA3dGR1UDRTNUlHNjg3Tm03NitKekpiem5YT0pXMzFmYzZZZzI1b1VlZDhWTkxSdHRxTTF1dmh3dFhZNzVmOVNNaytXTHYyU05MZmpPTmpMZjZlNThXNG5RT0NDQkVRUklpQUlFSUVCQkVpSUtpWEJhak9JbE96TzFlbHRGWFRwNnExdVVYU0kwWnRicmFiYlZyNzFsek0zOGxac042bnlKaVdyemkxenhhTU4yazZtbXZTdE9ndk44cjdtOWRhamZ2WWRubHVkdnVSdEZYU3JVYnQraUVuRXZDNHBGOFl0WityYkwvdGQ4ditMd2h2MURuM0VTVExjdHZCV1p2TXlQaEtZSVlrNlNxajl2czY1NThZYzFtV3Y4cCtYREFYRjdkelFCQWhBb0lJRVJCRWlJQWdRZ1FFRlhmbm1pNkk1WWh6bnRXdXZVejIwOVpPU3ZxU1VYdkdtY2Q2c0xwbFIxVysydHdhYzhqT25HY2kvejFmdHM1ejJ0OVowdk5HN1pJcUphdVR1OXVhUjErS3Z5Y3ErUzZvT2MrcUxXbmFCbTd6SzBuM0dyWFRkYzdXVGpOWVozM3NzZDRFNkJhamZKL3NmNHg3MmNTRTJ6a2dpQkFCUVlRSUNDSkVRQkFoQW9MV1l3SHFrbkhjMjAvYmV4S2I5eGhIYkV3dlN6cHUxQ2FTWGpCcSs1MTIrOUhTUGJ6bktVUWo1NXd6ZGM2NSs2bGdRYjJzNlNiNmJaNlYvZjNTZmtrZk1HcGpGZTRBeGUwY0VFU0lnQ0JDQkFRUklpQ0lFQUZCYm5jdXNGTDdSdWM4YTUrQlZXZk1pVE1lemoybm5OclRrbjVtMU82VWRHWFhrNW5WNGpZM2ZKaXhVdnQrWjB3clJPT2hIeE9JeFZUbmZFcEdrS3FVbnBiOS9OaXJKTDJyNi9sd093Y0VFU0lnaUJBQlFZUUlDQ0pFUUZCZkMxQ3RQYlZ4N2xtUnZULzVxRXJKMm45aHBjNzVjRnVoU3VtUXBJUEdlUmMycnpaWFdKT002Q3RFVzNzYUZ3dW16bmxWeGk1SHpTWW1Td1hEamdyUDZ3VzNjMEFRSVFLQ0NCRVFSSWlBSUVJRUJQWFZuYnV6cDNFQnlkL1gvS2JtMVdhZnBKdU4ya05WU3F0RzdYQ2Q4NG8xbWI1Q3RMT25jUUUxdS9KTTJtck5IdkdYR3FlT25HRzkzYWEyZWZQaGRnNElJa1JBRUNFQ2dnZ1JFRVNJZ0tDK3VuTW5leG9YbU9XTTdDMkcvK1NjZDdObWRPRXNmWVdvN21sYzRHeFlqMEw5cDZTWGpKcjF3SVNadUowRGdnZ1JFRVNJZ0NCQ0JBUVJJaUNvcis2Y3RZMHIwTGY5a2o1cDFEWkx1c0NvYlMrOVlGOGhzdnIwUU4rMlM5b3o1QVc1blFPQ0NCRVFSSWlBSUVJRUJCRWlJS2l2N3R3UG5ScWJtS0JQWDVmMEhhTjJ1ZXo5UDc0b2FXL0pCZmtrQW9JSUVSQkVpSUFnUWdRRUVTSWdpQkFCUVgyMXVIL2sxTDVnSEwrdDJRSzJ6YmpPMlhwa0llWlk4elE4NjVHUzR6cm5UUjFmY3F1a0s0M2F4eVFkNnZoNmZCSUJVWVFJQ0NKRVFCQWhBb0lJRVJCRWlJQWd0OFh0dFIrZGR2U3M4MzVnbEhaTHV0ZW9YVkNsdE11b3ZWN25mTUs2SGphZUtxVmxTUTkyUE96ZGRjN2praFA1SkFLQ0NCRVFSSWlBSUVJRUJCRWlJSWdRQVVGOXJlSTIxVGwvb25VaUtWMHQ2UUhqdEdzay9kbW9qU1d4d25zZDliRlN1MHBKa3F6em5wTDBmYU8yVTlKbFJ1Mks1dFVwUG9tQUlFSUVCQkVpSUlnUUFVR0VDQWlLZE9mRzVxRFRiazByWjVGZmx2U2NVZnVYYzcySmM3M1ZPdWNWYXk1WUcrZjNQSkw5L3BUKy9pK1F0TU9vYlpOMGtWSGJJdWtTWjh6T2RiMUpoS1R5RmQ2RjExcVMzMTZsL2QyUklUZVNhVmJ0MzJPVTc1QjB1MUhiM2J6V2lsWGN3SG9oUkVBUUlRS0NDQkVRUklpQW9MNFdvUDdTdkdEMzdlaFZsYlcvUFpNNjUwbkJlUXR2eHU5cmJCdzMzN2NxcFcyUzloVk1aYnVrdHh1MTNaSXVObXFiblRFbnphdk42bG5OcWtWZkxXN3JCNVNrazhieFB0cWtTN0xiMzU0amRjN0xYYzVsVVhUOTlVVGdQZkNjbGxSYmw1UjB2bEhyNVgzbGRnNElJa1JBRUNFQ2dnZ1JFRVNJZ0tDK1d0eW5uZHJZT082MW8xK1Y5THhSZTczTythOUd6V3QvdXhhaE5WNmx0RS9URmMxZEduYzgzaW5acS9QUDEzVFZkWnRLMDZmZVdhd1BnQmNrdldqVXJMK2hrRjVhM0NWbXRFTC9LT2toby9aaW5mT1BPNTdMc3NyMmVoNjBOVjZsZEV6U1VwZGo5ckRLZm8razFzMXBOQTNKRFVadGg2UmJDeTc1TlVrUEc3WFZPdWZpNzRNczNNNEJRWVFJQ0NKRVFCQWhBb0lJRVJBMCtEYkNqbGNrL2RxcFhXL1VkbFFwL2IzZ2VsNDdlcUpoVytPbEp1cStKVzBxL05sMnlkNjY5MkxabTVGNDdlMko3TlhZeHpWdHE3ZXhGcTJHekZPTCswSk5mK0Z0YnBmMHZZNHYyWGs3dXFmSElIcUtOOWNvNGEzd2RtUkoxdmQ0U2RPOXM5ZHFybGJaY3pzSEJCRWlJSWdRQVVHRUNBZ2lSRURRUExXNGEwbFdxL29wU1VlTTJsc2xIVEpxTDB2NmpWV3JVckxhNW51YlY1dXgweEd6anZkbFVuSlMwMFZzTmFQcjlWM2p1TGZsYnlYcFVxTm03WVVnVFgrMlI0M2EyRGx2Y0hQVDRpNDFZL1gzY1VuZk1Hb25tbGViQnlSOXhLak5WWHUxUk9sbUpGVks3elZLNzVEMDFlaTgvc2ZDN0tQTzdSd1FSSWlBSUVJRUJCRWlJSWdRQVVIejFPSXVOWkhkL3Q0cTZYMUc3VFhacTMxdkxKbElsZElPMmF1Uzc1Rzl3UFpveVFZblZVcUhOSDNVWTV0SDFqcGVNK2F5VTdhNmV0WWNacG5JYm1OUENzY2MzTUtIcVBualcyNnJOZTN2VHc4NG5SMlNyalZxbjlLMEZkeG1yTEkvbW9PeU55cDVyR0E4eVYrRi9sUGp1UFVQeHl5VFJmKzZRT0oyRGdnalJFQVFJUUtDQ0JFUVJJaUFvSVh2enMwd2tkMytsdXdGdUhjMXI5YWEwd2IyOWlDd1ZqSkwwcFlxSmF2K0h0bXQ4VGM3WTNwN2RIdjdWZHp2MUs0empsL2tuRFBSQm1oamV4WitGWGVwS3FWTnNuLytCeVY5dm1EWTQ4MnJ6VzJ5VzhFZmx2U2tVZnV5N1ArV2NhM3NaNWQreURndStXSHZkRjl6TGRCcTdGTGN6Z0ZCaEFnSUlrUkFFQ0VDZ2dnUkVMVFJXOXl6V0YycVkwN05zMWYySWxPdkRYeEEwaDNPbUZhTGU3TXpwdGVxTHVWOVhXQ1pkRDJKZVhQT3RyajdzQTU3Y1ErcTYwZFJiaFRjemdGQmhBZ0lJa1JBRUNFQ2dnZ1JFSFN1dDdpN05sN3ZDV0I0L3dZUkJibjE5OC9ycEFBQUFBQkpSVTVFcmtKZ2dnPT0nXG4gXG5jbGFzcyBJbnN0YWxsaW5nTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7IHN1cGVyKGFwcCk7IH1cbiAgb25PcGVuKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgY29uc3QgaW1nID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2ltZycsIHtcbiAgICAgIGF0dHI6IHsgc3JjOiBsb2FkaW5nSWNvbiwgYWx0OiAnSW5zdGFsbGluZ1x1MjAyNicgfSxcbiAgICB9KTtcbiAgICBPYmplY3QuYXNzaWduKGltZy5zdHlsZSwge1xuICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgIG1hcmdpbjogJzFlbSBhdXRvIDAuNWVtJyxcbiAgICAgIHdpZHRoOiAnMTAwcHgnLFxuICAgICAgaGVpZ2h0OiAnMTAwcHgnLFxuICAgIH0pO1xuICAgIGltZy5hbmltYXRlKFxuICAgICAgW1xuICAgICAgICB7IHRyYW5zZm9ybTogJ3JvdGF0ZSgwZGVnKScgfSxcbiAgICAgICAgeyB0cmFuc2Zvcm06ICdyb3RhdGUoLTM2MGRlZyknIH1cbiAgICAgIF0sXG4gICAgICB7XG4gICAgICAgIGR1cmF0aW9uOiAxNTAwLCAgICAgIC8vIG9uZSBhbmQgYSBoYWxmIHNlY29uZHMgcGVyIHJldm9sdXRpb25cbiAgICAgICAgaXRlcmF0aW9uczogSW5maW5pdHksXG4gICAgICAgIGVhc2luZzogJ2xpbmVhcidcbiAgICAgIH1cbiAgICApO1xuICAgIGNvbnN0IHR4dCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IHRleHQ6ICdJbnN0YWxsaW5nXHUyMDI2JywgY2xzOiAnbW9kLXF1aWV0JyB9KTtcbiAgICB0eHQuc3R5bGUuY3NzVGV4dCA9XG4gICAgICAnZm9udC1zdHlsZTogaXRhbGljOyBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMWVtOyc7XG4gIH1cbiAgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICB9IFxufVxuXG5cbmludGVyZmFjZSBQcmV2aWV3SXRlbSB7XG4gIGZpbGVQYXRoOiBzdHJpbmc7XG4gIGFjdGlvbjogc3RyaW5nO1xuICBzZWxlY3RlZDogYm9vbGVhbjsgXG4gIGlzRm9sZGVyPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFRvb2xraXRTZXR0aW5ncyB7XG4gIGluc3RhbGxlZFZlcnNpb246IHN0cmluZztcbiAgbGF0ZXN0VG9vbGtpdFZlcnNpb24/OiBzdHJpbmc7XG4gIGN1c3RvbWl6ZVVwZGF0ZXM6IGJvb2xlYW47XG4gIHVwZGF0ZVRhcmdldHM6IHtcbiAgICB0b29sczogYm9vbGVhbjtcbiAgICB0b29sc1BhdGg/OiBzdHJpbmc7XG4gICAgdGVtcGxhdGVzOiBib29sZWFuO1xuICAgIHRlbXBsYXRlc1BhdGg/OiBzdHJpbmc7XG4gICAgb21uaW5vbWljb246IGJvb2xlYW47XG4gICAgb21uaW5vbWljb25QYXRoPzogc3RyaW5nO1xuICAgIHNwZWxsYm9vazogYm9vbGVhbjtcbiAgICBzcGVsbGJvb2tQYXRoOiBzdHJpbmc7XG4gIH07XG4gIGxhdGVzdERlZmF1bHRzPzoge1xuICAgIHRvb2xzPzogc3RyaW5nO1xuICAgIHRlbXBsYXRlcz86IHN0cmluZztcbiAgICBvbW5pbm9taWNvbj86IHN0cmluZztcbiAgICBzcGVsbGJvb2s/OiBzdHJpbmc7XG4gIH07XG4gIGxhc3RDaGVja2VkPzogc3RyaW5nO1xuICBsYXN0Rm9yY2VVcGRhdGU/OiBzdHJpbmc7XG4gIGZpbGVDYWNoZT86IFJlY29yZDxzdHJpbmcsIFRvb2xraXRGaWxlQ2FjaGVFbnRyeT47XG4gIHBhdGhPdmVycmlkZXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBiYWNrdXBGaWxlcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gIGJhY2t1cFBhdGg/OiBzdHJpbmc7XG4gIGF1dG9CYWNrdXA/OiBib29sZWFuO1xuICBsYXN0QmFja3VwVGltZT86IHN0cmluZztcbiAgYmFja3VwRXJyb3I/OiBzdHJpbmc7XG4gIGN1c3RvbVBhdGhzOiBDdXN0b21QYXRoRW50cnlbXTtcbiAgYXV0b0JhY2t1cEJlZm9yZVVwZGF0ZTogYm9vbGVhbjtcbiAgbmVlZHNJbnN0YWxsOiBib29sZWFuO1xuICBoaWdobGlnaHRFbmFibGVkOiBib29sZWFuO1xuICBoaWdobGlnaHRDb2xvckxpZ2h0OiBzdHJpbmc7XG4gIGhpZ2hsaWdodENvbG9yRGFyazogc3RyaW5nO1xuICBydWxlc2V0Q29tcGVuZGl1bTogc3RyaW5nO1xuICBydWxlc2V0UmVmZXJlbmNlOiBzdHJpbmdbXTtcbiAgcmVwYXJzZUdhbWVzZXRzOiBib29sZWFuO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBUb29sa2l0U2V0dGluZ3MgPSB7XG4gIGluc3RhbGxlZFZlcnNpb246ICcxLjAuMCcsXG4gIGN1c3RvbWl6ZVVwZGF0ZXM6IGZhbHNlLFxuICB1cGRhdGVUYXJnZXRzOiB7XG4gICAgdG9vbHM6IHRydWUsXG4gICAgdG9vbHNQYXRoOiAnVG9vbHMnLFxuICAgIHRlbXBsYXRlczogdHJ1ZSxcbiAgICB0ZW1wbGF0ZXNQYXRoOiAnRXh0cmFzL1RlbXBsYXRlcycsXG4gICAgb21uaW5vbWljb246IHRydWUsXG4gICAgb21uaW5vbWljb25QYXRoOiAnQWR2ZW50dXJlcy9PbW5pbm9taWNvbi5tZCcsXG4gICAgc3BlbGxib29rOiB0cnVlLFxuICAgIHNwZWxsYm9va1BhdGg6ICdDb21wZW5kaXVtL1NwZWxscy9fU3BlbGxib29rLm1kJyxcbiAgfSxcbiAgbGF0ZXN0RGVmYXVsdHM6IHVuZGVmaW5lZCxcbiAgcGF0aE92ZXJyaWRlczoge30sXG4gIGJhY2t1cEZpbGVzOiB7fSxcbiAgYmFja3VwUGF0aDogJycsXG4gIGF1dG9CYWNrdXA6IGZhbHNlLFxuICBsYXN0QmFja3VwVGltZTogJycsXG4gIGJhY2t1cEVycm9yOiAnJyxcbiAgY3VzdG9tUGF0aHM6IFtdLFxuICBhdXRvQmFja3VwQmVmb3JlVXBkYXRlOiB0cnVlLFxuICBuZWVkc0luc3RhbGw6IHRydWUsXG4gIGhpZ2hsaWdodEVuYWJsZWQ6IGZhbHNlLFxuICBoaWdobGlnaHRDb2xvckxpZ2h0OiAncmdiKDEwNywgMTQ2LCAxMjApJyxcbiAgaGlnaGxpZ2h0Q29sb3JEYXJrOiAncmdiKCA1MCwgIDcwLCAgNTApJyxcbiAgcnVsZXNldENvbXBlbmRpdW06IFwiXCIsXG4gIHJ1bGVzZXRSZWZlcmVuY2U6IFtdLFxuICByZXBhcnNlR2FtZXNldHM6IHRydWUsXG59O1xuXG5pbnRlcmZhY2UgQ3VzdG9tUGF0aEVudHJ5IHtcbiAgdmF1bHRQYXRoOiBzdHJpbmc7XG4gIG1hbmlmZXN0S2V5OiBzdHJpbmc7XG4gIGRvVXBkYXRlOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1hbmlmZXN0RmlsZUVudHJ5IHtcbiAgcGF0aDogc3RyaW5nO1xuICBrZXk6IHN0cmluZztcbiAgY3VzdG9tT3ZlcnJpZGU/OiBib29sZWFuO1xuICBkaXNwbGF5TmFtZT86IHN0cmluZztcbiAgb3B0aW9uYWw/OiBib29sZWFuOyAvLyBcdTIxOTAgbWFyayBvcHRpb25hbCBmaWxlcy9mb2xkZXJzIGlmIHlvdSB3aXNoXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5zdGFsbE9wdGlvbnMge1xuXHRjb21wZW5kaXVtOiBzdHJpbmc7XG5cdHJlZmVyZW5jZXM6IHN0cmluZ1tdO1xuICB9XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHJlcXVpcmVzR3JhcGg6IE1hcDxzdHJpbmcsIHN0cmluZ1tdPjtcbiAgcHVibGljIHNldHRpbmdzVGFiOiBUb29sa2l0U2V0dGluZ3NUYWI7XG4gIHNldHRpbmdzOiBUb29sa2l0U2V0dGluZ3M7XG4gIGZpbGVDYWNoZU1hbmFnZXI6IFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyO1xuICBtYW5pZmVzdENhY2hlOiB7XG4gICAgZmlsZXM6IE1hbmlmZXN0RmlsZUVudHJ5W107XG4gICAgZm9sZGVyczogTWFuaWZlc3RGaWxlRW50cnlbXTtcbiAgfSA9IHsgZmlsZXM6IFtdLCBmb2xkZXJzOiBbXSB9O1xuICBjaGFuZ2Vsb2c6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIGF1dG9DaGVja0ludGVydmFsOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBvbGRQYXRoc0J5R2l0aHViOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gIHByaXZhdGUgc3R5bGVFbDogSFRNTFN0eWxlRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG4gIGJhY2t1cE1hbmFnZXI6IEJhY2t1cE1hbmFnZXI7XG4gIGV4Y2x1ZGVkUGF0aHMgPSBbXG4gICAgJy5vYnNpZGlhbicsXG4gICAgJy5EU19TdG9yZScsXG4gICAgJy5naXRpZ25vcmUnLFxuICAgICcuZ2l0YXR0cmlidXRlcycsXG4gICAgJy5naXRodWInLFxuICAgICdSRUFETUUubWQnLFxuICAgICcudmVyc2lvbi5qc29uJyxcbiAgICAncGx1Z2lucycsXG4gICAgJ0NvbXBlbmRpdW0nXG4gIF07XG5cbiAgcHVibGljIHBlbmRpbmdSdWxlc2V0S2V5OiBzdHJpbmcgPSAnJztcbiAgcHVibGljIHBlbmRpbmdSZWZlcmVuY2VLZXlzOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEhFTFBFUlMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgLyoqIEdpdmVuIGEgR2l0SHViIHBhdGgsIHJldHVybiB0aGUgb3ZlcnJpZGRlbiB2YXVsdCBwYXRoIG9yIHRoZSBvcmlnaW5hbC4gKi9cbiAgcmVzb2x2ZVZhdWx0UGF0aChnaXRodWJQYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZChcbiAgICAgIChjKSA9PlxuICAgICAgICBjLm1hbmlmZXN0S2V5ID09PSBnaXRodWJQYXRoIHx8XG4gICAgICAgIGMubWFuaWZlc3RLZXkgPT09IHRoaXMua2V5Rm9yKGdpdGh1YlBhdGgpXG4gICAgKTtcbiAgICByZXR1cm4gY3VzdG9tPy52YXVsdFBhdGggPz8gZ2l0aHViUGF0aDtcbiAgfVxuXG4gIC8qKiBDb252ZXJ0IFx1MjAxQ3NvbWUvZm9sZGVyL2ZpbGUubWRcdTIwMUQgXHUyMTkyIFx1MjAxQ3NvbWUtZm9sZGVyLWZpbGVcdTIwMUQgKGxvd2VyY2FzZWQsIG5vIGV4dGVuc2lvbikuICovXG4gIGtleUZvcihwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiBwYXRoXG4gICAgICAucmVwbGFjZSgvWy9cXFxcXS9nLCAnLScpXG4gICAgICAucmVwbGFjZSgvXFwuW14uXSskLywgJycpXG4gICAgICAudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGlzRXhjbHVkZWQocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZXhjbHVkZWRQYXRocy5zb21lKFxuICAgICAgKGV4KSA9PlxuICAgICAgICBwYXRoID09PSBleCB8fFxuICAgICAgICBwYXRoLnN0YXJ0c1dpdGgoYCR7ZXh9L2ApIHx8XG4gICAgICAgIHBhdGguaW5jbHVkZXMoYC8ke2V4fS9gKSB8fFxuICAgICAgICBwYXRoLmVuZHNXaXRoKGAvJHtleH1gKSB8fFxuICAgICAgICBwYXRoLmluY2x1ZGVzKGAvJHtleH1gKVxuICAgICk7XG4gIH1cbiAgXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDVVNUT00gSU5TVEFMTCBMT0dJQyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBwdWJsaWMgYXN5bmMgcGVyZm9ybUN1c3RvbUluc3RhbGwoXG4gICAgdG9JbnN0YWxsOiB7IHBhdGg6IHN0cmluZzsgaXNGb2xkZXI6IGJvb2xlYW4gfVtdXG4gICk6IFByb21pc2U8dm9pZD4ge1xuXHRcdFxuXHQvLyBvcHRpb25hbCBiYWNrdXAgLy9cblx0Y29uc3QgYWxsRmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpXG5cdC5maWx0ZXIoKGYpOiBmIGlzIFRGaWxlID0+IGYgaW5zdGFuY2VvZiBURmlsZSlcblx0Lm1hcCgoZikgPT4gZi5wYXRoKTtcblx0Y29uc3Qgbm9uTWFya2VyRmlsZXMgPSBhbGxGaWxlcy5maWx0ZXIoKHApID0+IHAgIT09ICcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJyk7XG5cblx0aWYgKG5vbk1hcmtlckZpbGVzLmxlbmd0aCA+IDAgJiYgdGhpcy5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlKSB7XG5cdGNvbnN0IGZvbGRlciA9IGF3YWl0IHRoaXMuYmFja3VwTWFuYWdlci5iYWNrdXBWYXVsdE1pcnJvcigncHJlLWN1c3RvbS1pbnN0YWxsJyk7XG5cdG5ldyBOb3RpY2UoYEJhY2t1cCBiZWZvcmUgY3VzdG9tXHUyMDEwaW5zdGFsbCBjcmVhdGVkIGF0OiAke2ZvbGRlcn1gKTtcblx0fVxuICAgIC8vIDIpIExvb3Agb3ZlciBlYWNoIHNlbGVjdGVkIHBhdGhcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRvSW5zdGFsbCkge1xuICAgICAgaWYgKGVudHJ5LmlzRm9sZGVyKSB7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihlbnRyeS5wYXRoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgQ3JlYXRlZCBmb2xkZXI6ICR7ZW50cnkucGF0aH1gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmlsZSBcdTIxOTIgZmluZCBNYW5pZmVzdEZpbGVFbnRyeVxuICAgICAgICBjb25zdCBtYW5pZmVzdEVudHJ5ID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoXG4gICAgICAgICAgKGYpID0+IGYucGF0aCA9PT0gZW50cnkucGF0aFxuICAgICAgICApO1xuICAgICAgICBpZiAoIW1hbmlmZXN0RW50cnkpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBmaW5kIG1hbmlmZXN0IGVudHJ5IGZvciBmaWxlOiAke2VudHJ5LnBhdGh9YCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUmV1c2UgeW91ciBleGlzdGluZyBcdTIwMUN1cGRhdGVFbnRyeUZyb21NYW5pZmVzdFx1MjAxRCAoZm9yY2UgPSB0cnVlKVxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUVudHJ5RnJvbU1hbmlmZXN0KG1hbmlmZXN0RW50cnksIHRydWUpO1xuICAgICAgfVxuICAgIH1cblx0XHQvLyAzKSBVcGRhdGUgLnZlcnNpb24uanNvbiBhbmQgc2V0dGluZ3Ncblx0XHRhd2FpdCB0aGlzLnVwZGF0ZVZlcnNpb25GaWxlKCk7XG5cdFx0dGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uID1cblx0XHR0aGlzLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uID8/IHRoaXMuc2V0dGluZ3MuaW5zdGFsbGVkVmVyc2lvbjtcblx0XHR0aGlzLnNldHRpbmdzLmxhc3RGb3JjZVVwZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblx0XHR0aGlzLnNldHRpbmdzLm5lZWRzSW5zdGFsbCA9IGZhbHNlO1xuXHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cblx0XHQvLyA0KSBDcmVhdGUgdGhlIGhpZGRlbiBtYXJrZXIgZmlsZVxuXHRcdGNvbnN0IG1hcmtlclBhdGggPSAnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCc7XG5cdFx0aWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobWFya2VyUGF0aCkpKSB7XG5cdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG1hcmtlclBhdGgsICcnKTtcblx0XHR9XG5cblx0XHQvLyA1KSBSZVx1MjAxMGVuYWJsZSBoaWdobGlnaHRpbmcgKGFsd2F5cyB0dXJuIGl0IGJhY2sgb24pXG5cdFx0dGhpcy5zZXR0aW5ncy5uZWVkc0luc3RhbGwgPSBmYWxzZTtcblx0XHR0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQgPSB0cnVlO1xuXHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0dGhpcy5lbmFibGVIaWdobGlnaHQoKTtcblx0XHRcblx0XHRpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuXHRcdCAgdGhpcy5zZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG5cdFx0fVxuXHRcdG5ldyBOb3RpY2UoJ1x1MjcwNSBDdXN0b20gaW5zdGFsbCBjb21wbGV0ZSBcdTIwMjYnKTtcblx0fVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBISUdITElHSFRJTkcgKExpZ2h0ICsgRGFyayBNb2RlKSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBwcml2YXRlIGdldCBoaWdobGlnaHRDU1MoKTogc3RyaW5nIHtcbiAgICBjb25zdCBsaWdodCA9IHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JMaWdodC50cmltKCkgfHwgJ3JnYmEoMTA3LDE0NiwxMjAsMSknO1xuICAgIGNvbnN0IGRhcmsgPSB0aGlzLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yRGFyay50cmltKCkgfHwgJ3JnYmEoIDUwLCA3MCwgNTAsMSknO1xuXG4gICAgY29uc3QgZmlsZVNlbGVjdG9ycyA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5tYXAoKGYpID0+IHtcbiAgICAgIGNvbnN0IGVzY2FwZWQgPSBmLnBhdGgucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xuICAgICAgcmV0dXJuIGAubmF2LWZpbGUtdGl0bGVbZGF0YS1wYXRoPVwiJHtlc2NhcGVkfVwiXWA7XG4gICAgfSk7XG5cbiAgICBjb25zdCBmb2xkZXJTZWxlY3RvcnMgPSB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5tYXAoKGYpID0+IHtcbiAgICAgIGNvbnN0IGVzY2FwZWQgPSBmLnBhdGgucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpO1xuICAgICAgcmV0dXJuIGAubmF2LWZvbGRlci10aXRsZVtkYXRhLXBhdGg9XCIke2VzY2FwZWR9XCJdYDtcbiAgICB9KTtcblxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtcbiAgICAgIGA6cm9vdCB7YCxcbiAgICAgIGAgIC0tdnZ1bmRlcmxvcmUtdG9vbGtpdC1oaWdobGlnaHQ6ICR7bGlnaHR9O2AsXG4gICAgICBgfWAsXG4gICAgICBgYCxcbiAgICAgIGBib2R5LnRoZW1lLWRhcmsge2AsXG4gICAgICBgICAtLXZ2dW5kZXJsb3JlLXRvb2xraXQtaGlnaGxpZ2h0OiAke2Rhcmt9O2AsXG4gICAgICBgfWAsXG4gICAgICBgYCxcbiAgICBdO1xuXG4gICAgaWYgKGZpbGVTZWxlY3RvcnMubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke2ZpbGVTZWxlY3RvcnMuam9pbignLCAnKX0ge2ApO1xuICAgICAgbGluZXMucHVzaChgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS12dnVuZGVybG9yZS10b29sa2l0LWhpZ2hsaWdodCk7YCk7XG4gICAgICBsaW5lcy5wdXNoKGAgIGJvcmRlci1yYWRpdXM6IDNweDtgKTtcbiAgICAgIGxpbmVzLnB1c2goYH1gKTtcbiAgICAgIGxpbmVzLnB1c2goYGApO1xuICAgIH1cblxuICAgIGlmIChmb2xkZXJTZWxlY3RvcnMubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke2ZvbGRlclNlbGVjdG9ycy5qb2luKCcsICcpfSB7YCk7XG4gICAgICBsaW5lcy5wdXNoKGAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXZ2dW5kZXJsb3JlLXRvb2xraXQtaGlnaGxpZ2h0KTtgKTtcbiAgICAgIGxpbmVzLnB1c2goYCAgYm9yZGVyLXJhZGl1czogM3B4O2ApO1xuICAgICAgbGluZXMucHVzaChgfWApO1xuICAgICAgbGluZXMucHVzaChgYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcHVibGljIGVuYWJsZUhpZ2hsaWdodCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdHlsZUVsKSByZXR1cm47XG4gICAgdGhpcy5zdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICB0aGlzLnN0eWxlRWwuaWQgPSAndnZ1bmRlcmxvcmUtaGlnaGxpZ2h0LWluamVjdCc7XG4gICAgdGhpcy5zdHlsZUVsLnRleHRDb250ZW50ID0gdGhpcy5oaWdobGlnaHRDU1M7XG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLnN0eWxlRWwpO1xuICB9XG5cbiAgcHVibGljIGRpc2FibGVIaWdobGlnaHQoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnN0eWxlRWwpIHJldHVybjtcbiAgICB0aGlzLnN0eWxlRWwucmVtb3ZlKCk7XG4gICAgdGhpcy5zdHlsZUVsID0gbnVsbDtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSRU1PVEUgQkFTRUxJTkUgQ0FDSElORyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBwdWJsaWMgYXN5bmMgZmV0Y2hSZW1vdGVCYXNlbGluZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zb2xlLmxvZygnXHVEODNEXHVERDAxIGZldGNoUmVtb3RlQmFzZWxpbmUoKSBjYWxsZWQnKTtcblxuICAgIGlmICghdGhpcy5tYW5pZmVzdENhY2hlIHx8ICFBcnJheS5pc0FycmF5KHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykpIHtcbiAgICAgIGNvbnNvbGUud2FybignXHUyNkEwXHVGRTBGIG1hbmlmZXN0Q2FjaGUgaXMgbWlzc2luZyBvciBpbnZhbGlkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJhd1VybCA9IGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluLyR7ZW50cnkucGF0aH1gO1xuICAgICAgICBjb25zdCByZW1vdGVUZXh0ID0gYXdhaXQgKGF3YWl0IGZldGNoKHJhd1VybCkpLnRleHQoKTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZWQgPSB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZW50cnkucGF0aCk7XG5cbiAgICAgICAgLy8gSWYgcmVtYXBwZWQsIHJlbW92ZSB0aGUgb2xkIGNhY2hlIGVudHJ5XG4gICAgICAgIGlmIChyZXNvbHZlZCAhPT0gZW50cnkucGF0aCkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5yZW1vdmVGcm9tQ2FjaGUoZW50cnkucGF0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUoXG4gICAgICAgICAgcmVzb2x2ZWQsXG4gICAgICAgICAgcmVtb3RlVGV4dCxcbiAgICAgICAgICBlbnRyeS5wYXRoLFxuICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmZXRjaCByYXcgYmFzZWxpbmUgZm9yICR7ZW50cnkucGF0aH1gLCBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnXHVEODNEXHVEQ0U2IEZpbmFsIGNhY2hlOicsIHRoaXMuZmlsZUNhY2hlTWFuYWdlci5nZXRDYWNoZSgpKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBNQVJLRVIgRklMRSBDSEVDS1MgKGZpcnN0XHUyMDEwcnVuIGRldGVjdGlvbikgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgcHJpdmF0ZSBhc3luYyBjaGVja01hcmtlckZpbGUoKSB7XG4gICAgY29uc3QgZGV2Rm9yY2UgPSAod2luZG93IGFzIGFueSkuZm9yY2VOZWVkc0luc3RhbGw7XG4gICAgaWYgKGRldkZvcmNlKSB7XG4gICAgICB0aGlzLnNldHRpbmdzLm5lZWRzSW5zdGFsbCA9IHRydWU7XG4gICAgICBjb25zb2xlLmxvZygnXHVEODNFXHVEREVBIERFViBNT0RFOiBGb3JjaW5nIG5lZWRzSW5zdGFsbCA9IHRydWUnKTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikgdGhpcy5zZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbWFya2VyUGF0aCA9ICcuVEVTVF92dnVuZGVybG9yZV9pbnN0YWxsZWQnO1xuICAgIGNvbnN0IG1hcmtlckV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlclBhdGgpO1xuICAgIHRoaXMuc2V0dGluZ3MubmVlZHNJbnN0YWxsID0gIW1hcmtlckV4aXN0cztcblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgbWFya2VyRXhpc3RzXG4gICAgICAgID8gJ1x1MjcwNSBNYXJrZXIgZmlsZSBmb3VuZCBcdTIxOTIgbmVlZHNJbnN0YWxsID0gZmFsc2UnXG4gICAgICAgIDogJ1x1RDgzRFx1REZFMSBNYXJrZXIgZmlsZSBOT1QgZm91bmQgXHUyMTkyIG5lZWRzSW5zdGFsbCA9IHRydWUnXG4gICAgKTtcblxuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgaWYgKHRoaXMuc2V0dGluZ3NUYWIpIHtcbiAgICAgIHRoaXMuc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBNQU5JRkVTVCBTWU5DIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIHN5bmNNYW5pZmVzdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICAgICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluL21hbmlmZXN0Lmpzb24nXG4gICAgICApO1xuICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIG1hbmlmZXN0OiAke3Jlcy5zdGF0dXNUZXh0fWApO1xuICAgICAgY29uc3QgbWFuaWZlc3QgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgdGhpcy5zZXR0aW5ncy5sYXRlc3REZWZhdWx0cyA9IG1hbmlmZXN0LmRlZmF1bHRQYXRocyB8fCB7fTtcbiAgICAgIHRoaXMubWFuaWZlc3RDYWNoZSA9IG1hbmlmZXN0O1xuXG4gICAgICBjb25zdCBtYW5pZmVzdENvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShtYW5pZmVzdCwgbnVsbCwgMik7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKCdtYW5pZmVzdC5qc29uJywgbWFuaWZlc3RDb250ZW50KTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdNYW5pZmVzdCBzeW5jZWQgYW5kIGxvY2FsIG1hbmlmZXN0IHVwZGF0ZWQuJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN5bmNpbmcgbWFuaWZlc3Q6JywgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIHN5bmMgbWFuaWZlc3QuJyk7XG4gICAgfVxuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFBMVUdJTiBMSUZFQ1lDTEUgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cbiAgICB0aGlzLmJhY2t1cE1hbmFnZXIgPSBuZXcgQmFja3VwTWFuYWdlcih0aGlzLmFwcC52YXVsdCk7XG5cbiAgICB0aGlzLmZpbGVDYWNoZU1hbmFnZXIgPSBuZXcgVG9vbGtpdEZpbGVDYWNoZU1hbmFnZXIoXG4gICAgICB0aGlzLmFwcC52YXVsdCxcbiAgICAgIHRoaXMuc2V0dGluZ3MuZmlsZUNhY2hlID8/IHt9LFxuICAgICAgYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKVxuICAgICk7XG5cblxuICAgICAgY29uc3Qgb3JpZ0Vycm9yID0gY29uc29sZS5lcnJvci5iaW5kKGNvbnNvbGUpO1xuICBjb25zb2xlLmVycm9yID0gKG1zZz86IGFueSwgLi4ucmVzdDogYW55W10pID0+IHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgbXNnID09PSBcInN0cmluZ1wiICYmXG4gICAgICBtc2cuaW5jbHVkZXMoXCJDYW5ub3QgaW5kZXggZmlsZVwiKSAmJlxuICAgICAgbXNnLmluY2x1ZGVzKFwiRGF0YXZpZXdcIilcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgb3JpZ0Vycm9yKG1zZywgLi4ucmVzdCk7XG4gIH07XG5cbiAgICB0aGlzLnNldHRpbmdzVGFiID0gbmV3IFRvb2xraXRTZXR0aW5nc1RhYih0aGlzLmFwcCwgdGhpcyk7XG4gICAgdGhpcy5hZGRTZXR0aW5nVGFiKHRoaXMuc2V0dGluZ3NUYWIpO1xuXG4gICAgLy8gSW1tZWRpYXRlbHkgbG9hZCBhbnkgY2FjaGVkIG1hbmlmZXN0Lmpzb24uIElmIG5vdCBwcmVzZW50LCB3ZSdsbCBmZXRjaCBpbiBhIG1vbWVudC5cbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnbWFuaWZlc3QuanNvbicpO1xuICAgICAgdGhpcy5tYW5pZmVzdENhY2hlID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICAgIGNvbnNvbGUubG9nKCdcdTI3MDUgTG9hZGVkIG1hbmlmZXN0IGZyb20gdmF1bHQ6JywgdGhpcy5tYW5pZmVzdENhY2hlKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUud2FybignTWFuaWZlc3Qgbm90IGZvdW5kIGluIHZhdWx0OyB3aWxsIGZldGNoIGZyb20gR2l0SHViIHNob3J0bHkuJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIElmIGhpZ2hsaWdodGluZyB3YXMgT04gYmVmb3JlLCByZXN0b3JlIGl0IG5vdzpcblx0aWYgKHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCAmJiAhdGhpcy5zZXR0aW5ncy5uZWVkc0luc3RhbGwpIHtcblx0XHR0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuXHQgIH1cblxuICAgIC8vIERlZmVyIGhlYXZpZXIgdGFza3Mgc2xpZ2h0bHkgc28gVUkgaXNuXHUyMDE5dCBibG9ja2VkOlxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5zeW5jTWFuaWZlc3QoKTtcbiAgICAgIGF3YWl0IHRoaXMuc2hvd0luZGV4aW5nTW9kYWwoKTtcbiAgICAgIGF3YWl0IHRoaXMuY2hlY2tGb3JVcGRhdGVzKCk7XG5cbiAgICAgIC8vIEJ1aWxkIHJldmVyc2UgY2FjaGUgZm9yIFx1MjAxQ21vdmVkXHUyMDFEIGRldGVjdGlvblxuICAgICAgdGhpcy5vbGRQYXRoc0J5R2l0aHViID0gT2JqZWN0LmVudHJpZXMoXG4gICAgICAgIHRoaXMuZmlsZUNhY2hlTWFuYWdlci5nZXRDYWNoZSgpIGFzIFJlY29yZDxzdHJpbmcsIFRvb2xraXRGaWxlQ2FjaGVFbnRyeT5cbiAgICAgICkucmVkdWNlKChtYXAsIFt2YXVsdFBhdGgsIGVudHJ5XSkgPT4ge1xuICAgICAgICBtYXBbZW50cnkuZ2l0aHViUGF0aF0gPSB2YXVsdFBhdGg7XG4gICAgICAgIHJldHVybiBtYXA7XG4gICAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTtcblxuICAgICAgY29uc29sZS5sb2coJ1x1RDgzRFx1RENFNiBDYWNoZWQgRmlsZXM6JywgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmdldENhY2hlKCkpO1xuICAgIH0sIDI1MCk7XG5cbiAgICB0aGlzLnNjaGVkdWxlQXV0b1VwZGF0ZUNoZWNrKCk7XG5cbiAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgIHRoaXMuYXBwLnZhdWx0Lm9uKFwiZGVsZXRlXCIsICgpID0+XG4gICAgKHRoaXMuYXBwIGFzIGFueSkuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKFwiZGF0YXZpZXc6Y2xlYXItY2FjaGVcIikgICAgKVxuICApO1xuICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgdGhpcy5hcHAudmF1bHQub24oXCJyZW5hbWVcIiwgKCkgPT5cbiAgICAgICh0aGlzLmFwcCBhcyBhbnkpLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChcImRhdGF2aWV3OmNsZWFyLWNhY2hlXCIpXG4gICAgKVxuICApO1xuXG4gICAgLy8gRGVmZW5zaXZlOiBlbnN1cmUgc2V0dGluZ3MuY3VzdG9tUGF0aHMgZXhpc3RzXG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzKSB7XG4gICAgICB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzID0gW107XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgdGhlIHJlcXVpcmVzR3JhcGggZnJvbSBtYW5pZmVzdC5qc29uXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJhdyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnbWFuaWZlc3QuanNvbicpO1xuICAgICAgY29uc3QgbWFuaWZlc3QgPSBKU09OLnBhcnNlKHJhdykgYXMge1xuICAgICAgICBmaWxlczogQXJyYXk8eyBrZXk6IHN0cmluZzsgcmVxdWlyZXM/OiBzdHJpbmdbXSB9PjtcbiAgICAgICAgZm9sZGVyczogQXJyYXk8eyBrZXk6IHN0cmluZzsgcmVxdWlyZXM/OiBzdHJpbmdbXSB9PjtcbiAgICAgIH07XG4gICAgICBjb25zdCBlbnRyaWVzID0gWy4uLihtYW5pZmVzdC5mb2xkZXJzIHx8IFtdKSwgLi4uKG1hbmlmZXN0LmZpbGVzIHx8IFtdKV07XG4gICAgICB0aGlzLnJlcXVpcmVzR3JhcGggPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nW10+KCk7XG4gICAgICBmb3IgKGNvbnN0IGUgb2YgZW50cmllcykge1xuICAgICAgICB0aGlzLnJlcXVpcmVzR3JhcGguc2V0KGUua2V5LCBlLnJlcXVpcmVzID8/IFtdKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBidWlsZCByZXF1aXJlc0dyYXBoIChtYW5pZmVzdC5qc29uIG1pc3Npbmcgb3IgaW52YWxpZCkuJyk7XG4gICAgICB0aGlzLnJlcXVpcmVzR3JhcGggPSBuZXcgTWFwKCk7XG4gICAgfVxuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgdGhpcy5kaXNhYmxlSGlnaGxpZ2h0KCk7XG4gICAgaWYgKHRoaXMuYXV0b0NoZWNrSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvQ2hlY2tJbnRlcnZhbCk7XG4gICAgfVxuICB9XG5cbiAgc2NoZWR1bGVBdXRvVXBkYXRlQ2hlY2soKSB7XG4gICAgdGhpcy5hdXRvQ2hlY2tJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmNoZWNrRm9yVXBkYXRlcygpO1xuICAgIH0sIDYwICogNjAgKiAxMDAwKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBCQUNLVVAgJiBVTkRPIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIGJhY2t1cEZpbGUoZmlsZVBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcyA9IHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgfHwge307XG4gICAgdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlc1tmaWxlUGF0aF0gPSBjb250ZW50O1xuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgY29uc29sZS5sb2coYEJhY2t1cCBzdG9yZWQgZm9yICR7ZmlsZVBhdGh9YCk7XG4gIH1cblxuICBhc3luYyB1bmRvRm9yY2VVcGRhdGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzIHx8IE9iamVjdC5rZXlzKHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnTm8gYmFja3VwcyBhdmFpbGFibGUgdG8gcmVzdG9yZS4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yIChjb25zdCBbZmlsZVBhdGgsIGJhY2t1cENvbnRlbnRdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMpKSB7XG4gICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmlsZVBhdGgpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZVBhdGgsIGJhY2t1cENvbnRlbnQpO1xuICAgICAgICBjb25zb2xlLmxvZyhgUmVzdG9yZWQgJHtmaWxlUGF0aH1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgYmFja3VwQ29udGVudCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBSZWNyZWF0ZWQgYW5kIHJlc3RvcmVkICR7ZmlsZVBhdGh9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBGb3JjZSB1cGRhdGUgdW5kb25lLicpO1xuICAgIHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgPSB7fTtcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZPTERFUiBTWU5DIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIHN5bmNNaXNzaW5nRm9sZGVycygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5tYW5pZmVzdENhY2hlICYmIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSBmb2xkZXJFbnRyeS5wYXRoO1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmb2xkZXJQYXRoKSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1RENDMSBDcmVhdGVkIG1pc3NpbmcgZm9sZGVyOiAke2ZvbGRlclBhdGh9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRk9SQ0UtVVBEQVRFIFBSRVZJRVcgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgYnVpbGRGb3JjZVVwZGF0ZVByZXZpZXcoKTogUHJvbWlzZTxQcmV2aWV3SXRlbVtdPiB7XG4gICAgY29uc3QgcHJldmlld0xpc3Q6IFByZXZpZXdJdGVtW10gPSBbXTtcblxuICAgIC8vIDApIENvbGxlY3QgYWxsIGJsYWNrbGlzdGVkIGZvbGRlcnMgKG1hbmlmZXN0S2V5IHZhbHVlcyB3aGVyZSBkb1VwZGF0ZSA9PT0gZmFsc2UpXG4gICAgY29uc3QgZGVueUxpc3RlZEZvbGRlcnMgPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzXG4gICAgICAuZmlsdGVyKChjKSA9PiBjLmRvVXBkYXRlID09PSBmYWxzZSlcbiAgICAgIC5tYXAoKGMpID0+IGMubWFuaWZlc3RLZXkpO1xuXG4gICAgLy8gMSkgRGVueS1saXN0ZWQgZmlsZXMgZmlyc3RcdTIwMTRidXQgb25seSBpZiB0aGV5IHdvdWxkIGFjdHVhbGx5IGJlIFwibmV3XCIgb3IgXCJvdXQgb2YgZGF0ZVwiXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICAgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcbiAgICAgIGlmIChlbnRyeS5vcHRpb25hbCkge1xuICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZW50cnkua2V5KTtcbiAgICAgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuICAgICAgZW50cnkucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcbiAgICAgICk7XG4gICAgICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcbiAgICAgIC8vIFJlc29sdmUgdmF1bHQgcGF0aCAoYWNjb3VudGluZyBmb3IgYW55IHJlbWFwcGluZylcbiAgICAgIGNvbnN0IHZwID0gY3VzdG9tPy52YXVsdFBhdGggPz8gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuXG4gICAgICAvLyBDaGVjazogZG9lcyB0aGUgZmlsZSBleGlzdCBsb2NhbGx5PyBBbmQgaXMgaXQgdXAtdG8tZGF0ZT9cbiAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZwKTtcbiAgICAgIGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpO1xuXG4gICAgICAvLyBPbmx5IHNob3cgYXMgZGVueS1saXN0ZWQgaWYgaXQgd291bGQgaGF2ZSBiZWVuIFx1MjAxQ25ld1x1MjAxRCAobWlzc2luZykgb3IgXHUyMDFDb3V0LW9mLWRhdGVcdTIwMURcbiAgICAgIGlmICghZXhpc3RzIHx8ICF1cFRvRGF0ZSkge1xuICAgICAgICBwcmV2aWV3TGlzdC5wdXNoKHtcbiAgICAgICAgZmlsZVBhdGg6IHZwLFxuICAgICAgICBhY3Rpb246ICdkZW55LWxpc3RlZCBcdTIwMTMgd2lsbCBub3QgdXBkYXRlJyxcbiAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblx0Ly8gMikgRlVMTC1TWU5DIG1vZGUgKHNraXAgYW55IGZpbGUvZm9sZGVyIHRoYXQgaXMgYmxhY2tsaXN0ZWQpXG5cdGlmICghdGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzKSB7XG5cdCAgZm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHRcdC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0XHRpZiAoZi5vcHRpb25hbCkge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBmLmtleSk7XG5cdFx0Y29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0ICBmLnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdFx0KTtcblx0XHRpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHQgIGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IHZwID0gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGYucGF0aCk7XG5cdFx0bGV0IHRhZyA9ICcnO1xuXHRcdGlmICh2cCAhPT0gZi5wYXRoKSB0YWcgPSAnIChyZW1hcHBlZCknO1xuXG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuXHRcdGlmICghZXhpc3RzKSB7XG5cdFx0ICBwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHRcdGZpbGVQYXRoOiB2cCxcblx0XHRcdGFjdGlvbjogYG5ldyBmaWxlJHt0YWd9YCxcblx0XHRcdHNlbGVjdGVkOiB0cnVlLFxuXHRcdCAgfSk7XG5cdFx0fSBlbHNlIGlmICghKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKHZwKSkpIHtcblx0XHQgIHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdFx0ZmlsZVBhdGg6IHZwLFxuXHRcdFx0YWN0aW9uOiBgd2lsbCBiZSBvdmVyd3JpdHRlbiR7dGFnfWAsXG5cdFx0XHRzZWxlY3RlZDogdHJ1ZSxcblx0XHQgIH0pO1xuXHRcdH1cblx0ICB9XG5cblx0ICBmb3IgKGNvbnN0IGZsZCBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuXHRcdC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuXHRcdGlmIChmbGQub3B0aW9uYWwpIHtcblx0XHQgIGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IGlzRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLmluY2x1ZGVzKGZsZC5wYXRoKTtcblx0XHRpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmbGQucGF0aCkpICYmICFpc0RlbnlGb2xkZXIpIHtcblx0XHQgIHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdFx0ZmlsZVBhdGg6IGZsZC5wYXRoLFxuXHRcdFx0YWN0aW9uOiAnbWlzc2luZyBmb2xkZXIgKHdpbGwgYmUgY3JlYXRlZCknLFxuXHRcdFx0c2VsZWN0ZWQ6IHRydWUsXG5cdFx0XHRpc0ZvbGRlcjogdHJ1ZSxcblx0XHQgIH0pO1xuXHRcdH1cblx0ICB9XG5cblx0ICByZXR1cm4gcHJldmlld0xpc3Q7XG5cdH1cblxuXHQvLyAzKSBDVVNUT00tU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0IGlzIGJsYWNrbGlzdGVkKVxuXHRmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0ICBpZiAoZW50cnkub3B0aW9uYWwpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGVudHJ5LmtleSk7XG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0ZW50cnkucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcblx0ICApO1xuXHQgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblxuXHQgIGNvbnN0IHZhdWx0UGF0aCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChlbnRyeS5wYXRoKTtcblx0ICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpO1xuXHQgIGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2YXVsdFBhdGgpKTtcblxuXHQgIGxldCB0YWcgPSAnJztcblx0ICBpZiAodmF1bHRQYXRoICE9PSBlbnRyeS5wYXRoKSB0YWcgPSAnIChyZW1hcHBlZCknO1xuXG5cdCAgaWYgKCFleGlzdHMpIHtcblx0XHRwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHQgIGZpbGVQYXRoOiB2YXVsdFBhdGgsXG5cdFx0ICBhY3Rpb246IGBuZXcgZmlsZSR7dGFnfWAsXG5cdFx0ICBzZWxlY3RlZDogdHJ1ZSxcblx0XHR9KTtcblx0ICB9IGVsc2UgaWYgKCF1cFRvRGF0ZSkge1xuXHRcdHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdCAgZmlsZVBhdGg6IHZhdWx0UGF0aCxcblx0XHQgIGFjdGlvbjogYHdpbGwgYmUgb3ZlcndyaXR0ZW4ke3RhZ31gLFxuXHRcdCAgc2VsZWN0ZWQ6IHRydWUsXG5cdFx0fSk7XG5cdCAgfVxuXHR9XG5cblx0Zm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuXHQgIGlmIChlbnRyeS5vcHRpb25hbCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblxuXHQgIGNvbnN0IGlzRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLmluY2x1ZGVzKGVudHJ5LnBhdGgpO1xuXHQgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSAmJiAhaXNEZW55Rm9sZGVyKSB7XG5cdFx0cHJldmlld0xpc3QucHVzaCh7XG5cdFx0ICBmaWxlUGF0aDogZW50cnkucGF0aCxcblx0XHQgIGFjdGlvbjogJ21pc3NpbmcgZm9sZGVyICh3aWxsIGJlIGNyZWF0ZWQpJyxcblx0XHQgIHNlbGVjdGVkOiB0cnVlLFxuXHRcdCAgaXNGb2xkZXI6IHRydWUsXG5cdFx0fSk7XG5cdCAgfVxuXHR9XG5cblx0Ly8gM2MpIFx1MjAxQ01vdmVkXHUyMDFEIGRldGVjdGlvbiAoc2tpcCBibGFja2xpc3RlZClcblx0Zm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0ICBpZiAoZi5vcHRpb25hbCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblxuXHQgIGNvbnN0IG1hbmlmZXN0S2V5ID0gZi5rZXk7XG5cdCAgY29uc3QgbWFuaWZlc3RQYXRoID0gZi5wYXRoO1xuXHQgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gbWFuaWZlc3RLZXkpO1xuXHQgIGNvbnN0IHByZXZQYXRoID0gdGhpcy5vbGRQYXRoc0J5R2l0aHViW21hbmlmZXN0UGF0aF07XG5cblx0ICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cblx0XHRtYW5pZmVzdFBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdCAgKTtcblx0ICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cdCAgaWYgKGN1c3RvbSAmJiBjdXN0b20udmF1bHRQYXRoICYmIGN1c3RvbS52YXVsdFBhdGggIT09IG1hbmlmZXN0UGF0aCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblx0ICBpZiAoXG5cdFx0cHJldlBhdGggJiZcblx0XHRwcmV2UGF0aCAhPT0gbWFuaWZlc3RQYXRoICYmXG5cdFx0KCFjdXN0b20gfHwgY3VzdG9tLnZhdWx0UGF0aCA9PT0gbWFuaWZlc3RQYXRoKVxuXHQgICkge1xuXHRcdHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdCAgZmlsZVBhdGg6IHByZXZQYXRoLFxuXHRcdCAgYWN0aW9uOiBgbW92ZWQgXHUyMTkyICR7bWFuaWZlc3RQYXRofWAsXG5cdFx0ICBzZWxlY3RlZDogdHJ1ZSxcblx0XHR9KTtcblx0ICB9XG5cdH1cblxuXHRyZXR1cm4gcHJldmlld0xpc3Q7XG4gIH1cblxuICBcbiAgXG4gIFxuICBhc3luYyBmb3JjZVVwZGF0ZVByZXZpZXdBbmRDb25maXJtKCkge1xuXHQvLyAxKSBCdWlsZCB0aGUgZmxhdCBsaXN0IG9mIFByZXZpZXdJdGVtIG9iamVjdHNcblx0Y29uc3QgcHJldmlld0xpc3QgPSBhd2FpdCB0aGlzLmJ1aWxkRm9yY2VVcGRhdGVQcmV2aWV3KCk7XG4gIFxuXHQvLyAyKSBTcGxpdCB0aGUgaXRlbXMgaW50byBcdTIwMUNkZW55LWxpc3RlZFx1MjAxRCB2cy4gXHUyMDFDbm9ybWFsXHUyMDFEIGl0ZW1zXG5cdC8vICAgIChidWlsZEZvcmNlVXBkYXRlUHJldmlldyB1c2VzIGFjdGlvbiA9ICdkZW55LWxpc3RlZCBcdTIwMTMgd2lsbCBub3QgdXBkYXRlJylcblx0Y29uc3QgZGVueUl0ZW1zOiBQcmV2aWV3SXRlbVtdID0gW107XG5cdGNvbnN0IG5vcm1hbEl0ZW1zOiBQcmV2aWV3SXRlbVtdID0gW107XG5cdGZvciAoY29uc3QgaXRlbSBvZiBwcmV2aWV3TGlzdCkge1xuXHQgIGlmIChpdGVtLmFjdGlvbi5zdGFydHNXaXRoKCdkZW55LWxpc3RlZCcpKSB7XG5cdFx0ZGVueUl0ZW1zLnB1c2goaXRlbSk7XG5cdCAgfSBlbHNlIHtcblx0XHRub3JtYWxJdGVtcy5wdXNoKGl0ZW0pO1xuXHQgIH1cblx0fVxuICBcblx0Ly8gMykgQ3JlYXRlIGFuZCBvcGVuIHRoZSBtb2RhbCB3aXRoIGJvdGggbGlzdHNcblx0Y29uc3QgbW9kYWwgPSBuZXcgKGNsYXNzIGV4dGVuZHMgTW9kYWwge1xuXHQgIHBsdWdpbjogVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luO1xuXHQgIG5vcm1hbDogUHJldmlld0l0ZW1bXTtcblx0ICBkZW5pZWQ6IFByZXZpZXdJdGVtW107XG4gIFxuXHQgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBub3JtYWw6IFByZXZpZXdJdGVtW10sIGRlbmllZDogUHJldmlld0l0ZW1bXSkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5ub3JtYWwgPSBub3JtYWw7XG5cdFx0dGhpcy5kZW5pZWQgPSBkZW5pZWQ7XG5cdCAgfVxuICBcblx0ICBvbk9wZW4oKSB7XG5cdFx0Ly8gUHJldmVudCBjbGlja3MgZnJvbSBjbG9zaW5nIGFueXRoaW5nIGJlaGluZFxuXHRcdHRoaXMuY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdFx0dGhpcy50aXRsZUVsLnNldFRleHQoJ0ZvcmNlIFVwZGF0ZSBQcmV2aWV3Jyk7XG4gIFxuXHRcdC8vIEludHJvIHBhcmFncmFwaFxuXHRcdHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdwJywge1xuXHRcdCAgdGV4dDpcblx0XHRcdCdUaGUgZm9sbG93aW5nIGl0ZW1zIHdpbGwgYmUgdXBkYXRlZC4gVW5jaGVjayBhbnkgaXRlbXMgeW91IGRvIE5PVCB3YW50IHRvIGNoYW5nZSwgdGhlbiBjbGljayBcIkNvbmZpcm0gYW5kIFVwZGF0ZVwiLicsXG5cdFx0fSk7XG4gIFxuXHRcdC8vIDQpIFJlbmRlciBcdTIwMUNub3JtYWxcdTIwMUQgKG5vbi1kZW55KSBpdGVtcyB3aXRoIGNoZWNrYm94ZXNcblx0XHRpZiAodGhpcy5ub3JtYWwubGVuZ3RoKSB7XG5cdFx0ICBjb25zdCBub3JtYWxDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG5cdFx0ICBPYmplY3QuYXNzaWduKG5vcm1hbENvbnRhaW5lci5zdHlsZSwge1xuXHRcdFx0bWF4SGVpZ2h0OiAnMzAwcHgnLFxuXHRcdFx0b3ZlcmZsb3dZOiAnYXV0bycsXG5cdFx0XHRtYXJnaW5Ub3A6ICcxZW0nLFxuXHRcdCAgfSk7XG4gIFxuXHRcdCAgdGhpcy5ub3JtYWwuZm9yRWFjaCgoaXRlbSkgPT4ge1xuXHRcdFx0Y29uc3Qgcm93ID0gbm9ybWFsQ29udGFpbmVyLmNyZWF0ZURpdigpO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihyb3cuc3R5bGUsIHtcblx0XHRcdCAgZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0ICBhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXG5cdFx0XHQgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG5cdFx0XHQgIHBhZGRpbmc6ICc2cHggMCcsXG5cdFx0XHQgIGZvbnRGYW1pbHk6ICdtb25vc3BhY2UnLFxuXHRcdFx0fSk7XG4gIFxuXHRcdFx0Ly8gTGVmdDogZmlsZSBwYXRoICsgYWN0aW9uIG5vdGVcblx0XHRcdGNvbnN0IGxhYmVsID0gcm93LmNyZWF0ZURpdigpO1xuXHRcdFx0bGFiZWwuc3R5bGUuZmxleEdyb3cgPSAnMSc7XG5cdFx0XHRsYWJlbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdFx0bGFiZWwuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuICBcblx0XHRcdGNvbnN0IGxhYmVsV3JhcHBlciA9IGxhYmVsLmNyZWF0ZURpdigpO1xuXHRcdFx0bGFiZWxXcmFwcGVyLnRleHRDb250ZW50ID0gaXRlbS5maWxlUGF0aDtcbiAgXG5cdFx0XHRjb25zdCBub3RlID0gbGFiZWwuY3JlYXRlRGl2KHsgdGV4dDogaXRlbS5hY3Rpb24gfSk7XG5cdFx0XHRub3RlLnN0eWxlLmZvbnRTaXplID0gJzEzcHgnO1xuXHRcdFx0bm90ZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG5cdFx0XHRub3RlLnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnO1xuICBcblx0XHRcdC8vIFJpZ2h0OiBjaGVja2JveFxuXHRcdFx0Y29uc3QgY2hlY2tib3ggPSByb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuXHRcdFx0Y2hlY2tib3guY2hlY2tlZCA9IGl0ZW0uc2VsZWN0ZWQ7XG5cdFx0XHRjaGVja2JveC5vbmNoYW5nZSA9ICgpID0+IHtcblx0XHRcdCAgaXRlbS5zZWxlY3RlZCA9IGNoZWNrYm94LmNoZWNrZWQ7XG5cdFx0XHR9O1xuXHRcdCAgfSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IG5vQ2FuZGlkYXRlcyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcblx0XHRcdE9iamVjdC5hc3NpZ24obm9DYW5kaWRhdGVzLnN0eWxlLCB7XG5cdFx0XHQgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuXHRcdFx0ICBmb250RmFtaWx5OiAnbW9ub3NwYWNlJyxcblx0XHRcdCAgZm9udFN0eWxlOiAnaXRhbGljJyxcblx0XHRcdCAgbWFyZ2luVG9wOiAnMC41ZW0nLFxuXHRcdFx0fSk7XG5cdFx0XHRub0NhbmRpZGF0ZXMudGV4dENvbnRlbnQgPSAnTm8gZm9yY2UtdXBkYXRlIGNhbmRpZGF0ZXMuJztcblx0XHR9XG4gIFxuXHRcdC8vIDUpIFJlbmRlciBcdTIwMUNkZW55LWxpc3RlZFx1MjAxRCBpdGVtcyBpbnNpZGUgYSBjb2xsYXBzZWQgPGRldGFpbHM+XG5cdFx0aWYgKHRoaXMuZGVuaWVkLmxlbmd0aCkge1xuXHRcdCAgY29uc3QgZGVueURldGFpbHMgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGV0YWlscycsIHsgY2xzOiAndmstc2VjdGlvbicgfSk7XG5cdFx0ICBkZW55RGV0YWlscy5vcGVuID0gZmFsc2U7XG4gIFxuXHRcdCAgY29uc3Qgc3VtbWFyeSA9IGRlbnlEZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG5cdFx0ICBPYmplY3QuYXNzaWduKHN1bW1hcnkuc3R5bGUsIHtcblx0XHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0Y29sb3I6ICd2YXIoLS10ZXh0LWZhaW50KScsXG5cdFx0XHRhbGlnbkl0ZW1zOiAnY2VudGVyJyxcblx0XHRcdGdhcDogJzAuNWVtJyxcblx0XHRcdG1hcmdpblRvcDogJzFlbScsXG5cdFx0ICB9KTtcblx0XHQgIHN1bW1hcnkuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGBEZW55LUxpc3QgRmlsZXMgKCR7dGhpcy5kZW5pZWQubGVuZ3RofSlgIH0pO1xuICBcblx0XHQgIC8vIFJvdGF0aW5nIFx1MjAxQ1ZWXHUyMDFEIGljb24gb24gZXhwYW5kL2NvbGxhcHNlXG5cdFx0ICBjb25zdCB0b2dnbGVJY29uID0gc3VtbWFyeS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdCAgT2JqZWN0LmFzc2lnbih0b2dnbGVJY29uLnN0eWxlLCB7XG5cdFx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuXHRcdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdFx0dHJhbnNmb3JtOiAncm90YXRlKDE4MGRlZyknLFxuXHRcdCAgfSk7XG5cdFx0ICBkZW55RGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRcdHRvZ2dsZUljb24uc3R5bGUudHJhbnNmb3JtID0gZGVueURldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHQgIH07XG4gIFxuXHRcdCAgLy8gQm9keSBvZiA8ZGV0YWlscz4gXHUyMDE0IGVhY2ggZGVueS1saXN0ZWQgaXRlbSBpcyBmYWludCBhbmQgZGlzYWJsZWRcblx0XHQgIGNvbnN0IGRlbnlCb2R5ID0gZGVueURldGFpbHMuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblx0XHQgIGRlbnlCb2R5LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzFlbSc7XG4gIFxuXHRcdCAgdGhpcy5kZW5pZWQuZm9yRWFjaCgoaXRlbSkgPT4ge1xuXHRcdFx0Y29uc3Qgcm93ID0gZGVueUJvZHkuY3JlYXRlRGl2KCk7XG5cdFx0XHRPYmplY3QuYXNzaWduKHJvdy5zdHlsZSwge1xuXHRcdFx0ICBkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHQgIGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0Jyxcblx0XHRcdCAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcblx0XHRcdCAgcGFkZGluZzogJzZweCAwJyxcblx0XHRcdCAgZm9udEZhbWlseTogJ21vbm9zcGFjZScsXG5cdFx0XHQgIGNvbG9yOiAndmFyKC0tdGV4dC1mYWludCknLFxuXHRcdFx0ICBmb250U3R5bGU6ICdpdGFsaWMnLFxuXHRcdFx0fSk7XG4gIFxuXHRcdFx0Y29uc3QgbGFiZWxXcmFwcGVyID0gcm93LmNyZWF0ZURpdigpO1xuXHRcdFx0bGFiZWxXcmFwcGVyLnRleHRDb250ZW50ID0gaXRlbS5maWxlUGF0aDtcblx0XHRcdGxhYmVsV3JhcHBlci5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdsaW5lLXRocm91Z2gnO1xuICBcblx0XHRcdGNvbnN0IG5vdGUgPSByb3cuY3JlYXRlRGl2KHsgdGV4dDogaXRlbS5hY3Rpb24gfSk7XG5cdFx0XHRub3RlLnN0eWxlLmZvbnRTaXplID0gJzEzcHgnO1xuXHRcdFx0bm90ZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LWZhaW50KSc7XG5cdFx0XHRub3RlLnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnO1xuICBcblx0XHRcdC8vIERlbnktbGlzdGVkIGNoZWNrYm94IGlzIGRpc2FibGVkXG5cdFx0XHRjb25zdCBjaGVja2JveCA9IHJvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG5cdFx0XHRjaGVja2JveC5jaGVja2VkID0gaXRlbS5zZWxlY3RlZDtcblx0XHRcdGNoZWNrYm94LmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdGNoZWNrYm94LnRpdGxlID0gJ1RoaXMgaXRlbSBpcyBkZW55LWxpc3RlZCc7XG5cdFx0ICB9KTtcblx0XHR9XG5cbiAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwYXJzZUdhbWVzZXRzKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsXG4gICAgICAgICAgLmNyZWF0ZURpdih7IGNsczogJ21vZC1hdXgtdGV4dCcgfSlcbiAgICAgICAgICAuc2V0VGV4dCgnXHVEODNEXHVERDA0IFJlZnJlc2hpbmcgR2FtZXNldCBEYXRhJyk7XG4gICAgICB9XG5cblx0XHQvLyA2KSBCdXR0b25zIGF0IHRoZSBib3R0b21cblx0XHRjb25zdCBidXR0b25Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG5cdFx0T2JqZWN0LmFzc2lnbihidXR0b25Sb3cuc3R5bGUsIHtcblx0XHQgIGRpc3BsYXk6ICdmbGV4Jyxcblx0XHQgIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLFxuXHRcdCAgZ2FwOiAnMC41ZW0nLFxuXHRcdCAgbWFyZ2luVG9wOiAnMS41ZW0nLFxuXHRcdH0pO1xuICBcblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG5cdFx0Y2FuY2VsQnRuLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsb3NlKCk7XG4gIFxuXHRcdGNvbnN0IGNvbmZpcm1CdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHQgIHRleHQ6ICdDb25maXJtIGFuZCBVcGRhdGUnLFxuXHRcdCAgY2xzOiAnbW9kLWN0YScsXG5cdFx0fSk7XG5cdFx0Y29uZmlybUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdCAgdGhpcy5jbG9zZSgpO1xuXHRcdCAgLy8gUGFzcyBldmVyeXRoaW5nIGludG8gcGVyZm9ybUZvcmNlVXBkYXRlV2l0aFNlbGVjdGlvbjsgZGVueS1saXN0ZWQgaXRlbXMgd2lsbCBiZSBza2lwcGVkXG5cdFx0ICBhd2FpdCB0aGlzLnBsdWdpbi5wZXJmb3JtRm9yY2VVcGRhdGVXaXRoU2VsZWN0aW9uKFsuLi50aGlzLm5vcm1hbCwgLi4udGhpcy5kZW5pZWRdKTtcblx0XHR9O1xuXHQgIH1cbiAgXG5cdCAgb25DbG9zZSgpIHtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHQgIH1cblx0fSkodGhpcy5hcHAsIG5vcm1hbEl0ZW1zLCBkZW55SXRlbXMpO1xuICBcblx0Ly8gQXR0YWNoIHBsdWdpbiBwb2ludGVyIGFuZCBvcGVuXG5cdChtb2RhbCBhcyBhbnkpLnBsdWdpbiA9IHRoaXM7XG5cdG1vZGFsLm9wZW4oKTtcbiAgfVxuICBcblxuICBhc3luYyB1cGRhdGVFbnRyeUZyb21NYW5pZmVzdChlbnRyeTogTWFuaWZlc3RGaWxlRW50cnksIGZvcmNlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGVudHJ5LmtleSk7XG4gICAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlKSB7XG4gICAgICBjb25zb2xlLmxvZyhgXHUyM0VEXHVGRTBGIFNraXBwaW5nICR7ZW50cnkua2V5fSAoJHtlbnRyeS5kaXNwbGF5TmFtZX0pIFx1MjAxNCBibGFja2xpc3RlZGApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZpbmFsVmF1bHRQYXRoID0gY3VzdG9tPy52YXVsdFBhdGggPz8gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuICAgIGlmICghZm9yY2UgJiYgKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKGZpbmFsVmF1bHRQYXRoKSkpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBcdTI3MTRcdUZFMEYgQWxyZWFkeSB1cCB0byBkYXRlOiAke2VudHJ5LmRpc3BsYXlOYW1lfWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVybCA9IGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL3Z2dW5kZXJsb3JlLXRvb2xraXQtZnVsbC9tYWluLyR7ZW50cnkucGF0aH1gO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbmFsVmF1bHRQYXRoLCB0ZXh0KTtcbiAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZShmaW5hbFZhdWx0UGF0aCwgdGV4dCwgZW50cnkucGF0aCk7XG4gICAgICBjb25zb2xlLmxvZyhgXHUyNzA1IFVwZGF0ZWQgJHtlbnRyeS5kaXNwbGF5TmFtZX0gXHUyMTkyICR7ZmluYWxWYXVsdFBhdGh9YCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIEVycm9yIHVwZGF0aW5nICR7ZW50cnkuZGlzcGxheU5hbWV9OmAsIGUpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHBlcmZvcm1Gb3JjZVVwZGF0ZVdpdGhTZWxlY3Rpb24ocHJldmlld0xpc3Q6IFByZXZpZXdJdGVtW10pIHtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlKSB7XG4gICAgICAvLyBcdTIwMjYgKHlvdXIgZXhpc3RpbmcgYmFja3VwIGNvZGUpIFx1MjAyNlxuICAgIH1cblxuICAgIHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgPSB7fTtcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFx1MjQ2MCBGaWx0ZXIgb3V0IGZvbGRlcnMsIHVuY2hlY2tlZCwgYW5kIGRlbnktbGlzdGVkOlxuICAgICAgY29uc3QgdG9VcGRhdGUgPSBwcmV2aWV3TGlzdC5maWx0ZXIoXG4gICAgICAgIChpdGVtKSA9PlxuICAgICAgICAgIGl0ZW0uc2VsZWN0ZWQgJiZcbiAgICAgICAgICAhaXRlbS5pc0ZvbGRlciAmJlxuICAgICAgICAgICF0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLnNvbWUoXG4gICAgICAgICAgICAoYykgPT4gYy52YXVsdFBhdGggPT09IGl0ZW0uZmlsZVBhdGggJiYgYy5kb1VwZGF0ZSA9PT0gZmFsc2VcbiAgICAgICAgICApXG4gICAgICApO1xuXG4gICAgICAvLyBcdTI0NjEgVXBkYXRlIGVhY2ggc2VsZWN0ZWQgZmlsZVxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHRvVXBkYXRlKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoXG4gICAgICAgICAgKGYpID0+IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpID09PSBpdGVtLmZpbGVQYXRoXG4gICAgICAgICk7XG4gICAgICAgIGlmICghZW50cnkpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYFx1MjZBMFx1RkUwRiBDb3VsZCBub3QgbWF0Y2ggcHJldmlldyBpdGVtIHRvIG1hbmlmZXN0OiAke2l0ZW0uZmlsZVBhdGh9YCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVFbnRyeUZyb21NYW5pZmVzdChlbnRyeSwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFx1MjQ2MiBFbnN1cmUgYWxsIG1hbmlmZXN0IGZvbGRlcnMgZXhpc3RcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZW50cnkucGF0aCkpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGVudHJ5LnBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIDQpIEJ1bXAgdmVyc2lvblxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVWZXJzaW9uRmlsZSgpO1xuICAgICAgdGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uID0gdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiA/PyAndW5rbm93bic7XG4gICAgICB0aGlzLnNldHRpbmdzLmxhc3RGb3JjZVVwZGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBUb29sa2l0IGZvcmNlXHUyMDEwdXBkYXRlZCB3aXRoIHlvdXIgc2VsZWN0aW9ucy4nKTtcblxuICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnJlcGFyc2VHYW1lc2V0cykge1xuICAgICAgbmV3IE5vdGljZSgnXHVEODNEXHVERDA0IFJlZnJlc2hpbmcgR2FtZSBTZXQgRGF0YVx1MjAyNicpO1xuICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoR2FtZVNldERhdGEoKTtcbiAgICB9XG5cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzVGFiKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NUYWIudXBkYXRlVmVyc2lvbkRpc3BsYXkoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGb3JjZSB1cGRhdGUgZmFpbGVkLiBWZXJzaW9uIG5vdCBjaGFuZ2VkLicsIGVycik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgT25lIG9yIG1vcmUgZmlsZXMgZmFpbGVkLiBWZXJzaW9uIE5PVCB1cGRhdGVkLicpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQpIHtcbiAgICAgIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNJTkdMRS1GSUxFIFVQREFURSAod2l0aCBHaXRIdWIgQVBJICsgcmF3IGZhbGxiYWNrKSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyB1cGRhdGVTaW5nbGVGaWxlRnJvbUdpdEh1YihcbiAgICB7IGdpdGh1YlBhdGgsIHZhdWx0UGF0aCB9OiB7IGdpdGh1YlBhdGg6IHN0cmluZzsgdmF1bHRQYXRoOiBzdHJpbmcgfSxcbiAgICBmb3JjZTogYm9vbGVhbiA9IGZhbHNlXG4gICkge1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmN1c3RvbWl6ZVVwZGF0ZXMpIHtcbiAgICAgIHZhdWx0UGF0aCA9IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChnaXRodWJQYXRoKTtcbiAgICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZ2l0aHViUGF0aCk7XG4gICAgICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXVsdFBhdGggPSBnaXRodWJQYXRoO1xuICAgIH1cblxuICAgIGlmICghdmF1bHRQYXRoKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdTI3NEMgTm8gdmFsaWQgdmF1bHQgcGF0aCByZXNvbHZlZCBmb3IgJHtnaXRodWJQYXRofWApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDEpIEhhbmRsZSBsb2NhbCByZW5hbWVzIGZpcnN0XG4gICAgY29uc3Qgb2xkVmF1bHQgPSB0aGlzLm9sZFBhdGhzQnlHaXRodWJbZ2l0aHViUGF0aF07XG4gICAgaWYgKG9sZFZhdWx0ICYmIG9sZFZhdWx0ICE9PSB2YXVsdFBhdGgpIHtcbiAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpKSB7XG4gICAgICAgIGNvbnN0IHN0cmF5ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHZhdWx0UGF0aCk7XG4gICAgICAgIGF3YWl0IHRoaXMuYmFja3VwRmlsZSh2YXVsdFBhdGgsIHN0cmF5KTtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZW1vdmUodmF1bHRQYXRoKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IG9sZEZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2xkVmF1bHQpO1xuICAgICAgaWYgKG9sZEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZW5hbWUob2xkRmlsZSwgdmF1bHRQYXRoKTtcbiAgICAgICAgY29uc3QgbmV3Q29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuICAgICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUodmF1bHRQYXRoLCBuZXdDb250ZW50LCBnaXRodWJQYXRoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDIpIEV4aXN0ZW5jZSwgYmFja3VwICYgc2tpcCBsb2dpY1xuICAgIGNvbnN0IGZpbGVFeGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpO1xuICAgIGlmIChmb3JjZSAmJiBmaWxlRXhpc3RzKSB7XG4gICAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHZhdWx0UGF0aCk7XG4gICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUodmF1bHRQYXRoLCBjdXJyZW50KTtcbiAgICB9XG4gICAgaWYgKCFmb3JjZSAmJiBmaWxlRXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2YXVsdFBhdGgpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDMpIEZldGNoIHZpYSBHaXRIdWIgQVBJLCBmYWxsYmFjayB0byByYXdcbiAgICBjb25zdCBhcGlVcmwgPSBlbmNvZGVVUkkoXG4gICAgICBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL2NvbnRlbnRzLyR7Z2l0aHViUGF0aH0/cmVmPW1haW5gXG4gICAgKTtcbiAgICB0cnkge1xuICAgICAgbGV0IHJlcyA9IGF3YWl0IGZldGNoKGFwaVVybCk7XG4gICAgICBpZiAocmVzLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgIGNvbnN0IHJhd1VybCA9IGVuY29kZVVSSShcbiAgICAgICAgICBgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvbWFpbi8ke2dpdGh1YlBhdGh9YFxuICAgICAgICApO1xuICAgICAgICByZXMgPSBhd2FpdCBmZXRjaChyYXdVcmwpO1xuICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBSYXcgZmV0Y2ggZmFpbGVkOiAke3Jlcy5zdGF0dXNUZXh0fWApO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICAgICAgaWYgKGZpbGVFeGlzdHMpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKHZhdWx0UGF0aCwgY29udGVudCwgZ2l0aHViUGF0aCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgR2l0SHViIEFQSSBlcnJvcjogJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgIGNvbnN0IHsgZG93bmxvYWRfdXJsIH0gPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgeyBkb3dubG9hZF91cmw6IHN0cmluZyB9O1xuICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IChhd2FpdCBmZXRjaChkb3dubG9hZF91cmwpKS50ZXh0KCk7XG4gICAgICBpZiAoZmlsZUV4aXN0cykge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUodmF1bHRQYXRoLCBjb250ZW50KTtcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGdpdGh1YlBhdGgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFx1Mjc0QyBGYWlsZWQgdG8gdXBkYXRlICR7dmF1bHRQYXRofWAsIGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQUkVWSUVXICsgUkVNT1RFLUJBU0VMSU5FICsgRElGRiBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBwcmV2aWV3VXBkYXRlc01vZGFsKCkge1xuXHQvLyBcdTIwMUNMb2FkaW5nXHUyMDI2XHUyMDFEIHBsYWNlaG9sZGVyIHdoaWxlIHN5bmNpbmdcblx0Y29uc3QgbG9hZGluZyA9IG5ldyAoY2xhc3MgZXh0ZW5kcyBNb2RhbCB7XG5cdCAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcblx0XHRzdXBlcihhcHApO1xuXHQgIH1cblx0ICBvbk9wZW4oKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLmNvbnRlbnRFbFxuXHRcdCAgLmNyZWF0ZURpdih7XG5cdFx0XHR0ZXh0OiAnXHVEODNEXHVERDA0IENoZWNraW5nIGZvciB1cGRhdGVzXHUyMDI2Jyxcblx0XHRcdGNsczogJ21vZC13YXJuaW5nJyxcblx0XHQgIH0pXG5cdFx0ICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdCAgfVxuXHR9KSh0aGlzLmFwcCk7XG4gIFxuXHRsb2FkaW5nLm9wZW4oKTtcblx0YXdhaXQgdGhpcy5zeW5jTWFuaWZlc3QoKTtcblx0YXdhaXQgdGhpcy5mZXRjaFJlbW90ZUJhc2VsaW5lKCk7XG5cdC8vIGJ1aWxkVXBkYXRlUHJldmlldygpIG5vdyByZXR1cm5zIG9ubHkgXHUyMDFDcmVhbFx1MjAxRCBkaWZmcyAobm8gc3RhbGUgZGVueVx1MjAxMGxpc3QpXG5cdGNvbnN0IGRpZmZzID0gYXdhaXQgdGhpcy5idWlsZFVwZGF0ZVByZXZpZXcoKTtcblx0bG9hZGluZy5jbG9zZSgpO1xuICBcblx0Ly8gU3BsaXQgb3V0IGRlbnlcdTIwMTBsaXN0ZWQgbGluZXMgdnMuIGV2ZXJ5dGhpbmcgZWxzZVxuXHRjb25zdCBkZW55TGlzdGVkTGluZXM6IHN0cmluZ1tdID0gW107XG5cdGNvbnN0IG5vcm1hbExpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBcblx0Zm9yIChjb25zdCBkIG9mIGRpZmZzKSB7XG5cdCAgaWYgKGQuc3RhcnRzV2l0aCgnXHUyNzRDIGRlbnlcdTIwMTBsaXN0ZWQnKSkge1xuXHRcdGRlbnlMaXN0ZWRMaW5lcy5wdXNoKGQpO1xuXHQgIH0gZWxzZSB7XG5cdFx0bm9ybWFsTGluZXMucHVzaChkKTtcblx0ICB9XG5cdH1cbiAgXG5cdC8vIE5vdyBjcmVhdGUgdGhlIG1vZGFsXG5cdGNvbnN0IG1vZGFsID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcblx0ICBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcblx0ICBub3JtYWw6IHN0cmluZ1tdO1xuXHQgIGRlbmllZDogc3RyaW5nW107XG4gIFxuXHQgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBub3JtYWw6IHN0cmluZ1tdLCBkZW5pZWQ6IHN0cmluZ1tdKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLm5vcm1hbCA9IG5vcm1hbDtcblx0XHR0aGlzLmRlbmllZCA9IGRlbmllZDtcblx0ICB9XG4gIFxuXHQgIG9uT3BlbigpIHtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHRcdHRoaXMudGl0bGVFbC5zZXRUZXh0KCdVcGRhdGUgUHJldmlldycpO1xuICBcblx0XHQvLyBJbnRybyBwYXJhZ3JhcGhcblx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcblx0XHQgIHRleHQ6ICdPbmx5IGZpbGVzIHdob3NlIGNvbnRlbnRzIGRpZmZlciBmcm9tIEdpdEh1YiB3aWxsIGJlIHVwZGF0ZWQ6Jyxcblx0XHR9KTtcbiAgXG5cdFx0Ly8gMSkgSWYgdGhlcmUgYXJlIGFueSBcdTIwMUNub3JtYWxcdTIwMUQgZGlmZnMsIHJlbmRlciB0aGVtIGluIGEgYnVsbGV0IGxpc3Rcblx0XHRpZiAodGhpcy5ub3JtYWwubGVuZ3RoKSB7XG5cdFx0ICBjb25zdCB1bCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCd1bCcpO1xuXHRcdCAgdGhpcy5ub3JtYWwuZm9yRWFjaCgobGluZSkgPT4ge1xuXHRcdFx0Y29uc3QgbGkgPSB1bC5jcmVhdGVFbCgnbGknLCB7IHRleHQ6IGxpbmUgfSk7XG5cdFx0XHQvLyBObyBzcGVjaWFsIHN0eWxpbmcgZm9yIHRoZXNlOyB0aGV5IHNob3cgdXAgbm9ybWFsbHkuXG5cdFx0ICB9KTtcblx0XHR9IGVsc2Uge1xuXHRcdCAgLy8gSWYgbm8gbm9ybWFsIGRpZmZzLCBzYXkgXHUyMDFDVXAgdG8gZGF0ZVx1MjAxRFxuXHRcdCAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdHRleHQ6ICdcdTI3MDUgRXZlcnl0aGluZyBpcyBhbHJlYWR5IHVwIHRvIGRhdGUhJyxcblx0XHRcdGNsczogJ21vZC1pbmZvJyxcblx0XHQgIH0pO1xuXHRcdH1cbiAgXG5cdFx0Ly8gMikgSWYgdGhlcmUgYXJlIGFueSBkZW55XHUyMDEwbGlzdGVkIGxpbmVzLCB0dWNrIHRoZW0gaW50byBhIDxkZXRhaWxzPiBibG9ja1xuXHRcdGlmICh0aGlzLmRlbmllZC5sZW5ndGgpIHtcblx0XHQgIGNvbnN0IGRlbnlEZXRhaWxzID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXHRcdCAgLy8gQWx3YXlzIHN0YXJ0IGNvbGxhcHNlZCBieSBkZWZhdWx0XG5cdFx0ICBkZW55RGV0YWlscy5vcGVuID0gZmFsc2U7XG4gIFxuXHRcdCAgLy8gU3VtbWFyeSBsaW5lOiBzaG93cyBcdTIwMUNEZW55XHUyMDEwTGlzdCBGaWxlcyAobilcdTIwMURcblx0XHQgIGNvbnN0IHN1bW1hcnkgPSBkZW55RGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXHRcdCAgT2JqZWN0LmFzc2lnbihzdW1tYXJ5LnN0eWxlLCB7XG5cdFx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdGNvbG9yOiAndmFyKC0tdGV4dC1mYWludCknLFxuXHRcdFx0YWxpZ25JdGVtczogJ2NlbnRlcicsXG5cdFx0XHRnYXA6ICcwLjVlbScsXG5cdFx0ICB9KTtcblx0XHQgIHN1bW1hcnkuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGBEZW55XHUyMDEwTGlzdCBGaWxlcyAoJHt0aGlzLmRlbmllZC5sZW5ndGh9KWAgfSk7XG4gIFxuXHRcdCAgLy8gUmlnaHRcdTIwMTBzaWRlIGljb24gcm90YXRpbmcgb24gZXhwYW5kL2NvbGxhcHNlXG5cdFx0ICBjb25zdCB0b2dnbGVJY29uID0gc3VtbWFyeS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdCAgT2JqZWN0LmFzc2lnbih0b2dnbGVJY29uLnN0eWxlLCB7XG5cdFx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuXHRcdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdFx0dHJhbnNmb3JtOiAncm90YXRlKDE4MGRlZyknLFxuXHRcdCAgfSk7XG5cdFx0ICBkZW55RGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRcdHRvZ2dsZUljb24uc3R5bGUudHJhbnNmb3JtID0gZGVueURldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHQgIH07XG4gIFxuXHRcdCAgLy8gQm9keSBvZiB0aGUgZGV0YWlsczogYSBzaW1wbGUgPHVsPiBjb250YWluaW5nIG9ubHkgZGVueVx1MjAxMGxpc3RlZCBsaW5lc1xuXHRcdCAgY29uc3QgZGVueUJvZHkgPSBkZW55RGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXHRcdCAgZGVueUJvZHkuc3R5bGUucGFkZGluZ0xlZnQgPSAnMWVtJztcblx0XHQgIGNvbnN0IGRlbnlVbCA9IGRlbnlCb2R5LmNyZWF0ZUVsKCd1bCcpO1xuXHRcdCAgdGhpcy5kZW5pZWQuZm9yRWFjaCgobGluZSkgPT4ge1xuXHRcdFx0Y29uc3QgbGkgPSBkZW55VWwuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBsaW5lIH0pO1xuXHRcdFx0bGkuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1mYWludCknO1xuXHRcdFx0bGkuc3R5bGUuZm9udFN0eWxlID0gJ2l0YWxpYyc7XG5cdFx0ICB9KTtcblx0XHR9XG4gIFxuXHRcdGNvbnN0IGJ1dHRvblJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcblx0XHRPYmplY3QuYXNzaWduKGJ1dHRvblJvdy5zdHlsZSwge1xuXHRcdCAgZGlzcGxheTogJ2ZsZXgnLFxuXHRcdCAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LWVuZCcsXG5cdFx0ICBtYXJnaW5Ub3A6ICcxLjI1ZW0nLCAgICAgICAvLyB0d2VhayBzcGFjaW5nIGFzIHlvdSBsaWtlXG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gXHUyMDFDQ29uZmlybSAmIFVwZGF0ZVx1MjAxRCBidXR0b25cblx0XHRjb25zdCBjb25maXJtQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0ICB0ZXh0OiAnQ29uZmlybSAmIFVwZGF0ZScsXG5cdFx0ICBjbHM6ICdtb2QtY3RhJyxcblx0XHR9KTtcblx0XHRjb25maXJtQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0ICBhd2FpdCAodGhpcyBhcyBhbnkpLnBsdWdpbi51cGRhdGVTZWxlY3RlZFRvb2xraXRDb250ZW50KCk7XG5cdFx0ICB0aGlzLmNsb3NlKCk7XG5cdFx0fTtcblx0XHRcblx0XHQvLyBcdTIwMUNDYW5jZWxcdTIwMUQgYnV0dG9uXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuXHRcdGNhbmNlbEJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuXHQgIH1cbiAgXG5cdCAgb25DbG9zZSgpIHtcblx0XHR0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXHQgIH1cblx0fSkodGhpcy5hcHAsIG5vcm1hbExpbmVzLCBkZW55TGlzdGVkTGluZXMpO1xuICBcblx0Ly8gQXR0YWNoIHBsdWdpbiBwb2ludGVyIGFuZCBvcGVuXG5cdChtb2RhbCBhcyBhbnkpLnBsdWdpbiA9IHRoaXM7XG5cdG1vZGFsLm9wZW4oKTtcbiAgfVxuICBcblxuICBhc3luYyBidWlsZFVwZGF0ZVByZXZpZXcoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuXHRjb25zdCBjaGFuZ2VzOiBzdHJpbmdbXSA9IFtdO1xuICBcblx0Ly8gMCkgQ29sbGVjdCBhbGwgYmxhY2tsaXN0ZWQgZm9sZGVycyAobWFuaWZlc3RLZXkgdmFsdWVzIHdoZXJlIGRvVXBkYXRlID09PSBmYWxzZSlcblx0Y29uc3QgZGVueUxpc3RlZEZvbGRlcnMgPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzXG5cdCAgLmZpbHRlcigoYykgPT4gYy5kb1VwZGF0ZSA9PT0gZmFsc2UpXG5cdCAgLm1hcCgoYykgPT4gYy5tYW5pZmVzdEtleSk7XG4gIFxuXHQvLyAxKSBEZW55XHUyMDEwbGlzdGVkIGVudHJpZXNcdTIwMTRidXQgb25seSBpZiB0aGV5XHUyMDE5ZCBhY3R1YWxseSBiZSBcdTIwMUNuZXdcdTIwMUQgKG1pc3NpbmcpIG9yIFx1MjAxQ291dFx1MjAxMG9mXHUyMDEwZGF0ZVx1MjAxRFxuXHRmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHQgIGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYucGF0aCk7XG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0Zi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHQgICk7XG5cdCAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0Ly8gUmVzb2x2ZSB0aGUgdmF1bHQgcGF0aCAoaGFuZGxlcyByZW1hcHBpbmcgaWYgcHJlc2VudClcblx0XHRjb25zdCB2cCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuICBcblx0XHQvLyBDaGVjayBpZiBmaWxlIGV4aXN0cyBsb2NhbGx5IGFuZCBpZiBpdFx1MjAxOXMgdXBcdTIwMTB0b1x1MjAxMGRhdGVcblx0XHRjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2cCk7XG5cdFx0Y29uc3QgdXBUb0RhdGUgPSBleGlzdHMgJiYgKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKHZwKSk7XG4gIFxuXHRcdC8vIE9ubHkgc2hvdyBhIGRlbnlcdTIwMTBsaXN0ZWQgZW50cnkgaWYgaXQgd291bGQgb3RoZXJ3aXNlIGJlIGNyZWF0ZWQgb3Igb3ZlcndyaXR0ZW5cblx0XHRpZiAoIWV4aXN0cyB8fCAhdXBUb0RhdGUpIHtcblx0XHQgIGNoYW5nZXMucHVzaChgXHUyNzRDIGRlbnlcdTIwMTBsaXN0ZWQgXHUyMDEzIHdpbGwgbm90IHVwZGF0ZTogJHt2cH1gKTtcblx0XHR9XG5cdCAgfVxuXHR9XG4gIFxuXHQvLyAyKSBGVUxMXHUyMDEwU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0XHUyMDE5cyBibGFja2xpc3RlZClcblx0aWYgKCF0aGlzLnNldHRpbmdzLmN1c3RvbWl6ZVVwZGF0ZXMpIHtcblx0ICBmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdFx0Ly8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHRcdGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0ICBjb250aW51ZTtcblx0XHR9XG4gIFxuXHRcdGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZi5wYXRoKTtcblx0XHRjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cblx0XHQgIGYucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcblx0XHQpO1xuXHRcdGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuICBcblx0XHRjb25zdCB2cCA9IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuXHRcdGxldCB0YWcgPSAnJztcblx0XHRpZiAodnAgIT09IGYucGF0aCkgdGFnID0gJyAocmVtYXBwZWQpJztcbiAgXG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuXHRcdGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpO1xuICBcblx0XHRpZiAoIWV4aXN0cykge1xuXHRcdCAgY2hhbmdlcy5wdXNoKGBcdUQ4M0RcdURDQzQgTmV3IGZpbGU6ICR7dnB9JHt0YWd9YCk7XG5cdFx0fSBlbHNlIGlmICghdXBUb0RhdGUpIHtcblx0XHQgIGNoYW5nZXMucHVzaChgXHVEODNEXHVERDAxIFdpbGwgdXBkYXRlOiAke3ZwfSR7dGFnfWApO1xuXHRcdH1cblx0ICB9XG4gIFxuXHQgIGZvciAoY29uc3QgZmxkIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG5cdFx0Ly8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZm9sZGVyXG5cdFx0aWYgKGZsZC5vcHRpb25hbCkge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuICBcblx0XHRjb25zdCBpc0RlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5pbmNsdWRlcyhmbGQucGF0aCk7XG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmxkLnBhdGgpO1xuXHRcdGlmICghZXhpc3RzICYmICFpc0RlbnlGb2xkZXIpIHtcblx0XHQgIGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0MxIE5ldyBmb2xkZXI6ICR7ZmxkLnBhdGh9YCk7XG5cdFx0fVxuXHQgIH1cbiAgXG5cdCAgcmV0dXJuIGNoYW5nZXMubGVuZ3RoID8gY2hhbmdlcyA6IFsnXHUyNzA1IEV2ZXJ5dGhpbmcgaXMgYWxyZWFkeSB1cCB0byBkYXRlISddO1xuXHR9XG4gIFxuXHQvLyAzKSBDVVNUT01cdTIwMTBTWU5DIG1vZGUgKHNraXAgYW55IGZpbGUvZm9sZGVyIHRoYXRcdTIwMTlzIGJsYWNrbGlzdGVkKVxuXHRmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHQgIGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYucGF0aCk7XG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0Zi5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHQgICk7XG5cdCAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCB2cCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChmLnBhdGgpO1xuXHQgIGxldCB0YWcgPSAnJztcblx0ICBpZiAodnAgIT09IGYucGF0aCkgdGFnID0gJyAocmVtYXBwZWQpJztcbiAgXG5cdCAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuXHQgIGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpO1xuICBcblx0ICBpZiAoIWV4aXN0cykge1xuXHRcdGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0M0IE5ldyBmaWxlOiAke3ZwfSR7dGFnfWApO1xuXHQgIH0gZWxzZSBpZiAoIXVwVG9EYXRlKSB7XG5cdFx0Y2hhbmdlcy5wdXNoKGBcdUQ4M0RcdUREMDEgV2lsbCB1cGRhdGU6ICR7dnB9JHt0YWd9YCk7XG5cdCAgfVxuXHR9XG4gIFxuXHRmb3IgKGNvbnN0IGZsZCBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuXHQgIGlmIChmbGQub3B0aW9uYWwpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG4gIFxuXHQgIGNvbnN0IGlzRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLmluY2x1ZGVzKGZsZC5wYXRoKTtcblx0ICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmbGQucGF0aCk7XG5cdCAgaWYgKCFleGlzdHMgJiYgIWlzRGVueUZvbGRlcikge1xuXHRcdGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0MxIE5ldyBmb2xkZXI6ICR7ZmxkLnBhdGh9YCk7XG5cdCAgfVxuXHR9XG4gIFxuXHQvLyAzYykgXHUyMDFDTW92ZWRcdTIwMUQgZGV0ZWN0aW9uIChza2lwIGJsYWNrbGlzdGVkKVxuXHRmb3IgKGNvbnN0IGYgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG5cdCAgLy8gXHUyNTAwXHUyNTAwIFNLSVAgYW55IG9wdGlvbmFsOnRydWUgZmlsZVxuXHQgIGlmIChmLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCBtYW5pZmVzdEtleSA9IGYua2V5O1xuXHQgIGNvbnN0IG1hbmlmZXN0UGF0aCA9IGYucGF0aDtcblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IG1hbmlmZXN0S2V5KTtcblx0ICBjb25zdCBwcmV2UGF0aCA9IHRoaXMub2xkUGF0aHNCeUdpdGh1YlttYW5pZmVzdFBhdGhdO1xuICBcblx0ICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cblx0XHRtYW5pZmVzdFBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdCAgKTtcblx0ICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cdCAgaWYgKGN1c3RvbSAmJiBjdXN0b20udmF1bHRQYXRoICYmIGN1c3RvbS52YXVsdFBhdGggIT09IG1hbmlmZXN0UGF0aCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblx0ICBpZiAoXG5cdFx0cHJldlBhdGggJiZcblx0XHRwcmV2UGF0aCAhPT0gbWFuaWZlc3RQYXRoICYmXG5cdFx0KCFjdXN0b20gfHwgY3VzdG9tLnZhdWx0UGF0aCA9PT0gbWFuaWZlc3RQYXRoKVxuXHQgICkge1xuXHRcdGNoYW5nZXMucHVzaChgXHUyN0ExXHVGRTBGIE1vdmVkOiAke3ByZXZQYXRofSBcdTIxOTIgJHttYW5pZmVzdFBhdGh9YCk7XG5cdCAgfVxuXHR9XG4gIFxuXHRyZXR1cm4gY2hhbmdlcy5sZW5ndGggPyBjaGFuZ2VzIDogWydcdTI3MDUgRXZlcnl0aGluZyBpcyBhbHJlYWR5IHVwIHRvIGRhdGUhJ107XG4gIH1cbiAgXG4gIFxuICBcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFZFUlNJT04tQ0hFQ0sgLyBVUERBVEUgRkxPVyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBjaGVja0ZvclVwZGF0ZXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgaXNOZXdlclZlcnNpb24gPSAocmVtb3RlOiBzdHJpbmcsIGxvY2FsOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICAgIGNvbnN0IHBhID0gcmVtb3RlXG4gICAgICAgIC5yZXBsYWNlKC9edi8sICcnKVxuICAgICAgICAuc3BsaXQoJy4nKVxuICAgICAgICAubWFwKChuKSA9PiBwYXJzZUludChuLCAxMCkgfHwgMCk7XG4gICAgICBjb25zdCBwYiA9IGxvY2FsXG4gICAgICAgIC5yZXBsYWNlKC9edi8sICcnKVxuICAgICAgICAuc3BsaXQoJy4nKVxuICAgICAgICAubWFwKChuKSA9PiBwYXJzZUludChuLCAxMCkgfHwgMCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGgubWF4KHBhLmxlbmd0aCwgcGIubGVuZ3RoKTsgaSsrKSB7XG4gICAgICAgIGlmICgocGFbaV0gfHwgMCkgPiAocGJbaV0gfHwgMCkpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoKHBhW2ldIHx8IDApIDwgKHBiW2ldIHx8IDApKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIGNvbnN0IHRvb2xraXRQYXRoID0gJy52ZXJzaW9uLmpzb24nO1xuICAgIGNvbnN0IHRvb2xraXRVcmwgPVxuICAgICAgJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvdnZ1bmRlcmxvcmUtdG9vbGtpdC1mdWxsL21haW4vLnZlcnNpb24uanNvbic7XG4gICAgY29uc3QgcGx1Z2luVXJsID1cbiAgICAgICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL3Z2dW5kZXJsb3JlLXRvb2xraXQtcGx1Z2luL21haW4vdmVyc2lvbi5qc29uJztcbiAgICBjb25zdCBjaGFuZ2Vsb2dVcmwgPVxuICAgICAgJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vUkVBRE1FLm1kJztcblxuICAgIC8vIDEpIFJlYWQgbG9jYWwgdG9vbGtpdCB2ZXJzaW9uXG4gICAgbGV0IGxvY2FsVEsgPSAnMC4wLjAnO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHRvb2xraXRQYXRoKTtcbiAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgbG9jYWxUSyA9IGpzb24udmVyc2lvbiB8fCBsb2NhbFRLO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byByZWFkIGxvY2FsIHRvb2xraXQgdmVyc2lvbjonLCBlcnIpO1xuICAgIH1cblxuICAgIC8vIDIpIEZldGNoIHJlbW90ZSB0b29sa2l0IHZlcnNpb24gJiBkZWZhdWx0c1xuICAgIGxldCByZW1vdGVUSyA9ICcwLjAuMCc7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHRvb2xraXRVcmwpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICByZW1vdGVUSyA9IGRhdGEudmVyc2lvbiB8fCByZW1vdGVUSztcblxuICAgICAgdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiA9IHJlbW90ZVRLO1xuICAgICAgaWYgKGRhdGEuZGVmYXVsdFBhdGhzKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MubGF0ZXN0RGVmYXVsdHMgPSBkYXRhLmRlZmF1bHRQYXRocztcbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0dGluZ3MubGFzdENoZWNrZWQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byBmZXRjaCByZW1vdGUgdG9vbGtpdCB2ZXJzaW9uOicsIGVycik7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coeyBsb2NhbFRLLCByZW1vdGVUSyB9KTtcbiAgICBpZiAoaXNOZXdlclZlcnNpb24ocmVtb3RlVEssIGxvY2FsVEspKSB7XG4gICAgICBuZXcgTm90aWNlKGBcdTI2QTBcdUZFMEYgVG9vbGtpdCB1cGRhdGUgYXZhaWxhYmxlISBJbnN0YWxsZWQ6IHYke2xvY2FsVEt9LCBMYXRlc3Q6IHYke3JlbW90ZVRLfWApO1xuICAgICAgYXdhaXQgdGhpcy5mZXRjaFJlbW90ZUJhc2VsaW5lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBUb29sa2l0IGlzIHVwIHRvIGRhdGUgKHYke2xvY2FsVEt9KWApO1xuICAgIH1cblxuICAgIC8vIDQpIFJlYWQgbG9jYWwgcGx1Z2luIHZlcnNpb25cbiAgICBjb25zdCBsb2NhbFBMID0gdGhpcy5tYW5pZmVzdC52ZXJzaW9uO1xuXG4gICAgLy8gNSkgRmV0Y2ggcmVtb3RlIHBsdWdpbiB2ZXJzaW9uICYgY29tcGFyZVxuICAgIGxldCByZW1vdGVQTCA9IGxvY2FsUEw7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHBsdWdpblVybCk7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIHJlbW90ZVBMID0gZGF0YS52ZXJzaW9uIHx8IHJlbW90ZVBMO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byBmZXRjaCByZW1vdGUgcGx1Z2luIHZlcnNpb246JywgZXJyKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyh7IGxvY2FsUEwsIHJlbW90ZVBMIH0pO1xuICAgIGlmIChpc05ld2VyVmVyc2lvbihyZW1vdGVQTCwgbG9jYWxQTCkpIHtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjY5OVx1RkUwRiBQbHVnaW4gdXBkYXRlIGF2YWlsYWJsZSEgSW5zdGFsbGVkOiB2JHtsb2NhbFBMfSwgTGF0ZXN0OiB2JHtyZW1vdGVQTH1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3IE5vdGljZShgXHUyNzA1IFBsdWdpbiBpcyB1cCB0byBkYXRlICh2JHtsb2NhbFBMfSlgKTtcbiAgICB9XG5cbiAgICAvLyA2KSBGZXRjaCBjaGFuZ2Vsb2cgZm9yIFVJIGRpc3BsYXlcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2hhbmdlbG9nUmVzID0gYXdhaXQgZmV0Y2goY2hhbmdlbG9nVXJsKTtcbiAgICAgIHRoaXMuY2hhbmdlbG9nID0gYXdhaXQgY2hhbmdlbG9nUmVzLnRleHQoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gZmV0Y2ggY2hhbmdlbG9nOicsIGVycik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRjb25zdCBsb2FkZWQgPSAoYXdhaXQgdGhpcy5sb2FkRGF0YSgpKSBhcyBQYXJ0aWFsPFRvb2xraXRTZXR0aW5ncz47XG5cdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBsb2FkZWQpO1xuICBcblx0Ly8gQmFja2ZpbGwgb3VyIG5ldyBmaWVsZHMgaWYgdGhlIHN0b3JlZCBkYXRhIHdhcyBtaXNzaW5nIHRoZW1cblx0aWYgKHR5cGVvZiB0aGlzLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtICE9PSBcInN0cmluZ1wiKSB7XG5cdCAgdGhpcy5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSA9IFwiXCI7XG5cdH1cblx0aWYgKCFBcnJheS5pc0FycmF5KHRoaXMuc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZSkpIHtcblx0ICB0aGlzLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UgPSBbXTtcblx0fVxuICBcblx0dGhpcy5maWxlQ2FjaGVNYW5hZ2VyID0gbmV3IFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyKFxuXHQgIHRoaXMuYXBwLnZhdWx0LFxuXHQgIGxvYWRlZD8uZmlsZUNhY2hlID8/IHt9LFxuXHQgIGFzeW5jICgpID0+IGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKClcblx0KTtcblxuXHQvLyBHaXZlIHZhdWx0IGEgbW9tZW50IHRvIHNldHRsZSwgdGhlbiBjaGVjayBmb3IgbWFya2VyXG5cdHNldFRpbWVvdXQoKCkgPT4gdGhpcy5jaGVja01hcmtlckZpbGUoKSwgNTAwKTtcbiAgfSBcblxuICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh7XG4gICAgICAuLi50aGlzLnNldHRpbmdzLFxuICAgICAgZmlsZUNhY2hlOiB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuZ2V0Q2FjaGUoKSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldExvY2FsVG9vbGtpdFZlcnNpb24oKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJy52ZXJzaW9uLmpzb24nKTtcbiAgICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgcmV0dXJuIGpzb24udmVyc2lvbiB8fCBudWxsO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byByZWFkIC52ZXJzaW9uLmpzb246JywgZXJyKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUZ1bGxUb29sa2l0UmVwbygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBleGNsdWRlZCA9IFtcbiAgICAgICcub2JzaWRpYW4nLFxuICAgICAgJy5naXRpZ25vcmUnLFxuICAgICAgJy5naXRhdHRyaWJ1dGVzJyxcbiAgICAgICcuRFNfU3RvcmUnLFxuICAgICAgJ3BsdWdpbnMnLFxuICAgICAgJ0NvbXBlbmRpdW0nLFxuICAgICAgJ1JFQURNRS5tZCcsXG4gICAgICAnLnZlcnNpb24uanNvbicsXG4gICAgICAnLmdpdGh1YidcbiAgICBdO1xuXG4gICAgY29uc3QgZmV0Y2hSZXBvUm9vdCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFwaVVybCA9XG4gICAgICAgICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvY29udGVudHMvJztcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBpVXJsKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIHJlcG8gcm9vdGApO1xuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgZmV0Y2hSZXBvUm9vdCgpO1xuICAgICAgLy8gZmlsdGVyIG91dCBleGNsdWRlZCB0b3AtbGV2ZWwgaXRlbXNcbiAgICAgIGNvbnN0IGZpbHRlcmVkID0gY29udGVudHMuZmlsdGVyKFxuICAgICAgICAoaXRlbTogYW55KSA9PlxuICAgICAgICAgICFleGNsdWRlZC5zb21lKFxuICAgICAgICAgICAgKGV4KSA9PlxuICAgICAgICAgICAgICBpdGVtLnBhdGggPT09IGV4IHx8XG4gICAgICAgICAgICAgIGl0ZW0ucGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKVxuICAgICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIC8vIFNvcnQgc28gXHUyMDFDdHJlZVx1MjAxRCAoZm9sZGVycykgY29tZSBiZWZvcmUgXHUyMDFDYmxvYlx1MjAxRCAoZmlsZXMpXG4gICAgICBmaWx0ZXJlZC5zb3J0KChhOiBhbnksIGI6IGFueSkgPT4gKGEudHlwZSA9PT0gYi50eXBlID8gMCA6IGEudHlwZSA9PT0gJ3RyZWUnID8gLTEgOiAxKSk7XG5cbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBmaWx0ZXJlZCkge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZGlyJykge1xuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRm9sZGVyRnJvbUdpdEh1YihpdGVtLnBhdGgsIGl0ZW0ucGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChpdGVtLmRvd25sb2FkX3VybCk7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGl0ZW0ucGF0aDtcbiAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQgIT09IGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZShmaWxlUGF0aCwgY29udGVudCwgaXRlbS5wYXRoLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgY29uc3QgbWFya2VyUGF0aCA9ICcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJztcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlclBhdGgpKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobWFya2VyUGF0aCwgJycpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldHRpbmdzLm5lZWRzSW5zdGFsbCA9IGZhbHNlO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzVGFiKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKSB7XG4gICAgICAgIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG4gICAgICB9XG5cbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBWVnVuZGVybG9yZSBUb29sa2l0IHN1Y2Nlc3NmdWxseSBpbnN0YWxsZWQhJyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgdXBkYXRlRnVsbFRvb2xraXRSZXBvKCkgZXJyb3I6JywgZXJyKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBGYWlsZWQgdG8gaW5zdGFsbCB0b29sa2l0LiBTZWUgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVTZWxlY3RlZFRvb2xraXRDb250ZW50KCkge1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmF1dG9CYWNrdXBCZWZvcmVVcGRhdGUpIHtcbiAgICAgIGNvbnN0IGZvbGRlciA9IGF3YWl0IHRoaXMuYmFja3VwTWFuYWdlci5iYWNrdXBWYXVsdE1pcnJvcigncHJlLXVwZGF0ZScpO1xuICAgICAgbmV3IE5vdGljZShgVmF1bHQgbWlycm9yIGJhY2t1cCBjcmVhdGVkIGF0OiAke2ZvbGRlcn1gKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubGF0ZXN0RGVmYXVsdHMpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBHaXRIdWIgZGVmYXVsdHMgbm90IGxvYWRlZCB5ZXQuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYWxsTWFuaWZlc3RGaWxlcyA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5tYXAoKGYpID0+IGYucGF0aCk7XG4gICAgY29uc3QgZmlsZU92ZXJyaWRlcyA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMubWFwKChjKSA9PiBbYy5tYW5pZmVzdEtleSwgY10pXG4gICAgKTtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKGNvbnN0IGdoUGF0aCBvZiBhbGxNYW5pZmVzdEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlID0gZmlsZU92ZXJyaWRlc1tnaFBhdGhdO1xuICAgICAgICBpZiAob3ZlcnJpZGU/LmRvVXBkYXRlID09PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBcdTIzRURcdUZFMEYgU2tpcHBpbmcgZGVueS1saXN0ZWQ6ICR7Z2hQYXRofWApO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmF1bHRQYXRoID0gdGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzXG4gICAgICAgICAgPyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZ2hQYXRoKVxuICAgICAgICAgIDogZ2hQYXRoO1xuXG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoKGYpID0+IGYucGF0aCA9PT0gZ2hQYXRoKTtcbiAgICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRW50cnlGcm9tTWFuaWZlc3QoZW50cnksIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBmb2xkZXIgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZm9sZGVyLnBhdGgpKSkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXIucGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVWZXJzaW9uRmlsZSgpO1xuICAgICAgdGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uID0gdGhpcy5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiE7XG4gICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFRvb2xraXQgY29udGVudCB1cGRhdGVkLicpO1xuXG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzVGFiLnVwZGF0ZVZlcnNpb25EaXNwbGF5KCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgVXBkYXRlIGZhaWxlZC4gVmVyc2lvbiBub3QgdXBkYXRlZC4nLCBlcnIpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIFVwZGF0ZSBmYWlsZWQuIFNlZSBjb25zb2xlIGZvciBkZXRhaWxzLiBWZXJzaW9uIGZpbGUgTk9UIGNoYW5nZWQuJyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCkge1xuICAgICAgdGhpcy5lbmFibGVIaWdobGlnaHQoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVGb2xkZXJGcm9tR2l0SHViKGdpdGh1YkZvbGRlclBhdGg6IHN0cmluZywgdmF1bHRGb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgICBjb25zdCBleGNsdWRlZCA9IFtcbiAgICAgICcub2JzaWRpYW4nLFxuICAgICAgJy5naXRpZ25vcmUnLFxuICAgICAgJy5naXRhdHRyaWJ1dGVzJyxcbiAgICAgICcuRFNfU3RvcmUnLFxuICAgICAgJ3BsdWdpbnMnLFxuICAgICAgJ0NvbXBlbmRpdW0nLFxuICAgICAgJ1JFQURNRS5tZCcsXG4gICAgICAnLnZlcnNpb24uanNvbicsXG4gICAgICAnLmdpdGh1YidcbiAgICBdO1xuICAgIGlmIChleGNsdWRlZC5zb21lKChleCkgPT4gZ2l0aHViRm9sZGVyUGF0aCA9PT0gZXggfHwgZ2l0aHViRm9sZGVyUGF0aC5zdGFydHNXaXRoKGAke2V4fS9gKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYXBpVXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9jb250ZW50cy8ke2dpdGh1YkZvbGRlclBhdGh9YDtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggZm9sZGVyOiAke2dpdGh1YkZvbGRlclBhdGh9YCk7XG4gICAgICBjb25zdCBmaWxlcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0Rm9sZGVyUGF0aCkpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcih2YXVsdEZvbGRlclBhdGgpO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgIGlmIChleGNsdWRlZC5zb21lKChleCkgPT4gZmlsZS5wYXRoID09PSBleCB8fCBmaWxlLnBhdGguc3RhcnRzV2l0aChgJHtleH0vYCkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt2YXVsdEZvbGRlclBhdGh9LyR7ZmlsZS5uYW1lfWA7XG4gICAgICAgIGlmIChmaWxlLnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIGNvbnN0IGZpbGVSZXNwb25zZSA9IGF3YWl0IGZldGNoKGZpbGUuZG93bmxvYWRfdXJsKTtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZmlsZVJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlUGF0aCk7XG4gICAgICAgICAgaWYgKGV4aXN0cykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoY3VycmVudCAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUoZmlsZVBhdGgsIGN1cnJlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpKSAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbGVQYXRoLCBjb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKGZpbGVQYXRoLCBjb250ZW50LCBmaWxlLnBhdGgsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIGlmIChmaWxlLnR5cGUgPT09ICdkaXInKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVGb2xkZXJGcm9tR2l0SHViKGZpbGUucGF0aCwgYCR7dmF1bHRGb2xkZXJQYXRofS8ke2ZpbGUubmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBGb2xkZXIgc3luY2VkOiAke3ZhdWx0Rm9sZGVyUGF0aH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIEZhaWxlZCB0byBzeW5jIGZvbGRlcjogJHt2YXVsdEZvbGRlclBhdGh9YCwgZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShgXHUyNzRDIEZhaWxlZCB0byB1cGRhdGUgZm9sZGVyOiAke3ZhdWx0Rm9sZGVyUGF0aH1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZWJ1aWxkRmlsZUNhY2hlKCkge1xuICAgIGNvbnN0IGNhY2hlID0gdGhpcy5maWxlQ2FjaGVNYW5hZ2VyO1xuICAgIGNvbnN0IHRhc2tzOiBQcm9taXNlPHZvaWQ+W10gPSBbXTtcblxuICAgIC8vIDEpIEluZGV4IGV4YWN0bHkgdGhlIGZpbGVzIGxpc3RlZCBpbiB0aGUgbWFuaWZlc3RcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgY29uc3QgdmF1bHRQYXRoID0gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGVudHJ5LnBhdGgpO1xuICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0UGF0aCkpIHtcbiAgICAgICAgdGFza3MucHVzaCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodmF1bHRQYXRoKTtcbiAgICAgICAgICBhd2FpdCBjYWNoZS51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGVudHJ5LnBhdGgsIGZhbHNlKTtcbiAgICAgICAgfSkoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gMikgSW5kZXggYW55IG1hcmtkb3duIGNoaWxkcmVuIHVuZGVyIG1hbmlmZXN0IGZvbGRlcnNcbiAgICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICBjb25zdCBmb2xkZXJQYXRoID0gZm9sZGVyRW50cnkucGF0aDtcbiAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgIFZhdWx0LnJlY3Vyc2VDaGlsZHJlbihmb2xkZXIsIChmaWxlKSA9PiB7XG4gICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnBhdGg7XG4gICAgICAgICAgICB0YXNrcy5wdXNoKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgICAgICAgICAgICBhd2FpdCBjYWNoZS51cGRhdGVDYWNoZShmaWxlUGF0aCwgY29udGVudCwgZmlsZVBhdGgsIGZhbHNlKTtcbiAgICAgICAgICAgIH0pKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYmF0Y2hTaXplID0gMTA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXNrcy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCh0YXNrcy5zbGljZShpLCBpICsgYmF0Y2hTaXplKSk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgfVxuXG4gIGFzeW5jIHNob3dJbmRleGluZ01vZGFsKCkge1xuICAgIGNvbnN0IG1vZGFsID0gbmV3IChjbGFzcyBleHRlbmRzIE1vZGFsIHtcbiAgICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICB9XG4gICAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCgnXHVEODNEXHVERDA0IEluZGV4aW5nIFRvb2xraXQgRmlsZXMuLi4nKTtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgdGV4dDogJ0luZGV4aW5nIGFuZCBjYWNoaW5nIHlvdXIgVlZ1bmRlcmxvcmUgVmF1bHQgZm9yIGZhc3RlciB1cGRhdGVzIGFuZCBzYWZlciBzeW5jaW5nLidcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSkodGhpcy5hcHApO1xuXG4gICAgbW9kYWwub3BlbigpO1xuICAgIGF3YWl0IHRoaXMucmVidWlsZEZpbGVDYWNoZSgpO1xuICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgbmV3IE5vdGljZSgnXHUyNzA1IFZWdW5kZXJsb3JlIGNhY2hpbmcgY29tcGxldGUuJyk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVWZXJzaW9uRmlsZSgpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24pIHtcbiAgICAgIGNvbnNvbGUud2FybignTm8gbGF0ZXN0IHZlcnNpb24gZm91bmQ7IHNraXBwaW5nIHZlcnNpb24gZmlsZSB1cGRhdGUuJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHZlcnNpb25QYXRoID0gJy52ZXJzaW9uLmpzb24nO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gfSwgbnVsbCwgMik7XG4gICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmVyc2lvblBhdGgpO1xuICAgIGlmIChleGlzdHMpIHtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUodmVyc2lvblBhdGgsIGNvbnRlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUodmVyc2lvblBhdGgsIGNvbnRlbnQpO1xuICAgIH1cbiAgfVxuXG4gICAgLyoqIG1haW4udHMgKiovXG5cbiAgLyoqIFxuICAgKiBJbnN0YWxsIHRoZSBzZWxlY3RlZCBjb21wZW5kaXVtIGFuZCB6ZXJvIG9yIG1vcmUgcmVmZXJlbmNlIGVkaXRpb25zLlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGluc3RhbGxGdWxsVG9vbGtpdChcbiAgICBvcHRzOiB7IGNvbXBlbmRpdW06IHN0cmluZzsgcmVmZXJlbmNlczogc3RyaW5nW10gfSA9IHsgY29tcGVuZGl1bTogXCJcIiwgcmVmZXJlbmNlczogW10gfVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IGNvbXBlbmRpdW0sIHJlZmVyZW5jZXMgfSA9IG9wdHM7XG4gICAgaWYgKCFjb21wZW5kaXVtKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjb21wZW5kaXVtIGVkaXRpb24gc2VsZWN0ZWRcIik7XG4gICAgfVxuXG4gIC8vIDEpIFNob3cgdGhlIFx1MjAxQ0luc3RhbGxpbmdcdTIwMjZcdTIwMUQgc3Bpbm5lclxuICBjb25zdCBwbGFjZWhvbGRlciA9IG5ldyBJbnN0YWxsaW5nTW9kYWwodGhpcy5hcHApO1xuICBwbGFjZWhvbGRlci5vcGVuKCk7XG5cbiAgbGV0IGluc3RhbGxTdWNjZWVkZWQgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICAvLyAyKSBTdGF0aWMgY29weSBvZiBldmVyeXRoaW5nIGluIHRoZSByZXBvIEVYQ0VQVCBhbnkgQ29tcGVuZGl1bS8qXG4gICAgY29uc3QgdHJlZUFwaSA9XG4gICAgICBcImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9naXQvdHJlZXMvbWFpbj9yZWN1cnNpdmU9MVwiO1xuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaCh0cmVlQXBpKTtcbiAgICBpZiAoIXJlc3Aub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxpc3QgcmVwbyB0cmVlOiAke3Jlc3Auc3RhdHVzVGV4dH1gKTtcbiAgICB9XG4gICAgY29uc3QganNvbjogYW55ID0gYXdhaXQgcmVzcC5qc29uKCk7XG4gICAgY29uc3QgaXRlbXMgPSBBcnJheS5pc0FycmF5KGpzb24udHJlZSkgPyBqc29uLnRyZWUgOiBbXTtcblxuICAgIC8vIFVzZSB5b3VyIGV4Y2x1ZGVkUGF0aHMgKHdoaWNoIGFscmVhZHkgY29udGFpbnMgXCJDb21wZW5kaXVtXCIpXG4gICAgY29uc3Qgc3RhdGljRW50cmllcyA9IChpdGVtcyBhcyBBcnJheTx7IHBhdGg6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+KVxuICAgICAgLmZpbHRlcigoaXRlbSkgPT5cbiAgICAgICAgIXRoaXMuZXhjbHVkZWRQYXRocy5zb21lKGV4ID0+XG4gICAgICAgICAgaXRlbS5wYXRoID09PSBleCB8fCBpdGVtLnBhdGguc3RhcnRzV2l0aChgJHtleH0vYClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IChhLnR5cGUgPT09IGIudHlwZSA/IDAgOiBhLnR5cGUgPT09IFwidHJlZVwiID8gLTEgOiAxKSk7XG5cbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHN0YXRpY0VudHJpZXMpIHtcbiAgICAgIGlmIChlbnRyeS50eXBlID09PSBcInRyZWVcIikge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZW50cnkucGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJhd1VybCA9IFxuICAgICAgICAgIGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGVudHJ5LnBhdGgpfWA7XG4gICAgICAgIGNvbnN0IGZpbGVSZXNwID0gYXdhaXQgZmV0Y2gocmF3VXJsKTtcbiAgICAgICAgaWYgKCFmaWxlUmVzcC5vaykgY29udGludWU7XG4gICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBmaWxlUmVzcC50ZXh0KCk7XG4gICAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkge1xuICAgICAgICAgIGNvbnN0IG9sZCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChlbnRyeS5wYXRoKTtcbiAgICAgICAgICBpZiAob2xkICE9PSB0ZXh0KSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGVudHJ5LnBhdGgsIHRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZW50cnkucGF0aCwgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAgIHRoaXMuc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0gPSBjb21wZW5kaXVtO1xuICAgICAgY29uc3QgcGlja2VkUmVmcyA9IHJlZmVyZW5jZXMubGVuZ3RoID4gMFxuICAgICAgICAgID8gcmVmZXJlbmNlc1xuICAgICAgICAgIDogdGhpcy5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlO1xuICAgICAgICB0aGlzLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UgPSBwaWNrZWRSZWZzO1xuXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgICAgLy8gbm93IHJ1biB0aGUgaW1wb3J0IGpvYnMgYWdhaW5zdCB0aGUgY29tcGVuZGl1bSArIHRoZSBhY3R1YWwgcmVmc1xuICAgICAgICBjb25zdCBqb2JzID0gW1xuICAgICAgICAgIGltcG9ydFJ1bGVzZXREYXRhKHsgYXBwOiB0aGlzLmFwcCwgZWRpdGlvbktleTogY29tcGVuZGl1bSwgdGFyZ2V0UGF0aDogXCJDb21wZW5kaXVtXCIgfSksXG4gICAgICAgICAgIC4uLnBpY2tlZFJlZnMubWFwKHJlZktleSA9PiB7XG4gICAgY29uc3QgZGlzcGxheU5hbWUgPSBnZXRSdWxlc2V0RGlzcGxheU5hbWUocmVmS2V5KTtcbiAgICByZXR1cm4gaW1wb3J0UnVsZXNldERhdGEoe1xuICAgICAgYXBwOiAgICAgICAgdGhpcy5hcHAsXG4gICAgICBlZGl0aW9uS2V5OiByZWZLZXksXG4gICAgICB0YXJnZXRQYXRoOiBgUmVzb3VyY2VzL1J1bGVzZXRzLyR7ZGlzcGxheU5hbWV9YCx9KVxuICAgICAgICB9KVxuICAgICAgICBdO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChqb2JzKTtcblxuICAgIC8vIDMpIEtpY2sgb2ZmIHlvdXIgSlNPTlx1MjE5Mk1EIHBhcnNlcnMgaW4gcGFyYWxsZWxcbiAgICBjb25zdCBwYXJzZUpvYnMgPSBbXG4gICAgICBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICAgIGFwcDogdGhpcy5hcHAsXG4gICAgICAgIGVkaXRpb25LZXk6IGNvbXBlbmRpdW0sXG4gICAgICAgIHRhcmdldFBhdGg6IGBDb21wZW5kaXVtYCxcbiAgICAgIH0pLFxuICAuLi5yZWZlcmVuY2VzLm1hcChyZWZLZXkgPT4ge1xuICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gZ2V0UnVsZXNldERpc3BsYXlOYW1lKHJlZktleSk7XG4gICAgcmV0dXJuIGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICAgIGFwcDogICAgICAgIHRoaXMuYXBwLFxuICAgICAgZWRpdGlvbktleTogcmVmS2V5LFxuICAgICAgdGFyZ2V0UGF0aDogYFJlc291cmNlcy9SdWxlc2V0cy8ke2Rpc3BsYXlOYW1lfWAsXG4gICAgICAgIH0pXG4gICAgICB9KSxcbiAgICBdO1xuICAgIC8vIHRoaXMgd29uXHUyMDE5dCByZXNvbHZlIHVudGlsIF9hbGxfIHBhcnNlcnMgaGF2ZSBmaW5pc2hlZCB3cml0aW5nIHRoZWlyIE1EIGZpbGVzXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwocGFyc2VKb2JzKTtcblxuICAgIC8vIDQpIFBvc3QtaW5zdGFsbCBob3VzZWtlZXBpbmdcbiAgICBjb25zdCBtYXJrZXIgPSBcIi52dnVuZGVybG9yZV9pbnN0YWxsZWRcIjtcbiAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhtYXJrZXIpKSkge1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG1hcmtlciwgXCJcIik7XG4gICAgfVxuICAgIHRoaXMuc2V0dGluZ3MubmVlZHNJbnN0YWxsICAgICA9IGZhbHNlO1xuICAgIHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCA9IHRydWU7XG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICB0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuXG4gICAgaW5zdGFsbFN1Y2NlZWRlZCA9IHRydWU7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJcdTI3NEMgaW5zdGFsbEZ1bGxUb29sa2l0KClcIiwgZXJyKTtcbiAgfSBmaW5hbGx5IHtcbiAgICAvLyBvbmx5IG5vdyBjbG9zZSB0aGUgc3Bpbm5lciAmIHJlZHJhdyB0aGUgVUlcbiAgICBwbGFjZWhvbGRlci5jbG9zZSgpO1xuICAgIGlmICh0aGlzLnNldHRpbmdzVGFiKSB0aGlzLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcbiAgICBuZXcgTm90aWNlKFxuICAgICAgaW5zdGFsbFN1Y2NlZWRlZFxuICAgICAgICA/IFwiXHUyNzA1IFZWdW5kZXJsb3JlIFRvb2xraXQgc3VjY2Vzc2Z1bGx5IGluc3RhbGxlZCFcIlxuICAgICAgICA6IFwiXHUyNzRDIEZhaWxlZCB0byBpbnN0YWxsIHRvb2xraXQuIFNlZSBjb25zb2xlIGZvciBkZXRhaWxzLlwiXG4gICAgKTtcbiAgfVxufVxuXG4vLyAqIFJlLXBhcnNlIGFsbCBnYW1lc2V0IGRhdGEgKHJ1bGVzZXQgY29tcGVuZGl1bSArIHJlZmVyZW5jZSBzZXRzKVxuYXN5bmMgcmVmcmVzaEdhbWVTZXREYXRhKCk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IHJ1bGVzZXRDb21wZW5kaXVtLCBydWxlc2V0UmVmZXJlbmNlIH0gPSB0aGlzLnNldHRpbmdzO1xuXG4gIGlmICghcnVsZXNldENvbXBlbmRpdW0gJiYgcnVsZXNldFJlZmVyZW5jZS5sZW5ndGggPT09IDApIHtcbiAgICBuZXcgTm90aWNlKFwiXHUyNkEwXHVGRTBGIE5vIGdhbWVzZXQga2V5cyBzZXQ7IG5vdGhpbmcgdG8gcmVmcmVzaC5cIik7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgam9iczogUHJvbWlzZTx1bmtub3duPltdID0gW107XG4gIGlmIChydWxlc2V0Q29tcGVuZGl1bSkge1xuICAgIGpvYnMucHVzaChpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICBhcHA6IHRoaXMuYXBwLFxuICAgICAgZWRpdGlvbktleTogcnVsZXNldENvbXBlbmRpdW0sXG4gICAgICB0YXJnZXRQYXRoOiBcIkNvbXBlbmRpdW1cIixcbiAgICB9KSk7XG4gIH1cbmZvciAoY29uc3QgcmVmIG9mIHJ1bGVzZXRSZWZlcmVuY2UpIHtcbiAgY29uc3QgZGlzcGxheU5hbWUgPSBnZXRSdWxlc2V0RGlzcGxheU5hbWUocmVmKTtcbiAgam9icy5wdXNoKGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICBhcHA6ICAgICAgICB0aGlzLmFwcCxcbiAgICBlZGl0aW9uS2V5OiByZWYsXG4gICAgdGFyZ2V0UGF0aDogYFJlc291cmNlcy9SdWxlc2V0cy8ke2Rpc3BsYXlOYW1lfWAsXG4gIH0pKTtcbn1cblxuICBhd2FpdCBQcm9taXNlLmFsbChqb2JzKTtcbiAgbmV3IE5vdGljZShcIlx1MjcwNSBHYW1lIFNldCBEYXRhIHJlZnJlc2hlZC5cIik7XG59XG5cblxuXG59XG5leHBvcnQgeyBJbnN0YWxsaW5nTW9kYWwgfTsiLCAiaW1wb3J0IHtcblx0UGx1Z2luU2V0dGluZ1RhYixcblx0U2V0dGluZyxcblx0QXBwLFxuXHRURmlsZSxcblx0VEZvbGRlcixcblx0QWJzdHJhY3RJbnB1dFN1Z2dlc3QsXG5cdHNldEljb24sXG5cdE1vZGFsLFxuXHRNYXJrZG93blJlbmRlcmVyLFxuXHRDb21wb25lbnQsXG5cdE5vdGljZSxcblx0VGV4dENvbXBvbmVudCxcblx0VG9nZ2xlQ29tcG9uZW50LFxuXHRCdXR0b25Db21wb25lbnQsXG5cdERyb3Bkb3duQ29tcG9uZW50LFxuXHRTZWFyY2hDb21wb25lbnRcbn0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBDb25maXJtRnJlc2hJbnN0YWxsTW9kYWwgfSBmcm9tICcuL2ZpcnN0aW5zdGFsbGNvbmZpcm0nO1xuaW1wb3J0IHsgc2hvd0N1c3RvbUluc3RhbGxNb2RhbCB9IGZyb20gXCIuL2N1c3RvbUluc3RhbGxNb2RhbFwiO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IEFWQUlMQUJMRV9FRElUSU9OUywgRWRpdGlvbiB9IGZyb20gJy4vZWRpdGlvbnMnXG5cblxuLy8gRGVmaW5lIHlvdXIgQ3VzdG9tUGF0aEVudHJ5IGludGVyZmFjZS5cbmludGVyZmFjZSBDdXN0b21QYXRoRW50cnkge1xuXHR2YXVsdFBhdGg6IHN0cmluZztcblx0bWFuaWZlc3RLZXk6IHN0cmluZztcblx0ZG9VcGRhdGU6IGJvb2xlYW47XG59XG5cbi8vIEZpbGVQYXRoU3VnZ2VzdGVyIGZvciBsaXZlIHNlYXJjaCBvbiB2YXVsdCBmaWxlcy5cbmNsYXNzIEZpbGVQYXRoU3VnZ2VzdGVyIGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8c3RyaW5nPiB7XG5cdHByaXZhdGUgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcblx0cHJpdmF0ZSBwYXRoczogeyBwYXRoOiBzdHJpbmc7IGlzRm9sZGVyOiBib29sZWFuIH1bXSA9IFtdO1xuXHRwcml2YXRlIGN1cnJlbnRTdWdnZXN0aW9uczogc3RyaW5nW10gPSBbXTtcblx0cHJpdmF0ZSByZW5kZXJlZFN1Z2dlc3Rpb25zOiBNYXA8SFRNTEVsZW1lbnQsIHN0cmluZz4gPSBuZXcgTWFwKCk7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcblx0XHRzdXBlcihhcHAsIGlucHV0RWwpO1xuXHRcdHRoaXMuaW5wdXRFbCA9IGlucHV0RWw7XG5cblx0XHQvLyBHZXQgZm9sZGVycyBhbmQgbWFya2Rvd24gZmlsZXMgZnJvbSB0aGUgdmF1bHQuXG5cdFx0Y29uc3QgZm9sZGVycyA9IE9iamVjdC52YWx1ZXMoYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkpXG5cdFx0XHQuZmlsdGVyKChmKTogZiBpcyBURm9sZGVyID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKVxuXHRcdFx0Lm1hcChmID0+ICh7IHBhdGg6IGYucGF0aCwgaXNGb2xkZXI6IHRydWUgfSkpO1xuXHRcdGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKVxuXHRcdFx0Lm1hcChmID0+ICh7IHBhdGg6IGYucGF0aCwgaXNGb2xkZXI6IGZhbHNlIH0pKTtcblx0XHR0aGlzLnBhdGhzID0gWy4uLmZvbGRlcnMsIC4uLmZpbGVzXTtcblxuXHRcdHRoaXMuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjb250YWluZXIgPSAodGhpcyBhcyBhbnkpLmNvbnRhaW5lckVsIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRcdGlmICghY29udGFpbmVyKSByZXR1cm47XG5cdFx0XHRcdFx0Y29uc3Qgc2VsZWN0ZWRFbCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc3VnZ2VzdGlvbi1pdGVtLmlzLXNlbGVjdGVkJykgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdFx0aWYgKHNlbGVjdGVkRWwpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNlbGVjdGVkUGF0aCA9IHRoaXMucmVuZGVyZWRTdWdnZXN0aW9ucy5nZXQoc2VsZWN0ZWRFbCk7XG5cdFx0XHRcdFx0XHRpZiAoc2VsZWN0ZWRQYXRoKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0U3VnZ2VzdGlvbihzZWxlY3RlZFBhdGgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgMCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRnZXRTdWdnZXN0aW9ucyhpbnB1dFN0cjogc3RyaW5nKTogc3RyaW5nW10ge1xuXHRcdGNvbnN0IHF1ZXJ5ID0gaW5wdXRTdHIudG9Mb3dlckNhc2UoKTtcblx0XHR0aGlzLmN1cnJlbnRTdWdnZXN0aW9ucyA9IHRoaXMucGF0aHNcblx0XHRcdC5maWx0ZXIoKHsgcGF0aCB9KSA9PiBwYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpKVxuXHRcdFx0Lm1hcChwID0+IHAucGF0aCk7XG5cdFx0cmV0dXJuIHRoaXMuY3VycmVudFN1Z2dlc3Rpb25zO1xuXHR9XG5cblx0cmVuZGVyU3VnZ2VzdGlvbihwYXRoOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGlzRm9sZGVyID0gdGhpcy5wYXRocy5maW5kKHAgPT4gcC5wYXRoID09PSBwYXRoKT8uaXNGb2xkZXI7XG5cdFx0ZWwuYWRkQ2xhc3MoXCJtb2QtY29tcGxleFwiKTtcblx0XHRjb25zdCBpY29uRWwgPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWljb24nIH0pO1xuXHRcdHNldEljb24oaWNvbkVsLCBpc0ZvbGRlciA/ICdmb2xkZXInIDogJ2RvY3VtZW50Jyk7XG5cblx0XHRjb25zdCBuYW1lID0gcGF0aC5zcGxpdCgnLycpLnBvcCgpITtcblx0XHRjb25zdCBkaXNwbGF5TmFtZSA9IGlzRm9sZGVyID8gbmFtZSA6IG5hbWUucmVwbGFjZSgvXFwubWQkLywgJycpO1xuXHRcdGVsLmNyZWF0ZURpdih7IHRleHQ6IGRpc3BsYXlOYW1lLCBjbHM6ICdzdWdnZXN0aW9uLXRpdGxlJyB9KTtcblx0XHRjb25zdCBwYXJlbnRQYXRoID0gcGF0aC5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKS5qb2luKCcvJyk7XG5cdFx0ZWwuY3JlYXRlRGl2KHsgdGV4dDogcGFyZW50UGF0aCwgY2xzOiAnc2VhcmNoLXN1Z2dlc3QtaW5mby10ZXh0JyB9KTtcblx0XHRlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGU6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR0aGlzLnNlbGVjdFN1Z2dlc3Rpb24ocGF0aCk7XG5cdFx0fSk7XG5cdFx0dGhpcy5yZW5kZXJlZFN1Z2dlc3Rpb25zLnNldChlbCwgcGF0aCk7XG5cdH1cblxuXHRzZWxlY3RTdWdnZXN0aW9uKHBhdGg6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMuaW5wdXRFbC52YWx1ZSA9IHBhdGg7XG5cdFx0dGhpcy5pbnB1dEVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaW5wdXRcIikpO1xuXHRcdHRoaXMuY2xvc2UoKTtcblx0fVxufVxuXG4vLyBNb2RhbCBmb3IgZGlzcGxheWluZyB0aGUgY2hhbmdlbG9nLlxuY2xhc3MgTWFya2Rvd25QcmV2aWV3TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIGNvbnRlbnQ6IHN0cmluZykge1xuXHRcdHN1cGVyKGFwcCk7XG5cdH1cblxuXHRvbk9wZW4oKTogdm9pZCB7XG5cdFx0dGhpcy5jb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdUb29sa2l0IENoYW5nZWxvZycgfSk7XG5cdFx0Y29uc3QgbWQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcblx0XHRjb25zdCBkdW1teUNvbXBvbmVudCA9IG5ldyBjbGFzcyBleHRlbmRzIENvbXBvbmVudCB7fSgpO1xuXHRcdE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24odGhpcy5jb250ZW50LCBtZCwgJy8nLCBkdW1teUNvbXBvbmVudCk7XG5cdH1cblxuXHRvbkNsb3NlKCk6IHZvaWQge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuLy8gVGhlIGZ1bGwgc2V0dGluZ3MgdGFiLlxuZXhwb3J0IGNsYXNzIFRvb2xraXRTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47ICBcblx0fSAgIFxuXHRwcml2YXRlIHJlbmRlckhlYWRlcihyb290OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGhlYWRlciA9IHJvb3QuY3JlYXRlRGl2KCk7XG5cdFx0aGVhZGVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0aGVhZGVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nO1xuXHRcdGhlYWRlci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG5cdFx0aGVhZGVyLnN0eWxlLmJvcmRlckJvdHRvbSA9ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknO1xuXHRcdGhlYWRlci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMmVtJztcblx0XHRoZWFkZXIuc3R5bGUucGFkZGluZ0JvdHRvbSA9ICcwLjVlbSc7XG5cdCAgXG5cdFx0aGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZWdW5kZXJsb3JlIFRvb2xraXQgU2V0dGluZ3MnIH0pO1xuXHQgIFxuXHRcdGNvbnN0IGhlYWRlckJ0bnMgPSBoZWFkZXIuY3JlYXRlRGl2KCk7XG5cdFx0aGVhZGVyQnRucy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdGhlYWRlckJ0bnMuc3R5bGUuZ2FwID0gJzAuNWVtJztcblx0ICBcblx0XHRjb25zdCBkb2NzQnRuID0gaGVhZGVyQnRucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRG9jcycgfSk7XG5cdFx0ZG9jc0J0bi5vbmNsaWNrID0gKCkgPT4gd2luZG93Lm9wZW4oJ2h0dHA6Ly92dnVuZGVybG9yZS5jb20nLCAnX2JsYW5rJyk7XG5cdCAgXG5cdFx0Y29uc3QgZ2l0aHViQnRuID0gaGVhZGVyQnRucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnR2l0SHViJyB9KTtcblx0XHRnaXRodWJCdG4ub25jbGljayA9ICgpID0+XG5cdFx0ICB3aW5kb3cub3BlbignaHR0cHM6Ly9naXRodWIuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwnLCAnX2JsYW5rJyk7XG5cdCAgXG5cdFx0Y29uc3Qga29maUJ0biA9IGhlYWRlckJ0bnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHQgIHRleHQ6ICdcdTI2MTUgS28tZmknLFxuXHRcdCAgY2xzOiAnbW9kLWN0YScsXG5cdFx0fSk7XG5cdFx0a29maUJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmNTkwMCc7XG5cdFx0a29maUJ0bi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG5cdFx0a29maUJ0bi5vbmNsaWNrID0gKCkgPT4gd2luZG93Lm9wZW4oJ2h0dHBzOi8va28tZmkuY29tL3Z2dW5kZXJsb3JlJywgJ19ibGFuaycpO1xuXHQgIH1cblx0ICBcblx0XHRwcml2YXRlIHJlbmRlckZpcnN0UnVuQ2FyZChyb290OiBIVE1MRWxlbWVudCl7XG5cdFx0XHRcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZWVkc0luc3RhbGwpIHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0gID0gJyc7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UgICAgPSBbXTtcblx0XHRcdH1cblx0XHRcdC8vIDEpIE91dGVyIHdyYXBwZXJcblx0XHRcdGNvbnN0IGNhcmQgPSByb290LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Z2dW5kZXJsb3JlLWZpcnN0LXJ1bicgfSk7XG5cdFx0XHRPYmplY3QuYXNzaWduKGNhcmQuc3R5bGUsIHtcblx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdFx0YWxpZ25JdGVtczogJ2NlbnRlcicsXG5cdFx0XHR0ZXh0QWxpZ246ICdjZW50ZXInLFxuXHRcdFx0bWFyZ2luVG9wOiAnMmVtJyxcblx0XHRcdHBhZGRpbmc6ICcxZW0nLFxuXHRcdFx0Ym9yZGVyOiAnMnB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcblx0XHRcdGJvcmRlclJhZGl1czogJzE4cHgnLCAgICAgICAgLyogKG9wdGlvbmFsKSByb3VuZCB0aGUgY29ybmVycyBzbGlnaHRseSAqL1xuXHRcdFx0YmFja2dyb3VuZENvbG9yOiAndmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KScsIC8qIChvcHRpb25hbCkgd2hpdGUvZ3JheSBiYWNrZ3JvdW5kICovXG5cdFx0XHR9KTtcblx0XHRcblx0XHRcdC8vIDIpIEhlYWRlclxuXHRcdFx0Y29uc3QgdGl0bGUgPSBjYXJkLmNyZWF0ZUVsKCdoMicsIHtcblx0XHRcdHRleHQ6ICdcdUQ4M0NcdURGRjAgV2VsY29tZSB0byBWVnVuZGVybG9yZScsXG5cdFx0XHRjbHM6ICd2di1jYXJkLXRpdGxlJyxcblx0XHRcdH0pO1xuXHRcdFx0Ly8gR2l2ZSB0aGUgdGl0bGUgYSBsaXR0bGUgYm90dG9tIG1hcmdpblxuXHRcdFx0dGl0bGUuc3R5bGUubWFyZ2luQm90dG9tID0gJzAuNWVtJztcblx0XHRcblx0XHRcdC8vIDMpIEluc3RydWN0aW9uYWwgY29weVxuXHRcdFx0Y29uc3QgZGVzYyA9IGNhcmQuY3JlYXRlRWwoJ3AnLCB7XG5cdFx0XHR0ZXh0OlxuXHRcdFx0XHQnR2V0IHN0YXJ0ZWQgYnkgaW5zdGFsbGluZyB0aGUgZGVmYXVsdCB0b29sa2l0XHUyMDE0XFxub3IgY2hvb3NlIGluZGl2aWR1YWwgcGllY2VzIHRvIHN1aXQgeW91ciB2YXVsdC4nLFxuXHRcdFx0Y2xzOiAndnYtY2FyZC1kZXNjJyxcblx0XHRcdH0pO1xuXHRcdFx0Ly8gU2xpZ2h0IGJvdHRvbSBtYXJnaW4gc28gaXQgZG9lc24ndCBidXR0IHJpZ2h0IHVwIGFnYWluc3QgdGhlIGJ1dHRvbnNcblx0XHRcdGRlc2Muc3R5bGUubWFyZ2luQm90dG9tID0gJzEuMjVlbSc7XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSVUxFU0VUIC8gUkVGRVJFTkNFIEdSSUQgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBwbHVnaW4gPSB0aGlzLnBsdWdpbjtcblxuLy8gMSkgR3JpZCBjb250YWluZXJcbmNvbnN0IGdyaWQgPSBjYXJkLmNyZWF0ZURpdigpO1xuT2JqZWN0LmFzc2lnbihncmlkLnN0eWxlLCB7XG4gIGRpc3BsYXk6ICdncmlkJyxcbiAgZ3JpZFRlbXBsYXRlQ29sdW1uczogJ21heC1jb250ZW50IG1heC1jb250ZW50JyxcbiAgY29sdW1uR2FwOiAnMXJlbScsXG4gIHJvd0dhcDogJzAuMjVyZW0nLFxuICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gIGp1c3RpZnlJdGVtczogJ2NlbnRlcicsXG4gIG1hcmdpbkJvdHRvbTogJzFyZW0nLFxufSk7XG5cbi8vIDIpIEhlYWRlciByb3dcbmNvbnN0IGxhYmVsUnMgPSBncmlkLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdSdWxlc2V0JyB9KTtcbmxhYmVsUnMuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbmNvbnN0IGxhYmVsUmVmID0gZ3JpZC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnUmVmZXJlbmNlIChvcHRpb25hbCknIH0pO1xubGFiZWxSZWYuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcblxuLy8gMykgSW5wdXQgY2VsbHNcbmNvbnN0IHJzQ2VsbCA9IGdyaWQuY3JlYXRlRGl2KHsgYXR0cjogeyBzdHlsZTogJ3RleHQtYWxpZ246Y2VudGVyJyB9IH0pO1xuY29uc3QgcmVmQ2VsbCA9IGdyaWQuY3JlYXRlRGl2KHsgYXR0cjogeyBzdHlsZTogJ3RleHQtYWxpZ246Y2VudGVyJyB9IH0pO1xuXG4vLyA0KSBNdXRlZCwgaXRhbGljIHN1bW1hcnkgYmFyIChzcGFucyBib3RoIGNvbHVtbnMpXG5jb25zdCBzdW1tYXJ5QmFyID0gZ3JpZC5jcmVhdGVEaXYoKTtcbk9iamVjdC5hc3NpZ24oc3VtbWFyeUJhci5zdHlsZSwge1xuICBncmlkQ29sdW1uOiAnMSAvIHNwYW4gMicsXG4gIGRpc3BsYXk6ICdmbGV4JyxcbiAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gIGZsZXhXcmFwOiAnd3JhcCcsXG4gIGdhcDogJzAuNXJlbScsXG4gIGZvbnRTaXplOiAnMC44NWVtJyxcbiAgY29sb3I6ICd2YXIoLS10ZXh0LW11dGVkKScsXG4gIGZvbnRTdHlsZTogJ2l0YWxpYycsXG4gIG1hcmdpblRvcDogJzAuMjVyZW0nLFxuICBtYXJnaW5Cb3R0b206ICcxcmVtJyxcbn0pO1xuY29uc3QgcnVsZXNldFNwYW4gPSBzdW1tYXJ5QmFyLmNyZWF0ZVNwYW4oe1xuICB0ZXh0OiBgUnVsZXNldDogJHtcbiAgICBwbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW1cbiAgICAgID8gYEQmRCA1RSAoJHtwbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW19KWBcbiAgICAgIDogJydcbiAgfWAsXG59KTtcbnJ1bGVzZXRTcGFuLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG5zdW1tYXJ5QmFyLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnUmVmZXJlbmNlczonIH0pO1xuY29uc3QgY2hpcHNXcmFwcGVyID0gc3VtbWFyeUJhci5jcmVhdGVEaXYoKTtcbk9iamVjdC5hc3NpZ24oY2hpcHNXcmFwcGVyLnN0eWxlLCB7IGRpc3BsYXk6ICdmbGV4JywgZ2FwOiAnNHB4JyB9KTtcblxuLy8gSGVscGVyIHRvIHJlbmRlciBhIGNoaXBcbmZ1bmN0aW9uIGFkZENoaXAoaWQ6IHN0cmluZykge1xuXHRjb25zdCBlZCA9IEFWQUlMQUJMRV9FRElUSU9OUy5maW5kKGUgPT4gZS5pZCA9PT0gaWQpITtcblx0Y29uc3QgY2hpcCA9IGNoaXBzV3JhcHBlci5jcmVhdGVEaXYoe1xuXHQgIGF0dHI6IHtcblx0XHRzdHlsZTpcblx0XHQgICdiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6MnB4IDZweDsgJyArXG5cdFx0ICAnYm9yZGVyLXJhZGl1czo0cHg7IGRpc3BsYXk6aW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgZ2FwOjRweDsnXG5cdCAgfVxuXHR9KTtcblx0Y2hpcC5jcmVhdGVTcGFuKHsgdGV4dDogZWQubGFiZWwgfSk7XG5cdGNvbnN0IHJlbSA9IGNoaXAuY3JlYXRlU3Bhbih7XG5cdCAgdGV4dDogJ1x1MDBENycsXG5cdCAgYXR0cjogeyBzdHlsZTogJ2N1cnNvcjpwb2ludGVyOyBtYXJnaW4tbGVmdDo0cHg7JyB9XG5cdH0pO1xuXHRyZW0ub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0ICBwbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZSA9IHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlLmZpbHRlcih4ID0+IHggIT09IGlkKTtcblx0ICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdCAgY2hpcC5yZW1vdmUoKTtcblx0ICB1cGRhdGVJbnN0YWxsQnV0dG9ucygpO1xuXHR9O1xuICB9XG4gIDtcblxuLy8gSW5pdGlhbCBjaGlwcyBkcmF3XG5wbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZS5mb3JFYWNoKGUgPT4gYWRkQ2hpcChlKSk7XG5cbi8vIDUpIFJ1bGVzZXQgZHJvcGRvd25cbmNvbnN0IHJzRHJvcGRvd24gPSBuZXcgRHJvcGRvd25Db21wb25lbnQocnNDZWxsKTtcbnJzRHJvcGRvd24uYWRkT3B0aW9uKCcnLCAnU2VsZWN0IGVkaXRpb25cdTIwMjYnKTtcbkFWQUlMQUJMRV9FRElUSU9OUy5mb3JFYWNoKChlZDogRWRpdGlvbikgPT4ge1xuICByc0Ryb3Bkb3duLmFkZE9wdGlvbihlZC5pZCwgZWQubGFiZWwpO1xufSk7XG5yc0Ryb3Bkb3duXG4gIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSlcbiAgLm9uQ2hhbmdlKGFzeW5jICh2YWwpID0+IHtcbiAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSA9IHZhbDtcbiAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuICAgIC8vIExpdmVcdTIwMTB1cGRhdGUgeW91ciBzdW1tYXJ5IGJhcjpcbiAgICBjb25zdCBjaG9zZW4gPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZChlID0+IGUuaWQgPT09IHZhbCk7XG4gICAgcnVsZXNldFNwYW4udGV4dENvbnRlbnQgPSBjaG9zZW4gPyBjaG9zZW4ubGFiZWwgOiAnJztcblxuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyByZWZlcmVuY2UgY2hpcHM6XG4gICAgY2hpcHNXcmFwcGVyLmVtcHR5KCk7XG5cbiAgICB1cGRhdGVJbnN0YWxsQnV0dG9ucygpO1xuICB9KTtcblxuICBjb25zdCBzZWFyY2hXcmFwcGVyRWwgPSByZWZDZWxsLmNyZWF0ZURpdih7IGF0dHI6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOmNlbnRlcjsnIH0gfSk7XG4gIGNvbnN0IHNlYXJjaENvbXAgPSBuZXcgU2VhcmNoQ29tcG9uZW50KHNlYXJjaFdyYXBwZXJFbCk7XG4gIHNlYXJjaENvbXAuc2V0UGxhY2Vob2xkZXIoJ0FkZCByZWZlcmVuY2UgcnVsZXNcdTIwMjYnKTtcbiAgY29uc3Qgc3VnZ2VzdGlvbklucHV0RWwgPSBzZWFyY2hDb21wLmlucHV0RWw7XG4gIFxuICBuZXcgY2xhc3MgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxzdHJpbmc+IHtcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcblx0ICBzdXBlcihhcHAsIGlucHV0RWwpO1xuXHR9XG4gIFxuXHQvLyAxKSBQcm9wb3NlIGVkaXRpb24gSURzIChtaW51cyB0aGUgb25lIHRoZXkgcGlja2VkIGFzIHRoZSBtYWluIHJ1bGVzZXQpXG5cdGdldFN1Z2dlc3Rpb25zKGlucHV0OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG5cdCAgcmV0dXJuIEFWQUlMQUJMRV9FRElUSU9OU1xuXHRcdC5maWx0ZXIoZWQgPT4gZWQuaWQgIT09IHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSkgICAgICAgICAgICAvLyBmaWx0ZXIgb3V0IHRoZSBjaG9zZW4gcnVsZXNldFxuXHRcdC5maWx0ZXIoZWQgPT4gZWQubGFiZWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhpbnB1dC50b0xvd2VyQ2FzZSgpKSkgICAgIC8vIG1hdGNoIG9uIGxhYmVsIHRleHRcblx0XHQubWFwKGVkID0+IGVkLmlkKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gdGhlIElEIGZvciBlYWNoXG5cdH1cbiAgXG5cdC8vIDIpIFJlbmRlciB0aGUgaHVtYW4tcmVhZGFibGUgbGFiZWxcblx0cmVuZGVyU3VnZ2VzdGlvbihpdGVtOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHQgIGNvbnN0IGVkID0gQVZBSUxBQkxFX0VESVRJT05TLmZpbmQoZSA9PiBlLmlkID09PSBpdGVtKSE7XG5cdCAgZWwuY3JlYXRlRGl2KHsgdGV4dDogZWQubGFiZWwgfSk7XG5cdH1cbiAgXG5cdC8vIDMpIFdoZW4gdGhleSBwaWNrIG9uZSwgc3RvcmUgaXRzIElEIGFuZCBhZGQgYSBjaGlwXG5cdHNlbGVjdFN1Z2dlc3Rpb24oaXRlbTogc3RyaW5nKTogdm9pZCB7XG5cdCAgaWYgKCFwbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZS5pbmNsdWRlcyhpdGVtKSkge1xuXHRcdHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlLnB1c2goaXRlbSk7XG5cdFx0cGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdGFkZENoaXAoaXRlbSk7XG5cdCAgfVxuXHQgIHRoaXMuY2xvc2UoKTtcblx0ICBzdWdnZXN0aW9uSW5wdXRFbC52YWx1ZSA9ICcnO1xuXHQgIHVwZGF0ZUluc3RhbGxCdXR0b25zKCk7XG5cdH1cbiAgfSh0aGlzLmFwcCwgc3VnZ2VzdGlvbklucHV0RWwpO1xuICBcblxuXG5cblxuXHRcdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIEJ1dHRvbiByb3cgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCBidG5Sb3cxID0gY2FyZC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICd2di1idXR0b24tcm93JyB9KTtcblx0XHRcdE9iamVjdC5hc3NpZ24oYnRuUm93MS5zdHlsZSwge1xuXHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0Z2FwOiAnMC43NWVtJyxcblx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcblx0XHRcdG1hcmdpbkJvdHRvbTogJzEuNWVtJyxcblx0XHRcdH0pO1xuXG5cdFx0XHRjb25zdCBpbnN0YWxsQnRuMSA9IGJ0blJvdzEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6ICdJbnN0YWxsIFRvb2xraXQnLFxuXHRcdFx0Y2xzOiAnbW9kLWN0YScsXG5cdFx0XHR9KTtcblx0XHRcdGluc3RhbGxCdG4xLm9uQ2xpY2tFdmVudCgoKSA9PlxuXHRcdFx0bmV3IENvbmZpcm1GcmVzaEluc3RhbGxNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKVxuXHRcdFx0KTtcblxuXHRcdFx0Y29uc3QgY3VzdG9tQnRuMSA9IGJ0blJvdzEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6ICdDdXN0b20gSW5zdGFsbCcsXG5cdFx0XHRjbHM6ICdtb2QtY3RhJyxcblx0XHRcdH0pO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihjdXN0b21CdG4xLnN0eWxlLCB7XG5cdFx0XHRiYWNrZ3JvdW5kOiAnbm9uZScsXG5cdFx0XHRib3JkZXI6ICcxcHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KScsXG5cdFx0XHRjb2xvcjogJ3ZhcigtLXRleHQtbm9ybWFsKScsXG5cdFx0XHR9KTtcblx0XHRcdGN1c3RvbUJ0bjEub25DbGlja0V2ZW50KCgpID0+IHNob3dDdXN0b21JbnN0YWxsTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKSk7XG5cblx0XHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIZWxwZXIgdG8gZW5hYmxlL2Rpc2FibGUgdGhlIGJ1dHRvbnMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0XHRjb25zdCB1cGRhdGVJbnN0YWxsQnV0dG9ucyA9ICgpID0+IHtcblx0XHRcdGNvbnN0IGhhc1J1bGVzZXQgPSBCb29sZWFuKHRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtKTtcblx0XHRcdGluc3RhbGxCdG4xLnRvZ2dsZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAhaGFzUnVsZXNldCk7XG5cdFx0XHRjdXN0b21CdG4xLnRvZ2dsZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAhaGFzUnVsZXNldCk7XG5cdFx0XHR9O1xuXG5cdFx0XHQvLyA3KSBJbml0aWFsIGNhbGwsIGluIGNhc2Ugd2VcdTIwMTlyZSByZS1yZW5kZXJpbmdcblx0XHRcdHVwZGF0ZUluc3RhbGxCdXR0b25zKCk7XG5cblx0XHRcblx0XHRcdC8vIDUpIFx1MjAxQ1NraXBcdTIwMUQgbGlua1xuXHRcdFx0Y29uc3Qgc2tpcFBhcmEgPSBjYXJkLmNyZWF0ZUVsKCdwJywgeyBjbHM6ICd2di1za2lwLWxpbmsnIH0pO1xuXHRcdFx0Ly8gQ2VudGVyIGl0IGFuZCBnaXZlIGl0IGEgdGlueSB0b3AgbWFyZ2luXG5cdFx0XHRPYmplY3QuYXNzaWduKHNraXBQYXJhLnN0eWxlLCB7XG5cdFx0XHR0ZXh0QWxpZ246ICdjZW50ZXInLFxuXHRcdFx0bWFyZ2luVG9wOiAnMC4yNWVtJyxcblx0XHRcdH0pO1xuXHRcdFx0c2tpcFBhcmFcblx0XHRcdC5jcmVhdGVFbCgnYScsIHtcblx0XHRcdHRleHQ6ICdBbHJlYWR5IGhhdmUgdGhlIFRvb2xraXQ/IFNob3cgbWUgdGhlIHNldHRpbmdzIFx1MjE5MicsXG5cdFx0XHR9KVxuXHRcdFx0Lm9uQ2xpY2tFdmVudChhc3luYyAoKSA9PiB7XG5cdFx0XHQvLyAxKSBDcmVhdGUgdGhlIGhpZGRlbiBtYXJrZXIgZmlsZSBzbyBcImZpcnN0XHUyMDEwcnVuXCIgbmV2ZXIgc2hvd3MgYWdhaW46XG5cdFx0XHRjb25zdCBtYXJrZXJQYXRoID0gJy52dnVuZGVybG9yZV9pbnN0YWxsZWQnO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Ly8gT25seSB3cml0ZSBpdCBpZiBpdCBkb2VzIG5vdCBleGlzdCB5ZXRcblx0XHRcdFx0aWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobWFya2VyUGF0aCkpKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShtYXJrZXJQYXRoLCAnJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcignXHUyNzRDIEZhaWxlZCB0byBjcmVhdGUgbWFya2VyIGZpbGU6JywgZSk7XG5cdFx0XHR9XG5cdFx0XG5cdFx0XHQvLyAyKSBGbGlwIG5lZWRzSW5zdGFsbCB0byBmYWxzZSAoc28gdGhlIGZpcnN0XHUyMDEwcnVuIGNhcmQgaXMgZ29uZSlcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm5lZWRzSW5zdGFsbCA9IGZhbHNlO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XG5cdFx0XHQvLyAzKSBSZVx1MjAxMHJlbmRlciB0aGUgbm9ybWFsIHNldHRpbmdzIFVJXG5cdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0ICBcblx0ICBcblx0cHJpdmF0ZSB2ZXJzaW9uVmFsdWVFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBmb3JjZVdhcm5pbmdFbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnNvbGUubG9nKFwiXHVEODNEXHVERDI3IGRpc3BsYXkoKSBjYWxsZWQsIG5lZWRzSW5zdGFsbCA9XCIsIHRoaXMucGx1Z2luLnNldHRpbmdzLm5lZWRzSW5zdGFsbCk7XG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblx0XHRjb25zdCBzYXZlZFNjcm9sbFRvcCA9IGNvbnRhaW5lckVsLnNjcm9sbFRvcDtcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXHRcblx0XHR0aGlzLnJlbmRlckhlYWRlcihjb250YWluZXJFbCk7IC8vIFx1RDgzRFx1REM0OFx1MDBBMEFsd2F5cyByZW5kZXIgaGVhZGVyIGZpcnN0XG5cdFxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZWVkc0luc3RhbGwpIHtcblx0XHRcdGNvbnNvbGUubG9nKFwiXHVEODNFXHVEREVBIFNob3dpbmcgZmlyc3QtcnVuIGNhcmRcIik7XG5cdFx0XHR0aGlzLnJlbmRlckZpcnN0UnVuQ2FyZChjb250YWluZXJFbCk7XG5cdFx0XHRjb250YWluZXJFbC5zY3JvbGxUb3AgPSBzYXZlZFNjcm9sbFRvcDtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdDsoYXN5bmMgKCkgPT4ge1x0XG5cdFx0XG5cdFx0LyoqIFx1MjUwMFx1MjUwMFx1MjUwMCBWRVJTSU9OIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwICovXG5cdFx0Y29uc3QgdmVyc2lvblJvdyA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xuXHRcdHZlcnNpb25Sb3cuc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XG5cdFx0dmVyc2lvblJvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdHZlcnNpb25Sb3cuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7XG5cdFx0dmVyc2lvblJvdy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2ZsZXgtc3RhcnQnO1xuXHRcdHZlcnNpb25Sb3cuc3R5bGUuZ2FwID0gJzJlbSc7XG5cdFx0dmVyc2lvblJvdy5zdHlsZS5mbGV4V3JhcCA9ICd3cmFwJztcblx0XHR2ZXJzaW9uUm93LnN0eWxlLmJvcmRlckJvdHRvbSA9ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknO1xuXG5cdFx0Y29uc3QgdmVyc2lvbkluZm8gPSB2ZXJzaW9uUm93LmNyZWF0ZURpdigpO1xuXHRcdHZlcnNpb25JbmZvLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0dmVyc2lvbkluZm8uc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuXHRcdHZlcnNpb25JbmZvLnN0eWxlLmdhcCA9ICcwLjI1ZW0nO1xuXG5cdFx0bGV0IGluc3RhbGxlZCA9ICdOb3QgaW5zdGFsbGVkJztcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgdmVyQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnLnZlcnNpb24uanNvbicpO1xuXHRcdFx0Y29uc3QganNvbiA9IEpTT04ucGFyc2UodmVyQ29udGVudCk7XG5cdFx0XHRpbnN0YWxsZWQgPSBqc29uLnZlcnNpb24gPz8gJ05vdCBpbnN0YWxsZWQnO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS53YXJuKCdDb3VsZCBub3QgcmVhZCAudmVyc2lvbi5qc29uIGZyb20gdmF1bHQ6JywgZXJyKTtcblx0XHR9XG5cdFx0Y29uc3QgbGF0ZXN0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gJ0NvdWxkIG5vdCBmZXRjaCc7XG5cdFx0Y29uc3QgaXNNYXRjaCA9IGluc3RhbGxlZCA9PT0gbGF0ZXN0O1xuXG5cdFx0Y29uc3QgdmF1bHRSb3cgPSB2ZXJzaW9uSW5mby5jcmVhdGVEaXYoKTtcblx0XHR2YXVsdFJvdy5hcHBlbmRUZXh0KCdWYXVsdCBUb29sa2l0IFZlcnNpb246ICcpO1xuXHRcdFxuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwgPSB2YXVsdFJvdy5jcmVhdGVTcGFuKCk7ICAvLyBcdUQ4M0RcdUREMjUgc2F2ZSByZWZcblx0XHR0aGlzLnZlcnNpb25WYWx1ZUVsLnRleHRDb250ZW50ID0gaW5zdGFsbGVkO1xuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcblx0XHR0aGlzLnZlcnNpb25WYWx1ZUVsLnN0eWxlLmNvbG9yID0gaXNNYXRjaCA/ICd2YXIoLS10ZXh0LXN1Y2Nlc3MpJyA6ICd2YXIoLS10ZXh0LWVycm9yKSc7XG5cdFx0XG5cdFx0Y29uc3QgbGF0ZXN0Um93ID0gdmVyc2lvbkluZm8uY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0xhdGVzdCBPZmZpY2lhbCBWZXJzaW9uOiAnIH0pO1xuXHRcdGxhdGVzdFJvdy5jcmVhdGVTcGFuKHtcblx0XHRcdHRleHQ6IGxhdGVzdCxcblx0XHRcdGF0dHI6IHsgc3R5bGU6ICdmb250LXdlaWdodDogYm9sZDsgY29sb3I6IHZhcigtLXRleHQtc3VjY2Vzcyk7JyB9XG5cdFx0fSk7XG5cblx0XHRjb25zdCB2ZXJzaW9uQ29udHJvbHMgPSB2ZXJzaW9uUm93LmNyZWF0ZURpdigpO1xuXHRcdHZlcnNpb25Db250cm9scy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdHZlcnNpb25Db250cm9scy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XG5cdFx0dmVyc2lvbkNvbnRyb2xzLnN0eWxlLmFsaWduSXRlbXMgPSAnZmxleC1lbmQnO1xuXHRcdHZlcnNpb25Db250cm9scy5zdHlsZS5nYXAgPSAnMC41ZW0nO1xuXG5cdFx0Y29uc3QgYnV0dG9uUm93ID0gdmVyc2lvbkNvbnRyb2xzLmNyZWF0ZURpdigpO1xuXHRcdGJ1dHRvblJvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdGJ1dHRvblJvdy5zdHlsZS5nYXAgPSAnMC41ZW0nO1xuXG5cdFx0Y29uc3QgY2hlY2tCdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6IGluc3RhbGxlZCAhPT0gbGF0ZXN0ID8gJ1ByZXZpZXcgVXBkYXRlJyA6ICdDaGVjayBmb3IgVXBkYXRlcycsXG5cdFx0XHRjbHM6ICdtb2QtY3RhJ1xuXHRcdH0pO1xuXHRcdGNoZWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKGluc3RhbGxlZCAhPT0gbGF0ZXN0KSB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnByZXZpZXdVcGRhdGVzTW9kYWwoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmNoZWNrRm9yVXBkYXRlcygpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGNvbnN0IGNoYW5nZWxvZ0J0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnXHVEODNEXHVEQ0Q2IFZpZXcgQ2hhbmdlbG9nJyB9KTtcblx0XHRjaGFuZ2Vsb2dCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHRuZXcgTWFya2Rvd25QcmV2aWV3TW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLmNoYW5nZWxvZykub3BlbigpO1xuXHRcdH0pO1xuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXN0Q2hlY2tlZCkge1xuXHRcdFx0Y29uc3QgbGFzdENoZWNrZWQgPSB2ZXJzaW9uQ29udHJvbHMuY3JlYXRlRGl2KCk7XG5cdFx0XHRsYXN0Q2hlY2tlZC5zdHlsZS5mb250U2l6ZSA9ICcxMXB4Jztcblx0XHRcdGxhc3RDaGVja2VkLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblx0XHRcdGxhc3RDaGVja2VkLnRleHRDb250ZW50ID0gYExhc3QgY2hlY2tlZDogJHtuZXcgRGF0ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXN0Q2hlY2tlZCkudG9Mb2NhbGVTdHJpbmcoKX1gO1xuXHRcdH1cblxuXHRcdFxuXG5cdFx0LyoqIFx1MjUwMFx1MjUwMFx1MjUwMCBGSVggWU9VUiBWQVVMVCBTRUNUSU9OIChjb2xsYXBzaWJsZSwgZml4ZWRcdTIwMTBpY29uKSBcdTI1MDBcdTI1MDBcdTI1MDAgKi9cblx0XHRjb25zdCBmaXhEZXRhaWxzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIFJlcGxhY2UgeW91ciBvbGQgZml4SGVhZGVyIHdpdGggdGhpcyA8c3VtbWFyeT4gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4SGVhZGVyID0gZml4RGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oZml4SGVhZGVyLnN0eWxlLCB7XG5cdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdGFsaWduSXRlbXM6ICdzdHJldGNoJyxcblx0XHRwYWRkaW5nOiAnMC41ZW0gMCcsXG5cdFx0Ym9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpJyxcblx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHR9KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMCBDcmVhdGUgYSBzaW5nbGUgZmxleFx1MjAxMHJvdyBpbnNpZGUgdGhlIHN1bW1hcnkgZm9yIHRpdGxlK2ljb24gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4SGVhZGVyUm93ID0gZml4SGVhZGVyLmNyZWF0ZURpdih7XG5cdFx0YXR0cjoge1xuXHRcdFx0c3R5bGU6IGBcblx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHRqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG5cdFx0XHRhbGlnbi1pdGVtczogZmxleC1lbmQ7XG5cdFx0XHRgLFxuXHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDAgTGVmdCBzaWRlOiB0aXRsZSArIGRlc2NyaXB0aW9uIGJsb2NrIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGZpeFRpdGxlQmxvY2sgPSBmaXhIZWFkZXJSb3cuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsnIH1cblx0XHR9KTtcblx0XHRmaXhUaXRsZUJsb2NrLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ0ZpeCBZb3VyIFZhdWx0JyB9KTtcblx0XHRmaXhUaXRsZUJsb2NrLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0dGV4dDogJ0ZpeCBhbmQgYnJva2VuLCBkZWxldGVkLCBvciBtaXNwbGFjZWQgZmlsZXMgaW4geW91ciB0b29sa2l0LicsXG5cdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC4yNWVtOycgfSxcblx0XHR9KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMCBSaWdodCBzaWRlOiBzdGF0aWMgdG9nZ2xlIGljb24gKHJvdGF0ZXMgaW4gcGxhY2Ugb25seSkgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4VG9nZ2xlSWNvbiA9IGZpeEhlYWRlclJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oZml4VG9nZ2xlSWNvbi5zdHlsZSwge1xuXHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHR0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMnMgZWFzZScsXG5cdFx0dHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsIC8vIFJvdGF0ZSBhcm91bmQgaXRzIG93biBjZW50ZXJcblx0XHR1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFx0dHJhbnNmb3JtOiBmaXhEZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0fSk7XG5cdFx0Zml4RGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRmaXhUb2dnbGVJY29uLnN0eWxlLnRyYW5zZm9ybSA9IGZpeERldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHR9O1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIEJvZHkgKHNhbWUgYXMgYmVmb3JlLCBqdXN0IGluZGVudGVkIHVuZGVyIDxkZXRhaWxzPikgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4Qm9keSA9IGZpeERldGFpbHMuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblx0XHRmaXhCb2R5LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzFlbSc7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDAgQnV0dG9uICsgd2FybmluZyByb3cgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4QnV0dG9uUm93ID0gZml4Qm9keS5jcmVhdGVEaXYoKTtcblx0XHRmaXhCdXR0b25Sb3cuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRmaXhCdXR0b25Sb3cuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7XG5cdFx0Zml4QnV0dG9uUm93LnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcblx0XHRmaXhCdXR0b25Sb3cuc3R5bGUubWFyZ2luVG9wID0gJzAuNWVtJztcblxuXHRcdGNvbnN0IHdhcm5pbmdDb250YWluZXIgPSBmaXhCdXR0b25Sb3cuY3JlYXRlRGl2KCk7XG5cdFx0dGhpcy5mb3JjZVdhcm5pbmdFbCA9IHdhcm5pbmdDb250YWluZXI7XG5cblx0XHRsZXQgaW5zdGFsbGVkVmVyc2lvblN0ciA9ICcnO1xuXHRcdHRyeSB7XG5cdFx0Y29uc3QgdmVyc2lvbkZpbGUgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCcudmVyc2lvbi5qc29uJyk7XG5cdFx0Y29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZSh2ZXJzaW9uRmlsZSk7XG5cdFx0aW5zdGFsbGVkVmVyc2lvblN0ciA9IChwYXJzZWQudmVyc2lvbiA/PyAnJykudHJpbSgpO1xuXHRcdH0gY2F0Y2gge1xuXHRcdGluc3RhbGxlZFZlcnNpb25TdHIgPSAnJztcblx0XHR9XG5cblx0XHRjb25zdCBsYXRlc3RWZXJzaW9uU3RyID0gKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uID8/ICcnKS50cmltKCk7XG5cblx0XHRjb25zb2xlLmxvZyhcIlx1RDgzRVx1RERFQSBDb21wYXJpbmcgdmVyc2lvbnM6XCIsIGluc3RhbGxlZFZlcnNpb25TdHIsIGxhdGVzdFZlcnNpb25TdHIpO1xuXG5cdFx0aWYgKGluc3RhbGxlZFZlcnNpb25TdHIgJiYgbGF0ZXN0VmVyc2lvblN0ciAmJiBpbnN0YWxsZWRWZXJzaW9uU3RyICE9PSBsYXRlc3RWZXJzaW9uU3RyKSB7XG5cdFx0Y29uc3Qgd2FybiA9IHdhcm5pbmdDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdHRleHQ6IGBcdTI2QTBcdUZFMEYgTmV3IHZlcnNpb24gYXZhaWxhYmxlICgke2luc3RhbGxlZFZlcnNpb25TdHJ9IFx1MjE5MiAke2xhdGVzdFZlcnNpb25TdHJ9KSBcdTIwMTQgdXNlIHJlZ3VsYXIgdXBkYXRlIGluc3RlYWRgLFxuXHRcdH0pO1xuXHRcdHdhcm4uc3R5bGUuZm9udFNpemUgPSAnMC44NWVtJztcblx0XHR3YXJuLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcblx0XHR3YXJuLnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnO1xuXHRcdHdhcm4uc2V0QXR0cihcblx0XHRcdCd0aXRsZScsXG5cdFx0XHQnRm9yY2UgdXBkYXRpbmcgd2hpbGUgYSBuZXcgdmVyc2lvbiBpcyBhdmFpbGFibGUgbWF5IHNraXAgaW1wb3J0YW50IGNoYW5nZXMuJ1xuXHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gXHUyN0ExXHVGRTBGIFJpZ2h0IHNpZGU6IGFjdGlvbiBidXR0b25zXG5cdFx0Y29uc3QgYnV0dG9uR3JvdXAgPSBmaXhCdXR0b25Sb3cuY3JlYXRlRGl2KCk7XG5cdFx0YnV0dG9uR3JvdXAuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRidXR0b25Hcm91cC5zdHlsZS5nYXAgPSAnMC41ZW0nO1xuXG5cdFx0YnV0dG9uR3JvdXBcblx0XHQuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkZvcmNlIFVwZGF0ZSBWYXVsdFwiLCBjbHM6IFwibW9kLWN0YVwiIH0pXG5cdFx0Lm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHQvLyBmaXJzdCBkbyB5b3VyIG5vcm1hbCBcdTIwMUNmb3JjZSB1cGRhdGVcdTIwMUQgZmxvdzpcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmZvcmNlVXBkYXRlUHJldmlld0FuZENvbmZpcm0oKTtcblx0XHRcdC8vIHRoZW4sIGlmIHRoZSB1c2VyIGFza2VkIGZvciBhIHJlLXBhcnNlLCBkbyB0aGF0OlxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGFyc2VHYW1lc2V0cykge1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4ucmVmcmVzaEdhbWVTZXREYXRhKCk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXG5cdFx0YnV0dG9uR3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHR0ZXh0OiAnVW5kbyBVcGRhdGUnXG5cdFx0fSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi51bmRvRm9yY2VVcGRhdGUoKTtcblx0XHR9O1xuXG5cblx0XHQvLyBcdTI1MDBcdTI1MDAgVGltZXN0YW1wIHJvdyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBmaXhUaW1lc3RhbXBSb3cgPSBmaXhCb2R5LmNyZWF0ZURpdigpO1xuXHRcdE9iamVjdC5hc3NpZ24oZml4VGltZXN0YW1wUm93LnN0eWxlLCB7XG5cdFx0dGV4dEFsaWduOiAncmlnaHQnLFxuXHRcdGZvbnRTaXplOiAnMTFweCcsXG5cdFx0Y29sb3I6ICd2YXIoLS10ZXh0LW11dGVkKScsXG5cdFx0bWFyZ2luVG9wOiAnMC4yNWVtJ1xuXHRcdH0pO1xuXHRcdGZpeFRpbWVzdGFtcFJvdy50ZXh0Q29udGVudCA9IGBMYXN0IGZvcmNlZDogJHtcblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXN0Rm9yY2VVcGRhdGVcblx0XHRcdD8gbmV3IERhdGUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdEZvcmNlVXBkYXRlKS50b0xvY2FsZVN0cmluZygpXG5cdFx0XHQ6ICdOb3QgZm9yY2VkIHlldCdcblx0XHR9YDtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMCBkaXZpZGVyIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuZml4Qm9keS5jcmVhdGVFbCgnZGl2Jywge1xuICBhdHRyOiB7XG4gICAgc3R5bGU6ICdib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7IG1hcmdpbjogMC43NWVtIDA7J1xuICB9XG59KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBOZXcgXHUyMDFDcmUtcGFyc2UgZ2FtZXNldHNcdTIwMUQgdG9nZ2xlIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IHJlcGFyc2VSb3cgPSBmaXhCb2R5LmNyZWF0ZURpdigpO1xuXHRcdHJlcGFyc2VSb3cuc3R5bGUubWFyZ2luVG9wID0gXCIwLjVlbVwiO1xuXHRcdG5ldyBTZXR0aW5nKHJlcGFyc2VSb3cpXG5cdFx0LnNldE5hbWUoXCJSZS1wYXJzZSBHYW1lIFNldHMgT24gRm9yY2UgVXBkYXRlXCIpXG5cdFx0LnNldERlc2MoXG5cdFx0XHRcIkFsc28gcmUtcGFyc2UgeW91ciBydWxlc2V0IGNvbXBlbmRpdW0gYW5kIHJlZmVyZW5jZSBzZXRzLiBUaGlzIHdvbid0IGRlbGV0ZSBhbnkgZmlsZXMgaW4gdGhlIENvbXBlbmRpdW0gb3IgUmVmZXJlbmNlIGZvbGRlcnMuXCJcblx0XHQpXG5cblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nKSA9PlxuXHRcdFx0dG9nXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwYXJzZUdhbWVzZXRzKVxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBhcnNlR2FtZXNldHMgPSB2YWx1ZTtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQkFDS1VQIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgYmFja3VwRGV0YWlscyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblxuXHRcdC8vIFN1bW1hcnkgYmxvY2s6IHN0YWNrZWQgY29sdW1uIGxheW91dFxuXHRcdGNvbnN0IGJhY2t1cFN1bW1hcnkgPSBiYWNrdXBEZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG5cblx0XHRPYmplY3QuYXNzaWduKGJhY2t1cFN1bW1hcnkuc3R5bGUsIHtcblx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0ZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG5cdFx0YWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuXHRcdHBhZGRpbmc6ICcwLjVlbSAwJyxcblx0XHRib3JkZXJCb3R0b206ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuXHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdH0pO1xuXG5cdFx0Ly8gQ3JlYXRlIHRpdGxlICsgaWNvbiByb3dcblx0XHRjb25zdCBiYWNrdXBUaXRsZVJvdyA9IGJhY2t1cFN1bW1hcnkuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7XG5cdFx0XHRzdHlsZTogYFxuXHRcdFx0ZGlzcGxheTogZmxleDtcblx0XHRcdGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcblx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcblx0XHRcdGAsXG5cdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIExlZnQ6IGhlYWRlciBibG9jayAodGl0bGUgKyBkZXNjcmlwdGlvbiB0b2dldGhlcikgXG5cdFx0Y29uc3QgdGl0bGVCbG9jayA9IGJhY2t1cFRpdGxlUm93LmNyZWF0ZURpdih7XG5cdFx0YXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47JyB9XG5cdFx0fSk7XG5cblx0XHR0aXRsZUJsb2NrLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ1ZhdWx0IEJhY2t1cHMnIH0pO1xuXG5cdFx0dGl0bGVCbG9jay5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdHRleHQ6ICdUaGUgVG9vbGtpdCB3aWxsIGJhY2sgdXAgeW91ciB2YXVsdCBhdXRvbWF0aWNhbGx5IGJlZm9yZSB1cGRhdGVzLiBZb3UgY2FuIGFsc28gYmFjayB1cCBtYW51YWxseSBhbnl0aW1lLicsXG5cdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC4yNWVtOycgfSxcblx0XHR9KTtcblxuXHRcdC8vIFJpZ2h0OiBjb2xsYXBzZSBpY29uXG5cdFx0Y29uc3QgYmFja3VwVnZJY29uID0gYmFja3VwVGl0bGVSb3cuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcblxuXHRcdE9iamVjdC5hc3NpZ24oYmFja3VwVnZJY29uLnN0eWxlLCB7XG5cdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuXHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHR1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFx0dHJhbnNmb3JtOiBiYWNrdXBEZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0fSk7XG5cblx0XHQvLyBDb2xsYXBzZSByb3RhdGlvbiBiZWhhdmlvclxuXHRcdGJhY2t1cERldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG5cdFx0YmFja3VwVnZJY29uLnN0eWxlLnRyYW5zZm9ybSA9IGJhY2t1cERldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHR9O1xuXG5cdFx0Ly8gMikgQm9keVxuXHRcdGNvbnN0IGJhY2t1cEJvZHkgPSBiYWNrdXBEZXRhaWxzLmNyZWF0ZURpdih7IGNsczogJ3ZrLXNlY3Rpb24tYm9keScgfSk7XG5cdFx0YmFja3VwQm9keS5zdHlsZS5wYWRkaW5nTGVmdCA9ICcxZW0nO1xuXG5cdFx0bmV3IFNldHRpbmcoYmFja3VwQm9keSlcblx0XHQuc2V0TmFtZSgnQXV0by1CYWNrdXAgQmVmb3JlIFVwZGF0ZScpXG5cdFx0LnNldERlc2MoJ0NyZWF0ZSBhIGZ1bGwgLnppcCBvZiB0aGUgdmF1bHQgYmVmb3JlIGFwcGx5aW5nIHZlcnNpb24gdXBkYXRlcy4gRm9yY2UgdXBkYXRlcyB3aWxsIG9ubHkgYmFjayB1cCB0aGUgZmlsZXMgdGhhdCB3aWxsIGJlIG1vZGlmaWVkIG9yIHJlbW92ZWQuJylcblx0XHQuYWRkVG9nZ2xlKHQgPT5cblx0XHRcdHRcblx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlKVxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHYgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlID0gdjtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHRuZXcgU2V0dGluZyhiYWNrdXBCb2R5KVxuXHRcdC5zZXROYW1lKCdNYW51YWwgQmFja3VwJylcblx0XHQuc2V0RGVzYygnSW1tZWRpYXRlbHkgY3JlYXRlIGEgemlwIGJhY2t1cCBvZiB5b3VyIHZhdWx0Jylcblx0XHQuYWRkQnV0dG9uKGIgPT5cblx0XHRcdGJcblx0XHRcdC5zZXRCdXR0b25UZXh0KCdCYWNrdXAgVmF1bHQgTm93Jylcblx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBwYXRoID0gYXdhaXQgdGhpcy5wbHVnaW4uYmFja3VwTWFuYWdlci5iYWNrdXBWYXVsdFRvWmlwKCdtYW51YWwnKTtcblx0XHRcdFx0bmV3IE5vdGljZShgQmFja3VwIGNyZWF0ZWQ6ICR7cGF0aH1gKTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGJhY2t1cEJvZHkpXG5cdFx0LnNldE5hbWUoJ09wZW4gQmFja3VwcyBGb2xkZXInKVxuXHRcdC5zZXREZXNjKCdPcGVuIHRoZSBiYWNrdXBzIGZvbGRlciBvbiBkaXNrLiBNYWNPUzogQ2FudCBzZWUgaXQ/IEhpdCBTaGlmdCtDbWQrKHBlcmlvZCkuJylcblx0XHQuYWRkQnV0dG9uKGIgPT5cblx0XHQgIGJcblx0XHRcdC5zZXRCdXR0b25UZXh0KCdPcGVuIEZvbGRlcicpXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHQgIHRyeSB7XG5cblx0XHRcdFx0Y29uc3QgdmF1bHRCYXNlUGF0aDogc3RyaW5nID0gKHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyIGFzIGFueSkuZ2V0QmFzZVBhdGgoKTtcblxuXHRcdFx0XHRjb25zdCBiYWNrdXBGb2xkZXJQYXRoID0gcGF0aC5qb2luKFxuXHRcdFx0XHQgIHZhdWx0QmFzZVBhdGgsXG5cdFx0XHRcdCAgJy52YXVsdC1iYWNrdXBzJ1xuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGNvbnN0IHsgc2hlbGwgfSA9ICh3aW5kb3cgYXMgYW55KS5yZXF1aXJlKCdlbGVjdHJvbicpO1xuXHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBzaGVsbC5vcGVuUGF0aChiYWNrdXBGb2xkZXJQYXRoKTtcblx0XHRcdFx0aWYgKHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnICYmIHJlc3VsdC5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdCAgY29uc29sZS5lcnJvcignXHUyNzRDIHNoZWxsLm9wZW5QYXRoIGVycm9yOicsIHJlc3VsdCk7XG5cdFx0XHRcdCAgbmV3IE5vdGljZSgnQ291bGQgbm90IG9wZW4gYmFja3VwcyBmb2xkZXIuIFNlZSBjb25zb2xlLicpO1xuXHRcdFx0XHR9XG5cdFx0XHQgIH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdcdTI3NEMgQ291bGQgbm90IG9wZW4gYmFja3VwcyBmb2xkZXI6JywgZXJyKTtcblx0XHRcdFx0bmV3IE5vdGljZSgnQ291bGQgbm90IG9wZW4gYmFja3VwcyBmb2xkZXIuIFNlZSBjb25zb2xlLicpO1xuXHRcdFx0ICB9XG5cdFx0XHR9KVxuXHRcdCk7XG5cdFx0YmFja3VwQm9keS5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0YXR0cjoge1xuXHRcdFx0ICBzdHlsZTogJ2JvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTsgbWFyZ2luLXRvcDogMS41ZW07J1xuXHRcdFx0fVxuXHRcdCAgfSk7XG5cblxuXHRcdCAgXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwIENVU1RPTSBVUERBVEVTIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgY3VzdG9taXphdGlvbkRldGFpbHMgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGV0YWlscycsIHsgY2xzOiAndmstc2VjdGlvbicgfSk7XG5cblx0XHRjb25zdCBjdXN0b21pemF0aW9uU3VtbWFyeSA9IGN1c3RvbWl6YXRpb25EZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG5cblx0XHRPYmplY3QuYXNzaWduKGN1c3RvbWl6YXRpb25TdW1tYXJ5LnN0eWxlLCB7XG5cdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0Jyxcblx0XHRwYWRkaW5nOiAnMC41ZW0gMCcsXG5cdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0fSk7XG5cblx0XHRjb25zdCB0aXRsZVJvdyA9IGN1c3RvbWl6YXRpb25TdW1tYXJ5LmNyZWF0ZURpdih7XG5cdFx0YXR0cjoge1xuXHRcdFx0c3R5bGU6IGBcblx0XHRcdGRpc3BsYXk6IGZsZXg7XG5cdFx0XHR3aWR0aDogMTAwJTtcblx0XHRcdGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcblx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcblx0XHRcdGAsXG5cdFx0fSxcblx0XHR9KTtcblxuXHRcdGNvbnN0IGN1c3RvbWl6YXRpb25UaXRsZUJsb2NrID0gdGl0bGVSb3cuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsnIH1cblx0XHR9KTtcblxuXHRcdGNvbnN0IGg1ID0gY3VzdG9taXphdGlvblRpdGxlQmxvY2suY3JlYXRlRWwoJ2g1Jyk7XG5cdFx0aDUuYXBwZW5kVGV4dCgnQ3VzdG9tIEZpbGUgTWFuYWdlbWVudCAnKTtcblxuXHRcdGN1c3RvbWl6YXRpb25UaXRsZUJsb2NrLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0dGV4dDogJ1NraXAgdXBkYXRlcyBvbiBjZXJ0YWluIGZpbGVzIG9yIHJlbWFwIHJlbG9jYXRlZCBUb29sa2l0IGZpbGVzIHNvIHRoZXkgY2FuIHVwZGF0ZS4nLFxuXHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXG5cdFx0YXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDAuMjVlbTsnIH0sXG5cdFx0fSk7XG5cblx0XHRjb25zdCBjdXN0b21Wdkljb24gPSB0aXRsZVJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXG5cdFx0T2JqZWN0LmFzc2lnbihjdXN0b21Wdkljb24uc3R5bGUsIHtcblx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0dHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuXHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuXHRcdHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XHR0cmFuc2Zvcm06IGN1c3RvbWl6YXRpb25EZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0fSk7XG5cblx0XHRjdXN0b21pemF0aW9uRGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRjdXN0b21Wdkljb24uc3R5bGUudHJhbnNmb3JtID0gY3VzdG9taXphdGlvbkRldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHR9O1xuXG5cdFx0Y29uc3QgY3VzdG9taXphdGlvbkJvZHlXcmFwcGVyID0gY3VzdG9taXphdGlvbkRldGFpbHMuY3JlYXRlRGl2KHtcblx0XHRcdGF0dHI6IHsgc3R5bGU6ICdwYWRkaW5nLWxlZnQ6IDFlbTsgcGFkZGluZy1yaWdodDogMWVtOycgfVxuXHRcdCAgfSk7XG5cdFx0ICBjb25zdCBjdXN0b21pemF0aW9uQm9keSA9IGN1c3RvbWl6YXRpb25Cb2R5V3JhcHBlci5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXG5cblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTS0lQLUxJU1QgUEFORUwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cblx0XHRjb25zdCBza2lwU2VjdGlvbiA9IGN1c3RvbWl6YXRpb25Cb2R5LmNyZWF0ZURpdigpO1xuXG5cdFx0Ly8gMS4gQ3JlYXRlIHNldHRpbmcgYmxvY2sgKG1hdGNoZXMgT2JzaWRpYW4gbmF0aXZlIFVJIGxheW91dClcblx0XHRjb25zdCBzZXR0aW5nSXRlbSA9IHNraXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbScgfSk7XG5cblx0XHQvLyAyLiBMZWZ0IGNvbHVtbjogdGl0bGUgKyBkZXNjcmlwdGlvblxuXHRcdGNvbnN0IGluZm8gPSBzZXR0aW5nSXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0taW5mbycgfSk7XG5cdFx0aW5mby5jcmVhdGVEaXYoeyB0ZXh0OiAnU2tpcCBUb29sa2l0IEl0ZW1zJywgY2xzOiAnc2V0dGluZy1pdGVtLW5hbWUnIH0pO1xuXHRcdGluZm8uY3JlYXRlRGl2KHtcblx0XHR0ZXh0OiAnRmlsZXMgbGlzdGVkIGhlcmUgd2lsbCBiZSBpZ25vcmVkIGR1cmluZyB0b29sa2l0IHVwZGF0ZXMuJyxcblx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdH0pO1xuXG5cdFx0Ly8gMy4gUmlnaHQgY29sdW1uOiBkcm9wZG93biArIGJ1dHRvblxuXHRcdGNvbnN0IGNvbnRyb2wgPSBzZXR0aW5nSXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0tY29udHJvbCcgfSk7XG5cblx0XHRjb25zdCBkcm9wZG93biA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250cm9sKTtcblx0XHRkcm9wZG93bi5zZWxlY3RFbC5zdHlsZS5taW5XaWR0aCA9ICcyMjBweCc7XG5cdFx0ZHJvcGRvd24uYWRkT3B0aW9uKCcnLCAnU2VsZWN0IGFuIGl0ZW1cdTIwMjYnKTtcblx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzXG5cdFx0LmZpbHRlcihmID0+ICFmLm9wdGlvbmFsKVxuXHRcdC5mb3JFYWNoKGYgPT4gZHJvcGRvd24uYWRkT3B0aW9uKGYucGF0aCwgZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpKTtcblx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnNcblx0XHQuZmlsdGVyKGYgPT4gIWYub3B0aW9uYWwpXG5cdFx0LmZvckVhY2goZiA9PiBkcm9wZG93bi5hZGRPcHRpb24oZi5wYXRoLCAoZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpICsgJy8gKGZvbGRlciknKSk7XG5cblx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRyb2wpXG5cdFx0LnNldEJ1dHRvblRleHQoJ0FkZCcpXG5cdFx0LnNldEN0YSgpXG5cdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3Qga2V5ID0gZHJvcGRvd24uZ2V0VmFsdWUoKTtcblx0XHRcdGlmICgha2V5KSByZXR1cm4gbmV3IE5vdGljZSgnUGljayBzb21ldGhpbmcgdG8gc2tpcC4nKTtcblx0XHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuc29tZShjID0+IGMubWFuaWZlc3RLZXkgPT09IGtleSkpIHtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnB1c2goeyB2YXVsdFBhdGg6IGtleSwgbWFuaWZlc3RLZXk6IGtleSwgZG9VcGRhdGU6IGZhbHNlIH0pO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRyZW5kZXJTa2lwVGFibGUoKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIDQuIFRhYmxlIHdyYXBwZXIgZm9yIHNraXBwZWQgaXRlbXNcblx0XHRjb25zdCBza2lwVGFibGVXcmFwcGVyID0gc2tpcFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAndmstdGFibGUtd3JhcHBlcicsIGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOjAuNzVlbScgfSB9KTtcblxuXHRcdGNvbnN0IHJlbmRlclNraXBUYWJsZSA9ICgpID0+IHtcblx0XHRza2lwVGFibGVXcmFwcGVyLmVtcHR5KCk7XG5cblx0XHRjb25zdCBpdGVtcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbHRlcihjID0+ICFjLmRvVXBkYXRlKTtcblxuXHRcdGlmIChpdGVtcy5sZW5ndGggPT09IDApIHtcblx0XHRcdC8vIE5vIHRhYmxlIGlmIG5vdGhpbmcgdG8gc2hvdyBcdTIwMTQganVzdCBhbiBlbXB0eSBzdGF0ZSBtZXNzYWdlXG5cdFx0XHRjb25zdCBlbXB0eU1zZyA9IHNraXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ05vIGl0ZW1zIHNraXBwZWQuJyB9KTtcblx0XHRcdGVtcHR5TXNnLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuXHRcdFx0ZW1wdHlNc2cuc3R5bGUub3BhY2l0eSA9ICcwLjYnO1xuXHRcdFx0ZW1wdHlNc2cuc3R5bGUucGFkZGluZyA9ICcwLjVlbSc7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmVuZGVyIHRhYmxlIG9ubHkgaWYgaXRlbXMgZXhpc3Rcblx0XHRjb25zdCB0YWJsZSA9IHNraXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICdzZXR0aW5nLXRhYmxlJyB9KTtcblxuXHRcdGNvbnN0IGhlYWRlciA9IHRhYmxlLmNyZWF0ZVRIZWFkKCkuaW5zZXJ0Um93KCk7XG5cdFx0aGVhZGVyLmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9ICdTa2lwcGVkIEZpbGVzL0ZvbGRlcnMnO1xuXG5cdFx0Y29uc3QgYm9keSA9IHRhYmxlLmNyZWF0ZVRCb2R5KCk7XG5cblx0XHRpdGVtcy5mb3JFYWNoKChlbnRyeSkgPT4ge1xuXHRcdFx0Y29uc3Qgcm93ID0gYm9keS5pbnNlcnRSb3coKTtcblx0XHRcdGNvbnN0IGNvbnRlbnRDZWxsID0gcm93Lmluc2VydENlbGwoKTtcblx0XHRcdGNvbnRlbnRDZWxsLmNvbFNwYW4gPSAxO1xuXHRcdFx0Y29udGVudENlbGwuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHRcdGNvbnRlbnRDZWxsLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nO1xuXHRcdFx0Y29udGVudENlbGwuc3R5bGUucGFkZGluZ0xlZnQgPSAnNGVtJztcblx0XHRcdGNvbnRlbnRDZWxsLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcblx0XHRcdGNvbnRlbnRDZWxsLnN0eWxlLmdhcCA9ICcxZW0nO1xuXHRcdFx0Y29udGVudENlbGwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcblxuXHRcdFx0Y29udGVudENlbGwuY3JlYXRlU3Bhbih7IHRleHQ6IGVudHJ5Lm1hbmlmZXN0S2V5IH0pO1xuXG5cdFx0XHRjb25zdCByZW1vdmVMaW5rID0gY29udGVudENlbGwuY3JlYXRlRWwoJ2EnLCB7IHRleHQ6ICdSZW1vdmUgZW50cnknLCBocmVmOiAnIycgfSk7XG5cdFx0XHRyZW1vdmVMaW5rLnN0eWxlLmZvbnRTaXplID0gJzAuOGVtJztcblx0XHRcdHJlbW92ZUxpbmsuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1mYWludCknO1xuXHRcdFx0cmVtb3ZlTGluay5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICd1bmRlcmxpbmUnO1xuXHRcdFx0cmVtb3ZlTGluay5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnJlbW92ZShlbnRyeSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdHJlbmRlclNraXBUYWJsZSgpO1xuXHRcdFx0fTtcblx0XHR9KTtcblx0XHR9O1xuXG5cdFx0cmVuZGVyU2tpcFRhYmxlKCk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgU3BhY2VyICYgRGl2aWRlciBCZWZvcmUgUmVtYXAgUGFuZWwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y3VzdG9taXphdGlvbkJvZHkuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdGF0dHI6IHsgc3R5bGU6ICdoZWlnaHQ6IDFlbTsgYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpOyBtYXJnaW46IDFlbSAwOycgfVxuXHRcdH0pO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwIFJFTUFQIFBBTkVMIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IHJlbWFwU2VjdGlvbiA9IGN1c3RvbWl6YXRpb25Cb2R5LmNyZWF0ZURpdigpO1xuXG5cblx0XHQvLyBTZXR0aW5nLXN0eWxlIHdyYXBwZXJcblx0XHRjb25zdCByZW1hcFNldHRpbmcgPSByZW1hcFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcblxuXHRcdC8vIExlZnQ6IGhlYWRlciArIGRlc2NyaXB0aW9uICh1bmNoYW5nZWQgc3R5bGUpXG5cdFx0Y29uc3QgcmVtYXBJbmZvID0gcmVtYXBTZXR0aW5nLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbS1pbmZvJyB9KTtcblx0XHRyZW1hcEluZm8uY3JlYXRlRGl2KHsgdGV4dDogJ1JlbWFwIEZpbGUgUGF0aHMnLCBjbHM6ICdzZXR0aW5nLWl0ZW0tbmFtZScgfSk7XG5cdFx0cmVtYXBJbmZvLmNyZWF0ZURpdih7XG5cdFx0XHR0ZXh0OiAnUmVtYXAgdG9vbGtpdCBmaWxlcyB2YXVsdCBwYXRocyBpZiB5b3UgY2hvc2UgdG8gbW92ZSBhbnl0aGluZy4gTW92aW5nIGZpbGVzIHdpdGhvdXQgcmVtYXBwaW5nIHdpbGwgcmVzdWx0IGluIGR1cGxpY2F0ZSBhbmQvb3Igb3V0LW9mLWRhdGUgZmlsZXMgYWZ0ZXIgdXBkYXRlLicsXG5cdFx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nXG5cdFx0fSk7XG5cblx0XHQvLyBOZXcgZnVsbC13aWR0aCBibG9jayBiZWxvdyBmb3IgY29udHJvbHNcblx0XHRjb25zdCByZW1hcENvbnRyb2xCbG9jayA9IHJlbWFwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICd2ay1pbmxpbmUtYWRkLWNvbnRyb2xzJyB9KTtcblx0XHRyZW1hcENvbnRyb2xCbG9jay5zdHlsZS5mbGV4V3JhcCA9ICd3cmFwJztcblx0XHRyZW1hcENvbnRyb2xCbG9jay5zdHlsZS5tYXJnaW5Ub3AgPSAnMC41ZW0nO1xuXG5cdFx0bGV0IHJlbWFwRHJvcDogRHJvcGRvd25Db21wb25lbnQ7XG5cdFx0bGV0IHJlbWFwSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cblx0XHRyZW1hcERyb3AgPSBuZXcgRHJvcGRvd25Db21wb25lbnQocmVtYXBDb250cm9sQmxvY2spO1xuXHRcdHJlbWFwRHJvcC5zZWxlY3RFbC5zdHlsZS5taW5XaWR0aCA9ICcyMjBweCc7XG5cdFx0cmVtYXBEcm9wLmFkZE9wdGlvbignJywgJ1NlbGVjdCBhbiBpdGVtXHUyMDI2Jyk7XG5cdFx0dGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcy5mb3JFYWNoKGYgPT5cblx0XHRcdHJlbWFwRHJvcC5hZGRPcHRpb24oZi5wYXRoLCBmLmRpc3BsYXlOYW1lID8/IGYucGF0aC5zcGxpdCgnLycpLnBvcCgpISlcblx0XHQpO1xuXHRcdHRoaXMucGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5mb3JFYWNoKGYgPT5cblx0XHRcdHJlbWFwRHJvcC5hZGRPcHRpb24oZi5wYXRoLCAoZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSEpICsgJy8gKGZvbGRlciknKVxuXHRcdCk7XG5cblx0XHRjb25zdCBzZWFyY2hXcmFwcGVyID0gcmVtYXBDb250cm9sQmxvY2suY3JlYXRlRGl2KCk7XG5cdFx0Y29uc3Qgc2VhcmNoQ29tcG9uZW50ID0gbmV3IFNlYXJjaENvbXBvbmVudChzZWFyY2hXcmFwcGVyKTtcblx0XHRzZWFyY2hDb21wb25lbnQuc2V0UGxhY2Vob2xkZXIoJ1NlYXJjaCB2YXVsdCBwYXRoXHUyMDI2Jyk7XG5cdFx0bmV3IEZpbGVQYXRoU3VnZ2VzdGVyKHRoaXMuYXBwLCBzZWFyY2hDb21wb25lbnQuaW5wdXRFbCk7XG5cdFx0cmVtYXBJbnB1dCA9IHNlYXJjaENvbXBvbmVudC5pbnB1dEVsO1xuXG5cdFx0bmV3IEJ1dHRvbkNvbXBvbmVudChyZW1hcENvbnRyb2xCbG9jaylcblx0XHRcdC5zZXRCdXR0b25UZXh0KCdBZGQgUmVtYXAnKVxuXHRcdFx0LnNldEN0YSgpXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGtleSA9IHJlbWFwRHJvcC5nZXRWYWx1ZSgpO1xuXHRcdFx0XHRjb25zdCB2cCA9IHJlbWFwSW5wdXQudmFsdWUudHJpbSgpO1xuXHRcdFx0XHRpZiAoIWtleSB8fCAhdnApIHJldHVybiBuZXcgTm90aWNlKCdTZWxlY3QgYW4gaXRlbSBhbmQgZW50ZXIgYSB2YXVsdCBwYXRoLicpO1xuXHRcdFx0XHRpZiAoIXRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh2cCkpIHJldHVybiBuZXcgTm90aWNlKCdWYXVsdCBwYXRoIG5vdCBmb3VuZC4nKTtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5maWx0ZXIoYyA9PiBjLm1hbmlmZXN0S2V5ICE9PSBrZXkpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5wdXNoKHsgbWFuaWZlc3RLZXk6IGtleSwgdmF1bHRQYXRoOiB2cCwgZG9VcGRhdGU6IHRydWUgfSk7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRyZW1hcElucHV0LnZhbHVlID0gJyc7XG5cdFx0XHRcdHJlbWFwRHJvcC5zZXRWYWx1ZSgnJyk7XG5cdFx0XHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblx0XHRcdH0pO1xuXG5cblx0XHQvLyA0LiBUYWJsZSB3cmFwcGVyXG5cdFx0Y29uc3QgcmVtYXBUYWJsZVdyYXBwZXIgPSByZW1hcFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAndmstdGFibGUtd3JhcHBlcicsIGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOiAwLjc1ZW0nIH0gfSk7XG5cblx0XHRjb25zdCByZW5kZXJSZW1hcFBhbmVsID0gKCkgPT4ge1xuXHRcdHJlbWFwVGFibGVXcmFwcGVyLmVtcHR5KCk7XG5cblx0XHRjb25zdCB0b1JlbWFwID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmlsdGVyKGMgPT4gYy5kb1VwZGF0ZSk7XG5cblx0XHRpZiAodG9SZW1hcC5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnN0IGVtcHR5TXNnID0gcmVtYXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ05vIGN1c3RvbSBwYXRocyBkZWZpbmVkLicgfSk7XG5cdFx0XHRlbXB0eU1zZy5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcblx0XHRcdGVtcHR5TXNnLnN0eWxlLm9wYWNpdHkgPSAnMC42Jztcblx0XHRcdGVtcHR5TXNnLnN0eWxlLnBhZGRpbmcgPSAnMC41ZW0nO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHRhYmxlID0gcmVtYXBUYWJsZVdyYXBwZXIuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICdzZXR0aW5nLXRhYmxlJyB9KTtcblx0XHRjb25zdCBoZWFkID0gdGFibGUuY3JlYXRlVEhlYWQoKS5pbnNlcnRSb3coKTtcblx0XHRbJ1Rvb2xpdCBJdGVtJywgJ05ldyBWYXVsdCBQYXRoJywgJyddLmZvckVhY2godHh0ID0+IGhlYWQuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gdHh0KTtcblxuXHRcdGNvbnN0IGJvZHkgPSB0YWJsZS5jcmVhdGVUQm9keSgpO1xuXHRcdHRvUmVtYXAuZm9yRWFjaChlbnRyeSA9PiB7XG5cdFx0XHRjb25zdCByb3cgPSBib2R5Lmluc2VydFJvdygpO1xuXG5cdFx0XHQvLyBNYW5pZmVzdCBLZXlcblx0XHRcdHJvdy5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSBlbnRyeS5tYW5pZmVzdEtleTtcblxuXHRcdFx0Ly8gVmF1bHQgUGF0aFxuXHRcdFx0cm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IGVudHJ5LnZhdWx0UGF0aDtcblxuXHRcdFx0Ly8gUmVtb3ZlIGxpbmtcblx0XHRcdGNvbnN0IHJlbW92ZUNlbGwgPSByb3cuaW5zZXJ0Q2VsbCgpO1xuXHRcdFx0Y29uc3QgcmVtb3ZlTGluayA9IHJlbW92ZUNlbGwuY3JlYXRlRWwoJ2EnLCB7IHRleHQ6ICdSZW1vdmUgZW50cnknLCBocmVmOiAnIycgfSk7XG5cdFx0XHRyZW1vdmVMaW5rLnN0eWxlLmZvbnRTaXplID0gJzAuOGVtJztcblx0XHRcdHJlbW92ZUxpbmsuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1mYWludCknO1xuXHRcdFx0cmVtb3ZlTGluay5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICd1bmRlcmxpbmUnO1xuXHRcdFx0cmVtb3ZlTGluay5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnJlbW92ZShlbnRyeSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblx0XHRcdH07XG5cdFx0fSk7XG5cdFx0fTtcblxuXHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblxuXHRcdC8vIEFkZCBkaXZpZGVyIGluc2lkZSB0aGUgYm9keSwgYXQgdGhlIHRvcFxuXHRcdGN1c3RvbWl6YXRpb25Cb2R5LmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRhdHRyOiB7XG5cdFx0XHRzdHlsZTogJ2JvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKTsgbWFyZ2luOiAwLjVlbSAwOydcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMCBISUdITElHSFQgU0VDVElPTiBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBoaWdobGlnaHREZXRhaWxzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXG5cdFx0Ly8gMSkgQnVpbGQgdGhlIDxzdW1tYXJ5PiBmb3IgaGlnaGxpZ2h0LCBtYXRjaGluZyBiYWNrdXAgc3R5bGU6XG5cdFx0Y29uc3QgaGlnaGxpZ2h0U3VtbWFyeSA9IGhpZ2hsaWdodERldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcblx0XHRPYmplY3QuYXNzaWduKGhpZ2hsaWdodFN1bW1hcnkuc3R5bGUsIHtcblx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0ZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG5cdFx0YWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuXHRcdHBhZGRpbmc6ICcwLjVlbSAwJyxcblx0XHRib3JkZXJCb3R0b206ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuXHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdH0pO1xuXG5cdFx0Ly8gMWEpIENyZWF0ZSB0aGUgdGl0bGUgKyBpY29uIHJvdyAoZmxleCByb3cganVzdGlmeSBzcGFjZS1iZXR3ZWVuKTpcblx0XHRjb25zdCBoaWdobGlnaHRUaXRsZVJvdyA9IGhpZ2hsaWdodFN1bW1hcnkuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7XG5cdFx0XHRzdHlsZTogYFxuXHRcdFx0ZGlzcGxheTogZmxleDtcblx0XHRcdGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcblx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcblx0XHRcdGAsXG5cdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIDFiKSBMZWZ0IHNpZGU6IHRpdGxlICsgZGVzY3JpcHRpb25cblx0XHRjb25zdCBobFRpdGxlQmxvY2sgPSBoaWdobGlnaHRUaXRsZVJvdy5jcmVhdGVEaXYoe1xuXHRcdGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOycgfVxuXHRcdH0pO1xuXHRcdGhsVGl0bGVCbG9jay5jcmVhdGVFbCgnaDUnLCB7IHRleHQ6ICdGaWxlIEhpZ2hsaWdodHMnIH0pO1xuXHRcdGhsVGl0bGVCbG9jay5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdHRleHQ6ICdUb2dnbGUgb24vb2ZmIHRoZSBoaWdobGlnaHRpbmcgb2YgVG9vbGtpdC1zcGVjaWZpYyBmaWxlcy4gQWxzbyBtYWtlIHRoZSBoaWdobGlnaHRzIGNvb2wgY29sb3JzLicsXG5cdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC4yNWVtOycgfSxcblx0XHR9KTtcblxuXHRcdC8vIDFjKSBSaWdodCBzaWRlOiBjb2xsYXBzaW5nIGFycm93L2ljb25cblx0XHRjb25zdCBobFRvZ2dsZUljb24gPSBoaWdobGlnaHRUaXRsZVJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oaGxUb2dnbGVJY29uLnN0eWxlLCB7XG5cdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuXHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHR1c2VyU2VsZWN0OiAnbm9uZScsXG5cdFx0dHJhbnNmb3JtOiBoaWdobGlnaHREZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKScsXG5cdFx0fSk7XG5cblx0XHQvLyAxZCkgTWFrZSB0aGUgaWNvbiByb3RhdGUgd2hlbiB0aGUgPGRldGFpbHM+IG9wZW5zL2Nsb3Nlczpcblx0XHRoaWdobGlnaHREZXRhaWxzLm9udG9nZ2xlID0gKCkgPT4ge1xuXHRcdGhsVG9nZ2xlSWNvbi5zdHlsZS50cmFuc2Zvcm0gPSBoaWdobGlnaHREZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKSc7XG5cdFx0fTtcblxuXHRcdC8vIDIpIENyZWF0ZSB0aGUgYm9keSBjb250YWluZXIgKGluZGVudGVkLCBzYW1lIGFzIGJhY2t1cClcblx0XHRjb25zdCBoaWdobGlnaHRCb2R5ID0gaGlnaGxpZ2h0RGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXHRcdGhpZ2hsaWdodEJvZHkuc3R5bGUucGFkZGluZ0xlZnQgPSAnMWVtJztcblxuXHRcdC8vIDMpIFx1MjAxQ0VuYWJsZSBIaWdobGlnaHRcdTIwMUQgdG9nZ2xlIGFzIGEgU2V0dGluZyBpbnNpZGUgaGlnaGxpZ2h0Qm9keTpcblx0XHRuZXcgU2V0dGluZyhoaWdobGlnaHRCb2R5KVxuXHRcdC5zZXROYW1lKCdFbmFibGUgRmlsZS9Gb2xkZXIgSGlnaGxpZ2h0aW5nJylcblx0XHQuc2V0RGVzYygnQW55IGZpbGUvZm9sZGVyIGluc3RhbGxlZCBieSBWVnVuZGVybG9yZSB3aWxsIGhhdmUgdGhpcyBiYWNrZ3JvdW5kLicpXG5cdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0dG9nZ2xlXG5cdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZClcblx0XHRcdC5vbkNoYW5nZShhc3luYyAoZW5hYmxlZCkgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkID0gZW5hYmxlZDtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0aWYgKGVuYWJsZWQpIHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uZW5hYmxlSGlnaGxpZ2h0KCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLmRpc2FibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlXHUyMDEwcmVuZGVyIHRoZSBjb2xvciBwaWNrZXJzIHdoZW5ldmVyIHRoZSB0b2dnbGUgY2hhbmdlczpcblx0XHRcdFx0cmVuZGVySGlnaGxpZ2h0Q29sb3JQaWNrZXJzKCk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIDQpIFdyYXBwZXIgZm9yIExpZ2h0L0RhcmsgY29sb3IgcGlja2Vyczpcblx0XHRjb25zdCBjb2xvclBpY2tlcldyYXBwZXIgPSBoaWdobGlnaHRCb2R5LmNyZWF0ZURpdigpO1xuXG5cdFx0Ly8gNSkgQSBmdW5jdGlvbiB0byByZW5kZXIgb3IgY2xlYXIgdGhlIHR3byBDb2xvclBpY2tlciBzZXR0aW5nczpcblx0XHRjb25zdCByZW5kZXJIaWdobGlnaHRDb2xvclBpY2tlcnMgPSAoKSA9PiB7XG5cdFx0Y29sb3JQaWNrZXJXcmFwcGVyLmVtcHR5KCk7XG5cblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQpIHtcblx0XHRcdHJldHVybjsgLy8gZG8gbm90IHNob3cgcGlja2VycyBpZiBoaWdobGlnaHRpbmcgaXMgZGlzYWJsZWRcblx0XHR9XG5cblx0XHQvLyA1YSkgTGlnaHQgbW9kZSBjb2xvciBwaWNrZXJcblx0XHRuZXcgU2V0dGluZyhjb2xvclBpY2tlcldyYXBwZXIpXG5cdFx0XHQuc2V0TmFtZSgnTGlnaHQgTW9kZSBIaWdobGlnaHQgQ29sb3InKVxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSB0aGUgYmFja2dyb3VuZCBjb2xvciBmb3IgZmlsZXMvZm9sZGVycyBpbiBMaWdodCBtb2RlLicpXG5cdFx0XHQuYWRkQ29sb3JQaWNrZXIocGlja2VyID0+IHtcblx0XHRcdHBpY2tlclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JMaWdodClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIChuZXdDb2xvcikgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckxpZ2h0ID0gbmV3Q29sb3I7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdC8vIFJlXHUyMDEwaW5qZWN0IENTUyBzbyB0aGUgbmV3IGNvbG9yIHRha2VzIGVmZmVjdCBpbW1lZGlhdGVseTpcblx0XHRcdFx0dGhpcy5wbHVnaW4uZGlzYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5lbmFibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdC8vIDViKSBEYXJrIG1vZGUgY29sb3IgcGlja2VyXG5cdFx0bmV3IFNldHRpbmcoY29sb3JQaWNrZXJXcmFwcGVyKVxuXHRcdFx0LnNldE5hbWUoJ0RhcmsgTW9kZSBIaWdobGlnaHQgQ29sb3InKVxuXHRcdFx0LnNldERlc2MoJ0Nob29zZSB0aGUgYmFja2dyb3VuZCBjb2xvciBmb3IgZmlsZXMvZm9sZGVycyBpbiBEYXJrIG1vZGUuJylcblx0XHRcdC5hZGRDb2xvclBpY2tlcihwaWNrZXIgPT4ge1xuXHRcdFx0cGlja2VyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckRhcmspXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAobmV3Q29sb3IpID0+IHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JEYXJrID0gbmV3Q29sb3I7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG5cdFx0XHRcdC8vIFJlXHUyMDEwaW5qZWN0IENTUyBzbyB0aGUgbmV3IGNvbG9yIHRha2VzIGVmZmVjdCBpbW1lZGlhdGVseTpcblx0XHRcdFx0dGhpcy5wbHVnaW4uZGlzYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5lbmFibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0Ly8gNikgQ2FsbCBvbmNlIG9uIGluaXRpYWwgcmVuZGVyIHNvIHRoYXQgaWYgaGlnaGxpZ2h0RW5hYmxlZCA9PT0gdHJ1ZSwgdGhlIHBpY2tlcnMgc2hvdyB1cC5cblx0XHRyZW5kZXJIaWdobGlnaHRDb2xvclBpY2tlcnMoKTtcblxuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIElOSVRJQUwgRFJBVyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRyZW5kZXJTa2lwVGFibGUoKTtcblx0XHRyZW5kZXJSZW1hcFBhbmVsKCk7XG5cblxuXHRcdC8vUkVNT1ZFIERFTU8gRklMRVNcblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUkVNT1ZFIERFTU8gRklMRVMgKHVwZGF0ZWQpIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4vLyAxKSBDcmVhdGUgYSBTZXR0aW5nIHJvdywgYnV0IGltbWVkaWF0ZWx5IHN0cmlwIG9mZiBpdHMgZGVmYXVsdCB0b3BcdTIwMTBib3JkZXI6XG5jb25zdCByZW1vdmVEZW1vU2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKTtcbihyZW1vdmVEZW1vU2V0dGluZy5zZXR0aW5nRWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJvcmRlclRvcCA9ICdub25lJztcblxucmVtb3ZlRGVtb1NldHRpbmdcbiAgLnNldE5hbWUoJ1JlbW92ZSBEZW1vIEZpbGVzJylcbiAgLnNldERlc2MoJ0RlbGV0ZSBldmVyeSBcdTIwMUNvcHRpb25hbFx1MjAxRCBkZW1vIGZpbGUgYW5kIGZvbGRlciBmcm9tIHlvdXIgdmF1bHQuJylcbiAgLmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxuICAgIGJ1dHRvblxuICAgICAgLnNldEJ1dHRvblRleHQoJ1JlbW92ZSBEZW1vIEZpbGVzJylcblxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBvcHRpb25hbEZpbGVFbnRyaWVzID0gdGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcy5maWx0ZXIoKGYpID0+IGYub3B0aW9uYWwpO1xuICAgICAgICBjb25zdCBvcHRpb25hbEZvbGRlckVudHJpZXMgPSB0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMuZmlsdGVyKChmKSA9PiBmLm9wdGlvbmFsKTtcblxuICAgICAgICBjb25zdCB0b3RhbENvdW50RmlsZXMgPSBvcHRpb25hbEZpbGVFbnRyaWVzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgdG90YWxDb3VudEZvbGRlcnMgPSBvcHRpb25hbEZvbGRlckVudHJpZXMubGVuZ3RoO1xuICAgICAgICBjb25zdCB0b3RhbENvdW50ID0gdG90YWxDb3VudEZpbGVzICsgdG90YWxDb3VudEZvbGRlcnM7XG5cbiAgICAgICAgaWYgKHRvdGFsQ291bnQgPT09IDApIHtcbiAgICAgICAgICBuZXcgTm90aWNlKCdObyBcdTIwMUNvcHRpb25hbFx1MjAxRCBkZW1vIGZpbGVzIG9yIGZvbGRlcnMgdG8gcmVtb3ZlLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSAyKSBBc2sgZm9yIGNvbmZpcm1hdGlvbiBpbiBhIHNtYWxsIE1vZGFsIC0tLVxuICAgICAgICBjb25zdCB1c2VyQ29uZmlybWVkID0gYXdhaXQgbmV3IFByb21pc2U8Ym9vbGVhbj4oKHJlc29sdmUpID0+IHtcbiAgICAgICAgICBjb25zdCBjb25maXJtTW9kYWwgPSBuZXcgY2xhc3MgZXh0ZW5kcyBNb2RhbCB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb25PcGVuKCkge1xuICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdDb25maXJtIFJlbW92YWwnIH0pO1xuICAgICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBgVGhpcyB3aWxsIHBlcm1hbmVudGx5IGRlbGV0ZSAke3RvdGFsQ291bnRGaWxlc30gZmlsZShzKSBhbmQgJHt0b3RhbENvdW50Rm9sZGVyc30gZm9sZGVyKHMpLiBDb250aW51ZT9gLFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBjb25zdCBidG5Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYnRuUm93LnN0eWxlLCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLFxuICAgICAgICAgICAgICAgIGdhcDogJzAuNWVtJyxcbiAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6ICcxLjVlbScsXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGJ0blJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICBidG5Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1llcywgUmVtb3ZlJywgY2xzOiAnbW9kLWRhbmdlcicgfSkub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSh0aGlzLmFwcCk7XG5cbiAgICAgICAgICBjb25maXJtTW9kYWwub3BlbigpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIXVzZXJDb25maXJtZWQpIHtcbiAgICAgICAgICByZXR1cm47IC8vIHVzZXIgY2xpY2tlZCBcdTIwMUNDYW5jZWxcdTIwMURcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSAzKSBEZWxldGUgb3B0aW9uYWwgZmlsZXMgb25lIGJ5IG9uZSAtLS1cbiAgICAgICAgbGV0IGZpbGVzRGVsZXRlZCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgZmlsZUVudHJ5IG9mIG9wdGlvbmFsRmlsZUVudHJpZXMpIHtcbiAgICAgICAgICAvLyAzYSkgUmVzcGVjdCBhbnkgcmVtYXBwaW5nIGluIGN1c3RvbVBhdGhzXG4gICAgICAgICAgY29uc3QgbWFwcGVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZmlsZUVudHJ5LmtleSk7XG4gICAgICAgICAgY29uc3QgdmF1bHRQYXRoID0gbWFwcGVkPy52YXVsdFBhdGggPz8gZmlsZUVudHJ5LnBhdGg7XG5cbiAgICAgICAgICAvLyAzYikgSWYgaXQgYWN0dWFsbHkgZXhpc3RzLCByZW1vdmUgaXRcbiAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZW1vdmUodmF1bHRQYXRoKTtcbiAgICAgICAgICAgICAgZmlsZXNEZWxldGVkKys7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGRlbGV0ZSBvcHRpb25hbCBmaWxlICR7dmF1bHRQYXRofWAsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDQpIERlbGV0ZSBvcHRpb25hbCBmb2xkZXJzIHJlY3Vyc2l2ZWx5IC0tLVxuICAgICAgICBsZXQgZm9sZGVyc0RlbGV0ZWQgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIG9wdGlvbmFsRm9sZGVyRW50cmllcykge1xuICAgICAgICAgIGNvbnN0IG1hcHBlZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGZvbGRlckVudHJ5LmtleSk7XG4gICAgICAgICAgY29uc3QgdmF1bHRGb2xkZXJQYXRoID0gbWFwcGVkPy52YXVsdFBhdGggPz8gZm9sZGVyRW50cnkucGF0aDtcblxuICAgICAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdEZvbGRlclBhdGgpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAvLyBUaGUgc2Vjb25kIGFyZ3VtZW50IGB0cnVlYCBlbnN1cmVzIHJlY3Vyc2l2ZSBkZWxldGVcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5ybWRpcih2YXVsdEZvbGRlclBhdGgsIHRydWUpO1xuICAgICAgICAgICAgICBmb2xkZXJzRGVsZXRlZCsrO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBkZWxldGUgb3B0aW9uYWwgZm9sZGVyICR7dmF1bHRGb2xkZXJQYXRofWAsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDUpIENsZWFuIHVwIGFueSBcdTIwMUNjdXN0b21QYXRoc1x1MjAxRCBlbnRyaWVzIGZvciBvcHRpb25hbCBpdGVtcyAtLS1cbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5maWx0ZXIoKGMpID0+IHtcbiAgICAgICAgICAvLyBJZiB0aGlzIG1hcHBpbmdcdTIwMTlzIG1hbmlmZXN0S2V5IHdhcyBvcHRpb25hbCwgZHJvcCBpdFxuICAgICAgICAgIGNvbnN0IGlzT3B0RmlsZSA9IG9wdGlvbmFsRmlsZUVudHJpZXMuc29tZSgoZikgPT4gZi5rZXkgPT09IGMubWFuaWZlc3RLZXkpO1xuICAgICAgICAgIGNvbnN0IGlzT3B0Rm9sZGVyID0gb3B0aW9uYWxGb2xkZXJFbnRyaWVzLnNvbWUoKGYpID0+IGYua2V5ID09PSBjLm1hbmlmZXN0S2V5KTtcbiAgICAgICAgICByZXR1cm4gIWlzT3B0RmlsZSAmJiAhaXNPcHRGb2xkZXI7XG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgICAvLyAtLS0gNikgU2hvdyBhIG5vdGljZSBhbmQgcmUtcmVuZGVyIHRoZSBzZXR0aW5ncyBwYWdlIC0tLVxuICAgICAgICBuZXcgTm90aWNlKGBEZWxldGVkICR7ZmlsZXNEZWxldGVkfSBmaWxlKHMpIGFuZCAke2ZvbGRlcnNEZWxldGVkfSBmb2xkZXIocykuYCk7XG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgfSlcbiAgKTtcblxuXG5cblxuXHRcdC8qKiBcdTI1MDBcdTI1MDBcdTI1MDAgRk9PVEVSIFNFQ1RJT04gXHUyNTAwXHUyNTAwXHUyNTAwICovXG5cdFx0Y29uc3QgZm9vdGVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcblx0XHRPYmplY3QuYXNzaWduKGZvb3Rlci5zdHlsZSwge1xuXHRcdGZvbnRTaXplOiAnMC44NWVtJyxcblx0XHRjb2xvcjogJ3ZhcigtLXRleHQtbXV0ZWQpJyxcblx0XHRtYXJnaW5Ub3A6ICcyZW0nLFxuXHRcdH0pO1xuXHRcdGZvb3Rlci5jcmVhdGVFbCgnc3BhbicsIHtcblx0XHRcdHRleHQ6IGBWVnVuZGVybG9yZSBUb29sa2l0IFBsdWdpbiB2JHt0aGlzLnBsdWdpbi5tYW5pZmVzdC52ZXJzaW9ufSBcdTIwMjIgYFxuXHRcdH0pO1xuXHRcdGZvb3Rlci5jcmVhdGVFbCgnYScsIHtcblx0XHRcdHRleHQ6ICdWaWV3IG9uIEdpdEh1YicsXG5cdFx0XHRocmVmOiAnaHR0cHM6Ly9naXRodWIuY29tL3NsYW13aXNlMDAwMS92dnVuZGVybG9yZS10b29sa2l0LXBsdWdpbicsXG5cdFx0XHRhdHRyOiB7IHRhcmdldDogJ19ibGFuaycgfVxuXHRcdH0pO1xuXG5cdFx0Y29udGFpbmVyRWwuc2Nyb2xsVG9wID0gc2F2ZWRTY3JvbGxUb3A7XG5cdH0pKCk7XG5cdH1cblxuXHRhc3luYyB1cGRhdGVWZXJzaW9uRGlzcGxheSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAoIXRoaXMudmVyc2lvblZhbHVlRWwgfHwgIXRoaXMuZm9yY2VXYXJuaW5nRWwpIHJldHVybjtcblx0ICBcblx0XHQvLyByZWFkIC52ZXJzaW9uLmpzb25cblx0XHRsZXQgaW5zdGFsbGVkID0gJyc7XG5cdFx0dHJ5IHtcblx0XHQgIGNvbnN0IHZlciA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJy52ZXJzaW9uLmpzb24nKTtcblx0XHQgIGluc3RhbGxlZCA9IEpTT04ucGFyc2UodmVyKS52ZXJzaW9uID8/ICcnO1xuXHRcdH0gY2F0Y2gge31cblx0XHRjb25zdCBsYXRlc3QgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gJycpLnRyaW0oKTtcblx0XHRjb25zdCBpc01hdGNoID0gaW5zdGFsbGVkID09PSBsYXRlc3Q7XG5cdCAgXG5cdFx0Ly8gdXBkYXRlIGp1c3QgdGhlIHZlcnNpb24gc3BhblxuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwudGV4dENvbnRlbnQgPSBpbnN0YWxsZWQgfHwgJ05vdCBpbnN0YWxsZWQnO1xuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwuc3R5bGUuY29sb3IgPSBpc01hdGNoXG5cdFx0ICA/ICd2YXIoLS10ZXh0LXN1Y2Nlc3MpJ1xuXHRcdCAgOiAndmFyKC0tdGV4dC1lcnJvciknO1xuXHQgIFxuXHRcdC8vIGNsZWFyIGFuZCByZS1yZW5kZXIganVzdCB0aGUgd2FybmluZyBjb250YWluZXJcblx0XHR0aGlzLmZvcmNlV2FybmluZ0VsLmVtcHR5KCk7XG5cdFx0aWYgKGluc3RhbGxlZCAmJiBsYXRlc3QgJiYgaW5zdGFsbGVkICE9PSBsYXRlc3QpIHtcblx0XHQgIGNvbnN0IHdhcm4gPSB0aGlzLmZvcmNlV2FybmluZ0VsLmNyZWF0ZURpdih7XG5cdFx0XHR0ZXh0OiBgXHUyNkEwXHVGRTBGIE5ldyB2ZXJzaW9uIGF2YWlsYWJsZSAoJHtpbnN0YWxsZWR9IFx1MjE5MiAke2xhdGVzdH0pIFx1MjAxNCB1c2UgcmVndWxhciB1cGRhdGUgaW5zdGVhZGAsXG5cdFx0ICB9KTtcblx0XHQgIHdhcm4uc3R5bGUuY3NzVGV4dCA9IGBcblx0XHRcdGZvbnQtc2l6ZTogMC44NWVtO1xuXHRcdFx0Y29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuXHRcdFx0Zm9udC1zdHlsZTogaXRhbGljO1xuXHRcdCAgYDtcblx0XHQgIHdhcm4uc2V0QXR0cigndGl0bGUnLCAnRm9yY2UgdXBkYXRpbmcgd2hpbGUgYSBuZXcgdmVyc2lvbiBpcyBhdmFpbGFibGUgbWF5IHNraXAgaW1wb3J0YW50IGNoYW5nZXMuJyk7XG5cdFx0fVxuXHQgIH1cblx0ICBcbn0gIFxuIiwgIi8vIHNyYy9maXJzdGluc3RhbGxjb25maXJtLnRzXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBCdXR0b25Db21wb25lbnQsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgSW5zdGFsbE9wdGlvbnMgfSBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgaW1wb3J0UnVsZXNldERhdGEgfSBmcm9tIFwiLi9ydWxlc2V0SW5zdGFsbGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBDb25maXJtRnJlc2hJbnN0YWxsTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIHByaXZhdGUgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW47XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgdGhpcy50aXRsZUVsLnNldFRleHQoXCJcdTI2QTBcdUZFMEYgV2FybmluZzogRnJlc2ggVmF1bHQgUmVjb21tZW5kZWRcIik7XG5cbiAgICAvLyBEaXNjbGFpbWVyIHRleHRcbiAgICB0aGlzLmNvbnRlbnRFbFxuICAgICAgLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgIHRleHQ6XG4gICAgICAgICAgXCJUaGUgZnVsbCBWVnVuZGVybG9yZSBpbnN0YWxsIGlzIGludGVuZGVkIGZvciBhIGZyZXNoLCBlbXB0eSBPYnNpZGlhbiB2YXVsdC4gXCIgK1xuICAgICAgICAgIFwiSWYgeW91IGluc3RhbGwgaW4gYSB2YXVsdCB0aGF0IGFscmVhZHkgaGFzIGZpbGVzLCBhbnkgZmlsZSB3aG9zZSBwYXRoIG1hdGNoZXMgYSBcIiArXG4gICAgICAgICAgXCJWVnVuZGVybG9yZSBUb29sa2l0IGZpbGUgd2lsbCBiZSBvdmVyd3JpdHRlbi5cXG5cXG5cIiArXG4gICAgICAgICAgXCJBbHNvIHRoaW5ncyBjb3VsZCBqdXN0IGdldCBtZXNzeS5cXG5cXG5cIiArXG4gICAgICAgICAgXCJNYWtlIGEgcGVyY2VwdGlvbiBjaGVjayBhbmQgcHJvY2VlZCB3aXRoIGNhdXRpb24hXCIsXG4gICAgICB9KVxuICAgICAgLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMWVtO1xuICAgICAgICBsaW5lLWhlaWdodDogMS40ZW07XG4gICAgICBgO1xuXG4gICAgLy8gQnV0dG9uIHJvdyBjb250YWluZXJcbiAgICBjb25zdCBidXR0b25Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgYnV0dG9uUm93LnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgIGdhcDogMC41ZW07XG4gICAgYDtcblxuICAgIC8vIFwiT2ggZ29kLCBjYW5jZWwhXCIgYnV0dG9uXG4gICAgbmV3IEJ1dHRvbkNvbXBvbmVudChidXR0b25Sb3cpXG4gICAgICAuc2V0QnV0dG9uVGV4dChcIk9oIGdvZCwgY2FuY2VsIVwiKVxuICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KTtcblxuICAgIC8vIFwiSW5zdGFsbCEhXCIgYnV0dG9uXG4gICAgbmV3IEJ1dHRvbkNvbXBvbmVudChidXR0b25Sb3cpXG4gICAgICAuc2V0QnV0dG9uVGV4dChcIkluc3RhbGwhIVwiKVxuICAgICAgLnNldEN0YSgpIC8vIG1ha2VzIGl0IGxvb2sgbGlrZSBhIHByaW1hcnkgYWN0aW9uXG4gICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgIC8vIGNsb3NlIHRoaXMgbW9kYWwgaW1tZWRpYXRlbHlcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICBcbiAgICAgICAgY29uc3Qgb3B0czogSW5zdGFsbE9wdGlvbnMgPSB7XG4gICAgICAgICAgY29tcGVuZGl1bTogdGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0sXG4gICAgICAgICAgcmVmZXJlbmNlczogWy4uLnRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2VdLFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGxldCB0aGUgdXNlciBrbm93IHdlJ3JlIHdvcmtpbmdcbiAgICAgICAgbmV3IE5vdGljZShcIlx1MjNGMyBJbnN0YWxsaW5nIHRvb2xraXRcdTIwMjZcIik7XG4gIFxuICAgICAgICAvLyBncmFiIHRoZSBzZWxlY3Rpb25zIGZyb20gc2V0dGluZ3NcbiAgICAgICAgY29uc3QgY29tcGVuZGl1bSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtO1xuICAgICAgICBjb25zdCByZWZlcmVuY2VzID0gWy4uLnRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2VdO1xuICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBydW4geW91ciBuZXcgaW5zdGFsbGVyXG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uaW5zdGFsbEZ1bGxUb29sa2l0KHsgY29tcGVuZGl1bSwgcmVmZXJlbmNlcyB9KTtcblxuXG4gICAgICAgICAgaWYgKGNvbXBlbmRpdW0pIHtcbiAgICAgICAgICAgIGF3YWl0IGltcG9ydFJ1bGVzZXREYXRhKHtcbiAgICAgICAgICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgICAgICAgICAgZWRpdGlvbktleTogY29tcGVuZGl1bSxcbiAgICAgICAgICAgICAgdGFyZ2V0UGF0aDogXCJDb21wZW5kaXVtXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlx1Mjc0QyBpbnN0YWxsVG9vbGtpdCgpIGZhaWxlZDpcIiwgZXJyKTtcbiAgICAgICAgICBuZXcgTm90aWNlKFwiXHUyNzRDIFRvb2xraXQgaW5zdGFsbGF0aW9uIGZhaWxlZC4gU2VlIGNvbnNvbGUuXCIpO1xuICAgICAgICB9XG4gIFxuICAgICAgICAvLyBtYXJrIGZpcnN0XHUyMDEwcnVuIGNvbXBsZXRlIHNvIHRoZSBjYXJkIG5ldmVyIHNob3dzIGFnYWluXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm5lZWRzSW5zdGFsbCA9IGZhbHNlO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgXG4gICAgICAgIC8vIHJlXHUyMDEwZHJhdyB0aGUgc2V0dGluZ3MgVUkgbm93IHRoYXQgd2UncmUgcGFzdCBmaXJzdFx1MjAxMHJ1blxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG4gICAgICB9KVxuICB9XG5cbiAgb25DbG9zZSgpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICB9XG59XG4iLCAiLy8gRlVUVVJFIFNZU1RFTVM6IFxuLy8gQ2FsbCBvZiBDdGh1bHUgXG4vLyBNb3RoZXJzaGlwXG4vLyBQRjJFXG4vLyBNXHUwMEY2cmsgQm9yZ1xuLy8gQmxhZGVzIGluIHRoZSBEYXJrXG4vLyBEZWx0YSBHcmVlblxuLy8gU3RhcmZpbmRlclxuLy8gVGhlIE9uZSBSaW5nXG4vLyBGYXRlIFxuLy8gQ3liZXJwdW5rXG4vLyBMYW5jZXJcbi8vIFBvd2VyZWQgYnkgdGhlIEFwb2NhbHlwc2Vcbi8vIFN0YXIgV2FycyBSUEdcblxuZXhwb3J0IGludGVyZmFjZSBFZGl0aW9uIHtcbiAgICBpZDogc3RyaW5nOyAgICAgICAgICAgICAgLy8gZS5nLiBcIjVlLTIwMTRcIlxuICAgIGxhYmVsOiBzdHJpbmc7ICAgICAgICAgICAvLyBlLmcuIFwiRCZEIDVFICgyMDE0KVwiXG4gICAgcmVwbz86IHN0cmluZzsgICAgICAgICAgICAvLyBlLmcuIFwiNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLTIwMTQtc3JjXCJcbiAgICBwYXJzZXI/OiBzdHJpbmc7ICAgICAgIC8vIHlvdXIgcGFyc2VyXHUyMDEwc2VsZWN0b3JcbiAgICBzb3VyY2VVcmw/OiBzdHJpbmc7XG4gICAgY2F0ZWdvcmllcz86IHN0cmluZ1tdO1xuICB9XG4gIFxuICBleHBvcnQgY29uc3QgQVZBSUxBQkxFX0VESVRJT05TOiBFZGl0aW9uW10gPSBbXG4gICAge1xuICAgICAgaWQ6ICc1ZS0yMDE0JyxcbiAgICAgIGxhYmVsOiAnRCZEIDVFICgyMDE0KScsXG4gICAgICByZXBvOiAnNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLTIwMTQtc3JjJyxcbiAgICAgIHBhcnNlcjogJzVlLWpzb24nLFxuICAgICAgc291cmNlVXJsOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLzVldG9vbHMtbWlycm9yLTMvNWV0b29scy0yMDE0LXNyYy9tYWluL2RhdGEnLFxuICAgICAgY2F0ZWdvcmllczogWycnXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnNWUtMjAyNScsXG4gICAgICBsYWJlbDogJ0QmRCA1RSAoMjAyNSknLFxuICAgICAgcmVwbzogJzVldG9vbHMtbWlycm9yLTMvNWV0b29scy1zcmMnLFxuICAgICAgcGFyc2VyOiAnNWUtMjAyNScsXG4gICAgICBzb3VyY2VVcmw6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLXNyYy9tYWluL2RhdGEnLFxuICAgIH0sXG4gXG4gICAgXG5cbiAgXTtcblxuICAgIC8vIHtcbiAgICAvLyAgIGlkOiAnJyxcbiAgICAvLyAgIGxhYmVsOiAnJyxcbiAgICAvLyAgIHJlcG86ICcnLFxuICAgIC8vICAgcGFyc2VyOiAnJyxcbiAgICAvLyAgIHNvdXJjZVVybDogJycsXG4gICAgLy8gICBjYXRlZ29yaWVzOiBbJyddLFxuICAgIC8vIH0sICAiLCAiaW1wb3J0IHsgQXBwLCBub3JtYWxpemVQYXRoIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgdHlwZSB7IEVkaXRpb24gfSBmcm9tIFwiLi4vLi4vZWRpdGlvbnNcIjtcbmltcG9ydCB7IHBhcnNlU3BlbGxzRmlsZSB9IGZyb20gXCIuL3NwZWxsc1wiO1xuaW1wb3J0IHsgcGFyc2VCZXN0aWFyeUZpbGUgfSBmcm9tIFwiLi9iZXN0aWFyeVwiO1xuaW1wb3J0IHsgcGFyc2VJdGVtc0ZpbGUgfSBmcm9tIFwiLi9pdGVtc1wiO1xuaW1wb3J0IHsgcGFyc2VTcGVjaWVzRmlsZSB9IGZyb20gXCIuL3NwZWNpZXNcIjtcbmltcG9ydCB7IHBhcnNlQ2xhc3NGaWxlIH0gZnJvbSBcIi4vY2xhc3Nlc1wiO1xuaW1wb3J0IHsgcGFyc2VBY3Rpb25zRmlsZSwgcGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlLCBwYXJzZVNlbnNlc0ZpbGUsIHBhcnNlU2tpbGxzRmlsZSB9IGZyb20gXCIuL3J1bGVzXCI7XG5pbXBvcnQgeyBwYXJzZUZlYXRzRmlsZSB9IGZyb20gXCIuL2ZlYXRzXCI7XG5pbXBvcnQgeyBwYXJzZUJhY2tncm91bmRzRmlsZSB9IGZyb20gXCIuL2JhY2tncm91bmRzXCI7XG5pbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5cbi8vIFx1MjAxNCBHaXRIdWIgbGlzdGluZ3MgXHUyMDE0XG5hc3luYyBmdW5jdGlvbiBsaXN0U3BlbGxGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvc3BlbGxzYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gZGF0YVxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIGl0ZW0ubmFtZS5zdGFydHNXaXRoKFwic3BlbGxzLVwiKSAmJiBpdGVtLm5hbWUuZW5kc1dpdGgoXCIuanNvblwiKSlcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdEJlc3RpYXJ5RmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL2Jlc3RpYXJ5YDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgbGlzdCA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICBjb25zdCBDT1JFX1NPVVJDRVMgPSBbXG4gICAgXCJiZXN0aWFyeS1waGIuanNvblwiLCBcImJlc3RpYXJ5LW1tLmpzb25cIiwgXCJiZXN0aWFyeS1kbWcuanNvblwiLFxuICAgIFwiYmVzdGlhcnkteGdlLmpzb25cIiwgXCJiZXN0aWFyeS12Z20uanNvblwiLCBcImJlc3RpYXJ5LXRjZS5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1lZ3cuanNvblwiLCBcImJlc3RpYXJ5LWVybHcuanNvblwiLCBcImJlc3RpYXJ5LW10Zi5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS12cmdyLmpzb25cIiwgXCJiZXN0aWFyeS1jb3MuanNvblwiLCBcImJlc3RpYXJ5LW9vdGEuanNvblwiLFxuICAgIFwiYmVzdGlhcnktcG90YS5qc29uXCIsIFwiYmVzdGlhcnktaG90ZHEuanNvblwiLCBcImJlc3RpYXJ5LXJvdC5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1za3QuanNvblwiLCBcImJlc3RpYXJ5LXRmdHlwLmpzb25cIiwgXCJiZXN0aWFyeS10b2EuanNvblwiXG4gIF07XG4gIHJldHVybiBsaXN0XG4gICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiYgQ09SRV9TT1VSQ0VTLmluY2x1ZGVzKGl0ZW0ubmFtZSkpXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbmNvbnN0IElURU1fSlNPTl9GSUxFUyA9IFtcbiAgXCJpdGVtcy1iYXNlLmpzb25cIixcbiAgXCJpdGVtcy5qc29uXCIsXG4gIFwib2JqZWN0cy5qc29uXCIsXG4gIFwidmVoaWNsZXMuanNvblwiLFxuICBcImRlY2tzLmpzb25cIixcbl07XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RJdGVtRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgZGF0YSA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gZGF0YVxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIElURU1fSlNPTl9GSUxFUy5pbmNsdWRlcyhpdGVtLm5hbWUpKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBsaXN0Q2xhc3NGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvY2xhc3NgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBsaXN0aW5nID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIHJldHVybiBsaXN0aW5nXG4gICAgLmZpbHRlcihpdGVtID0+XG4gICAgICBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmXG4gICAgICBpdGVtLm5hbWUuc3RhcnRzV2l0aChcImNsYXNzLVwiKSAmJlxuICAgICAgaXRlbS5uYW1lLmVuZHNXaXRoKFwiLmpzb25cIilcbiAgICApXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbi8vIFx1MjAxNCBlbnN1cmUgdGhlIHZhdWx0IGZvbGRlciBleGlzdHMgXHUyMDE0XG5hc3luYyBmdW5jdGlvbiBlbnN1cmVGb2xkZXIoYXBwOiBBcHAsIGZvbGRlclBhdGg6IHN0cmluZykge1xuICBjb25zdCBwYXJ0cyA9IGZvbGRlclBhdGguc3BsaXQoXCIvXCIpO1xuICBsZXQgY3VyciA9IFwiXCI7XG4gIGZvciAoY29uc3QgcCBvZiBwYXJ0cykge1xuICAgIGN1cnIgPSBjdXJyID8gYCR7Y3Vycn0vJHtwfWAgOiBwO1xuICAgIHRyeSB7IGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIoY3Vycik7IH1cbiAgICBjYXRjaCB7fSAvLyBhbHJlYWR5IGV4aXN0c1xuICB9XG59XG5cbi8vIFx1MjAxNCB0aGUgb25lIGVudHJ5LXBvaW50IHRoYXQgeW91ciB0b3AtbGV2ZWwgY2FsbHMgXHUyMDE0XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW1wb3J0RWRpdGlvbkRhdGEocGFyYW1zOiB7XG4gIGFwcDogQXBwO1xuICBlZGl0aW9uOiBFZGl0aW9uO1xuICB0YXJnZXRQYXRoOiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHsgYXBwLCBlZGl0aW9uLCB0YXJnZXRQYXRoIH0gPSBwYXJhbXM7XG4gIGNvbnN0IHJlcG8gPSBlZGl0aW9uLnJlcG8gPz8gXCJcIjtcblxuICAvLyBcdUQ4M0RcdUREMzkgU1BFTExTXG4gIHtcbiAgICBjb25zdCBzcGVsbEZpbGVzID0gYXdhaXQgbGlzdFNwZWxsRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZmlsZU5hbWUgb2Ygc3BlbGxGaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9zcGVsbHMvJHtmaWxlTmFtZX1gKTtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gcGFyc2VTcGVsbHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgICBmb3IgKGNvbnN0IG1kIG9mIGZpbGVzKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1NwZWxscy8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBzcGVsbCAke2ZpbGVOYW1lfTpgLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdUQ4M0RcdUREMzkgQkVTVElBUllcbiAge1xuICAgIGNvbnN0IGJlc3RpYXJ5RmlsZXMgPSBhd2FpdCBsaXN0QmVzdGlhcnlGaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBiZXN0aWFyeUZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgICAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYmVzdGlhcnkvJHtmaWxlTmFtZX1gKTtcbiAgICAgICAgY29uc3QganNvbiAgID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gcGFyc2VCZXN0aWFyeUZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgcGFyc2VkKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L0Jlc3RpYXJ5LyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGJlc3RpYXJ5ICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1RDgzRFx1REQzOSBJVEVNU1xuICB7XG4gICAgY29uc3QgaXRlbUZpbGVzID0gYXdhaXQgbGlzdEl0ZW1GaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmbiBvZiBpdGVtRmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vJHtmbn1gKTtcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUl0ZW1zRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGl0ZW1zIGZyb20gJHtmbn06YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4vLyBcdUQ4M0RcdUREMzkgU1BFQ0lFU1xue1xuICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3JhY2VzLmpzb25gKTtcbiAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNwZWNpZXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vUGxheWVyIEJ1aWxkLyR7bWQucGF0aH1gKTtcbiAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpKTtcbiAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gIH1cbn1cbi8vIFx1RDgzRFx1REQzOSBGRVRDSCBPUFRJT05BTCBGRUFUVVJFUyBKU09OXG5sZXQgb3B0aW9uYWxGZWF0dXJlczogYW55W10gPSBbXTtcbnRyeSB7XG4gIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vb3B0aW9uYWxmZWF0dXJlcy5qc29uYCk7XG4gIGNvbnN0IHJhdyAgPSBhd2FpdCByZXMuanNvbigpO1xuICBvcHRpb25hbEZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShyYXcub3B0aW9uYWxmZWF0dXJlKVxuICAgID8gcmF3Lm9wdGlvbmFsZmVhdHVyZVxuICAgIDogW107XG59IGNhdGNoIChlKSB7XG4gIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgb3B0aW9uYWxmZWF0dXJlcy5qc29uOlwiLCBlKTtcbn1cblxuLy8gXHVEODNEXHVERDM5IENMQVNTRVNcbntcbiAgY29uc3QgY2xhc3NGaWxlcyA9IGF3YWl0IGxpc3RDbGFzc0ZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBjbGFzc0ZpbGVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGZldGNoIHRoZSByYXcgY2xhc3MgSlNPTlxuICAgICAgY29uc3QgcmVzICAgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2NsYXNzLyR7ZmlsZU5hbWV9YCk7XG4gICAgICBjb25zdCBqc29uICAgPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICAvLyBwYXJzZSBpbnRvIG9uZSBvciBtb3JlIG1hcmtkb3duIGZpbGVzXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDbGFzc0ZpbGUoXG4gICAgICAgIGpzb24sXG4gICAgICAgIGVkaXRpb24uaWQsXG4gICAgICAgIGZpbGVOYW1lLFxuICAgICAgICBvcHRpb25hbEZlYXR1cmVzXG4gICAgICApO1xuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9QbGF5ZXIgQnVpbGQvJHttZC5wYXRofWApO1xuICAgICAgICAvLyAxKSBlbnN1cmUgdGhlIGZvbGRlciBleGlzdHNcbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKSk7XG5cbiAgICAgICAgLy8gMikgd3JpdGUgdmlhIE9ic2lkaWFuXHUyMDE5cyBBUEkgc28gbm90ZXMgcmVmcmVzaFxuICAgICAgICBjb25zdCBleGlzdGluZyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbFBhdGgpO1xuICAgICAgICBpZiAoZXhpc3RpbmcgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgIC8vIE92ZXJ3cml0ZSBhbiBleGlzdGluZyBub3RlIGFuZCBmaXJlIHRoZSBjaGFuZ2UgZXZlbnRcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQubW9kaWZ5KGV4aXN0aW5nLCBtZC5jb250ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDcmVhdGUgYSBicmFuZC1uZXcgbm90ZSAoYWxzbyBmaXJlcyB0aGUgY2hhbmdlIGV2ZW50KVxuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IGNsYXNzICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgIH1cbiAgfVxufVxuXG5cbiAvLyBcdUQ4M0RcdUREMzkgUlVMRVM6IEFDVElPTlNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYWN0aW9ucy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUFjdGlvbnNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgIFxuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGFjdGlvbnMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cblxuICAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogQ09ORElUSU9OUyAmIERJU0VBU0VTXG4gIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9jb25kaXRpb25zZGlzZWFzZXMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChcbiAgICAgICAgICBgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBjb25kaXRpb25zZGlzZWFzZXMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogU0VOU0VTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NlbnNlcy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNlbnNlc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgc2Vuc2VzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAgIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogU0tJTExTXG4gIHtcbiAgICB0cnkge1xuXG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NraWxscy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZVNraWxsc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgc2tpbGxzLmpzb246XCIsIGUpO1xuICAgIH1cbiAgfVxuXG4gICAvLyBcdUQ4M0RcdUREMzkgRkVBVFNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vZmVhdHMuanNvbmApO1xuICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VGZWF0c0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgZmVhdHMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbi8vIFx1RDgzRFx1REQzOSBCQUNLR1JPVU5EU1xue1xuICB0cnkge1xuICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vYmFja2dyb3VuZHMuanNvbmApO1xuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuXG4gICAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgICAvLyBtZC5wYXRoIGlzIFwiUGxheWVyIEJ1aWxkL0JhY2tncm91bmRzLzxOYW1lPi5tZFwiXG4gICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWApO1xuICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuXG4gICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgYmFja2dyb3VuZHMuanNvbjpcIiwgZSk7XG4gIH1cbn1cblxufSIsICIvLyBoZWxwZXJzL3NvdXJjZU1hcC50c1xuXG4vLyBNYXAgb2YgNWUgc291cmNlIGFiYnJldmlhdGlvbnMgdG8gdGhlaXIgZnVsbCB0aXRsZXNcbmNvbnN0IFNPVVJDRV9OQU1FX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgLy8gQ29yZSBydWxlYm9va3NcbiAgUEhCOiBcIlBsYXllcidzIEhhbmRib29rXCIsXG4gIE1NOiAgXCJNb25zdGVyIE1hbnVhbFwiLFxuICBETUc6IFwiRHVuZ2VvbiBNYXN0ZXIncyBHdWlkZVwiLFxuXG4gIC8vIE9mZmljaWFsIGV4cGFuc2lvbnMgJiBhZHZlbnR1cmUgbW9kdWxlc1xuICBDb1M6ICBcIkN1cnNlIG9mIFN0cmFoZFwiLFxuICBPb3RBOiBcIk91dCBvZiB0aGUgQWJ5c3NcIixcbiAgUG90QTogXCJQcmluY2VzIG9mIHRoZSBBcG9jYWx5cHNlXCIsXG4gIEhvdERROiBcIkhvYXJkIG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgUm9UOiAgXCJSaXNlIG9mIFRpYW1hdFwiLFxuICBTS1Q6ICBcIlN0b3JtIEtpbmcncyBUaHVuZGVyXCIsXG4gIFRmdFlQOlwiVGFsZXMgZnJvbSB0aGUgWWF3bmluZyBQb3J0YWxcIixcbiAgVG9BOiAgXCJUb21iIG9mIEFubmloaWxhdGlvblwiLFxuXG4gIC8vIFN1cHBsZW1lbnRhbCBndWlkZXNcbiAgWEdFOiBcIlhhbmF0aGFyJ3MgR3VpZGUgdG8gRXZlcnl0aGluZ1wiLFxuICBWR006IFwiVm9sbydzIEd1aWRlIHRvIE1vbnN0ZXJzXCIsXG4gIFRDRTogXCJUYXNoYSdzIENhdWxkcm9uIG9mIEV2ZXJ5dGhpbmdcIixcbiAgRUdXOiBcIkViZXJyb246IFJpc2luZyBmcm9tIHRoZSBMYXN0IFdhclwiLFxuICBFUkxXOlwiRXhwbG9yZXIncyBHdWlkZSB0byBXaWxkZW1vdW50XCIsXG4gIE1URjogXCJNb25zdGVycyBvZiB0aGUgTXVsdGl2ZXJzZVwiLFxuICBWUkdSOlwiVmFuIFJpY2h0ZW4ncyBHdWlkZSB0byBSYXZlbmxvZnRcIixcblxuICAvLyBBZGRpdGlvbmFsIHNvdXJjZWJvb2tzXG4gIEFBRzogICAgICBcIkFzdHJhbCBBZHZlbnR1cmVyXHUyMDE5cyBHdWlkZVwiLFxuICBBSTogICAgICAgXCJBY3F1aXNpdGlvbnMgSW5jb3Jwb3JhdGVkXCIsXG4gIEFpdEZSQVZGVDpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmlzdWFsIEZpZWxkIFRlc3RcIixcbiAgQk1UOiAgICAgIFwiQmlnIE1vbnN0ZXIgVG9tZVwiLFxuICBEb0RrOiAgICAgXCJEcmFnb24gb2YgRGFya2tlZXBcIixcbiAgRlREOiAgICAgIFwiRml6YmFuXHUyMDE5cyBUcmVhc3VyeSBvZiBEcmFnb25zXCIsXG4gIEdHUjogICAgICBcIkd1aWxkbWFzdGVyXHUyMDE5cyBHdWlkZSB0byBSYXZuaWNhXCIsXG4gIEdITG9FOiAgICBcIkdob3N0cyBvZiB0aGUgSG9yaXpvbjogTGlnaHQgT3ZlciBFbGVuc2FyaWFcIixcbiAgSURSb3RGOiAgIFwiSWNld2luZCBEYWxlOiBSaW1lIG9mIHRoZSBGcm9zdG1haWRlblwiLFxuICBMTEs6ICAgICAgXCJMb3N0IExhYm9yYXRvcnkgb2YgS3dhbGlzaFwiLFxuICBTYXRPOiAgICAgXCJTYXBwaGlyZSBvZiBUcnV0aFwiLFxuICBTQ0M6ICAgICAgXCJTdHJpeGhhdmVuOiBDdXJyaWN1bHVtIG9mIENoYW9zXCIsXG4gIFREQ1NSOiAgICBcIlRoZSBEdW5nZW9uIENvYWNoXHUyMDE5cyBSdWxlYm9va1wiLFxuICBKdHRSQzogICAgXCJKb3VybmV5cyB0aHJvdWdoIHRoZSBSYWRpYW50IENpdGFkZWxcIixcbiAgXCJBaXRGUi1BVlRcIjpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmVyZGFudCBUb21iXCIsXG4gIFwiQWl0RlItRkNEXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBGcm9tIEN5YW4gRGVwdGhzXCIsXG4gIFJNUjogICAgICBcIkR1bmdlb25zIGFuZCBEcmFnb25zOiBSaWNrIGFuZCBNb3J0eVwiLFxuICBTQ0FHOiAgICAgXCJTd29yZCBDb2FzdCBBZHZlbnR1cmVyJ3MgR3VpZGVcIixcbiAgRUVQQzogICAgIFwiRWxlbWVudGFsIEV2aWwgUGxheWVyJ3MgQ29tcGFuaW9uXCIsXG4gIE1PVDogICAgICBcIk15dGhpYyBPZHlzc2V5cyBvZiBUaGVyb3NcIixcbiAgV0J0VzogICAgIFwiVGhlIFdpbGQgQmV5b25kIHRoZSBXaXRjaGxpZ2h0XCIsXG4gIEJHRElBOiAgICBcIkJhbGR1cidzIEdhdGU6IERlc2NlbnQgSW50byBBdmVybnVzXCIsXG4gIFRvRlc6ICAgICBcIlR1cm4gb2YgRm9ydHVuZSdzIFdoZWVsXCIsXG4gIENvQTogICAgICBcIkNoYWlucyBvZiBBc21vZGV1c1wiLFxuICBDUkNvdE46ICAgXCJDcml0aWNhbCBSb2xlOiBDYWxsIG9mIHRoZSBOZXRoZXJkZWVwXCIsXG4gIFRvRDogICAgICBcIlR5cmFubnkgb2YgRHJhZ29uc1wiLFxuICBNUE1NOiAgICAgXCJNb3JkZW5rYWluZW4gUHJlc2VudHM6IE1vbnN0ZXJzIG9mIHRoZSBNdWx0aXZlcnNlXCIsXG4gIExvWDogICAgICBcIkxpZ2h0IG9mIFhhcnl4aXNcIixcbiAgUWZ0SVM6ICAgIFwiUXVlc3RzIGZyb20gdGhlIEluZmluaXRlIFN0YWlyY2FzZVwiLFxuICBXREg6ICAgICAgXCJXYXRlcmRlZXA6IERyYWdvbiBIZWlzdFwiLFxuICBXRE1NOiAgICAgXCJXYXRlcmRlZXA6IER1bmdlb24gb2YgdGhlIE1hZCBNYWdlXCIsXG4gIFBhQlRTTzogICBcIlBoYW5kZWx2ZXIgYW5kIEJlbG93OiBUaGUgU2hhdHRlcmVkIE9iZWxpc2tcIixcbiAgQ006ICAgICAgIFwiQ2FuZGxla2VlcCBNeXN0ZXJpZXNcIixcbiAgR29TOiAgICAgIFwiR2hvc3RzIG9mIFNhbHRtYXJzaFwiLFxuICBEU290RFE6ICAgXCJEcmFnb25sYW5jZTogU2hhZG93IG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgS2Z0R1Y6ICAgIFwiS2V5cyBmcm9tIHRoZSBHb2xkZW4gVmF1bHRcIixcbiAgU0RXOiAgICAgIFwiRXNzZW50aWFscyBLaXQ6IFNsZWVwaW5nIERyYWdvbidzIFdha2VcIixcbiAgRG9TSTogICAgIFwiRHJhZ29ucyBvZiBTdG9ybXdyZWNrIElzbGVcIixcbiAgR290U0Y6ICAgIFwiR2lhbnRzIG9mIHRoZSBTdGFyIEZvcmdlXCIsXG4gIERJUDogICAgICBcIkVzc2VudGlhbHMgS2l0OiBEcmFnb24gb2YgSWNlc3BpcmUgUGVha1wiLFxuICBTTFc6ICAgICAgXCJFc3NlbnRpYWxzIEtpdDogU3Rvcm0gTG9yZCdzIFdyYXRoXCIsXG4gIElNUjogICAgICBcIkluZmVybmFsIE1hY2hpbmUgUmVidWlsZFwiLFxuICBWRW9SOiAgICAgXCJWZWNuYTogRXZlIG9mIFJ1aW5cIixcbiAgUFNJOiAgICAgIFwiUGxhbmUgU2hpZnQ6IElubmlzdHJhZFwiLFxuICBBQVRNOiAgICAgXCJBZHZlbnR1cmUgQXRsYXM6IFRoZSBNb3J0dWFyeVwiLFxuICBQU1o6ICAgICAgXCJQbGFuZSBTaGlmdDogWmVuZGlrYXJcIixcbiAgREM6ICAgICAgIFwiRXNzZW50aWFscyBLaXQ6IERpdmluZSBDb250ZW50aW9uXCIsXG4gIExNb1A6ICAgICBcIkxvc3QgTWluZSBvZiBQaGFuZGVsdmVyXCIsXG4gIFJNQlJFOiAgICBcIlRoZSBMb3N0IER1bmdlb24gb2YgUmlja2VkbmVzczogQmlnIFJpY2sgRW5lcmd5XCIsXG4gIEhmdFQ6ICAgICBcIkh1bnQgZm9yIHRoZSBUaGVzc2FsaHlkcmFcIixcbiAgUFNYOiAgICAgIFwiUGxhbmUgU2hpZnQ6IEl4YWxhblwiLFxuICBIRlN0Q006ICAgXCJIZXJvZXMnIEZlYXN0OiBTYXZpbmcgdGhlIENoaWxkcmVucyBNZW51XCIsXG4gIFNqQTogICAgICBcIlNwZWxsamFtbWVyIEFjYWRlbXlcIixcbiAgTEs6ICAgICAgIFwiTGlnaHRuaW5nIEtlZXBcIixcbiAgUnRHOiAgICAgIFwiUmV0dXJuIHRvIHRoZSBHbG9yeVwiLFxuICBUVFA6ICAgICAgXCJUaGUgVG9ydGxlIFBhY2thZ2VcIixcbiAgTFI6ICAgICAgIFwiTG9jYXRoYWggUmlzaW5nXCIsXG4gIFBTQTogICAgICBcIlBsYW5lIFNoaWZ0OiBBbW9ua2hldFwiLFxuICBPR0E6ICAgICAgXCJPbmUgR3J1bmcgQWJvdmVcIixcbiAgXCJOUkgtVExUXCI6ICBcIk5lcmRzIFJlc3RvcmluZyBIYXJtb255OiBUaGUgTG9zdCBUb21iXCIsXG4gIFwiTlJILUFUXCI6ICAgXCJOZXJkcyBSZXN0b3JpbmcgSGFybW9ueTogQWR2ZW50dXJlIFRvZ2V0aGVyXCIsXG4gIEJHRzogICAgICBcIkJpZ2J5IFByZXNlbnRzOiBHbG9yeSBvZiB0aGUgR2lhbnRzXCIsXG4gIFJvVE9TOiAgICBcIlRoZSBSaXNlIG9mIFRpYW1hdCBPbmxpbmUgU3VwcGxlbWVudFwiLFxuICBYTXRTOiAgICAgXCJYIE1hcmtzIHRoZSBTcG90XCIsXG4gIFwiSEFULUxNSVwiOiAgXCJIb25vciBBbW9uZyBUaGVpdmVzOiBMZWdlbmRhcnkgTWFnaWMgSXRlbXNcIixcbiAgRGl0TENvVDogIFwiRGVzY2VudCBpbnRvIHRoZSBMb3N0IENhdmVybnMgb2YgVHNvamNhbnRoXCIsXG4gIFwiQWl0RlItRE5cIjogXCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBEZWVwZXN0IE5pZ2h0XCIsXG4gIFwiQWl0RlItVEhQXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBUaGUgSGlkZGVuIFBhZ2VzXCIsXG4gIEJBTTogICAgICBcIkJvbydzIEFzdHJhbCBNZW5hZ2VyaWVcIixcbiAgQVpmeVQ6ICAgIFwiQSBaaWIgZm9yIFlvdXIgVGhvdWd0c1wiLFxuICBNQ1YyREM6ICAgXCJNb25zdHJvdXMgQ29tcGVuZGl1bSBWb2x1bWUgMjogRHJhZ29ubGFuY2UgQ3JlYXR1cmVzXCIsXG4gIFBTSzogICAgICBcIlBsYW5lIFNoaWZ0OiBLYWxhZGVzaFwiLFxuICBQU0Q6ICAgICAgXCJQbGFuZSBTaGlmdDogRG9taW5hcmlhXCIsXG4gIEFXTTogICAgICBcIkFkdmVudHVyZSB3aXRoIE11a1wiLFxuICBVQVRoZU15c3RpY0NsYXNzOiBcIlVuZWFydGhlZCBBcmNhbmE6IFRoZSBNeXN0aWMgQ2xhc3NcIixcbiAgQUxDdXJzZU9mU3RyYWhkOiBcIkFkdmVudHVyZXJzIExlYWd1ZTogQ3Vyc2Ugb2YgU3RyYWhkXCIsXG4gIEFMRWxlbWVudGFsRXZpbDogXCJBZHZlbnR1cmVycyBMZWFndWU6IEVsZW1lbnRhbCBFdmlsXCIsXG4gIEFMUmFnZU9mRGVtb25zOiAgXCJBZHZlbnR1cmVycyBMZWFndWU6IFJhZ2Ugb2YgRGVtb25zXCJcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZnVsbCBzb3VyY2UgbmFtZSBmb3IgYSBnaXZlbiBhYmJyZXZpYXRpb24uXG4gKiBPcHRpb25hbGx5IGFwcGVuZHMgeWVhciBmb3IgUEhCIHZhcmlhbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVsbFNvdXJjZU5hbWUoYWJicmV2OiBzdHJpbmcsIGVkaXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBuYW1lID0gU09VUkNFX05BTUVfTUFQW2FiYnJldl0gPz8gYWJicmV2O1xuXG4gIC8vIEFwcGVuZCB5ZWFyIGZvciBQSEIgaWYgdGhlIGVkaXRpb24gY29udGV4dCBpcyBrbm93blxuICBpZiAoYWJicmV2ID09PSBcIlBIQlwiKSB7XG4gICAgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDE0XCIpKSBuYW1lICs9IFwiICgyMDE0KVwiO1xuICAgIGVsc2UgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDI1XCIpKSBuYW1lICs9IFwiICgyMDI1KVwiO1xuICB9XG5cbiAgcmV0dXJuIG5hbWU7XG59XG4iLCAiLy8gcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvdGFnUmVwbGFjZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2U1ZVRhZ3MoaW5wdXQ6IHVua25vd24pOiBzdHJpbmcge1xuICAvLyAxKSBUdXJuIGFycmF5cyBpbnRvIHNwYWNlLWpvaW5lZCBzdHJpbmdzXG4gIC8vIDIpIExlYXZlIHN0cmluZ3MgYWxvbmVcbiAgLy8gMykgQ29lcmNlIGV2ZXJ5dGhpbmcgZWxzZSB0byBzdHJpbmcgKG9yIGVtcHR5KVxuICBsZXQgdGV4dDogc3RyaW5nO1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICB0ZXh0ID0gaW5wdXQuam9pbihcIiBcIik7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgdGV4dCA9IGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHRleHQgPSBTdHJpbmcoaW5wdXQgPz8gXCJcIik7XG4gIH1cblxuICAvLyBub3cgcnVuIGFsbCB5b3VyIEAtdGFnIHJlcGxhY2VtZW50cyBvbiB0aGF0IHRleHRcbiAgcmV0dXJuIHRleHRcbiAgICAucmVwbGFjZSgvXFx7QChzcGVsbHxpdGVtfGNyZWF0dXJlfHJhY2UpIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgX18sIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemVFYWNoKG5hbWUpfV1dYFxuICAgIClcbiAgICAucmVwbGFjZSgvXFx7QChjb25kaXRpb258c3RhdHVzfGFjdGlvbnxza2lsbCkgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCB0YWcsIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemUodGFnKX1zIyR7bmFtZX18JHtjYXBpdGFsaXplRWFjaChuYW1lKX1dXWBcbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0BjbGFzc0ZlYXR1cmUgKFtefH1dKylcXHwoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIGZlYXR1cmUsIGNscykgPT5cbiAgICAgIGBbWyR7Y2xzfSMke2ZlYXR1cmV9XV1gXG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAKGJvb2t8ZmlsdGVyKSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIF9fLCB0eHQpID0+IHR4dClcbiAgICAucmVwbGFjZSgvXFx7QG5vdGUgKFtefV0rKVxcfS9nLCAoXywgbm90ZSkgPT4gYCoke25vdGV9KmApXG4gICAgLnJlcGxhY2UoL1xce0AoZGFtYWdlfGRpY2V8ZGN8aGl0fHNlbnNlKSAoW159XSspXFx9L2csIChfLCBfXywgdmFsdWUpID0+IHZhbHVlKVxuICAgIC5yZXBsYWNlKC9cXHtAY2hhbmNlIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgdmFsdWUpID0+IGAke3ZhbHVlfSVgKVxuICAgIC5yZXBsYWNlKC9cXHtAcXVpY2tyZWYgKFtefH1dKykoPzpcXHxbXnxdKlxcfFtefV0qKT9cXH0vZywgKF8sIHRlcm0pID0+IHtcbiAgICAgIGNvbnN0IGtub3duID0gW1xuICAgICAgICBcImRpZmZpY3VsdCB0ZXJyYWluXCIsIFwidG90YWwgY292ZXJcIiwgXCJoYWxmIGNvdmVyXCIsIFwidGhyZWUtcXVhcnRlcnMgY292ZXJcIixcbiAgICAgICAgXCJoZWF2aWx5IG9ic2N1cmVkXCIsIFwibGlnaHRseSBvYnNjdXJlZFwiXG4gICAgICBdO1xuICAgICAgcmV0dXJuIGtub3duLmluY2x1ZGVzKHRlcm0udG9Mb3dlckNhc2UoKSlcbiAgICAgICAgPyBgW1tSdWxlcyMke2NhcGl0YWxpemVFYWNoKHRlcm0pfV1dYFxuICAgICAgICA6IHRlcm07XG4gICAgfSlcbiAgICAucmVwbGFjZSgvXFx7XFxANWV0b29sc1xccysoW158fV0rKVxcfFtefV0rXFx9L2csICckMScpXG4gICAgLnJlcGxhY2UoL1xce0ByZWNoYXJnZVxccyooW159XSspXFx9L2csIChfLCBudW0pID0+IGAocmVjaGFyZ2U6ICR7bnVtLnRyaW0oKX0pYClcbiAgICAucmVwbGFjZSgvXFx7QChzY2FsZWRpY2V8c2NhbGVkYW1hZ2UpW159XSpcXHwoW158fV0rKVxcfS9nLCAoXywgX18sIHZhbHVlKSA9PiB2YWx1ZSlcbiAgICAucmVwbGFjZSgvXFx7QGQyMFtefV0qXFx9L2csIFwiXCIpXG4gICAgLnJlcGxhY2UoL1xce0BbXn1dK1xcfS9nLCBcIlwiKTtcbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZUVhY2goc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc3RyLnNwbGl0KFwiIFwiKS5tYXAoY2FwaXRhbGl6ZSkuam9pbihcIiBcIik7XG59XG4iLCAiaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJNYXJrZG93blRhYmxlKGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAoZW50cnkudHlwZSAhPT0gXCJ0YWJsZVwiIHx8ICFBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCBjYXB0aW9uID0gZW50cnkuY2FwdGlvbiA/IGAjIyMjIyAke2VudHJ5LmNhcHRpb259XFxuYCA6IFwiXCI7XG5cbiAgY29uc3QgaGVhZGVycyA9IChlbnRyeS5jb2xMYWJlbHMgPz8gW10pXG4gICAgLm1hcCgoaDogc3RyaW5nKSA9PiByZXBsYWNlNWVUYWdzKGgudHJpbSgpKSk7IC8vIFx1MjcwNSB0YWcgcmVwbGFjZSBvbiBoZWFkZXJzXG5cbiAgY29uc3QgaGVhZGVyUm93ID0gYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgO1xuICBjb25zdCBkaXZpZGVyUm93ID0gYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIjotLVwiKS5qb2luKFwiIHwgXCIpfSB8YDtcblxuICBjb25zdCBib2R5Um93cyA9IGVudHJ5LnJvd3MubWFwKChyb3c6IGFueVtdKSA9PiB7XG4gICAgY29uc3QgY2VsbHMgPSByb3cubWFwKChjZWxsKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGNlbGwgPT09IFwic3RyaW5nXCIpIHJldHVybiByZXBsYWNlNWVUYWdzKGNlbGwpOyAvLyBcdTI3MDUgdGFnIHJlcGxhY2Ugc3RyaW5nc1xuXG4gICAgICBpZiAodHlwZW9mIGNlbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKGNlbGwucm9sbD8uZXhhY3QgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGAke2NlbGwucm9sbC5leGFjdH1gO1xuICAgICAgICBpZiAoY2VsbC5yb2xsPy5taW4gIT09IHVuZGVmaW5lZCAmJiBjZWxsLnJvbGw/Lm1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2NlbGwucm9sbC5taW59XHUyMDEzJHtjZWxsLnJvbGwubWF4fWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoSlNPTi5zdHJpbmdpZnkoY2VsbCkpOyAvLyBmYWxsYmFjayBmb3IgdW5rbm93biBzaGFwZXNcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKGNlbGwpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBgfCAke2NlbGxzLmpvaW4oXCIgfCBcIil9IHxgO1xuICB9KTtcblxuICByZXR1cm4gYCR7Y2FwdGlvbn0ke2hlYWRlclJvd31cXG4ke2RpdmlkZXJSb3d9XFxuJHtib2R5Um93cy5qb2luKFwiXFxuXCIpfWA7XG59XG4iLCAiLy8gZm9ybWF0RW50cnkudHNcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL21hcmtkb3duVGFibGVcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgY2xlYW5lZCA9IGVudHJ5LnRyaW0oKTtcbiAgICBpZiAoIWNsZWFuZWQgfHwgY2xlYW5lZCA9PT0gXCJ9XCIpIHJldHVybiBcIlwiO1xuICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGNsZWFuZWQpO1xuICB9XG5cbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBib2R5ID0gZW50cnkuZW50cmllc1xuICAgICAgLm1hcChmb3JtYXRFbnRyeSlcbiAgICAgIC5maWx0ZXIoKHN0cjogc3RyaW5nKSA9PiBzdHIudHJpbSgpLmxlbmd0aCA+IDApXG4gICAgICAuam9pbihcIlxcblxcblwiKTtcblxuICAgIHJldHVybiBlbnRyeS5uYW1lXG4gICAgICA/IGAjIyMjIyAke2VudHJ5Lm5hbWV9XFxuJHtib2R5fWBcbiAgICAgIDogYm9keTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgIHJldHVybiBlbnRyeS5pdGVtc1xuICAgICAgLm1hcCgoaTogYW55KSA9PiBgLSAke3JlcGxhY2U1ZVRhZ3ModHlwZW9mIGkgPT09IFwic3RyaW5nXCIgPyBpIDogSlNPTi5zdHJpbmdpZnkoaSkpfWApXG4gICAgICAuam9pbihcIlxcblwiKTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgIHJldHVybiByZW5kZXJNYXJrZG93blRhYmxlKGVudHJ5KTtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcInF1b3RlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgIGNvbnN0IHF1b3RlID0gZW50cnkuZW50cmllcy5tYXAoZm9ybWF0RW50cnkpLmpvaW4oXCIgXCIpLnRyaW0oKTtcbiAgICBjb25zdCBhdXRob3IgPSBlbnRyeS5ieSA/IGAgXHUyMDE0ICR7ZW50cnkuYnl9YCA6IFwiXCI7XG4gICAgcmV0dXJuIGAqXCIke3F1b3RlfSR7YXV0aG9yfVwiKmA7XG4gIH1cblxuICBpZiAoZW50cnkudHlwZSA9PT0gXCJpbnNldFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBpbnNldCA9IGVudHJ5LmVudHJpZXMubWFwKGZvcm1hdEVudHJ5KS5qb2luKFwiXFxuXCIpLnRyaW0oKTtcbiAgICByZXR1cm4gYD4gJHtpbnNldC5yZXBsYWNlKC9cXG4vZywgXCJcXG4+IFwiKX1gO1xuICB9XG5cbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwicmVmQ2xhc3NGZWF0dXJlXCIgJiYgdHlwZW9mIGVudHJ5LmNsYXNzRmVhdHVyZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IFtuYW1lXSA9IGVudHJ5LmNsYXNzRmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgLnJlcGxhY2UoL1teXFx3XFxzLV0vZywgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiLVwiKVxuICAgICAgLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIGBbWyMke2FuY2hvcn1dXWA7XG4gIH1cblxuICAvLyBJZiBpdCdzIGFuIHVua25vd24gb2JqZWN0LCBza2lwIGl0IHNhZmVseVxuICByZXR1cm4gXCJcIjtcbn1cbiIsICIvLyBwYXJzZXJzLzVlLWpzb24vYmVzdGlhcnkudHNcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwic3JjL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEJFU1RJQVJZX01FVEFfREVGUywgdW5pZmllZFNraWxscywgRk1fRklFTERTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5jb25zdCBza2lwcGVkTW9uc3RlcnM6IHN0cmluZ1tdID0gW107XG5cbi8vIFNpemUgYWJicmV2aWF0aW9ucyBtYXBwaW5nXG5leHBvcnQgXG5jb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbi8vIEFsaWdubWVudCBhYmJyZXZpYXRpb25zIG1hcHBpbmdcbmNvbnN0IEFMSUdOTUVOVF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEw6IFwiTGF3ZnVsXCIsXG4gIE46IFwiTmV1dHJhbFwiLFxuICBDOiBcIkNoYW90aWNcIixcbiAgRzogXCJHb29kXCIsXG4gIEU6IFwiRXZpbFwiLFxuICBVOiBcIlVuYWxpZ25lZFwiXG59O1xuXG4vLyBIZWxwZXIgdG8gY2FwaXRhbGl6ZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmdcbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdChzdHI6IHVua25vd24pOiBzdHJpbmcge1xuICBjb25zdCBzID0gU3RyaW5nKHN0ciB8fCBcIlwiKTtcbiAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U2l6ZUFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBTSVpFX01BUFthYmJyZXZdIHx8IGFiYnJldjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEFsaWdubWVudEFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBhYmJyZXZcbiAgICAudHJpbSgpXG4gICAgLnNwbGl0KC9cXHMrLylcbiAgICAubWFwKGxldHRlciA9PiBBTElHTk1FTlRfTUFQW2xldHRlcl0gfHwgbGV0dGVyKVxuICAgIC5qb2luKFwiIFwiKTtcbn1cblxuY29uc3QgUkFXX05QQ1M6IHN0cmluZ1tdID0gW1xuICBcIkFianVyZXJcIiwgXCJBY29seXRlXCIsIFwiQXBwcmVudGljZSBXaXphcmRcIiwgXCJBcmNoZHJ1aWRcIiwgXCJBcmNoZXJcIiwgXCJBcmNobWFnZVwiLCBcIkFzc2Fzc2luXCIsXG4gIFwiQmFuZGl0XCIsIFwiQmFuZGl0IENhcHRhaW5cIiwgXCJCYXJkXCIsIFwiQmVyc2Vya2VyXCIsIFwiQmxhY2tndWFyZFwiLCBcIkNoYW1waW9uXCIsIFwiQ29tbW9uZXJcIixcbiAgXCJDb25qdXJlclwiLCBcIkN1bHQgRmFuYXRpY1wiLCBcIkN1bHRpc3RcIiwgXCJEaXZpbmVyXCIsIFwiRHJ1aWQgKE5QQylcIiwgXCJEcnVpZCBOUENcIiwgXCJFbmNoYW50ZXJcIixcbiAgXCJFdm9rZXJcIiwgXCJHbGFkaWF0b3JcIiwgXCJHdWFyZFwiLCBcIklsbHVzaW9uaXN0XCIsIFwiS25pZ2h0XCIsIFwiS3Jha2VuIFByaWVzdFwiLCBcIk1hZ2VcIixcbiAgXCJNYXJ0aWFsIEFydHMgQWRlcHRcIiwgXCJNYXN0ZXIgVGhpZWZcIiwgXCJOZWNyb21hbmNlclwiLCBcIk5vYmxlXCIsIFwiUHJpZXN0XCIsIFwiU2NvdXRcIiwgXCJTcHlcIixcbiAgXCJTd2FzaGJ1Y2tsZXJcIiwgXCJUaHVnXCIsIFwiVHJhbnNtdXRlclwiLCBcIlRyaWJhbCBXYXJyaW9yXCIsIFwiVmV0ZXJhblwiLCBcIldhciBQcmllc3RcIixcbiAgXCJXYXJsb2NrIG9mIHRoZSBBcmNoZmV5XCIsIFwiV2FybG9jayBvZiB0aGUgRmllbmRcIiwgXCJXYXJsb2NrIG9mIHRoZSBHcmVhdCBPbGQgT25lXCIsIFwiV2FybG9yZFwiXG5dO1xuY29uc3QgTk9STUFMSVpFRF9OUENfTkFNRVMgPSBuZXcgU2V0KFJBV19OUENTLm1hcChuID0+IG5vcm1hbGl6ZU5hbWUobikpKTtcblxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2F0ZWdvcml6ZUNyZWF0dXJlKG1vbnN0ZXI6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IHR5cGVWYWx1ZSA9IG1vbnN0ZXIudHlwZTtcbiAgY29uc3QgbmFtZSA9IG1vbnN0ZXIubmFtZTtcbiAgY29uc3QgdCA9IHR5cGVvZiB0eXBlVmFsdWUgPT09IFwic3RyaW5nXCJcbiAgICA/IHR5cGVWYWx1ZS50b0xvd2VyQ2FzZSgpXG4gICAgOiB0eXBlVmFsdWU/LnR5cGU/LnRvTG93ZXJDYXNlKCkgfHwgU3RyaW5nKHR5cGVWYWx1ZSkudG9Mb3dlckNhc2UoKTtcblxuICBjb25zdCBub3JtYWxpemVkTmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSk7XG5cbiAgaWYgKG1vbnN0ZXIuaXNOcGMgfHwgbW9uc3Rlci5pc05hbWVkQ3JlYXR1cmUpIHJldHVybiBcIlN0b3J5IE5QQ3NcIjtcbiAgaWYgKHQgPT09IFwiYmVhc3RcIikgcmV0dXJuIFwiQmVhc3RzXCI7XG4gIGlmICh0ID09PSBcImh1bWFub2lkXCIgJiYgTk9STUFMSVpFRF9OUENfTkFNRVMuaGFzKG5vcm1hbGl6ZWROYW1lKSkgcmV0dXJuIFwiTm9uLUJlYXN0c1wiO1xuICBpZiAodCA9PT0gXCJodW1hbm9pZFwiKSByZXR1cm4gXCJNb25zdGVyc1wiO1xuICByZXR1cm4gXCJNb25zdGVyc1wiO1xufVxuXG5mdW5jdGlvbiByZW5kZXJBYmlsaXRpZXNUYWJsZShzdHI6IG51bWJlciwgZGV4OiBudW1iZXIsIGNvbjogbnVtYmVyLCBpbnQ6IG51bWJlciwgd2lzOiBudW1iZXIsIGNoYTogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIFtcbiAgICBgfCBTVFIgfCBERVggfCBDT04gfCBJTlQgfCBXSVMgfCBDSEEgfGAsXG4gICAgYHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHxgLFxuICAgIGB8ICR7c3RyfSB8ICR7ZGV4fSB8ICR7Y29ufSB8ICR7aW50fSB8ICR7d2lzfSB8ICR7Y2hhfSB8YFxuICBdLmpvaW4oXCJcXG5cIik7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBuYW1lID0gZW50cnkubmFtZTtcbiAgbGV0IGRlc2NyaXB0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5lbnRyaWVzO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5lbnRyaWVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmVudHJpZXNdO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZGVzYykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5kZXNjO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5kZXNjID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmRlc2NdO1xuICB9XG4gIGNvbnN0IHJhdyA9IGRlc2NyaXB0aW9ucy5qb2luKFwiIFwiKTtcbiAgY29uc3QgZGVzYyA9IHJlcGxhY2U1ZVRhZ3MocmF3KTtcbiAgcmV0dXJuIGAqKioke25hbWV9LioqKiAke2Rlc2N9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmVzdGlhcnlGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gICAgaWYgKCFqc29uLm1vbnN0ZXIpIHJldHVybiBbXTtcbiAgICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG4gIFxuICAgIC8vIDEpIEZpbHRlciBvdXQgXHUyMDFDcmVmZXJlbmNlXHUyMDFEIGVudHJpZXMgd2l0aCBubyBBQyBvciBIUFxuICAgIGNvbnN0IHZhbGlkTW9uc3RlcnMgPSBqc29uLm1vbnN0ZXIuZmlsdGVyKChtOiBhbnkpID0+IHtcbiAgICBjb25zdCBhY1ZhbCA9IEFycmF5LmlzQXJyYXkobS5hYylcbiAgICAgID8gbS5hY1swXT8uYWMgPz8gbS5hY1swXVxuICAgICAgOiB0eXBlb2YgbS5hYyA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IG0uYWM/LmFjID8/IG51bGxcbiAgICAgICAgOiBtLmFjO1xuXG4gICAgY29uc3QgaHBWYWwgPSB0eXBlb2YgbS5ocCA9PT0gXCJvYmplY3RcIlxuICAgICAgPyBtLmhwPy5hdmVyYWdlID8/IG0uaHA/LmhwID8/IG51bGxcbiAgICAgIDogbS5ocDtcbiAgICAgIHJldHVybiBhY1ZhbCAhPSBudWxsICYmIGhwVmFsICE9IG51bGwgJiYgIWlzTmFOKE51bWJlcihhY1ZhbCkpICYmICFpc05hTihOdW1iZXIoaHBWYWwpKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGFsbE5hbWVzID0gbmV3IFNldChqc29uLm1vbnN0ZXIubWFwKChtOiBhbnkpID0+IG0ubmFtZSkpO1xuY29uc3QgdmFsaWROYW1lcyA9IG5ldyBTZXQodmFsaWRNb25zdGVycy5tYXAoKG06IGFueSkgPT4gbS5uYW1lKSk7XG5jb25zdCBtaXNzaW5nID0gWy4uLmFsbE5hbWVzXS5maWx0ZXIobmFtZSA9PiAhdmFsaWROYW1lcy5oYXMobmFtZSkpO1xuXG4gIFxuICAgIHJldHVybiB2YWxpZE1vbnN0ZXJzLm1hcCgobW9uc3RlcjogYW55KSA9PiB7XG4gICAgICBjb25zdCBuYW1lICAgICA9IG1vbnN0ZXIubmFtZSBhcyBzdHJpbmc7XG4gICAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvXFwvL2csIFwiLVwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgUmF3IGZpZWxkcyAmIGZvcm1hdHRpbmcgXHUyMDE0XG4gICAgICBjb25zdCByYXdTaXplICAgICAgPSBtb25zdGVyLnNpemUgfHwgXCJNXCI7XG4gICAgICBjb25zdCByYXdBbGlnbm1lbnQgPSBBcnJheS5pc0FycmF5KG1vbnN0ZXIuYWxpZ25tZW50KVxuICAgICAgICA/IG1vbnN0ZXIuYWxpZ25tZW50LmpvaW4oXCIgXCIpXG4gICAgICAgIDogbW9uc3Rlci5hbGlnbm1lbnQgfHwgXCJOXCI7XG4gICAgbGV0IHJhd1R5cGUgPSBcIlVua25vd25cIjtcblxuICAgIGlmICh0eXBlb2YgbW9uc3Rlci50eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByYXdUeXBlID0gY2FwaXRhbGl6ZUZpcnN0KG1vbnN0ZXIudHlwZSk7XG4gICAgfSBlbHNlIGlmIChtb25zdGVyLnR5cGU/LnR5cGUpIHtcbiAgICAgIGNvbnN0IGJhc2UgPSBjYXBpdGFsaXplRmlyc3QobW9uc3Rlci50eXBlLnR5cGUpO1xuICAgICAgY29uc3QgdGFncyA9IG1vbnN0ZXIudHlwZS50YWdzPy5sZW5ndGggPyBgICgke21vbnN0ZXIudHlwZS50YWdzLm1hcChjYXBpdGFsaXplRmlyc3QpLmpvaW4oXCIsIFwiKX0pYCA6IFwiXCI7XG4gICAgICByYXdUeXBlID0gYCR7YmFzZX0ke3RhZ3N9YDtcbiAgICB9XG5cbiAgICBtb25zdGVyLl9wYXJzZWRUeXBlID0gcmF3VHlwZTtcbiAgICAgIFxuICAgIC8vIFx1MjAxNCBBQywgSFAsIENSIFx1MjAxNFxuICAgIGNvbnN0IGFjID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFjKSA/IG1vbnN0ZXIuYWNbMF0uYWMgOiBtb25zdGVyLmFjO1xuICAgIGNvbnN0IGhwID0gbW9uc3Rlci5ocD8uYXZlcmFnZSA/PyBtb25zdGVyLmhwO1xuICAgIGNvbnN0IGNyID0gbW9uc3Rlci5jcjtcblxuICAgIC8vIFNraXAgbW9uc3RlcnMgd2l0aCBubyBBQyBhbmQgSFBcbiAgICBpZiAoIWFjICYmICFocCkge1xuICAgICAgc2tpcHBlZE1vbnN0ZXJzLnB1c2gobW9uc3Rlci5uYW1lKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHUyMDE0IEFiaWxpdGllcyBcdTIwMTRcbiAgICAgIGNvbnN0IGFiaWxpdGllcyA9IEFycmF5LmlzQXJyYXkobW9uc3Rlci5hYmlsaXR5KVxuICAgICAgICA/IG1vbnN0ZXIuYWJpbGl0eVxuICAgICAgICA6IFttb25zdGVyLnN0ciwgbW9uc3Rlci5kZXgsIG1vbnN0ZXIuY29uLCBtb25zdGVyLmludCwgbW9uc3Rlci53aXMsIG1vbnN0ZXIuY2hhXTtcbiAgICAgIGNvbnN0IFtzdHIgPSAxMCwgZGV4ID0gMTAsIGNvbiA9IDEwLCBpbnQgPSAxMCwgd2lzID0gMTAsIGNoYSA9IDEwXSA9IGFiaWxpdGllcztcbiAgXG4gICAgICAvLyBcdTIwMTQgU3BlZWQgKGhhbmRsZXMgaG92ZXIgJiBvYmplY3Qgc3BlZWRzKSBcdTIwMTRcbiAgICAgIGNvbnN0IHNwZWVkTGlzdDogc3RyaW5nW10gPSBbXTtcbiAgICAgIGlmICh0eXBlb2YgbW9uc3Rlci5zcGVlZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBmb3IgKGNvbnN0IFttb2RlLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKG1vbnN0ZXIuc3BlZWQpKSB7XG4gICAgICAgICAgaWYgKG1vZGUgPT09IFwiY2FuSG92ZXJcIikgY29udGludWU7XG4gICAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIFwibnVtYmVyXCIgaW4gdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBudW0gID0gKHZhbCBhcyBhbnkpLm51bWJlcjtcbiAgICAgICAgICAgIGNvbnN0IGNvbmQgPSAodmFsIGFzIGFueSkuY29uZGl0aW9uID8gYCAkeyh2YWwgYXMgYW55KS5jb25kaXRpb259YCA6IFwiXCI7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke251bX0gZnQuJHtjb25kfWApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke3ZhbH0gZnQuYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb25zdGVyLnNwZWVkfSBmdC5gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwZWVkID0gc3BlZWRMaXN0LmpvaW4oXCIsIFwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgU291cmNlIHNhbml0aXphdGlvbiBcdTIwMTRcbiAgICAgIGxldCBzb3VyY2UgPSBnZXRGdWxsU291cmNlTmFtZShtb25zdGVyLnNvdXJjZSwgZWRpdGlvbklkKTtcbiAgICAgIHNvdXJjZSAgICAgPSBzb3VyY2UucmVwbGFjZSgvOi9nLCBcIiAtXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBDYXRlZ29yeSBmb3IgZm9sZGVyIFx1MjAxNFxuICAgICAgY29uc3QgY2F0ZWdvcnkgPSBjYXRlZ29yaXplQ3JlYXR1cmUobW9uc3Rlcik7XG4gIFxuICAgICAgY29uc3QgZm0gICA9IGJ1aWxkRk0obW9uc3RlciwgQkVTVElBUllfTUVUQV9ERUZTKTtcbiAgICAgIGNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQkVTVElBUllfTUVUQV9ERUZTKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2F2aW5nVGhyb3dzID0gKGZtW0ZNX0ZJRUxEUy5TQVZJTkdfVEhST1dTXSBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgICBjb25zdCBza2lsbHMgICAgICAgPSAoZm1bRk1fRklFTERTLlNLSUxMU10gICAgICAgIGFzIHN0cmluZ1tdKSB8fCBbXTtcbiAgICAgIGNvbnN0IHNlbnNlcyAgICAgICA9IChmbVtGTV9GSUVMRFMuU0VOU0VTXSAgICAgICAgYXMgc3RyaW5nW10pIHx8IFtdO1xuICAgICAgY29uc3QgbGFuZ3VhZ2VzICAgID0gKGZtW0ZNX0ZJRUxEUy5MQU5HVUFHRVNdICAgICBhcyBzdHJpbmdbXSkgfHwgW107XG5cblxuICAgICAgLy8gXHUyMDE0IEJvZHkgXHUyMDE0XG4gICAgICBsZXQgYm9keSA9XG4gICAgICBgIyAke25hbWV9XFxuXFxuYCArXG4gICAgICBgJHtmb3JtYXRTaXplQWJicmV2KHJhd1NpemUpfSAke3Jhd1R5cGV9LCAke2Zvcm1hdEFsaWdubWVudEFiYnJldihyYXdBbGlnbm1lbnQpfVxcblxcbmAgK1xuICAgICAgYCoqQXJtb3IgQ2xhc3MqKjogJHthY31cXG5gICtcbiAgICAgIGAqKkhpdCBQb2ludHMqKjogJHtocH1cXG5gICtcbiAgICAgIGAqKlNwZWVkKio6ICR7c3BlZWR9XFxuYCArXG4gICAgICAoc2F2aW5nVGhyb3dzLmxlbmd0aFxuICAgICAgICA/IGAqKlNhdmluZyBUaHJvd3MqKjogJHtzYXZpbmdUaHJvd3Muam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICAoc2tpbGxzLmxlbmd0aFxuICAgICAgICA/IGAqKlNraWxscyoqOiAke3NraWxscy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIChzZW5zZXMubGVuZ3RoXG4gICAgICAgID8gYCoqU2Vuc2VzKio6ICR7c2Vuc2VzLmpvaW4oXCIsIFwiKX1cXG5gXG4gICAgICAgIDogXCJcIikgK1xuICAgICAgKGxhbmd1YWdlcy5sZW5ndGhcbiAgICAgICAgPyBgKipMYW5ndWFnZXMqKjogJHtsYW5ndWFnZXMuam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICBgKipDaGFsbGVuZ2UqKjogJHtjcn1cXG5cXG5gICtcbiAgICAgIHJlbmRlckFiaWxpdGllc1RhYmxlKHN0ciwgZGV4LCBjb24sIGludCwgd2lzLCBjaGEpO1xuXG4gIFxuICAgICAgaWYgKG1vbnN0ZXIudHJhaXQpICAgICBib2R5ICs9IGBcXG5cXG4jIyMgVHJhaXRzXFxuJHttb25zdGVyLnRyYWl0Lm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICAgICAgaWYgKG1vbnN0ZXIuYWN0aW9uKSAgICBib2R5ICs9IGBcXG5cXG4jIyMgQWN0aW9uc1xcbiR7bW9uc3Rlci5hY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5yZWFjdGlvbikgIGJvZHkgKz0gYFxcblxcbiMjIyBSZWFjdGlvbnNcXG4ke21vbnN0ZXIucmVhY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5sZWdlbmRhcnkpIGJvZHkgKz0gYFxcblxcbiMjIyBMZWdlbmRhcnkgQWN0aW9uc1xcbiR7bW9uc3Rlci5sZWdlbmRhcnkubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gIFxuICAgICAgY29uc3QgY29udGVudCA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtib2R5fWA7XG4gIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDogICAgYCR7Y2F0ZWdvcnl9LyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudCxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9ICAgICBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgSVRFTV9NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cblxuLyoqIEhlbHBlciB0byBjYXBpdGFsaXplIGZpcnN0IGxldHRlciBcdTIwMTMgbmV2ZXIgY3Jhc2hlcyBvbiBub24tc3RyaW5ncyAqL1xuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0KGlucHV0OiBhbnkpOiBzdHJpbmcge1xuICAvLyBpZiBpdFx1MjAxOXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZywgYmFpbCBvdXRcbiAgaWYgKHR5cGVvZiBpbnB1dCAhPT0gXCJzdHJpbmdcIiB8fCBpbnB1dC5sZW5ndGggPT09IDApIHJldHVybiBcIlwiO1xuICBjb25zdCBzID0gaW5wdXQudHJpbSgpO1xuICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbn1cblxuXG5leHBvcnQgY29uc3QgREFNQUdFX1RZUEVfTUFQOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIFA6IFwiUGllcmNpbmdcIixcbiAgQjogXCJCbHVkZ2VvbmluZ1wiLFxuICBTOiBcIlNsYXNoaW5nXCIsXG4gIE46IFwiTmVjcm90aWNcIixcbiAgUjogXCJSYWRpYW50XCIsXG4gIEY6IFwiRmlyZVwiLFxuICBDOiBcIkNvbGRcIixcbiAgTDogXCJMaWdodG5pbmdcIixcbiAgVDogXCJUaHVuZGVyXCIsXG4gIEE6IFwiQWNpZFwiLFxuICBIOiBcIkhlYWxpbmdcIixcbiAgVTogXCJGb3JjZVwiLFxuICBWOiBcIlBzeWNoaWNcIixcbn07XG5cbmV4cG9ydCBjb25zdCBQUk9QRVJUWV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgQTogXCJBbW11bml0aW9uXCIsXG4gIEY6IFwiRmluZXNzZVwiLFxuICBIOiBcIkhlYXZ5XCIsXG4gIEw6IFwiTGlnaHRcIixcbiAgUjogXCJSZWxvYWRcIixcbiAgUzogXCJTcGVjaWFsXCIsXG4gIFwiMkhcIjogXCJUd28tSGFuZGVkXCIsXG4gIFQ6IFwiVGhyb3duXCIsXG4gIFY6IFwiVmVyc2F0aWxlXCJcbn07XG5cbmV4cG9ydCBjb25zdCBJVEVNX1RZUEVfTUFQOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gICRDOiAgXCJDdXJyZW5jeVwiLFxuICAkRzogIFwiR2VtXCIsXG4gIEE6ICAgXCJBbW11bml0aW9uXCIsXG4gIFwiQUlSfERNR1wiOiBcIlZlaGljbGUgKGFpcilcIixcbiAgXCJBRnxETUdcIjogXCJGdXR1cmUgQW1tb1wiLFxuICBBVDogIFwiQXJ0aXNhbiBUb29sc1wiLFxuICBFWFA6IFwiRXhwbG9zaXZlXCIsXG4gIEZEOiAgXCJGb29kIGFuZCBEcmlua1wiLFxuICBHOiAgIFwiR2VhclwiLFxuICBHUzogIFwiR2FtZVwiLFxuICBIQTogIFwiSGVhdnkgQXJtb3JcIixcbiAgXCJJREd8VERDU1JcIjogXCJJbGxpY2l0IERydWdcIixcbiAgSU5TOiBcIkluc3RydW1lbnRcIixcbiAgTEE6ICBcIkxpZ2h0IEFybW9yXCIsXG4gIE06ICAgXCJXZWFwb25cIixcbiAgTUE6ICBcIk1lZGl1bSBBcm1vclwiLFxuICBNTlQ6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBPREg6IFwiTWlzY2VsbGFuZW91c1wiLFxuICBQOiAgIFwiQ29uc3VtYWJsZVwiLFxuICBSOiAgIFwiUmFuZ2VkIFdlYXBvblwiLFxuICBSRDogIFwiUm9kXCIsXG4gIFJHOiAgXCJSaW5nXCIsXG4gIFM6ICAgXCJTaGllbGRcIixcbiAgU0M6ICBcIlNjcm9sbFwiLFxuICBTQ0Y6IFwiU3BlbGwgQ2FzdGluZyBGb2N1c1wiLFxuICBTSFA6IFwiU2hpcFwiLFxuICBUOiAgIFwiVG9vbFwiLFxuICBUQUg6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBURzogIFwiVHJhZGUgR29vZHNcIixcbiAgVkVIOiBcIk1vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgV0Q6ICBcIldhbmRcIixcbn07XG5cbi8qKiBjb2RlIFx1MjE5MiBmdWxsIGZvbGRlciBwYXRoIHVuZGVyIEl0ZW1zLyAqL1xuY29uc3QgY29kZUZvbGRlck1hcDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAvLyBXZWFwb25zICYgQXJtb3JcbiAgXCJBXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9BbW11bml0aW9uXCIsXG4gIFwiTVwiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvV2VhcG9uc1wiLFxuICBcIlJcIjogICBcIldlYXBvbnMgYW5kIEFybW9yL1JhbmdlZCBXZWFwb25zXCIsXG4gIFwiU1wiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvU2hpZWxkc1wiLFxuICBcIkxBXCI6ICBcIldlYXBvbnMgYW5kIEFybW9yL0FybW9yL0xpZ2h0IEFybW9yXCIsXG4gIFwiTUFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvTWVkaXVtIEFybW9yXCIsXG4gIFwiSEFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvSGVhdnkgQXJtb3JcIixcbiAgXCJFWFBcIjogXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zL0V4cGxvc2l2ZXNcIixcbiAgLy8gRnV0dXJlIEFtbW8gKEFGfERNRyBcdTIxOTIgcmF3Q29kZSBcIkFGXCIpXG4gIFwiQUZcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQW1tdW5pdGlvbi9GdXR1cmUgQW1tb1wiLFxuXG4gIC8vIE1hZ2ljYWwgSXRlbXNcbiAgXCJSRFwiOiAgXCJNYWdpY2FsIEl0ZW1zL1JvZHNcIixcbiAgXCJSR1wiOiAgXCJNYWdpY2FsIEl0ZW1zL1JpbmdzXCIsXG4gIFwiU0NcIjogIFwiTWFnaWNhbCBJdGVtcy9TY3JvbGxzXCIsXG4gIFwiU0NGXCI6IFwiTWFnaWNhbCBJdGVtcy9TcGVsbCBDYXN0aW5nIEZvY3VzXCIsXG4gIFwiV0RcIjogIFwiTWFnaWNhbCBJdGVtcy9XYW5kc1wiLFxuXG4gIC8vIFZhbHVhYmxlc1xuICBcIiRHXCI6IFwiVmFsdWFibGVzL0dlbXNcIixcbiAgLy8gQ3VycmVuY3kgKHJhd0NvZGUgYmVjb21lcyBcIkNcIiBhZnRlciBzdHJpcHBpbmcgJClcbiAgXCJDXCI6ICBcIlZhbHVhYmxlcy9DdXJyZW5jeVwiLFxuICBcIlRHXCI6IFwiVmFsdWFibGVzL1RyYWRlIEdvb2RzXCIsXG5cbiAgLy8gQXJ0aXNhbiBHb29kc1xuICBcIkFUXCI6ICBcIkFydGlzYW4gR29vZHMvVG9vbHNcIixcbiAgXCJUXCI6ICAgXCJBcnRpc2FuIEdvb2RzL1Rvb2xzXCIsXG4gIFwiSU5TXCI6IFwiQXJ0aXNhbiBHb29kcy9JbnN0cnVtZW50c1wiLFxuICBcIkdTXCI6ICBcIkFydGlzYW4gR29vZHMvR2FtZXNcIixcblxuICAvLyBHZWFyICYgTW91bnRzXG4gIFwiR1wiOiAgIFwiR2VhclwiLFxuICAvLyBNb3VudHMgJiBWZWhpY2xlc1xuICBcIk1OVFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBcIlRBSFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBcIlZFSFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICAvLyBBaXIgdmVoaWNsZXMgKEFJUnxETUcgXHUyMTkyIHJhd0NvZGUgXCJBSVJcIilcbiAgXCJBSVJcIjogXCJHZWFyL01vdW50cyBhbmQgVmVoaWNsZXMvQWlyXCIsXG5cbiAgLy8gQ29uc3VtYWJsZXNcbiAgXCJQXCI6ICAgXCJDb25zdW1hYmxlc1wiLFxuICAvLyBGb29kICYgRHJpbmtcbiAgXCJGRFwiOiAgXCJDb25zdW1hYmxlcy9Gb29kIGFuZCBEcmlua1wiLFxuXG4gIC8vIElsbGljaXQgRHJ1Z3MgKElER3xURENTUiBcdTIxOTIgcmF3Q29kZSBcIklER1wiKVxuICBcIklER1wiOiBcIkdlYXIvSWxsaWNpdCBEcnVnc1wiLFxuXG4gIC8vIE1pc2NlbGxhbmVvdXMgKE9ESClcbiAgXCJPREhcIjogXCJHZWFyL01pc2NlbGxhbmVvdXNcIixcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUl0ZW1zRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCByYXdJdGVtczogYW55W10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5iYXNlaXRlbSkpIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5iYXNlaXRlbSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24uaXRlbSkpICAgICByYXdJdGVtcy5wdXNoKC4uLmpzb24uaXRlbSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24ub2JqZWN0KSkgICByYXdJdGVtcy5wdXNoKC4uLmpzb24ub2JqZWN0KTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi52ZWhpY2xlKSkgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi52ZWhpY2xlKTtcbiAgaWYgKCFyYXdJdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBiYXNlTmFtZXMgPSBuZXcgU2V0PHN0cmluZz4oXG4gICAgQXJyYXkuaXNBcnJheShqc29uLmJhc2VpdGVtKSA/IGpzb24uYmFzZWl0ZW0ubWFwKChiOiBhbnkpID0+IGIubmFtZSkgOiBbXVxuICApO1xuICBjb25zdCBvdXQ6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgZm9yIChjb25zdCBpdCBvZiByYXdJdGVtcykge1xuICAgIGNvbnN0IG5hbWUgICAgID0gaXQubmFtZSBhcyBzdHJpbmc7XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXC9cXFxcOl0vZywgXCItXCIpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGZvbGRlclxuICAgIGNvbnN0IHJhd0NvZGUgPSAoaXQudHlwZSBhcyBzdHJpbmcgfHwgXCJcIikuc3BsaXQoXCJ8XCIpWzBdXG4gICAgICAgIC5zcGxpdChcInxcIilbMF0gICAgICAvLyBkcm9wIGFueXRoaW5nIGFmdGVyIFx1MjAxQ3xcdTIwMURcbiAgICAgICAgLnJlcGxhY2UoL15cXCQvLCBcIlwiKTsgLy8gc3RyaXAgbGVhZGluZyBcdTIwMUMkXHUyMDFEXG4gICAgbGV0IGZvbGRlciAgICA9IGNvZGVGb2xkZXJNYXBbcmF3Q29kZV0gPz8gXCJNaXNjZWxsYW5lb3VzXCI7XG5cbiAgICAvLyBWYXJpYW50c1xuICAgIGlmIChpdC5ib251c1dlYXBvbikge1xuICAgICAgZm9sZGVyID0gYCR7Zm9sZGVyfS9WYXJpYW50c2A7XG4gICAgfVxuICAgIC8vIE1hZ2ljYWxcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IGlzTWFnaWMgPSAhIWl0LndvbmRyb3VzIHx8ICEhaXQucmVxQXR0dW5lIHx8ICEhaXQucmVxX2F0dHVuZVxuICAgICAgICB8fCBTdHJpbmcoaXQucmFyaXR5KS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwibWFnaWNcIik7XG4gICAgICBpZiAoaXNNYWdpYykge1xuICAgICAgICBjb25zdCBbICwgLi4ucmVzdCBdID0gZm9sZGVyLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgZm9sZGVyID0gW1wiTWFnaWNhbCBJdGVtc1wiLCAuLi5yZXN0XS5qb2luKFwiL1wiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXZWFwb24gY2F0ZWdvcnkgc3ViZm9sZGVyXG4gICAgaWYgKChmb2xkZXIuc3RhcnRzV2l0aChcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnNcIikgfHxcbiAgICAgICAgIGZvbGRlci5zdGFydHNXaXRoKFwiV2VhcG9ucyBhbmQgQXJtb3IvUmFuZ2VkIFdlYXBvbnNcIikpICYmIGl0LndlYXBvbkNhdGVnb3J5KSB7XG4gICAgICBmb2xkZXIgPSBgJHtmb2xkZXJ9LyR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX1gO1xuICAgIH1cblxuICAgIC8vIG1ha2UgZWRpdGlvbklkIGF2YWlsYWJsZSBmb3IgdGhlIFNPVVJDRSBmaWVsZFxuKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4vLyBidWlsZCBhIEZyb250bWF0dGVyIG9iamVjdCBmcm9tIHRoZSBKU09OXG5jb25zdCBmbSAgID0gYnVpbGRGTShpdCwgSVRFTV9NRVRBX0RFRlMpO1xuXG5pZiAocmF3Q29kZSA9PT0gXCJNXCIgJiYgaXQud2VhcG9uQ2F0ZWdvcnkpIHtcbiAgLy8gXHUyMDFDTVx1MjAxRCBcdTIxOTIgdXNlIHdlYXBvbkNhdGVnb3J5IChcdTIwMUNTaW1wbGVcdTIwMUQvXHUyMDFDTWFydGlhbFx1MjAxRClcbiAgZm0udHlwZSA9IGAke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9IFdlYXBvbmA7XG59IGVsc2UgaWYgKElURU1fVFlQRV9NQVBbcmF3Q29kZV0pIHtcbiAgLy8gYW55IG90aGVyIGNvZGUgXHUyMTkyIG1hcHBlZCBsYWJlbFxuICBmbS50eXBlID0gSVRFTV9UWVBFX01BUFtyYXdDb2RlXTtcbn1cbmlmIChBcnJheS5pc0FycmF5KGZtLmRhbWFnZVR5cGVzKSkge1xuICBmbS5kYW1hZ2VUeXBlcyA9IGZtLmRhbWFnZVR5cGVzLm1hcCgoY29kZTogc3RyaW5nKSA9PlxuICAgIERBTUFHRV9UWVBFX01BUFtjb2RlXSB8fCBjb2RlXG4gICk7XG59XG4vLyBzZXJpYWxpemUgaXQgdG8gWUFNTFxubGV0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgSVRFTV9NRVRBX0RFRlMpO1xuXG4vLyBpZiB5b3Ugc3RpbGwgd2FudCBwYWNrQ29udGVudHMsIGFwcGVuZCBpdCBoZXJlOlxuaWYgKEFycmF5LmlzQXJyYXkoaXQucGFja0NvbnRlbnRzKSkge1xuICB5YW1sICs9IFwiXFxucGFja0NvbnRlbnRzOlwiO1xuICBmb3IgKGNvbnN0IHBjIG9mIGl0LnBhY2tDb250ZW50cykge1xuICAgIHlhbWwgKz0gYFxcbiAgLSBpdGVtOiBcIiR7cGMuaXRlbX1cIlxcbiAgICBxdWFudGl0eTogJHtwYy5xdWFudGl0eX1gO1xuICB9XG59XG4gXG4vLyB3cmFwIGl0IGluIHRoZSBZQU1MIGZlbmNlXG5jb25zdCBmcm9udG1hdHRlciA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tYDtcblxuXG4gICAgLy8gQm9keSBsaW5lc1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxpbmVzLnB1c2goYCMgJHtuYW1lfWApO1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG5cbiAgICAvLyBTdWJ0aXRsZVxuICAgIGNvbnN0IHN1YnRpdGxlID0gaXQud2VhcG9uXG4gICAgICA/IGAke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9IFdlYXBvbmBcbiAgICAgIDogaXQuYXJtb3JcbiAgICAgICAgPyBmb2xkZXIuc3BsaXQoXCIvXCIpLnBvcCgpIHx8IFwiQXJtb3JcIlxuICAgICAgICA6IFwiXCI7XG4gICAgaWYgKHN1YnRpdGxlKSBsaW5lcy5wdXNoKGAjIyMgKiR7c3VidGl0bGV9KmApO1xuXG4gICAgLy8gU3RhdHMgbGluZXNcbiAgICBpZiAoaXQud2VhcG9uKSB7XG4gICAgICBsaW5lcy5wdXNoKGAqKkNhdGVnb3J5Kio6ICR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX1gKTtcbiAgICAgIGxpbmVzLnB1c2goYCoqRGFtYWdlKio6ICR7aXQuZG1nMSA/PyBcIlwifSR7aXQuZG1nMiA/IGAgLyAke2l0LmRtZzJ9YCA6IFwiXCJ9YCk7XG4gICAgICBjb25zdCB0eXBlc0JvZHkgPSAoQXJyYXkuaXNBcnJheShpdC5kbWdUeXBlKSA/IGl0LmRtZ1R5cGUgOiBbaXQuZG1nVHlwZV0pXG4gICAgICAgIC5maWx0ZXIoKHQ6IGFueSkgPT4gQm9vbGVhbih0KSlcbiAgICAgICAgLm1hcCgodDogc3RyaW5nKSA9PiBEQU1BR0VfVFlQRV9NQVBbdF0gfHwgdCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkRhbWFnZSBUeXBlKio6ICR7dHlwZXNCb2R5LmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIGxpbmVzLnB1c2goYCoqUmFuZ2UqKjogJHtpdC5yYW5nZSA/PyBcIlx1MjAxNFwifWApO1xuICAgICAgbGluZXMucHVzaChgKipSZWxvYWQqKjogJHtpdC5yZWxvYWQgPz8gXCJcdTIwMTRcIn1gKTtcbiAgICAgIGlmIChpdC5hbW1vVHlwZSkgbGluZXMucHVzaChgKipBbW1vIFR5cGUqKjogJHtpdC5hbW1vVHlwZX1gKTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0LnByb3BlcnR5KSAmJiBpdC5wcm9wZXJ0eS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgcHJvcHNCb2R5ID0gaXQucHJvcGVydHkubWFwKChwOiBzdHJpbmcpID0+IFBST1BFUlRZX01BUFtwXSB8fCBwKTtcbiAgICAgICAgbGluZXMucHVzaChgKipQcm9wZXJ0aWVzKio6ICR7cHJvcHNCb2R5LmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGl0LmFybW9yKSB7XG4gICAgICBsaW5lcy5wdXNoKGAqKkFybW9yIENsYXNzKio6ICR7aXQuYWN9YCk7XG4gICAgICBpZiAoaXQuc3RlYWx0aCkgbGluZXMucHVzaChgKipTdGVhbHRoIERpc2FkdmFudGFnZSoqOiB0cnVlYCk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cblxuICAgIC8vIERlc2NyaXB0aW9uIHdpdGggbmVzdGVkIGVudHJpZXNcbiAgICBjb25zdCBkZXNjID0gaXQuZW50cmllcyA/PyBpdC5kZXNjO1xuICAgIGlmIChkZXNjKSB7XG4gICAgICBmb3IgKGNvbnN0IHAgb2YgQXJyYXkuaXNBcnJheShkZXNjKSA/IGRlc2MgOiBbZGVzY10pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiByZXBsYWNlNWVUYWdzKHApLnNwbGl0KFwiXFxuXCIpKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHAgJiYgdHlwZW9mIHAgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgaWYgKGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdID09PSBcIlwiKSB7XG4gICAgICAgICAgICBsaW5lcy5wb3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChgIyMjIyAke3AubmFtZX1gKTtcbiAgICAgICAgICBjb25zdCBzdWIgPSBBcnJheS5pc0FycmF5KHAuZW50cmllcykgPyBwLmVudHJpZXMgOiBbXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHNwIG9mIHN1Yikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHJlcGxhY2U1ZVRhZ3Moc3ApLnNwbGl0KFwiXFxuXCIpKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBib2R5ID0gbGluZXMuam9pbihcIlxcblwiKTtcblxuICAgIG91dC5wdXNoKHsgcGF0aDogYEl0ZW1zLyR7Zm9sZGVyfS8ke3NhZmVOYW1lfS5tZGAsIGNvbnRlbnQ6IGAke2Zyb250bWF0dGVyfVxcblxcbiR7Ym9keX1gIH0pO1xuICB9XG5cbiAgcmV0dXJuIG91dC5zb3J0KChhLGIpID0+IGEucGF0aC5sb2NhbGVDb21wYXJlKGIucGF0aCkpO1xufSIsICJpbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL3NvdXJjZU1hcFwiO1xuaW1wb3J0IHsgZm9ybWF0U2l6ZUFiYnJldiwgZm9ybWF0QWxpZ25tZW50QWJicmV2IH0gZnJvbSBcIi4uL2Jlc3RpYXJ5XCI7XG5pbXBvcnQgeyBmb3JtYXRSYW5nZSwgZm9ybWF0VGltZSwgZm9ybWF0RHVyYXRpb24sIFNDSE9PTF9NQVAgfSBmcm9tIFwiLi4vc3BlbGxzXCI7XG5pbXBvcnQgeyBQUk9QRVJUWV9NQVAsIERBTUFHRV9UWVBFX01BUCwgSVRFTV9UWVBFX01BUCB9IGZyb20gXCIuLi9pdGVtc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5cbmZ1bmN0aW9uIGJsYW5rVW5kZWZpbmVkKHZhbDogYW55KTogYW55IHtcbiAgcmV0dXJuIHZhbCA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHZhbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhcChzdHI6IGFueSk6IHN0cmluZyB7XG4gIGlmICh0eXBlb2Ygc3RyICE9PSBcInN0cmluZ1wiKSByZXR1cm4gXCJcIjtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cblxuZXhwb3J0IGNvbnN0IEFCSUxJVFlfRlVMTDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBzdHI6IFwiU3RyZW5ndGhcIixcbiAgZGV4OiBcIkRleHRlcml0eVwiLFxuICBjb246IFwiQ29uc3RpdHV0aW9uXCIsXG4gIGludDogXCJJbnRlbGxpZ2VuY2VcIixcbiAgd2lzOiBcIldpc2RvbVwiLFxuICBjaGE6IFwiQ2hhcmlzbWFcIixcbn07XG5cbmV4cG9ydCBjb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBVbml2ZXJzYWwgZnJvbnRtYXR0ZXIga2V5cyBcdTI1MDBcdTI1MDBcdTI1MDAgIFxuZXhwb3J0IGNvbnN0IEZNX0ZJRUxEUyA9IHtcbiAgQUJJTElUWV9CT05VU0VTOiAgICBcImFiaWxpdHlfYm9udXNlc1wiLFxuICBBQzogICAgICAgICAgICAgICAgIFwiQUNcIixcbiAgQUxJR05NRU5UOiAgICAgICAgICBcIkFsaWdubWVudFwiLFxuICBBTU1PX1RZUEU6ICAgICAgICAgIFwiQW1tbyBUeXBlXCIsXG4gIEFSTU9SX1BST0ZJQ0lFTkNJRVM6XCJhcm1vci1wcm9mXCIsXG4gIEFUVEFDS19UWVBFOiAgICAgICAgXCJhdHRhY2tfdHlwZVwiLFxuICBBVFRVTkVNRU5UOiAgICAgICAgIFwiQXR0dW5lbWVudFwiLFxuICBBVFRVTkVfUkVROiAgICAgICAgIFwiQXR0dW5lX1JlcVwiLFxuICBDQVNUSU5HX1RJTUU6ICAgICAgIFwiY2FzdGluZ190aW1lXCIsXG4gIENIQVJJU01BOiAgICAgICAgICAgXCJjaGFyaXNtYVwiLFxuICBDSEFfTU9EOiAgICAgICAgICAgIFwiY2hhX21vZFwiLFxuICBDT05DRU5UUkFUSU9OOiAgICAgIFwiY29uY2VudHJhdGlvblwiLFxuICBDT05ESVRJT05fSU1NOiAgICAgIFwiY29uZF9pbW11bml0eVwiLFxuICBDT05TVElUVVRJT046ICAgICAgIFwiY29uc3RpdHV0aW9uXCIsXG4gIENPTl9NT0Q6ICAgICAgICAgICAgXCJjb25fbW9kXCIsXG4gIENPU1Q6ICAgICAgICAgICAgICAgXCJjb3N0XCIsXG4gIENPTVBPTkVOVFM6ICAgICAgICAgXCJDb21wb25lbnRzXCIsXG4gIENIQUxMRU5HRV9SQVRJTkc6ICAgXCJDUlwiLFxuICBEQU1BR0VfVFlQRTogICAgICAgIFwiZGFtYWdlX3R5cGVcIixcbiAgREFNQUdFX1RZUEVTOiAgICAgICBcImRhbWFnZVR5cGVzXCIsXG4gIERBTUFHRTogICAgICAgICAgICAgXCJkYW1hZ2VcIixcbiAgREFNQUdFX1JFUzogICAgICAgICBcImRtZ19yZXNpc3RhbmNlXCIsXG4gIERBTUFHRV9JTU06ICAgICAgICAgXCJkbWdfaW1tdW5pdHlcIixcbiAgREVYVEVSSVRZOiAgICAgICAgICBcImRleHRlcml0eVwiLFxuICBERVhfTU9EOiAgICAgICAgICAgIFwiZGV4X21vZFwiLFxuICBEVVJBVElPTjogICAgICAgICAgIFwiZHVyYXRpb25cIixcbiAgUlVMRVNFVDogICAgICAgICAgICBcInJ1bGVzZXRcIixcbiAgSFA6ICAgICAgICAgICAgICAgICBcIkhQXCIsXG4gIElOVEVMTElHRU5DRTogICAgICAgXCJpbnRlbGxpZ2VuY2VcIixcbiAgSU5UX01PRDogICAgICAgICAgICBcImludF9tb2RcIixcbiAgTEFOR1VBR0VTOiAgICAgICAgICBcImxhbmd1YWdlc1wiLFxuICBMRVZFTDogICAgICAgICAgICAgIFwibGV2ZWxcIixcbiAgTUFHSUNBTDogICAgICAgICAgICBcIm1hZ2ljYWxcIixcbiAgTUFURVJJQUw6ICAgICAgICAgICBcIm1hdGVyaWFsXCIsXG4gIE5BTUU6ICAgICAgICAgICAgICAgXCJuYW1lXCIsXG4gIFBST1BFUlRJRVM6ICAgICAgICAgXCJwcm9wZXJ0aWVzXCIsXG4gIFJBTkdFOiAgICAgICAgICAgICAgXCJyYW5nZVwiLFxuICBSQVJJVFk6ICAgICAgICAgICAgIFwicmFyaXR5XCIsXG4gIFJFTE9BRDogICAgICAgICAgICAgXCJyZWxvYWRcIixcbiAgUklUVUFMOiAgICAgICAgICAgICBcInJpdHVhbFwiLFxuICBTQVZFOiAgICAgICAgICAgICAgIFwic2F2ZVwiLFxuICBTQVZJTkdfVEhST1dTOiAgICAgIFwic2F2aW5nX3Rocm93c1wiLFxuICBTQ0hPT0w6ICAgICAgICAgICAgIFwic2Nob29sXCIsXG4gIFNFTlNFUzogICAgICAgICAgICAgXCJzZW5zZXNcIixcbiAgU0laRTogICAgICAgICAgICAgICBcInNpemVcIixcbiAgU0tJTExTOiAgICAgICAgICAgICBcInNraWxsc1wiLFxuICBTS0lMTF9DSE9JQ0VfTElTVDogIFwic2tpbGxfY2hvaWNlX2xpc3RcIixcbiAgU09NQVRJQzogICAgICAgICAgICBcInNvbWF0aWNcIixcbiAgU09VUkNFOiAgICAgICAgICAgICBcInNvdXJjZVwiLFxuICBTUEVDSUVTOiAgICAgICAgICAgIFwic3BlY2llc1wiLFxuICBTUEVFRDogICAgICAgICAgICAgIFwic3BlZWRcIixcbiAgU1BFTExfQ0FTVF9NT0Q6ICAgICBcIlNwZWxsIENhc3QgTW9kXCIsXG4gIFNQRUxMX1JBTkdFOiAgICAgICAgXCJSYW5nZVwiLFxuICBTVEVBTFRIX0RJU0FEVkFOVEFHRTogXCJzdGVhbHRoRGlzYWR2YW50YWdlXCIsXG4gIFNUUkVOR1RIOiAgICAgICAgICAgXCJzdHJlbmd0aFwiLFxuICBTVFJfTU9EOiAgICAgICAgICAgIFwic3RyX21vZFwiLFxuICBTVUJSQUNFUzogICAgICAgICAgIFwic3VicmFjZXNcIixcbiAgVE9PTF9QUk9GSUNJRU5DSUVTOiBcInRvb2wtcHJvZlwiLFxuICBUT09MX0NIT0lDRV9MSVNUOiAgXCJ0b29sX2Nob2ljZV9saXN0XCIsXG4gIFRSQUlUUzogICAgICAgICAgICAgXCJ0cmFpdHNcIixcbiAgVFlQRTogICAgICAgICAgICAgICBcInR5cGVcIixcbiAgVkFSSUFOVDogICAgICAgICAgICBcIlZhcmlhbnRcIixcbiAgVkVSQkFMOiAgICAgICAgICAgICBcInZlcmJhbFwiLFxuICBXRUFQT05fUFJPRklDSUVOQ0lFUzogXCJ3ZWFwb24tcHJvZlwiLFxuICBXRUlHSFQ6ICAgICAgICAgICAgIFwid2VpZ2h0XCIsXG4gIFdJU0RPTTogICAgICAgICAgICAgXCJ3aXNkb21cIixcbiAgV0lTX01PRDogICAgICAgICAgICBcIndpc19tb2RcIixcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIEZNS2V5ID0ga2V5b2YgdHlwZW9mIEZNX0ZJRUxEUztcbmV4cG9ydCB0eXBlIEZyb250bWF0dGVyID0gUGFydGlhbDxSZWNvcmQ8dHlwZW9mIEZNX0ZJRUxEU1tGTUtleV0sIHVua25vd24+PjtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIERlZmluaXRpb24gb2YgYSBzaW5nbGUgZmllbGQgbWFwcGluZyBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBpbnRlcmZhY2UgRmllbGREZWYge1xuICAvKiogV2hpY2ggY2FsbFx1MjAxMHNpZ24gKGtleSBpbiBGTV9GSUVMRFMpICovXG4gIGNhbGxTaWduOiBGTUtleTtcbiAgLyoqIFdoaWNoIEpTT04gcHJvcGVydHkgdG8gcmVhZCAqL1xuICBqc29uS2V5OiAgc3RyaW5nIHwgc3RyaW5nW107XG4gIC8qKiBPcHRpb25hbCB0cmFuc2Zvcm1lcjogcmF3IEpTT04gXHUyMTkyIGZpbmFsIHZhbHVlICovXG4gIGNvbnY/OiAgICAocmF3OiBhbnksIGFsbEpzb24/OiBhbnkpID0+IHVua25vd247XG59XG5cbmNvbnN0IHVuaWZpZWRBcm1vclByb2ZzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT5cbiAgQXJyYXkuaXNBcnJheSh2YWw/LmFybW9yKSA/IHZhbC5hcm1vci5tYXAoY2FwKSA6XG4gIEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbC5tYXAoY2FwKSA6IFtdO1xuXG4vLyBmcm9udG1hdHRlci50c1xuXG5leHBvcnQgZnVuY3Rpb24gdW5pZmllZFdlYXBvblByb2ZzKHZhbDogYW55KTogc3RyaW5nW10ge1xuICAvLyBwdWxsIHRoZSBcdTIwMUN3ZWFwb25zXHUyMDFEIGFycmF5IG9mZiBlaXRoZXIgYSByYXcgYXJyYXkgb3IgYSBzdGFydGluZ1Byb2ZpY2llbmNpZXMgb2JqZWN0XG4gIGNvbnN0IHJhd0FycjogYW55W10gPSBBcnJheS5pc0FycmF5KHZhbD8ud2VhcG9ucylcbiAgICA/IHZhbC53ZWFwb25zXG4gICAgOiBBcnJheS5pc0FycmF5KHZhbClcbiAgICA/IHZhbFxuICAgIDogW107XG5cbiAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgZnVuY3Rpb24gaGFuZGxlT25lKGVudHJ5OiBhbnkpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShlbnRyeSkpIHtcbiAgICAgIC8vIGZsYXR0ZW4gbmVzdGVkIGFycmF5c1xuICAgICAgZW50cnkuZm9yRWFjaChoYW5kbGVPbmUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IGxpdCA9IGVudHJ5LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKGxpdCA9PT0gXCJzaW1wbGVcIikge1xuICAgICAgICBvdXQuYWRkKFwiU2ltcGxlIFdlYXBvbnNcIik7XG4gICAgICB9IGVsc2UgaWYgKGxpdCA9PT0gXCJtYXJ0aWFsXCIpIHtcbiAgICAgICAgb3V0LmFkZChcIk1hcnRpYWwgV2VhcG9uc1wiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGRldGVjdCB0YWdnZWQgaXRlbXMgdnMgc2ltcGxlIHdvcmRzXG4gICAgICAgIGNvbnN0IHRleHQgPSBlbnRyeS5zdGFydHNXaXRoKFwie0BcIilcbiAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3MoZW50cnkpXG4gICAgICAgICAgOiBjYXAoZW50cnkpO1xuICAgICAgICBvdXQuYWRkKHRleHQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChlbnRyeSAmJiB0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIgJiYgZW50cnkucHJvZmljaWVuY3kpIHtcbiAgICAgIC8vIHsgcHJvZmljaWVuY3k6IFwiZmlyZWFybXNcIiwgb3B0aW9uYWw6IHRydWUgfVxuICAgICAgY29uc3QgbmFtZSA9IGNhcChlbnRyeS5wcm9maWNpZW5jeSk7XG4gICAgICBvdXQuYWRkKGVudHJ5Lm9wdGlvbmFsID8gYCR7bmFtZX0gKG9wdGlvbmFsKWAgOiBuYW1lKTtcbiAgICB9XG4gIH1cblxuICByYXdBcnIuZm9yRWFjaChoYW5kbGVPbmUpO1xuICByZXR1cm4gWy4uLm91dF07XG59XG5cblxuY29uc3QgdW5pZmllZFNhdmVzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT4ge1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgICByZXR1cm4gdmFsLm1hcCgoazogc3RyaW5nKSA9PlxuICAgICAgICAoeyBzdHI6IFwiU3RyZW5ndGhcIiwgZGV4OiBcIkRleHRlcml0eVwiLCBjb246IFwiQ29uc3RpdHV0aW9uXCIsXG4gICAgICAgICAgaW50OiBcIkludGVsbGlnZW5jZVwiLCB3aXM6IFwiV2lzZG9tXCIsIGNoYTogXCJDaGFyaXNtYVwiIH1ba10gPz8gay50b1VwcGVyQ2FzZSgpKVxuICAgICAgKTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJiB2YWwgIT09IG51bGwpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModmFsKS5tYXAoayA9PiBrLnRvVXBwZXJDYXNlKCkpO1xuICB9XG4gIHJldHVybiBbXTtcbn07XG5cbmV4cG9ydCBjb25zdCB1bmlmaWVkU2tpbGxzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT4ge1xuICAvLyAxKSBcdTIwMUNCZXN0aWFyeVx1MjAxRCBzdHlsZTogZmxhdCBvYmplY3QgbWFwcGluZyBza2lsbFx1MjE5Mm1vZGlmaWVyXG4gIGlmIChcbiAgICB2YWwgJiZcbiAgICAhQXJyYXkuaXNBcnJheSh2YWwpICYmXG4gICAgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJlxuICAgIC8vIGVuc3VyZSBldmVyeSB2YWx1ZSBpcyBhIHN0cmluZyBvciBudW1iZXJcbiAgICBPYmplY3QudmFsdWVzKHZhbCkuZXZlcnkodiA9PiB0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIilcbiAgKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHZhbCkubWFwKFxuICAgICAgKFtza2lsbCwgbW9kXSkgPT4gYCR7Y2FwKHNraWxsKX0gJHttb2R9YC50cmltKClcbiAgICApO1xuICB9XG5cbiAgLy8gMikgbmVzdGVkIHVuZGVyIC5za2lsbHMgLyAuc2tpbGxQcm9maWNpZW5jaWVzIC8gLnNraWxsUHJvZlxuICBpZiAodmFsICYmICFBcnJheS5pc0FycmF5KHZhbCkgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IG5lc3RlZCA9ICh2YWwgYXMgYW55KS5za2lsbHNcbiAgICAgID8/ICh2YWwgYXMgYW55KS5za2lsbFByb2ZcbiAgICAgID8/ICh2YWwgYXMgYW55KS5za2lsbFByb2ZpY2llbmNpZXM7XG4gICAgcmV0dXJuIHVuaWZpZWRTa2lsbHMobmVzdGVkKTtcbiAgfVxuXG4gIC8vIDMpIGFycmF5LXN0eWxlXG4gIGlmICghQXJyYXkuaXNBcnJheSh2YWwpKSByZXR1cm4gW107XG5cbiAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGZvciAoY29uc3QgZSBvZiB2YWwpIHtcbiAgICAvLyAzYSkgeyBhbnk6IE4gfVxuICAgIGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiAoZSBhcyBhbnkpLmFueSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7KGUgYXMgYW55KS5hbnl9YCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gM2IpIHsgY2hvb3NlOiB7IGNvdW50LCBcdTIwMjYgfSB9XG4gICAgaWYgKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIgJiYgKGUgYXMgYW55KS5jaG9vc2UpIHtcbiAgICAgIGNvbnN0IGNudCA9IChlIGFzIGFueSkuY2hvb3NlLmNvdW50ID8/IDE7XG4gICAgICBvdXQuYWRkKGBDaG9vc2UgJHtjbnR9YCk7XG4gICAgfVxuICAgIC8vIDNjKSBmaXhlZCBmbGFncyBmb286IHRydWVcbiAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZSkpIHtcbiAgICAgICAgaWYgKHYgPT09IHRydWUpIG91dC5hZGQoY2FwKGspKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gM2QpIGxpdGVyYWwgc3RyaW5nc1xuICAgIGlmICh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgb3V0LmFkZChjYXAoZSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbLi4ub3V0XTtcbn07XG5cblxuIFxuZXhwb3J0IGNvbnN0IHVuaWZpZWRUb29sUHJvZnMgPSAodmFsOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gIC8vIHB1bGwgbmVzdGVkIGFycmF5IGlmIHNvbWVvbmUgcGFzc2VkIHlvdSB0aGUgd2hvbGUgc3RhcnRpbmdQcm9maWNpZW5jaWVzIG9ialxuICBsZXQgZW50cmllczogYW55W10gPSBBcnJheS5pc0FycmF5KHZhbCkgPyB2YWxcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsPy50b29sUHJvZmljaWVuY2llcykgPyB2YWwudG9vbFByb2ZpY2llbmNpZXNcbiAgICA6IEFycmF5LmlzQXJyYXkodmFsPy50b29scykgICAgICAgICAgICAgPyB2YWwudG9vbHNcbiAgICA6IFtdO1xuXG4gIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBsZXQgc2F3Q2hvb3NlID0gZmFsc2U7XG5cbiAgZm9yIChjb25zdCBlIG9mIGVudHJpZXMpIHtcbiAgICBpZiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG91dC5hZGQoY2FwKGUpKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmIChlPy5jaG9vc2UpIHtcbiAgICAgIGNvbnN0IGNudCA9IGUuY2hvb3NlLmNvdW50ID8/IDE7XG4gICAgICBzYXdDaG9vc2UgPSB0cnVlO1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7Y250fWApO1xuICAgIH1cblxuICAgIC8vIHB1bGwgb3V0IGFueSBmaXhlZCBcdTIwMUNmb286IHRydWVcdTIwMUQgb3IgbnVtZXJpYyBcdTIwMUNhbnlGb286IE5cdTIwMURcbiAgICBmb3IgKGNvbnN0IFtrLHZdIG9mIE9iamVjdC5lbnRyaWVzKGUpKSB7XG4gICAgICBpZiAodiA9PT0gdHJ1ZSkge1xuICAgICAgICBvdXQuYWRkKGNhcChrKSk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2ID09PSBcIm51bWJlclwiICYmIGsuc3RhcnRzV2l0aChcImFueVwiKSkge1xuICAgICAgICAvLyBlLmcuIGFueUFydGlzYW5zVG9vbDoxXG4gICAgICAgIGNvbnN0IHJhdyA9IGsucmVwbGFjZSgvXmFueS8sIFwiXCIpO1xuICAgICAgICBjb25zdCBzcGFjZWQgPSByYXdcbiAgICAgICAgICAucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMSAkMlwiKVxuICAgICAgICAgIC5zcGxpdChcIiBcIilcbiAgICAgICAgICAubWFwKGNhcClcbiAgICAgICAgICAuam9pbihcIiBcIik7XG4gICAgICAgIG91dC5hZGQoYENob29zZSAke3Z9ICR7c3BhY2VkfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbLi4ub3V0XTtcbn07XG5cbmV4cG9ydCBjb25zdCBBTExfRklFTERfREVGUzogRmllbGREZWZbXSA9IFtcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENvcmUgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiTkFNRVwiLCAganNvbktleTogXCJuYW1lXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTT1VSQ0VcIiwganNvbktleTogW1wic291cmNlXCJdLCBjb252OiAocmF3LCBhbGwpID0+IHtcbiAgICAgIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgICAgY29uc3QgYXJyID0gQXJyYXkuaXNBcnJheShyYXcpID8gcmF3IDogW3Jhd107XG4gICAgICBhcnIuZm9yRWFjaChzcmMgPT4gb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShzcmMsIChhbGwgYXMgYW55KS5fZWRpdGlvbklkKSkpO1xuICAgICAgZm9yIChjb25zdCBvcyBvZiBhbGwub3RoZXJTb3VyY2VzID8/IFtdKSBvdXQuYWRkKGdldEZ1bGxTb3VyY2VOYW1lKG9zLnNvdXJjZSwgKGFsbCBhcyBhbnkpLl9lZGl0aW9uSWQpKTtcbiAgICAgIGZvciAoY29uc3QgcmVwIG9mIGFsbC5yZXByaW50ZWRBcyA/PyBbXSkge1xuICAgICAgICBjb25zdCBbLCBzcmNdID0gKHJlcCBhcyBzdHJpbmcpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgb3V0LmFkZChnZXRGdWxsU291cmNlTmFtZShzcmMsIChhbGwgYXMgYW55KS5fZWRpdGlvbklkKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gWy4uLm91dF07XG4gIH19LFxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIkFSTU9SX1BST0ZJQ0lFTkNJRVNcIiwgIGpzb25LZXk6IFtcImFybW9yUHJvZmljaWVuY2llc1wiLCBcImFybW9yUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sIGNvbnY6IHVuaWZpZWRBcm1vclByb2ZzIH0sXG4gIHsgXG4gICAgY2FsbFNpZ246IFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgICBqc29uS2V5OiBbXCJ3ZWFwb25Qcm9maWNpZW5jaWVzXCIsXCJ3ZWFwb25Qcm9mc1wiLFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IHVuaWZpZWRXZWFwb25Qcm9mc1xuICB9LFxuICB7IGNhbGxTaWduOiBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLCAgIGpzb25LZXk6IFtcInRvb2xQcm9maWNpZW5jaWVzXCIsIFwidG9vbFByb2ZzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLCBjb252OiB1bmlmaWVkVG9vbFByb2ZzIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gICAganNvbktleTogW1widG9vbFByb2ZpY2llbmNpZXNcIiwgXCJ0b29sUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KHJhdylcbiAgICAgICAgPyByYXdcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8udG9vbFByb2ZpY2llbmNpZXMpXG4gICAgICAgID8gcmF3LnRvb2xQcm9maWNpZW5jaWVzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnRvb2xzKVxuICAgICAgICA/IHJhdy50b29sc1xuICAgICAgICA6IFtdO1xuICAgICAgY29uc3QgY2hvaWNlID0gYXJyLmZpbmQoKGU6IGFueSkgPT4gZT8uY2hvb3NlKTtcbiAgICAgIHJldHVybiBjaG9pY2U/LmNob29zZT8uZnJvbT8ubWFwKChzOiBzdHJpbmcpID0+IGNhcChzKSkgPz8gW107XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIlNBVklOR19USFJPV1NcIiwgICAgICAgIGpzb25LZXk6IFtcInNhdmVcIiwgXCJwcm9maWNpZW5jeVwiXSwgY29udjogdW5pZmllZFNhdmVzIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJTS0lMTFNcIixcbiAgICBqc29uS2V5OiBbXCJza2lsbFwiLCBcInNraWxsUHJvZlwiLCBcInNraWxsUHJvZmljaWVuY2llc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiB1bmlmaWVkU2tpbGxzXG4gIH0sXG5cbiAge1xuICAgIGNhbGxTaWduOiBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsXG4gICAganNvbktleTogW1wic2tpbGxcIiwgXCJza2lsbFByb2ZcIiwgXCJza2lsbFByb2ZpY2llbmNpZXNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICAvLyBub3JtYWxpemUgaW50byBhbiBhcnJheSBvZiBlbnRyaWVzXG4gICAgICBjb25zdCBhcnI6IGFueVtdID0gQXJyYXkuaXNBcnJheShyYXcpXG4gICAgICAgID8gcmF3XG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxsUHJvZmljaWVuY2llcylcbiAgICAgICAgPyByYXcuc2tpbGxQcm9maWNpZW5jaWVzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxscylcbiAgICAgICAgPyByYXcuc2tpbGxzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxsUHJvZilcbiAgICAgICAgPyByYXcuc2tpbGxQcm9mXG4gICAgICAgIDogW107XG5cbiAgICAgIC8vIGZpbmQgdGhlIG9uZSBlbnRyeSB0aGF0IHJlcHJlc2VudHMgdGhlIFx1MjAxQ2Nob29zZVx1MjAxRCBidWNrZXRcbiAgICAgIGNvbnN0IGNob2ljZU9iaiA9IGFyci5maW5kKGUgPT4gZT8uY2hvb3NlIHx8IHR5cGVvZiBlLmFueSA9PT0gXCJudW1iZXJcIik7XG4gICAgICBpZiAoIWNob2ljZU9iaikgcmV0dXJuIFtdO1xuXG4gICAgICAvLyBleHBsaWNpdCBcdTIwMUNjaG9vc2UgZnJvbSBbIC4uLiBdXHUyMDFEXG4gICAgICBpZiAoY2hvaWNlT2JqLmNob29zZSAmJiBBcnJheS5pc0FycmF5KGNob2ljZU9iai5jaG9vc2UuZnJvbSkpIHtcbiAgICAgICAgcmV0dXJuIGNob2ljZU9iai5jaG9vc2UuZnJvbS5tYXAoY2FwKTtcbiAgICAgIH1cblxuICAgICAgLy8gdGhlIFx1MjAxQ2FueTogM1x1MjAxRCBzaG9ydGhhbmQgXHUyMTkyIG9mZmVyIGV2ZXJ5IHNraWxsXG4gICAgICBpZiAodHlwZW9mIGNob2ljZU9iai5hbnkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgLy8gU0tJTExfT1BUSU9OUyBpcyB5b3VyIGNvbnN0IFtcIkFjcm9iYXRpY3NcIiwgXCJBbmltYWwgSGFuZGxpbmdcIiwgXHUyMDI2XVxuICAgICAgICByZXR1cm4gU0tJTExfT1BUSU9OUztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfSxcbiAgeyBjYWxsU2lnbjogXCJTUEVMTF9DQVNUX01PRFwiLGpzb25LZXk6IFwic3BlbGxjYXN0aW5nQWJpbGl0eVwiLCAgXG4gICAgY29udjogKHJhdykgPT4ge1xuICAgIC8vIHJhdyBtaWdodCBiZSBcImNoYVwiIG9yIFwiQ0hBXCJcbiAgICBjb25zdCBrZXkgPSBTdHJpbmcocmF3KS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBBQklMSVRZX0ZVTExba2V5XSB8fCBrZXkudG9VcHBlckNhc2UoKTtcbiAgfX0sXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3BlbGxzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIkxFVkVMXCIsICAgICAgICAganNvbktleTogXCJsZXZlbFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU0NIT09MXCIsICAgICAgICBqc29uS2V5OiBcInNjaG9vbFwiLCAgIGNvbnY6IHMgPT4gU0NIT09MX01BUFtzXSA/PyBzIH0sXG4gIHsgY2FsbFNpZ246IFwiQ0FTVElOR19USU1FXCIsICBqc29uS2V5OiBcInRpbWVcIiwgICAgIGNvbnY6IGZvcm1hdFRpbWUgfSxcbiAgeyBjYWxsU2lnbjogXCJTUEVMTF9SQU5HRVwiLCAgIGpzb25LZXk6IFwicmFuZ2VcIiwgICAgY29udjogZm9ybWF0UmFuZ2UgfSxcbiAgeyBjYWxsU2lnbjogXCJEVVJBVElPTlwiLCAgICAgIGpzb25LZXk6IFwiZHVyYXRpb25cIiwgY29udjogZm9ybWF0RHVyYXRpb24gfSxcbiAgeyBjYWxsU2lnbjogXCJWRVJCQUxcIiwgICAgICAgIGpzb25LZXk6IFwiY29tcG9uZW50c1wiLCBjb252OiAoYzphbnkpID0+ICEhYy52IH0sXG4gIHsgY2FsbFNpZ246IFwiU09NQVRJQ1wiLCAgICAgICBqc29uS2V5OiBcImNvbXBvbmVudHNcIiwgY29udjogKGM6YW55KSA9PiAhIWMucyB9LFxuICB7IGNhbGxTaWduOiBcIk1BVEVSSUFMXCIsICAgICAganNvbktleTogXCJjb21wb25lbnRzXCIsIGNvbnY6IChjOmFueSkgPT4gISFjLm0gfSxcbiAgeyBjYWxsU2lnbjogXCJDT01QT05FTlRTXCIsXG4gICAganNvbktleTogIFwiY29tcG9uZW50c1wiLFxuICAgIGNvbnY6IChjOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gICAgICBpZiAoIWMubSkgcmV0dXJuIFtdO1xuXG4gICAgICBjb25zdCByYXcgPSBBcnJheS5pc0FycmF5KGMubSkgPyBjLm0gOiBbYy5tXTtcblxuICAgICAgcmV0dXJuIHJhd1xuICAgICAgICAubWFwKChpdGVtOiBhbnkpOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHJldHVybiBpdGVtO1xuICAgICAgICAgIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBpdGVtLnRleHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLnRleHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KVxuICAgICAgICAuZmlsdGVyKChjb21wOiBzdHJpbmcgfCBudWxsKTogY29tcCBpcyBzdHJpbmcgPT4gY29tcCAhPT0gbnVsbCk7XG4gICAgfVxuICB9LCBcbiAgeyBjYWxsU2lnbjogXCJBVFRBQ0tfVFlQRVwiLCAgIGpzb25LZXk6IFwiYXR0YWNrVHlwZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiREFNQUdFX1RZUEVcIiwgICBqc29uS2V5OiBcImRhbWFnZUluZmxpY3RcIiwgY29udjogZCA9PiBBcnJheS5pc0FycmF5KGQpID8gZFswXSA6IGQgfSxcbiAgeyBjYWxsU2lnbjogXCJSSVRVQUxcIiwgICAgICAgIGpzb25LZXk6IFwicml0dWFsXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJDT05DRU5UUkFUSU9OXCIsIGpzb25LZXk6IFwiZHVyYXRpb25cIiwgY29udjogZHMgPT4gQXJyYXkuaXNBcnJheShkcykgJiYgZHMuc29tZSgoeDphbnkpPT4geC5jb25jZW50cmF0aW9uKSB9LFxuICB7IGNhbGxTaWduOiBcIlNBVkVcIiwgICAgICAgICAganNvbktleTogXCJzYXZlQXR0clwiIH0sXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWNpZXMgLyBDcmVhdHVyZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiU1BFQ0lFU1wiLCBqc29uS2V5OiBcIm5hbWVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNJWkVcIiwganNvbktleTogXCJzaXplXCIsIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgICAgLy8gaGFuZGxlIFtcIlNcIixcIk1cIl0gb3IganVzdCBcIkxcIlxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmF3KSkge1xuICAgICAgICByZXR1cm4gcmF3Lm1hcChyID0+IFNJWkVfTUFQW3JdIHx8IHIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFNJWkVfTUFQW3Jhd10gfHwgcmF3O1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgICB7XG4gIGNhbGxTaWduOiBcIlNQRUVEXCIsXG4gIGpzb25LZXk6ICAgXCJzcGVlZFwiLFxuICBjb252OiAoc3A6IG51bWJlciB8IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IHtcbiAgICAvLyBoYW5kbGUgYm90aCBudW1lcmljIHNwZWVkcyBhbmQgb2JqZWN0IHNwZWVkc1xuICAgIGlmICh0eXBlb2Ygc3AgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHJldHVybiBbYFdhbGsgJHtzcH0gZnQuYF07XG4gICAgfVxuICAgIGlmICghc3AgfHwgdHlwZW9mIHNwICE9PSBcIm9iamVjdFwiKSByZXR1cm4gW107XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNwKVxuICAgICAgLmZpbHRlcigoW21vZGVdKSA9PiBtb2RlICE9PSBcImNhbkhvdmVyXCIpXG4gICAgICAubWFwKChbbW9kZSwgdl0pID0+IHtcbiAgICAgICAgY29uc3QgbiA9IHR5cGVvZiB2ID09PSBcIm9iamVjdFwiICYmIHYgIT09IG51bGwgJiYgXCJudW1iZXJcIiBpbiB2ID8gKHYgYXMgYW55KS5udW1iZXIgOiB2O1xuICAgICAgICBjb25zdCBsYWJlbCA9IG1vZGUgPT09IFwid2Fsa1wiID8gXCJXYWxrXCIgOiBjYXAobW9kZSk7XG4gICAgICAgIHJldHVybiBgJHtsYWJlbH0gJHtufSBmdC5gO1xuICAgICAgfSk7XG4gIH0sXG59LFxueyBjYWxsU2lnbjogXCJMQU5HVUFHRVNcIiwganNvbktleTogW1wibGFuZ3VhZ2VzXCIsIFwibGFuZ3VhZ2VQcm9maWNpZW5jaWVzXCJdLCBjb252OiBhcnIgPT4ge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBbXTtcbiAgICAgIGNvbnN0IG91dDogc3RyaW5nW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgbHAgb2YgYXJyKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbHAgPT09IFwic3RyaW5nXCIpIG91dC5wdXNoKGNhcChscCkpO1xuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbHAgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IFtsYW5nLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKGxwKSkge1xuICAgICAgICAgICAgaWYgKHZhbCkgb3V0LnB1c2goY2FwKGxhbmcpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBbLi4ubmV3IFNldChvdXQpXTtcbiAgfX0sXG4gIHsgY2FsbFNpZ246IFwiU0VOU0VTXCIsIGpzb25LZXk6IFwic2Vuc2VzXCIsIGNvbnY6IHNlbiA9PiB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShzZW4pKSByZXR1cm4gc2VuLm1hcCgoczpzdHJpbmcpPT5zLnJlcGxhY2UoL15cXGQrXFxzKi8sXCJcIikucmVwbGFjZSgvXi4vLGM9PmMudG9VcHBlckNhc2UoKSkpO1xuICAgICAgaWYgKHNlbiAmJiB0eXBlb2Ygc2VuPT09XCJvYmplY3RcIikgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNlbikubWFwKChbayx2XSk9PmAke2suY2hhckF0KDApLnRvVXBwZXJDYXNlKCkray5zbGljZSgxKX0gJHt2fWApO1xuICAgICAgcmV0dXJuIFtdO1xuICB9fSwgXG57XG4gIGNhbGxTaWduOiBcIlRSQUlUU1wiLFxuICBqc29uS2V5OiBbXCJjbGFzc0ZlYXR1cmVzXCIsIFwiZW50cmllc1wiXSxcbiAgY29udjogKHJhdzogYW55LCBhbGxKc29uOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gICAgLy8gcHVsbCB0aGUgY2xhc3MgcmVjb3JkIHNvIHdlIGtub3cgaXRzIGRpc3BsYXkgbmFtZVxuICAgIGNvbnN0IGNsc1JlYyA9IEFycmF5LmlzQXJyYXkoYWxsSnNvbi5jbGFzcykgPyBhbGxKc29uLmNsYXNzWzBdIDogYWxsSnNvbjtcbiAgICBjb25zdCBjbGFzc05hbWUgPSB0eXBlb2YgY2xzUmVjLm5hbWUgPT09IFwic3RyaW5nXCIgPyBjbHNSZWMubmFtZSA6IFwiXCI7XG5cbiAgICAvLyBuYW1lcyB3ZSBuZXZlciB3YW50IHRvIGVtaXRcbiAgICBjb25zdCBvbWl0ID0gbmV3IFNldChbXG4gICAgICBcIkFiaWxpdHkgU2NvcmUgSW1wcm92ZW1lbnRcIixcbiAgICAgIFwiQXJjaGV0eXBlIEZlYXR1cmVcIixcbiAgICAgIFwiU3ViY2xhc3MgRmVhdHVyZVwiLFxuICAgICAgLy8gYWRkIG1vcmUgaWYgeW91IGxpa2VcdTIwMjZcbiAgICBdKTtcbiAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgICAvLyAxKSBpZiB0aGVyZSdzIGEgY2xhc3NGZWF0dXJlcyBhcnJheSwgdXNlIGl0XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYWxsSnNvbi5jbGFzc0ZlYXR1cmVzKSkge1xuICAgICAgcmV0dXJuIGFsbEpzb24uY2xhc3NGZWF0dXJlcy5mbGF0TWFwKChmZWF0OiBhbnkpID0+IHtcbiAgICAgICAgLy8gc2tpcCBzdWJjbGFzc1x1MjAxMGluamVjdGVkIGZlYXR1cmVzIGVudGlyZWx5XG4gICAgICAgIGlmIChmZWF0ICYmIHR5cGVvZiBmZWF0ID09PSBcIm9iamVjdFwiICYmIGZlYXQuZ2FpblN1YmNsYXNzRmVhdHVyZSkgcmV0dXJuIFtdO1xuXG4gICAgICAgIC8vIG5vcm1hbGl6ZSB0byBhIHN0cmluZ1xuICAgICAgICBjb25zdCByYXdOYW1lID1cbiAgICAgICAgICB0eXBlb2YgZmVhdCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBmZWF0XG4gICAgICAgICAgICA6IHR5cGVvZiBmZWF0LmNsYXNzRmVhdHVyZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBmZWF0LmNsYXNzRmVhdHVyZVxuICAgICAgICAgICAgOiBcIlwiO1xuXG4gICAgICAgIC8vIGRyb3AgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgXHUyMDFDfFx1MjAxRFxuICAgICAgICBjb25zdCBuYW1lID0gcmF3TmFtZS5zcGxpdChcInxcIilbMF0udHJpbSgpO1xuICAgICAgICBpZiAoIW5hbWUgfHwgb21pdC5oYXMobmFtZSkgfHwgc2Vlbi5oYXMobmFtZSkpIHJldHVybiBbXTtcbiAgICAgICAgc2Vlbi5hZGQobmFtZSk7XG5cbiAgICAgICAgLy8gYnVpbGQgYSBuaWNlIGFuY2hvciAobXVzdCBtYXRjaCB5b3VyIGhlYWRlcnMpXG4gICAgICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgICAgICAucmVwbGFjZSgvW15cXHdcXHNdL2csIFwiXCIpICAgIC8vIHN0cmlwIHB1bmN0dWF0aW9uXG4gICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpICAgICAgIC8vIGNvbGxhcHNlIHNwYWNlc1xuICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAucmVwbGFjZSgvXFxiXFx3L2csIChjOiBhbnkpID0+IGMudG9VcHBlckNhc2UoKSk7IC8vIFRpdGxlIENhc2VcblxuICAgICAgICAvLyBwcm9kdWNlIGEgZmlsZS1hbmNob3IgbGlua1xuICAgICAgICByZXR1cm4gYFtbJHtjbGFzc05hbWV9IyR7YW5jaG9yfXwke25hbWV9XV1gO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gMikgb3RoZXJ3aXNlIGZhbGwgYmFjayB0byB5b3VyIG9sZCBlbnRyaWVzLWJhc2VkIGxvZ2ljXG4gICAgY29uc3QgZW50cyA9IEFycmF5LmlzQXJyYXkocmF3KSA/IHJhdyA6IFtdO1xuICAgIGNvbnN0IGZlYXR1cmVOYW1lcyA9IGVudHNcbiAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT4gZT8uZGF0YT8uaXNGZWF0dXJlICYmIHR5cGVvZiBlLm5hbWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAubWFwKChlOiBhbnkpID0+IGUubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIikudHJpbSgpKTtcbiAgICBpZiAoZmVhdHVyZU5hbWVzLmxlbmd0aCkgcmV0dXJuIGZlYXR1cmVOYW1lcztcblxuICAgIHJldHVybiBlbnRzXG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IGUgJiYgdHlwZW9mIGUubmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgIC5tYXAoKGU6IGFueSkgPT4gZS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKS50cmltKCkpO1xuICB9LFxufSxcblxuXG4gIHsgY2FsbFNpZ246IFwiQUNcIiwganNvbktleTogXCJhY1wiLCBjb252OiBhID0+IEFycmF5LmlzQXJyYXkoYSk/YVswXS5hYzphIH0sXG4gIHsgY2FsbFNpZ246IFwiSFBcIiwganNvbktleTogXCJocFwiLCBjb252OiBocCA9PiBocD8uYXZlcmFnZSA/PyBocCB9LFxuICB7IGNhbGxTaWduOiBcIkNIQUxMRU5HRV9SQVRJTkdcIiwganNvbktleTogXCJjclwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU1RSRU5HVEhcIiwgICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbMF06YXJyPy5zdHIgPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIkRFWFRFUklUWVwiLCAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzFdOmFycj8uZGV4ID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJDT05TVElUVVRJT05cIiwganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclsyXTphcnI/LmNvbiA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiSU5URUxMSUdFTkNFXCIsIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbM106YXJyPy5pbnQgPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIldJU0RPTVwiLCAgICAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzRdOmFycj8ud2lzID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJDSEFSSVNNQVwiLCAgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2Fycls1XTphcnI/LmNoYSA/PyAwIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJBTElHTk1FTlRcIixcbiAgICBqc29uS2V5OiBcImFsaWdubWVudFwiLFxuICAgIGNvbnY6IChhOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHJhdyA9IEFycmF5LmlzQXJyYXkoYSkgPyBhLmpvaW4oXCIgXCIpIDogdHlwZW9mIGEgPT09IFwic3RyaW5nXCIgPyBhIDogU3RyaW5nKGEpO1xuICAgICAgY29uc3QgY2xlYW5lZCA9IHJhd1xuICAgICAgICAucmVwbGFjZSgvXFxiQVxcYi9nLCBcIkFueVwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiVVxcYi9nLCBcIlVuYWxpZ25lZFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiTlxcYi9nLCBcIk5ldXRyYWxcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkxcXGIvZywgXCJMYXdmdWxcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkNcXGIvZywgXCJDaGFvdGljXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJHXFxiL2csIFwiR29vZFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiRVxcYi9nLCBcIkV2aWxcIik7XG5cbiAgICAgIHJldHVybiBmb3JtYXRBbGlnbm1lbnRBYmJyZXYoY2xlYW5lZCk7IC8vIHJldXNlIHlvdXIgbm9ybWFsaXplciBpZiBpdCBleGlzdHNcbiAgICB9XG4gIH0sXG4gICAge1xuICAgICAgY2FsbFNpZ246IFwiVFlQRVwiLFxuICAgICAganNvbktleTogXCJ0eXBlXCIsXG4gICAgICBjb252OiAodDogYW55KTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgICAgLy8gMSkgSWYgaXRcdTIwMTlzIGEgc2ltcGxlIHN0cmluZyBjb2RlLCBtYXAgaXRcbiAgICAgICAgaWYgKHR5cGVvZiB0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgLy8gZGlyZWN0IGxvb2t1cFx1MjAxNGlmIG5vIG1hcHBpbmcsIGp1c3QgdGl0bGVcdTIwMTBjYXNlIHRoZSBjb2RlXG4gICAgICAgICAgcmV0dXJuIElURU1fVFlQRV9NQVBbdF0gPz8gY2FwKHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gMikgSWYgaXRcdTIwMTlzIGFuIG9iamVjdCB3aXRoIGEgLnR5cGUgdGFnXG4gICAgICAgIGlmICh0ICYmIHR5cGVvZiB0ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgY29uc3QgY29kZSA9IFN0cmluZyh0LnR5cGUgfHwgXCJcIikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAvLyB0cnkgdGhlIG1hcCBmaXJzdFxuICAgICAgICAgIGlmIChJVEVNX1RZUEVfTUFQW2NvZGVdKSB7XG4gICAgICAgICAgICByZXR1cm4gSVRFTV9UWVBFX01BUFtjb2RlXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gb3RoZXJ3aXNlIGZhbGwgYmFjayB0byBcdTIwMUNCYXNlICh0YWdzXHUyMDI2KVx1MjAxRCBzdHlsZVxuICAgICAgICAgIGNvbnN0IGJhc2UgPSB0LnR5cGUgPyBjYXAodC50eXBlKSA6IFwiVW5rbm93blwiO1xuICAgICAgICAgIGNvbnN0IHRhZ3MgPSBBcnJheS5pc0FycmF5KHQudGFncykgPyB0LnRhZ3MubWFwKGNhcCkgOiBbXTtcbiAgICAgICAgICByZXR1cm4gdGFncy5sZW5ndGggPyBgJHtiYXNlfSAoJHt0YWdzLmpvaW4oXCIsIFwiKX0pYCA6IGJhc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0sXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSXRlbXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiVFlQRVwiLCAgIGpzb25LZXk6IFwiX3BhcnNlZFR5cGVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlJBUklUWVwiLCBqc29uS2V5OiBcInJhcml0eVwiLCBjb252OiByID0+IHtcbiAgICAgIGNvbnN0IHMgPSBTdHJpbmcocnx8XCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiBzICYmIHMhPT1cIm5vbmVcIiA/IHNbMF0udG9VcHBlckNhc2UoKStzLnNsaWNlKDEpIDogdW5kZWZpbmVkO1xuICB9fSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkNPU1RcIixcbiAgICBqc29uS2V5OiBcInZhbHVlXCIsXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBzID0gU3RyaW5nKHJhdykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBsZXQgbnVtOiBudW1iZXI7XG5cbiAgICAgIC8vIGV4cGxpY2l0IGNvcHBlcj9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwiY3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgLy8gY29udmVydCB0byBncCBvbmx5IGlmIDEwMCsgY3BcbiAgICAgICAgcmV0dXJuIG51bSA+PSAxMDBcbiAgICAgICAgICA/IGAke01hdGgucm91bmQoKG51bS8xMDApICogMTAwKS8xMDB9Z3BgXG4gICAgICAgICAgOiBgJHtudW19Y3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBleHBsaWNpdCBzaWx2ZXI/XG4gICAgICBpZiAocy5lbmRzV2l0aChcInNwXCIpKSB7XG4gICAgICAgIG51bSA9IHBhcnNlRmxvYXQocyk7XG4gICAgICAgIC8vIGNvbnZlcnQgdG8gZ3Agb25seSBpZiAxMCsgc3BcbiAgICAgICAgcmV0dXJuIG51bSA+PSAxMFxuICAgICAgICAgID8gYCR7TWF0aC5yb3VuZCgobnVtLzEwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICAgIDogYCR7bnVtfXNwYDtcbiAgICAgIH1cblxuICAgICAgLy8gZXhwbGljaXQgZ29sZD9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwiZ3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgcmV0dXJuIGAke01hdGgucm91bmQobnVtICogMTAwKS8xMDB9Z3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBiYXJlIG51bWJlciBcdTIxOTIgYXNzdW1lIGNvcHBlclxuICAgICAgbnVtID0gcGFyc2VGbG9hdChzKSB8fCAwO1xuICAgICAgcmV0dXJuIG51bSA+PSAxMDBcbiAgICAgICAgPyBgJHtNYXRoLnJvdW5kKChudW0vMTAwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICA6IGAke251bX1jcGA7XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIldFSUdIVFwiLCBqc29uS2V5OiBcIndlaWdodFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiTUFHSUNBTFwiLCBqc29uS2V5OiBcIndvbmRyb3VzXCIsIGNvbnY6IChfdyxhbGwpID0+ICEhYWxsLndvbmRyb3VzIHx8ICEhYWxsLnJlcUF0dHVuZSB9LFxuICB7IGNhbGxTaWduOiBcIlZBUklBTlRcIiwganNvbktleTogXCJib251c1dlYXBvblwiLCBjb252OiBiID0+IHR5cGVvZiBiPT09XCJzdHJpbmdcIiAmJiBiLnN0YXJ0c1dpdGgoXCIrXCIpIH0sXG4gIHsgY2FsbFNpZ246IFwiUFJPUEVSVElFU1wiLCBqc29uS2V5OiBcInByb3BlcnR5XCIsIGNvbnY6IGFyciA9PiBBcnJheS5pc0FycmF5KGFycikgPyBhcnIubWFwKHAgPT4gUFJPUEVSVFlfTUFQW3BdIHx8IHApIDogW10gfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VcIiwganNvbktleTogXCJkbWcxXCIsIGNvbnY6IChkLGFsbCkgPT4gZCA/IGFsbC5kbWcyID8gYCR7ZH0gLyAke2FsbC5kbWcyfWAgOiBgJHtkfWAgOiB1bmRlZmluZWQgfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfVFlQRVNcIiwganNvbktleTogXCJkbWdUeXBlXCIsIGNvbnY6IGR0ID0+IGR0ID09IG51bGwgPyBbXSA6IEFycmF5LmlzQXJyYXkoZHQpID8gZHQgOiBbZHRdIH0sXG4gIHsgY2FsbFNpZ246IFwiUkFOR0VcIiwganNvbktleTogXCJyYW5nZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiUkVMT0FEXCIsIGpzb25LZXk6IFwicmVsb2FkXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJBTU1PX1RZUEVcIiwganNvbktleTogXCJhbW1vVHlwZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU1RFQUxUSF9ESVNBRFZBTlRBR0VcIiwganNvbktleTogXCJzdGVhbHRoXCIgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkFUVFVORU1FTlRcIixcbiAgICBqc29uS2V5OiBbXCJ3b25kcm91c1wiLCBcInJlcUF0dHVuZVwiLCBcInJlcV9hdHR1bmVcIiwgXCJyZXFBdHR1bmVUYWdzXCJdLFxuICAgIGNvbnY6IChfcmF3LCBhbGxKc29uKSA9PiB7XG4gICAgICBjb25zdCBqID0gYWxsSnNvbiBhcyBhbnk7XG4gICAgICBjb25zdCBoYXNUZXh0ID0gdHlwZW9mIGoucmVxQXR0dW5lID09PSBcInN0cmluZ1wiICYmIGoucmVxQXR0dW5lLnRyaW0oKSAhPT0gXCJcIjtcbiAgICAgIGNvbnN0IGhhc1RhZ3MgPSBBcnJheS5pc0FycmF5KGoucmVxQXR0dW5lVGFncykgJiYgai5yZXFBdHR1bmVUYWdzLmxlbmd0aCA+IDA7XG4gICAgICByZXR1cm4gaGFzVGV4dCB8fCBoYXNUYWdzO1xuICAgIH1cbiAgfSxcbiAge1xuICBjYWxsU2lnbjogXCJBVFRVTkVfUkVRXCIsXG4gIGpzb25LZXk6IFwicmVxQXR0dW5lVGFnc1wiLFxuICBjb252OiAodGFnczogYW55W10gPSBbXSwgX2FsbCkgPT4ge1xuICAgIGNvbnN0IG1hcExldHRlcjogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAgICAgQTogXCJBbnlcIiwgVTogXCJVbmFsaWduZWRcIiwgTjogXCJOZXV0cmFsXCIsXG4gICAgICBMOiBcIkxhd2Z1bFwiLCBDOiBcIkNoYW90aWNcIiwgRzogXCJHb29kXCIsIEU6IFwiRXZpbFwiXG4gICAgfTtcbiAgICBjb25zdCByZXFzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgaWYgKHRhZy5jbGFzcyAmJiBBcnJheS5pc0FycmF5KHRhZy5hbGlnbm1lbnQpKSB7XG4gICAgICAgIGNvbnN0IGNscyA9IGNhcCh0YWcuY2xhc3MpO1xuICAgICAgICBmb3IgKGNvbnN0IGNvZGUgb2YgdGFnLmFsaWdubWVudCkge1xuICAgICAgICAgIHJlcXMucHVzaChgJHttYXBMZXR0ZXJbY29kZV0gfHwgY29kZX0gJHtjbHN9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGFnLmNsYXNzKSB7XG4gICAgICAgIHJlcXMucHVzaChjYXAodGFnLmNsYXNzKSk7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodGFnLmFsaWdubWVudCkpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb2RlIG9mIHRhZy5hbGlnbm1lbnQpIHtcbiAgICAgICAgICByZXFzLnB1c2gobWFwTGV0dGVyW2NvZGVdIHx8IGNvZGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRhZy5iYWNrZ3JvdW5kKSB7XG4gICAgICAgIGNvbnN0IFtiZ10gPSBTdHJpbmcodGFnLmJhY2tncm91bmQpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgcmVxcy5wdXNoKGJnLnNwbGl0KFwiIFwiKS5tYXAoY2FwKS5qb2luKFwiIFwiKSk7XG4gICAgICB9IGVsc2UgaWYgKHRhZy5zcGVsbGNhc3RpbmcpIHtcbiAgICAgICAgcmVxcy5wdXNoKFwiU3BlbGxjYXN0ZXJcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldChyZXFzKSk7XG4gIH1cbn0sXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBPdGhlciBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfUkVTXCIsIGpzb25LZXk6IFwicmVzaXN0XCIsIGNvbnY6IHYgPT4gQXJyYXkuaXNBcnJheSh2KSA/IHYubWFwKGNhcCkgOiBbXSB9LFxuICB7IGNhbGxTaWduOiBcIlJVTEVTRVRcIiwganNvbktleTogXCJfZWRpdGlvbklkXCIgfSxcbiAgXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEFiaWxpdHlcdTIwMTBzY29yZSBtb2RpZmllcnMgKG9ubHkgZW1pdCB3aGVuIG5vbnplcm8pIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7XG4gICAgY2FsbFNpZ246IFwiU1RSX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uc3RyID8/IDApIDogKGFyci5zdHIgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkRFWF9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLmRleCA/PyAwKSA6IChhcnIuZGV4ID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDT05fTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5jb24gPz8gMCkgOiAoYXJyLmNvbiA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiSU5UX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uaW50ID8/IDApIDogKGFyci5pbnQgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIldJU19NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLndpcyA/PyAwKSA6IChhcnIud2lzID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJDSEFfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5jaGEgPz8gMCkgOiAoYXJyLmNoYSA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuXG5cbl07XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEdlbmVyaWMgYnVpbGRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBmdW5jdGlvbiBidWlsZEZNKGpzb246IGFueSwgZGVmczogRmllbGREZWZbXSk6IEZyb250bWF0dGVyIHtcbiAgY29uc3QgZm06IEZyb250bWF0dGVyID0ge307XG4gIGZvciAoY29uc3QgeyBjYWxsU2lnbiwganNvbktleSwgY29udiB9IG9mIGRlZnMpIHtcbiAgICBjb25zdCBrZXlzID0gQXJyYXkuaXNBcnJheShqc29uS2V5KSA/IGpzb25LZXkgOiBbanNvbktleV07XG4gICAgbGV0IHJhdzogYW55ID0gdW5kZWZpbmVkO1xuXG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgaWYgKGpzb25ba2V5XSAhPSBudWxsKSB7XG4gICAgICAgIHJhdyA9IGpzb25ba2V5XTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJhdyA9PSBudWxsKSBjb250aW51ZTtcbiAgICBjb25zdCB2YWwgPSBjb252ID8gY29udihyYXcsIGpzb24pIDogcmF3O1xuICAgIGZtW0ZNX0ZJRUxEU1tjYWxsU2lnbl1dID0gdmFsO1xuICB9XG4gIHJldHVybiBmbTtcbn1cblxuLy8gZnJvbnRtYXR0ZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUZyb250bWF0dGVyKFxuICBmbTogRnJvbnRtYXR0ZXIsXG4gIGRlZnM/OiBGaWVsZERlZltdXG4pOiBzdHJpbmcge1xuICBjb25zdCBmaWx0ZXJlZDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gIC8vIGRldGVjdCBpZiB3ZSBoYXZlIGFueSBhY3R1YWwgY2hvaWNlLWxpc3RzXG4gIGNvbnN0IGhhc1NraWxsQ2hvaWNlID0gQXJyYXkuaXNBcnJheShmbVtGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1RdKSBcbiAgICAmJiAoZm1bRk1fRklFTERTLlNLSUxMX0NIT0lDRV9MSVNUXSBhcyBhbnlbXSkubGVuZ3RoID4gMDtcbiAgY29uc3QgaGFzVG9vbENob2ljZSA9IEFycmF5LmlzQXJyYXkoZm1bRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1RdKSBcbiAgICAmJiAoZm1bRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1RdIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuXG5cbiAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZm0pKSB7XG4gICAgLy8gMSkgbmV2ZXIgZW1pdCB1bmRlZmluZWRcbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcbiAgICAvLyAyKSBkcm9wIGVtcHR5IENPTVBPTkVOVFMsIFRPT0xfQ0hPSUNFX0xJU1QsIFNLSUxMX0NIT0lDRV9MSVNUXG4gICAgaWYgKGsgPT09IEZNX0ZJRUxEUy5DT01QT05FTlRTICYmIEFycmF5LmlzQXJyYXkodikgJiYgdi5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xuICAgIGlmIChcbiAgICAgIChrID09PSBGTV9GSUVMRFMuVE9PTF9DSE9JQ0VfTElTVCB8fCBrID09PSBGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1QpICYmXG4gICAgICBBcnJheS5pc0FycmF5KHYpICYmIHYubGVuZ3RoID09PSAwXG4gICAgKSBjb250aW51ZTtcblxuICAgIGZpbHRlcmVkW2tdID0gdjtcbiAgfVxuXG4gIC8vIGJ1aWxkIHRoZSBsaXN0IG9mIGtleXMgaW4gdGhlIGV4YWN0IG9yZGVyIGZyb20gZGVmc1xuICBsZXQga2V5c1RvRW1pdDogc3RyaW5nW107XG4gIGlmIChkZWZzKSB7XG4gICAgLy8gbWFwIGVhY2ggRmllbGREZWYgdG8gaXRzIGZyb250bWF0dGVyIGtleVxuICAgIGNvbnN0IHdhbnRlZCA9IGRlZnMubWFwKGQgPT4gRk1fRklFTERTW2QuY2FsbFNpZ25dKTtcbiAgICAvLyBvbmx5IGtlZXAgdGhlIG9uZXMgd2UgYWN0dWFsbHkgaGF2ZSwgaW4gb3JkZXJcbiAgICBrZXlzVG9FbWl0ID0gd2FudGVkLmZpbHRlcihrID0+IGsgaW4gZmlsdGVyZWQpO1xuICAgIC8vIHRoZW4gYXBwZW5kIGFueSBleHRyYSBrZXlzIHRoYXQgd2VyZW4ndCBpbiBkZWZzXG4gICAga2V5c1RvRW1pdC5wdXNoKFxuICAgICAgLi4uT2JqZWN0LmtleXMoZmlsdGVyZWQpLmZpbHRlcihrID0+ICFrZXlzVG9FbWl0LmluY2x1ZGVzKGspKVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAga2V5c1RvRW1pdCA9IE9iamVjdC5rZXlzKGZpbHRlcmVkKTtcbiAgfVxuXG4gIC8vIG5vdyBlbWl0IFlBTUwgaW4gdGhhdCBvcmRlclxuICByZXR1cm4ga2V5c1RvRW1pdFxuICAgIC5tYXAoayA9PiB7XG4gICAgICBjb25zdCB2ID0gZmlsdGVyZWRba107XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2KSkge1xuICAgICAgICAvLyBKU09OLnN0cmluZ2lmeSB0byBoYW5kbGUgc3BhY2VzLCBjb21tYXMsIGV0Yy5cbiAgICAgICAgY29uc3QgaW5saW5lID0gdi5tYXAoaXRlbSA9PiBKU09OLnN0cmluZ2lmeShpdGVtKSkuam9pbihcIiwgXCIpO1xuICAgICAgICByZXR1cm4gYCR7a306IFske2lubGluZX1dYDtcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gYCR7a306IFwiJHt2fVwiYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtrfTogJHt2fWA7XG4gICAgfSlcbiAgICAuam9pbihcIlxcblwiKTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU2tpbGwgaGVscGVycyBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBjb25zdCBTS0lMTF9PUFRJT05TID0gW1xuICBcIkFjcm9iYXRpY3NcIixcIkFuaW1hbCBIYW5kbGluZ1wiLFwiQXJjYW5hXCIsXCJBdGhsZXRpY3NcIixcIkRlY2VwdGlvblwiLFwiSGlzdG9yeVwiLFxuICBcIkluc2lnaHRcIixcIkludGltaWRhdGlvblwiLFwiSW52ZXN0aWdhdGlvblwiLFwiTWVkaWNpbmVcIixcIk5hdHVyZVwiLFwiUGVyY2VwdGlvblwiLFxuICBcIlBlcmZvcm1hbmNlXCIsXCJQZXJzdWFzaW9uXCIsXCJSZWxpZ2lvblwiLFwiU2xlaWdodCBvZiBIYW5kXCIsXCJTdGVhbHRoXCIsXCJTdXJ2aXZhbFwiLFxuXSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFNraWxsT3B0aW9uID0gdHlwZW9mIFNLSUxMX09QVElPTlNbbnVtYmVyXTtcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVTa2lsbChyYXc6IHN0cmluZyk6IFNraWxsT3B0aW9uIHwgbnVsbCB7XG4gIGNvbnN0IGxvd2VyID0gcmF3LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gU0tJTExfT1BUSU9OUy5maW5kKHNraWxsID0+IHNraWxsLnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyKSA/PyBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclZhbGlkU2tpbGxzKHJhd0FycjogYW55W10pOiBTa2lsbE9wdGlvbltdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHJhd0FycikpIHJldHVybiBbXTtcbiAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8U2tpbGxPcHRpb24+KCk7XG4gIGZvciAoY29uc3QgZW50IG9mIHJhd0Fycikge1xuICAgIGxldCBjYW5kaWRhdGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikgY2FuZGlkYXRlID0gZW50O1xuICAgIGVsc2UgaWYgKGVudC5uYW1lICYmIHR5cGVvZiBlbnQubmFtZSA9PT0gXCJzdHJpbmdcIikgY2FuZGlkYXRlID0gZW50Lm5hbWU7XG4gICAgaWYgKGNhbmRpZGF0ZSkge1xuICAgICAgY29uc3Qgbm9ybSA9IG5vcm1hbGl6ZVNraWxsKGNhbmRpZGF0ZSk7XG4gICAgICBpZiAobm9ybSkgc2Vlbi5hZGQobm9ybSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBbLi4uc2Vlbl07XG59XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBXaGljaCBGTV9LRVlTIGVhY2ggcGFyc2VyIHNob3VsZCBpbmNsdWRlIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNQRUxMX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIkxFVkVMXCIsXG4gIFwiU0NIT09MXCIsXG4gIFwiQ0FTVElOR19USU1FXCIsXG4gIFwiU1BFTExfUkFOR0VcIixcbiAgXCJEVVJBVElPTlwiLFxuICBcIlZFUkJBTFwiLFxuICBcIlNPTUFUSUNcIixcbiAgXCJNQVRFUklBTFwiLFxuICBcIkNPTVBPTkVOVFNcIixcbiAgXCJDT05DRU5UUkFUSU9OXCIsXG4gIFwiU09VUkNFXCIsXG5dO1xuXG5leHBvcnQgY29uc3QgU1BFQ0lFU19LRVlTOiBGTUtleVtdID0gW1xuICBcIlNQRUNJRVNcIixcbiAgXCJTSVpFXCIsXG4gIFwiU1BFRURcIixcbiAgXCJMQU5HVUFHRVNcIixcbiAgXCJUUkFJVFNcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTVFJfTU9EXCIsXG4gIFwiREVYX01PRFwiLFxuICBcIkNPTl9NT0RcIixcbiAgXCJJTlRfTU9EXCIsXG4gIFwiV0lTX01PRFwiLFxuICBcIkNIQV9NT0RcIixcbiAgXCJTS0lMTF9DSE9JQ0VfTElTVFwiLFxuICBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgXCJXRUFQT05fUFJPRklDSUVOQ0lFU1wiLFxuICBcIlNFTlNFU1wiLFxuICBcIkRBTUFHRV9SRVNcIixcbiAgXCJTT1VSQ0VcIixcbl07XG5cbmV4cG9ydCBjb25zdCBJVEVNX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlRZUEVcIixcbiAgXCJSQVJJVFlcIixcbiAgXCJDT1NUXCIsXG4gIFwiV0VJR0hUXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUFJPUEVSVElFU1wiLFxuICBcIkRBTUFHRVwiLFxuICBcIkRBTUFHRV9UWVBFU1wiLFxuICBcIlJBTkdFXCIsXG4gIFwiUkVMT0FEXCIsXG4gIFwiQU1NT19UWVBFXCIsXG4gIFwiQUNcIixcbiAgXCJTVEVBTFRIX0RJU0FEVkFOVEFHRVwiLFxuICBcIk1BR0lDQUxcIixcbiAgXCJBVFRVTkVNRU5UXCIsXG4gIFwiQVRUVU5FX1JFUVwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IEJFU1RJQVJZX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNJWkVcIixcbiAgXCJUWVBFXCIsXG4gIFwiQUxJR05NRU5UXCIsXG4gIFwiQUNcIixcbiAgXCJIUFwiLFxuICBcIlNQRUVEXCIsXG4gIFwiU1RSRU5HVEhcIixcbiAgXCJERVhURVJJVFlcIixcbiAgXCJDT05TVElUVVRJT05cIixcbiAgXCJJTlRFTExJR0VOQ0VcIixcbiAgXCJXSVNET01cIixcbiAgXCJDSEFSSVNNQVwiLFxuICBcIlNBVklOR19USFJPV1NcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTRU5TRVNcIixcbiAgXCJMQU5HVUFHRVNcIixcbiAgXCJDSEFMTEVOR0VfUkFUSU5HXCIsXG4gIFwiU09VUkNFXCIsXG5dO1xuXG5leHBvcnQgY29uc3QgQ0xBU1NfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiU1BFTExfQ0FTVF9NT0RcIixcbiAgXCJBUk1PUl9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiV0VBUE9OX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiU0FWSU5HX1RIUk9XU1wiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU09VUkNFXCJcbl07XG5cbmV4cG9ydCBjb25zdCBCQUNLR1JPVU5EX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsICBcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU09VUkNFXCIsXG5dO1xuXG5leHBvcnQgY29uc3QgRkVBVFNfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJTT1VSQ0VcIlxuXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZpZWxkIHN1YnNldHMgZm9yIGVhY2ggcGFyc2VyIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNQRUxMX01FVEFfREVGUzogRmllbGREZWZbXSA9IFNQRUxMX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBTUEVMTF9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBTUEVDSUVTX01FVEFfREVGUzogRmllbGREZWZbXSA9IFNQRUNJRVNfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIFNQRUNJRVNfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgSVRFTV9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBJVEVNX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBJVEVNX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEJFU1RJQVJZX01FVEFfREVGUzogRmllbGREZWZbXSA9IEJFU1RJQVJZX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCRVNUSUFSWV9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBDTEFTU19NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBDTEFTU19LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQ0xBU1NfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgQkFDS0dST1VORF9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBCQUNLR1JPVU5EX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCQUNLR1JPVU5EX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEZFQVRTX01FVEFfREVGUzogRmllbGREZWZbXSA9IEZFQVRTX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBCQUNLR1JPVU5EX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pOyIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBTUEVMTF9NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cblxuZXhwb3J0IGNvbnN0IFNDSE9PTF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEE6IFwiQWJqdXJhdGlvblwiLFxuICBDOiBcIkNvbmp1cmF0aW9uXCIsXG4gIEQ6IFwiRGl2aW5hdGlvblwiLFxuICBFOiBcIkVuY2hhbnRtZW50XCIsXG4gIFY6IFwiRXZvY2F0aW9uXCIsXG4gIEk6IFwiSWxsdXNpb25cIixcbiAgTjogXCJOZWNyb21hbmN5XCIsXG4gIFQ6IFwiVHJhbnNtdXRhdGlvblwiLFxufTtcblxuZnVuY3Rpb24gb3JkaW5hbChuOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBzdWZmaXggPSAobiA9PT0gMSkgPyBcInN0XCIgOiAobiA9PT0gMikgPyBcIm5kXCIgOiAobiA9PT0gMykgPyBcInJkXCIgOiBcInRoXCI7XG4gIHJldHVybiBgJHtufSR7c3VmZml4fWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRSYW5nZShyYW5nZTogYW55KTogc3RyaW5nIHtcbiAgaWYgKCFyYW5nZSkgcmV0dXJuIFwiXCI7XG5cbiAgaWYgKHR5cGVvZiByYW5nZSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHJhbmdlO1xuXG4gIGlmIChyYW5nZS50eXBlID09PSBcInNwZWNpYWxcIikgcmV0dXJuIFwiU3BlY2lhbFwiO1xuICBpZiAocmFuZ2UudHlwZSA9PT0gXCJwb2ludFwiICYmIHJhbmdlLmRpc3RhbmNlKSB7XG4gICAgY29uc3QgZGlzdCA9IHJhbmdlLmRpc3RhbmNlO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwidG91Y2hcIikgcmV0dXJuIFwiVG91Y2hcIjtcbiAgICBpZiAoZGlzdC50eXBlID09PSBcInNlbGZcIikgcmV0dXJuIFwiU2VsZlwiO1xuICAgIGlmIChkaXN0LnR5cGUgPT09IFwic2lnaHRcIikgcmV0dXJuIFwiU2lnaHRcIjtcbiAgICBpZiAoZGlzdC5hbW91bnQpIHJldHVybiBgJHtkaXN0LmFtb3VudH0gJHtkaXN0LnR5cGV9YDtcbiAgfVxuXG4gIHJldHVybiBcIlZhcmllc1wiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGltZSh0aW1lOiBhbnlbXSk6IHN0cmluZyB7XG4gIGlmICghQXJyYXkuaXNBcnJheSh0aW1lKSkgcmV0dXJuIFwiXCI7XG5cbiAgcmV0dXJuIHRpbWUubWFwKHQgPT4gYCR7dC5udW1iZXJ9ICR7dC51bml0fWApLmpvaW4oXCIsIFwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdER1cmF0aW9uKGR1cmF0aW9uOiBhbnlbXSk6IHN0cmluZyB7XG4gIGlmICghQXJyYXkuaXNBcnJheShkdXJhdGlvbikpIHJldHVybiBcIlwiO1xuXG4gIHJldHVybiBkdXJhdGlvbi5tYXAoZCA9PiB7XG4gICAgaWYgKGQudHlwZSA9PT0gXCJpbnN0YW50XCIpIHJldHVybiBcIkluc3RhbnRhbmVvdXNcIjtcbiAgICBpZiAoZC50eXBlID09PSBcInRpbWVkXCIgJiYgZC5kdXJhdGlvbikge1xuICAgICAgcmV0dXJuIGAke2QuZHVyYXRpb24uYW1vdW50fSAke2QuZHVyYXRpb24udHlwZX0ke2QuY29uY2VudHJhdGlvbiA/IFwiIChjb25jZW50cmF0aW9uKVwiIDogXCJcIn1gO1xuICAgIH1cbiAgICBpZiAoZC50eXBlID09PSBcInBlcm1hbmVudFwiKSByZXR1cm4gXCJQZXJtYW5lbnRcIjtcbiAgICByZXR1cm4gXCJTcGVjaWFsXCI7XG4gIH0pLmpvaW4oXCIsIFwiKTtcbn1cbi8vIGluIHBhcnNlcnMvNWUtanNvbi9wYXJzZVNwZWxsc0ZpbGUudHMgKG9yIHdoZXJldmVyIGZvcm1hdENvbXBvbmVudHMgbGl2ZXMpXG5cbmZ1bmN0aW9uIGZvcm1hdENvbXBvbmVudHMoY29tcG9uZW50czogYW55KTogc3RyaW5nIHtcbiAgaWYgKCFjb21wb25lbnRzKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICBpZiAoY29tcG9uZW50cy52KSBwYXJ0cy5wdXNoKFwiVlwiKTtcbiAgaWYgKGNvbXBvbmVudHMucykgcGFydHMucHVzaChcIlNcIik7XG5cbiAgaWYgKGNvbXBvbmVudHMubSkge1xuICAgIC8vIHB1bGwgb3V0IHRoZSBhY3R1YWwgbWF0ZXJpYWwgdGV4dChzKVxuICAgIGxldCBtYXREZXRhaWxzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29tcG9uZW50cy5tKSkge1xuICAgICAgbWF0RGV0YWlscyA9IGNvbXBvbmVudHMubVxuICAgICAgICAubWFwKChpdGVtOmFueSkgPT5cbiAgICAgICAgICB0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBpdGVtXG4gICAgICAgICAgICA6IGl0ZW0gJiYgdHlwZW9mIGl0ZW0udGV4dCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyBpdGVtLnRleHRcbiAgICAgICAgICAgIDogbnVsbFxuICAgICAgICApXG4gICAgICAgIC5maWx0ZXIoKHQ6YW55KTogdCBpcyBzdHJpbmcgPT4gISF0KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb21wb25lbnRzLm0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG1hdERldGFpbHMgPSBbY29tcG9uZW50cy5tXTtcbiAgICB9IGVsc2UgaWYgKGNvbXBvbmVudHMubS50ZXh0KSB7XG4gICAgICBtYXREZXRhaWxzID0gW2NvbXBvbmVudHMubS50ZXh0XTtcbiAgICB9XG5cbiAgICAvLyBidWlsZCB0aGUgXHUyMDFDTVx1MjAxRCBlbnRyeSwgYXBwZW5kaW5nIGRldGFpbHMgaWYgYW55XG4gICAgY29uc3QgbWF0UGFydCA9XG4gICAgICBtYXREZXRhaWxzLmxlbmd0aCA+IDBcbiAgICAgICAgPyBgTSAoJHttYXREZXRhaWxzLmpvaW4oXCIsIFwiKX0pYFxuICAgICAgICA6IFwiTVwiO1xuXG4gICAgcGFydHMucHVzaChtYXRQYXJ0KTtcbiAgfVxuXG4gIHJldHVybiBwYXJ0cy5qb2luKFwiLCBcIik7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3BlbGxzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIWpzb24uc3BlbGwpIHJldHVybiBbXTtcblxuICAvLyBtYWtlIGVkaXRpb25JZCBhdmFpbGFibGUgZm9yIG91ciBTT1VSQ0UgY29udmVydGVyXG4gIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuICByZXR1cm4ganNvbi5zcGVsbC5tYXAoKHNwZWxsOiBhbnkpID0+IHtcbiAgICAvLyBcdTIwMTQgZ2F0aGVyIGRhdGEgZm9yIGhlYWRlci9ib2R5L2Zvb3RlciBhcyBiZWZvcmUgXHUyMDE0XG4gICAgY29uc3Qgc291cmNlcyA9IHNwZWxsLnNvdXJjZVxuICAgICAgPyBBcnJheS5pc0FycmF5KHNwZWxsLnNvdXJjZSkgPyBzcGVsbC5zb3VyY2UgOiBbc3BlbGwuc291cmNlXVxuICAgICAgOiBbXCJ1bmtub3duXCJdO1xuICAgIGNvbnN0IG5hbWUgPSBzcGVsbC5uYW1lO1xuICAgIGNvbnN0IHNjaG9vbCA9IFNDSE9PTF9NQVBbc3BlbGwuc2Nob29sXSA/PyBzcGVsbC5zY2hvb2w7XG4gICAgY29uc3QgbGV2ZWwgPSBzcGVsbC5sZXZlbDtcbiAgICBjb25zdCByYW5nZSA9IGZvcm1hdFJhbmdlKHNwZWxsLnJhbmdlKTtcbiAgICBjb25zdCBjYXN0aW5nVGltZSA9IGZvcm1hdFRpbWUoc3BlbGwudGltZSk7XG4gICAgY29uc3QgZHVyYXRpb24gPSBmb3JtYXREdXJhdGlvbihzcGVsbC5kdXJhdGlvbik7XG4gICAgY29uc3QgZm9ybWF0dGVkU291cmNlcyA9IHNvdXJjZXMubWFwKChzOiBzdHJpbmcpID0+IGdldEZ1bGxTb3VyY2VOYW1lKHMsIGVkaXRpb25JZCkpO1xuXG4gICAgY29uc3QgYXR0YWNrVHlwZSA9IHNwZWxsLmF0dGFja1R5cGUgfHwgXCJcIjtcbiAgICBjb25zdCBkYW1hZ2VUeXBlID0gc3BlbGwuZGFtYWdlSW5mbGljdD8uWzBdIHx8IFwiVGVsZXBvcnRhdGlvblwiO1xuICAgIGNvbnN0IHJpdHVhbCA9IHNwZWxsLnJpdHVhbCA9PT0gdHJ1ZTtcbiAgICBjb25zdCBjb25jZW50cmF0aW9uID0gc3BlbGwuZHVyYXRpb24/LnNvbWUoKGQ6IGFueSkgPT4gZC5jb25jZW50cmF0aW9uKSA/PyBmYWxzZTtcblxuY29uc3QgRk0gICA9IGJ1aWxkRk0oc3BlbGwsIFNQRUxMX01FVEFfREVGUyk7XG5jb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoRk0sIFNQRUxMX01FVEFfREVGUyk7XG5cbiAgICAvLyBcdTIwMTQgdGl0bGUvc3VidGl0bGUgYW5kIGJvZHkgbGF5b3V0IFx1MjAxNFxuICAgIGNvbnN0IHNhZmVOYW1lID0gbmFtZS5yZXBsYWNlKC9cXC8vZywgXCItXCIpO1xuICAgIGNvbnN0IHRpdGxlID0gYCMgJHtuYW1lfWA7XG4gICAgY29uc3QgbGV2ZWxMYWJlbCA9XG4gICAgICBsZXZlbCA9PT0gMFxuICAgICAgICA/IGAke3NjaG9vbH0gQ2FudHJpcGBcbiAgICAgICAgOiBgJHtvcmRpbmFsKGxldmVsKX0tbGV2ZWwgJHtzY2hvb2x9IFNwZWxsYDtcbiAgICBjb25zdCBzdWJ0aXRsZSA9IGAjIyMgKiR7bGV2ZWxMYWJlbH0qJHtjb25jZW50cmF0aW9uID8gXCIgKihDb25jZW50cmF0aW9uKSpcIiA6IFwiXCJ9YDtcblxuICAgIGNvbnN0IGhlYWRlckxpbmVzID0gW1xuICAgICAgdGl0bGUsXG4gICAgICBzdWJ0aXRsZSxcbiAgICAgIGAqKkNhc3RpbmcgVGltZToqKiAke2Nhc3RpbmdUaW1lfWAsXG4gICAgICBgKipSYW5nZToqKiAke3JhbmdlfWAsXG4gICAgICBgKipDb21wb25lbnRzOioqICR7Zm9ybWF0Q29tcG9uZW50cyhzcGVsbC5jb21wb25lbnRzKX1gLFxuICAgICAgYCoqRHVyYXRpb246KiogJHtkdXJhdGlvbn1gLFxuICAgIF07XG5cbiAgICBjb25zdCBib2R5TGluZXMgPSBbXG4gICAgICAuLi4oKHNwZWxsLmVudHJpZXMgPz8gW10pLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkpLFxuICAgICAgLi4uKChzcGVsbC5lbnRyaWVzSGlnaGVyTGV2ZWwgPz8gW10pLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkpLFxuICAgIF07XG5cbiAgICBjb25zdCBmb290ZXJMaW5lcyA9IFtcbiAgICAgIGAtLS1gLFxuICAgICAgYCoqU291cmNlOioqICR7Zm9ybWF0dGVkU291cmNlcy5qb2luKFwiLCBcIil9YCxcbiAgICBdO1xuXG4gICAgLy8gXHUyMDE0IGFzc2VtYmxlIHRoZSBub3RlIHdpdGggWUFNTCBmcm9udG1hdHRlciBcdTIwMTRcbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDogYCR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgYC0tLVxcbiR7eWFtbH1cXG4tLS1gLFxuICAgICAgICBoZWFkZXJMaW5lcy5qb2luKFwiXFxuXCIpLFxuICAgICAgICBgYCxcbiAgICAgICAgYm9keUxpbmVzLmpvaW4oXCJcXG5cXG5cIiksXG4gICAgICAgIGBgLFxuICAgICAgICBmb290ZXJMaW5lcy5qb2luKFwiXFxuXCIpLFxuICAgICAgXS5qb2luKFwiXFxuXCIpLFxuICAgIH07XG4gIH0pO1xufVxuXG4iLCAiaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQge1xuICBidWlsZEZNLFxuICBzZXJpYWxpemVGcm9udG1hdHRlcixcbiAgRk1fRklFTERTLFxuICBTUEVDSUVTX01FVEFfREVGUyxcbiAgU0laRV9NQVAsXG59IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcbmltcG9ydCB7IHJlbmRlck1hcmtkb3duVGFibGUgfSBmcm9tIFwiLi9oZWxwZXJzL21hcmtkb3duVGFibGVcIjtcbmltcG9ydCB7IGZvcm1hdEVudHJ5IH0gZnJvbSBcIi4vaGVscGVycy9mb3JtYXRFbnRyeVwiO1xuXG5mdW5jdGlvbiBzbHVnKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBuYW1lXG4gICAgLnJlcGxhY2UoLzsvZywgXCI6XCIpICAgICAgIC8vIHNlbWljb2xvbiBcdTIxOTIgZGFzaFxuICAgIC5yZXBsYWNlKC9bXFwvOlwiXS9nLCBcIjpcIikgIC8vIHNsYXNoLCBjb2xvbiwgcXVvdGUgXHUyMTkyIGRhc2hcbiAgICAudHJpbSgpO1xufVxuXG5jb25zdCBCTE9DS0VEX1RSQUlUUyA9IFtcIkFnZVwiLCBcIlNpemVcIiwgXCJMYW5ndWFnZXNcIiwgXCJDcmVhdHVyZSBUeXBlXCIsIFwiU3BlZWRcIl07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNwZWNpZXNGaWxlKFxuICBqc29uOiB7IHJhY2U6IGFueVtdOyBzdWJyYWNlPzogYW55W107IF9lZGl0aW9uSWQ/OiBzdHJpbmcgfSxcbiAgZWRpdGlvbklkOiBzdHJpbmdcbik6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24ucmFjZSkpIHJldHVybiBbXTtcbiAganNvbi5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4gIC8vIDEpIEZpbHRlciBvdXQgcmVwcmludHNcbiAgY29uc3QgcmF3VmFyaWFudHMgPSBqc29uLnJhY2UuZmlsdGVyKChyOiBhbnkpID0+XG4gICAgIShcInJlcHJpbnRlZEFzXCIgaW4gcikgJiZcbiAgICAhL1xcKCg/OkthbGFkZXNofFplbmRpa2FyfEFtb25raGV0fElubmlzdHJhZHxJeGFsYW4pXFwpJC8udGVzdChyLm5hbWUpXG4gICk7XG5cbiAgLy8gMikgR3JvdXAgYnkgcmFjZSBuYW1lXG4gIGNvbnN0IGJ5TmFtZSA9IG5ldyBNYXA8c3RyaW5nLCBhbnlbXT4oKTtcbiAgZm9yIChjb25zdCByIG9mIHJhd1ZhcmlhbnRzKSB7XG4gICAgY29uc3QgbGlzdCA9IGJ5TmFtZS5nZXQoci5uYW1lKSA/PyBbXTtcbiAgICBsaXN0LnB1c2gocik7XG4gICAgYnlOYW1lLnNldChyLm5hbWUsIGxpc3QpO1xuICB9XG5cbiAgLy8gMykgQWxsIHN1YnJhY2VzIGFycmF5XG4gIGNvbnN0IHN1YnJhY2VzTGlzdCA9IEFycmF5LmlzQXJyYXkoanNvbi5zdWJyYWNlKSA/IGpzb24uc3VicmFjZSA6IFtdO1xuXG4gIGNvbnN0IG91dDogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICAvLyA0KSBNYWluIGxvb3Agb3ZlciBlYWNoIHNwZWNpZXNcbiAgZm9yIChjb25zdCBbcmFjZU5hbWUsIHJhY2VWYXJpYW50c10gb2YgYnlOYW1lLmVudHJpZXMoKSkge1xuICAgIGNvbnN0IHNhZmVOYW1lID0gc2x1ZyhyYWNlTmFtZSk7XG5cbiAgICAvLyBwaWNrIHRoZSBcdTIwMUNmdWxsZXN0XHUyMDFEIHZhcmlhbnQgYXMgcHJpbWFyeVxuICAgIGNvbnN0IHByaW1hcnkgPSByYWNlVmFyaWFudHMucmVkdWNlKFxuICAgICAgKGJlc3QsIGN1cikgPT5cbiAgICAgICAgT2JqZWN0LmtleXMoY3VyKS5sZW5ndGggPiBPYmplY3Qua2V5cyhiZXN0KS5sZW5ndGggPyBjdXIgOiBiZXN0LFxuICAgICAgcmFjZVZhcmlhbnRzWzBdXG4gICAgKTtcblxuICAgIC8vIG9uZVx1MjAxMG9mZjogZ3JhZnQgSHVtYW4gYWJpbGl0eSBpZiBtaXNzaW5nXG4gICAgaWYgKCFwcmltYXJ5LmFiaWxpdHkpIHtcbiAgICAgIGNvbnN0IGh1bWFuRW50cnkgPSBzdWJyYWNlc0xpc3QuZmluZCgoc3I6IGFueSkgPT5cbiAgICAgICAgc3IucmFjZU5hbWUgPT09IHJhY2VOYW1lICYmXG4gICAgICAgIHNyLnJhY2VTb3VyY2UgPT09IHByaW1hcnkuc291cmNlICYmXG4gICAgICAgICEoXCJuYW1lXCIgaW4gc3IpICYmXG4gICAgICAgIEFycmF5LmlzQXJyYXkoc3IuYWJpbGl0eSlcbiAgICAgICk7XG4gICAgICBpZiAoaHVtYW5FbnRyeSkgcHJpbWFyeS5hYmlsaXR5ID0gaHVtYW5FbnRyeS5hYmlsaXR5O1xuICAgIH1cblxuICAgIC8vIGJ1aWxkIGZyb250bWF0dGVyXG4gICAgY29uc3QgZm0gPSBidWlsZEZNKHByaW1hcnksIFNQRUNJRVNfTUVUQV9ERUZTKTtcbiAgICBjb25zdCBzZW5zZXM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKHByaW1hcnkuZGFya3Zpc2lvbikgIHNlbnNlcy5wdXNoKGBEYXJrdmlzaW9uICR7cHJpbWFyeS5kYXJrdmlzaW9ufSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS5ibGluZHNpZ2h0KSAgc2Vuc2VzLnB1c2goYEJsaW5kc2lnaHQgJHtwcmltYXJ5LmJsaW5kc2lnaHR9IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LnRyZW1vcnNlbnNlKSBzZW5zZXMucHVzaChgVHJlbW9yc2Vuc2UgJHtwcmltYXJ5LnRyZW1vcnNlbnNlfSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS50cnVlc2lnaHQpICAgc2Vuc2VzLnB1c2goYFRydWVzaWdodCAke3ByaW1hcnkudHJ1ZXNpZ2h0fSBmdC5gKTtcbiAgICBpZiAoc2Vuc2VzLmxlbmd0aCkgZm0uc2Vuc2VzID0gc2Vuc2VzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZtLnRyYWl0cykpIHtcbiAgICAgIGZtLnRyYWl0cyA9IGZtLnRyYWl0cy5maWx0ZXIodCA9PiAhQkxPQ0tFRF9UUkFJVFMuaW5jbHVkZXModCkpO1xuICAgIH1cbiAgICBjb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIFNQRUNJRVNfTUVUQV9ERUZTKTtcblxuICAgIC8vIGJ1aWxkIHNwZWNpZXMgYm9keVxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxpbmVzLnB1c2goYCMgJHtyYWNlTmFtZX1gLCBgIyMgU3RhdHNgKTtcblxuICAgIC8vIFNpemVcbiAgICBjb25zdCBzaXplID0gQXJyYXkuaXNBcnJheShwcmltYXJ5LnNpemUpXG4gICAgICA/IHByaW1hcnkuc2l6ZS5tYXAoKHM6IHN0cmluZykgPT4gU0laRV9NQVBbc10gfHwgcykuam9pbihcIi9cIilcbiAgICAgIDogU0laRV9NQVBbcHJpbWFyeS5zaXplXSA/PyBwcmltYXJ5LnNpemU7XG4gICAgbGluZXMucHVzaChgKipTaXplOioqICR7c2l6ZX1gKTtcblxuICAgIC8vIFNwZWVkXG4gICAgY29uc3Qgc3BlZWQgPSB0eXBlb2YgcHJpbWFyeS5zcGVlZCA9PT0gXCJudW1iZXJcIlxuICAgICAgPyBwcmltYXJ5LnNwZWVkXG4gICAgICA6IHByaW1hcnkuc3BlZWQ/LndhbGsgPz8gcHJpbWFyeS5zcGVlZD8uYmFzZSA/PyAwO1xuICAgIGxpbmVzLnB1c2goYCoqU3BlZWQ6KiogJHtzcGVlZH0gZnQuIHdhbGtpbmdgKTtcblxuICAgIC8vIEFiaWxpdGllc1xuICAgIGNvbnN0IGtpZHMgPSBzdWJyYWNlc0xpc3QuZmlsdGVyKHNyID0+XG4gICAgICBzci5uYW1lICYmIHNyLnJhY2VOYW1lID09PSByYWNlTmFtZSAmJiBzci5yYWNlU291cmNlID09PSBwcmltYXJ5LnNvdXJjZVxuICAgICk7XG4gICAgY29uc3QgcmF3QWJpbGl0eSA9IEFycmF5LmlzQXJyYXkocHJpbWFyeS5hYmlsaXR5KVxuICAgICAgPyBwcmltYXJ5LmFiaWxpdHlcbiAgICAgIDogQXJyYXkuaXNBcnJheShraWRzWzBdPy5hYmlsaXR5KSA/IGtpZHNbMF0uYWJpbGl0eSA6IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHJhd0FiaWxpdHkpICYmIHJhd0FiaWxpdHkubGVuZ3RoKSB7XG4gICAgICBjb25zdCBib251c2VzID0geyBzdHI6MCxkZXg6MCxjb246MCxpbnQ6MCx3aXM6MCxjaGE6MCB9O1xuICAgICAgbGV0IGNob29zZU9wdDogYW55ID0gbnVsbDtcbiAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHJhd0FiaWxpdHkpIHtcbiAgICAgICAgaWYgKFwiY2hvb3NlXCIgaW4gb2JqKSBjaG9vc2VPcHQgPSBvYmouY2hvb3NlO1xuICAgICAgICBlbHNlIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkgKGJvbnVzZXMgYXMgYW55KVtrXSArPSB2IGFzIG51bWJlcjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhaXJzID0gT2JqZWN0LmVudHJpZXMoYm9udXNlcykgYXMgW3N0cmluZyxudW1iZXJdW107XG4gICAgICBjb25zdCBwYXJ0cyA9IHBhaXJzLmZpbHRlcigoWyx2XSk9PnYhPT0wKS5tYXAoKFtrLHZdKT0+YCR7ay50b1VwcGVyQ2FzZSgpfSAke3Y+PTA/XCIrXCI6XCJcIn0ke3Z9YCk7XG4gICAgICBpZiAoY2hvb3NlT3B0Py5jb3VudCAmJiBBcnJheS5pc0FycmF5KGNob29zZU9wdC5mcm9tKSkge1xuICAgICAgICBwYXJ0cy5wdXNoKGBDSE9PU0UgJHtjaG9vc2VPcHQuY291bnR9IGZyb20gJHtjaG9vc2VPcHQuZnJvbS5tYXAoKHM6c3RyaW5nKT0+cy50b1VwcGVyQ2FzZSgpKS5qb2luKFwiLCBcIil9YCk7XG4gICAgICB9XG4gICAgICBpZiAocGFydHMubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKkFiaWxpdHkgU2NvcmVzOioqICR7cGFydHMuam9pbihcIiwgXCIpfWApO1xuICAgIH1cblxuICAgIC8vIExhbmd1YWdlc1xuICAgIGNvbnN0IGxhbmdzID0gZm0ubGFuZ3VhZ2VzIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBpZiAobGFuZ3M/Lmxlbmd0aCkgbGluZXMucHVzaChgKipMYW5ndWFnZXM6KiogJHtsYW5ncy5qb2luKFwiLCBcIil9YCk7XG5cbiAgICAvLyBTa2lsbHNcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwcmltYXJ5LnNraWxsUHJvZmljaWVuY2llcykpIHtcbiAgICAgIGNvbnN0IHNraWxsTGFiZWxzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZm9yIChjb25zdCBlIG9mIHByaW1hcnkuc2tpbGxQcm9maWNpZW5jaWVzIGFzIGFueVtdKSB7XG4gICAgICAgIGlmIChlLmNob29zZT8uZnJvbSkge1xuICAgICAgICAgIHNraWxsTGFiZWxzLnB1c2goYENob29zZSBmcm9tOiAke2UuY2hvb3NlLmZyb20ubWFwKChzOnN0cmluZyk9PnMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrcy5zbGljZSgxKSkuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHZhbCA9IGUucHJvZmljaWVuY3kgPz8gZS5uYW1lID8/IGU7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIpIHNraWxsTGFiZWxzLnB1c2godmFsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3ZhbC5zbGljZSgxKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChza2lsbExhYmVscy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqU2tpbGwgUHJvZmljaWVuY2llczoqKiAke3NraWxsTGFiZWxzLmpvaW4oXCI7IFwiKX1gKTtcbiAgICB9XG5cbiAgICAvLyBUb29sIC8gV2VhcG9uIC8gQXJtb3JcbiAgICBjb25zdCB0cCA9IGZtW0ZNX0ZJRUxEUy5UT09MX1BST0ZJQ0lFTkNJRVNdIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBjb25zdCB3cCA9IGZtW0ZNX0ZJRUxEUy5XRUFQT05fUFJPRklDSUVOQ0lFU10gYXMgc3RyaW5nW118dW5kZWZpbmVkO1xuICAgIGNvbnN0IGFwID0gZm1bRk1fRklFTERTLkFSTU9SX1BST0ZJQ0lFTkNJRVNdIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBpZiAodHA/Lmxlbmd0aCkgbGluZXMucHVzaChgKipUb29sIFByb2ZpY2llbmNpZXM6KiogJHt0cC5qb2luKFwiLCBcIil9YCk7XG4gICAgaWYgKHdwPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqV2VhcG9uIFByb2ZpY2llbmNpZXM6KiogJHt3cC5qb2luKFwiLCBcIil9YCk7XG4gICAgaWYgKGFwPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqQXJtb3IgUHJvZmljaWVuY2llczoqKiAke2FwLmpvaW4oXCIsIFwiKX1gKTtcblxuICAgIC8vIFRyYWl0c1xuICAgIGxpbmVzLnB1c2goYCMjIFRyYWl0c2ApO1xuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBmb3IgKGNvbnN0IHRyYWl0IG9mIGZtLnRyYWl0cyBhcyBzdHJpbmdbXXx8W10pIHtcbiAgICAgIGxpbmVzLnB1c2goYCMjIyMjICR7dHJhaXR9YCk7XG4gICAgICBjb25zdCBlbnQgPSBwcmltYXJ5LmVudHJpZXM/LmZpbmQoKGU6YW55KT0+ZS5uYW1lPT09dHJhaXQpO1xuICAgICAgaWYgKGVudD8uZW50cmllcykge1xuICAgICAgICBlbnQuZW50cmllcy5mb3JFYWNoKChzdWI6YW55LGlkeDpudW1iZXIpPT57XG4gICAgICAgICAgbGV0IGJsazpzdHJpbmd8dW5kZWZpbmVkO1xuICAgICAgICAgIGlmIChzdWIudHlwZT09PVwidGFibGVcIikgICAgICAgYmxrID0gcmVuZGVyTWFya2Rvd25UYWJsZShzdWIpO1xuICAgICAgICAgIGVsc2UgaWYgKHN1Yi50eXBlPT09XCJsaXN0XCIpICAgYmxrID0gc3ViLml0ZW1zLm1hcCgoaXQ6YW55KT0+dHlwZW9mIGl0PT09XCJzdHJpbmdcIj9gLSAke3JlcGxhY2U1ZVRhZ3MoaXQpfWA6YC0gJHtpdC5uYW1lfWAgKS5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzdWI9PT1cInN0cmluZ1wiKSBibGsgPSByZXBsYWNlNWVUYWdzKHN1Yik7XG4gICAgICAgICAgaWYgKGJsayAmJiAhc2Vlbi5oYXMoYmxrKSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChibGspO1xuICAgICAgICAgICAgc2Vlbi5hZGQoYmxrKTtcbiAgICAgICAgICAgIGlmIChlbnQuZW50cmllcy5sZW5ndGg+MSAmJiBpZHg8ZW50LmVudHJpZXMubGVuZ3RoLTEpIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgTm93IGJyYW5jaCBvbiBzdWJyYWNlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBzdWJzID0ga2lkczsgIC8vIGFscmVhZHkgZmlsdGVyZWRcbiAgICBpZiAoc3Vicy5sZW5ndGgpIHtcbiAgICAgIC8vIDEpIG1haW4gZmlsZSBpbiBmb2xkZXJcbiAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgcGF0aDogYFNwZWNpZXMvJHtzYWZlTmFtZX0vJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgICBjb250ZW50OiBgLS0tXFxuJHt5YW1sfVxcbi0tLVxcblxcbiR7bGluZXMuam9pbihcIlxcblwiKX1gLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIDIpIGVhY2ggc3Vic3BlY2llc1xuICAgICAgY29uc3Qgc3ViRm9sZGVyID0gYFNwZWNpZXMvJHtzYWZlTmFtZX0vU3Vic3BlY2llc2A7XG4gICAgICBmb3IgKGNvbnN0IHNyIG9mIHN1YnMpIHtcbiAgICAgICAgLy8gdHVybiBzZW1pY29sb25zIFx1MjE5MiBjb2xvbnNcbiAgICAgICAgY29uc3QgZGlzcGxheSA9IHNyLm5hbWUucmVwbGFjZSgvOy9nLCBcIjpcIik7XG4gICAgICAgIGNvbnN0IHN1YkxpbmVzOiBzdHJpbmdbXSA9IFtgIyAke2Rpc3BsYXl9YF07XG5cbiAgICAgICAgLy8gY29weSBTdGF0cyBibG9jayBpZiB5b3UgbGlrZTpcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3IuYWJpbGl0eSkpIHtcbiAgICAgICAgICBjb25zdCBib251c2VzID0geyBzdHI6MCxkZXg6MCxjb246MCxpbnQ6MCx3aXM6MCxjaGE6MCB9O1xuICAgICAgICAgIGxldCBjaG9vc2VPcHQ6YW55ID0gbnVsbDtcbiAgICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiBzci5hYmlsaXR5KSB7XG4gICAgICAgICAgICBpZiAoXCJjaG9vc2VcIiBpbiBvYmopIGNob29zZU9wdCA9IG9iai5jaG9vc2U7XG4gICAgICAgICAgICBlbHNlIGZvciAoY29uc3QgW2ssdl0gb2YgT2JqZWN0LmVudHJpZXMob2JqKSkgKGJvbnVzZXMgYXMgYW55KVtrXSs9diBhcyBudW1iZXI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhaXJzID0gT2JqZWN0LmVudHJpZXMoYm9udXNlcykgYXMgW3N0cmluZyxudW1iZXJdW107XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBwYWlycy5maWx0ZXIoKFssdl0pPT52IT09MCkubWFwKChbayx2XSk9PmAke2sudG9VcHBlckNhc2UoKX0gJHt2Pj0wP1wiK1wiOlwiXCJ9JHt2fWApO1xuICAgICAgICAgIGlmIChjaG9vc2VPcHQ/LmNvdW50KSBwYXJ0cy5wdXNoKGBDSE9PU0UgJHtjaG9vc2VPcHQuY291bnR9IGZyb20gJHsoY2hvb3NlT3B0LmZyb20gYXMgc3RyaW5nW10pLm1hcChzPT5zLnRvVXBwZXJDYXNlKCkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgICBpZiAocGFydHMubGVuZ3RoKSBzdWJMaW5lcy5wdXNoKGAqKkFiaWxpdHkgU2NvcmVzOioqICR7cGFydHMuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhlbiB0cmFpdHMvZW50cmllc1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHNyLmVudHJpZXMgfHwgW10pIHtcbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGVudHJ5KSk7XG4gICAgICAgICAgc3ViTGluZXMucHVzaChcIlwiKTsgLy8gb3B0aW9uYWwgYmxhbmsgbGluZSBiZXR3ZWVuIGZlYXR1cmVzXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzdWJZYW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoYnVpbGRGTShzciwgU1BFQ0lFU19NRVRBX0RFRlMpLCBTUEVDSUVTX01FVEFfREVGUyk7XG4gICAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgICBwYXRoOiBgJHtzdWJGb2xkZXJ9LyR7c2x1Zyhzci5uYW1lKX0ubWRgLFxuICAgICAgICAgIGNvbnRlbnQ6IGAtLS1cXG4ke3N1YllhbWx9XFxuLS0tXFxuXFxuJHtzdWJMaW5lcy5qb2luKFwiXFxuXCIpfWAsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBubyBzdWJyYWNlcyBcdTIxRDIgYSBzaW5nbGUgZmxhdCBmaWxlXG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHBhdGg6IGBTcGVjaWVzLyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudDogYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIDUpIFNvcnQgJiByZXR1cm5cbiAgcmV0dXJuIG91dC5zb3J0KChhLCBiKSA9PiBhLnBhdGgubG9jYWxlQ29tcGFyZShiLnBhdGgpKTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgXG4gIGJ1aWxkRk0sIFxuICBzZXJpYWxpemVGcm9udG1hdHRlciwgXG4gIENMQVNTX01FVEFfREVGUywgXG4gIHVuaWZpZWRUb29sUHJvZnMsIFxuICB1bmlmaWVkV2VhcG9uUHJvZnMsIFxuICBTa2lsbE9wdGlvbixcbiAgdW5pZmllZFNraWxscyxcbiAgU0tJTExfT1BUSU9OUywgXG4gIEZNX0ZJRUxEU1xufSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5cbmZ1bmN0aW9uIGZvcm1hdEZlYXR1cmVMaW5rKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgaWdub3JlID0gW1wiQWJpbGl0eSBTY29yZSBJbXByb3ZlbWVudFwiLCBcIkFyY2hldHlwZSBGZWF0dXJlXCIsIFwiU3ViY2xhc3MgRmVhdHVyZVwiXTtcbiAgICBpZiAoaWdub3JlLnNvbWUoc3ViID0+IG5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdWIudG9Mb3dlckNhc2UoKSkpKSB7XG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG4gIFxuICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgXCJcIikgICAgICAgICAgIC8vIHJlbW92ZSBwdW5jdHVhdGlvbiAoa2VlcCBzcGFjZXMpXG4gICAgICAucmVwbGFjZSgvLS9nLCBcIiBcIikgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGRhc2hlc1xuICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpICAgICAgICAgICAgICAvLyBub3JtYWxpemUgd2hpdGVzcGFjZVxuICAgICAgLnRyaW0oKVxuICAgICAgLnJlcGxhY2UoL1xcYlxcdy9nLCBsID0+IGwudG9VcHBlckNhc2UoKSk7IC8vIGNhcGl0YWxpemUgd29yZHNcbiAgXG4gICAgcmV0dXJuIGBbWyMke2FuY2hvcn1dXWA7XG4gIH1cbiAgXG5leHBvcnQgY29uc3QgT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIEFJOiAgIFwiQXJ0aWZpY2VyIEluZnVzaW9uXCIsXG4gIEVEOiAgIFwiRWxlbWVudGFsIERpc2NpcGxpbmVcIixcbiAgRUk6ICAgXCJFbGRyaXRjaCBJbnZvY2F0aW9uXCIsXG4gIE1NOiAgIFwiTWV0YW1hZ2ljXCIsXG4gIE1WOiAgIFwiTWFuZXV2ZXJcIixcbiAgXCJNVjpCXCI6ICAgIFwiTWFuZXV2ZXIsIEJhdHRsZSBNYXN0ZXJcIixcbiAgXCJNVjpDMi1VQVwiOlwiTWFuZXV2ZXIsIENhdmFsaWVyIFYyIChVQSlcIixcbiAgXCJBUzpWMS1VQVwiOlwiQXJjYW5lIFNob3QsIFYxIChVQSlcIixcbiAgXCJBUzpWMi1VQVwiOlwiQXJjYW5lIFNob3QsIFYyIChVQSlcIixcbiAgQVM6ICAgXCJBcmNhbmUgU2hvdFwiLFxuICBPVEg6ICBcIk90aGVyXCIsXG4gIFwiRlM6RlwiOlwiRmlnaHRpbmcgU3R5bGU7IEZpZ2h0ZXJcIixcbiAgXCJGUzpCXCI6XCJGaWdodGluZyBTdHlsZTsgQmFyZFwiLFxuICBcIkZTOlBcIjpcIkZpZ2h0aW5nIFN0eWxlOyBQYWxhZGluXCIsXG4gIFwiRlM6UlwiOlwiRmlnaHRpbmcgU3R5bGU7IFJhbmdlclwiLFxuICBQQjogICBcIlBhY3QgQm9vblwiLFxuICBPUjogICBcIk9ub21hbmN5IFJlc29uYW50XCIsXG4gIFJOOiAgIFwiUnVuZSBLbmlnaHQgUnVuZVwiLFxuICBBRjogICBcIkFsY2hlbWljYWwgRm9ybXVsYVwiLFxuICBUVDogICBcIlRyYXZlbGVyJ3MgVHJpY2tcIixcbn07XG4gIFxuICBmdW5jdGlvbiByZW5kZXJFbnRyaWVzKGVudHJpZXM6IGFueVtdKTogc3RyaW5nIHtcbiAgICByZXR1cm4gZW50cmllcy5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGVudHJ5KTtcbiAgICAgIH1cbiAgXG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGlmIChlbnRyeS50eXBlID09PSBcInJlZkNsYXNzRmVhdHVyZVwiKSB7XG4gICAgICAgICAgY29uc3QgW25hbWVdID0gZW50cnkuY2xhc3NGZWF0dXJlLnNwbGl0KFwifFwiKTtcbiAgICAgICAgICByZXR1cm4gYCpTZWUgZmVhdHVyZTogKioke25hbWV9KioqYDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIGVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyB8fCBbXSk7XG4gICAgICAgICAgcmV0dXJuIGAqKiR7ZW50cnkubmFtZX0qKlxcblxcbiR7aW5uZXJ9YDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwiaW5zZXRcIiAmJiBlbnRyeS5uYW1lKSB7XG4gICAgICAgICAgY29uc3QgaW5uZXIgPSByZW5kZXJFbnRyaWVzKGVudHJ5LmVudHJpZXMgfHwgW10pO1xuICAgICAgICAgIHJldHVybiBgPiAqKiR7ZW50cnkubmFtZX0qKlxcbj5cXG4+ICR7aW5uZXIuc3BsaXQoXCJcXG5cIikuam9pbihcIlxcbj4gXCIpfWA7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIC8vIGZhbGxiYWNrXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgICAgcmV0dXJuIHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9KS5maWx0ZXIoQm9vbGVhbikuam9pbihcIlxcblwiKTtcbiAgfVxuICBcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNsYXNzRmlsZShcbiAganNvbjogYW55LFxuICBlZGl0aW9uSWQ6IHN0cmluZyxcbiAgZmlsZU5hbWU6IHN0cmluZyxcbiAgb3B0aW9uYWxGZWF0dXJlczogYW55W11cbik6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciBmcm9udG1hdHRlclxuICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgLy8gdW53cmFwIHRoZSByZWFsIGNsYXNzIHJlY29yZFxuICBjb25zdCBjbHMgPSBBcnJheS5pc0FycmF5KGpzb24uY2xhc3MpID8ganNvbi5jbGFzc1swXSA6IGpzb247XG4gIC8vIGRlcml2ZSB0aGUgTWFya2Rvd24gZmlsZW5hbWVcbiAgY29uc3QgY2xhc3NOYW1lID1cbiAgICB0eXBlb2YgY2xzLm5hbWUgPT09IFwic3RyaW5nXCJcbiAgICAgID8gY2xzLm5hbWVcbiAgICAgIDogZmlsZU5hbWVcbiAgICAgID8gZmlsZU5hbWUucmVwbGFjZSgvXmNsYXNzLS8sIFwiXCIpLnJlcGxhY2UoL1xcLmpzb24kLywgXCJcIilcbiAgICAgIDogXCJVbmtub3duXCI7XG5cbiAgY29uc3Qgc3ViY2xhc3NGaWxlczogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBjb25zdCBQUk9GX0JPTlVTX0JZX0xFVkVMID0gW1xuICAgIFwiKzJcIiwgXCIrMlwiLCBcIisyXCIsIFwiKzJcIixcbiAgICBcIiszXCIsIFwiKzNcIiwgXCIrM1wiLCBcIiszXCIsXG4gICAgXCIrNFwiLCBcIis0XCIsIFwiKzRcIiwgXCIrNFwiLFxuICAgIFwiKzVcIiwgXCIrNVwiLCBcIis1XCIsIFwiKzVcIixcbiAgICBcIis2XCIsIFwiKzZcIiwgXCIrNlwiLCBcIis2XCJcbiAgXTtcbiAgXG4gIC8vIG5vcm1hbGl6ZSBoaXRcdTIwMTBkaWNlXG4gIGNvbnN0IGhkTnVtICAgPSBjbHMuaGQ/Lm51bWJlciA/PyAxO1xuICBjb25zdCBoZEZhY2VzID0gY2xzLmhkPy5mYWNlcyAgPz8gNjtcbiAgY29uc3QgaGRTdHIgICA9IGAke2hkTnVtfWQke2hkRmFjZXN9YDtcbiAgY29uc3QgaGRNYXggICA9IGhkTnVtICogaGRGYWNlcztcbiAgY29uc3QgaGRBdmcgICA9IE1hdGguY2VpbCgoaGRGYWNlcyArIDEpIC8gMik7XG5cbmNvbnN0IGJhc2VGTSA9IGJ1aWxkRk0oY2xzLCBDTEFTU19NRVRBX0RFRlMpO1xuY29uc3QgZm0gICAgID0geyAuLi5iYXNlRk0sIGhkOiBoZFN0ciB9O1xuY29uc3QgeWFtbCAgID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIENMQVNTX01FVEFfREVGUyk7XG5cbi8vIDEpIERlY2xhcmUgeW91ciBsaW5lcyBidWZmZXIgaW1tZWRpYXRlbHlcbmNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4vLyA0KSBOb3cgY2Fycnkgb24gd2l0aCB0aGUgcmVzdCBvZiB5b3VyIGJvZHlcbmxpbmVzLnB1c2goYCMgJHtjbGFzc05hbWV9YCk7XG5pZiAoY2xzLnNvdXJjZSkgbGluZXMucHVzaChgKipTb3VyY2U6KiogJHtjbHMuc291cmNlfWApO1xubGluZXMucHVzaChgYCk7XG5saW5lcy5wdXNoKGAtLS1gKTtcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSGl0IFBvaW50cyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgbGluZXMucHVzaChgIyMgSGl0IFBvaW50c2ApO1xuICBsaW5lcy5wdXNoKGAqKkhpdCBEaWNlOioqICR7aGRTdHJ9IHBlciAke2NsYXNzTmFtZX0gbGV2ZWxgKTtcbiAgbGluZXMucHVzaChgKipIaXQgUG9pbnRzIGF0IDFzdCBMZXZlbDoqKiAke2hkTWF4fSArIHlvdXIgQ29uc3RpdHV0aW9uIG1vZGlmaWVyYCk7XG4gIGxpbmVzLnB1c2goXG4gICAgYCoqSGl0IFBvaW50cyBhdCBIaWdoZXIgTGV2ZWxzOioqICR7aGRTdHJ9IChvciAke2hkQXZnfSkgKyB5b3VyIENvbnN0aXR1dGlvbiBtb2RpZmllciBwZXIgbGV2ZWwgYWZ0ZXIgMXN0YFxuICApO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5saW5lcy5wdXNoKGAjIyBQcm9maWNpZW5jaWVzYCk7XG5cbmNvbnN0IHNwID0gY2xzLnN0YXJ0aW5nUHJvZmljaWVuY2llcyA/PyB7fTtcblxuLy8gQXJtb3JcbmlmIChBcnJheS5pc0FycmF5KHNwLmFybW9yKSAmJiBzcC5hcm1vci5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKkFybW9yOioqICR7c3AuYXJtb3Iuam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBXZWFwb25zXG5jb25zdCB3ZWFwb25MaXN0ID0gdW5pZmllZFdlYXBvblByb2ZzKHNwKTtcbmlmICh3ZWFwb25MaXN0Lmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqV2VhcG9uczoqKiAke3dlYXBvbkxpc3Quam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBUb29sc1xuY29uc3QgdG9vbExpc3QgPSB1bmlmaWVkVG9vbFByb2ZzKHNwKTtcbmlmICh0b29sTGlzdC5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKlRvb2xzOioqICR7dG9vbExpc3Quam9pbihcIiwgXCIpfWApO1xufVxuXG4vLyBTYXZpbmcgVGhyb3dzXG5jb25zdCBzYXZlcyA9IEFycmF5LmlzQXJyYXkoY2xzLnByb2ZpY2llbmN5KVxuICA/IGNscy5wcm9maWNpZW5jeS5tYXAoKGs6IHN0cmluZykgPT5cbiAgICAgICh7IHN0cjpcIlN0cmVuZ3RoXCIsIGRleDpcIkRleHRlcml0eVwiLCBjb246XCJDb25zdGl0dXRpb25cIixcbiAgICAgICAgIGludDpcIkludGVsbGlnZW5jZVwiLCB3aXM6XCJXaXNkb21cIiwgY2hhOlwiQ2hhcmlzbWFcIiB9W2tdIHx8IGsudG9VcHBlckNhc2UoKSlcbiAgICApXG4gIDogW107XG5pZiAoc2F2ZXMubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYC0gKipTYXZpbmcgVGhyb3dzOioqICR7c2F2ZXMuam9pbihcIiwgXCIpfWApO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTa2lsbHMgXHUyNTAwXHUyNTAwXHUyNTAwXG57XG4gIC8vIDEpIGdyYWIgd2hhdGV2ZXIgYXJyYXkgaG9sZHMgdGhlIHJhdyBvYmplY3RzL3N0cmluZ3NcbiAgY29uc3QgcmF3U2tpbGxzOiBhbnlbXSA9XG4gICAgQXJyYXkuaXNBcnJheShzcC5za2lsbFByb2ZpY2llbmNpZXMpID8gc3Auc2tpbGxQcm9maWNpZW5jaWVzXG4gICAgOiBBcnJheS5pc0FycmF5KHNwLnNraWxscykgICAgICAgICAgICAgPyBzcC5za2lsbHNcbiAgICA6IEFycmF5LmlzQXJyYXkoc3Auc2tpbGxQcm9mKSAgICAgICAgICA/IHNwLnNraWxsUHJvZlxuICAgIDogW107XG5cbiAgLy8gMikgbG9vayBmb3IgdGhlIFx1MjAxQ2Nob29zZSBOIGZyb20gW1x1MjAyNl1cdTIwMUQgZW50cnlcbiAgY29uc3QgY2hvaWNlRW50cnkgPSByYXdTa2lsbHMuZmluZChcbiAgICBlID0+IGUgJiZcbiAgICAgICAgICh0eXBlb2YgZS5jaG9vc2UgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGUuYW55ID09PSBcIm51bWJlclwiKVxuICApO1xuXG4gIGlmIChjaG9pY2VFbnRyeSkge1xuICAgIC8vIGhvdyBtYW55IHRvIGNob29zZVxuICAgIGNvbnN0IGNvdW50ID0gY2hvaWNlRW50cnkuY2hvb3NlPy5jb3VudCA/PyBjaG9pY2VFbnRyeS5hbnkgPz8gMTtcblxuICAgIC8vIHB1bGwgdGhlIGFjdHVhbCBsaXN0IG9mIG9wdGlvbnMsIG9yIGZhbGwgYmFjayB0byB0aGUgZ2xvYmFsIFNLSUxMX09QVElPTlNcbiAgICBjb25zdCBvcHRpb25zOiBzdHJpbmdbXSA9IEFycmF5LmlzQXJyYXkoY2hvaWNlRW50cnkuY2hvb3NlPy5mcm9tKVxuICAgICAgPyBjaG9pY2VFbnRyeS5jaG9vc2UuZnJvbS5tYXAoKHM6IHN0cmluZykgPT5cbiAgICAgICAgICAvLyB0aXRsZS1jYXNlIGVhY2ggd29yZCAob3IganVzdCB1c2UgcylcbiAgICAgICAgICBzLnNwbGl0KFwiIFwiKS5tYXAodyA9PiB3WzBdLnRvVXBwZXJDYXNlKCkgKyB3LnNsaWNlKDEpKS5qb2luKFwiIFwiKVxuICAgICAgICApXG4gICAgICA6IFNLSUxMX09QVElPTlM7XG5cbiAgICBsaW5lcy5wdXNoKGAtICoqU2tpbGxzIChDaG9vc2UgJHtjb3VudH0pOioqICR7b3B0aW9ucy5qb2luKFwiLCBcIil9YCk7XG5cbiAgfSBlbHNlIHtcbiAgICAvLyBubyBjaG9vc2UtZnJvbSBvYmplY3QgXHUyMTkyIGZsYXQgbGlzdCBmcm9tIHlvdXIgdW5pZmllZCBoZWxwZXJcbiAgICBjb25zdCBmbGF0ID0gdW5pZmllZFNraWxscyhzcCk7XG4gICAgaWYgKGZsYXQubGVuZ3RoKSB7XG4gICAgICBsaW5lcy5wdXNoKGAtICoqU2tpbGxzOioqICR7ZmxhdC5qb2luKFwiLCBcIil9YCk7XG4gICAgfVxuICB9XG59XG5cblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBFcXVpcG1lbnQgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGlmIChBcnJheS5pc0FycmF5KGNscy5zdGFydGluZ0VxdWlwbWVudCkpIHtcbiAgICBsaW5lcy5wdXNoKGBcXG4jIyMgRXF1aXBtZW50YCk7XG4gICAgY2xzLnN0YXJ0aW5nRXF1aXBtZW50XG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IHR5cGVvZiBlID09PSBcInN0cmluZ1wiKVxuICAgICAgLmZvckVhY2goKGl0ZW06IHN0cmluZykgPT4gbGluZXMucHVzaChgLSAke2l0ZW19YCkpO1xuICB9XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDbGFzcyBQcm9ncmVzc2lvbiBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHByb2dHcm91cHMgPSBjbHMuY2xhc3NUYWJsZUdyb3VwcyA/PyBbXTtcbmNvbnN0IG1heExldmVsID0gMjA7XG5cbmlmICghcHJvZ0dyb3Vwcy5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgKihObyBjbGFzcyB0YWJsZSBwcm92aWRlZCBmb3IgdGhpcyBjbGFzcy4pKmApO1xufSBlbHNlIHtcbiAgLy8gMSkgQnVpbGQgbGV2ZWwgXHUyMTkyIGZlYXR1cmUgbWFwXG4gIGNvbnN0IGZlYXR1cmVzQnlMZXZlbDogUmVjb3JkPG51bWJlciwgc3RyaW5nW10+ID0ge307XG4gIGZvciAoY29uc3QgZmVhdCBvZiBjbHMuY2xhc3NGZWF0dXJlcyA/PyBbXSkge1xuICAgIGNvbnN0IHJhdyA9IHR5cGVvZiBmZWF0ID09PSBcIm9iamVjdFwiICYmIGZlYXQuY2xhc3NGZWF0dXJlID8gZmVhdC5jbGFzc0ZlYXR1cmUgOiBTdHJpbmcoZmVhdCk7XG4gICAgY29uc3QgW25hbWUsLCAsbHZsU3RyXSA9IHJhdy5zcGxpdChcInxcIik7XG4gICAgY29uc3QgbHZsID0gTnVtYmVyKGx2bFN0ciA/PyAwKTtcbiAgICBpZiAoIWZlYXR1cmVzQnlMZXZlbFtsdmxdKSBmZWF0dXJlc0J5TGV2ZWxbbHZsXSA9IFtdO1xuICAgIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2gobmFtZSk7XG4gIH1cblxuICAvLyAyKSBHYXRoZXIgZXZlcnkgY29sdW1uIGxhYmVsICYgcm93IHZhbHVlXG4gIGNvbnN0IGFsbExhYmVsc1NldCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBjb25zdCByb3dNYXBzOiBSZWNvcmQ8bnVtYmVyLCBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+PiA9IHt9O1xuXG4gIGZvciAoY29uc3QgZ3JvdXAgb2YgcHJvZ0dyb3Vwcykge1xuICAgIGNvbnN0IGxhYmVscyA9IEFycmF5LmlzQXJyYXkoZ3JvdXAuY29sTGFiZWxzKVxuICAgICAgPyBncm91cC5jb2xMYWJlbHMubWFwKChsOiBzdHJpbmcpID0+IHJlcGxhY2U1ZVRhZ3MobCkpXG4gICAgICA6IFtdO1xuICAgIGNvbnN0IHJvd3MgPSBBcnJheS5pc0FycmF5KGdyb3VwLnJvd3MpXG4gICAgICA/IGdyb3VwLnJvd3NcbiAgICAgIDogQXJyYXkuaXNBcnJheShncm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvbilcbiAgICAgICAgPyBncm91cC5yb3dzU3BlbGxQcm9ncmVzc2lvblxuICAgICAgICA6IFtdO1xuXG4gICAgaWYgKCFsYWJlbHMubGVuZ3RoIHx8ICFyb3dzLmxlbmd0aCkgY29udGludWU7XG5cbiAgICBmb3IgKGxldCBsdmwgPSAwOyBsdmwgPCByb3dzLmxlbmd0aDsgbHZsKyspIHtcbiAgICAgIGNvbnN0IGxldmVsTnVtID0gbHZsICsgMTtcbiAgICAgIGlmICghcm93TWFwc1tsZXZlbE51bV0pIHJvd01hcHNbbGV2ZWxOdW1dID0ge307XG4gICAgICBjb25zdCByb3dNYXAgPSByb3dNYXBzW2xldmVsTnVtXTtcbiAgICAgIGNvbnN0IGNlbGxzID0gcm93c1tsdmxdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhYmVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBsYWJlbCA9IGxhYmVsc1tpXTtcbiAgICAgICAgbGV0IHZhbCA9IFwiXCI7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tpXTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjZWxsKSkge1xuICAgICAgICAgIHZhbCA9IGNlbGwuam9pbihcIiwgXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGNlbGwgJiYgdHlwZW9mIGNlbGwgPT09IFwib2JqZWN0XCIgJiYgXCJ2YWx1ZVwiIGluIGNlbGwpIHtcbiAgICAgICAgICB2YWwgPSBTdHJpbmcoY2VsbC52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsID0gU3RyaW5nKGNlbGwgPz8gXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBhbGxMYWJlbHNTZXQuYWRkKGxhYmVsKTtcbiAgICAgICAgcm93TWFwW2xhYmVsXSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAzKSAqKkZpbHRlciBvdXQqKiBhbnkgc3BlbGxcdTIwMTB0YWJsZSBjb2x1bW5zXG4gIGNvbnN0IGFsbExhYmVscyA9IEFycmF5LmZyb20oYWxsTGFiZWxzU2V0KS5maWx0ZXIobGJsID0+XG4gICAgIS9DYW50cmlwcyBLbm93bnxTcGVsbHMgS25vd258XFxkKyhzdHxuZHxyZHx0aCkvLnRlc3QobGJsKVxuICApO1xuXG4gIC8vIDQpIEJ1aWxkIGZpbmFsIGhlYWRlciAmIHJvd3NcbiAgY29uc3QgbWVyZ2VkTGFiZWxzID0gW1wiTGV2ZWxcIiwgXCJQcm9maWNpZW5jeSBCb251c1wiLCBcIkNsYXNzIEZlYXR1cmVzXCIsIC4uLmFsbExhYmVsc107XG4gIGNvbnN0IG1lcmdlZFJvd3M6IHN0cmluZ1tdW10gPSBbXTtcblxuICBmb3IgKGxldCBsdmwgPSAxOyBsdmwgPD0gbWF4TGV2ZWw7IGx2bCsrKSB7XG4gICAgY29uc3QgZmVhdHVyZUxpc3QgPSAoZmVhdHVyZXNCeUxldmVsW2x2bF0gPz8gW10pLm1hcChmb3JtYXRGZWF0dXJlTGluayk7XG4gICAgY29uc3Qgcm93TWFwID0gcm93TWFwc1tsdmxdID8/IHt9O1xuXG4gICAgbWVyZ2VkUm93cy5wdXNoKFtcbiAgICAgIGx2bC50b1N0cmluZygpLFxuICAgICAgUFJPRl9CT05VU19CWV9MRVZFTFtsdmwgLSAxXSB8fCBcIlwiLFxuICAgICAgZmVhdHVyZUxpc3Quam9pbihcIiwgXCIpLnJlcGxhY2UoL1xcfC9nLCBcIiYjMTI0O1wiKSxcbiAgICAgIC4uLmFsbExhYmVscy5tYXAobGFiZWwgPT4gcm93TWFwW2xhYmVsXSA/PyBcIlwiKVxuICAgIF0pO1xuICB9XG5cbiAgLy8gNSkgUmVuZGVyIHRoZSBmZWF0dXJlc1x1MjAxMG9ubHkgdGFibGVcbmxpbmVzLnB1c2goYFxcbj4gWyFleGFtcGxlXS0gQ2xhc3MgUHJvZ3Jlc3Npb24gVGFibGVgKTtcbmxpbmVzLnB1c2goXG4gIHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgIHR5cGU6ICAgICAgXCJ0YWJsZVwiLFxuICAgIGNhcHRpb246ICAgXCJcIixcbiAgICBjb2xMYWJlbHM6IG1lcmdlZExhYmVscyxcbiAgICByb3dzOiAgICAgIG1lcmdlZFJvd3MsXG4gIH0pKTtcbn1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNwZWxsIFByb2dyZXNzaW9uIFx1MjUwMFx1MjUwMFx1MjUwMFxuLy8gMSkgZmluZCB0aGUgdHdvIGdyb3Vwc1xuY29uc3QgY3NHcm91cCA9IHByb2dHcm91cHMuZmluZCgoZzogYW55KSA9PlxuICBBcnJheS5pc0FycmF5KGcuY29sTGFiZWxzKSAmJlxuICBnLmNvbExhYmVscy5zb21lKChsYmw6IGFueSkgPT4gL0NhbnRyaXBzIEtub3dufFNwZWxscyBLbm93bi8udGVzdChTdHJpbmcobGJsKSkpXG4pO1xuY29uc3Qgc2xvdEdyb3VwID0gcHJvZ0dyb3Vwcy5maW5kKChnOiBhbnkpID0+XG4gIEFycmF5LmlzQXJyYXkoZy5jb2xMYWJlbHMpICYmXG4gIGcudGl0bGUgPT09IFwiU3BlbGwgU2xvdHMgcGVyIFNwZWxsIExldmVsXCJcbik7XG5cbmlmIChjc0dyb3VwICYmIHNsb3RHcm91cCkge1xuICAvLyAyKSByYXcgbGFiZWxzXG4gIGNvbnN0IGNzTGFiZWxzICAgPSAoY3NHcm91cC5jb2xMYWJlbHMgYXMgc3RyaW5nW10pLm1hcChsID0+IHJlcGxhY2U1ZVRhZ3MobCkpO1xuICBjb25zdCBzbG90TGFiZWxzID0gKHNsb3RHcm91cC5jb2xMYWJlbHMgYXMgc3RyaW5nW10pLm1hcChsID0+IHJlcGxhY2U1ZVRhZ3MobCkpO1xuXG4gIC8vIDMpIHJhdyByb3dzXG4gIGNvbnN0IGNzUm93cyAgID0gKGNzR3JvdXAucm93cyAgICAgIGFzIGFueVtdW10pICAgICAgICAgICAgICB8fCBbXTtcbiAgY29uc3Qgc2xvdFJvd3MgPSAoc2xvdEdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uIGFzIGFueVtdW10pIHx8IFtdO1xuXG4gIC8vIDQpIGJ1aWxkIGhlYWRlcjogTGV2ZWwgKyBjYW50cmlwcy9zcGVsbHMgKyBlYWNoIHNsb3QgbGV2ZWxcbiAgY29uc3QgY29sTGFiZWxzID0gW1wiTGV2ZWxcIiwgLi4uY3NMYWJlbHMsIC4uLnNsb3RMYWJlbHNdO1xuXG4gIC8vIDUpIGJ1aWxkIGVhY2ggcm93IGJ5IHppcHBpbmcgY3NSb3dzW2ldICsgc2xvdFJvd3NbaV1cbiAgY29uc3Qgc3BlbGxSb3dzOiBzdHJpbmdbXVtdID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5tYXgoY3NSb3dzLmxlbmd0aCwgc2xvdFJvd3MubGVuZ3RoKTsgaSsrKSB7XG4gICAgY29uc3QgbHZsID0gU3RyaW5nKGkgKyAxKTtcbiAgICBjb25zdCBjc0NlbGxzICAgPSBjc1Jvd3NbaV0gICA/IGNzUm93c1tpXS5tYXAoU3RyaW5nKSAgIDogY3NMYWJlbHMubWFwKF8gPT4gXCJcIik7XG4gICAgY29uc3Qgc2xvdENlbGxzID0gc2xvdFJvd3NbaV0gPyBzbG90Um93c1tpXS5tYXAoU3RyaW5nKSA6IHNsb3RMYWJlbHMubWFwKF8gPT4gXCJcIik7XG4gICAgc3BlbGxSb3dzLnB1c2goW2x2bCwgLi4uY3NDZWxscywgLi4uc2xvdENlbGxzXSk7XG4gIH1cblxuICAvLyA2KSByZW5kZXIhXG4gIGxpbmVzLnB1c2goYFxcbj4gWyF0aXBdLSBTcGVsbCBQcm9ncmVzc2lvbiBUYWJsZWApO1xuICBsaW5lcy5wdXNoKFxuICAgIHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgICAgdHlwZTogICAgICBcInRhYmxlXCIsXG4gICAgICBjYXB0aW9uOiAgIFwiXCIsXG4gICAgICBjb2xMYWJlbHM6IGNvbExhYmVscyxcbiAgICAgIHJvd3M6ICAgICAgc3BlbGxSb3dzLFxuICB9KSk7XG59XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShqc29uLnN1YmNsYXNzKSA/IGpzb24uc3ViY2xhc3MgOiBbXTtcbmNvbnN0IHN1YmNsYXNzRmVhdHVyZXMgPSBBcnJheS5pc0FycmF5KGpzb24uc3ViY2xhc3NGZWF0dXJlKVxuICA/IGpzb24uc3ViY2xhc3NGZWF0dXJlXG4gIDoganNvbi5sb29rdXA/LnN1YmNsYXNzRmVhdHVyZSA/PyBbXTtcblxuZm9yIChjb25zdCBzYyBvZiBzdWJzKSB7XG4gIGNvbnN0IHN1YmNsYXNzTmFtZSA9IHNjLm5hbWU7XG4gIGNvbnN0IHN1YkxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIZWFkZXIgbWV0YWRhdGEgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHN1YkxpbmVzLnB1c2goYCMgJHtzdWJjbGFzc05hbWV9YCk7XG4gIHN1YkxpbmVzLnB1c2goYCoqUGFyZW50IENsYXNzOioqIFtbJHtjbGFzc05hbWV9XV1gKTtcbiAgaWYgKHNjLnNvdXJjZSkgc3ViTGluZXMucHVzaChgKipTb3VyY2U6KiogJHtzYy5zb3VyY2V9YCk7XG4gIHN1YkxpbmVzLnB1c2goYGApOyAvLyBibGFuayBsaW5lXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEludHJvIGVudHJ5IChsZXZlbCAzIGZlYXR1cmUgZGVzY3JpcHRpb24pIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBpbnRybyA9IHN1YmNsYXNzRmVhdHVyZXMuZmluZCgoZjogYW55KSA9PlxuICAgIGYubmFtZSA9PT0gc2MubmFtZSAmJlxuICAgIGYubGV2ZWwgPT09IDMgJiZcbiAgICBmLnN1YmNsYXNzU2hvcnROYW1lID09PSBzYy5zaG9ydE5hbWUgJiZcbiAgICBmLnN1YmNsYXNzU291cmNlID09PSBzYy5zb3VyY2VcbiAgKTtcbiAgaWYgKGludHJvPy5lbnRyaWVzPy5sZW5ndGgpIHtcbiAgICBjb25zdCBpbnRyb1RleHQgPSBBcnJheS5pc0FycmF5KGludHJvLmVudHJpZXMpXG4gICAgICA/IGludHJvLmVudHJpZXMubWFwKChlOiBhbnkpID0+XG4gICAgICAgICAgdHlwZW9mIGUgPT09IFwic3RyaW5nXCIgPyByZXBsYWNlNWVUYWdzKGUpIDogZm9ybWF0RW50cnkoZSlcbiAgICAgICAgKS5qb2luKFwiXFxuXFxuXCIpXG4gICAgICA6IGZvcm1hdEVudHJ5KGludHJvLmVudHJpZXMpO1xuICAgIHN1YkxpbmVzLnB1c2goaW50cm9UZXh0LCBgYCk7XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgT3B0aW9uYWxcdTIwMTBmZWF0dXJlIGJsb2NrIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBjb2RlID0gKE9iamVjdC5lbnRyaWVzKE9QVF9GRUFUVVJFX1RZUEVfVE9fRlVMTCkgYXMgW3N0cmluZyxzdHJpbmddW10pXG4gICAgLmZpbmQoKFssIGZ1bGxdKSA9PlxuICAgICAgZnVsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1YmNsYXNzTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICk/LlswXTtcbiAgaWYgKGNvZGUpIHtcbiAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9uYWxGZWF0dXJlcy5maWx0ZXIob2YgPT5cbiAgICAgIEFycmF5LmlzQXJyYXkob2YuZmVhdHVyZVR5cGUpICYmIG9mLmZlYXR1cmVUeXBlLmluY2x1ZGVzKGNvZGUpXG4gICAgKTtcbiAgICBpZiAobWF0Y2hlcy5sZW5ndGgpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2goYCMjICR7c3ViY2xhc3NOYW1lfSBPcHRpb25hbCBGZWF0dXJlc2ApO1xuICAgICAgZm9yIChjb25zdCBmZWF0IG9mIG1hdGNoZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBmZWF0LmVudHJpZXMpIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSB0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gcmVwbGFjZTVlVGFncyhlbnRyeSlcbiAgICAgICAgICAgIDogZm9ybWF0RW50cnkoZW50cnkpO1xuICAgICAgICAgIHN1YkxpbmVzLnB1c2goYCoqJHtmZWF0Lm5hbWV9OioqICR7dHh0fWApO1xuICAgICAgICB9XG4gICAgICAgIHN1YkxpbmVzLnB1c2goYGApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTdWJjbGFzcyBwcm9ncmVzc2lvbiB0YWJsZSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3QgcHJvZyA9IHNjLnN1YmNsYXNzVGFibGVHcm91cHMgPz8gW107XG4gIGlmIChwcm9nLmxlbmd0aCkge1xuICAgIGNvbnN0IGxhYmVscyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IHJvd3NNYXA6IFJlY29yZDxudW1iZXIsIFJlY29yZDxzdHJpbmcsc3RyaW5nPj4gPSB7fTtcbiAgICBmb3IgKGNvbnN0IGcgb2YgcHJvZykge1xuICAgICAgY29uc3QgY29scyA9IChnLmNvbExhYmVscyA/PyBbXSkubWFwKHJlcGxhY2U1ZVRhZ3MpO1xuICAgICAgY29uc3Qgcm93cyA9IEFycmF5LmlzQXJyYXkoZy5yb3dzKVxuICAgICAgICA/IGcucm93c1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkoZy5yb3dzU3BlbGxQcm9ncmVzc2lvbilcbiAgICAgICAgICA/IGcucm93c1NwZWxsUHJvZ3Jlc3Npb25cbiAgICAgICAgICA6IFtdO1xuICAgICAgcm93cy5mb3JFYWNoKChyOiBhbnksIGk6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCBsdmwgPSBpICsgMTtcbiAgICAgICAgcm93c01hcFtsdmxdID8/PSB7fTtcbiAgICAgICAgci5mb3JFYWNoKChjOiBhbnksIGo6IG51bWJlcikgPT4ge1xuICAgICAgICAgIGNvbnN0IGxhYiA9IGNvbHNbal07XG4gICAgICAgICAgaWYgKCFsYWIpIHJldHVybjtcbiAgICAgICAgICBsYWJlbHMuYWRkKGxhYik7XG4gICAgICAgICAgcm93c01hcFtsdmxdW2xhYl0gPSB0eXBlb2YgYyA9PT0gXCJvYmplY3RcIiAmJiBjICE9PSBudWxsICYmIFwidmFsdWVcIiBpbiBjXG4gICAgICAgICAgICA/IFN0cmluZyhjLnZhbHVlKVxuICAgICAgICAgICAgOiBTdHJpbmcoYyA/PyBcIlwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgaGRycyA9IEFycmF5LmZyb20obGFiZWxzKTtcbiAgICBzdWJMaW5lcy5wdXNoKGAjIyBTdWJjbGFzcyBQcm9ncmVzc2lvbmApO1xuICAgIHN1YkxpbmVzLnB1c2gocmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgICB0eXBlOiAgICAgIFwidGFibGVcIixcbiAgICAgIGNhcHRpb246ICAgXCJcIixcbiAgICAgIGNvbExhYmVsczogW1wiTGV2ZWxcIiwgLi4uaGRyc10sXG4gICAgICByb3dzOiAgICAgIEFycmF5LmZyb20oeyBsZW5ndGg6IDIwIH0sIChfLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGx2bCA9IGkgKyAxO1xuICAgICAgICByZXR1cm4gW1N0cmluZyhsdmwpLCAuLi5oZHJzLm1hcChoID0+IHJvd3NNYXBbbHZsXT8uW2hdID8/IFwiXCIpXTtcbiAgICAgIH0pXG4gICAgfSkpO1xuICB9XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBEZXRhaWxlZCBsZXZlbFx1MjAxMGJ5XHUyMDEwbGV2ZWwgZmVhdHVyZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBmZWF0c0J5THZsOiBSZWNvcmQ8bnVtYmVyLCBhbnlbXT4gPSB7fTtcbmZvciAoY29uc3QgZiBvZiBzdWJjbGFzc0ZlYXR1cmVzKSB7XG4gIGlmIChcbiAgICBmLnN1YmNsYXNzU2hvcnROYW1lID09PSBzYy5zaG9ydE5hbWUgJiZcbiAgICBmLnN1YmNsYXNzU291cmNlID09PSBzYy5zb3VyY2UgJiZcbiAgICBmLmNsYXNzTmFtZSA9PT0gY2xhc3NOYW1lXG4gICkge1xuICAgIGNvbnN0IGx2bCA9IGYubGV2ZWwgPz8gMDtcbiAgICA7KGZlYXRzQnlMdmxbbHZsXSA/Pz0gW10pLnB1c2goZik7XG4gIH1cbn1cblxuZm9yIChjb25zdCBsdmwgb2YgT2JqZWN0LmtleXMoZmVhdHNCeUx2bCkubWFwKE51bWJlcikuc29ydCgoYSxiKT0+YS1iKSkge1xuICBzdWJMaW5lcy5wdXNoKGAtLS1gLCBgIyMgTGV2ZWwgJHtsdmx9YCk7XG5cbiAgZm9yIChjb25zdCBmIG9mIGZlYXRzQnlMdmxbbHZsXSkge1xuICBzdWJMaW5lcy5wdXNoKGAjIyMgJHtmLm5hbWV9YCk7XG5cbiAgLy8gV2FsayBlYWNoIGVudHJ5IGZvciB0aGlzIGZlYXR1cmVcbiAgZm9yIChjb25zdCBlbnQgb2YgQXJyYXkuaXNBcnJheShmLmVudHJpZXMpID8gZi5lbnRyaWVzIDogW2YuZW50cmllc10pIHtcbiAgICAvLyAxKSBQbGFpbiBwYXJhZ3JhcGggZW50cmllc1xuICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3MoZW50KSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyAyKSBJZiBpdCdzIHRoZSBcIk1hbmV1dmVyc1wiIGVudHJpZXNcdTIwMTBibG9jaywgaW5qZWN0IHlvdXIgbGlzdCBoZXJlXG4gICAgaWYgKGVudC50eXBlID09PSBcImVudHJpZXNcIiAmJiAvXk1hbmV1dmVycyQvaS50ZXN0KGVudC5uYW1lKSkge1xuICAgICAgLy8gZmlyc3QgcHJpbnQgdGhlIHN1Ylx1MjAxMGhlYWRpbmcgYW5kIGFueSB0ZXh0IGl0IGhhZFxuICAgICAgc3ViTGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgIGZvciAoY29uc3QgdHh0IG9mIEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdKSB7XG4gICAgICAgIHN1YkxpbmVzLnB1c2godHlwZW9mIHR4dCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgID8gcmVwbGFjZTVlVGFncyh0eHQpXG4gICAgICAgICAgOiBmb3JtYXRFbnRyeSh0eHQpKTtcbiAgICAgIH1cblxuICAgICAgLy8gbm93IGluamVjdCB0aGUgZnVsbCBtYW5ldXZlciBkZWZpbml0aW9ucyBmb3IgdGhpcyBzdWJjbGFzc1xuICAgICAgY29uc3QgY29kZSA9IChPYmplY3QuZW50cmllcyhPUFRfRkVBVFVSRV9UWVBFX1RPX0ZVTEwpIGFzIFtzdHJpbmcsc3RyaW5nXVtdKVxuICAgICAgICAuZmluZCgoWywgZnVsbF0pID0+XG4gICAgICAgICAgZnVsbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHN1YmNsYXNzTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICApPy5bMF07XG4gICAgICBpZiAoY29kZSkge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9uYWxGZWF0dXJlcy5maWx0ZXIob2YgPT5cbiAgICAgICAgICBBcnJheS5pc0FycmF5KG9mLmZlYXR1cmVUeXBlKSAmJiBvZi5mZWF0dXJlVHlwZS5pbmNsdWRlcyhjb2RlKVxuICAgICAgICApO1xuICAgICAgICBmb3IgKGNvbnN0IGZlYXREZWYgb2YgbWF0Y2hlcykge1xuICAgICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGZlYXREZWYuZW50cmllcykge1xuICAgICAgICAgICAgY29uc3QgbGluZSA9IHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHN1YilcbiAgICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShzdWIpO1xuICAgICAgICAgICAgc3ViTGluZXMucHVzaChgKioke2ZlYXREZWYubmFtZX06KiogJHtsaW5lfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzdWJMaW5lcy5wdXNoKFwiXCIpOyAvLyBzcGFjZXJcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gMykgQW55IG90aGVyIG5lc3RlZCBcImVudHJpZXNcIiBibG9ja3NcbiAgICBpZiAoZW50LnR5cGUgPT09IFwiZW50cmllc1wiICYmIGVudC5uYW1lKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKGAjIyMjIyAke2VudC5uYW1lfWApO1xuICAgICAgZm9yIChjb25zdCBlMiBvZiBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXSkge1xuICAgICAgICBzdWJMaW5lcy5wdXNoKGZvcm1hdEVudHJ5KGUyKSk7XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyA0KSBJbnNldHNcbiAgICBpZiAoZW50LnR5cGUgPT09IFwiaW5zZXRcIiAmJiBlbnQubmFtZSkge1xuICAgICAgY29uc3QgaW5uZXIgPSBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXTtcbiAgICAgIHN1YkxpbmVzLnB1c2goYD4gKioke2VudC5uYW1lfSoqYCk7XG4gICAgICBpbm5lci5mb3JFYWNoKChlMjogYW55KSA9PiBzdWJMaW5lcy5wdXNoKGA+ICR7Zm9ybWF0RW50cnkoZTIpfWApKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIDUpIEZhbGxiYWNrXG4gICAgY29uc3QgZmIgPSBmb3JtYXRFbnRyeShlbnQpO1xuICAgIGlmIChmYikgc3ViTGluZXMucHVzaChmYik7XG4gIH1cbiAgfVxufVxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENsZWFuIHVwICYgcHVzaCBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3Qgc3ViY2xhc3NDb250ZW50ID0gc3ViTGluZXNcbiAgICAuam9pbihcIlxcblxcblwiKVxuICAgIC5yZXBsYWNlKC9cXG57Myx9L2csIFwiXFxuXFxuXCIpO1xuICBzdWJjbGFzc0ZpbGVzLnB1c2goe1xuICAgIHBhdGg6IGBDbGFzc2VzLyR7Y2xhc3NOYW1lfS9TdWJjbGFzc2VzLyR7c3ViY2xhc3NOYW1lfS5tZGAsXG4gICAgY29udGVudDogc3ViY2xhc3NDb250ZW50XG4gIH0pO1xufVxuXG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzZXMgU3VtbWFyeSBcdTI1MDBcdTI1MDBcdTI1MDBcbmlmIChzdWJzLmxlbmd0aCkge1xuICBjb25zdCBsaW5rcyA9IHN1YnMubWFwKChzYzogYW55KSA9PlxuICAgIGBbW1N1YmNsYXNzZXMvJHtzYy5uYW1lLnJlcGxhY2UoL1tcXFxcL10vZywgXCItXCIpfXwke3NjLm5hbWV9XV1gXG4gICk7XG4gIGxpbmVzLnB1c2goYFxcbioqU3ViY2xhc3NlczoqKiAke2xpbmtzLmpvaW4oXCIsIFwiKX1gKTtcbn1cblxuXG4gIC8vIEdldCBmdWxsIGNsYXNzIGZlYXR1cmUgZGVmaW5pdGlvbnNcbmNvbnN0IGFsbEZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShqc29uLmNsYXNzRmVhdHVyZSkgPyBqc29uLmNsYXNzRmVhdHVyZSA6IGpzb24ubG9va3VwPy5jbGFzc0ZlYXR1cmUgPz8gW107XG5jb25zdCBmZWF0dXJlc0J5TGV2ZWw6IFJlY29yZDxudW1iZXIsIGFueVtdPiA9IHt9O1xuXG5mb3IgKGNvbnN0IGVudHJ5IG9mIGFsbEZlYXR1cmVzKSB7XG4gIGlmIChlbnRyeS5jbGFzc05hbWUgIT09IGNsYXNzTmFtZSkgY29udGludWU7XG4gIGNvbnN0IGx2bCA9IGVudHJ5LmxldmVsID8/IDA7XG4gIGlmICghZmVhdHVyZXNCeUxldmVsW2x2bF0pIGZlYXR1cmVzQnlMZXZlbFtsdmxdID0gW107XG4gIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2goZW50cnkpO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBMZXZlbCBGZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmxpbmVzLnB1c2goYGApO1xubGluZXMucHVzaChgLS0tYCk7XG5saW5lcy5wdXNoKGAjIyBMZXZlbCBGZWF0dXJlc2ApO1xuXG5jb25zdCBsZXZlbHMgPSBPYmplY3RcbiAgLmtleXMoZmVhdHVyZXNCeUxldmVsKVxuICAubWFwKG4gPT4gK24pXG4gIC5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG5cbmZvciAoY29uc3QgbHZsIG9mIGxldmVscykge1xuICBsaW5lcy5wdXNoKGAjIyMgTGV2ZWwgJHtsdmx9YCk7XG5cbiAgZm9yIChjb25zdCBmZWF0IG9mIGZlYXR1cmVzQnlMZXZlbFtsdmxdKSB7XG4gICAgLy8gRmVhdHVyZSBoZWFkZXJcbiAgICBsaW5lcy5wdXNoKGAjIyMjICR7ZmVhdC5uYW1lfWApO1xuXG4gICAgLy8gRW5zdXJlIGVudHJpZXMgaXMgYWx3YXlzIGFuIGFycmF5XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoZmVhdC5lbnRyaWVzKVxuICAgICAgPyBmZWF0LmVudHJpZXNcbiAgICAgIDogW2ZlYXQuZW50cmllc107XG5cbiAgICBmb3IgKGNvbnN0IGVudCBvZiBlbnRyaWVzKSB7XG4gICAgICAvLyAxKSBQbGFpbi10ZXh0IHBhcmFncmFwaFxuICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IGZvcm1hdEVudHJ5KGVudCkudHJpbSgpO1xuICAgICAgICAgIC8vIHNraXAgYW55IHB1cmUtYnJhY2UgbGluZXNcbiAgICAgICAgICBpZiAodHh0ID09PSBcIntcIiB8fCB0eHQgPT09IFwifVwiKSBjb250aW51ZTtcbiAgICAgICAgICBsaW5lcy5wdXNoKHR4dCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50Lml0ZW1zKSkge1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBlbnQuaXRlbXMpIHtcbiAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgIH1cbiAgICBjb250aW51ZTtcbiAgfVxuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGluc2lkZSB5b3VyIGZvciAoY29uc3QgZW50IG9mIGVudHJpZXMpIGxvb3AgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICBpZiAoZW50LnR5cGUgPT09IFwib3B0aW9uc1wiKSB7XG4gIGlmIChlbnQuY291bnQpIHtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIGxpbmVzLnB1c2goYCoqQ2hvb3NlICR7ZW50LmNvdW50fSBvZiB0aGUgZm9sbG93aW5nIG9wdGlvbnM6KipgKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICB9XG5cbiAgZm9yIChjb25zdCBvcHRSZWYgb2YgQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc10pIHtcbiAgICBpZiAob3B0UmVmLnR5cGUgPT09IFwicmVmT3B0aW9uYWxmZWF0dXJlXCIpIHtcbiAgICAgIGNvbnN0IFtvcHROYW1lLCBvcHRTcmNdID0gb3B0UmVmLm9wdGlvbmFsZmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICBjb25zdCBmZWF0RGVmID0gb3B0aW9uYWxGZWF0dXJlcy5maW5kKFxuICAgICAgICBmID0+IGYubmFtZSA9PT0gb3B0TmFtZSAmJiAoIW9wdFNyYyB8fCBmLnNvdXJjZSA9PT0gb3B0U3JjKVxuICAgICAgKTtcblxuICAgICAgaWYgKGZlYXREZWYpIHtcbiAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGVhY2ggbGluZSBpbiB0aGUgZmVhdHVyZVx1MjAxOXMgZW50cmllc1tdXG4gICAgICAgIGZlYXREZWYuZW50cmllcy5mb3JFYWNoKChzdWJFbnRyeTogYW55LCBpZHg6IGFueSkgPT4ge1xuICAgICAgICAgIC8vIHJlbmRlciB0ZXh0XG4gICAgICAgICAgY29uc3QgdGV4dCA9IHR5cGVvZiBzdWJFbnRyeSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHN1YkVudHJ5KVxuICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShzdWJFbnRyeSk7XG5cbiAgICAgICAgICBpZiAoaWR4ID09PSAwKSB7XG4gICAgICAgICAgICAvLyBmaXJzdCBsaW5lOiBib2xkZWQgbmFtZSArIGRlc2NyaXB0aW9uXG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICoqJHtmZWF0RGVmLm5hbWV9OioqICR7dGV4dH1gKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gc3Vic2VxdWVudCBsaW5lczogbmVzdGVkIGJ1bGxldFxuICAgICAgICAgICAgbGluZXMucHVzaChgICAtICR7dGV4dH1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpOyAvLyBibGFuayBsaW5lIGFmdGVyIGVhY2ggZmVhdHVyZSBibG9ja1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZmFsbGJhY2sgaWYgbm90IGZvdW5kXG4gICAgICAgIGxpbmVzLnB1c2goYCoqJHtvcHROYW1lfToqKmApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBub25cdTIwMTByZWZPcHRpb25hbGZlYXR1cmUgZmFsbGJhY2tcbiAgICAgIGNvbnN0IHR4dCA9IGZvcm1hdEVudHJ5KG9wdFJlZik7XG4gICAgICBpZiAodHh0KSBsaW5lcy5wdXNoKGAtICR7dHh0fWApO1xuICAgIH1cbiAgfVxuXG4gIGNvbnRpbnVlO1xufVxuXG5cbiAgICAgIC8vIDMpIFN0YW5kYWxvbmUgcmVmT3B0aW9uYWxmZWF0dXJlXG4gICAgICBpZiAoZW50LnR5cGUgPT09IFwicmVmT3B0aW9uYWxmZWF0dXJlXCIpIHtcbiAgICAgICAgY29uc3QgW25hbWVdID0gZW50Lm9wdGlvbmFsZmVhdHVyZS5zcGxpdChcInxcIik7XG4gICAgICAgIGxpbmVzLnB1c2goYC0gW1ske25hbWV9fCR7bmFtZX1dXWApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gNCkgTmVzdGVkIFx1MjAxQ2VudHJpZXNcdTIwMUQgYmxvY2sgd2l0aCBpdHMgb3duIGhlYWRpbmdcbiAgICAgIGlmIChlbnQudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgZW50Lm5hbWUpIHtcbiAgICAgICAgbGluZXMucHVzaChgIyMjIyMgJHtlbnQubmFtZX1gKTtcbiAgICAgICAgY29uc3QgaW5uZXIgPSBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXTtcbiAgICAgICAgZm9yIChjb25zdCBlMiBvZiBpbm5lcikge1xuICAgICAgICAgIGxpbmVzLnB1c2goZm9ybWF0RW50cnkoZTIpKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gNSkgRmFsbGJhY2sgZm9yIGFueSBvdGhlciBvYmplY3Qgc2hhcGVcbiAgICAgIGNvbnN0IGZhbGxiYWNrID0gZm9ybWF0RW50cnkoZW50KTtcbiAgICAgIGlmIChmYWxsYmFjaykgbGluZXMucHVzaChmYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLy8gQmxhbmsgbGluZSBhZnRlciBlYWNoIGZlYXR1cmVcbiAgICBsaW5lcy5wdXNoKGBgKTtcbiAgfSBcblxuICAvLyBEaXZpZGVyIGJldHdlZW4gbGV2ZWxzXG4gIGxpbmVzLnB1c2goYC0tLWApO1xufVxuXG5cblxuICAvLyBzdGl0Y2gsIHJlcGxhY2UgdGFncywgcmV0dXJuXG4gIGxldCBjb250ZW50ID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YDtcbiAgLy8gY29tbWVudCB0aGlzIG91dCB3aGlsZSBkZWJ1Z2dpbmc6XG4gIGNvbnRlbnQgPSByZXBsYWNlNWVUYWdzKGNvbnRlbnQpO1xuXG4gIGNvbnRlbnQgPSBjb250ZW50XG4gIC5yZXBsYWNlKC9cXG57Myx9L2csICdcXG5cXG4nKSAgIC8vIG5vIG1vcmUgdGhhbiAyIG5ld2xpbmVzIGluIGEgcm93XG4gIC5yZXBsYWNlKC9cXG4gK1xcbi9nLCAnXFxuXFxuJyk7ICAvLyB0cmltIGJsYW5rIGxpbmVzIHdpdGggdHJhaWxpbmcgc3BhY2VzXG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBgQ2xhc3Nlcy8ke2NsYXNzTmFtZX0vJHtjbGFzc05hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQsXG4gICAgfSxcbiAgICAuLi5zdWJjbGFzc0ZpbGVzLFxuICBdO1xuICBcbn1cbiIsICIvLyBzcmMvcGFyc2Vycy9ydWxlcy50c1xuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5cbi8qKlxuICogUGFyc2UgYWN0aW9ucy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggYWN0aW9uLFxuICogaGFuZGxpbmcgbmVzdGVkIGVudHJpZXMsIGluc2V0cywgbGlzdHMsIHRhYmxlcywgYW5kIGFkZGluZyBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBY3Rpb25zRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoanNvbi5hY3Rpb24pKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3QgYWN0aW9uIG9mIGpzb24uYWN0aW9uKSB7XG4gICAgbGluZXMucHVzaChgIyMgJHthY3Rpb24ubmFtZX1gKTtcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShhY3Rpb24uZW50cmllcykgPyBhY3Rpb24uZW50cmllcyA6IFthY3Rpb24uZW50cmllc107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgcGFyYXMgPSBlbnRyeS5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfSBlbHNlIGlmICgoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgfHwgZW50cnkudHlwZSA9PT0gXCJpbnNldFwiKSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGVudHJ5LmVudHJpZXMpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgY29uc3QgcHMgPSBzdWIuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcCBvZiBwcykge1xuICAgICAgICAgICAgICBjb25zdCB0dCA9IHAudHJpbSgpO1xuICAgICAgICAgICAgICBpZiAodHQpIHtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHQpKTtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChzdWIudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShzdWIuaXRlbXMpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpIG9mIHN1Yi5pdGVtcykge1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhsaSl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KHN1YilcbiAgICAgICAgICAgICAgPyBzdWIuam9pbihcIiBcIilcbiAgICAgICAgICAgICAgOiB0eXBlb2Ygc3ViID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShzdWIpXG4gICAgICAgICAgICAgICAgOiBTdHJpbmcoc3ViKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiLS0tXCIpLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZW50cnkucm93cykge1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KGVudHJ5KVxuICAgICAgICAgID8gZW50cnkuam9pbihcIiBcIilcbiAgICAgICAgICA6IHR5cGVvZiBlbnRyeSA9PT0gXCJvYmplY3RcIlxuICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShlbnRyeSlcbiAgICAgICAgICAgIDogU3RyaW5nKGVudHJ5KTtcbiAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBhY3Rpb25zXG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgfVxuICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgIHJldHVybiBhY2MuY29uY2F0KGN1cnIpO1xuICB9LCBbXSk7XG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0FjdGlvbnMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogUGFyc2UgY29tYmluZWQgY29uZGl0aW9uc2Rpc2Vhc2VzLmpzb24gaW50byB0d28gTWFya2Rvd24gbm90ZXM6IENvbmRpdGlvbnMubWQgYW5kIERpc2Vhc2VzLm1kXG4gKiBhZGRpbmcgc2VwYXJhdG9ycyBiZXR3ZWVuIGVudHJpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3Qgb3V0cHV0czogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcbiAgY29uc3QgcHJvY2Vzc0l0ZW1zID0gKGl0ZW1zOiBhbnlbXSwgb3V0UGF0aDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICBsaW5lcy5wdXNoKGAjIyAke2l0ZW0ubmFtZX1gKTtcbiAgICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGl0ZW0uZW50cmllcykgPyBpdGVtLmVudHJpZXMgOiBbaXRlbS5lbnRyaWVzXTtcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCB0eHQgb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKHR4dCl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZW50cnkuY29sTGFiZWxzIHx8IFtdO1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIGZvciAoY29uc3Qgcm93IG9mIGVudHJ5LnJvd3MpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGVudHJ5LmVudHJpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHR4dCA9IHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCIgPyBzdWIgOiBTdHJpbmcoc3ViKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkuam9pbihcIiBcIikgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBpdGVtc1xuICAgICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgICB9XG4gICAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gICAgfSwgW10pO1xuICAgIG91dHB1dHMucHVzaCh7IHBhdGg6IG91dFBhdGgsIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiIH0pO1xuICB9O1xuICBwcm9jZXNzSXRlbXMoanNvbi5jb25kaXRpb24gfHwgW10sIFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9Db25kaXRpb25zLm1kXCIpO1xuICBwcm9jZXNzSXRlbXMoanNvbi5kaXNlYXNlIHx8IFtdLCBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvRGlzZWFzZXMubWRcIik7XG4gIHJldHVybiBvdXRwdXRzO1xufVxuXG4vKipcbiAqIFBhcnNlIHNlbnNlcy5qc29uIGludG8gYSBzaW5nbGUgTWFya2Rvd24gbm90ZSB3aXRoICMjIGhlYWRlcnMgZm9yIGVhY2ggc2Vuc2UsXG4gKiBoYW5kbGluZyBsaXN0cywgdGFibGVzLCBuZXN0ZWQgZW50cmllcy9pbnNldHMsIGFuZCBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTZW5zZXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShqc29uLnNlbnNlKSA/IGpzb24uc2Vuc2UgOiBBcnJheS5pc0FycmF5KGpzb24uc2Vuc2VzKSA/IGpzb24uc2Vuc2VzIDogW107XG4gIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3Qgc2Vuc2Ugb2YgaXRlbXMpIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke3NlbnNlLm5hbWV9YCk7XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoc2Vuc2UuZW50cmllcykgPyBzZW5zZS5lbnRyaWVzIDogW3NlbnNlLmVudHJpZXNdO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIHBhcmFzKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSBpZiAoKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiIHx8IGVudHJ5LnR5cGUgPT09IFwiaW5zZXRcIikgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICBmb3IgKGNvbnN0IHN1YiBvZiBlbnRyeS5lbnRyaWVzKSB7XG4gICAgICAgICAgY29uc3QgdHh0ID0gdHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIiA/IHN1YiA6IFN0cmluZyhzdWIpO1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiLS0tXCIpLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZW50cnkucm93cykge1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KGVudHJ5KSA/IGVudHJ5LmpvaW4oXCIgXCIpIDogU3RyaW5nKGVudHJ5KTtcbiAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBTZXBhcmF0b3IgYmV0d2VlbiBzZW5zZXNcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICB9XG4gIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9TZW5zZXMubWRcIixcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogUGFyc2Ugc2tpbGxzLmpzb24gaW50byBhIHNpbmdsZSBNYXJrZG93biBub3RlIHdpdGggIyMgaGVhZGVycyBmb3IgZWFjaCBza2lsbCxcbiAqIHByZXBlbmRpbmcgYW4gYWJpbGl0eSBsaW5lLCBoYW5kbGluZyBwYXJhZ3JhcGhzLCBhbmQgc2VwYXJhdG9ycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2tpbGxzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkoanNvbi5za2lsbClcbiAgICA/IGpzb24uc2tpbGxcbiAgICA6IEFycmF5LmlzQXJyYXkoanNvbi5za2lsbHMpXG4gICAgPyBqc29uLnNraWxsc1xuICAgIDogW107XG4gIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gW107XG5cbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3Qgc2tpbGwgb2YgaXRlbXMpIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke3NraWxsLm5hbWV9YCk7XG4gICAgaWYgKHNraWxsLmFiaWxpdHkpIHtcbiAgICAgIGxpbmVzLnB1c2goYCpBYmlsaXR5OiAke3NraWxsLmFiaWxpdHl9KmApO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoc2tpbGwuZW50cmllcykgPyBza2lsbC5lbnRyaWVzIDogW3NraWxsLmVudHJpZXNdO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IHBhcmFzID0gZW50cnkuc3BsaXQoL1xcbnsyLH0vKTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJhIG9mIHBhcmFzKSB7XG4gICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGVudHJ5Lml0ZW1zKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkuam9pbihcIiBcIikgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIHNraWxsc1xuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL1NraWxscy5tZFwiLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSxcbiAgXTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBGRUFUU19NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cbi8qKlxuICogUGFyc2UgZmVhdHMuanNvbiBpbnRvIG9uZSBNYXJrZG93biBmaWxlIHBlciBmZWF0IHVuZGVyIFBsYXllciBCdWlsZC9GZWF0cyxcbiAqIGluY2x1ZGluZyBmcm9udG1hdHRlciwgY2xlYW5lZCBwcmVyZXF1aXNpdGVzLCBhbmQgZm9ybWF0dGVkIGVudHJpZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUZlYXRzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBmZWF0czogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uZmVhdClcbiAgICA/IGpzb24uZmVhdFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmZlYXRzKVxuICAgID8ganNvbi5mZWF0c1xuICAgIDogW107XG5cbiAgcmV0dXJuIGZlYXRzLm1hcCgoZmVhdDogYW55KSA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRnJvbnRtYXR0ZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3QgZm0gPSBidWlsZEZNKHsgLi4uZmVhdCwgX2VkaXRpb25JZDogZWRpdGlvbklkIH0sIEZFQVRTX01FVEFfREVGUyk7XG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgICBsaW5lcy5wdXNoKHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBGRUFUU19NRVRBX0RFRlMpKTtcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIsIFwiXCIpO1xuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFRpdGxlIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGxpbmVzLnB1c2goYCMgJHtmZWF0Lm5hbWV9YCwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUHJlcmVxdWlzaXRlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBwcmVyZXFzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQucHJlcmVxdWlzaXRlKSkge1xuICAgICAgZmVhdC5wcmVyZXF1aXNpdGUuZm9yRWFjaCgocHI6IGFueSkgPT4ge1xuICAgICAgICBpZiAocHIubGV2ZWwpIHByZXJlcXMucHVzaChgTGV2ZWwgJHtwci5sZXZlbH1gKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocHIuZmVhdCkpIHtcbiAgICAgICAgICBwci5mZWF0LmZvckVhY2goKGY6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGYuc3BsaXQoXCJ8XCIpWzBdLnJlcGxhY2UoL1xcYlxcdy9nLCBjID0+IGMudG9VcHBlckNhc2UoKSk7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogW1ske25hbWV9XV1gKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChmZWF0LnNwZWxsY2FzdGluZ1ByZXBhcmVkKSBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogU3BlbGxjYXN0ZXJgKTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LnRvb2xQcm9maWNpZW5jaWVzKSkge1xuICAgICAgZmVhdC50b29sUHJvZmljaWVuY2llcy5mb3JFYWNoKCh0cDogYW55KSA9PiB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHRwKS5mb3JFYWNoKChba2V5XSkgPT4ge1xuICAgICAgICAgIGlmIChrZXkgPT09ICdhbnlBcnRpc2Fuc1Rvb2wnKSB7XG4gICAgICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogUHJvZmljaWVudCB3aXRoIGFuIGFydGlzYW4ncyB0b29sYCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBQcm9maWNpZW50IHdpdGggJHtrZXkucmVwbGFjZSgvKFtBLVpdKS9nLCcgJDEnKS50cmltKCl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShmZWF0LmFybW9yUHJvZmljaWVuY2llcykpIHtcbiAgICAgIGZlYXQuYXJtb3JQcm9maWNpZW5jaWVzLmZvckVhY2goKGFybTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGFybVN0ciA9IHR5cGVvZiBhcm0gPT09ICdzdHJpbmcnID8gYXJtIDogSlNPTi5zdHJpbmdpZnkoYXJtKTtcbiAgICAgICAgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFByb2ZpY2llbnQgd2l0aCAke2FybVN0ci5yZXBsYWNlKC8oW0EtWl0pL2csJyAkMScpLnRyaW0oKX1gKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZmVhdC5yYWNlKSBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogJHtmZWF0LnJhY2V9YCk7XG5cbiAgICBpZiAocHJlcmVxcy5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goXCIqKlByZXJlcXVpc2l0ZXMqKlwiKTtcbiAgICAgIHByZXJlcXMuZm9yRWFjaChwID0+IGxpbmVzLnB1c2goYC0gJHtwfWApKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEVudHJpZXMgcmVuZGVyaW5nIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGZlYXQuZW50cmllcykgPyBmZWF0LmVudHJpZXMgOiBbZmVhdC5lbnRyaWVzXTtcbiAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5OiBhbnkpID0+IHtcbiAgICAgIGlmICghZW50cnkpIHJldHVybjtcblxuICAgICAgLy8gUGxhaW4gdGV4dFxuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZW50cnkuc3BsaXQoL1xcbnsyLH0vKS5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgIGNvbnN0IHQgPSBwLnRyaW0oKTtcbiAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgLy8gTGlzdFxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSAnbGlzdCcgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgZW50cnkuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdCl9YCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpdC50eXBlID09PSAnaXRlbScgJiYgaXQubmFtZSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAqKiR7aXQubmFtZX0qKmApO1xuICAgICAgICAgICAgY29uc3Qgc3VicyA9IEFycmF5LmlzQXJyYXkoaXQuZW50cmllcykgPyBpdC5lbnRyaWVzIDogW2l0LmVudHJpZXNdO1xuICAgICAgICAgICAgc3Vicy5mb3JFYWNoKChzOiBhbnkpID0+XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goYCAgLSAke3JlcGxhY2U1ZVRhZ3ModHlwZW9mIHMgPT09ICdzdHJpbmcnID8gcyA6IEpTT04uc3RyaW5naWZ5KHMpKX1gKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gICAgICAvLyBJbnNldCBhcyBpbmRlbnRlZCBidWxsZXRcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ2luc2V0Jykge1xuICAgICAgICBsaW5lcy5wdXNoKGAtICoke2VudHJ5Lm5hbWV9KmApO1xuICAgICAgICBjb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSA/IGVudHJ5LmVudHJpZXMgOiBbZW50cnkuZW50cmllc107XG4gICAgICAgIHN1YnMuZm9yRWFjaCgoczogYW55KSA9PiBsaW5lcy5wdXNoKGAgIC0gJHtyZXBsYWNlNWVUYWdzKHMpfWApKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgICAgLy8gU2VjdGlvbiBvciBlbnRyaWVzXG4gICAgICB9IGVsc2UgaWYgKChlbnRyeS50eXBlID09PSAnc2VjdGlvbicgfHwgZW50cnkudHlwZSA9PT0gJ2VudHJpZXMnKSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgIGlmIChlbnRyeS5uYW1lKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgIyMgJHtlbnRyeS5uYW1lfWApO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgZW50cnkuZW50cmllcy5mb3JFYWNoKChzOiBhbnkpID0+IHtcbiAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHlwZW9mIHMgPT09ICdzdHJpbmcnID8gcyA6IEpTT04uc3RyaW5naWZ5KHMpKSk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIFRhYmxlXG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09ICd0YWJsZScgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgICAgICBjb25zdCBoZHIgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZHIuam9pbignIHwgJyl9IHxgKTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hkci5tYXAoKCkgPT4gJy0tLScpLmpvaW4oJyB8ICcpfSB8YCk7XG4gICAgICAgIGVudHJ5LnJvd3MuZm9yRWFjaCgocm93OiBhbnlbXSkgPT5cbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oJyB8ICcpfSB8YClcbiAgICAgICAgKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBwYXRoOiBgUGxheWVyIEJ1aWxkL0ZlYXRzLyR7ZmVhdC5uYW1lfS5tZGAsXG4gICAgICBjb250ZW50OiBsaW5lcy5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfTtcbiAgfSk7XG59XG4iLCAiLy8gc3JjL3BhcnNlcnMvYmFja2dyb3VuZHMudHNcbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEZNX0ZJRUxEUywgZmlsdGVyVmFsaWRTa2lsbHMsIEJBQ0tHUk9VTkRfTUVUQV9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG4vKipcbiAqIFBhcnNlIGJhY2tncm91bmRzLmpzb24gaW50byBvbmUgTWFya2Rvd24gZmlsZSBwZXIgYmFja2dyb3VuZCB1bmRlciBQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMsXG4gKiBleGNsdWRpbmcgYW55IFx1MjAxQ1ZhcmlhbnRcdTIwMjZcdTIwMUQgb3IgXHUyMDFDQmFsZHVyXHUyMDE5cyBHYXRlXHUyMDI2XHUyMDFEIGVudHJpZXMuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIC8vIHB1bGwgaW4gdGhlIGFycmF5XG4gIGNvbnN0IHJhdzogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uYmFja2dyb3VuZClcbiAgICA/IGpzb24uYmFja2dyb3VuZFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmJhY2tncm91bmRzKVxuICAgID8ganNvbi5iYWNrZ3JvdW5kc1xuICAgIDogW107XG5cbiAgLy8gZmlsdGVyIG91dCB1bndhbnRlZCBlbnRyaWVzXG4gIGNvbnN0IGJhY2tncm91bmRzID0gcmF3LmZpbHRlcihiZyA9PiB7XG4gICAgY29uc3Qgbm06IHN0cmluZyA9IGJnLm5hbWUgfHwgXCJcIjtcbiAgICByZXR1cm4gIW5tLnN0YXJ0c1dpdGgoXCJWYXJpYW50XCIpICYmICFubS5pbmNsdWRlcyhcIkJhbGR1cidzIEdhdGVcIik7XG4gIH0pO1xuXG4gIGNvbnN0IG91dHB1dHM6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgYmFja2dyb3VuZHMuZm9yRWFjaChiZyA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBidWlsZCBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IGZtID0gYnVpbGRGTShiZywgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgY29sbGVjdCBvbmx5IHRoZSBlbnRyaWVzIGZsYWdnZWQgaXNGZWF0dXJlIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgZXh0cmFUcmFpdHM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShiZy5lbnRyaWVzKVxuICA/IChiZy5lbnRyaWVzIGFzIGFueVtdKVxuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiBlLmRhdGE/LmlzRmVhdHVyZSAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKVxuICAgICAgLm1hcCgoZTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBlLm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpO1xuICAgICAgICByZXR1cm4gYFtbJHtiZy5uYW1lfSMke25hbWV9XV1gO1xuICAgICAgfSlcbiAgOiBbXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIHNlcmlhbGl6ZSBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xubGluZXMucHVzaChcIi0tLVwiLCB5YW1sLCBcIi0tLVwiLCBcIlwiKTtcblxuIFxuICAgIC8vIHRpdGxlXG4gICAgbGluZXMucHVzaChgIyAke2JnLm5hbWV9YCwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgc2tpbGwgcHJvZmljaWVuY2llcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBpZiAoQXJyYXkuaXNBcnJheShiZy5za2lsbFByb2ZpY2llbmNpZXMpICYmIGJnLnNraWxsUHJvZmljaWVuY2llcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNraWxsczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGJnLnNraWxsUHJvZmljaWVuY2llcy5mb3JFYWNoKChlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIHNraWxscy5wdXNoKGNhcChlbnQpKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnQuY2hvb3NlICYmIEFycmF5LmlzQXJyYXkoZW50LmNob29zZS5mcm9tKSkge1xuICAgICAgICAgIHNraWxscy5wdXNoKGBDaG9vc2UgJHtlbnQuY2hvb3NlLmFtb3VudH0gZnJvbSAke2VudC5jaG9vc2UuZnJvbS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoWywgdl0pID0+IHYgPT09IHRydWUpXG4gICAgICAgICAgICAuZm9yRWFjaCgoW2tdKSA9PiBza2lsbHMucHVzaChjYXAoaykpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlNraWxsIFByb2ZpY2llbmNpZXM6KiogJHtza2lsbHMuam9pbihcIiwgXCIpfWAsIFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBsYW5ndWFnZSBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLmxhbmd1YWdlUHJvZmljaWVuY2llcykgJiYgYmcubGFuZ3VhZ2VQcm9maWNpZW5jaWVzLmxlbmd0aCkge1xuICAgICAgY29uc3QgbGFuZ3M6IHN0cmluZ1tdID0gW107XG4gICAgICBiZy5sYW5ndWFnZVByb2ZpY2llbmNpZXMuZm9yRWFjaCgoZW50OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKGVudC5hbnlTdGFuZGFyZCkge1xuICAgICAgICAgIGxhbmdzLnB1c2goYCR7ZW50LmFueVN0YW5kYXJkfSBvZiB5b3VyIGNob2ljZWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFssIHZdKSA9PiB2ID09PSB0cnVlKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrXSkgPT4gbGFuZ3MucHVzaChjYXAoaykpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKGAqKkxhbmd1YWdlczoqKiAke2xhbmdzLmpvaW4oXCIsIFwiKX1gLCBcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgdG9vbCBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShiZy50b29sUHJvZmljaWVuY2llcykgJiYgYmcudG9vbFByb2ZpY2llbmNpZXMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHRvb2xzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgICAgIGJnLnRvb2xQcm9maWNpZW5jaWVzLmZvckVhY2goKGVudDogYW55KSA9PiB7XG4gICAgICAgICAgICAvLyBcdTIwMUNDaG9vc2UgWCBmcm9tIFx1MjAyNlx1MjAxRFxuICAgICAgICAgICAgaWYgKGVudC5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShlbnQuY2hvb3NlLmZyb20pKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gZW50LmNob29zZS5mcm9tLm1hcChodW1hbml6ZSkuam9pbihcIiwgXCIpO1xuICAgICAgICAgICAgdG9vbHMucHVzaChgQ2hvb3NlICR7ZW50LmNob29zZS5jb3VudH0gZnJvbSAke2xpc3R9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHBsYWluIHN0cmluZyAocmFyZSBoZXJlLCBidXQganVzdCBpbiBjYXNlKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRvb2xzLnB1c2goaHVtYW5pemUoZW50KSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG9iamVjdCB3aXRoIGJvb2xlYW4gZmxhZ3M6IGdhdGhlciAqYWxsKiB0cnVlIGtleXNcbiAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGVudClcbiAgICAgICAgICAgIC5maWx0ZXIoKFtfLCB2XSkgPT4gdiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChba10pID0+IHRvb2xzLnB1c2goaHVtYW5pemUoaykpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGluZXMucHVzaChgKipUb29sIFByb2ZpY2llbmNpZXM6KiogJHt0b29scy5qb2luKFwiLCBcIil9YCwgXCJcIik7XG4gICAgICAgIH1cblxuXG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgc3RhcnRpbmcgZXF1aXBtZW50IFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnN0YXJ0aW5nRXF1aXBtZW50KSAmJiBiZy5zdGFydGluZ0VxdWlwbWVudC5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqRXF1aXBtZW50OioqYCk7XG4gICAgICBiZy5zdGFydGluZ0VxdWlwbWVudC5mb3JFYWNoKChncnA6IGFueSkgPT4ge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncnAuXykpIHtcbiAgICAgICAgICBncnAuXy5mb3JFYWNoKChpdDogYW55KSA9PiBsaW5lcy5wdXNoKGAtICR7Zm10SXRlbShpdCl9YCkpO1xuICAgICAgICB9XG4gICAgICAgIFtcImFcIiwgXCJiXCJdLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShncnBba2V5XSkpIHtcbiAgICAgICAgICAgIGdycFtrZXldLmZvckVhY2goaXQgPT4gbGluZXMucHVzaChgLSAke2ZtdEl0ZW0oaXQpfWApKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBhbGwgZmVhdHVyZSAmIGVudHJpZXMgYmxvY2tzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLmVudHJpZXMpKSB7XG4gICAgICBiZy5lbnRyaWVzLmZvckVhY2goKGVudHJ5OiBhbnkpID0+IHtcbiAgICAgICAgLy8gc2tpcCB0aGUgc3VtbWFyeSBsaXN0IGJsb2NrXG4gICAgICAgIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBlbnRyeS5zdHlsZSA9PT0gXCJsaXN0LWhhbmctbm90aXRsZVwiKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNlY3Rpb24gaGVhZGVyXG4gICAgICAgIGlmIChlbnRyeS5uYW1lKSB7XG5jb25zdCBoZWFkZXIgPSBlbnRyeS5kYXRhPy5pc0ZlYXR1cmVcbiAgPyBlbnRyeS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKVxuICA6IGVudHJ5Lm5hbWU7XG5saW5lcy5wdXNoKGAjIyAke2hlYWRlcn1gLCBcIlwiKTsgICAgICAgIH1cbiAgICAgICAgLy8gZW50cnkgY29udGVudFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICAgIGVudHJ5LmVudHJpZXMuZm9yRWFjaCgoZTogYW55KSA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKGUpLCBcIlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGUuaXRlbXMpKSB7XG4gICAgICAgICAgICAgIGUuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT5cbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdC5lbnRyeSA/PyBpdCl9YClcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSBcInRhYmxlXCIpIHtcbiAgICAgICAgICAgICAgY29uc3QgdGJsID0gcmVuZGVyTWFya2Rvd25UYWJsZShlKTtcbiAgICAgICAgICAgICAgaWYgKHRibCkgbGluZXMucHVzaCh0YmwsIFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgICAgZW50cnkuaXRlbXMuZm9yRWFjaCgoaXQ6IGFueSkgPT5cbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0LmVudHJ5ID8/IGl0KX1gKVxuICAgICAgICAgICk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgb3V0cHV0cy5wdXNoKHtcbiAgICAgIHBhdGg6IGBQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMvJHtiZy5uYW1lfS5tZGAsXG4gICAgICBjb250ZW50OiBsaW5lcy5qb2luKFwiXFxuXCIpLnRyaW1FbmQoKSArIFwiXFxuXCIsXG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiBvdXRwdXRzO1xufVxuXG4vLyBcdTIwMTRcdTIwMTRcdTIwMTQgaGVscGVycyBcdTIwMTRcdTIwMTRcdTIwMTRcbmZ1bmN0aW9uIGNhcChzdHI6IHN0cmluZykge1xuICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xufVxuXG5cbmZ1bmN0aW9uIGZtdEl0ZW0oaXRlbTogYW55KTogc3RyaW5nIHtcbiAgLy8gMSkgcmF3IHN0cmluZyBvciB0YWdnZWQgaXRlbVxuICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHtcbiAgICBpZiAoaXRlbS5pbmNsdWRlcyhcInxcIikpIHtcbiAgICAgIHJldHVybiByZXBsYWNlNWVUYWdzKGB7QGl0ZW0gJHtpdGVtfX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoaXRlbSk7XG4gIH1cblxuICAvLyAyKSBwdXJlIGdvbGQtcGllY2UgZW50cnk6IHsgdmFsdWU6IDEwIH0gb3IgeyBjb250YWluc1ZhbHVlOiAxNTAwIH1cbiAgY29uc3QgcHJpY2VSYXcgPSAoaXRlbS5jb250YWluc1ZhbHVlID8/IGl0ZW0udmFsdWUpIGFzIG51bWJlciB8IHVuZGVmaW5lZDtcbiAgaWYgKFxuICAgIHR5cGVvZiBwcmljZVJhdyA9PT0gXCJudW1iZXJcIiAmJlxuICAgIC8vIG1ha2Ugc3VyZSBpdFx1MjAxOXMgbm90IGFsc28gYW4gXHUyMDFDaXRlbVx1MjAxRCBvciBcdTIwMUNlcXVpcG1lbnRUeXBlXHUyMDFEXG4gICAgIWl0ZW0uaXRlbSAmJlxuICAgICFpdGVtLmVxdWlwbWVudFR5cGUgJiZcbiAgICAhaXRlbS5zcGVjaWFsXG4gICkge1xuICAgIGNvbnN0IGdwID0gcHJpY2VSYXcgPj0gMTAwID8gcHJpY2VSYXcgLyAxMDAgOiBwcmljZVJhdztcbiAgICByZXR1cm4gYCR7Z3B9IGdwYDtcbiAgfVxuXG4gIC8vIDMpIGV4cGxpY2l0IGl0ZW0gb2JqZWN0IHdpdGggb3B0aW9uYWwgcHJpY2VcbiAgaWYgKGl0ZW0uaXRlbSkge1xuICAgIGNvbnN0IGxpbmsgPSByZXBsYWNlNWVUYWdzKGB7QGl0ZW0gJHtpdGVtLml0ZW19fWApO1xuICAgIGlmICh0eXBlb2YgcHJpY2VSYXcgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIGNvbnN0IGdwID0gcHJpY2VSYXcgPj0gMTAwID8gcHJpY2VSYXcgLyAxMDAgOiBwcmljZVJhdztcbiAgICAgIHJldHVybiBgJHtsaW5rfSAoJHtncH0gZ3ApYDtcbiAgICB9XG4gICAgcmV0dXJuIGxpbms7XG4gIH1cblxuICAvLyA0KSBzcGVjaWFsLWNhc2UgdGV4dFxuICBpZiAodHlwZW9mIGl0ZW0uc3BlY2lhbCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJldHVybiBpdGVtLnNwZWNpYWw7XG4gIH1cblxuICAvLyA1KSBrbm93biBlcXVpcG1lbnRUeXBlIGtleXNcbiAgaWYgKGl0ZW0uZXF1aXBtZW50VHlwZSkge1xuICAgIHN3aXRjaCAoaXRlbS5lcXVpcG1lbnRUeXBlKSB7XG4gICAgICBjYXNlIFwidG9vbEFydGlzYW5cIjpcbiAgICAgICAgcmV0dXJuIFwiT25lIHR5cGUgb2YgYXJ0aXNhblx1MjAxOXMgdG9vbHMgKG9mIHlvdXIgY2hvaWNlKVwiO1xuICAgICAgY2FzZSBcImluc3RydW1lbnRNdXNpY2FsXCI6XG4gICAgICAgIHJldHVybiBcIk9uZSB0eXBlIG9mIG11c2ljYWwgaW5zdHJ1bWVudCAob2YgeW91ciBjaG9pY2UpXCI7XG4gICAgICBjYXNlIFwic2V0R2FtaW5nXCI6XG4gICAgICAgIHJldHVybiBcIk9uZSBzZXQgb2YgZ2FtaW5nIGRpY2UgKG9mIHlvdXIgY2hvaWNlKVwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGh1bWFuaXplKGl0ZW0uZXF1aXBtZW50VHlwZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gNikgZmFsbGJhY2s6IGR1bXAgYW55IGxlZnRvdmVyIHRhZyBzeW50YXhcbiAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoSlNPTi5zdHJpbmdpZnkoaXRlbSkpO1xufVxuXG5cblxuZnVuY3Rpb24gaHVtYW5pemUoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBzcGFjZWQgPSBzdHIucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMSAkMlwiKTtcbiAgcmV0dXJuIHNwYWNlZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHNwYWNlZC5zbGljZSgxKTtcbn1cbiIsICIvLzVlIDIwMjUgaW5zdGFsbGVyXG5cbmltcG9ydCB7IEFwcCwgbm9ybWFsaXplUGF0aCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHR5cGUgeyBFZGl0aW9uIH0gZnJvbSBcIi4uLy4uL2VkaXRpb25zXCI7XG5pbXBvcnQgeyBwYXJzZVNwZWxsc0ZpbGUgfSBmcm9tIFwiLi9zcGVsbHNcIjtcbmltcG9ydCB7IHBhcnNlQmVzdGlhcnlGaWxlIH0gZnJvbSBcIi4vYmVzdGlhcnlcIjtcbmltcG9ydCB7IHBhcnNlSXRlbXNGaWxlIH0gZnJvbSBcIi4vaXRlbXNcIjtcbmltcG9ydCB7IHBhcnNlU3BlY2llc0ZpbGUgfSBmcm9tIFwiLi9zcGVjaWVzXCI7XG5pbXBvcnQgeyBwYXJzZUNsYXNzRmlsZSB9IGZyb20gXCIuL2NsYXNzZXNcIjtcbmltcG9ydCB7IHBhcnNlQWN0aW9uc0ZpbGUsIHBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZSwgcGFyc2VTZW5zZXNGaWxlLCBwYXJzZVNraWxsc0ZpbGUgfSBmcm9tIFwiLi9ydWxlc1wiO1xuaW1wb3J0IHsgcGFyc2VGZWF0c0ZpbGUgfSBmcm9tIFwiLi9mZWF0c1wiO1xuaW1wb3J0IHsgcGFyc2VCYWNrZ3JvdW5kc0ZpbGUgfSBmcm9tIFwiLi9iYWNrZ3JvdW5kc1wiO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuXG4vLyBcdTIwMTQgR2l0SHViIGxpc3RpbmdzIFx1MjAxNFxuYXN5bmMgZnVuY3Rpb24gbGlzdFNwZWxsRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL3NwZWxsc2A7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgcmV0dXJuIGRhdGFcbiAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSBcImZpbGVcIiAmJiBpdGVtLm5hbWUuc3RhcnRzV2l0aChcInNwZWxscy1cIikgJiYgaXRlbS5uYW1lLmVuZHNXaXRoKFwiLmpzb25cIikpXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RCZXN0aWFyeUZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YS9iZXN0aWFyeWA7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGxpc3QgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgY29uc3QgQ09SRV9TT1VSQ0VTID0gW1xuICAgIFwiYmVzdGlhcnktcGhiLmpzb25cIiwgXCJiZXN0aWFyeS1tbS5qc29uXCIsIFwiYmVzdGlhcnktZG1nLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXhnZS5qc29uXCIsIFwiYmVzdGlhcnktdmdtLmpzb25cIiwgXCJiZXN0aWFyeS10Y2UuanNvblwiLFxuICAgIFwiYmVzdGlhcnktZWd3Lmpzb25cIiwgXCJiZXN0aWFyeS1lcmx3Lmpzb25cIiwgXCJiZXN0aWFyeS1tdGYuanNvblwiLFxuICAgIFwiYmVzdGlhcnktdnJnci5qc29uXCIsIFwiYmVzdGlhcnktY29zLmpzb25cIiwgXCJiZXN0aWFyeS1vb3RhLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXBvdGEuanNvblwiLCBcImJlc3RpYXJ5LWhvdGRxLmpzb25cIiwgXCJiZXN0aWFyeS1yb3QuanNvblwiLFxuICAgIFwiYmVzdGlhcnktc2t0Lmpzb25cIiwgXCJiZXN0aWFyeS10ZnR5cC5qc29uXCIsIFwiYmVzdGlhcnktdG9hLmpzb25cIlxuICBdO1xuICByZXR1cm4gbGlzdFxuICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09IFwiZmlsZVwiICYmIENPUkVfU09VUkNFUy5pbmNsdWRlcyhpdGVtLm5hbWUpKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG5jb25zdCBJVEVNX0pTT05fRklMRVMgPSBbXG4gIFwiaXRlbXMtYmFzZS5qc29uXCIsXG4gIFwiaXRlbXMuanNvblwiLFxuICBcIm9iamVjdHMuanNvblwiLFxuICBcInZlaGljbGVzLmpzb25cIixcbiAgXCJkZWNrcy5qc29uXCIsXG5dO1xuXG5hc3luYyBmdW5jdGlvbiBsaXN0SXRlbUZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YWA7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGRhdGEgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgcmV0dXJuIGRhdGFcbiAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSBcImZpbGVcIiAmJiBJVEVNX0pTT05fRklMRVMuaW5jbHVkZXMoaXRlbS5uYW1lKSlcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbGlzdENsYXNzRmlsZXNGcm9tR2l0SHViKHJlcG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvJHtyZXBvfS9jb250ZW50cy9kYXRhL2NsYXNzYDtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgY29uc3QgbGlzdGluZyA9IChhd2FpdCByZXMuanNvbigpKSBhcyBBcnJheTx7IG5hbWU6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+O1xuICByZXR1cm4gbGlzdGluZ1xuICAgIC5maWx0ZXIoaXRlbSA9PlxuICAgICAgaXRlbS50eXBlID09PSBcImZpbGVcIiAmJlxuICAgICAgaXRlbS5uYW1lLnN0YXJ0c1dpdGgoXCJjbGFzcy1cIikgJiZcbiAgICAgIGl0ZW0ubmFtZS5lbmRzV2l0aChcIi5qc29uXCIpXG4gICAgKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG4vLyBcdTIwMTQgZW5zdXJlIHRoZSB2YXVsdCBmb2xkZXIgZXhpc3RzIFx1MjAxNFxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRm9sZGVyKGFwcDogQXBwLCBmb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgY29uc3QgcGFydHMgPSBmb2xkZXJQYXRoLnNwbGl0KFwiL1wiKTtcbiAgbGV0IGN1cnIgPSBcIlwiO1xuICBmb3IgKGNvbnN0IHAgb2YgcGFydHMpIHtcbiAgICBjdXJyID0gY3VyciA/IGAke2N1cnJ9LyR7cH1gIDogcDtcbiAgICB0cnkgeyBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGN1cnIpOyB9XG4gICAgY2F0Y2gge30gLy8gYWxyZWFkeSBleGlzdHNcbiAgfVxufVxuXG4vLyBcdTIwMTQgdGhlIG9uZSBlbnRyeS1wb2ludCB0aGF0IHlvdXIgdG9wLWxldmVsIGNhbGxzIFx1MjAxNFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGltcG9ydEVkaXRpb25EYXRhKHBhcmFtczoge1xuICBhcHA6IEFwcDtcbiAgZWRpdGlvbjogRWRpdGlvbjtcbiAgdGFyZ2V0UGF0aDogc3RyaW5nO1xufSkge1xuICBjb25zdCB7IGFwcCwgZWRpdGlvbiwgdGFyZ2V0UGF0aCB9ID0gcGFyYW1zO1xuICBjb25zdCByZXBvID0gZWRpdGlvbi5yZXBvID8/IFwiXCI7XG5cbiAgLy8gXHVEODNEXHVERDM5IFNQRUxMU1xuICB7XG4gICAgY29uc3Qgc3BlbGxGaWxlcyA9IGF3YWl0IGxpc3RTcGVsbEZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgICBmb3IgKGNvbnN0IGZpbGVOYW1lIG9mIHNwZWxsRmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc3BlbGxzLyR7ZmlsZU5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBjb25zdCBmaWxlcyA9IHBhcnNlU3BlbGxzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgICAgZm9yIChjb25zdCBtZCBvZiBmaWxlcykge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9TcGVsbHMvJHttZC5wYXRofWApO1xuICAgICAgICAgIGNvbnN0IGZvbGRlciAgID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcbiAgICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgc3BlbGwgJHtmaWxlTmFtZX06YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gXHVEODNEXHVERDM5IEJFU1RJQVJZXG4gIHtcbiAgICBjb25zdCBiZXN0aWFyeUZpbGVzID0gYXdhaXQgbGlzdEJlc3RpYXJ5RmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZmlsZU5hbWUgb2YgYmVzdGlhcnlGaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzICAgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2Jlc3RpYXJ5LyR7ZmlsZU5hbWV9YCk7XG4gICAgICAgIGNvbnN0IGpzb24gICA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlQmVzdGlhcnlGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgICBmb3IgKGNvbnN0IG1kIG9mIHBhcnNlZCkge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9CZXN0aWFyeS8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBiZXN0aWFyeSAke2ZpbGVOYW1lfTpgLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBcdUQ4M0RcdUREMzkgSVRFTVNcbiAge1xuICAgIGNvbnN0IGl0ZW1GaWxlcyA9IGF3YWl0IGxpc3RJdGVtRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICAgIGZvciAoY29uc3QgZm4gb2YgaXRlbUZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9LyR7Zm59YCk7XG4gICAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VJdGVtc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YCk7XG4gICAgICAgICAgY29uc3QgZm9sZGVyICAgPSBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGltcG9ydCBpdGVtcyBmcm9tICR7Zm59OmAsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuLy8gXHVEODNEXHVERDM5IFNQRUNJRVNcbntcbiAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9yYWNlcy5qc29uYCk7XG4gIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICBjb25zdCBtZEZpbGVzID0gcGFyc2VTcGVjaWVzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgZm9yIChjb25zdCBtZCBvZiBtZEZpbGVzKSB7XG4gICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1BsYXllciBCdWlsZC8ke21kLnBhdGh9YCk7XG4gICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKSk7XG4gICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICB9XG4vLyBcdUQ4M0RcdUREMzkgRkVUQ0ggT1BUSU9OQUwgRkVBVFVSRVMgSlNPTlxubGV0IG9wdGlvbmFsRmVhdHVyZXM6IGFueVtdID0gW107XG50cnkge1xuICBjb25zdCB1cmwgID0gYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L29wdGlvbmFsZmVhdHVyZXMuanNvbmA7XG4gIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTtcblxuICAvLyBzdHJpcCBhbnkgSlNPTi1oaWphY2sgcHJlZml4IChlLmcuICldfScsKSBhbmQgYW55IEJPTS93aGl0ZXNwYWNlXG4gIGNvbnN0IHN0YXJ0ID0gdGV4dC5pbmRleE9mKFwie1wiKTtcbiAgaWYgKHN0YXJ0ID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKFwiTm8gSlNPTiBvYmplY3QgZm91bmRcIik7XG4gIGNvbnN0IGNsZWFuSnNvbiA9IHRleHQuc2xpY2Uoc3RhcnQpO1xuXG4gIGNvbnN0IHJhdyA9IEpTT04ucGFyc2UoY2xlYW5Kc29uKTtcbiAgb3B0aW9uYWxGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkocmF3Lm9wdGlvbmFsZmVhdHVyZSlcbiAgICA/IHJhdy5vcHRpb25hbGZlYXR1cmVcbiAgICA6IFtdO1xufSBjYXRjaCAoZSkge1xuICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IG9wdGlvbmFsZmVhdHVyZXMuanNvbjpcIiwgZSk7XG59XG4vLyBcdUQ4M0RcdUREMzkgQ0xBU1NFU1xue1xuICBjb25zdCBjbGFzc0ZpbGVzID0gYXdhaXQgbGlzdENsYXNzRmlsZXNGcm9tR2l0SHViKHJlcG8pO1xuICBmb3IgKGNvbnN0IGZpbGVOYW1lIG9mIGNsYXNzRmlsZXMpIHtcbiAgICB0cnkge1xuICAgICAgLy8gZmV0Y2ggdGhlIHJhdyBjbGFzcyBKU09OXG4gICAgICBjb25zdCByZXMgICAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vY2xhc3MvJHtmaWxlTmFtZX1gKTtcbiAgICAgIGNvbnN0IGpzb24gICA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICAgIC8vIHBhcnNlIGludG8gb25lIG9yIG1vcmUgbWFya2Rvd24gZmlsZXNcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUNsYXNzRmlsZShcbiAgICAgICAganNvbixcbiAgICAgICAgZWRpdGlvbi5pZCxcbiAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgIG9wdGlvbmFsRmVhdHVyZXNcbiAgICAgICk7XG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1BsYXllciBCdWlsZC8ke21kLnBhdGh9YCk7XG4gICAgICAgIC8vIDEpIGVuc3VyZSB0aGUgZm9sZGVyIGV4aXN0c1xuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpKTtcblxuICAgICAgICAvLyAyKSB3cml0ZSB2aWEgT2JzaWRpYW5cdTIwMTlzIEFQSSBzbyBub3RlcyByZWZyZXNoXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmdWxsUGF0aCk7XG4gICAgICAgIGlmIChleGlzdGluZyBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgLy8gT3ZlcndyaXRlIGFuIGV4aXN0aW5nIG5vdGUgYW5kIGZpcmUgdGhlIGNoYW5nZSBldmVudFxuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5tb2RpZnkoZXhpc3RpbmcsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIENyZWF0ZSBhIGJyYW5kLW5ldyBub3RlIChhbHNvIGZpcmVzIHRoZSBjaGFuZ2UgZXZlbnQpXG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgY2xhc3MgJHtmaWxlTmFtZX06YCwgZSk7XG4gICAgfVxuICB9XG59XG5cblxuIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogQUNUSU9OU1xuICB7XG4gICAgdHJ5IHtcblxuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9hY3Rpb25zLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQWN0aW9uc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgYWN0aW9ucy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuXG4gICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBDT05ESVRJT05TICYgRElTRUFTRVNcbiAge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2NvbmRpdGlvbnNkaXNlYXNlcy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGNvbmRpdGlvbnNkaXNlYXNlcy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBTRU5TRVNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc2Vuc2VzLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlU2Vuc2VzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBzZW5zZXMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBTS0lMTFNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc2tpbGxzLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlU2tpbGxzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBza2lsbHMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgIC8vIFx1RDgzRFx1REQzOSBGRUFUU1xuICB7XG4gICAgdHJ5IHtcblxuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9mZWF0cy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUZlYXRzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBmZWF0cy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuLy8gXHVEODNEXHVERDM5IEJBQ0tHUk9VTkRTXG57XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9iYWNrZ3JvdW5kcy5qc29uYCk7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VCYWNrZ3JvdW5kc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG5cbiAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgIC8vIG1kLnBhdGggaXMgXCJQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMvPE5hbWU+Lm1kXCJcbiAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YCk7XG4gICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBiYWNrZ3JvdW5kcy5qc29uOlwiLCBlKTtcbiAgfVxufVxufVxufSIsICIvLyBoZWxwZXJzL3NvdXJjZU1hcC50c1xuXG4vLyBNYXAgb2YgNWUgc291cmNlIGFiYnJldmlhdGlvbnMgdG8gdGhlaXIgZnVsbCB0aXRsZXNcbmNvbnN0IFNPVVJDRV9OQU1FX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgLy8gQ29yZSBydWxlYm9va3NcbiAgUEhCOiBcIlBsYXllcidzIEhhbmRib29rXCIsXG4gIE1NOiAgXCJNb25zdGVyIE1hbnVhbFwiLFxuICBETUc6IFwiRHVuZ2VvbiBNYXN0ZXIncyBHdWlkZVwiLFxuXG4gIC8vIE9mZmljaWFsIGV4cGFuc2lvbnMgJiBhZHZlbnR1cmUgbW9kdWxlc1xuICBDb1M6ICBcIkN1cnNlIG9mIFN0cmFoZFwiLFxuICBPb3RBOiBcIk91dCBvZiB0aGUgQWJ5c3NcIixcbiAgUG90QTogXCJQcmluY2VzIG9mIHRoZSBBcG9jYWx5cHNlXCIsXG4gIEhvdERROiBcIkhvYXJkIG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgUm9UOiAgXCJSaXNlIG9mIFRpYW1hdFwiLFxuICBTS1Q6ICBcIlN0b3JtIEtpbmcncyBUaHVuZGVyXCIsXG4gIFRmdFlQOlwiVGFsZXMgZnJvbSB0aGUgWWF3bmluZyBQb3J0YWxcIixcbiAgVG9BOiAgXCJUb21iIG9mIEFubmloaWxhdGlvblwiLFxuXG4gIC8vIFN1cHBsZW1lbnRhbCBndWlkZXNcbiAgWEdFOiBcIlhhbmF0aGFyJ3MgR3VpZGUgdG8gRXZlcnl0aGluZ1wiLFxuICBWR006IFwiVm9sbydzIEd1aWRlIHRvIE1vbnN0ZXJzXCIsXG4gIFRDRTogXCJUYXNoYSdzIENhdWxkcm9uIG9mIEV2ZXJ5dGhpbmdcIixcbiAgRUdXOiBcIkViZXJyb246IFJpc2luZyBmcm9tIHRoZSBMYXN0IFdhclwiLFxuICBFUkxXOlwiRXhwbG9yZXIncyBHdWlkZSB0byBXaWxkZW1vdW50XCIsXG4gIE1URjogXCJNb25zdGVycyBvZiB0aGUgTXVsdGl2ZXJzZVwiLFxuICBWUkdSOlwiVmFuIFJpY2h0ZW4ncyBHdWlkZSB0byBSYXZlbmxvZnRcIixcblxuICAvLyBBZGRpdGlvbmFsIHNvdXJjZWJvb2tzXG4gIEFBRzogICAgICBcIkFzdHJhbCBBZHZlbnR1cmVyXHUyMDE5cyBHdWlkZVwiLFxuICBBSTogICAgICAgXCJBY3F1aXNpdGlvbnMgSW5jb3Jwb3JhdGVkXCIsXG4gIEFpdEZSQVZGVDpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmlzdWFsIEZpZWxkIFRlc3RcIixcbiAgQk1UOiAgICAgIFwiQmlnIE1vbnN0ZXIgVG9tZVwiLFxuICBEb0RrOiAgICAgXCJEcmFnb24gb2YgRGFya2tlZXBcIixcbiAgRlREOiAgICAgIFwiRml6YmFuXHUyMDE5cyBUcmVhc3VyeSBvZiBEcmFnb25zXCIsXG4gIEdHUjogICAgICBcIkd1aWxkbWFzdGVyXHUyMDE5cyBHdWlkZSB0byBSYXZuaWNhXCIsXG4gIEdITG9FOiAgICBcIkdob3N0cyBvZiB0aGUgSG9yaXpvbjogTGlnaHQgT3ZlciBFbGVuc2FyaWFcIixcbiAgSURSb3RGOiAgIFwiSWNld2luZCBEYWxlOiBSaW1lIG9mIHRoZSBGcm9zdG1haWRlblwiLFxuICBMTEs6ICAgICAgXCJMb3N0IExhYm9yYXRvcnkgb2YgS3dhbGlzaFwiLFxuICBTYXRPOiAgICAgXCJTYXBwaGlyZSBvZiBUcnV0aFwiLFxuICBTQ0M6ICAgICAgXCJTdHJpeGhhdmVuOiBDdXJyaWN1bHVtIG9mIENoYW9zXCIsXG4gIFREQ1NSOiAgICBcIlRoZSBEdW5nZW9uIENvYWNoXHUyMDE5cyBSdWxlYm9va1wiLFxuICBKdHRSQzogICAgXCJKb3VybmV5cyB0aHJvdWdoIHRoZSBSYWRpYW50IENpdGFkZWxcIixcbiAgXCJBaXRGUi1BVlRcIjpcIkFkdmVudHVyZXMgaW4gdGhlIEZvcmdvdHRlbiBSZWFsbXM6IEEgVmVyZGFudCBUb21iXCIsXG4gIFwiQWl0RlItRkNEXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBGcm9tIEN5YW4gRGVwdGhzXCIsXG4gIFJNUjogICAgICBcIkR1bmdlb25zIGFuZCBEcmFnb25zOiBSaWNrIGFuZCBNb3J0eVwiLFxuICBTQ0FHOiAgICAgXCJTd29yZCBDb2FzdCBBZHZlbnR1cmVyJ3MgR3VpZGVcIixcbiAgRUVQQzogICAgIFwiRWxlbWVudGFsIEV2aWwgUGxheWVyJ3MgQ29tcGFuaW9uXCIsXG4gIE1PVDogICAgICBcIk15dGhpYyBPZHlzc2V5cyBvZiBUaGVyb3NcIixcbiAgV0J0VzogICAgIFwiVGhlIFdpbGQgQmV5b25kIHRoZSBXaXRjaGxpZ2h0XCIsXG4gIEJHRElBOiAgICBcIkJhbGR1cidzIEdhdGU6IERlc2NlbnQgSW50byBBdmVybnVzXCIsXG4gIFRvRlc6ICAgICBcIlR1cm4gb2YgRm9ydHVuZSdzIFdoZWVsXCIsXG4gIENvQTogICAgICBcIkNoYWlucyBvZiBBc21vZGV1c1wiLFxuICBDUkNvdE46ICAgXCJDcml0aWNhbCBSb2xlOiBDYWxsIG9mIHRoZSBOZXRoZXJkZWVwXCIsXG4gIFRvRDogICAgICBcIlR5cmFubnkgb2YgRHJhZ29uc1wiLFxuICBNUE1NOiAgICAgXCJNb3JkZW5rYWluZW4gUHJlc2VudHM6IE1vbnN0ZXJzIG9mIHRoZSBNdWx0aXZlcnNlXCIsXG4gIExvWDogICAgICBcIkxpZ2h0IG9mIFhhcnl4aXNcIixcbiAgUWZ0SVM6ICAgIFwiUXVlc3RzIGZyb20gdGhlIEluZmluaXRlIFN0YWlyY2FzZVwiLFxuICBXREg6ICAgICAgXCJXYXRlcmRlZXA6IERyYWdvbiBIZWlzdFwiLFxuICBXRE1NOiAgICAgXCJXYXRlcmRlZXA6IER1bmdlb24gb2YgdGhlIE1hZCBNYWdlXCIsXG4gIFBhQlRTTzogICBcIlBoYW5kZWx2ZXIgYW5kIEJlbG93OiBUaGUgU2hhdHRlcmVkIE9iZWxpc2tcIixcbiAgQ006ICAgICAgIFwiQ2FuZGxla2VlcCBNeXN0ZXJpZXNcIixcbiAgR29TOiAgICAgIFwiR2hvc3RzIG9mIFNhbHRtYXJzaFwiLFxuICBEU290RFE6ICAgXCJEcmFnb25sYW5jZTogU2hhZG93IG9mIHRoZSBEcmFnb24gUXVlZW5cIixcbiAgS2Z0R1Y6ICAgIFwiS2V5cyBmcm9tIHRoZSBHb2xkZW4gVmF1bHRcIixcbiAgU0RXOiAgICAgIFwiRXNzZW50aWFscyBLaXQ6IFNsZWVwaW5nIERyYWdvbidzIFdha2VcIixcbiAgRG9TSTogICAgIFwiRHJhZ29ucyBvZiBTdG9ybXdyZWNrIElzbGVcIixcbiAgR290U0Y6ICAgIFwiR2lhbnRzIG9mIHRoZSBTdGFyIEZvcmdlXCIsXG4gIERJUDogICAgICBcIkVzc2VudGlhbHMgS2l0OiBEcmFnb24gb2YgSWNlc3BpcmUgUGVha1wiLFxuICBTTFc6ICAgICAgXCJFc3NlbnRpYWxzIEtpdDogU3Rvcm0gTG9yZCdzIFdyYXRoXCIsXG4gIElNUjogICAgICBcIkluZmVybmFsIE1hY2hpbmUgUmVidWlsZFwiLFxuICBWRW9SOiAgICAgXCJWZWNuYTogRXZlIG9mIFJ1aW5cIixcbiAgUFNJOiAgICAgIFwiUGxhbmUgU2hpZnQ6IElubmlzdHJhZFwiLFxuICBBQVRNOiAgICAgXCJBZHZlbnR1cmUgQXRsYXM6IFRoZSBNb3J0dWFyeVwiLFxuICBQU1o6ICAgICAgXCJQbGFuZSBTaGlmdDogWmVuZGlrYXJcIixcbiAgREM6ICAgICAgIFwiRXNzZW50aWFscyBLaXQ6IERpdmluZSBDb250ZW50aW9uXCIsXG4gIExNb1A6ICAgICBcIkxvc3QgTWluZSBvZiBQaGFuZGVsdmVyXCIsXG4gIFJNQlJFOiAgICBcIlRoZSBMb3N0IER1bmdlb24gb2YgUmlja2VkbmVzczogQmlnIFJpY2sgRW5lcmd5XCIsXG4gIEhmdFQ6ICAgICBcIkh1bnQgZm9yIHRoZSBUaGVzc2FsaHlkcmFcIixcbiAgUFNYOiAgICAgIFwiUGxhbmUgU2hpZnQ6IEl4YWxhblwiLFxuICBIRlN0Q006ICAgXCJIZXJvZXMnIEZlYXN0OiBTYXZpbmcgdGhlIENoaWxkcmVucyBNZW51XCIsXG4gIFNqQTogICAgICBcIlNwZWxsamFtbWVyIEFjYWRlbXlcIixcbiAgTEs6ICAgICAgIFwiTGlnaHRuaW5nIEtlZXBcIixcbiAgUnRHOiAgICAgIFwiUmV0dXJuIHRvIHRoZSBHbG9yeVwiLFxuICBUVFA6ICAgICAgXCJUaGUgVG9ydGxlIFBhY2thZ2VcIixcbiAgTFI6ICAgICAgIFwiTG9jYXRoYWggUmlzaW5nXCIsXG4gIFBTQTogICAgICBcIlBsYW5lIFNoaWZ0OiBBbW9ua2hldFwiLFxuICBPR0E6ICAgICAgXCJPbmUgR3J1bmcgQWJvdmVcIixcbiAgXCJOUkgtVExUXCI6ICBcIk5lcmRzIFJlc3RvcmluZyBIYXJtb255OiBUaGUgTG9zdCBUb21iXCIsXG4gIFwiTlJILUFUXCI6ICAgXCJOZXJkcyBSZXN0b3JpbmcgSGFybW9ueTogQWR2ZW50dXJlIFRvZ2V0aGVyXCIsXG4gIEJHRzogICAgICBcIkJpZ2J5IFByZXNlbnRzOiBHbG9yeSBvZiB0aGUgR2lhbnRzXCIsXG4gIFJvVE9TOiAgICBcIlRoZSBSaXNlIG9mIFRpYW1hdCBPbmxpbmUgU3VwcGxlbWVudFwiLFxuICBYTXRTOiAgICAgXCJYIE1hcmtzIHRoZSBTcG90XCIsXG4gIFwiSEFULUxNSVwiOiAgXCJIb25vciBBbW9uZyBUaGVpdmVzOiBMZWdlbmRhcnkgTWFnaWMgSXRlbXNcIixcbiAgRGl0TENvVDogIFwiRGVzY2VudCBpbnRvIHRoZSBMb3N0IENhdmVybnMgb2YgVHNvamNhbnRoXCIsXG4gIFwiQWl0RlItRE5cIjogXCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBEZWVwZXN0IE5pZ2h0XCIsXG4gIFwiQWl0RlItVEhQXCI6XCJBZHZlbnR1cmVzIGluIHRoZSBGb3Jnb3R0ZW4gUmVhbG1zOiBUaGUgSGlkZGVuIFBhZ2VzXCIsXG4gIEJBTTogICAgICBcIkJvbydzIEFzdHJhbCBNZW5hZ2VyaWVcIixcbiAgQVpmeVQ6ICAgIFwiQSBaaWIgZm9yIFlvdXIgVGhvdWd0c1wiLFxuICBNQ1YyREM6ICAgXCJNb25zdHJvdXMgQ29tcGVuZGl1bSBWb2x1bWUgMjogRHJhZ29ubGFuY2UgQ3JlYXR1cmVzXCIsXG4gIFBTSzogICAgICBcIlBsYW5lIFNoaWZ0OiBLYWxhZGVzaFwiLFxuICBQU0Q6ICAgICAgXCJQbGFuZSBTaGlmdDogRG9taW5hcmlhXCIsXG4gIEFXTTogICAgICBcIkFkdmVudHVyZSB3aXRoIE11a1wiLFxuICBVQVRoZU15c3RpY0NsYXNzOiBcIlVuZWFydGhlZCBBcmNhbmE6IFRoZSBNeXN0aWMgQ2xhc3NcIixcbiAgQUxDdXJzZU9mU3RyYWhkOiBcIkFkdmVudHVyZXJzIExlYWd1ZTogQ3Vyc2Ugb2YgU3RyYWhkXCIsXG4gIEFMRWxlbWVudGFsRXZpbDogXCJBZHZlbnR1cmVycyBMZWFndWU6IEVsZW1lbnRhbCBFdmlsXCIsXG4gIEFMUmFnZU9mRGVtb25zOiAgXCJBZHZlbnR1cmVycyBMZWFndWU6IFJhZ2Ugb2YgRGVtb25zXCJcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZnVsbCBzb3VyY2UgbmFtZSBmb3IgYSBnaXZlbiBhYmJyZXZpYXRpb24uXG4gKiBPcHRpb25hbGx5IGFwcGVuZHMgeWVhciBmb3IgUEhCIHZhcmlhbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVsbFNvdXJjZU5hbWUoYWJicmV2OiBzdHJpbmcsIGVkaXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBuYW1lID0gU09VUkNFX05BTUVfTUFQW2FiYnJldl0gPz8gYWJicmV2O1xuXG4gIC8vIEFwcGVuZCB5ZWFyIGZvciBQSEIgaWYgdGhlIGVkaXRpb24gY29udGV4dCBpcyBrbm93blxuICBpZiAoYWJicmV2ID09PSBcIlBIQlwiKSB7XG4gICAgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDE0XCIpKSBuYW1lICs9IFwiICgyMDE0KVwiO1xuICAgIGVsc2UgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDI1XCIpKSBuYW1lICs9IFwiICgyMDI1KVwiO1xuICB9XG5cbiAgcmV0dXJuIG5hbWU7XG59XG4iLCAiLy8gcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvdGFnUmVwbGFjZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2U1ZVRhZ3MoaW5wdXQ6IHVua25vd24pOiBzdHJpbmcge1xuICAvLyAxKSBUdXJuIGFycmF5cyBpbnRvIHNwYWNlLWpvaW5lZCBzdHJpbmdzXG4gIC8vIDIpIExlYXZlIHN0cmluZ3MgYWxvbmVcbiAgLy8gMykgQ29lcmNlIGV2ZXJ5dGhpbmcgZWxzZSB0byBzdHJpbmcgKG9yIGVtcHR5KVxuICBsZXQgdGV4dDogc3RyaW5nO1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICB0ZXh0ID0gaW5wdXQuam9pbihcIiBcIik7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgdGV4dCA9IGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHRleHQgPSBTdHJpbmcoaW5wdXQgPz8gXCJcIik7XG4gIH1cblxuICAvLyBub3cgcnVuIGFsbCB5b3VyIEAtdGFnIHJlcGxhY2VtZW50cyBvbiB0aGF0IHRleHRcbiAgcmV0dXJuIHRleHRcbiAgICAucmVwbGFjZSgvXFx7QChzcGVsbHxpdGVtfGNyZWF0dXJlfHJhY2UpIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgX18sIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemVFYWNoKG5hbWUpfV1dYFxuICAgIClcbiAgICAucmVwbGFjZSgvXFx7QChjb25kaXRpb258c3RhdHVzfGFjdGlvbnxza2lsbCkgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCB0YWcsIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemUodGFnKX1zIyR7bmFtZX18JHtjYXBpdGFsaXplRWFjaChuYW1lKX1dXWBcbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0BjbGFzc0ZlYXR1cmUgKFtefH1dKylcXHwoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIGZlYXR1cmUsIGNscykgPT5cbiAgICAgIGBbWyR7Y2xzfSMke2ZlYXR1cmV9XV1gXG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAKGJvb2t8ZmlsdGVyKSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIF9fLCB0eHQpID0+IHR4dClcbiAgICAucmVwbGFjZSgvXFx7QG5vdGUgKFtefV0rKVxcfS9nLCAoXywgbm90ZSkgPT4gYCoke25vdGV9KmApXG4gICAgLnJlcGxhY2UoL1xce0AoZGFtYWdlfGRpY2V8ZGN8aGl0fHNlbnNlKSAoW159XSspXFx9L2csIChfLCBfXywgdmFsdWUpID0+IHZhbHVlKVxuICAgIC5yZXBsYWNlKC9cXHtAY2hhbmNlIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgdmFsdWUpID0+IGAke3ZhbHVlfSVgKVxuICAgIC5yZXBsYWNlKC9cXHtAcXVpY2tyZWYgKFtefH1dKykoPzpcXHxbXnxdKlxcfFtefV0qKT9cXH0vZywgKF8sIHRlcm0pID0+IHtcbiAgICAgIGNvbnN0IGtub3duID0gW1xuICAgICAgICBcImRpZmZpY3VsdCB0ZXJyYWluXCIsIFwidG90YWwgY292ZXJcIiwgXCJoYWxmIGNvdmVyXCIsIFwidGhyZWUtcXVhcnRlcnMgY292ZXJcIixcbiAgICAgICAgXCJoZWF2aWx5IG9ic2N1cmVkXCIsIFwibGlnaHRseSBvYnNjdXJlZFwiXG4gICAgICBdO1xuICAgICAgcmV0dXJuIGtub3duLmluY2x1ZGVzKHRlcm0udG9Mb3dlckNhc2UoKSlcbiAgICAgICAgPyBgW1tSdWxlcyMke2NhcGl0YWxpemVFYWNoKHRlcm0pfV1dYFxuICAgICAgICA6IHRlcm07XG4gICAgfSlcbiAgICAucmVwbGFjZSgvXFx7XFxANWV0b29sc1xccysoW158fV0rKVxcfFtefV0rXFx9L2csICckMScpXG4gICAgLnJlcGxhY2UoL1xce0ByZWNoYXJnZVxccyooW159XSspXFx9L2csIChfLCBudW0pID0+IGAocmVjaGFyZ2U6ICR7bnVtLnRyaW0oKX0pYClcbiAgICAucmVwbGFjZSgvXFx7QChzY2FsZWRpY2V8c2NhbGVkYW1hZ2UpW159XSpcXHwoW158fV0rKVxcfS9nLCAoXywgX18sIHZhbHVlKSA9PiB2YWx1ZSlcbiAgICAucmVwbGFjZSgvXFx7QGQyMFtefV0qXFx9L2csIFwiXCIpXG4gICAgLnJlcGxhY2UoL1xce0BbXn1dK1xcfS9nLCBcIlwiKTtcbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZUVhY2goc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc3RyLnNwbGl0KFwiIFwiKS5tYXAoY2FwaXRhbGl6ZSkuam9pbihcIiBcIik7XG59XG4iLCAiaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJNYXJrZG93blRhYmxlKGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBpZiAoZW50cnkudHlwZSAhPT0gXCJ0YWJsZVwiIHx8ICFBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCBjYXB0aW9uID0gZW50cnkuY2FwdGlvbiA/IGAjIyMjIyAke2VudHJ5LmNhcHRpb259XFxuYCA6IFwiXCI7XG5cbiAgY29uc3QgaGVhZGVycyA9IChlbnRyeS5jb2xMYWJlbHMgPz8gW10pXG4gICAgLm1hcCgoaDogc3RyaW5nKSA9PiByZXBsYWNlNWVUYWdzKGgudHJpbSgpKSk7IC8vIFx1MjcwNSB0YWcgcmVwbGFjZSBvbiBoZWFkZXJzXG5cbiAgY29uc3QgaGVhZGVyUm93ID0gYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgO1xuICBjb25zdCBkaXZpZGVyUm93ID0gYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIjotLVwiKS5qb2luKFwiIHwgXCIpfSB8YDtcblxuICBjb25zdCBib2R5Um93cyA9IGVudHJ5LnJvd3MubWFwKChyb3c6IGFueVtdKSA9PiB7XG4gICAgY29uc3QgY2VsbHMgPSByb3cubWFwKChjZWxsKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGNlbGwgPT09IFwic3RyaW5nXCIpIHJldHVybiByZXBsYWNlNWVUYWdzKGNlbGwpOyAvLyBcdTI3MDUgdGFnIHJlcGxhY2Ugc3RyaW5nc1xuXG4gICAgICBpZiAodHlwZW9mIGNlbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKGNlbGwucm9sbD8uZXhhY3QgIT09IHVuZGVmaW5lZCkgcmV0dXJuIGAke2NlbGwucm9sbC5leGFjdH1gO1xuICAgICAgICBpZiAoY2VsbC5yb2xsPy5taW4gIT09IHVuZGVmaW5lZCAmJiBjZWxsLnJvbGw/Lm1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2NlbGwucm9sbC5taW59XHUyMDEzJHtjZWxsLnJvbGwubWF4fWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoSlNPTi5zdHJpbmdpZnkoY2VsbCkpOyAvLyBmYWxsYmFjayBmb3IgdW5rbm93biBzaGFwZXNcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKGNlbGwpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBgfCAke2NlbGxzLmpvaW4oXCIgfCBcIil9IHxgO1xuICB9KTtcblxuICByZXR1cm4gYCR7Y2FwdGlvbn0ke2hlYWRlclJvd31cXG4ke2RpdmlkZXJSb3d9XFxuJHtib2R5Um93cy5qb2luKFwiXFxuXCIpfWA7XG59XG4iLCAiLy8gNWUgMjAyNSBmb3JtYXRFbnRyeS50c1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vbWFya2Rvd25UYWJsZVwiO1xuXG5mdW5jdGlvbiBpc1R5cGVkRW50cnkoeDogYW55KTogeCBpcyB7IHR5cGU6IHN0cmluZzsgW2s6IHN0cmluZ106IGFueSB9IHtcbiAgcmV0dXJuIChcbiAgICB4ICE9IG51bGwgJiZcbiAgICB0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICFBcnJheS5pc0FycmF5KHgpICYmXG4gICAgdHlwZW9mICh4IGFzIGFueSkudHlwZSA9PT0gXCJzdHJpbmdcIlxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RW50cnkoZW50cnk6IGFueSk6IHN0cmluZyB7XG4gIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCBjbGVhbmVkID0gZW50cnkudHJpbSgpO1xuICAgIGlmICghY2xlYW5lZCB8fCBjbGVhbmVkID09PSBcIn1cIikgcmV0dXJuIFwiXCI7XG4gICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoY2xlYW5lZCk7XG4gIH1cblxuICBpZiAoaXNUeXBlZEVudHJ5KGVudHJ5KSAmJiBlbnRyeS50eXBlID09PSBcImVudHJpZXNcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgY29uc3QgYm9keSA9IGVudHJ5LmVudHJpZXNcbiAgICAgIC5tYXAoZm9ybWF0RW50cnkpXG4gICAgICAuZmlsdGVyKChzdHI6IHN0cmluZykgPT4gc3RyLnRyaW0oKS5sZW5ndGggPiAwKVxuICAgICAgLmpvaW4oXCJcXG5cXG5cIik7XG5cbiAgICByZXR1cm4gZW50cnkubmFtZVxuICAgICAgPyBgIyMjIyMgJHtlbnRyeS5uYW1lfVxcbiR7Ym9keX1gXG4gICAgICA6IGJvZHk7XG4gIH1cblxuICBpZiAoaXNUeXBlZEVudHJ5KGVudHJ5KSAmJiBlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgIHJldHVybiBlbnRyeS5pdGVtc1xuICAgICAgLm1hcCgoaTogYW55KSA9PiBgLSAke3JlcGxhY2U1ZVRhZ3ModHlwZW9mIGkgPT09IFwic3RyaW5nXCIgPyBpIDogSlNPTi5zdHJpbmdpZnkoaSkpfWApXG4gICAgICAuam9pbihcIlxcblwiKTtcbiAgfVxuXG4gIGlmIChpc1R5cGVkRW50cnkoZW50cnkpICYmIGVudHJ5LnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgcmV0dXJuIHJlbmRlck1hcmtkb3duVGFibGUoZW50cnkpO1xuICB9XG5cbiAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJxdW90ZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBxdW90ZSA9IGVudHJ5LmVudHJpZXMubWFwKGZvcm1hdEVudHJ5KS5qb2luKFwiIFwiKS50cmltKCk7XG4gICAgY29uc3QgYXV0aG9yID0gZW50cnkuYnkgPyBgIFx1MjAxNCAke2VudHJ5LmJ5fWAgOiBcIlwiO1xuICAgIHJldHVybiBgKlwiJHtxdW90ZX0ke2F1dGhvcn1cIipgO1xuICB9XG5cbiAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJpbnNldFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBjb25zdCBpbnNldCA9IGVudHJ5LmVudHJpZXMubWFwKGZvcm1hdEVudHJ5KS5qb2luKFwiXFxuXCIpLnRyaW0oKTtcbiAgICByZXR1cm4gYD4gJHtpbnNldC5yZXBsYWNlKC9cXG4vZywgXCJcXG4+IFwiKX1gO1xuICB9XG5cbiAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJyZWZDbGFzc0ZlYXR1cmVcIiAmJiB0eXBlb2YgZW50cnkuY2xhc3NGZWF0dXJlID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgW25hbWVdID0gZW50cnkuY2xhc3NGZWF0dXJlLnNwbGl0KFwifFwiKTtcbiAgICBjb25zdCBhbmNob3IgPSBuYW1lXG4gICAgICAucmVwbGFjZSgvW15cXHdcXHMtXS9nLCBcIlwiKVxuICAgICAgLnJlcGxhY2UoL1xccysvZywgXCItXCIpXG4gICAgICAudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gYFtbIyR7YW5jaG9yfV1dYDtcbiAgfVxuXG4gIC8vIElmIGl0J3MgYW4gdW5rbm93biBvYmplY3QsIHNraXAgaXQgc2FmZWx5XG4gIHJldHVybiBcIlwiO1xufVxuIiwgIi8vIHBhcnNlcnMvNWUtanNvbi9iZXN0aWFyeS50c1xuXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcbmltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vaGVscGVycy9zb3VyY2VNYXBcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgQkVTVElBUllfTUVUQV9ERUZTLCB1bmlmaWVkU2tpbGxzLCBGTV9GSUVMRFMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cbmNvbnN0IHNraXBwZWRNb25zdGVyczogc3RyaW5nW10gPSBbXTtcblxuLy8gU2l6ZSBhYmJyZXZpYXRpb25zIG1hcHBpbmdcbmV4cG9ydCBcbmNvbnN0IFNJWkVfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBUOiBcIlRpbnlcIixcbiAgUzogXCJTbWFsbFwiLFxuICBNOiBcIk1lZGl1bVwiLFxuICBMOiBcIkxhcmdlXCIsXG4gIEg6IFwiSHVnZVwiLFxuICBHOiBcIkdhcmdhbnR1YW5cIlxufTtcblxuLy8gQWxpZ25tZW50IGFiYnJldmlhdGlvbnMgbWFwcGluZ1xuY29uc3QgQUxJR05NRU5UX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgTDogXCJMYXdmdWxcIixcbiAgTjogXCJOZXV0cmFsXCIsXG4gIEM6IFwiQ2hhb3RpY1wiLFxuICBHOiBcIkdvb2RcIixcbiAgRTogXCJFdmlsXCIsXG4gIFU6IFwiVW5hbGlnbmVkXCJcbn07XG5cbi8vIEhlbHBlciB0byBjYXBpdGFsaXplIGZpcnN0IGxldHRlciBvZiBhIHN0cmluZ1xuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0KHN0cjogdW5rbm93bik6IHN0cmluZyB7XG4gIGNvbnN0IHMgPSBTdHJpbmcoc3RyIHx8IFwiXCIpO1xuICByZXR1cm4gcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRTaXplQWJicmV2KGFiYnJldjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIFNJWkVfTUFQW2FiYnJldl0gfHwgYWJicmV2O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0QWxpZ25tZW50QWJicmV2KGFiYnJldjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGFiYnJldlxuICAgIC50cmltKClcbiAgICAuc3BsaXQoL1xccysvKVxuICAgIC5tYXAobGV0dGVyID0+IEFMSUdOTUVOVF9NQVBbbGV0dGVyXSB8fCBsZXR0ZXIpXG4gICAgLmpvaW4oXCIgXCIpO1xufVxuXG5jb25zdCBSQVdfTlBDUzogc3RyaW5nW10gPSBbXG4gIFwiQWJqdXJlclwiLCBcIkFjb2x5dGVcIiwgXCJBcHByZW50aWNlIFdpemFyZFwiLCBcIkFyY2hkcnVpZFwiLCBcIkFyY2hlclwiLCBcIkFyY2htYWdlXCIsIFwiQXNzYXNzaW5cIixcbiAgXCJCYW5kaXRcIiwgXCJCYW5kaXQgQ2FwdGFpblwiLCBcIkJhcmRcIiwgXCJCZXJzZXJrZXJcIiwgXCJCbGFja2d1YXJkXCIsIFwiQ2hhbXBpb25cIiwgXCJDb21tb25lclwiLFxuICBcIkNvbmp1cmVyXCIsIFwiQ3VsdCBGYW5hdGljXCIsIFwiQ3VsdGlzdFwiLCBcIkRpdmluZXJcIiwgXCJEcnVpZCAoTlBDKVwiLCBcIkRydWlkIE5QQ1wiLCBcIkVuY2hhbnRlclwiLFxuICBcIkV2b2tlclwiLCBcIkdsYWRpYXRvclwiLCBcIkd1YXJkXCIsIFwiSWxsdXNpb25pc3RcIiwgXCJLbmlnaHRcIiwgXCJLcmFrZW4gUHJpZXN0XCIsIFwiTWFnZVwiLFxuICBcIk1hcnRpYWwgQXJ0cyBBZGVwdFwiLCBcIk1hc3RlciBUaGllZlwiLCBcIk5lY3JvbWFuY2VyXCIsIFwiTm9ibGVcIiwgXCJQcmllc3RcIiwgXCJTY291dFwiLCBcIlNweVwiLFxuICBcIlN3YXNoYnVja2xlclwiLCBcIlRodWdcIiwgXCJUcmFuc211dGVyXCIsIFwiVHJpYmFsIFdhcnJpb3JcIiwgXCJWZXRlcmFuXCIsIFwiV2FyIFByaWVzdFwiLFxuICBcIldhcmxvY2sgb2YgdGhlIEFyY2hmZXlcIiwgXCJXYXJsb2NrIG9mIHRoZSBGaWVuZFwiLCBcIldhcmxvY2sgb2YgdGhlIEdyZWF0IE9sZCBPbmVcIiwgXCJXYXJsb3JkXCJcbl07XG5jb25zdCBOT1JNQUxJWkVEX05QQ19OQU1FUyA9IG5ldyBTZXQoUkFXX05QQ1MubWFwKG4gPT4gbm9ybWFsaXplTmFtZShuKSkpO1xuXG5mdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBuYW1lLnJlcGxhY2UoL1xccysvZywgXCIgXCIpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiBjYXRlZ29yaXplQ3JlYXR1cmUobW9uc3RlcjogYW55KTogc3RyaW5nIHtcbiAgY29uc3QgdHlwZVZhbHVlID0gbW9uc3Rlci50eXBlO1xuICBjb25zdCBuYW1lID0gbW9uc3Rlci5uYW1lO1xuICBjb25zdCB0ID0gdHlwZW9mIHR5cGVWYWx1ZSA9PT0gXCJzdHJpbmdcIlxuICAgID8gdHlwZVZhbHVlLnRvTG93ZXJDYXNlKClcbiAgICA6IHR5cGVWYWx1ZT8udHlwZT8udG9Mb3dlckNhc2UoKSB8fCBTdHJpbmcodHlwZVZhbHVlKS50b0xvd2VyQ2FzZSgpO1xuXG4gIGNvbnN0IG5vcm1hbGl6ZWROYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKTtcblxuICBpZiAobW9uc3Rlci5pc05wYyB8fCBtb25zdGVyLmlzTmFtZWRDcmVhdHVyZSkgcmV0dXJuIFwiU3RvcnkgTlBDc1wiO1xuICBpZiAodCA9PT0gXCJiZWFzdFwiKSByZXR1cm4gXCJCZWFzdHNcIjtcbiAgaWYgKHQgPT09IFwiaHVtYW5vaWRcIiAmJiBOT1JNQUxJWkVEX05QQ19OQU1FUy5oYXMobm9ybWFsaXplZE5hbWUpKSByZXR1cm4gXCJOb24tQmVhc3RzXCI7XG4gIGlmICh0ID09PSBcImh1bWFub2lkXCIpIHJldHVybiBcIk1vbnN0ZXJzXCI7XG4gIHJldHVybiBcIk1vbnN0ZXJzXCI7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckFiaWxpdGllc1RhYmxlKHN0cjogbnVtYmVyLCBkZXg6IG51bWJlciwgY29uOiBudW1iZXIsIGludDogbnVtYmVyLCB3aXM6IG51bWJlciwgY2hhOiBudW1iZXIpOiBzdHJpbmcge1xuICByZXR1cm4gW1xuICAgIGB8IFNUUiB8IERFWCB8IENPTiB8IElOVCB8IFdJUyB8IENIQSB8YCxcbiAgICBgfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfGAsXG4gICAgYHwgJHtzdHJ9IHwgJHtkZXh9IHwgJHtjb259IHwgJHtpbnR9IHwgJHt3aXN9IHwgJHtjaGF9IHxgXG4gIF0uam9pbihcIlxcblwiKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyRW50cnkoZW50cnk6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IG5hbWUgPSBlbnRyeS5uYW1lO1xuICBsZXQgZGVzY3JpcHRpb25zOiBzdHJpbmdbXSA9IFtdO1xuICBpZiAoQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgIGRlc2NyaXB0aW9ucyA9IGVudHJ5LmVudHJpZXM7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGVudHJ5LmVudHJpZXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBbZW50cnkuZW50cmllc107XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShlbnRyeS5kZXNjKSkge1xuICAgIGRlc2NyaXB0aW9ucyA9IGVudHJ5LmRlc2M7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGVudHJ5LmRlc2MgPT09IFwic3RyaW5nXCIpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBbZW50cnkuZGVzY107XG4gIH1cbiAgY29uc3QgcmF3ID0gZGVzY3JpcHRpb25zLmpvaW4oXCIgXCIpO1xuICBjb25zdCBkZXNjID0gcmVwbGFjZTVlVGFncyhyYXcpO1xuICByZXR1cm4gYCoqKiR7bmFtZX0uKioqICR7ZGVzY31gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VCZXN0aWFyeUZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgICBpZiAoIWpzb24ubW9uc3RlcikgcmV0dXJuIFtdO1xuICAgIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcbiAgXG4gICAgLy8gMSkgRmlsdGVyIG91dCBcdTIwMUNyZWZlcmVuY2VcdTIwMUQgZW50cmllcyB3aXRoIG5vIEFDIG9yIEhQXG4gICAgY29uc3QgdmFsaWRNb25zdGVycyA9IGpzb24ubW9uc3Rlci5maWx0ZXIoKG06IGFueSkgPT4ge1xuICAgIGNvbnN0IGFjVmFsID0gQXJyYXkuaXNBcnJheShtLmFjKVxuICAgICAgPyBtLmFjWzBdPy5hYyA/PyBtLmFjWzBdXG4gICAgICA6IHR5cGVvZiBtLmFjID09PSBcIm9iamVjdFwiXG4gICAgICAgID8gbS5hYz8uYWMgPz8gbnVsbFxuICAgICAgICA6IG0uYWM7XG5cbiAgICBjb25zdCBocFZhbCA9IHR5cGVvZiBtLmhwID09PSBcIm9iamVjdFwiXG4gICAgICA/IG0uaHA/LmF2ZXJhZ2UgPz8gbS5ocD8uaHAgPz8gbnVsbFxuICAgICAgOiBtLmhwO1xuICAgICAgcmV0dXJuIGFjVmFsICE9IG51bGwgJiYgaHBWYWwgIT0gbnVsbCAmJiAhaXNOYU4oTnVtYmVyKGFjVmFsKSkgJiYgIWlzTmFOKE51bWJlcihocFZhbCkpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgYWxsTmFtZXMgPSBuZXcgU2V0KGpzb24ubW9uc3Rlci5tYXAoKG06IGFueSkgPT4gbS5uYW1lKSk7XG5jb25zdCB2YWxpZE5hbWVzID0gbmV3IFNldCh2YWxpZE1vbnN0ZXJzLm1hcCgobTogYW55KSA9PiBtLm5hbWUpKTtcbmNvbnN0IG1pc3NpbmcgPSBbLi4uYWxsTmFtZXNdLmZpbHRlcihuYW1lID0+ICF2YWxpZE5hbWVzLmhhcyhuYW1lKSk7XG5cbiAgXG4gICAgcmV0dXJuIHZhbGlkTW9uc3RlcnMubWFwKChtb25zdGVyOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgICAgID0gbW9uc3Rlci5uYW1lIGFzIHN0cmluZztcbiAgICAgIGNvbnN0IHNhZmVOYW1lID0gbmFtZS5yZXBsYWNlKC9cXC8vZywgXCItXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBSYXcgZmllbGRzICYgZm9ybWF0dGluZyBcdTIwMTRcbiAgICAgIGNvbnN0IHJhd1NpemUgICAgICA9IG1vbnN0ZXIuc2l6ZSB8fCBcIk1cIjtcbiAgICAgIGNvbnN0IHJhd0FsaWdubWVudCA9IEFycmF5LmlzQXJyYXkobW9uc3Rlci5hbGlnbm1lbnQpXG4gICAgICAgID8gbW9uc3Rlci5hbGlnbm1lbnQuam9pbihcIiBcIilcbiAgICAgICAgOiBtb25zdGVyLmFsaWdubWVudCB8fCBcIk5cIjtcbiAgICBsZXQgcmF3VHlwZSA9IFwiVW5rbm93blwiO1xuXG4gICAgaWYgKHR5cGVvZiBtb25zdGVyLnR5cGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJhd1R5cGUgPSBjYXBpdGFsaXplRmlyc3QobW9uc3Rlci50eXBlKTtcbiAgICB9IGVsc2UgaWYgKG1vbnN0ZXIudHlwZT8udHlwZSkge1xuICAgICAgY29uc3QgYmFzZSA9IGNhcGl0YWxpemVGaXJzdChtb25zdGVyLnR5cGUudHlwZSk7XG4gICAgICBjb25zdCB0YWdzID0gbW9uc3Rlci50eXBlLnRhZ3M/Lmxlbmd0aCA/IGAgKCR7bW9uc3Rlci50eXBlLnRhZ3MubWFwKGNhcGl0YWxpemVGaXJzdCkuam9pbihcIiwgXCIpfSlgIDogXCJcIjtcbiAgICAgIHJhd1R5cGUgPSBgJHtiYXNlfSR7dGFnc31gO1xuICAgIH1cblxuICAgIG1vbnN0ZXIuX3BhcnNlZFR5cGUgPSByYXdUeXBlO1xuICAgICAgXG4gICAgLy8gXHUyMDE0IEFDLCBIUCwgQ1IgXHUyMDE0XG4gICAgY29uc3QgYWMgPSBBcnJheS5pc0FycmF5KG1vbnN0ZXIuYWMpID8gbW9uc3Rlci5hY1swXS5hYyA6IG1vbnN0ZXIuYWM7XG4gICAgY29uc3QgaHAgPSBtb25zdGVyLmhwPy5hdmVyYWdlID8/IG1vbnN0ZXIuaHA7XG4gICAgY29uc3QgY3IgPSBtb25zdGVyLmNyO1xuXG4gICAgLy8gU2tpcCBtb25zdGVycyB3aXRoIG5vIEFDIGFuZCBIUFxuICAgIGlmICghYWMgJiYgIWhwKSB7XG4gICAgICBza2lwcGVkTW9uc3RlcnMucHVzaChtb25zdGVyLm5hbWUpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgICAgXG4gICAgICAvLyBcdTIwMTQgQWJpbGl0aWVzIFx1MjAxNFxuICAgICAgY29uc3QgYWJpbGl0aWVzID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFiaWxpdHkpXG4gICAgICAgID8gbW9uc3Rlci5hYmlsaXR5XG4gICAgICAgIDogW21vbnN0ZXIuc3RyLCBtb25zdGVyLmRleCwgbW9uc3Rlci5jb24sIG1vbnN0ZXIuaW50LCBtb25zdGVyLndpcywgbW9uc3Rlci5jaGFdO1xuICAgICAgY29uc3QgW3N0ciA9IDEwLCBkZXggPSAxMCwgY29uID0gMTAsIGludCA9IDEwLCB3aXMgPSAxMCwgY2hhID0gMTBdID0gYWJpbGl0aWVzO1xuICBcbiAgICAgIC8vIFx1MjAxNCBTcGVlZCAoaGFuZGxlcyBob3ZlciAmIG9iamVjdCBzcGVlZHMpIFx1MjAxNFxuICAgICAgY29uc3Qgc3BlZWRMaXN0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgaWYgKHR5cGVvZiBtb25zdGVyLnNwZWVkID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGZvciAoY29uc3QgW21vZGUsIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMobW9uc3Rlci5zcGVlZCkpIHtcbiAgICAgICAgICBpZiAobW9kZSA9PT0gXCJjYW5Ib3ZlclwiKSBjb250aW51ZTtcbiAgICAgICAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgXCJudW1iZXJcIiBpbiB2YWwpIHtcbiAgICAgICAgICAgIGNvbnN0IG51bSAgPSAodmFsIGFzIGFueSkubnVtYmVyO1xuICAgICAgICAgICAgY29uc3QgY29uZCA9ICh2YWwgYXMgYW55KS5jb25kaXRpb24gPyBgICR7KHZhbCBhcyBhbnkpLmNvbmRpdGlvbn1gIDogXCJcIjtcbiAgICAgICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vZGV9ICR7bnVtfSBmdC4ke2NvbmR9YCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vZGV9ICR7dmFsfSBmdC5gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwZWVkTGlzdC5wdXNoKGAke21vbnN0ZXIuc3BlZWR9IGZ0LmApO1xuICAgICAgfVxuICAgICAgY29uc3Qgc3BlZWQgPSBzcGVlZExpc3Quam9pbihcIiwgXCIpO1xuICBcbiAgICAgIC8vIFx1MjAxNCBTb3VyY2Ugc2FuaXRpemF0aW9uIFx1MjAxNFxuICAgICAgbGV0IHNvdXJjZSA9IGdldEZ1bGxTb3VyY2VOYW1lKG1vbnN0ZXIuc291cmNlLCBlZGl0aW9uSWQpO1xuICAgICAgc291cmNlICAgICA9IHNvdXJjZS5yZXBsYWNlKC86L2csIFwiIC1cIik7XG4gIFxuICAgICAgLy8gXHUyMDE0IENhdGVnb3J5IGZvciBmb2xkZXIgXHUyMDE0XG4gICAgICBjb25zdCBjYXRlZ29yeSA9IGNhdGVnb3JpemVDcmVhdHVyZShtb25zdGVyKTtcbiAgXG4gICAgICBjb25zdCBmbSAgID0gYnVpbGRGTShtb25zdGVyLCBCRVNUSUFSWV9NRVRBX0RFRlMpO1xuICAgICAgY29uc3QgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBCRVNUSUFSWV9NRVRBX0RFRlMpO1xuICAgICAgXG4gICAgICBjb25zdCBzYXZpbmdUaHJvd3MgPSAoZm1bRk1fRklFTERTLlNBVklOR19USFJPV1NdIGFzIHN0cmluZ1tdKSB8fCBbXTtcbiAgICAgIGNvbnN0IHNraWxscyAgICAgICA9IChmbVtGTV9GSUVMRFMuU0tJTExTXSAgICAgICAgYXMgc3RyaW5nW10pIHx8IFtdO1xuICAgICAgY29uc3Qgc2Vuc2VzICAgICAgID0gKGZtW0ZNX0ZJRUxEUy5TRU5TRVNdICAgICAgICBhcyBzdHJpbmdbXSkgfHwgW107XG4gICAgICBjb25zdCBsYW5ndWFnZXMgICAgPSAoZm1bRk1fRklFTERTLkxBTkdVQUdFU10gICAgIGFzIHN0cmluZ1tdKSB8fCBbXTtcblxuXG4gICAgICAvLyBcdTIwMTQgQm9keSBcdTIwMTRcbiAgICAgIGxldCBib2R5ID1cbiAgICAgIGAjICR7bmFtZX1cXG5cXG5gICtcbiAgICAgIGAke2Zvcm1hdFNpemVBYmJyZXYocmF3U2l6ZSl9ICR7cmF3VHlwZX0sICR7Zm9ybWF0QWxpZ25tZW50QWJicmV2KHJhd0FsaWdubWVudCl9XFxuXFxuYCArXG4gICAgICBgKipBcm1vciBDbGFzcyoqOiAke2FjfVxcbmAgK1xuICAgICAgYCoqSGl0IFBvaW50cyoqOiAke2hwfVxcbmAgK1xuICAgICAgYCoqU3BlZWQqKjogJHtzcGVlZH1cXG5gICtcbiAgICAgIChzYXZpbmdUaHJvd3MubGVuZ3RoXG4gICAgICAgID8gYCoqU2F2aW5nIFRocm93cyoqOiAke3NhdmluZ1Rocm93cy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIChza2lsbHMubGVuZ3RoXG4gICAgICAgID8gYCoqU2tpbGxzKio6ICR7c2tpbGxzLmpvaW4oXCIsIFwiKX1cXG5gXG4gICAgICAgIDogXCJcIikgK1xuICAgICAgKHNlbnNlcy5sZW5ndGhcbiAgICAgICAgPyBgKipTZW5zZXMqKjogJHtzZW5zZXMuam9pbihcIiwgXCIpfVxcbmBcbiAgICAgICAgOiBcIlwiKSArXG4gICAgICAobGFuZ3VhZ2VzLmxlbmd0aFxuICAgICAgICA/IGAqKkxhbmd1YWdlcyoqOiAke2xhbmd1YWdlcy5qb2luKFwiLCBcIil9XFxuYFxuICAgICAgICA6IFwiXCIpICtcbiAgICAgIGAqKkNoYWxsZW5nZSoqOiAke2NyfVxcblxcbmAgK1xuICAgICAgcmVuZGVyQWJpbGl0aWVzVGFibGUoc3RyLCBkZXgsIGNvbiwgaW50LCB3aXMsIGNoYSk7XG5cbiAgXG4gICAgICBpZiAobW9uc3Rlci50cmFpdCkgICAgIGJvZHkgKz0gYFxcblxcbiMjIyBUcmFpdHNcXG4ke21vbnN0ZXIudHJhaXQubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5hY3Rpb24pICAgIGJvZHkgKz0gYFxcblxcbiMjIyBBY3Rpb25zXFxuJHttb25zdGVyLmFjdGlvbi5tYXAocmVuZGVyRW50cnkpLmpvaW4oXCJcXG5cXG5cIil9YDtcbiAgICAgIGlmIChtb25zdGVyLnJlYWN0aW9uKSAgYm9keSArPSBgXFxuXFxuIyMjIFJlYWN0aW9uc1xcbiR7bW9uc3Rlci5yZWFjdGlvbi5tYXAocmVuZGVyRW50cnkpLmpvaW4oXCJcXG5cXG5cIil9YDtcbiAgICAgIGlmIChtb25zdGVyLmxlZ2VuZGFyeSkgYm9keSArPSBgXFxuXFxuIyMjIExlZ2VuZGFyeSBBY3Rpb25zXFxuJHttb25zdGVyLmxlZ2VuZGFyeS5tYXAocmVuZGVyRW50cnkpLmpvaW4oXCJcXG5cXG5cIil9YDtcbiAgXG4gICAgICBjb25zdCBjb250ZW50ID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2JvZHl9YDtcbiAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXRoOiAgICBgJHtjYXRlZ29yeX0vJHtzYWZlTmFtZX0ubWRgLFxuICAgICAgICBjb250ZW50LFxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuIiwgIi8vIDVlIDIwMjUgaXRlbXMgcGFyc2VyXG5cbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gICAgIGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vaGVscGVycy9zb3VyY2VNYXBcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBJVEVNX01FVEFfREVGUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcblxuXG4vKiogSGVscGVyIHRvIGNhcGl0YWxpemUgZmlyc3QgbGV0dGVyIFx1MjAxMyBuZXZlciBjcmFzaGVzIG9uIG5vbi1zdHJpbmdzICovXG5mdW5jdGlvbiBjYXBpdGFsaXplRmlyc3QoaW5wdXQ6IGFueSk6IHN0cmluZyB7XG4gIC8vIGlmIGl0XHUyMDE5cyBub3QgYSBub24tZW1wdHkgc3RyaW5nLCBiYWlsIG91dFxuICBpZiAodHlwZW9mIGlucHV0ICE9PSBcInN0cmluZ1wiIHx8IGlucHV0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIFwiXCI7XG4gIGNvbnN0IHMgPSBpbnB1dC50cmltKCk7XG4gIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5cbmV4cG9ydCBjb25zdCBEQU1BR0VfVFlQRV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgUDogXCJQaWVyY2luZ1wiLFxuICBCOiBcIkJsdWRnZW9uaW5nXCIsXG4gIFM6IFwiU2xhc2hpbmdcIixcbiAgTjogXCJOZWNyb3RpY1wiLFxuICBSOiBcIlJhZGlhbnRcIixcbiAgRjogXCJGaXJlXCIsXG4gIEM6IFwiQ29sZFwiLFxuICBMOiBcIkxpZ2h0bmluZ1wiLFxuICBUOiBcIlRodW5kZXJcIixcbiAgQTogXCJBY2lkXCIsXG4gIEg6IFwiSGVhbGluZ1wiLFxuICBVOiBcIkZvcmNlXCIsXG4gIFY6IFwiUHN5Y2hpY1wiLFxufTtcblxuZXhwb3J0IGNvbnN0IFBST1BFUlRZX01BUDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBBOiBcIkFtbXVuaXRpb25cIixcbiAgRjogXCJGaW5lc3NlXCIsXG4gIEg6IFwiSGVhdnlcIixcbiAgTDogXCJMaWdodFwiLFxuICBSOiBcIlJlbG9hZFwiLFxuICBTOiBcIlNwZWNpYWxcIixcbiAgXCIySFwiOiBcIlR3by1IYW5kZWRcIixcbiAgVDogXCJUaHJvd25cIixcbiAgVjogXCJWZXJzYXRpbGVcIlxufTtcblxuZXhwb3J0IGNvbnN0IElURU1fVFlQRV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgJEM6ICBcIkN1cnJlbmN5XCIsXG4gICRHOiAgXCJHZW1cIixcbiAgQTogICBcIkFtbXVuaXRpb25cIixcbiAgXCJBSVJ8RE1HXCI6IFwiVmVoaWNsZSAoYWlyKVwiLFxuICBcIkFGfERNR1wiOiBcIkZ1dHVyZSBBbW1vXCIsXG4gIEFUOiAgXCJBcnRpc2FuIFRvb2xzXCIsXG4gIEVYUDogXCJFeHBsb3NpdmVcIixcbiAgRkQ6ICBcIkZvb2QgYW5kIERyaW5rXCIsXG4gIEc6ICAgXCJHZWFyXCIsXG4gIEdTOiAgXCJHYW1lXCIsXG4gIEhBOiAgXCJIZWF2eSBBcm1vclwiLFxuICBcIklER3xURENTUlwiOiBcIklsbGljaXQgRHJ1Z1wiLFxuICBJTlM6IFwiSW5zdHJ1bWVudFwiLFxuICBMQTogIFwiTGlnaHQgQXJtb3JcIixcbiAgTTogICBcIldlYXBvblwiLFxuICBNQTogIFwiTWVkaXVtIEFybW9yXCIsXG4gIE1OVDogXCJNb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIE9ESDogXCJNaXNjZWxsYW5lb3VzXCIsXG4gIFA6ICAgXCJDb25zdW1hYmxlXCIsXG4gIFI6ICAgXCJSYW5nZWQgV2VhcG9uXCIsXG4gIFJEOiAgXCJSb2RcIixcbiAgUkc6ICBcIlJpbmdcIixcbiAgUzogICBcIlNoaWVsZFwiLFxuICBTQzogIFwiU2Nyb2xsXCIsXG4gIFNDRjogXCJTcGVsbCBDYXN0aW5nIEZvY3VzXCIsXG4gIFNIUDogXCJTaGlwXCIsXG4gIFQ6ICAgXCJUb29sXCIsXG4gIFRBSDogXCJNb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFRHOiAgXCJUcmFkZSBHb29kc1wiLFxuICBWRUg6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBXRDogIFwiV2FuZFwiLFxufTtcblxuLyoqIGNvZGUgXHUyMTkyIGZ1bGwgZm9sZGVyIHBhdGggdW5kZXIgSXRlbXMvICovXG5jb25zdCBjb2RlRm9sZGVyTWFwOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIC8vIFdlYXBvbnMgJiBBcm1vclxuICBcIkFcIjogICBcIldlYXBvbnMgYW5kIEFybW9yL0FtbXVuaXRpb25cIixcbiAgXCJNXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zXCIsXG4gIFwiUlwiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvUmFuZ2VkIFdlYXBvbnNcIixcbiAgXCJTXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9TaGllbGRzXCIsXG4gIFwiTEFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvTGlnaHQgQXJtb3JcIixcbiAgXCJNQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9NZWRpdW0gQXJtb3JcIixcbiAgXCJIQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9IZWF2eSBBcm1vclwiLFxuICBcIkVYUFwiOiBcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnMvRXhwbG9zaXZlc1wiLFxuICAvLyBGdXR1cmUgQW1tbyAoQUZ8RE1HIFx1MjE5MiByYXdDb2RlIFwiQUZcIilcbiAgXCJBRlwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9BbW11bml0aW9uL0Z1dHVyZSBBbW1vXCIsXG5cbiAgLy8gTWFnaWNhbCBJdGVtc1xuICBcIlJEXCI6ICBcIk1hZ2ljYWwgSXRlbXMvUm9kc1wiLFxuICBcIlJHXCI6ICBcIk1hZ2ljYWwgSXRlbXMvUmluZ3NcIixcbiAgXCJTQ1wiOiAgXCJNYWdpY2FsIEl0ZW1zL1Njcm9sbHNcIixcbiAgXCJTQ0ZcIjogXCJNYWdpY2FsIEl0ZW1zL1NwZWxsIENhc3RpbmcgRm9jdXNcIixcbiAgXCJXRFwiOiAgXCJNYWdpY2FsIEl0ZW1zL1dhbmRzXCIsXG5cbiAgLy8gVmFsdWFibGVzXG4gIFwiJEdcIjogXCJWYWx1YWJsZXMvR2Vtc1wiLFxuICAvLyBDdXJyZW5jeSAocmF3Q29kZSBiZWNvbWVzIFwiQ1wiIGFmdGVyIHN0cmlwcGluZyAkKVxuICBcIkNcIjogIFwiVmFsdWFibGVzL0N1cnJlbmN5XCIsXG4gIFwiVEdcIjogXCJWYWx1YWJsZXMvVHJhZGUgR29vZHNcIixcblxuICAvLyBBcnRpc2FuIEdvb2RzXG4gIFwiQVRcIjogIFwiQXJ0aXNhbiBHb29kcy9Ub29sc1wiLFxuICBcIlRcIjogICBcIkFydGlzYW4gR29vZHMvVG9vbHNcIixcbiAgXCJJTlNcIjogXCJBcnRpc2FuIEdvb2RzL0luc3RydW1lbnRzXCIsXG4gIFwiR1NcIjogIFwiQXJ0aXNhbiBHb29kcy9HYW1lc1wiLFxuXG4gIC8vIEdlYXIgJiBNb3VudHNcbiAgXCJHXCI6ICAgXCJHZWFyXCIsXG4gIC8vIE1vdW50cyAmIFZlaGljbGVzXG4gIFwiTU5UXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFwiVEFIXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIFwiVkVIXCI6IFwiR2Vhci9Nb3VudHMgYW5kIFZlaGljbGVzXCIsXG4gIC8vIEFpciB2ZWhpY2xlcyAoQUlSfERNRyBcdTIxOTIgcmF3Q29kZSBcIkFJUlwiKVxuICBcIkFJUlwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlcy9BaXJcIixcblxuICAvLyBDb25zdW1hYmxlc1xuICBcIlBcIjogICBcIkNvbnN1bWFibGVzXCIsXG4gIC8vIEZvb2QgJiBEcmlua1xuICBcIkZEXCI6ICBcIkNvbnN1bWFibGVzL0Zvb2QgYW5kIERyaW5rXCIsXG5cbiAgLy8gSWxsaWNpdCBEcnVncyAoSURHfFREQ1NSIFx1MjE5MiByYXdDb2RlIFwiSURHXCIpXG4gIFwiSURHXCI6IFwiR2Vhci9JbGxpY2l0IERydWdzXCIsXG5cbiAgLy8gTWlzY2VsbGFuZW91cyAoT0RIKVxuICBcIk9ESFwiOiBcIkdlYXIvTWlzY2VsbGFuZW91c1wiLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSXRlbXNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IHJhd0l0ZW1zOiBhbnlbXSA9IFtdO1xuICBpZiAoQXJyYXkuaXNBcnJheShqc29uLmJhc2VpdGVtKSkgcmF3SXRlbXMucHVzaCguLi5qc29uLmJhc2VpdGVtKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5pdGVtKSkgICAgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5pdGVtKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5vYmplY3QpKSAgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5vYmplY3QpO1xuICBpZiAoQXJyYXkuaXNBcnJheShqc29uLnZlaGljbGUpKSAgcmF3SXRlbXMucHVzaCguLi5qc29uLnZlaGljbGUpO1xuICBpZiAoIXJhd0l0ZW1zLmxlbmd0aCkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IGJhc2VOYW1lcyA9IG5ldyBTZXQ8c3RyaW5nPihcbiAgICBBcnJheS5pc0FycmF5KGpzb24uYmFzZWl0ZW0pID8ganNvbi5iYXNlaXRlbS5tYXAoKGI6IGFueSkgPT4gYi5uYW1lKSA6IFtdXG4gICk7XG4gIGNvbnN0IG91dDogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGl0IG9mIHJhd0l0ZW1zKSB7XG4gICAgY29uc3QgbmFtZSAgICAgPSBpdC5uYW1lIGFzIHN0cmluZztcbiAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvW1xcL1xcXFw6XS9nLCBcIi1cIik7XG5cbiAgICAvLyBEZXRlcm1pbmUgZm9sZGVyXG4gICAgY29uc3QgcmF3Q29kZSA9IChpdC50eXBlIGFzIHN0cmluZyB8fCBcIlwiKS5zcGxpdChcInxcIilbMF1cbiAgICAgICAgLnNwbGl0KFwifFwiKVswXSAgICAgIC8vIGRyb3AgYW55dGhpbmcgYWZ0ZXIgXHUyMDFDfFx1MjAxRFxuICAgICAgICAucmVwbGFjZSgvXlxcJC8sIFwiXCIpOyAvLyBzdHJpcCBsZWFkaW5nIFx1MjAxQyRcdTIwMURcbiAgICBsZXQgZm9sZGVyICAgID0gY29kZUZvbGRlck1hcFtyYXdDb2RlXSA/PyBcIk1pc2NlbGxhbmVvdXNcIjtcblxuICAgIC8vIFZhcmlhbnRzXG4gICAgaWYgKGl0LmJvbnVzV2VhcG9uKSB7XG4gICAgICBmb2xkZXIgPSBgJHtmb2xkZXJ9L1ZhcmlhbnRzYDtcbiAgICB9XG4gICAgLy8gTWFnaWNhbFxuICAgIGVsc2Uge1xuICAgICAgY29uc3QgaXNNYWdpYyA9ICEhaXQud29uZHJvdXMgfHwgISFpdC5yZXFBdHR1bmUgfHwgISFpdC5yZXFfYXR0dW5lXG4gICAgICAgIHx8IFN0cmluZyhpdC5yYXJpdHkpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJtYWdpY1wiKTtcbiAgICAgIGlmIChpc01hZ2ljKSB7XG4gICAgICAgIGNvbnN0IFsgLCAuLi5yZXN0IF0gPSBmb2xkZXIuc3BsaXQoXCIvXCIpO1xuICAgICAgICBmb2xkZXIgPSBbXCJNYWdpY2FsIEl0ZW1zXCIsIC4uLnJlc3RdLmpvaW4oXCIvXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFdlYXBvbiBjYXRlZ29yeSBzdWJmb2xkZXJcbiAgICBpZiAoKGZvbGRlci5zdGFydHNXaXRoKFwiV2VhcG9ucyBhbmQgQXJtb3IvV2VhcG9uc1wiKSB8fFxuICAgICAgICAgZm9sZGVyLnN0YXJ0c1dpdGgoXCJXZWFwb25zIGFuZCBBcm1vci9SYW5nZWQgV2VhcG9uc1wiKSkgJiYgaXQud2VhcG9uQ2F0ZWdvcnkpIHtcbiAgICAgIGZvbGRlciA9IGAke2ZvbGRlcn0vJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfWA7XG4gICAgfVxuXG4gICAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciB0aGUgU09VUkNFIGZpZWxkXG4oanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbi8vIGJ1aWxkIGEgRnJvbnRtYXR0ZXIgb2JqZWN0IGZyb20gdGhlIEpTT05cbmNvbnN0IGZtICAgPSBidWlsZEZNKGl0LCBJVEVNX01FVEFfREVGUyk7XG5cbmlmIChyYXdDb2RlID09PSBcIk1cIiAmJiBpdC53ZWFwb25DYXRlZ29yeSkge1xuICAvLyBcdTIwMUNNXHUyMDFEIFx1MjE5MiB1c2Ugd2VhcG9uQ2F0ZWdvcnkgKFx1MjAxQ1NpbXBsZVx1MjAxRC9cdTIwMUNNYXJ0aWFsXHUyMDFEKVxuICBmbS50eXBlID0gYCR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX0gV2VhcG9uYDtcbn0gZWxzZSBpZiAoSVRFTV9UWVBFX01BUFtyYXdDb2RlXSkge1xuICAvLyBhbnkgb3RoZXIgY29kZSBcdTIxOTIgbWFwcGVkIGxhYmVsXG4gIGZtLnR5cGUgPSBJVEVNX1RZUEVfTUFQW3Jhd0NvZGVdO1xufVxuaWYgKEFycmF5LmlzQXJyYXkoZm0uZGFtYWdlVHlwZXMpKSB7XG4gIGZtLmRhbWFnZVR5cGVzID0gZm0uZGFtYWdlVHlwZXMubWFwKChjb2RlOiBzdHJpbmcpID0+XG4gICAgREFNQUdFX1RZUEVfTUFQW2NvZGVdIHx8IGNvZGVcbiAgKTtcbn1cbi8vIHNlcmlhbGl6ZSBpdCB0byBZQU1MXG5sZXQgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBJVEVNX01FVEFfREVGUyk7XG5cbi8vIGlmIHlvdSBzdGlsbCB3YW50IHBhY2tDb250ZW50cywgYXBwZW5kIGl0IGhlcmU6XG5pZiAoQXJyYXkuaXNBcnJheShpdC5wYWNrQ29udGVudHMpKSB7XG4gIHlhbWwgKz0gXCJcXG5wYWNrQ29udGVudHM6XCI7XG4gIGZvciAoY29uc3QgcGMgb2YgaXQucGFja0NvbnRlbnRzKSB7XG4gICAgeWFtbCArPSBgXFxuICAtIGl0ZW06IFwiJHtwYy5pdGVtfVwiXFxuICAgIHF1YW50aXR5OiAke3BjLnF1YW50aXR5fWA7XG4gIH1cbn1cbiBcbi8vIHdyYXAgaXQgaW4gdGhlIFlBTUwgZmVuY2VcbmNvbnN0IGZyb250bWF0dGVyID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1gO1xuXG5cbiAgICAvLyBCb2R5IGxpbmVzXG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGluZXMucHVzaChgIyAke25hbWV9YCk7XG4gICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgIC8vIFN1YnRpdGxlXG4gICAgY29uc3Qgc3VidGl0bGUgPSBpdC53ZWFwb25cbiAgICAgID8gYCR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX0gV2VhcG9uYFxuICAgICAgOiBpdC5hcm1vclxuICAgICAgICA/IGZvbGRlci5zcGxpdChcIi9cIikucG9wKCkgfHwgXCJBcm1vclwiXG4gICAgICAgIDogXCJcIjtcbiAgICBpZiAoc3VidGl0bGUpIGxpbmVzLnB1c2goYCMjIyAqJHtzdWJ0aXRsZX0qYCk7XG5cbiAgICAvLyBTdGF0cyBsaW5lc1xuICAgIGlmIChpdC53ZWFwb24pIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqQ2F0ZWdvcnkqKjogJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfWApO1xuICAgICAgbGluZXMucHVzaChgKipEYW1hZ2UqKjogJHtpdC5kbWcxID8/IFwiXCJ9JHtpdC5kbWcyID8gYCAvICR7aXQuZG1nMn1gIDogXCJcIn1gKTtcbiAgICAgIGNvbnN0IHR5cGVzQm9keSA9IChBcnJheS5pc0FycmF5KGl0LmRtZ1R5cGUpID8gaXQuZG1nVHlwZSA6IFtpdC5kbWdUeXBlXSlcbiAgICAgICAgLmZpbHRlcigodDogYW55KSA9PiBCb29sZWFuKHQpKVxuICAgICAgICAubWFwKCh0OiBzdHJpbmcpID0+IERBTUFHRV9UWVBFX01BUFt0XSB8fCB0KTtcbiAgICAgIGxpbmVzLnB1c2goYCoqRGFtYWdlIFR5cGUqKjogJHt0eXBlc0JvZHkuam9pbihcIiwgXCIpfWApO1xuICAgICAgbGluZXMucHVzaChgKipSYW5nZSoqOiAke2l0LnJhbmdlID8/IFwiXHUyMDE0XCJ9YCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlJlbG9hZCoqOiAke2l0LnJlbG9hZCA/PyBcIlx1MjAxNFwifWApO1xuICAgICAgaWYgKGl0LmFtbW9UeXBlKSBsaW5lcy5wdXNoKGAqKkFtbW8gVHlwZSoqOiAke2l0LmFtbW9UeXBlfWApO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXQucHJvcGVydHkpICYmIGl0LnByb3BlcnR5Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBwcm9wc0JvZHkgPSBpdC5wcm9wZXJ0eS5tYXAoKHA6IHN0cmluZykgPT4gUFJPUEVSVFlfTUFQW3BdIHx8IHApO1xuICAgICAgICBsaW5lcy5wdXNoKGAqKlByb3BlcnRpZXMqKjogJHtwcm9wc0JvZHkuam9pbihcIiwgXCIpfWApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXQuYXJtb3IpIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqQXJtb3IgQ2xhc3MqKjogJHtpdC5hY31gKTtcbiAgICAgIGlmIChpdC5zdGVhbHRoKSBsaW5lcy5wdXNoKGAqKlN0ZWFsdGggRGlzYWR2YW50YWdlKio6IHRydWVgKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gRGVzY3JpcHRpb24gd2l0aCBuZXN0ZWQgZW50cmllc1xuICAgIGNvbnN0IGRlc2MgPSBpdC5lbnRyaWVzID8/IGl0LmRlc2M7XG4gICAgaWYgKGRlc2MpIHtcbiAgICAgIGZvciAoY29uc3QgcCBvZiBBcnJheS5pc0FycmF5KGRlc2MpID8gZGVzYyA6IFtkZXNjXSkge1xuICAgICAgICBpZiAodHlwZW9mIHAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHJlcGxhY2U1ZVRhZ3MocCkuc3BsaXQoXCJcXG5cIikpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAocCAmJiB0eXBlb2YgcCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGxpbmVzLnBvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMjICR7cC5uYW1lfWApO1xuICAgICAgICAgIGNvbnN0IHN1YiA9IEFycmF5LmlzQXJyYXkocC5lbnRyaWVzKSA/IHAuZW50cmllcyA6IFtdO1xuICAgICAgICAgIGZvciAoY29uc3Qgc3Agb2Ygc3ViKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVwbGFjZTVlVGFncyhzcCkuc3BsaXQoXCJcXG5cIikpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGJvZHkgPSBsaW5lcy5qb2luKFwiXFxuXCIpO1xuXG4gICAgb3V0LnB1c2goeyBwYXRoOiBgSXRlbXMvJHtmb2xkZXJ9LyR7c2FmZU5hbWV9Lm1kYCwgY29udGVudDogYCR7ZnJvbnRtYXR0ZXJ9XFxuXFxuJHtib2R5fWAgfSk7XG4gIH1cblxuICByZXR1cm4gb3V0LnNvcnQoKGEsYikgPT4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKSk7XG59IiwgIi8vIGZyb250bWF0dGVyIDVlIDIwMjVcblxuaW1wb3J0IHsgZ2V0RnVsbFNvdXJjZU5hbWUgfSBmcm9tIFwiLi9zb3VyY2VNYXBcIjtcbmltcG9ydCB7IGZvcm1hdFNpemVBYmJyZXYsIGZvcm1hdEFsaWdubWVudEFiYnJldiB9IGZyb20gXCIuLi9iZXN0aWFyeVwiO1xuaW1wb3J0IHsgZm9ybWF0UmFuZ2UsIGZvcm1hdFRpbWUsIGZvcm1hdER1cmF0aW9uLCBTQ0hPT0xfTUFQIH0gZnJvbSBcIi4uL3NwZWxsc1wiO1xuaW1wb3J0IHsgUFJPUEVSVFlfTUFQLCBEQU1BR0VfVFlQRV9NQVAsIElURU1fVFlQRV9NQVAgfSBmcm9tIFwiLi4vaXRlbXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi90YWdSZXBsYWNlclwiO1xuXG5mdW5jdGlvbiBibGFua1VuZGVmaW5lZCh2YWw6IGFueSk6IGFueSB7XG4gIHJldHVybiB2YWwgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiB2YWw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYXAoc3RyOiBhbnkpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIHN0ciAhPT0gXCJzdHJpbmdcIikgcmV0dXJuIFwiXCI7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59XG5cbmV4cG9ydCBjb25zdCBBQklMSVRZX0ZVTEw6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgc3RyOiBcIlN0cmVuZ3RoXCIsXG4gIGRleDogXCJEZXh0ZXJpdHlcIixcbiAgY29uOiBcIkNvbnN0aXR1dGlvblwiLFxuICBpbnQ6IFwiSW50ZWxsaWdlbmNlXCIsXG4gIHdpczogXCJXaXNkb21cIixcbiAgY2hhOiBcIkNoYXJpc21hXCIsXG59O1xuXG5leHBvcnQgY29uc3QgU0laRV9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIFQ6IFwiVGlueVwiLFxuICBTOiBcIlNtYWxsXCIsXG4gIE06IFwiTWVkaXVtXCIsXG4gIEw6IFwiTGFyZ2VcIixcbiAgSDogXCJIdWdlXCIsXG4gIEc6IFwiR2FyZ2FudHVhblwiXG59O1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgVW5pdmVyc2FsIGZyb250bWF0dGVyIGtleXMgXHUyNTAwXHUyNTAwXHUyNTAwICBcbmV4cG9ydCBjb25zdCBGTV9GSUVMRFMgPSB7XG4gIEFCSUxJVFlfQk9OVVNFUzogICAgXCJhYmlsaXR5X2JvbnVzZXNcIixcbiAgQUM6ICAgICAgICAgICAgICAgICBcIkFDXCIsXG4gIEFMSUdOTUVOVDogICAgICAgICAgXCJBbGlnbm1lbnRcIixcbiAgQU1NT19UWVBFOiAgICAgICAgICBcIkFtbW8gVHlwZVwiLFxuICBBUk1PUl9QUk9GSUNJRU5DSUVTOlwiYXJtb3ItcHJvZlwiLFxuICBBVFRBQ0tfVFlQRTogICAgICAgIFwiYXR0YWNrX3R5cGVcIixcbiAgQVRUVU5FTUVOVDogICAgICAgICBcIkF0dHVuZW1lbnRcIixcbiAgQVRUVU5FX1JFUTogICAgICAgICBcIkF0dHVuZV9SZXFcIixcbiAgQ0FTVElOR19USU1FOiAgICAgICBcImNhc3RpbmdfdGltZVwiLFxuICBDSEFSSVNNQTogICAgICAgICAgIFwiY2hhcmlzbWFcIixcbiAgQ0hBX01PRDogICAgICAgICAgICBcImNoYV9tb2RcIixcbiAgQ09OQ0VOVFJBVElPTjogICAgICBcImNvbmNlbnRyYXRpb25cIixcbiAgQ09ORElUSU9OX0lNTTogICAgICBcImNvbmRfaW1tdW5pdHlcIixcbiAgQ09OU1RJVFVUSU9OOiAgICAgICBcImNvbnN0aXR1dGlvblwiLFxuICBDT05fTU9EOiAgICAgICAgICAgIFwiY29uX21vZFwiLFxuICBDT1NUOiAgICAgICAgICAgICAgIFwiY29zdFwiLFxuICBDT01QT05FTlRTOiAgICAgICAgIFwiQ29tcG9uZW50c1wiLFxuICBDSEFMTEVOR0VfUkFUSU5HOiAgIFwiQ1JcIixcbiAgREFNQUdFX1RZUEU6ICAgICAgICBcImRhbWFnZV90eXBlXCIsXG4gIERBTUFHRV9UWVBFUzogICAgICAgXCJkYW1hZ2VUeXBlc1wiLFxuICBEQU1BR0U6ICAgICAgICAgICAgIFwiZGFtYWdlXCIsXG4gIERBTUFHRV9SRVM6ICAgICAgICAgXCJkbWdfcmVzaXN0YW5jZVwiLFxuICBEQU1BR0VfSU1NOiAgICAgICAgIFwiZG1nX2ltbXVuaXR5XCIsXG4gIERFWFRFUklUWTogICAgICAgICAgXCJkZXh0ZXJpdHlcIixcbiAgREVYX01PRDogICAgICAgICAgICBcImRleF9tb2RcIixcbiAgRFVSQVRJT046ICAgICAgICAgICBcImR1cmF0aW9uXCIsXG4gIFJVTEVTRVQ6ICAgICAgICAgICAgXCJydWxlc2V0XCIsXG4gIEhQOiAgICAgICAgICAgICAgICAgXCJIUFwiLFxuICBJTlRFTExJR0VOQ0U6ICAgICAgIFwiaW50ZWxsaWdlbmNlXCIsXG4gIElOVF9NT0Q6ICAgICAgICAgICAgXCJpbnRfbW9kXCIsXG4gIExBTkdVQUdFUzogICAgICAgICAgXCJsYW5ndWFnZXNcIixcbiAgTEVWRUw6ICAgICAgICAgICAgICBcImxldmVsXCIsXG4gIE1BR0lDQUw6ICAgICAgICAgICAgXCJtYWdpY2FsXCIsXG4gIE1BVEVSSUFMOiAgICAgICAgICAgXCJtYXRlcmlhbFwiLFxuICBOQU1FOiAgICAgICAgICAgICAgIFwibmFtZVwiLFxuICBQUk9QRVJUSUVTOiAgICAgICAgIFwicHJvcGVydGllc1wiLFxuICBSQU5HRTogICAgICAgICAgICAgIFwicmFuZ2VcIixcbiAgUkFSSVRZOiAgICAgICAgICAgICBcInJhcml0eVwiLFxuICBSRUxPQUQ6ICAgICAgICAgICAgIFwicmVsb2FkXCIsXG4gIFJJVFVBTDogICAgICAgICAgICAgXCJyaXR1YWxcIixcbiAgU0FWRTogICAgICAgICAgICAgICBcInNhdmVcIixcbiAgU0FWSU5HX1RIUk9XUzogICAgICBcInNhdmluZ190aHJvd3NcIixcbiAgU0NIT09MOiAgICAgICAgICAgICBcInNjaG9vbFwiLFxuICBTRU5TRVM6ICAgICAgICAgICAgIFwic2Vuc2VzXCIsXG4gIFNJWkU6ICAgICAgICAgICAgICAgXCJzaXplXCIsXG4gIFNLSUxMUzogICAgICAgICAgICAgXCJza2lsbHNcIixcbiAgU0tJTExfQ0hPSUNFX0xJU1Q6ICBcInNraWxsX2Nob2ljZV9saXN0XCIsXG4gIFNPTUFUSUM6ICAgICAgICAgICAgXCJzb21hdGljXCIsXG4gIFNPVVJDRTogICAgICAgICAgICAgXCJzb3VyY2VcIixcbiAgU1BFQ0lFUzogICAgICAgICAgICBcInNwZWNpZXNcIixcbiAgU1BFRUQ6ICAgICAgICAgICAgICBcInNwZWVkXCIsXG4gIFNQRUxMX0NBU1RfTU9EOiAgICAgXCJTcGVsbCBDYXN0IE1vZFwiLFxuICBTUEVMTF9SQU5HRTogICAgICAgIFwiUmFuZ2VcIixcbiAgU1RFQUxUSF9ESVNBRFZBTlRBR0U6IFwic3RlYWx0aERpc2FkdmFudGFnZVwiLFxuICBTVFJFTkdUSDogICAgICAgICAgIFwic3RyZW5ndGhcIixcbiAgU1RSX01PRDogICAgICAgICAgICBcInN0cl9tb2RcIixcbiAgU1VCUkFDRVM6ICAgICAgICAgICBcInN1YnJhY2VzXCIsXG4gIFRPT0xfUFJPRklDSUVOQ0lFUzogXCJ0b29sLXByb2ZcIixcbiAgVE9PTF9DSE9JQ0VfTElTVDogIFwidG9vbF9jaG9pY2VfbGlzdFwiLFxuICBUUkFJVFM6ICAgICAgICAgICAgIFwidHJhaXRzXCIsXG4gIFRZUEU6ICAgICAgICAgICAgICAgXCJ0eXBlXCIsXG4gIFZBUklBTlQ6ICAgICAgICAgICAgXCJWYXJpYW50XCIsXG4gIFZFUkJBTDogICAgICAgICAgICAgXCJ2ZXJiYWxcIixcbiAgV0VBUE9OX1BST0ZJQ0lFTkNJRVM6IFwid2VhcG9uLXByb2ZcIixcbiAgV0VJR0hUOiAgICAgICAgICAgICBcIndlaWdodFwiLFxuICBXSVNET006ICAgICAgICAgICAgIFwid2lzZG9tXCIsXG4gIFdJU19NT0Q6ICAgICAgICAgICAgXCJ3aXNfbW9kXCIsXG59IGFzIGNvbnN0O1xuXG5leHBvcnQgdHlwZSBGTUtleSA9IGtleW9mIHR5cGVvZiBGTV9GSUVMRFM7XG5leHBvcnQgdHlwZSBGcm9udG1hdHRlciA9IFBhcnRpYWw8UmVjb3JkPHR5cGVvZiBGTV9GSUVMRFNbRk1LZXldLCB1bmtub3duPj47XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBEZWZpbml0aW9uIG9mIGEgc2luZ2xlIGZpZWxkIG1hcHBpbmcgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkRGVmIHtcbiAgLyoqIFdoaWNoIGNhbGxcdTIwMTBzaWduIChrZXkgaW4gRk1fRklFTERTKSAqL1xuICBjYWxsU2lnbjogRk1LZXk7XG4gIC8qKiBXaGljaCBKU09OIHByb3BlcnR5IHRvIHJlYWQgKi9cbiAganNvbktleTogIHN0cmluZyB8IHN0cmluZ1tdO1xuICAvKiogT3B0aW9uYWwgdHJhbnNmb3JtZXI6IHJhdyBKU09OIFx1MjE5MiBmaW5hbCB2YWx1ZSAqL1xuICBjb252PzogICAgKHJhdzogYW55LCBhbGxKc29uPzogYW55KSA9PiB1bmtub3duO1xufVxuXG5jb25zdCB1bmlmaWVkQXJtb3JQcm9mcyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+XG4gIEFycmF5LmlzQXJyYXkodmFsPy5hcm1vcikgPyB2YWwuYXJtb3IubWFwKGNhcCkgOlxuICBBcnJheS5pc0FycmF5KHZhbCkgPyB2YWwubWFwKGNhcCkgOiBbXTtcblxuLy8gZnJvbnRtYXR0ZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHVuaWZpZWRXZWFwb25Qcm9mcyh2YWw6IGFueSk6IHN0cmluZ1tdIHtcbiAgLy8gcHVsbCB0aGUgXHUyMDFDd2VhcG9uc1x1MjAxRCBhcnJheSBvZmYgZWl0aGVyIGEgcmF3IGFycmF5IG9yIGEgc3RhcnRpbmdQcm9maWNpZW5jaWVzIG9iamVjdFxuICBjb25zdCByYXdBcnI6IGFueVtdID0gQXJyYXkuaXNBcnJheSh2YWw/LndlYXBvbnMpXG4gICAgPyB2YWwud2VhcG9uc1xuICAgIDogQXJyYXkuaXNBcnJheSh2YWwpXG4gICAgPyB2YWxcbiAgICA6IFtdO1xuXG4gIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gIGZ1bmN0aW9uIGhhbmRsZU9uZShlbnRyeTogYW55KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkpKSB7XG4gICAgICAvLyBmbGF0dGVuIG5lc3RlZCBhcnJheXNcbiAgICAgIGVudHJ5LmZvckVhY2goaGFuZGxlT25lKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBsaXQgPSBlbnRyeS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChsaXQgPT09IFwic2ltcGxlXCIpIHtcbiAgICAgICAgb3V0LmFkZChcIlNpbXBsZSBXZWFwb25zXCIpO1xuICAgICAgfSBlbHNlIGlmIChsaXQgPT09IFwibWFydGlhbFwiKSB7XG4gICAgICAgIG91dC5hZGQoXCJNYXJ0aWFsIFdlYXBvbnNcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBkZXRlY3QgdGFnZ2VkIGl0ZW1zIHZzIHNpbXBsZSB3b3Jkc1xuICAgICAgICBjb25zdCB0ZXh0ID0gZW50cnkuc3RhcnRzV2l0aChcIntAXCIpXG4gICAgICAgICAgPyByZXBsYWNlNWVUYWdzKGVudHJ5KVxuICAgICAgICAgIDogY2FwKGVudHJ5KTtcbiAgICAgICAgb3V0LmFkZCh0ZXh0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZW50cnkgJiYgdHlwZW9mIGVudHJ5ID09PSBcIm9iamVjdFwiICYmIGVudHJ5LnByb2ZpY2llbmN5KSB7XG4gICAgICAvLyB7IHByb2ZpY2llbmN5OiBcImZpcmVhcm1zXCIsIG9wdGlvbmFsOiB0cnVlIH1cbiAgICAgIGNvbnN0IG5hbWUgPSBjYXAoZW50cnkucHJvZmljaWVuY3kpO1xuICAgICAgb3V0LmFkZChlbnRyeS5vcHRpb25hbCA/IGAke25hbWV9IChvcHRpb25hbClgIDogbmFtZSk7XG4gICAgfVxuICB9XG5cbiAgcmF3QXJyLmZvckVhY2goaGFuZGxlT25lKTtcbiAgcmV0dXJuIFsuLi5vdXRdO1xufVxuXG5cbmNvbnN0IHVuaWZpZWRTYXZlcyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgcmV0dXJuIHZhbC5tYXAoKGs6IHN0cmluZykgPT5cbiAgICAgICAgKHsgc3RyOiBcIlN0cmVuZ3RoXCIsIGRleDogXCJEZXh0ZXJpdHlcIiwgY29uOiBcIkNvbnN0aXR1dGlvblwiLFxuICAgICAgICAgIGludDogXCJJbnRlbGxpZ2VuY2VcIiwgd2lzOiBcIldpc2RvbVwiLCBjaGE6IFwiQ2hhcmlzbWFcIiB9W2tdID8/IGsudG9VcHBlckNhc2UoKSlcbiAgICAgICk7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgdmFsICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbCkubWFwKGsgPT4gay50b1VwcGVyQ2FzZSgpKTtcbiAgfVxuICByZXR1cm4gW107XG59O1xuXG5leHBvcnQgY29uc3QgdW5pZmllZFNraWxscyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgLy8gMSkgXHUyMDFDQmVzdGlhcnlcdTIwMUQgc3R5bGU6IGZsYXQgb2JqZWN0IG1hcHBpbmcgc2tpbGxcdTIxOTJtb2RpZmllclxuICBpZiAoXG4gICAgdmFsICYmXG4gICAgIUFycmF5LmlzQXJyYXkodmFsKSAmJlxuICAgIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiZcbiAgICAvLyBlbnN1cmUgZXZlcnkgdmFsdWUgaXMgYSBzdHJpbmcgb3IgbnVtYmVyXG4gICAgT2JqZWN0LnZhbHVlcyh2YWwpLmV2ZXJ5KHYgPT4gdHlwZW9mIHYgPT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIHYgPT09IFwibnVtYmVyXCIpXG4gICkge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyh2YWwpLm1hcChcbiAgICAgIChbc2tpbGwsIG1vZF0pID0+IGAke2NhcChza2lsbCl9ICR7bW9kfWAudHJpbSgpXG4gICAgKTtcbiAgfVxuXG4gIC8vIDIpIG5lc3RlZCB1bmRlciAuc2tpbGxzIC8gLnNraWxsUHJvZmljaWVuY2llcyAvIC5za2lsbFByb2ZcbiAgaWYgKHZhbCAmJiAhQXJyYXkuaXNBcnJheSh2YWwpICYmIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIpIHtcbiAgICBjb25zdCBuZXN0ZWQgPSAodmFsIGFzIGFueSkuc2tpbGxzXG4gICAgICA/PyAodmFsIGFzIGFueSkuc2tpbGxQcm9mXG4gICAgICA/PyAodmFsIGFzIGFueSkuc2tpbGxQcm9maWNpZW5jaWVzO1xuICAgIHJldHVybiB1bmlmaWVkU2tpbGxzKG5lc3RlZCk7XG4gIH1cblxuICAvLyAzKSBhcnJheS1zdHlsZVxuICBpZiAoIUFycmF5LmlzQXJyYXkodmFsKSkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICBmb3IgKGNvbnN0IGUgb2YgdmFsKSB7XG4gICAgLy8gM2EpIHsgYW55OiBOIH1cbiAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgKGUgYXMgYW55KS5hbnkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIG91dC5hZGQoYENob29zZSAkeyhlIGFzIGFueSkuYW55fWApO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIC8vIDNiKSB7IGNob29zZTogeyBjb3VudCwgXHUyMDI2IH0gfVxuICAgIGlmIChlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIChlIGFzIGFueSkuY2hvb3NlKSB7XG4gICAgICBjb25zdCBjbnQgPSAoZSBhcyBhbnkpLmNob29zZS5jb3VudCA/PyAxO1xuICAgICAgb3V0LmFkZChgQ2hvb3NlICR7Y250fWApO1xuICAgIH1cbiAgICAvLyAzYykgZml4ZWQgZmxhZ3MgZm9vOiB0cnVlXG4gICAgaWYgKGUgJiYgdHlwZW9mIGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGUpKSB7XG4gICAgICAgIGlmICh2ID09PSB0cnVlKSBvdXQuYWRkKGNhcChrKSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIDNkKSBsaXRlcmFsIHN0cmluZ3NcbiAgICBpZiAodHlwZW9mIGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIG91dC5hZGQoY2FwKGUpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gWy4uLm91dF07XG59O1xuXG5cbiBcbmV4cG9ydCBjb25zdCB1bmlmaWVkVG9vbFByb2ZzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT4ge1xuICAvLyBwdWxsIG5lc3RlZCBhcnJheSBpZiBzb21lb25lIHBhc3NlZCB5b3UgdGhlIHdob2xlIHN0YXJ0aW5nUHJvZmljaWVuY2llcyBvYmpcbiAgbGV0IGVudHJpZXM6IGFueVtdID0gQXJyYXkuaXNBcnJheSh2YWwpID8gdmFsXG4gICAgOiBBcnJheS5pc0FycmF5KHZhbD8udG9vbFByb2ZpY2llbmNpZXMpID8gdmFsLnRvb2xQcm9maWNpZW5jaWVzXG4gICAgOiBBcnJheS5pc0FycmF5KHZhbD8udG9vbHMpICAgICAgICAgICAgID8gdmFsLnRvb2xzXG4gICAgOiBbXTtcblxuICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgbGV0IHNhd0Nob29zZSA9IGZhbHNlO1xuXG4gIGZvciAoY29uc3QgZSBvZiBlbnRyaWVzKSB7XG4gICAgaWYgKHR5cGVvZiBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBvdXQuYWRkKGNhcChlKSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoZT8uY2hvb3NlKSB7XG4gICAgICBjb25zdCBjbnQgPSBlLmNob29zZS5jb3VudCA/PyAxO1xuICAgICAgc2F3Q2hvb3NlID0gdHJ1ZTtcbiAgICAgIG91dC5hZGQoYENob29zZSAke2NudH1gKTtcbiAgICB9XG5cbiAgICAvLyBwdWxsIG91dCBhbnkgZml4ZWQgXHUyMDFDZm9vOiB0cnVlXHUyMDFEIG9yIG51bWVyaWMgXHUyMDFDYW55Rm9vOiBOXHUyMDFEXG4gICAgZm9yIChjb25zdCBbayx2XSBvZiBPYmplY3QuZW50cmllcyhlKSkge1xuICAgICAgaWYgKHYgPT09IHRydWUpIHtcbiAgICAgICAgb3V0LmFkZChjYXAoaykpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdiA9PT0gXCJudW1iZXJcIiAmJiBrLnN0YXJ0c1dpdGgoXCJhbnlcIikpIHtcbiAgICAgICAgLy8gZS5nLiBhbnlBcnRpc2Fuc1Rvb2w6MVxuICAgICAgICBjb25zdCByYXcgPSBrLnJlcGxhY2UoL15hbnkvLCBcIlwiKTtcbiAgICAgICAgY29uc3Qgc3BhY2VkID0gcmF3XG4gICAgICAgICAgLnJlcGxhY2UoLyhbYS16XSkoW0EtWl0pL2csIFwiJDEgJDJcIilcbiAgICAgICAgICAuc3BsaXQoXCIgXCIpXG4gICAgICAgICAgLm1hcChjYXApXG4gICAgICAgICAgLmpvaW4oXCIgXCIpO1xuICAgICAgICBvdXQuYWRkKGBDaG9vc2UgJHt2fSAke3NwYWNlZH1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gWy4uLm91dF07XG59O1xuXG5leHBvcnQgY29uc3QgQUxMX0ZJRUxEX0RFRlM6IEZpZWxkRGVmW10gPSBbXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDb3JlIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIk5BTUVcIiwgIGpzb25LZXk6IFwibmFtZVwiIH0sXG57XG4gIGNhbGxTaWduOiBcIlNPVVJDRVwiLFxuICBqc29uS2V5OiBbXCJzb3VyY2VcIl0sXG4gIGNvbnY6IChyYXc6IGFueSwgYWxsSnNvbjogYW55KTogc3RyaW5nW10gPT4ge1xuICAgIGNvbnN0IG91dCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IGVkaXRpb25JZCA9IChhbGxKc29uIGFzIGFueSkuX2VkaXRpb25JZDtcblxuICAgIC8vIDEpIHByaW1hcnkgc291cmNlKHMpXG4gICAgY29uc3QgYXJyID0gQXJyYXkuaXNBcnJheShyYXcpID8gcmF3IDogW3Jhd107XG4gICAgYXJyLmZvckVhY2goc3JjID0+IHtcbiAgICAgIG91dC5hZGQoZ2V0RnVsbFNvdXJjZU5hbWUoc3JjLCBlZGl0aW9uSWQpKTtcbiAgICB9KTtcblxuICAgIC8vIDIpIGFueSBvdGhlclNvdXJjZXMgZW50cmllc1xuICAgIGZvciAoY29uc3Qgb3Mgb2YgYWxsSnNvbi5vdGhlclNvdXJjZXMgPz8gW10pIHtcbiAgICAgIGlmIChvcyAmJiB0eXBlb2Ygb3Muc291cmNlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG91dC5hZGQoZ2V0RnVsbFNvdXJjZU5hbWUob3Muc291cmNlLCBlZGl0aW9uSWQpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAzKSByZXByaW50ZWRBcyBlbnRyaWVzIChndWFyZCBiZWZvcmUgc3BsaXR0aW5nKVxuICAgIGZvciAoY29uc3QgcmVwIG9mIGFsbEpzb24ucmVwcmludGVkQXMgPz8gW10pIHtcbiAgICAgIC8vIGVuc3VyZSB3ZSBoYXZlIGEgc3RyaW5nIHRvIHNwbGl0XG4gICAgICBjb25zdCByZXBTdHIgPSB0eXBlb2YgcmVwID09PSBcInN0cmluZ1wiID8gcmVwIDogU3RyaW5nKHJlcCk7XG4gICAgICBjb25zdCBwYXJ0cyA9IHJlcFN0ci5zcGxpdChcInxcIik7XG4gICAgICAvLyBpZiB0aGVyZSdzIG5vIHBpcGUsIHBhcnRzWzFdIHdpbGwgYmUgdW5kZWZpbmVkLCBzbyBmYWxsYmFjayB0byBwYXJ0c1swXVxuICAgICAgY29uc3Qgc3JjID0gcGFydHNbMV0gPz8gcGFydHNbMF07XG4gICAgICBvdXQuYWRkKGdldEZ1bGxTb3VyY2VOYW1lKHNyYywgZWRpdGlvbklkKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFsuLi5vdXRdO1xuICB9XG59LFxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiQVJNT1JfUFJPRklDSUVOQ0lFU1wiLCAganNvbktleTogW1wiYXJtb3JQcm9maWNpZW5jaWVzXCIsIFwiYXJtb3JQcm9mc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSwgY29udjogdW5pZmllZEFybW9yUHJvZnMgfSxcbiAgeyBcbiAgICBjYWxsU2lnbjogXCJXRUFQT05fUFJPRklDSUVOQ0lFU1wiLFxuICAgIGpzb25LZXk6IFtcIndlYXBvblByb2ZpY2llbmNpZXNcIixcIndlYXBvblByb2ZzXCIsXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gICAgY29udjogdW5pZmllZFdlYXBvblByb2ZzXG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiVE9PTF9QUk9GSUNJRU5DSUVTXCIsICAganNvbktleTogW1widG9vbFByb2ZpY2llbmNpZXNcIiwgXCJ0b29sUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sIGNvbnY6IHVuaWZpZWRUb29sUHJvZnMgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgICBqc29uS2V5OiBbXCJ0b29sUHJvZmljaWVuY2llc1wiLCBcInRvb2xQcm9mc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiAocmF3OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IGFyciA9IEFycmF5LmlzQXJyYXkocmF3KVxuICAgICAgICA/IHJhd1xuICAgICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py50b29sUHJvZmljaWVuY2llcylcbiAgICAgICAgPyByYXcudG9vbFByb2ZpY2llbmNpZXNcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8udG9vbHMpXG4gICAgICAgID8gcmF3LnRvb2xzXG4gICAgICAgIDogW107XG4gICAgICBjb25zdCBjaG9pY2UgPSBhcnIuZmluZCgoZTogYW55KSA9PiBlPy5jaG9vc2UpO1xuICAgICAgcmV0dXJuIGNob2ljZT8uY2hvb3NlPy5mcm9tPy5tYXAoKHM6IHN0cmluZykgPT4gY2FwKHMpKSA/PyBbXTtcbiAgICB9XG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiU0FWSU5HX1RIUk9XU1wiLCAgICAgICAganNvbktleTogW1wic2F2ZVwiLCBcInByb2ZpY2llbmN5XCJdLCBjb252OiB1bmlmaWVkU2F2ZXMgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIlNLSUxMU1wiLFxuICAgIGpzb25LZXk6IFtcInNraWxsXCIsIFwic2tpbGxQcm9mXCIsIFwic2tpbGxQcm9maWNpZW5jaWVzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IHVuaWZpZWRTa2lsbHNcbiAgfSxcblxuICB7XG4gICAgY2FsbFNpZ246IFwiU0tJTExfQ0hPSUNFX0xJU1RcIixcbiAgICBqc29uS2V5OiBbXCJza2lsbFwiLCBcInNraWxsUHJvZlwiLCBcInNraWxsUHJvZmljaWVuY2llc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSxcbiAgICBjb252OiAocmF3OiBhbnkpID0+IHtcbiAgICAgIC8vIG5vcm1hbGl6ZSBpbnRvIGFuIGFycmF5IG9mIGVudHJpZXNcbiAgICAgIGNvbnN0IGFycjogYW55W10gPSBBcnJheS5pc0FycmF5KHJhdylcbiAgICAgICAgPyByYXdcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8uc2tpbGxQcm9maWNpZW5jaWVzKVxuICAgICAgICA/IHJhdy5za2lsbFByb2ZpY2llbmNpZXNcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8uc2tpbGxzKVxuICAgICAgICA/IHJhdy5za2lsbHNcbiAgICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8uc2tpbGxQcm9mKVxuICAgICAgICA/IHJhdy5za2lsbFByb2ZcbiAgICAgICAgOiBbXTtcblxuICAgICAgLy8gZmluZCB0aGUgb25lIGVudHJ5IHRoYXQgcmVwcmVzZW50cyB0aGUgXHUyMDFDY2hvb3NlXHUyMDFEIGJ1Y2tldFxuICAgICAgY29uc3QgY2hvaWNlT2JqID0gYXJyLmZpbmQoZSA9PiBlPy5jaG9vc2UgfHwgdHlwZW9mIGUuYW55ID09PSBcIm51bWJlclwiKTtcbiAgICAgIGlmICghY2hvaWNlT2JqKSByZXR1cm4gW107XG5cbiAgICAgIC8vIGV4cGxpY2l0IFx1MjAxQ2Nob29zZSBmcm9tIFsgLi4uIF1cdTIwMURcbiAgICAgIGlmIChjaG9pY2VPYmouY2hvb3NlICYmIEFycmF5LmlzQXJyYXkoY2hvaWNlT2JqLmNob29zZS5mcm9tKSkge1xuICAgICAgICByZXR1cm4gY2hvaWNlT2JqLmNob29zZS5mcm9tLm1hcChjYXApO1xuICAgICAgfVxuXG4gICAgICAvLyB0aGUgXHUyMDFDYW55OiAzXHUyMDFEIHNob3J0aGFuZCBcdTIxOTIgb2ZmZXIgZXZlcnkgc2tpbGxcbiAgICAgIGlmICh0eXBlb2YgY2hvaWNlT2JqLmFueSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAvLyBTS0lMTF9PUFRJT05TIGlzIHlvdXIgY29uc3QgW1wiQWNyb2JhdGljc1wiLCBcIkFuaW1hbCBIYW5kbGluZ1wiLCBcdTIwMjZdXG4gICAgICAgIHJldHVybiBTS0lMTF9PUFRJT05TO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIlNQRUxMX0NBU1RfTU9EXCIsanNvbktleTogXCJzcGVsbGNhc3RpbmdBYmlsaXR5XCIsICBcbiAgICBjb252OiAocmF3KSA9PiB7XG4gICAgLy8gcmF3IG1pZ2h0IGJlIFwiY2hhXCIgb3IgXCJDSEFcIlxuICAgIGNvbnN0IGtleSA9IFN0cmluZyhyYXcpLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIEFCSUxJVFlfRlVMTFtrZXldIHx8IGtleS50b1VwcGVyQ2FzZSgpO1xuICB9fSxcblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTcGVsbHMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiTEVWRUxcIiwgICAgICAgICBqc29uS2V5OiBcImxldmVsXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTQ0hPT0xcIiwgICAgICAgIGpzb25LZXk6IFwic2Nob29sXCIsICAgY29udjogcyA9PiBTQ0hPT0xfTUFQW3NdID8/IHMgfSxcbiAgeyBjYWxsU2lnbjogXCJDQVNUSU5HX1RJTUVcIiwgIGpzb25LZXk6IFwidGltZVwiLCAgICAgY29udjogZm9ybWF0VGltZSB9LFxuICB7IGNhbGxTaWduOiBcIlNQRUxMX1JBTkdFXCIsICAganNvbktleTogXCJyYW5nZVwiLCAgICBjb252OiBmb3JtYXRSYW5nZSB9LFxuICB7IGNhbGxTaWduOiBcIkRVUkFUSU9OXCIsICAgICAganNvbktleTogXCJkdXJhdGlvblwiLCBjb252OiBmb3JtYXREdXJhdGlvbiB9LFxuICB7IGNhbGxTaWduOiBcIlZFUkJBTFwiLCAgICAgICAganNvbktleTogXCJjb21wb25lbnRzXCIsIGNvbnY6IChjOmFueSkgPT4gISFjLnYgfSxcbiAgeyBjYWxsU2lnbjogXCJTT01BVElDXCIsICAgICAgIGpzb25LZXk6IFwiY29tcG9uZW50c1wiLCBjb252OiAoYzphbnkpID0+ICEhYy5zIH0sXG4gIHsgY2FsbFNpZ246IFwiTUFURVJJQUxcIiwgICAgICBqc29uS2V5OiBcImNvbXBvbmVudHNcIiwgY29udjogKGM6YW55KSA9PiAhIWMubSB9LFxuICB7IGNhbGxTaWduOiBcIkNPTVBPTkVOVFNcIixcbiAgICBqc29uS2V5OiAgXCJjb21wb25lbnRzXCIsXG4gICAgY29udjogKGM6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgICAgIGlmICghYy5tKSByZXR1cm4gW107XG5cbiAgICAgIGNvbnN0IHJhdyA9IEFycmF5LmlzQXJyYXkoYy5tKSA/IGMubSA6IFtjLm1dO1xuXG4gICAgICByZXR1cm4gcmF3XG4gICAgICAgIC5tYXAoKGl0ZW06IGFueSk6IHN0cmluZyB8IG51bGwgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgaWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGl0ZW0udGV4dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0udGV4dDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pXG4gICAgICAgIC5maWx0ZXIoKGNvbXA6IHN0cmluZyB8IG51bGwpOiBjb21wIGlzIHN0cmluZyA9PiBjb21wICE9PSBudWxsKTtcbiAgICB9XG4gIH0sIFxuICB7IGNhbGxTaWduOiBcIkFUVEFDS19UWVBFXCIsICAganNvbktleTogXCJhdHRhY2tUeXBlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfVFlQRVwiLCAgIGpzb25LZXk6IFwiZGFtYWdlSW5mbGljdFwiLCBjb252OiBkID0+IEFycmF5LmlzQXJyYXkoZCkgPyBkWzBdIDogZCB9LFxuICB7IGNhbGxTaWduOiBcIlJJVFVBTFwiLCAgICAgICAganNvbktleTogXCJyaXR1YWxcIiB9LFxuICB7IGNhbGxTaWduOiBcIkNPTkNFTlRSQVRJT05cIiwganNvbktleTogXCJkdXJhdGlvblwiLCBjb252OiBkcyA9PiBBcnJheS5pc0FycmF5KGRzKSAmJiBkcy5zb21lKCh4OmFueSk9PiB4LmNvbmNlbnRyYXRpb24pIH0sXG4gIHsgY2FsbFNpZ246IFwiU0FWRVwiLCAgICAgICAgICBqc29uS2V5OiBcInNhdmVBdHRyXCIgfSxcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3BlY2llcyAvIENyZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJTUEVDSUVTXCIsIGpzb25LZXk6IFwibmFtZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU0laRVwiLCBqc29uS2V5OiBcInNpemVcIiwgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICAvLyBoYW5kbGUgW1wiU1wiLFwiTVwiXSBvciBqdXN0IFwiTFwiXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShyYXcpKSB7XG4gICAgICAgIHJldHVybiByYXcubWFwKHIgPT4gU0laRV9NQVBbcl0gfHwgcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gU0laRV9NQVBbcmF3XSB8fCByYXc7XG4gICAgICB9XG4gICAgfVxuICB9LFxuICAgIHtcbiAgY2FsbFNpZ246IFwiU1BFRURcIixcbiAganNvbktleTogICBcInNwZWVkXCIsXG4gIGNvbnY6IChzcDogbnVtYmVyIHwgUmVjb3JkPHN0cmluZywgYW55PikgPT4ge1xuICAgIC8vIGhhbmRsZSBib3RoIG51bWVyaWMgc3BlZWRzIGFuZCBvYmplY3Qgc3BlZWRzXG4gICAgaWYgKHR5cGVvZiBzcCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuIFtgV2FsayAke3NwfSBmdC5gXTtcbiAgICB9XG4gICAgaWYgKCFzcCB8fCB0eXBlb2Ygc3AgIT09IFwib2JqZWN0XCIpIHJldHVybiBbXTtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoc3ApXG4gICAgICAuZmlsdGVyKChbbW9kZV0pID0+IG1vZGUgIT09IFwiY2FuSG92ZXJcIilcbiAgICAgIC5tYXAoKFttb2RlLCB2XSkgPT4ge1xuICAgICAgICBjb25zdCBuID0gdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgdiAhPT0gbnVsbCAmJiBcIm51bWJlclwiIGluIHYgPyAodiBhcyBhbnkpLm51bWJlciA6IHY7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gbW9kZSA9PT0gXCJ3YWxrXCIgPyBcIldhbGtcIiA6IGNhcChtb2RlKTtcbiAgICAgICAgcmV0dXJuIGAke2xhYmVsfSAke259IGZ0LmA7XG4gICAgICB9KTtcbiAgfSxcbn0sXG57IGNhbGxTaWduOiBcIkxBTkdVQUdFU1wiLCBqc29uS2V5OiBbXCJsYW5ndWFnZXNcIiwgXCJsYW5ndWFnZVByb2ZpY2llbmNpZXNcIl0sIGNvbnY6IGFyciA9PiB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIFtdO1xuICAgICAgY29uc3Qgb3V0OiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZm9yIChjb25zdCBscCBvZiBhcnIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBscCA9PT0gXCJzdHJpbmdcIikgb3V0LnB1c2goY2FwKGxwKSk7XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBscCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIGZvciAoY29uc3QgW2xhbmcsIHZhbF0gb2YgT2JqZWN0LmVudHJpZXMobHApKSB7XG4gICAgICAgICAgICBpZiAodmFsKSBvdXQucHVzaChjYXAobGFuZykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIFsuLi5uZXcgU2V0KG91dCldO1xuICB9fSxcbiAgeyBjYWxsU2lnbjogXCJTRU5TRVNcIiwganNvbktleTogXCJzZW5zZXNcIiwgY29udjogc2VuID0+IHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlbikpIHJldHVybiBzZW4ubWFwKChzOnN0cmluZyk9PnMucmVwbGFjZSgvXlxcZCtcXHMqLyxcIlwiKS5yZXBsYWNlKC9eLi8sYz0+Yy50b1VwcGVyQ2FzZSgpKSk7XG4gICAgICBpZiAoc2VuICYmIHR5cGVvZiBzZW49PT1cIm9iamVjdFwiKSByZXR1cm4gT2JqZWN0LmVudHJpZXMoc2VuKS5tYXAoKFtrLHZdKT0+YCR7ay5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStrLnNsaWNlKDEpfSAke3Z9YCk7XG4gICAgICByZXR1cm4gW107XG4gIH19LCBcbntcbiAgY2FsbFNpZ246IFwiVFJBSVRTXCIsXG4gIGpzb25LZXk6IFtcImNsYXNzRmVhdHVyZXNcIiwgXCJlbnRyaWVzXCJdLFxuICBjb252OiAocmF3OiBhbnksIGFsbEpzb246IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgICAvLyBwdWxsIHRoZSBjbGFzcyByZWNvcmQgc28gd2Uga25vdyBpdHMgZGlzcGxheSBuYW1lXG4gICAgY29uc3QgY2xzUmVjID0gQXJyYXkuaXNBcnJheShhbGxKc29uLmNsYXNzKSA/IGFsbEpzb24uY2xhc3NbMF0gOiBhbGxKc29uO1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9IHR5cGVvZiBjbHNSZWMubmFtZSA9PT0gXCJzdHJpbmdcIiA/IGNsc1JlYy5uYW1lIDogXCJcIjtcblxuICAgIC8vIG5hbWVzIHdlIG5ldmVyIHdhbnQgdG8gZW1pdFxuICAgIGNvbnN0IG9taXQgPSBuZXcgU2V0KFtcbiAgICAgIFwiQWJpbGl0eSBTY29yZSBJbXByb3ZlbWVudFwiLFxuICAgICAgXCJBcmNoZXR5cGUgRmVhdHVyZVwiLFxuICAgICAgXCJTdWJjbGFzcyBGZWF0dXJlXCIsXG4gICAgICAvLyBhZGQgbW9yZSBpZiB5b3UgbGlrZVx1MjAyNlxuICAgIF0pO1xuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAgIC8vIDEpIGlmIHRoZXJlJ3MgYSBjbGFzc0ZlYXR1cmVzIGFycmF5LCB1c2UgaXRcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhbGxKc29uLmNsYXNzRmVhdHVyZXMpKSB7XG4gICAgICByZXR1cm4gYWxsSnNvbi5jbGFzc0ZlYXR1cmVzLmZsYXRNYXAoKGZlYXQ6IGFueSkgPT4ge1xuICAgICAgICAvLyBza2lwIHN1YmNsYXNzXHUyMDEwaW5qZWN0ZWQgZmVhdHVyZXMgZW50aXJlbHlcbiAgICAgICAgaWYgKGZlYXQgJiYgdHlwZW9mIGZlYXQgPT09IFwib2JqZWN0XCIgJiYgZmVhdC5nYWluU3ViY2xhc3NGZWF0dXJlKSByZXR1cm4gW107XG5cbiAgICAgICAgLy8gbm9ybWFsaXplIHRvIGEgc3RyaW5nXG4gICAgICAgIGNvbnN0IHJhd05hbWUgPVxuICAgICAgICAgIHR5cGVvZiBmZWF0ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IGZlYXRcbiAgICAgICAgICAgIDogdHlwZW9mIGZlYXQuY2xhc3NGZWF0dXJlID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IGZlYXQuY2xhc3NGZWF0dXJlXG4gICAgICAgICAgICA6IFwiXCI7XG5cbiAgICAgICAgLy8gZHJvcCBldmVyeXRoaW5nIGFmdGVyIHRoZSBmaXJzdCBcdTIwMUN8XHUyMDFEXG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdOYW1lLnNwbGl0KFwifFwiKVswXS50cmltKCk7XG4gICAgICAgIGlmICghbmFtZSB8fCBvbWl0LmhhcyhuYW1lKSB8fCBzZWVuLmhhcyhuYW1lKSkgcmV0dXJuIFtdO1xuICAgICAgICBzZWVuLmFkZChuYW1lKTtcblxuICAgICAgICAvLyBidWlsZCBhIG5pY2UgYW5jaG9yIChtdXN0IG1hdGNoIHlvdXIgaGVhZGVycylcbiAgICAgICAgY29uc3QgYW5jaG9yID0gbmFtZVxuICAgICAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgXCJcIikgICAgLy8gc3RyaXAgcHVuY3R1YXRpb25cbiAgICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCBcIiBcIikgICAgICAgLy8gY29sbGFwc2Ugc3BhY2VzXG4gICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIC5yZXBsYWNlKC9cXGJcXHcvZywgKGM6IGFueSkgPT4gYy50b1VwcGVyQ2FzZSgpKTsgLy8gVGl0bGUgQ2FzZVxuXG4gICAgICAgIC8vIHByb2R1Y2UgYSBmaWxlLWFuY2hvciBsaW5rXG4gICAgICAgIHJldHVybiBgW1ske2NsYXNzTmFtZX0jJHthbmNob3J9fCR7bmFtZX1dXWA7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAyKSBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIHlvdXIgb2xkIGVudHJpZXMtYmFzZWQgbG9naWNcbiAgICBjb25zdCBlbnRzID0gQXJyYXkuaXNBcnJheShyYXcpID8gcmF3IDogW107XG4gICAgY29uc3QgZmVhdHVyZU5hbWVzID0gZW50c1xuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiBlPy5kYXRhPy5pc0ZlYXR1cmUgJiYgdHlwZW9mIGUubmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgIC5tYXAoKGU6IGFueSkgPT4gZS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKS50cmltKCkpO1xuICAgIGlmIChmZWF0dXJlTmFtZXMubGVuZ3RoKSByZXR1cm4gZmVhdHVyZU5hbWVzO1xuXG4gICAgcmV0dXJuIGVudHNcbiAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT4gZSAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKVxuICAgICAgLm1hcCgoZTogYW55KSA9PiBlLm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpLnRyaW0oKSk7XG4gIH0sXG59LFxuXG5cbiAgeyBjYWxsU2lnbjogXCJBQ1wiLCBqc29uS2V5OiBcImFjXCIsIGNvbnY6IGEgPT4gQXJyYXkuaXNBcnJheShhKT9hWzBdLmFjOmEgfSxcbiAgeyBjYWxsU2lnbjogXCJIUFwiLCBqc29uS2V5OiBcImhwXCIsIGNvbnY6IGhwID0+IGhwPy5hdmVyYWdlID8/IGhwIH0sXG4gIHsgY2FsbFNpZ246IFwiQ0hBTExFTkdFX1JBVElOR1wiLCBqc29uS2V5OiBcImNyXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTVFJFTkdUSFwiLCAgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclswXTphcnI/LnN0ciA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiREVYVEVSSVRZXCIsICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbMV06YXJyPy5kZXggPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIkNPTlNUSVRVVElPTlwiLCBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzJdOmFycj8uY29uID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJJTlRFTExJR0VOQ0VcIiwganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclszXTphcnI/LmludCA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiV0lTRE9NXCIsICAgICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbNF06YXJyPy53aXMgPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIkNIQVJJU01BXCIsICAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzVdOmFycj8uY2hhID8/IDAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkFMSUdOTUVOVFwiLFxuICAgIGpzb25LZXk6IFwiYWxpZ25tZW50XCIsXG4gICAgY29udjogKGE6IGFueSkgPT4ge1xuICAgICAgY29uc3QgcmF3ID0gQXJyYXkuaXNBcnJheShhKSA/IGEuam9pbihcIiBcIikgOiB0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIiA/IGEgOiBTdHJpbmcoYSk7XG4gICAgICBjb25zdCBjbGVhbmVkID0gcmF3XG4gICAgICAgIC5yZXBsYWNlKC9cXGJBXFxiL2csIFwiQW55XCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJVXFxiL2csIFwiVW5hbGlnbmVkXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJOXFxiL2csIFwiTmV1dHJhbFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiTFxcYi9nLCBcIkxhd2Z1bFwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiQ1xcYi9nLCBcIkNoYW90aWNcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkdcXGIvZywgXCJHb29kXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJFXFxiL2csIFwiRXZpbFwiKTtcblxuICAgICAgcmV0dXJuIGZvcm1hdEFsaWdubWVudEFiYnJldihjbGVhbmVkKTsgLy8gcmV1c2UgeW91ciBub3JtYWxpemVyIGlmIGl0IGV4aXN0c1xuICAgIH1cbiAgfSxcbiAgICB7XG4gICAgICBjYWxsU2lnbjogXCJUWVBFXCIsXG4gICAgICBqc29uS2V5OiBcInR5cGVcIixcbiAgICAgIGNvbnY6ICh0OiBhbnkpOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgICAvLyAxKSBJZiBpdFx1MjAxOXMgYSBzaW1wbGUgc3RyaW5nIGNvZGUsIG1hcCBpdFxuICAgICAgICBpZiAodHlwZW9mIHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAvLyBkaXJlY3QgbG9va3VwXHUyMDE0aWYgbm8gbWFwcGluZywganVzdCB0aXRsZVx1MjAxMGNhc2UgdGhlIGNvZGVcbiAgICAgICAgICByZXR1cm4gSVRFTV9UWVBFX01BUFt0XSA/PyBjYXAodCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyAyKSBJZiBpdFx1MjAxOXMgYW4gb2JqZWN0IHdpdGggYSAudHlwZSB0YWdcbiAgICAgICAgaWYgKHQgJiYgdHlwZW9mIHQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBjb25zdCBjb2RlID0gU3RyaW5nKHQudHlwZSB8fCBcIlwiKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgIC8vIHRyeSB0aGUgbWFwIGZpcnN0XG4gICAgICAgICAgaWYgKElURU1fVFlQRV9NQVBbY29kZV0pIHtcbiAgICAgICAgICAgIHJldHVybiBJVEVNX1RZUEVfTUFQW2NvZGVdO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBvdGhlcndpc2UgZmFsbCBiYWNrIHRvIFx1MjAxQ0Jhc2UgKHRhZ3NcdTIwMjYpXHUyMDFEIHN0eWxlXG4gICAgICAgICAgY29uc3QgYmFzZSA9IHQudHlwZSA/IGNhcCh0LnR5cGUpIDogXCJVbmtub3duXCI7XG4gICAgICAgICAgY29uc3QgdGFncyA9IEFycmF5LmlzQXJyYXkodC50YWdzKSA/IHQudGFncy5tYXAoY2FwKSA6IFtdO1xuICAgICAgICAgIHJldHVybiB0YWdzLmxlbmd0aCA/IGAke2Jhc2V9ICgke3RhZ3Muam9pbihcIiwgXCIpfSlgIDogYmFzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSxcblxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBJdGVtcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJUWVBFXCIsICAganNvbktleTogXCJfcGFyc2VkVHlwZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiUkFSSVRZXCIsIGpzb25LZXk6IFwicmFyaXR5XCIsIGNvbnY6IHIgPT4ge1xuICAgICAgY29uc3QgcyA9IFN0cmluZyhyfHxcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgcmV0dXJuIHMgJiYgcyE9PVwibm9uZVwiID8gc1swXS50b1VwcGVyQ2FzZSgpK3Muc2xpY2UoMSkgOiB1bmRlZmluZWQ7XG4gIH19LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQ09TVFwiLFxuICAgIGpzb25LZXk6IFwidmFsdWVcIixcbiAgICBjb252OiAocmF3OiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHMgPSBTdHJpbmcocmF3KS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGxldCBudW06IG51bWJlcjtcblxuICAgICAgLy8gZXhwbGljaXQgY29wcGVyP1xuICAgICAgaWYgKHMuZW5kc1dpdGgoXCJjcFwiKSkge1xuICAgICAgICBudW0gPSBwYXJzZUZsb2F0KHMpO1xuICAgICAgICAvLyBjb252ZXJ0IHRvIGdwIG9ubHkgaWYgMTAwKyBjcFxuICAgICAgICByZXR1cm4gbnVtID49IDEwMFxuICAgICAgICAgID8gYCR7TWF0aC5yb3VuZCgobnVtLzEwMCkgKiAxMDApLzEwMH1ncGBcbiAgICAgICAgICA6IGAke251bX1jcGA7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4cGxpY2l0IHNpbHZlcj9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwic3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgLy8gY29udmVydCB0byBncCBvbmx5IGlmIDEwKyBzcFxuICAgICAgICByZXR1cm4gbnVtID49IDEwXG4gICAgICAgICAgPyBgJHtNYXRoLnJvdW5kKChudW0vMTApICogMTAwKS8xMDB9Z3BgXG4gICAgICAgICAgOiBgJHtudW19c3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBleHBsaWNpdCBnb2xkP1xuICAgICAgaWYgKHMuZW5kc1dpdGgoXCJncFwiKSkge1xuICAgICAgICBudW0gPSBwYXJzZUZsb2F0KHMpO1xuICAgICAgICByZXR1cm4gYCR7TWF0aC5yb3VuZChudW0gKiAxMDApLzEwMH1ncGA7XG4gICAgICB9XG5cbiAgICAgIC8vIGJhcmUgbnVtYmVyIFx1MjE5MiBhc3N1bWUgY29wcGVyXG4gICAgICBudW0gPSBwYXJzZUZsb2F0KHMpIHx8IDA7XG4gICAgICByZXR1cm4gbnVtID49IDEwMFxuICAgICAgICA/IGAke01hdGgucm91bmQoKG51bS8xMDApICogMTAwKS8xMDB9Z3BgXG4gICAgICAgIDogYCR7bnVtfWNwYDtcbiAgICB9XG4gIH0sXG4gIHsgY2FsbFNpZ246IFwiV0VJR0hUXCIsIGpzb25LZXk6IFwid2VpZ2h0XCIgfSxcbiAgeyBjYWxsU2lnbjogXCJNQUdJQ0FMXCIsIGpzb25LZXk6IFwid29uZHJvdXNcIiwgY29udjogKF93LGFsbCkgPT4gISFhbGwud29uZHJvdXMgfHwgISFhbGwucmVxQXR0dW5lIH0sXG4gIHsgY2FsbFNpZ246IFwiVkFSSUFOVFwiLCBqc29uS2V5OiBcImJvbnVzV2VhcG9uXCIsIGNvbnY6IGIgPT4gdHlwZW9mIGI9PT1cInN0cmluZ1wiICYmIGIuc3RhcnRzV2l0aChcIitcIikgfSxcbiAgeyBjYWxsU2lnbjogXCJQUk9QRVJUSUVTXCIsIGpzb25LZXk6IFwicHJvcGVydHlcIiwgY29udjogYXJyID0+IEFycmF5LmlzQXJyYXkoYXJyKSA/IGFyci5tYXAocCA9PiBQUk9QRVJUWV9NQVBbcF0gfHwgcCkgOiBbXSB9LFxuICB7IGNhbGxTaWduOiBcIkRBTUFHRVwiLCBqc29uS2V5OiBcImRtZzFcIiwgY29udjogKGQsYWxsKSA9PiBkID8gYWxsLmRtZzIgPyBgJHtkfSAvICR7YWxsLmRtZzJ9YCA6IGAke2R9YCA6IHVuZGVmaW5lZCB9LFxuICB7IGNhbGxTaWduOiBcIkRBTUFHRV9UWVBFU1wiLCBqc29uS2V5OiBcImRtZ1R5cGVcIiwgY29udjogZHQgPT4gZHQgPT0gbnVsbCA/IFtdIDogQXJyYXkuaXNBcnJheShkdCkgPyBkdCA6IFtkdF0gfSxcbiAgeyBjYWxsU2lnbjogXCJSQU5HRVwiLCBqc29uS2V5OiBcInJhbmdlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJSRUxPQURcIiwganNvbktleTogXCJyZWxvYWRcIiB9LFxuICB7IGNhbGxTaWduOiBcIkFNTU9fVFlQRVwiLCBqc29uS2V5OiBcImFtbW9UeXBlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTVEVBTFRIX0RJU0FEVkFOVEFHRVwiLCBqc29uS2V5OiBcInN0ZWFsdGhcIiB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQVRUVU5FTUVOVFwiLFxuICAgIGpzb25LZXk6IFtcIndvbmRyb3VzXCIsIFwicmVxQXR0dW5lXCIsIFwicmVxX2F0dHVuZVwiLCBcInJlcUF0dHVuZVRhZ3NcIl0sXG4gICAgY29udjogKF9yYXcsIGFsbEpzb24pID0+IHtcbiAgICAgIGNvbnN0IGogPSBhbGxKc29uIGFzIGFueTtcbiAgICAgIGNvbnN0IGhhc1RleHQgPSB0eXBlb2Ygai5yZXFBdHR1bmUgPT09IFwic3RyaW5nXCIgJiYgai5yZXFBdHR1bmUudHJpbSgpICE9PSBcIlwiO1xuICAgICAgY29uc3QgaGFzVGFncyA9IEFycmF5LmlzQXJyYXkoai5yZXFBdHR1bmVUYWdzKSAmJiBqLnJlcUF0dHVuZVRhZ3MubGVuZ3RoID4gMDtcbiAgICAgIHJldHVybiBoYXNUZXh0IHx8IGhhc1RhZ3M7XG4gICAgfVxuICB9LFxuICB7XG4gIGNhbGxTaWduOiBcIkFUVFVORV9SRVFcIixcbiAganNvbktleTogXCJyZXFBdHR1bmVUYWdzXCIsXG4gIGNvbnY6ICh0YWdzOiBhbnlbXSA9IFtdLCBfYWxsKSA9PiB7XG4gICAgY29uc3QgbWFwTGV0dGVyOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gICAgICBBOiBcIkFueVwiLCBVOiBcIlVuYWxpZ25lZFwiLCBOOiBcIk5ldXRyYWxcIixcbiAgICAgIEw6IFwiTGF3ZnVsXCIsIEM6IFwiQ2hhb3RpY1wiLCBHOiBcIkdvb2RcIiwgRTogXCJFdmlsXCJcbiAgICB9O1xuICAgIGNvbnN0IHJlcXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7XG4gICAgICBpZiAodGFnLmNsYXNzICYmIEFycmF5LmlzQXJyYXkodGFnLmFsaWdubWVudCkpIHtcbiAgICAgICAgY29uc3QgY2xzID0gY2FwKHRhZy5jbGFzcyk7XG4gICAgICAgIGZvciAoY29uc3QgY29kZSBvZiB0YWcuYWxpZ25tZW50KSB7XG4gICAgICAgICAgcmVxcy5wdXNoKGAke21hcExldHRlcltjb2RlXSB8fCBjb2RlfSAke2Nsc31gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0YWcuY2xhc3MpIHtcbiAgICAgICAgcmVxcy5wdXNoKGNhcCh0YWcuY2xhc3MpKTtcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0YWcuYWxpZ25tZW50KSkge1xuICAgICAgICBmb3IgKGNvbnN0IGNvZGUgb2YgdGFnLmFsaWdubWVudCkge1xuICAgICAgICAgIHJlcXMucHVzaChtYXBMZXR0ZXJbY29kZV0gfHwgY29kZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGFnLmJhY2tncm91bmQpIHtcbiAgICAgICAgY29uc3QgW2JnXSA9IFN0cmluZyh0YWcuYmFja2dyb3VuZCkuc3BsaXQoXCJ8XCIpO1xuICAgICAgICByZXFzLnB1c2goYmcuc3BsaXQoXCIgXCIpLm1hcChjYXApLmpvaW4oXCIgXCIpKTtcbiAgICAgIH0gZWxzZSBpZiAodGFnLnNwZWxsY2FzdGluZykge1xuICAgICAgICByZXFzLnB1c2goXCJTcGVsbGNhc3RlclwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gQXJyYXkuZnJvbShuZXcgU2V0KHJlcXMpKTtcbiAgfVxufSxcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE90aGVyIFx1MjUwMFx1MjUwMFx1MjUwMFxuICB7IGNhbGxTaWduOiBcIkRBTUFHRV9SRVNcIiwganNvbktleTogXCJyZXNpc3RcIiwgY29udjogdiA9PiBBcnJheS5pc0FycmF5KHYpID8gdi5tYXAoY2FwKSA6IFtdIH0sXG57XG4gIGNhbGxTaWduOiBcIlJVTEVTRVRcIixcbiAganNvbktleTogXCJfZWRpdGlvbklkXCIsICAgICAgICAgICAvLyBwaWNrIHVwIHRoZSBpbmplY3RlZCBlZGl0aW9uSWQgc28gYnVpbGRGTSB3aWxsIGVtaXQgdGhlIGtleVxuICBjb252OiAoX3JhdywgYWxsSnNvbikgPT4ge1xuICAgIHJldHVybiBcIkQmRCA1ZSAoMjAyNSlcIjtcbiAgfSxcbn0sICBcbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQWJpbGl0eVx1MjAxMHNjb3JlIG1vZGlmaWVycyAob25seSBlbWl0IHdoZW4gbm9uemVybykgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHtcbiAgICBjYWxsU2lnbjogXCJTVFJfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5zdHIgPz8gMCkgOiAoYXJyLnN0ciA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiREVYX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0uZGV4ID8/IDApIDogKGFyci5kZXggPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkNPTl9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLmNvbiA/PyAwKSA6IChhcnIuY29uID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBjYWxsU2lnbjogXCJJTlRfTU9EXCIsXG4gICAganNvbktleTogIFwiYWJpbGl0eVwiLFxuICAgIGNvbnY6IChhcnI6IGFueSk6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gICAgICBjb25zdCB2ID0gQXJyYXkuaXNBcnJheShhcnIpID8gKGFyclswXS5pbnQgPz8gMCkgOiAoYXJyLmludCA/PyAwKTtcbiAgICAgIHJldHVybiB2ICE9PSAwID8gdiA6IHVuZGVmaW5lZDtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiV0lTX01PRFwiLFxuICAgIGpzb25LZXk6ICBcImFiaWxpdHlcIixcbiAgICBjb252OiAoYXJyOiBhbnkpOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICAgICAgY29uc3QgdiA9IEFycmF5LmlzQXJyYXkoYXJyKSA/IChhcnJbMF0ud2lzID8/IDApIDogKGFyci53aXMgPz8gMCk7XG4gICAgICByZXR1cm4gdiAhPT0gMCA/IHYgOiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkNIQV9NT0RcIixcbiAgICBqc29uS2V5OiAgXCJhYmlsaXR5XCIsXG4gICAgY29udjogKGFycjogYW55KTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgICAgIGNvbnN0IHYgPSBBcnJheS5pc0FycmF5KGFycikgPyAoYXJyWzBdLmNoYSA/PyAwKSA6IChhcnIuY2hhID8/IDApO1xuICAgICAgcmV0dXJuIHYgIT09IDAgPyB2IDogdW5kZWZpbmVkO1xuICAgIH0sXG4gIH0sXG5cblxuXTtcblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgR2VuZXJpYyBidWlsZGVyIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkRk0oanNvbjogYW55LCBkZWZzOiBGaWVsZERlZltdKTogRnJvbnRtYXR0ZXIge1xuICBjb25zdCBmbTogRnJvbnRtYXR0ZXIgPSB7fTtcbiAgZm9yIChjb25zdCB7IGNhbGxTaWduLCBqc29uS2V5LCBjb252IH0gb2YgZGVmcykge1xuICAgIGNvbnN0IGtleXMgPSBBcnJheS5pc0FycmF5KGpzb25LZXkpID8ganNvbktleSA6IFtqc29uS2V5XTtcbiAgICBsZXQgcmF3OiBhbnkgPSB1bmRlZmluZWQ7XG5cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICBpZiAoanNvbltrZXldICE9IG51bGwpIHtcbiAgICAgICAgcmF3ID0ganNvbltrZXldO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmF3ID09IG51bGwpIGNvbnRpbnVlO1xuICAgIGNvbnN0IHZhbCA9IGNvbnYgPyBjb252KHJhdywganNvbikgOiByYXc7XG4gICAgZm1bRk1fRklFTERTW2NhbGxTaWduXV0gPSB2YWw7XG4gIH1cbiAgcmV0dXJuIGZtO1xufVxuXG4vLyBmcm9udG1hdHRlci50c1xuXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplRnJvbnRtYXR0ZXIoXG4gIGZtOiBGcm9udG1hdHRlcixcbiAgZGVmcz86IEZpZWxkRGVmW11cbik6IHN0cmluZyB7XG4gIGNvbnN0IGZpbHRlcmVkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG5cbiAgLy8gZGV0ZWN0IGlmIHdlIGhhdmUgYW55IGFjdHVhbCBjaG9pY2UtbGlzdHNcbiAgY29uc3QgaGFzU2tpbGxDaG9pY2UgPSBBcnJheS5pc0FycmF5KGZtW0ZNX0ZJRUxEUy5TS0lMTF9DSE9JQ0VfTElTVF0pIFxuICAgICYmIChmbVtGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1RdIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuICBjb25zdCBoYXNUb29sQ2hvaWNlID0gQXJyYXkuaXNBcnJheShmbVtGTV9GSUVMRFMuVE9PTF9DSE9JQ0VfTElTVF0pIFxuICAgICYmIChmbVtGTV9GSUVMRFMuVE9PTF9DSE9JQ0VfTElTVF0gYXMgYW55W10pLmxlbmd0aCA+IDA7XG5cblxuICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhmbSkpIHtcbiAgICAvLyAxKSBuZXZlciBlbWl0IHVuZGVmaW5lZFxuICAgIGlmICh2ID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xuICAgIC8vIDIpIGRyb3AgZW1wdHkgQ09NUE9ORU5UUywgVE9PTF9DSE9JQ0VfTElTVCwgU0tJTExfQ0hPSUNFX0xJU1RcbiAgICBpZiAoayA9PT0gRk1fRklFTERTLkNPTVBPTkVOVFMgJiYgQXJyYXkuaXNBcnJheSh2KSAmJiB2Lmxlbmd0aCA9PT0gMCkgY29udGludWU7XG4gICAgaWYgKFxuICAgICAgKGsgPT09IEZNX0ZJRUxEUy5UT09MX0NIT0lDRV9MSVNUIHx8IGsgPT09IEZNX0ZJRUxEUy5TS0lMTF9DSE9JQ0VfTElTVCkgJiZcbiAgICAgIEFycmF5LmlzQXJyYXkodikgJiYgdi5sZW5ndGggPT09IDBcbiAgICApIGNvbnRpbnVlO1xuXG4gICAgZmlsdGVyZWRba10gPSB2O1xuICB9XG5cbiAgLy8gYnVpbGQgdGhlIGxpc3Qgb2Yga2V5cyBpbiB0aGUgZXhhY3Qgb3JkZXIgZnJvbSBkZWZzXG4gIGxldCBrZXlzVG9FbWl0OiBzdHJpbmdbXTtcbiAgaWYgKGRlZnMpIHtcbiAgICAvLyBtYXAgZWFjaCBGaWVsZERlZiB0byBpdHMgZnJvbnRtYXR0ZXIga2V5XG4gICAgY29uc3Qgd2FudGVkID0gZGVmcy5tYXAoZCA9PiBGTV9GSUVMRFNbZC5jYWxsU2lnbl0pO1xuICAgIC8vIG9ubHkga2VlcCB0aGUgb25lcyB3ZSBhY3R1YWxseSBoYXZlLCBpbiBvcmRlclxuICAgIGtleXNUb0VtaXQgPSB3YW50ZWQuZmlsdGVyKGsgPT4gayBpbiBmaWx0ZXJlZCk7XG4gICAgLy8gdGhlbiBhcHBlbmQgYW55IGV4dHJhIGtleXMgdGhhdCB3ZXJlbid0IGluIGRlZnNcbiAgICBrZXlzVG9FbWl0LnB1c2goXG4gICAgICAuLi5PYmplY3Qua2V5cyhmaWx0ZXJlZCkuZmlsdGVyKGsgPT4gIWtleXNUb0VtaXQuaW5jbHVkZXMoaykpXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBrZXlzVG9FbWl0ID0gT2JqZWN0LmtleXMoZmlsdGVyZWQpO1xuICB9XG5cbiAgLy8gbm93IGVtaXQgWUFNTCBpbiB0aGF0IG9yZGVyXG4gIHJldHVybiBrZXlzVG9FbWl0XG4gICAgLm1hcChrID0+IHtcbiAgICAgIGNvbnN0IHYgPSBmaWx0ZXJlZFtrXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHYpKSB7XG4gICAgICAgIC8vIEpTT04uc3RyaW5naWZ5IHRvIGhhbmRsZSBzcGFjZXMsIGNvbW1hcywgZXRjLlxuICAgICAgICBjb25zdCBpbmxpbmUgPSB2Lm1hcChpdGVtID0+IEpTT04uc3RyaW5naWZ5KGl0ZW0pKS5qb2luKFwiLCBcIik7XG4gICAgICAgIHJldHVybiBgJHtrfTogWyR7aW5saW5lfV1gO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBgJHtrfTogXCIke3Z9XCJgO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGAke2t9OiAke3Z9YDtcbiAgICB9KVxuICAgIC5qb2luKFwiXFxuXCIpO1xufVxuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTa2lsbCBoZWxwZXJzIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNLSUxMX09QVElPTlMgPSBbXG4gIFwiQWNyb2JhdGljc1wiLFwiQW5pbWFsIEhhbmRsaW5nXCIsXCJBcmNhbmFcIixcIkF0aGxldGljc1wiLFwiRGVjZXB0aW9uXCIsXCJIaXN0b3J5XCIsXG4gIFwiSW5zaWdodFwiLFwiSW50aW1pZGF0aW9uXCIsXCJJbnZlc3RpZ2F0aW9uXCIsXCJNZWRpY2luZVwiLFwiTmF0dXJlXCIsXCJQZXJjZXB0aW9uXCIsXG4gIFwiUGVyZm9ybWFuY2VcIixcIlBlcnN1YXNpb25cIixcIlJlbGlnaW9uXCIsXCJTbGVpZ2h0IG9mIEhhbmRcIixcIlN0ZWFsdGhcIixcIlN1cnZpdmFsXCIsXG5dIGFzIGNvbnN0O1xuZXhwb3J0IHR5cGUgU2tpbGxPcHRpb24gPSB0eXBlb2YgU0tJTExfT1BUSU9OU1tudW1iZXJdO1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVNraWxsKHJhdzogc3RyaW5nKTogU2tpbGxPcHRpb24gfCBudWxsIHtcbiAgY29uc3QgbG93ZXIgPSByYXcudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiBTS0lMTF9PUFRJT05TLmZpbmQoc2tpbGwgPT4gc2tpbGwudG9Mb3dlckNhc2UoKSA9PT0gbG93ZXIpID8/IG51bGw7XG59XG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyVmFsaWRTa2lsbHMocmF3QXJyOiBhbnlbXSk6IFNraWxsT3B0aW9uW10ge1xuICBpZiAoIUFycmF5LmlzQXJyYXkocmF3QXJyKSkgcmV0dXJuIFtdO1xuICBjb25zdCBzZWVuID0gbmV3IFNldDxTa2lsbE9wdGlvbj4oKTtcbiAgZm9yIChjb25zdCBlbnQgb2YgcmF3QXJyKSB7XG4gICAgbGV0IGNhbmRpZGF0ZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSBjYW5kaWRhdGUgPSBlbnQ7XG4gICAgZWxzZSBpZiAoZW50Lm5hbWUgJiYgdHlwZW9mIGVudC5uYW1lID09PSBcInN0cmluZ1wiKSBjYW5kaWRhdGUgPSBlbnQubmFtZTtcbiAgICBpZiAoY2FuZGlkYXRlKSB7XG4gICAgICBjb25zdCBub3JtID0gbm9ybWFsaXplU2tpbGwoY2FuZGlkYXRlKTtcbiAgICAgIGlmIChub3JtKSBzZWVuLmFkZChub3JtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFsuLi5zZWVuXTtcbn1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFdoaWNoIEZNX0tFWVMgZWFjaCBwYXJzZXIgc2hvdWxkIGluY2x1ZGUgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgY29uc3QgU1BFTExfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiTEVWRUxcIixcbiAgXCJTQ0hPT0xcIixcbiAgXCJDQVNUSU5HX1RJTUVcIixcbiAgXCJTUEVMTF9SQU5HRVwiLFxuICBcIkRVUkFUSU9OXCIsXG4gIFwiVkVSQkFMXCIsXG4gIFwiU09NQVRJQ1wiLFxuICBcIk1BVEVSSUFMXCIsXG4gIFwiQ09NUE9ORU5UU1wiLFxuICBcIkNPTkNFTlRSQVRJT05cIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBTUEVDSUVTX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiU1BFQ0lFU1wiLFxuICBcIlNJWkVcIixcbiAgXCJTUEVFRFwiLFxuICBcIkxBTkdVQUdFU1wiLFxuICBcIlRSQUlUU1wiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNUUl9NT0RcIixcbiAgXCJERVhfTU9EXCIsXG4gIFwiQ09OX01PRFwiLFxuICBcIklOVF9NT0RcIixcbiAgXCJXSVNfTU9EXCIsXG4gIFwiQ0hBX01PRFwiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsXG4gIFwiVE9PTF9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiVE9PTF9DSE9JQ0VfTElTVFwiLFxuICBcIldFQVBPTl9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiU0VOU0VTXCIsXG4gIFwiREFNQUdFX1JFU1wiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIlxuXTtcblxuZXhwb3J0IGNvbnN0IElURU1fS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiVFlQRVwiLFxuICBcIlJBUklUWVwiLFxuICBcIkNPU1RcIixcbiAgXCJXRUlHSFRcIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJQUk9QRVJUSUVTXCIsXG4gIFwiREFNQUdFXCIsXG4gIFwiREFNQUdFX1RZUEVTXCIsXG4gIFwiUkFOR0VcIixcbiAgXCJSRUxPQURcIixcbiAgXCJBTU1PX1RZUEVcIixcbiAgXCJBQ1wiLFxuICBcIlNURUFMVEhfRElTQURWQU5UQUdFXCIsXG4gIFwiTUFHSUNBTFwiLFxuICBcIkFUVFVORU1FTlRcIixcbiAgXCJBVFRVTkVfUkVRXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgQkVTVElBUllfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiU0laRVwiLFxuICBcIlRZUEVcIixcbiAgXCJBTElHTk1FTlRcIixcbiAgXCJBQ1wiLFxuICBcIkhQXCIsXG4gIFwiU1BFRURcIixcbiAgXCJTVFJFTkdUSFwiLFxuICBcIkRFWFRFUklUWVwiLFxuICBcIkNPTlNUSVRVVElPTlwiLFxuICBcIklOVEVMTElHRU5DRVwiLFxuICBcIldJU0RPTVwiLFxuICBcIkNIQVJJU01BXCIsXG4gIFwiU0FWSU5HX1RIUk9XU1wiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNFTlNFU1wiLFxuICBcIkxBTkdVQUdFU1wiLFxuICBcIkNIQUxMRU5HRV9SQVRJTkdcIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBDTEFTU19LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJTUEVMTF9DQVNUX01PRFwiLFxuICBcIkFSTU9SX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJXRUFQT05fUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgXCJTQVZJTkdfVEhST1dTXCIsXG4gIFwiU0tJTExTXCIsXG4gIFwiU0tJTExfQ0hPSUNFX0xJU1RcIixcbiAgXCJUUkFJVFNcIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbmV4cG9ydCBjb25zdCBCQUNLR1JPVU5EX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNLSUxMU1wiLFxuICBcIlNLSUxMX0NIT0lDRV9MSVNUXCIsICBcbiAgXCJUT09MX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJUT09MX0NIT0lDRV9MSVNUXCIsXG4gIFwiVFJBSVRTXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiXG5dO1xuXG5leHBvcnQgY29uc3QgRkVBVFNfS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCJcbl07XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGaWVsZCBzdWJzZXRzIGZvciBlYWNoIHBhcnNlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBjb25zdCBTUEVMTF9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBTUEVMTF9LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgU1BFTExfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgU1BFQ0lFU19NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBTUEVDSUVTX0tFWVMubWFwKGtleSA9PiB7XG4gIGNvbnN0IGRlZiA9IEFMTF9GSUVMRF9ERUZTLmZpbmQoZCA9PiBkLmNhbGxTaWduID09PSBrZXkpO1xuICBpZiAoIWRlZikgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIEZpZWxkRGVmIGZvciBTUEVDSUVTX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IElURU1fTUVUQV9ERUZTOiBGaWVsZERlZltdID0gSVRFTV9LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgSVRFTV9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBCRVNUSUFSWV9NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBCRVNUSUFSWV9LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQkVTVElBUllfS0VZICR7a2V5fWApO1xuICByZXR1cm4gZGVmO1xufSk7XG5leHBvcnQgY29uc3QgQ0xBU1NfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gQ0xBU1NfS0VZUy5tYXAoa2V5ID0+IHtcbiAgY29uc3QgZGVmID0gQUxMX0ZJRUxEX0RFRlMuZmluZChkID0+IGQuY2FsbFNpZ24gPT09IGtleSk7XG4gIGlmICghZGVmKSB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgRmllbGREZWYgZm9yIENMQVNTX0tFWSAke2tleX1gKTtcbiAgcmV0dXJuIGRlZjtcbn0pO1xuZXhwb3J0IGNvbnN0IEJBQ0tHUk9VTkRfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gQkFDS0dST1VORF9LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQkFDS0dST1VORF9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTtcbmV4cG9ydCBjb25zdCBGRUFUU19NRVRBX0RFRlM6IEZpZWxkRGVmW10gPSBGRUFUU19LRVlTLm1hcChrZXkgPT4ge1xuICBjb25zdCBkZWYgPSBBTExfRklFTERfREVGUy5maW5kKGQgPT4gZC5jYWxsU2lnbiA9PT0ga2V5KTtcbiAgaWYgKCFkZWYpIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBGaWVsZERlZiBmb3IgQkFDS0dST1VORF9LRVkgJHtrZXl9YCk7XG4gIHJldHVybiBkZWY7XG59KTsiLCAiaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwic3JjL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgZ2V0RnVsbFNvdXJjZU5hbWUgfSBmcm9tIFwiLi9oZWxwZXJzL3NvdXJjZU1hcFwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgU1BFTExfTUVUQV9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5cbmV4cG9ydCBjb25zdCBTQ0hPT0xfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBBOiBcIkFianVyYXRpb25cIixcbiAgQzogXCJDb25qdXJhdGlvblwiLFxuICBEOiBcIkRpdmluYXRpb25cIixcbiAgRTogXCJFbmNoYW50bWVudFwiLFxuICBWOiBcIkV2b2NhdGlvblwiLFxuICBJOiBcIklsbHVzaW9uXCIsXG4gIE46IFwiTmVjcm9tYW5jeVwiLFxuICBUOiBcIlRyYW5zbXV0YXRpb25cIixcbn07XG5cbmZ1bmN0aW9uIG9yZGluYWwobjogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3Qgc3VmZml4ID0gKG4gPT09IDEpID8gXCJzdFwiIDogKG4gPT09IDIpID8gXCJuZFwiIDogKG4gPT09IDMpID8gXCJyZFwiIDogXCJ0aFwiO1xuICByZXR1cm4gYCR7bn0ke3N1ZmZpeH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0UmFuZ2UocmFuZ2U6IGFueSk6IHN0cmluZyB7XG4gIGlmICghcmFuZ2UpIHJldHVybiBcIlwiO1xuXG4gIGlmICh0eXBlb2YgcmFuZ2UgPT09IFwic3RyaW5nXCIpIHJldHVybiByYW5nZTtcblxuICBpZiAocmFuZ2UudHlwZSA9PT0gXCJzcGVjaWFsXCIpIHJldHVybiBcIlNwZWNpYWxcIjtcbiAgaWYgKHJhbmdlLnR5cGUgPT09IFwicG9pbnRcIiAmJiByYW5nZS5kaXN0YW5jZSkge1xuICAgIGNvbnN0IGRpc3QgPSByYW5nZS5kaXN0YW5jZTtcbiAgICBpZiAoZGlzdC50eXBlID09PSBcInRvdWNoXCIpIHJldHVybiBcIlRvdWNoXCI7XG4gICAgaWYgKGRpc3QudHlwZSA9PT0gXCJzZWxmXCIpIHJldHVybiBcIlNlbGZcIjtcbiAgICBpZiAoZGlzdC50eXBlID09PSBcInNpZ2h0XCIpIHJldHVybiBcIlNpZ2h0XCI7XG4gICAgaWYgKGRpc3QuYW1vdW50KSByZXR1cm4gYCR7ZGlzdC5hbW91bnR9ICR7ZGlzdC50eXBlfWA7XG4gIH1cblxuICByZXR1cm4gXCJWYXJpZXNcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWUodGltZTogYW55W10pOiBzdHJpbmcge1xuICBpZiAoIUFycmF5LmlzQXJyYXkodGltZSkpIHJldHVybiBcIlwiO1xuXG4gIHJldHVybiB0aW1lLm1hcCh0ID0+IGAke3QubnVtYmVyfSAke3QudW5pdH1gKS5qb2luKFwiLCBcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREdXJhdGlvbihkdXJhdGlvbjogYW55W10pOiBzdHJpbmcge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoZHVyYXRpb24pKSByZXR1cm4gXCJcIjtcblxuICByZXR1cm4gZHVyYXRpb24ubWFwKGQgPT4ge1xuICAgIGlmIChkLnR5cGUgPT09IFwiaW5zdGFudFwiKSByZXR1cm4gXCJJbnN0YW50YW5lb3VzXCI7XG4gICAgaWYgKGQudHlwZSA9PT0gXCJ0aW1lZFwiICYmIGQuZHVyYXRpb24pIHtcbiAgICAgIHJldHVybiBgJHtkLmR1cmF0aW9uLmFtb3VudH0gJHtkLmR1cmF0aW9uLnR5cGV9JHtkLmNvbmNlbnRyYXRpb24gPyBcIiAoY29uY2VudHJhdGlvbilcIiA6IFwiXCJ9YDtcbiAgICB9XG4gICAgaWYgKGQudHlwZSA9PT0gXCJwZXJtYW5lbnRcIikgcmV0dXJuIFwiUGVybWFuZW50XCI7XG4gICAgcmV0dXJuIFwiU3BlY2lhbFwiO1xuICB9KS5qb2luKFwiLCBcIik7XG59XG4vLyBpbiBwYXJzZXJzLzVlLWpzb24vcGFyc2VTcGVsbHNGaWxlLnRzIChvciB3aGVyZXZlciBmb3JtYXRDb21wb25lbnRzIGxpdmVzKVxuXG5mdW5jdGlvbiBmb3JtYXRDb21wb25lbnRzKGNvbXBvbmVudHM6IGFueSk6IHN0cmluZyB7XG4gIGlmICghY29tcG9uZW50cykgcmV0dXJuIFwiXCI7XG5cbiAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XG5cbiAgaWYgKGNvbXBvbmVudHMudikgcGFydHMucHVzaChcIlZcIik7XG4gIGlmIChjb21wb25lbnRzLnMpIHBhcnRzLnB1c2goXCJTXCIpO1xuXG4gIGlmIChjb21wb25lbnRzLm0pIHtcbiAgICAvLyBwdWxsIG91dCB0aGUgYWN0dWFsIG1hdGVyaWFsIHRleHQocylcbiAgICBsZXQgbWF0RGV0YWlsczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KGNvbXBvbmVudHMubSkpIHtcbiAgICAgIG1hdERldGFpbHMgPSBjb21wb25lbnRzLm1cbiAgICAgICAgLm1hcCgoaXRlbTphbnkpID0+XG4gICAgICAgICAgdHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gaXRlbVxuICAgICAgICAgICAgOiBpdGVtICYmIHR5cGVvZiBpdGVtLnRleHQgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gaXRlbS50ZXh0XG4gICAgICAgICAgICA6IG51bGxcbiAgICAgICAgKVxuICAgICAgICAuZmlsdGVyKCh0OmFueSk6IHQgaXMgc3RyaW5nID0+ICEhdCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29tcG9uZW50cy5tID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBtYXREZXRhaWxzID0gW2NvbXBvbmVudHMubV07XG4gICAgfSBlbHNlIGlmIChjb21wb25lbnRzLm0udGV4dCkge1xuICAgICAgbWF0RGV0YWlscyA9IFtjb21wb25lbnRzLm0udGV4dF07XG4gICAgfVxuXG4gICAgLy8gYnVpbGQgdGhlIFx1MjAxQ01cdTIwMUQgZW50cnksIGFwcGVuZGluZyBkZXRhaWxzIGlmIGFueVxuICAgIGNvbnN0IG1hdFBhcnQgPVxuICAgICAgbWF0RGV0YWlscy5sZW5ndGggPiAwXG4gICAgICAgID8gYE0gKCR7bWF0RGV0YWlscy5qb2luKFwiLCBcIil9KWBcbiAgICAgICAgOiBcIk1cIjtcblxuICAgIHBhcnRzLnB1c2gobWF0UGFydCk7XG4gIH1cblxuICByZXR1cm4gcGFydHMuam9pbihcIiwgXCIpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNwZWxsc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgaWYgKCFqc29uLnNwZWxsKSByZXR1cm4gW107XG5cbiAgLy8gbWFrZSBlZGl0aW9uSWQgYXZhaWxhYmxlIGZvciBvdXIgU09VUkNFIGNvbnZlcnRlclxuICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgcmV0dXJuIGpzb24uc3BlbGwubWFwKChzcGVsbDogYW55KSA9PiB7XG4gICAgLy8gXHUyMDE0IGdhdGhlciBkYXRhIGZvciBoZWFkZXIvYm9keS9mb290ZXIgYXMgYmVmb3JlIFx1MjAxNFxuICAgIGNvbnN0IHNvdXJjZXMgPSBzcGVsbC5zb3VyY2VcbiAgICAgID8gQXJyYXkuaXNBcnJheShzcGVsbC5zb3VyY2UpID8gc3BlbGwuc291cmNlIDogW3NwZWxsLnNvdXJjZV1cbiAgICAgIDogW1widW5rbm93blwiXTtcbiAgICBjb25zdCBuYW1lID0gc3BlbGwubmFtZTtcbiAgICBjb25zdCBzY2hvb2wgPSBTQ0hPT0xfTUFQW3NwZWxsLnNjaG9vbF0gPz8gc3BlbGwuc2Nob29sO1xuICAgIGNvbnN0IGxldmVsID0gc3BlbGwubGV2ZWw7XG4gICAgY29uc3QgcmFuZ2UgPSBmb3JtYXRSYW5nZShzcGVsbC5yYW5nZSk7XG4gICAgY29uc3QgY2FzdGluZ1RpbWUgPSBmb3JtYXRUaW1lKHNwZWxsLnRpbWUpO1xuICAgIGNvbnN0IGR1cmF0aW9uID0gZm9ybWF0RHVyYXRpb24oc3BlbGwuZHVyYXRpb24pO1xuICAgIGNvbnN0IGZvcm1hdHRlZFNvdXJjZXMgPSBzb3VyY2VzLm1hcCgoczogc3RyaW5nKSA9PiBnZXRGdWxsU291cmNlTmFtZShzLCBlZGl0aW9uSWQpKTtcblxuICAgIGNvbnN0IGF0dGFja1R5cGUgPSBzcGVsbC5hdHRhY2tUeXBlIHx8IFwiXCI7XG4gICAgY29uc3QgZGFtYWdlVHlwZSA9IHNwZWxsLmRhbWFnZUluZmxpY3Q/LlswXSB8fCBcIlRlbGVwb3J0YXRpb25cIjtcbiAgICBjb25zdCByaXR1YWwgPSBzcGVsbC5yaXR1YWwgPT09IHRydWU7XG4gICAgY29uc3QgY29uY2VudHJhdGlvbiA9IHNwZWxsLmR1cmF0aW9uPy5zb21lKChkOiBhbnkpID0+IGQuY29uY2VudHJhdGlvbikgPz8gZmFsc2U7XG5cbmNvbnN0IEZNICAgPSBidWlsZEZNKHNwZWxsLCBTUEVMTF9NRVRBX0RFRlMpO1xuY29uc3QgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKEZNLCBTUEVMTF9NRVRBX0RFRlMpO1xuXG4gICAgLy8gXHUyMDE0IHRpdGxlL3N1YnRpdGxlIGFuZCBib2R5IGxheW91dCBcdTIwMTRcbiAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvXFwvL2csIFwiLVwiKTtcbiAgICBjb25zdCB0aXRsZSA9IGAjICR7bmFtZX1gO1xuICAgIGNvbnN0IGxldmVsTGFiZWwgPVxuICAgICAgbGV2ZWwgPT09IDBcbiAgICAgICAgPyBgJHtzY2hvb2x9IENhbnRyaXBgXG4gICAgICAgIDogYCR7b3JkaW5hbChsZXZlbCl9LWxldmVsICR7c2Nob29sfSBTcGVsbGA7XG4gICAgY29uc3Qgc3VidGl0bGUgPSBgIyMjICoke2xldmVsTGFiZWx9KiR7Y29uY2VudHJhdGlvbiA/IFwiICooQ29uY2VudHJhdGlvbikqXCIgOiBcIlwifWA7XG5cbiAgICBjb25zdCBoZWFkZXJMaW5lcyA9IFtcbiAgICAgIHRpdGxlLFxuICAgICAgc3VidGl0bGUsXG4gICAgICBgKipDYXN0aW5nIFRpbWU6KiogJHtjYXN0aW5nVGltZX1gLFxuICAgICAgYCoqUmFuZ2U6KiogJHtyYW5nZX1gLFxuICAgICAgYCoqQ29tcG9uZW50czoqKiAke2Zvcm1hdENvbXBvbmVudHMoc3BlbGwuY29tcG9uZW50cyl9YCxcbiAgICAgIGAqKkR1cmF0aW9uOioqICR7ZHVyYXRpb259YCxcbiAgICBdO1xuXG4gICAgY29uc3QgYm9keUxpbmVzID0gW1xuICAgICAgLi4uKChzcGVsbC5lbnRyaWVzID8/IFtdKS5tYXAoKGU6IGFueSkgPT4gZm9ybWF0RW50cnkoZSkpKSxcbiAgICAgIC4uLigoc3BlbGwuZW50cmllc0hpZ2hlckxldmVsID8/IFtdKS5tYXAoKGU6IGFueSkgPT4gZm9ybWF0RW50cnkoZSkpKSxcbiAgICBdO1xuXG4gICAgY29uc3QgZm9vdGVyTGluZXMgPSBbXG4gICAgICBgLS0tYCxcbiAgICAgIGAqKlNvdXJjZToqKiAke2Zvcm1hdHRlZFNvdXJjZXMuam9pbihcIiwgXCIpfWAsXG4gICAgXTtcblxuICAgIC8vIFx1MjAxNCBhc3NlbWJsZSB0aGUgbm90ZSB3aXRoIFlBTUwgZnJvbnRtYXR0ZXIgXHUyMDE0XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdGg6IGAke3NhZmVOYW1lfS5tZGAsXG4gICAgICBjb250ZW50OiBbXG4gICAgICAgIGAtLS1cXG4ke3lhbWx9XFxuLS0tYCxcbiAgICAgICAgaGVhZGVyTGluZXMuam9pbihcIlxcblwiKSxcbiAgICAgICAgYGAsXG4gICAgICAgIGJvZHlMaW5lcy5qb2luKFwiXFxuXFxuXCIpLFxuICAgICAgICBgYCxcbiAgICAgICAgZm9vdGVyTGluZXMuam9pbihcIlxcblwiKSxcbiAgICAgIF0uam9pbihcIlxcblwiKSxcbiAgICB9O1xuICB9KTtcbn1cblxuIiwgImltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHtcbiAgYnVpbGRGTSxcbiAgc2VyaWFsaXplRnJvbnRtYXR0ZXIsXG4gIEZNX0ZJRUxEUyxcbiAgU1BFQ0lFU19NRVRBX0RFRlMsXG4gIFNJWkVfTUFQLFxufSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBmb3JtYXRFbnRyeSB9IGZyb20gXCIuL2hlbHBlcnMvZm9ybWF0RW50cnlcIjtcblxuZnVuY3Rpb24gc2x1ZyhuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZVxuICAgIC5yZXBsYWNlKC87L2csIFwiOlwiKSAgICAgICAvLyBzZW1pY29sb24gXHUyMTkyIGRhc2hcbiAgICAucmVwbGFjZSgvW1xcLzpcIl0vZywgXCI6XCIpICAvLyBzbGFzaCwgY29sb24sIHF1b3RlIFx1MjE5MiBkYXNoXG4gICAgLnRyaW0oKTtcbn1cblxuY29uc3QgQkxPQ0tFRF9UUkFJVFMgPSBbXCJBZ2VcIiwgXCJTaXplXCIsIFwiTGFuZ3VhZ2VzXCIsIFwiQ3JlYXR1cmUgVHlwZVwiLCBcIlNwZWVkXCJdO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTcGVjaWVzRmlsZShcbiAganNvbjogeyByYWNlOiBhbnlbXTsgc3VicmFjZT86IGFueVtdOyBfZWRpdGlvbklkPzogc3RyaW5nIH0sXG4gIGVkaXRpb25JZDogc3RyaW5nXG4pOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShqc29uLnJhY2UpKSByZXR1cm4gW107XG4gIGpzb24uX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuICAvLyAxKSBGaWx0ZXIgb3V0IHJlcHJpbnRzXG5jb25zdCByYXdWYXJpYW50cyA9IGpzb24ucmFjZS5maWx0ZXIoKHI6IGFueSkgPT5cbiAgKHIuYmFzaWNSdWxlcyA9PT0gdHJ1ZSB8fCByLmJhc2ljUnVsZXMyMDI0ID09PSB0cnVlKVxuICAmJiAhL1xcKCg/OkthbGFkZXNofFplbmRpa2FyfEFtb25raGV0fElubmlzdHJhZHxJeGFsYW4pXFwpJC8udGVzdChyLm5hbWUpXG4pO1xuXG4gIC8vIDIpIEdyb3VwIGJ5IHJhY2UgbmFtZVxuICBjb25zdCBieU5hbWUgPSBuZXcgTWFwPHN0cmluZywgYW55W10+KCk7XG4gIGZvciAoY29uc3QgciBvZiByYXdWYXJpYW50cykge1xuICAgIGNvbnN0IGxpc3QgPSBieU5hbWUuZ2V0KHIubmFtZSkgPz8gW107XG4gICAgbGlzdC5wdXNoKHIpO1xuICAgIGJ5TmFtZS5zZXQoci5uYW1lLCBsaXN0KTtcbiAgfVxuXG4gIC8vIDMpIEFsbCBzdWJyYWNlcyBhcnJheVxuICBjb25zdCBzdWJyYWNlc0xpc3QgPSBBcnJheS5pc0FycmF5KGpzb24uc3VicmFjZSkgPyBqc29uLnN1YnJhY2UgOiBbXTtcblxuICBjb25zdCBvdXQ6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgLy8gNCkgTWFpbiBsb29wIG92ZXIgZWFjaCBzcGVjaWVzXG4gIGZvciAoY29uc3QgW3JhY2VOYW1lLCByYWNlVmFyaWFudHNdIG9mIGJ5TmFtZS5lbnRyaWVzKCkpIHtcbiAgICBjb25zdCBzYWZlTmFtZSA9IHNsdWcocmFjZU5hbWUpO1xuXG4gICAgLy8gcGljayB0aGUgXHUyMDFDZnVsbGVzdFx1MjAxRCB2YXJpYW50IGFzIHByaW1hcnlcbiAgICBjb25zdCBwcmltYXJ5ID0gcmFjZVZhcmlhbnRzLnJlZHVjZShcbiAgICAgIChiZXN0LCBjdXIpID0+XG4gICAgICAgIE9iamVjdC5rZXlzKGN1cikubGVuZ3RoID4gT2JqZWN0LmtleXMoYmVzdCkubGVuZ3RoID8gY3VyIDogYmVzdCxcbiAgICAgIHJhY2VWYXJpYW50c1swXVxuICAgICk7XG5cbiAgICAvLyBvbmVcdTIwMTBvZmY6IGdyYWZ0IEh1bWFuIGFiaWxpdHkgaWYgbWlzc2luZ1xuICAgIGlmICghcHJpbWFyeS5hYmlsaXR5KSB7XG4gICAgICBjb25zdCBodW1hbkVudHJ5ID0gc3VicmFjZXNMaXN0LmZpbmQoKHNyOiBhbnkpID0+XG4gICAgICAgIHNyLnJhY2VOYW1lID09PSByYWNlTmFtZSAmJlxuICAgICAgICBzci5yYWNlU291cmNlID09PSBwcmltYXJ5LnNvdXJjZSAmJlxuICAgICAgICAhKFwibmFtZVwiIGluIHNyKSAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KHNyLmFiaWxpdHkpXG4gICAgICApO1xuICAgICAgaWYgKGh1bWFuRW50cnkpIHByaW1hcnkuYWJpbGl0eSA9IGh1bWFuRW50cnkuYWJpbGl0eTtcbiAgICB9XG5cbiAgICAvLyBidWlsZCBmcm9udG1hdHRlclxuICAgIGNvbnN0IGZtID0gYnVpbGRGTShwcmltYXJ5LCBTUEVDSUVTX01FVEFfREVGUyk7XG4gICAgY29uc3Qgc2Vuc2VzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChwcmltYXJ5LmRhcmt2aXNpb24pICBzZW5zZXMucHVzaChgRGFya3Zpc2lvbiAke3ByaW1hcnkuZGFya3Zpc2lvbn0gZnQuYCk7XG4gICAgaWYgKHByaW1hcnkuYmxpbmRzaWdodCkgIHNlbnNlcy5wdXNoKGBCbGluZHNpZ2h0ICR7cHJpbWFyeS5ibGluZHNpZ2h0fSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS50cmVtb3JzZW5zZSkgc2Vuc2VzLnB1c2goYFRyZW1vcnNlbnNlICR7cHJpbWFyeS50cmVtb3JzZW5zZX0gZnQuYCk7XG4gICAgaWYgKHByaW1hcnkudHJ1ZXNpZ2h0KSAgIHNlbnNlcy5wdXNoKGBUcnVlc2lnaHQgJHtwcmltYXJ5LnRydWVzaWdodH0gZnQuYCk7XG4gICAgaWYgKHNlbnNlcy5sZW5ndGgpIGZtLnNlbnNlcyA9IHNlbnNlcztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmbS50cmFpdHMpKSB7XG4gICAgICBmbS50cmFpdHMgPSBmbS50cmFpdHMuZmlsdGVyKHQgPT4gIUJMT0NLRURfVFJBSVRTLmluY2x1ZGVzKHQpKTtcbiAgICB9XG4gICAgY29uc3QgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBTUEVDSUVTX01FVEFfREVGUyk7XG5cbiAgICAvLyBidWlsZCBzcGVjaWVzIGJvZHlcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBsaW5lcy5wdXNoKGAjICR7cmFjZU5hbWV9YCwgYCMjIFN0YXRzYCk7XG5cbiAgICAvLyBTaXplXG4gICAgY29uc3Qgc2l6ZSA9IEFycmF5LmlzQXJyYXkocHJpbWFyeS5zaXplKVxuICAgICAgPyBwcmltYXJ5LnNpemUubWFwKChzOiBzdHJpbmcpID0+IFNJWkVfTUFQW3NdIHx8IHMpLmpvaW4oXCIvXCIpXG4gICAgICA6IFNJWkVfTUFQW3ByaW1hcnkuc2l6ZV0gPz8gcHJpbWFyeS5zaXplO1xuICAgIGxpbmVzLnB1c2goYCoqU2l6ZToqKiAke3NpemV9YCk7XG5cbiAgICAvLyBTcGVlZFxuICAgIGNvbnN0IHNwZWVkID0gdHlwZW9mIHByaW1hcnkuc3BlZWQgPT09IFwibnVtYmVyXCJcbiAgICAgID8gcHJpbWFyeS5zcGVlZFxuICAgICAgOiBwcmltYXJ5LnNwZWVkPy53YWxrID8/IHByaW1hcnkuc3BlZWQ/LmJhc2UgPz8gMDtcbiAgICBsaW5lcy5wdXNoKGAqKlNwZWVkOioqICR7c3BlZWR9IGZ0LiB3YWxraW5nYCk7XG5cbiAgICAvLyBBYmlsaXRpZXNcbiAgICBjb25zdCBraWRzID0gc3VicmFjZXNMaXN0LmZpbHRlcihzciA9PlxuICAgICAgc3IubmFtZSAmJiBzci5yYWNlTmFtZSA9PT0gcmFjZU5hbWUgJiYgc3IucmFjZVNvdXJjZSA9PT0gcHJpbWFyeS5zb3VyY2VcbiAgICApO1xuICAgIGNvbnN0IHJhd0FiaWxpdHkgPSBBcnJheS5pc0FycmF5KHByaW1hcnkuYWJpbGl0eSlcbiAgICAgID8gcHJpbWFyeS5hYmlsaXR5XG4gICAgICA6IEFycmF5LmlzQXJyYXkoa2lkc1swXT8uYWJpbGl0eSkgPyBraWRzWzBdLmFiaWxpdHkgOiBbXTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShyYXdBYmlsaXR5KSAmJiByYXdBYmlsaXR5Lmxlbmd0aCkge1xuICAgICAgY29uc3QgYm9udXNlcyA9IHsgc3RyOjAsZGV4OjAsY29uOjAsaW50OjAsd2lzOjAsY2hhOjAgfTtcbiAgICAgIGxldCBjaG9vc2VPcHQ6IGFueSA9IG51bGw7XG4gICAgICBmb3IgKGNvbnN0IG9iaiBvZiByYXdBYmlsaXR5KSB7XG4gICAgICAgIGlmIChcImNob29zZVwiIGluIG9iaikgY2hvb3NlT3B0ID0gb2JqLmNob29zZTtcbiAgICAgICAgZWxzZSBmb3IgKGNvbnN0IFtrLHZdIG9mIE9iamVjdC5lbnRyaWVzKG9iaikpIChib251c2VzIGFzIGFueSlba10gKz0gdiBhcyBudW1iZXI7XG4gICAgICB9XG4gICAgICBjb25zdCBwYWlycyA9IE9iamVjdC5lbnRyaWVzKGJvbnVzZXMpIGFzIFtzdHJpbmcsbnVtYmVyXVtdO1xuICAgICAgY29uc3QgcGFydHMgPSBwYWlycy5maWx0ZXIoKFssdl0pPT52IT09MCkubWFwKChbayx2XSk9PmAke2sudG9VcHBlckNhc2UoKX0gJHt2Pj0wP1wiK1wiOlwiXCJ9JHt2fWApO1xuICAgICAgaWYgKGNob29zZU9wdD8uY291bnQgJiYgQXJyYXkuaXNBcnJheShjaG9vc2VPcHQuZnJvbSkpIHtcbiAgICAgICAgcGFydHMucHVzaChgQ0hPT1NFICR7Y2hvb3NlT3B0LmNvdW50fSBmcm9tICR7Y2hvb3NlT3B0LmZyb20ubWFwKChzOnN0cmluZyk9PnMudG9VcHBlckNhc2UoKSkuam9pbihcIiwgXCIpfWApO1xuICAgICAgfVxuICAgICAgaWYgKHBhcnRzLmxlbmd0aCkgbGluZXMucHVzaChgKipBYmlsaXR5IFNjb3JlczoqKiAke3BhcnRzLmpvaW4oXCIsIFwiKX1gKTtcbiAgICB9XG5cbiAgICAvLyBMYW5ndWFnZXNcbiAgICBjb25zdCBsYW5ncyA9IGZtLmxhbmd1YWdlcyBhcyBzdHJpbmdbXXx1bmRlZmluZWQ7XG4gICAgaWYgKGxhbmdzPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqTGFuZ3VhZ2VzOioqICR7bGFuZ3Muam9pbihcIiwgXCIpfWApO1xuXG4gICAgLy8gU2tpbGxzXG4gICAgaWYgKEFycmF5LmlzQXJyYXkocHJpbWFyeS5za2lsbFByb2ZpY2llbmNpZXMpKSB7XG4gICAgICBjb25zdCBza2lsbExhYmVsczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGZvciAoY29uc3QgZSBvZiBwcmltYXJ5LnNraWxsUHJvZmljaWVuY2llcyBhcyBhbnlbXSkge1xuICAgICAgICBpZiAoZS5jaG9vc2U/LmZyb20pIHtcbiAgICAgICAgICBza2lsbExhYmVscy5wdXNoKGBDaG9vc2UgZnJvbTogJHtlLmNob29zZS5mcm9tLm1hcCgoczpzdHJpbmcpPT5zLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Muc2xpY2UoMSkpLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB2YWwgPSBlLnByb2ZpY2llbmN5ID8/IGUubmFtZSA/PyBlO1xuICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiKSBza2lsbExhYmVscy5wdXNoKHZhbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt2YWwuc2xpY2UoMSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoc2tpbGxMYWJlbHMubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKlNraWxsIFByb2ZpY2llbmNpZXM6KiogJHtza2lsbExhYmVscy5qb2luKFwiOyBcIil9YCk7XG4gICAgfVxuXG4gICAgLy8gVG9vbCAvIFdlYXBvbiAvIEFybW9yXG4gICAgY29uc3QgdHAgPSBmbVtGTV9GSUVMRFMuVE9PTF9QUk9GSUNJRU5DSUVTXSBhcyBzdHJpbmdbXXx1bmRlZmluZWQ7XG4gICAgY29uc3Qgd3AgPSBmbVtGTV9GSUVMRFMuV0VBUE9OX1BST0ZJQ0lFTkNJRVNdIGFzIHN0cmluZ1tdfHVuZGVmaW5lZDtcbiAgICBjb25zdCBhcCA9IGZtW0ZNX0ZJRUxEUy5BUk1PUl9QUk9GSUNJRU5DSUVTXSBhcyBzdHJpbmdbXXx1bmRlZmluZWQ7XG4gICAgaWYgKHRwPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqVG9vbCBQcm9maWNpZW5jaWVzOioqICR7dHAuam9pbihcIiwgXCIpfWApO1xuICAgIGlmICh3cD8ubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKldlYXBvbiBQcm9maWNpZW5jaWVzOioqICR7d3Auam9pbihcIiwgXCIpfWApO1xuICAgIGlmIChhcD8ubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKkFybW9yIFByb2ZpY2llbmNpZXM6KiogJHthcC5qb2luKFwiLCBcIil9YCk7XG5cbiAgICAvLyBUcmFpdHNcbiAgICBsaW5lcy5wdXNoKGAjIyBUcmFpdHNgKTtcbiAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgZm9yIChjb25zdCB0cmFpdCBvZiBmbS50cmFpdHMgYXMgc3RyaW5nW118fFtdKSB7XG4gICAgICBsaW5lcy5wdXNoKGAjIyMjIyAke3RyYWl0fWApO1xuICAgICAgY29uc3QgZW50ID0gcHJpbWFyeS5lbnRyaWVzPy5maW5kKChlOmFueSk9PmUubmFtZT09PXRyYWl0KTtcbiAgICAgIGlmIChlbnQ/LmVudHJpZXMpIHtcbiAgICAgICAgZW50LmVudHJpZXMuZm9yRWFjaCgoc3ViOmFueSxpZHg6bnVtYmVyKT0+e1xuICAgICAgICAgIGxldCBibGs6c3RyaW5nfHVuZGVmaW5lZDtcbiAgICAgICAgICBpZiAoc3ViLnR5cGU9PT1cInRhYmxlXCIpICAgICAgIGJsayA9IHJlbmRlck1hcmtkb3duVGFibGUoc3ViKTtcbiAgICAgICAgICBlbHNlIGlmIChzdWIudHlwZT09PVwibGlzdFwiKSAgIGJsayA9IHN1Yi5pdGVtcy5tYXAoKGl0OmFueSk9PnR5cGVvZiBpdD09PVwic3RyaW5nXCI/YC0gJHtyZXBsYWNlNWVUYWdzKGl0KX1gOmAtICR7aXQubmFtZX1gICkuam9pbihcIlxcblwiKTtcbiAgICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc3ViPT09XCJzdHJpbmdcIikgYmxrID0gcmVwbGFjZTVlVGFncyhzdWIpO1xuICAgICAgICAgIGlmIChibGsgJiYgIXNlZW4uaGFzKGJsaykpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYmxrKTtcbiAgICAgICAgICAgIHNlZW4uYWRkKGJsayk7XG4gICAgICAgICAgICBpZiAoZW50LmVudHJpZXMubGVuZ3RoPjEgJiYgaWR4PGVudC5lbnRyaWVzLmxlbmd0aC0xKSBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE5vdyBicmFuY2ggb24gc3VicmFjZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3Qgc3VicyA9IGtpZHM7ICAvLyBhbHJlYWR5IGZpbHRlcmVkXG4gICAgaWYgKHN1YnMubGVuZ3RoKSB7XG4gICAgICAvLyAxKSBtYWluIGZpbGUgaW4gZm9sZGVyXG4gICAgICBvdXQucHVzaCh7XG4gICAgICAgIHBhdGg6IGBTcGVjaWVzLyR7c2FmZU5hbWV9LyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudDogYC0tLVxcbiR7eWFtbH1cXG4tLS1cXG5cXG4ke2xpbmVzLmpvaW4oXCJcXG5cIil9YCxcbiAgICAgIH0pO1xuXG4gICAgICAvLyAyKSBlYWNoIHN1YnNwZWNpZXNcbiAgICAgIGNvbnN0IHN1YkZvbGRlciA9IGBTcGVjaWVzLyR7c2FmZU5hbWV9L1N1YnNwZWNpZXNgO1xuICAgICAgZm9yIChjb25zdCBzciBvZiBzdWJzKSB7XG4gICAgICAgIC8vIHR1cm4gc2VtaWNvbG9ucyBcdTIxOTIgY29sb25zXG4gICAgICAgIGNvbnN0IGRpc3BsYXkgPSBzci5uYW1lLnJlcGxhY2UoLzsvZywgXCI6XCIpO1xuICAgICAgICBjb25zdCBzdWJMaW5lczogc3RyaW5nW10gPSBbYCMgJHtkaXNwbGF5fWBdO1xuXG4gICAgICAgIC8vIGNvcHkgU3RhdHMgYmxvY2sgaWYgeW91IGxpa2U6XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHNyLmFiaWxpdHkpKSB7XG4gICAgICAgICAgY29uc3QgYm9udXNlcyA9IHsgc3RyOjAsZGV4OjAsY29uOjAsaW50OjAsd2lzOjAsY2hhOjAgfTtcbiAgICAgICAgICBsZXQgY2hvb3NlT3B0OmFueSA9IG51bGw7XG4gICAgICAgICAgZm9yIChjb25zdCBvYmogb2Ygc3IuYWJpbGl0eSkge1xuICAgICAgICAgICAgaWYgKFwiY2hvb3NlXCIgaW4gb2JqKSBjaG9vc2VPcHQgPSBvYmouY2hvb3NlO1xuICAgICAgICAgICAgZWxzZSBmb3IgKGNvbnN0IFtrLHZdIG9mIE9iamVjdC5lbnRyaWVzKG9iaikpIChib251c2VzIGFzIGFueSlba10rPXYgYXMgbnVtYmVyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYWlycyA9IE9iamVjdC5lbnRyaWVzKGJvbnVzZXMpIGFzIFtzdHJpbmcsbnVtYmVyXVtdO1xuICAgICAgICAgIGNvbnN0IHBhcnRzID0gcGFpcnMuZmlsdGVyKChbLHZdKT0+diE9PTApLm1hcCgoW2ssdl0pPT5gJHtrLnRvVXBwZXJDYXNlKCl9ICR7dj49MD9cIitcIjpcIlwifSR7dn1gKTtcbiAgICAgICAgICBpZiAoY2hvb3NlT3B0Py5jb3VudCkgcGFydHMucHVzaChgQ0hPT1NFICR7Y2hvb3NlT3B0LmNvdW50fSBmcm9tICR7KGNob29zZU9wdC5mcm9tIGFzIHN0cmluZ1tdKS5tYXAocz0+cy50b1VwcGVyQ2FzZSgpKS5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCkgc3ViTGluZXMucHVzaChgKipBYmlsaXR5IFNjb3JlczoqKiAke3BhcnRzLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRoZW4gdHJhaXRzL2VudHJpZXNcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBzci5lbnRyaWVzIHx8IFtdKSB7XG4gICAgICAgICAgc3ViTGluZXMucHVzaChmb3JtYXRFbnRyeShlbnRyeSkpO1xuICAgICAgICAgIHN1YkxpbmVzLnB1c2goXCJcIik7IC8vIG9wdGlvbmFsIGJsYW5rIGxpbmUgYmV0d2VlbiBmZWF0dXJlc1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc3ViWWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGJ1aWxkRk0oc3IsIFNQRUNJRVNfTUVUQV9ERUZTKSwgU1BFQ0lFU19NRVRBX0RFRlMpO1xuICAgICAgICBvdXQucHVzaCh7XG4gICAgICAgICAgcGF0aDogYCR7c3ViRm9sZGVyfS8ke3NsdWcoc3IubmFtZSl9Lm1kYCxcbiAgICAgICAgICBjb250ZW50OiBgLS0tXFxuJHtzdWJZYW1sfVxcbi0tLVxcblxcbiR7c3ViTGluZXMuam9pbihcIlxcblwiKX1gLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm8gc3VicmFjZXMgXHUyMUQyIGEgc2luZ2xlIGZsYXQgZmlsZVxuICAgICAgb3V0LnB1c2goe1xuICAgICAgICBwYXRoOiBgU3BlY2llcy8ke3NhZmVOYW1lfS5tZGAsXG4gICAgICAgIGNvbnRlbnQ6IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtsaW5lcy5qb2luKFwiXFxuXCIpfWAsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyA1KSBTb3J0ICYgcmV0dXJuXG4gIHJldHVybiBvdXQuc29ydCgoYSwgYikgPT4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKSk7XG59XG4iLCAiLy81ZSAyMDI1IGNsYXNzZXNcblxuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IFxuICBidWlsZEZNLCBcbiAgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIFxuICBDTEFTU19NRVRBX0RFRlMsIFxuICB1bmlmaWVkVG9vbFByb2ZzLCBcbiAgdW5pZmllZFdlYXBvblByb2ZzLCBcbiAgU2tpbGxPcHRpb24sXG4gIHVuaWZpZWRTa2lsbHMsXG4gIFNLSUxMX09QVElPTlMsIFxuICBGTV9GSUVMRFNcbn0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcbmltcG9ydCB7IGZvcm1hdEVudHJ5IH0gZnJvbSBcIi4vaGVscGVycy9mb3JtYXRFbnRyeVwiO1xuXG5mdW5jdGlvbiBpc1R5cGVkRW50cnkoeDogYW55KTogeCBpcyB7IHR5cGU6IHN0cmluZzsgW2s6IHN0cmluZ106IGFueSB9IHtcbiAgcmV0dXJuIChcbiAgICB4ICE9IG51bGwgJiZcbiAgICB0eXBlb2YgeCA9PT0gXCJvYmplY3RcIiAmJlxuICAgICFBcnJheS5pc0FycmF5KHgpICYmXG4gICAgdHlwZW9mICh4IGFzIGFueSkudHlwZSA9PT0gXCJzdHJpbmdcIlxuICApO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRGZWF0dXJlTGluayhuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGlnbm9yZSA9IFtcIkFiaWxpdHkgU2NvcmUgSW1wcm92ZW1lbnRcIiwgXCJBcmNoZXR5cGUgRmVhdHVyZVwiLCBcIlN1YmNsYXNzIEZlYXR1cmVcIl07XG4gICAgaWYgKGlnbm9yZS5zb21lKHN1YiA9PiBuYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc3ViLnRvTG93ZXJDYXNlKCkpKSkge1xuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuICBcbiAgICBjb25zdCBhbmNob3IgPSBuYW1lXG4gICAgICAucmVwbGFjZSgvW15cXHdcXHNdL2csIFwiXCIpICAgICAgICAgICAvLyByZW1vdmUgcHVuY3R1YXRpb24gKGtlZXAgc3BhY2VzKVxuICAgICAgLnJlcGxhY2UoLy0vZywgXCIgXCIpICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBkYXNoZXNcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKSAgICAgICAgICAgICAgLy8gbm9ybWFsaXplIHdoaXRlc3BhY2VcbiAgICAgIC50cmltKClcbiAgICAgIC5yZXBsYWNlKC9cXGJcXHcvZywgbCA9PiBsLnRvVXBwZXJDYXNlKCkpOyAvLyBjYXBpdGFsaXplIHdvcmRzXG4gIFxuICAgIHJldHVybiBgW1sjJHthbmNob3J9XV1gO1xuICB9XG4gIFxuZXhwb3J0IGNvbnN0IE9QVF9GRUFUVVJFX1RZUEVfVE9fRlVMTDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBBSTogICBcIkFydGlmaWNlciBJbmZ1c2lvblwiLFxuICBFRDogICBcIkVsZW1lbnRhbCBEaXNjaXBsaW5lXCIsXG4gIEVJOiAgIFwiRWxkcml0Y2ggSW52b2NhdGlvblwiLFxuICBNTTogICBcIk1ldGFtYWdpY1wiLFxuICBNVjogICBcIk1hbmV1dmVyXCIsXG4gIFwiTVY6QlwiOiAgICBcIk1hbmV1dmVyLCBCYXR0bGUgTWFzdGVyXCIsXG4gIFwiTVY6QzItVUFcIjpcIk1hbmV1dmVyLCBDYXZhbGllciBWMiAoVUEpXCIsXG4gIFwiQVM6VjEtVUFcIjpcIkFyY2FuZSBTaG90LCBWMSAoVUEpXCIsXG4gIFwiQVM6VjItVUFcIjpcIkFyY2FuZSBTaG90LCBWMiAoVUEpXCIsXG4gIEFTOiAgIFwiQXJjYW5lIFNob3RcIixcbiAgT1RIOiAgXCJPdGhlclwiLFxuICBcIkZTOkZcIjpcIkZpZ2h0aW5nIFN0eWxlOyBGaWdodGVyXCIsXG4gIFwiRlM6QlwiOlwiRmlnaHRpbmcgU3R5bGU7IEJhcmRcIixcbiAgXCJGUzpQXCI6XCJGaWdodGluZyBTdHlsZTsgUGFsYWRpblwiLFxuICBcIkZTOlJcIjpcIkZpZ2h0aW5nIFN0eWxlOyBSYW5nZXJcIixcbiAgUEI6ICAgXCJQYWN0IEJvb25cIixcbiAgT1I6ICAgXCJPbm9tYW5jeSBSZXNvbmFudFwiLFxuICBSTjogICBcIlJ1bmUgS25pZ2h0IFJ1bmVcIixcbiAgQUY6ICAgXCJBbGNoZW1pY2FsIEZvcm11bGFcIixcbiAgVFQ6ICAgXCJUcmF2ZWxlcidzIFRyaWNrXCIsXG59O1xuICBcbiAgZnVuY3Rpb24gcmVuZGVyRW50cmllcyhlbnRyaWVzOiBhbnlbXSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGVudHJpZXMubWFwKChlbnRyeSkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhlbnRyeSk7XG4gICAgICB9XG4gIFxuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBpZiAoaXNUeXBlZEVudHJ5KGVudHJ5KSAmJiBlbnRyeS50eXBlID09PSBcInJlZkNsYXNzRmVhdHVyZVwiKSB7XG4gICAgICAgICAgY29uc3QgW25hbWVdID0gZW50cnkuY2xhc3NGZWF0dXJlLnNwbGl0KFwifFwiKTtcbiAgICAgICAgICByZXR1cm4gYCpTZWUgZmVhdHVyZTogKioke25hbWV9KioqYDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIpIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyB8fCBbXSk7XG4gICAgICAgICAgcmV0dXJuIGAqKiR7ZW50cnkubmFtZX0qKlxcblxcbiR7aW5uZXJ9YDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgaWYgKGlzVHlwZWRFbnRyeShlbnRyeSkgJiYgZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIpIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyB8fCBbXSk7XG4gICAgICAgICAgcmV0dXJuIGA+ICoqJHtlbnRyeS5uYW1lfSoqXFxuPlxcbj4gJHtpbm5lci5zcGxpdChcIlxcblwiKS5qb2luKFwiXFxuPiBcIil9YDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgLy8gZmFsbGJhY2tcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICByZXR1cm4gcmVuZGVyRW50cmllcyhlbnRyeS5lbnRyaWVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICBcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH0pLmZpbHRlcihCb29sZWFuKS5qb2luKFwiXFxuXCIpO1xuICB9XG4gIFxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2xhc3NGaWxlKFxuICBqc29uOiBhbnksXG4gIGVkaXRpb25JZDogc3RyaW5nLFxuICBmaWxlTmFtZTogc3RyaW5nLFxuICBvcHRpb25hbEZlYXR1cmVzOiBhbnlbXVxuKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICAvLyBtYWtlIGVkaXRpb25JZCBhdmFpbGFibGUgZm9yIGZyb250bWF0dGVyXG4gIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuICAvLyB1bndyYXAgdGhlIHJlYWwgY2xhc3MgcmVjb3JkXG4gIGNvbnN0IGNscyA9IEFycmF5LmlzQXJyYXkoanNvbi5jbGFzcykgPyBqc29uLmNsYXNzWzBdIDoganNvbjtcbiAgLy8gZGVyaXZlIHRoZSBNYXJrZG93biBmaWxlbmFtZVxuICBjb25zdCBjbGFzc05hbWUgPVxuICAgIHR5cGVvZiBjbHMubmFtZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgPyBjbHMubmFtZVxuICAgICAgOiBmaWxlTmFtZVxuICAgICAgPyBmaWxlTmFtZS5yZXBsYWNlKC9eY2xhc3MtLywgXCJcIikucmVwbGFjZSgvXFwuanNvbiQvLCBcIlwiKVxuICAgICAgOiBcIlVua25vd25cIjtcblxuICBjb25zdCBzdWJjbGFzc0ZpbGVzOiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuXG4gIGNvbnN0IFBST0ZfQk9OVVNfQllfTEVWRUwgPSBbXG4gICAgXCIrMlwiLCBcIisyXCIsIFwiKzJcIiwgXCIrMlwiLFxuICAgIFwiKzNcIiwgXCIrM1wiLCBcIiszXCIsIFwiKzNcIixcbiAgICBcIis0XCIsIFwiKzRcIiwgXCIrNFwiLCBcIis0XCIsXG4gICAgXCIrNVwiLCBcIis1XCIsIFwiKzVcIiwgXCIrNVwiLFxuICAgIFwiKzZcIiwgXCIrNlwiLCBcIis2XCIsIFwiKzZcIlxuICBdO1xuICBcbiAgLy8gbm9ybWFsaXplIGhpdFx1MjAxMGRpY2VcbiAgY29uc3QgaGROdW0gICA9IGNscy5oZD8ubnVtYmVyID8/IDE7XG4gIGNvbnN0IGhkRmFjZXMgPSBjbHMuaGQ/LmZhY2VzICA/PyA2O1xuICBjb25zdCBoZFN0ciAgID0gYCR7aGROdW19ZCR7aGRGYWNlc31gO1xuICBjb25zdCBoZE1heCAgID0gaGROdW0gKiBoZEZhY2VzO1xuICBjb25zdCBoZEF2ZyAgID0gTWF0aC5jZWlsKChoZEZhY2VzICsgMSkgLyAyKTtcblxuY29uc3QgYmFzZUZNID0gYnVpbGRGTShjbHMsIENMQVNTX01FVEFfREVGUyk7XG5jb25zdCBmbSAgICAgPSB7IC4uLmJhc2VGTSwgaGQ6IGhkU3RyIH07XG5jb25zdCB5YW1sICAgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSwgQ0xBU1NfTUVUQV9ERUZTKTtcblxuLy8gMSkgRGVjbGFyZSB5b3VyIGxpbmVzIGJ1ZmZlciBpbW1lZGlhdGVseVxuY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbi8vIDQpIE5vdyBjYXJyeSBvbiB3aXRoIHRoZSByZXN0IG9mIHlvdXIgYm9keVxubGluZXMucHVzaChgIyAke2NsYXNzTmFtZX1gKTtcbmlmIChjbHMuc291cmNlKSBsaW5lcy5wdXNoKGAqKlNvdXJjZToqKiAke2Nscy5zb3VyY2V9YCk7XG5saW5lcy5wdXNoKGBgKTtcbmxpbmVzLnB1c2goYC0tLWApO1xuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIaXQgUG9pbnRzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBsaW5lcy5wdXNoKGAjIyBIaXQgUG9pbnRzYCk7XG4gIGxpbmVzLnB1c2goYCoqSGl0IERpY2U6KiogJHtoZFN0cn0gcGVyICR7Y2xhc3NOYW1lfSBsZXZlbGApO1xuICBsaW5lcy5wdXNoKGAqKkhpdCBQb2ludHMgYXQgMXN0IExldmVsOioqICR7aGRNYXh9ICsgeW91ciBDb25zdGl0dXRpb24gbW9kaWZpZXJgKTtcbiAgbGluZXMucHVzaChcbiAgICBgKipIaXQgUG9pbnRzIGF0IEhpZ2hlciBMZXZlbHM6KiogJHtoZFN0cn0gKG9yICR7aGRBdmd9KSArIHlvdXIgQ29uc3RpdHV0aW9uIG1vZGlmaWVyIHBlciBsZXZlbCBhZnRlciAxc3RgXG4gICk7XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxubGluZXMucHVzaChgYCk7XG5saW5lcy5wdXNoKGAtLS1gKTtcbmxpbmVzLnB1c2goYCMjIFByb2ZpY2llbmNpZXNgKTtcblxuY29uc3Qgc3AgPSBjbHMuc3RhcnRpbmdQcm9maWNpZW5jaWVzID8/IHt9O1xuXG4vLyBBcm1vclxuaWYgKEFycmF5LmlzQXJyYXkoc3AuYXJtb3IpICYmIHNwLmFybW9yLmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqQXJtb3I6KiogJHtzcC5hcm1vci5qb2luKFwiLCBcIil9YCk7XG59XG5cbi8vIFdlYXBvbnNcbmNvbnN0IHdlYXBvbkxpc3QgPSB1bmlmaWVkV2VhcG9uUHJvZnMoc3ApO1xuaWYgKHdlYXBvbkxpc3QubGVuZ3RoKSB7XG4gIGxpbmVzLnB1c2goYC0gKipXZWFwb25zOioqICR7d2VhcG9uTGlzdC5qb2luKFwiLCBcIil9YCk7XG59XG5cbi8vIFRvb2xzXG5jb25zdCB0b29sTGlzdCA9IHVuaWZpZWRUb29sUHJvZnMoc3ApO1xuaWYgKHRvb2xMaXN0Lmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAtICoqVG9vbHM6KiogJHt0b29sTGlzdC5qb2luKFwiLCBcIil9YCk7XG59XG5cbi8vIFNhdmluZyBUaHJvd3NcbmNvbnN0IHNhdmVzID0gQXJyYXkuaXNBcnJheShjbHMucHJvZmljaWVuY3kpXG4gID8gY2xzLnByb2ZpY2llbmN5Lm1hcCgoazogc3RyaW5nKSA9PlxuICAgICAgKHsgc3RyOlwiU3RyZW5ndGhcIiwgZGV4OlwiRGV4dGVyaXR5XCIsIGNvbjpcIkNvbnN0aXR1dGlvblwiLFxuICAgICAgICAgaW50OlwiSW50ZWxsaWdlbmNlXCIsIHdpczpcIldpc2RvbVwiLCBjaGE6XCJDaGFyaXNtYVwiIH1ba10gfHwgay50b1VwcGVyQ2FzZSgpKVxuICAgIClcbiAgOiBbXTtcbmlmIChzYXZlcy5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgLSAqKlNhdmluZyBUaHJvd3M6KiogJHtzYXZlcy5qb2luKFwiLCBcIil9YCk7XG59XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFNraWxscyBcdTI1MDBcdTI1MDBcdTI1MDBcbntcbiAgLy8gMSkgZ3JhYiB3aGF0ZXZlciBhcnJheSBob2xkcyB0aGUgcmF3IG9iamVjdHMvc3RyaW5nc1xuICBjb25zdCByYXdTa2lsbHM6IGFueVtdID1cbiAgICBBcnJheS5pc0FycmF5KHNwLnNraWxsUHJvZmljaWVuY2llcykgPyBzcC5za2lsbFByb2ZpY2llbmNpZXNcbiAgICA6IEFycmF5LmlzQXJyYXkoc3Auc2tpbGxzKSAgICAgICAgICAgICA/IHNwLnNraWxsc1xuICAgIDogQXJyYXkuaXNBcnJheShzcC5za2lsbFByb2YpICAgICAgICAgID8gc3Auc2tpbGxQcm9mXG4gICAgOiBbXTtcblxuICAvLyAyKSBsb29rIGZvciB0aGUgXHUyMDFDY2hvb3NlIE4gZnJvbSBbXHUyMDI2XVx1MjAxRCBlbnRyeVxuICBjb25zdCBjaG9pY2VFbnRyeSA9IHJhd1NraWxscy5maW5kKFxuICAgIGUgPT4gZSAmJlxuICAgICAgICAgKHR5cGVvZiBlLmNob29zZSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZS5hbnkgPT09IFwibnVtYmVyXCIpXG4gICk7XG5cbiAgaWYgKGNob2ljZUVudHJ5KSB7XG4gICAgLy8gaG93IG1hbnkgdG8gY2hvb3NlXG4gICAgY29uc3QgY291bnQgPSBjaG9pY2VFbnRyeS5jaG9vc2U/LmNvdW50ID8/IGNob2ljZUVudHJ5LmFueSA/PyAxO1xuXG4gICAgLy8gcHVsbCB0aGUgYWN0dWFsIGxpc3Qgb2Ygb3B0aW9ucywgb3IgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgU0tJTExfT1BUSU9OU1xuICAgIGNvbnN0IG9wdGlvbnM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShjaG9pY2VFbnRyeS5jaG9vc2U/LmZyb20pXG4gICAgICA/IGNob2ljZUVudHJ5LmNob29zZS5mcm9tLm1hcCgoczogc3RyaW5nKSA9PlxuICAgICAgICAgIC8vIHRpdGxlLWNhc2UgZWFjaCB3b3JkIChvciBqdXN0IHVzZSBzKVxuICAgICAgICAgIHMuc3BsaXQoXCIgXCIpLm1hcCh3ID0+IHdbMF0udG9VcHBlckNhc2UoKSArIHcuc2xpY2UoMSkpLmpvaW4oXCIgXCIpXG4gICAgICAgIClcbiAgICAgIDogU0tJTExfT1BUSU9OUztcblxuICAgIGxpbmVzLnB1c2goYC0gKipTa2lsbHMgKENob29zZSAke2NvdW50fSk6KiogJHtvcHRpb25zLmpvaW4oXCIsIFwiKX1gKTtcblxuICB9IGVsc2Uge1xuICAgIC8vIG5vIGNob29zZS1mcm9tIG9iamVjdCBcdTIxOTIgZmxhdCBsaXN0IGZyb20geW91ciB1bmlmaWVkIGhlbHBlclxuICAgIGNvbnN0IGZsYXQgPSB1bmlmaWVkU2tpbGxzKHNwKTtcbiAgICBpZiAoZmxhdC5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYC0gKipTa2lsbHM6KiogJHtmbGF0LmpvaW4oXCIsIFwiKX1gKTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEVxdWlwbWVudCBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgaWYgKEFycmF5LmlzQXJyYXkoY2xzLnN0YXJ0aW5nRXF1aXBtZW50KSkge1xuICAgIGxpbmVzLnB1c2goYFxcbiMjIyBFcXVpcG1lbnRgKTtcbiAgICBjbHMuc3RhcnRpbmdFcXVpcG1lbnRcbiAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT4gdHlwZW9mIGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAuZm9yRWFjaCgoaXRlbTogc3RyaW5nKSA9PiBsaW5lcy5wdXNoKGAtICR7aXRlbX1gKSk7XG4gIH1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENsYXNzIFByb2dyZXNzaW9uIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgcHJvZ0dyb3VwcyA9IGNscy5jbGFzc1RhYmxlR3JvdXBzID8/IFtdO1xuY29uc3QgbWF4TGV2ZWwgPSAyMDtcblxuaWYgKCFwcm9nR3JvdXBzLmxlbmd0aCkge1xuICBsaW5lcy5wdXNoKGAqKE5vIGNsYXNzIHRhYmxlIHByb3ZpZGVkIGZvciB0aGlzIGNsYXNzLikqYCk7XG59IGVsc2Uge1xuICAvLyAxKSBCdWlsZCBsZXZlbCBcdTIxOTIgZmVhdHVyZSBtYXBcbiAgY29uc3QgZmVhdHVyZXNCeUxldmVsOiBSZWNvcmQ8bnVtYmVyLCBzdHJpbmdbXT4gPSB7fTtcbiAgZm9yIChjb25zdCBmZWF0IG9mIGNscy5jbGFzc0ZlYXR1cmVzID8/IFtdKSB7XG4gICAgY29uc3QgcmF3ID0gdHlwZW9mIGZlYXQgPT09IFwib2JqZWN0XCIgJiYgZmVhdC5jbGFzc0ZlYXR1cmUgPyBmZWF0LmNsYXNzRmVhdHVyZSA6IFN0cmluZyhmZWF0KTtcbiAgICBjb25zdCBbbmFtZSwsICxsdmxTdHJdID0gcmF3LnNwbGl0KFwifFwiKTtcbiAgICBjb25zdCBsdmwgPSBOdW1iZXIobHZsU3RyID8/IDApO1xuICAgIGlmICghZmVhdHVyZXNCeUxldmVsW2x2bF0pIGZlYXR1cmVzQnlMZXZlbFtsdmxdID0gW107XG4gICAgZmVhdHVyZXNCeUxldmVsW2x2bF0ucHVzaChuYW1lKTtcbiAgfVxuXG4gIC8vIDIpIEdhdGhlciBldmVyeSBjb2x1bW4gbGFiZWwgJiByb3cgdmFsdWVcbiAgY29uc3QgYWxsTGFiZWxzU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGNvbnN0IHJvd01hcHM6IFJlY29yZDxudW1iZXIsIFJlY29yZDxzdHJpbmcsIHN0cmluZz4+ID0ge307XG5cbiAgZm9yIChjb25zdCBncm91cCBvZiBwcm9nR3JvdXBzKSB7XG4gICAgY29uc3QgbGFiZWxzID0gQXJyYXkuaXNBcnJheShncm91cC5jb2xMYWJlbHMpXG4gICAgICA/IGdyb3VwLmNvbExhYmVscy5tYXAoKGw6IHN0cmluZykgPT4gcmVwbGFjZTVlVGFncyhsKSlcbiAgICAgIDogW107XG4gICAgY29uc3Qgcm93cyA9IEFycmF5LmlzQXJyYXkoZ3JvdXAucm93cylcbiAgICAgID8gZ3JvdXAucm93c1xuICAgICAgOiBBcnJheS5pc0FycmF5KGdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uKVxuICAgICAgICA/IGdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uXG4gICAgICAgIDogW107XG5cbiAgICBpZiAoIWxhYmVscy5sZW5ndGggfHwgIXJvd3MubGVuZ3RoKSBjb250aW51ZTtcblxuICAgIGZvciAobGV0IGx2bCA9IDA7IGx2bCA8IHJvd3MubGVuZ3RoOyBsdmwrKykge1xuICAgICAgY29uc3QgbGV2ZWxOdW0gPSBsdmwgKyAxO1xuICAgICAgaWYgKCFyb3dNYXBzW2xldmVsTnVtXSkgcm93TWFwc1tsZXZlbE51bV0gPSB7fTtcbiAgICAgIGNvbnN0IHJvd01hcCA9IHJvd01hcHNbbGV2ZWxOdW1dO1xuICAgICAgY29uc3QgY2VsbHMgPSByb3dzW2x2bF07XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGFiZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxhYmVsID0gbGFiZWxzW2ldO1xuICAgICAgICBsZXQgdmFsID0gXCJcIjtcbiAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzW2ldO1xuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNlbGwpKSB7XG4gICAgICAgICAgdmFsID0gY2VsbC5qb2luKFwiLCBcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoY2VsbCAmJiB0eXBlb2YgY2VsbCA9PT0gXCJvYmplY3RcIiAmJiBcInZhbHVlXCIgaW4gY2VsbCkge1xuICAgICAgICAgIHZhbCA9IFN0cmluZyhjZWxsLnZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWwgPSBTdHJpbmcoY2VsbCA/PyBcIlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFsbExhYmVsc1NldC5hZGQobGFiZWwpO1xuICAgICAgICByb3dNYXBbbGFiZWxdID0gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIDMpICoqRmlsdGVyIG91dCoqIGFueSBzcGVsbFx1MjAxMHRhYmxlIGNvbHVtbnNcbiAgY29uc3QgYWxsTGFiZWxzID0gQXJyYXkuZnJvbShhbGxMYWJlbHNTZXQpLmZpbHRlcihsYmwgPT5cbiAgICAhL0NhbnRyaXBzIEtub3dufFNwZWxscyBLbm93bnxcXGQrKHN0fG5kfHJkfHRoKS8udGVzdChsYmwpXG4gICk7XG5cbiAgLy8gNCkgQnVpbGQgZmluYWwgaGVhZGVyICYgcm93c1xuICBjb25zdCBtZXJnZWRMYWJlbHMgPSBbXCJMZXZlbFwiLCBcIlByb2ZpY2llbmN5IEJvbnVzXCIsIFwiQ2xhc3MgRmVhdHVyZXNcIiwgLi4uYWxsTGFiZWxzXTtcbiAgY29uc3QgbWVyZ2VkUm93czogc3RyaW5nW11bXSA9IFtdO1xuXG4gIGZvciAobGV0IGx2bCA9IDE7IGx2bCA8PSBtYXhMZXZlbDsgbHZsKyspIHtcbiAgICBjb25zdCBmZWF0dXJlTGlzdCA9IChmZWF0dXJlc0J5TGV2ZWxbbHZsXSA/PyBbXSkubWFwKGZvcm1hdEZlYXR1cmVMaW5rKTtcbiAgICBjb25zdCByb3dNYXAgPSByb3dNYXBzW2x2bF0gPz8ge307XG5cbiAgICBtZXJnZWRSb3dzLnB1c2goW1xuICAgICAgbHZsLnRvU3RyaW5nKCksXG4gICAgICBQUk9GX0JPTlVTX0JZX0xFVkVMW2x2bCAtIDFdIHx8IFwiXCIsXG4gICAgICBmZWF0dXJlTGlzdC5qb2luKFwiLCBcIikucmVwbGFjZSgvXFx8L2csIFwiJiMxMjQ7XCIpLFxuICAgICAgLi4uYWxsTGFiZWxzLm1hcChsYWJlbCA9PiByb3dNYXBbbGFiZWxdID8/IFwiXCIpXG4gICAgXSk7XG4gIH1cblxuICAvLyA1KSBSZW5kZXIgdGhlIGZlYXR1cmVzXHUyMDEwb25seSB0YWJsZVxubGluZXMucHVzaChgXFxuPiBbIWV4YW1wbGVdLSBDbGFzcyBQcm9ncmVzc2lvbiBUYWJsZWApO1xubGluZXMucHVzaChcbiAgcmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgdHlwZTogICAgICBcInRhYmxlXCIsXG4gICAgY2FwdGlvbjogICBcIlwiLFxuICAgIGNvbExhYmVsczogbWVyZ2VkTGFiZWxzLFxuICAgIHJvd3M6ICAgICAgbWVyZ2VkUm93cyxcbiAgfSkpO1xufVxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3BlbGwgUHJvZ3Jlc3Npb24gXHUyNTAwXHUyNTAwXHUyNTAwXG4vLyAxKSBmaW5kIHRoZSB0d28gZ3JvdXBzXG5jb25zdCBjc0dyb3VwID0gcHJvZ0dyb3Vwcy5maW5kKChnOiBhbnkpID0+XG4gIEFycmF5LmlzQXJyYXkoZy5jb2xMYWJlbHMpICYmXG4gIGcuY29sTGFiZWxzLnNvbWUoKGxibDogYW55KSA9PiAvQ2FudHJpcHMgS25vd258U3BlbGxzIEtub3duLy50ZXN0KFN0cmluZyhsYmwpKSlcbik7XG5jb25zdCBzbG90R3JvdXAgPSBwcm9nR3JvdXBzLmZpbmQoKGc6IGFueSkgPT5cbiAgQXJyYXkuaXNBcnJheShnLmNvbExhYmVscykgJiZcbiAgZy50aXRsZSA9PT0gXCJTcGVsbCBTbG90cyBwZXIgU3BlbGwgTGV2ZWxcIlxuKTtcblxuaWYgKGNzR3JvdXAgJiYgc2xvdEdyb3VwKSB7XG4gIC8vIDIpIHJhdyBsYWJlbHNcbiAgY29uc3QgY3NMYWJlbHMgICA9IChjc0dyb3VwLmNvbExhYmVscyBhcyBzdHJpbmdbXSkubWFwKGwgPT4gcmVwbGFjZTVlVGFncyhsKSk7XG4gIGNvbnN0IHNsb3RMYWJlbHMgPSAoc2xvdEdyb3VwLmNvbExhYmVscyBhcyBzdHJpbmdbXSkubWFwKGwgPT4gcmVwbGFjZTVlVGFncyhsKSk7XG5cbiAgLy8gMykgcmF3IHJvd3NcbiAgY29uc3QgY3NSb3dzICAgPSAoY3NHcm91cC5yb3dzICAgICAgYXMgYW55W11bXSkgICAgICAgICAgICAgIHx8IFtdO1xuICBjb25zdCBzbG90Um93cyA9IChzbG90R3JvdXAucm93c1NwZWxsUHJvZ3Jlc3Npb24gYXMgYW55W11bXSkgfHwgW107XG5cbiAgLy8gNCkgYnVpbGQgaGVhZGVyOiBMZXZlbCArIGNhbnRyaXBzL3NwZWxscyArIGVhY2ggc2xvdCBsZXZlbFxuICBjb25zdCBjb2xMYWJlbHMgPSBbXCJMZXZlbFwiLCAuLi5jc0xhYmVscywgLi4uc2xvdExhYmVsc107XG5cbiAgLy8gNSkgYnVpbGQgZWFjaCByb3cgYnkgemlwcGluZyBjc1Jvd3NbaV0gKyBzbG90Um93c1tpXVxuICBjb25zdCBzcGVsbFJvd3M6IHN0cmluZ1tdW10gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1heChjc1Jvd3MubGVuZ3RoLCBzbG90Um93cy5sZW5ndGgpOyBpKyspIHtcbiAgICBjb25zdCBsdmwgPSBTdHJpbmcoaSArIDEpO1xuICAgIGNvbnN0IGNzQ2VsbHMgICA9IGNzUm93c1tpXSAgID8gY3NSb3dzW2ldLm1hcChTdHJpbmcpICAgOiBjc0xhYmVscy5tYXAoXyA9PiBcIlwiKTtcbiAgICBjb25zdCBzbG90Q2VsbHMgPSBzbG90Um93c1tpXSA/IHNsb3RSb3dzW2ldLm1hcChTdHJpbmcpIDogc2xvdExhYmVscy5tYXAoXyA9PiBcIlwiKTtcbiAgICBzcGVsbFJvd3MucHVzaChbbHZsLCAuLi5jc0NlbGxzLCAuLi5zbG90Q2VsbHNdKTtcbiAgfVxuXG4gIC8vIDYpIHJlbmRlciFcbiAgbGluZXMucHVzaChgXFxuPiBbIXRpcF0tIFNwZWxsIFByb2dyZXNzaW9uIFRhYmxlYCk7XG4gIGxpbmVzLnB1c2goXG4gICAgcmVuZGVyTWFya2Rvd25UYWJsZSh7XG4gICAgICB0eXBlOiAgICAgIFwidGFibGVcIixcbiAgICAgIGNhcHRpb246ICAgXCJcIixcbiAgICAgIGNvbExhYmVsczogY29sTGFiZWxzLFxuICAgICAgcm93czogICAgICBzcGVsbFJvd3MsXG4gIH0pKTtcbn1cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3ViY2xhc3NlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHN1YnMgPSBBcnJheS5pc0FycmF5KGpzb24uc3ViY2xhc3MpID8ganNvbi5zdWJjbGFzcyA6IFtdO1xuY29uc3Qgc3ViY2xhc3NGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkoanNvbi5zdWJjbGFzc0ZlYXR1cmUpXG4gID8ganNvbi5zdWJjbGFzc0ZlYXR1cmVcbiAgOiBqc29uLmxvb2t1cD8uc3ViY2xhc3NGZWF0dXJlID8/IFtdO1xuXG5mb3IgKGNvbnN0IHNjIG9mIHN1YnMpIHtcbiAgY29uc3Qgc3ViY2xhc3NOYW1lID0gc2MubmFtZTtcbiAgY29uc3Qgc3ViTGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEhlYWRlciBtZXRhZGF0YSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgc3ViTGluZXMucHVzaChgIyAke3N1YmNsYXNzTmFtZX1gKTtcbiAgc3ViTGluZXMucHVzaChgKipQYXJlbnQgQ2xhc3M6KiogW1ske2NsYXNzTmFtZX1dXWApO1xuICBpZiAoc2Muc291cmNlKSBzdWJMaW5lcy5wdXNoKGAqKlNvdXJjZToqKiAke3NjLnNvdXJjZX1gKTtcbiAgc3ViTGluZXMucHVzaChgYCk7IC8vIGJsYW5rIGxpbmVcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSW50cm8gZW50cnkgKGxldmVsIDMgZmVhdHVyZSBkZXNjcmlwdGlvbikgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGNvbnN0IGludHJvID0gc3ViY2xhc3NGZWF0dXJlcy5maW5kKChmOiBhbnkpID0+XG4gICAgZi5uYW1lID09PSBzYy5uYW1lICYmXG4gICAgZi5sZXZlbCA9PT0gMyAmJlxuICAgIGYuc3ViY2xhc3NTaG9ydE5hbWUgPT09IHNjLnNob3J0TmFtZSAmJlxuICAgIGYuc3ViY2xhc3NTb3VyY2UgPT09IHNjLnNvdXJjZVxuICApO1xuICBpZiAoaW50cm8/LmVudHJpZXM/Lmxlbmd0aCkge1xuICAgIGNvbnN0IGludHJvVGV4dCA9IEFycmF5LmlzQXJyYXkoaW50cm8uZW50cmllcylcbiAgICAgID8gaW50cm8uZW50cmllcy5tYXAoKGU6IGFueSkgPT5cbiAgICAgICAgICB0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIiA/IHJlcGxhY2U1ZVRhZ3MoZSkgOiBmb3JtYXRFbnRyeShlKVxuICAgICAgICApLmpvaW4oXCJcXG5cXG5cIilcbiAgICAgIDogZm9ybWF0RW50cnkoaW50cm8uZW50cmllcyk7XG4gICAgc3ViTGluZXMucHVzaChpbnRyb1RleHQsIGBgKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBPcHRpb25hbFx1MjAxMGZlYXR1cmUgYmxvY2sgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGNvbnN0IGNvZGUgPSAoT2JqZWN0LmVudHJpZXMoT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMKSBhcyBbc3RyaW5nLHN0cmluZ11bXSlcbiAgICAuZmluZCgoWywgZnVsbF0pID0+XG4gICAgICBmdWxsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc3ViY2xhc3NOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgKT8uWzBdO1xuICBpZiAoY29kZSkge1xuICAgIGNvbnN0IG1hdGNoZXMgPSBvcHRpb25hbEZlYXR1cmVzLmZpbHRlcihvZiA9PlxuICAgICAgQXJyYXkuaXNBcnJheShvZi5mZWF0dXJlVHlwZSkgJiYgb2YuZmVhdHVyZVR5cGUuaW5jbHVkZXMoY29kZSlcbiAgICApO1xuICAgIGlmIChtYXRjaGVzLmxlbmd0aCkge1xuICAgICAgc3ViTGluZXMucHVzaChgIyMgJHtzdWJjbGFzc05hbWV9IE9wdGlvbmFsIEZlYXR1cmVzYCk7XG4gICAgICBmb3IgKGNvbnN0IGZlYXQgb2YgbWF0Y2hlcykge1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGZlYXQuZW50cmllcykge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKGVudHJ5KVxuICAgICAgICAgICAgOiBmb3JtYXRFbnRyeShlbnRyeSk7XG4gICAgICAgICAgc3ViTGluZXMucHVzaChgKioke2ZlYXQubmFtZX06KiogJHt0eHR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgc3ViTGluZXMucHVzaChgYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFN1YmNsYXNzIHByb2dyZXNzaW9uIHRhYmxlIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBwcm9nID0gc2Muc3ViY2xhc3NUYWJsZUdyb3VwcyA/PyBbXTtcbiAgaWYgKHByb2cubGVuZ3RoKSB7XG4gICAgY29uc3QgbGFiZWxzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgY29uc3Qgcm93c01hcDogUmVjb3JkPG51bWJlciwgUmVjb3JkPHN0cmluZyxzdHJpbmc+PiA9IHt9O1xuICAgIGZvciAoY29uc3QgZyBvZiBwcm9nKSB7XG4gICAgICBjb25zdCBjb2xzID0gKGcuY29sTGFiZWxzID8/IFtdKS5tYXAocmVwbGFjZTVlVGFncyk7XG4gICAgICBjb25zdCByb3dzID0gQXJyYXkuaXNBcnJheShnLnJvd3MpXG4gICAgICAgID8gZy5yb3dzXG4gICAgICAgIDogQXJyYXkuaXNBcnJheShnLnJvd3NTcGVsbFByb2dyZXNzaW9uKVxuICAgICAgICAgID8gZy5yb3dzU3BlbGxQcm9ncmVzc2lvblxuICAgICAgICAgIDogW107XG4gICAgICByb3dzLmZvckVhY2goKHI6IGFueSwgaTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGx2bCA9IGkgKyAxO1xuICAgICAgICByb3dzTWFwW2x2bF0gPz89IHt9O1xuICAgICAgICByLmZvckVhY2goKGM6IGFueSwgajogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgY29uc3QgbGFiID0gY29sc1tqXTtcbiAgICAgICAgICBpZiAoIWxhYikgcmV0dXJuO1xuICAgICAgICAgIGxhYmVscy5hZGQobGFiKTtcbiAgICAgICAgICByb3dzTWFwW2x2bF1bbGFiXSA9IHR5cGVvZiBjID09PSBcIm9iamVjdFwiICYmIGMgIT09IG51bGwgJiYgXCJ2YWx1ZVwiIGluIGNcbiAgICAgICAgICAgID8gU3RyaW5nKGMudmFsdWUpXG4gICAgICAgICAgICA6IFN0cmluZyhjID8/IFwiXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBoZHJzID0gQXJyYXkuZnJvbShsYWJlbHMpO1xuICAgIHN1YkxpbmVzLnB1c2goYCMjIFN1YmNsYXNzIFByb2dyZXNzaW9uYCk7XG4gICAgc3ViTGluZXMucHVzaChyZW5kZXJNYXJrZG93blRhYmxlKHtcbiAgICAgIHR5cGU6ICAgICAgXCJ0YWJsZVwiLFxuICAgICAgY2FwdGlvbjogICBcIlwiLFxuICAgICAgY29sTGFiZWxzOiBbXCJMZXZlbFwiLCAuLi5oZHJzXSxcbiAgICAgIHJvd3M6ICAgICAgQXJyYXkuZnJvbSh7IGxlbmd0aDogMjAgfSwgKF8sIGkpID0+IHtcbiAgICAgICAgY29uc3QgbHZsID0gaSArIDE7XG4gICAgICAgIHJldHVybiBbU3RyaW5nKGx2bCksIC4uLmhkcnMubWFwKGggPT4gcm93c01hcFtsdmxdPy5baF0gPz8gXCJcIildO1xuICAgICAgfSlcbiAgICB9KSk7XG4gIH1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIERldGFpbGVkIGxldmVsXHUyMDEwYnlcdTIwMTBsZXZlbCBmZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IGZlYXRzQnlMdmw6IFJlY29yZDxudW1iZXIsIGFueVtdPiA9IHt9O1xuZm9yIChjb25zdCBmIG9mIHN1YmNsYXNzRmVhdHVyZXMpIHtcbiAgaWYgKFxuICAgIGYuc3ViY2xhc3NTaG9ydE5hbWUgPT09IHNjLnNob3J0TmFtZSAmJlxuICAgIGYuc3ViY2xhc3NTb3VyY2UgPT09IHNjLnNvdXJjZSAmJlxuICAgIGYuY2xhc3NOYW1lID09PSBjbGFzc05hbWVcbiAgKSB7XG4gICAgY29uc3QgbHZsID0gZi5sZXZlbCA/PyAwO1xuICAgIDsoZmVhdHNCeUx2bFtsdmxdID8/PSBbXSkucHVzaChmKTtcbiAgfVxufVxuXG5mb3IgKGNvbnN0IGx2bCBvZiBPYmplY3Qua2V5cyhmZWF0c0J5THZsKS5tYXAoTnVtYmVyKS5zb3J0KChhLGIpPT5hLWIpKSB7XG4gIHN1YkxpbmVzLnB1c2goYC0tLWAsIGAjIyBMZXZlbCAke2x2bH1gKTtcblxuICBmb3IgKGNvbnN0IGYgb2YgZmVhdHNCeUx2bFtsdmxdKSB7XG4gIHN1YkxpbmVzLnB1c2goYCMjIyAke2YubmFtZX1gKTtcblxuICAvLyBXYWxrIGVhY2ggZW50cnkgZm9yIHRoaXMgZmVhdHVyZVxuICBmb3IgKGNvbnN0IGVudCBvZiBBcnJheS5pc0FycmF5KGYuZW50cmllcykgPyBmLmVudHJpZXMgOiBbZi5lbnRyaWVzXSkge1xuICAgIC8vIDEpIFBsYWluIHBhcmFncmFwaCBlbnRyaWVzXG4gICAgaWYgKHR5cGVvZiBlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyhlbnQpKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIDIpIElmIGl0J3MgdGhlIFwiTWFuZXV2ZXJzXCIgZW50cmllc1x1MjAxMGJsb2NrLCBpbmplY3QgeW91ciBsaXN0IGhlcmVcbiAgICBpZiAoaXNUeXBlZEVudHJ5KGVudCkgJiYgZW50LnR5cGUgPT09IFwiZW50cmllc1wiICYmIC9eTWFuZXV2ZXJzJC9pLnRlc3QoZW50Lm5hbWUpKSB7XG4gICAgICAvLyBmaXJzdCBwcmludCB0aGUgc3ViXHUyMDEwaGVhZGluZyBhbmQgYW55IHRleHQgaXQgaGFkXG4gICAgICBzdWJMaW5lcy5wdXNoKGAjIyMjIyAke2VudC5uYW1lfWApO1xuICAgICAgZm9yIChjb25zdCB0eHQgb2YgQXJyYXkuaXNBcnJheShlbnQuZW50cmllcykgPyBlbnQuZW50cmllcyA6IFtlbnQuZW50cmllc10pIHtcbiAgICAgICAgc3ViTGluZXMucHVzaCh0eXBlb2YgdHh0ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHR4dClcbiAgICAgICAgICA6IGZvcm1hdEVudHJ5KHR4dCkpO1xuICAgICAgfVxuXG4gICAgICAvLyBub3cgaW5qZWN0IHRoZSBmdWxsIG1hbmV1dmVyIGRlZmluaXRpb25zIGZvciB0aGlzIHN1YmNsYXNzXG4gICAgICBjb25zdCBjb2RlID0gKE9iamVjdC5lbnRyaWVzKE9QVF9GRUFUVVJFX1RZUEVfVE9fRlVMTCkgYXMgW3N0cmluZyxzdHJpbmddW10pXG4gICAgICAgIC5maW5kKChbLCBmdWxsXSkgPT5cbiAgICAgICAgICBmdWxsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc3ViY2xhc3NOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICk/LlswXTtcbiAgICAgIGlmIChjb2RlKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSBvcHRpb25hbEZlYXR1cmVzLmZpbHRlcihvZiA9PlxuICAgICAgICAgIEFycmF5LmlzQXJyYXkob2YuZmVhdHVyZVR5cGUpICYmIG9mLmZlYXR1cmVUeXBlLmluY2x1ZGVzKGNvZGUpXG4gICAgICAgICk7XG4gICAgICAgIGZvciAoY29uc3QgZmVhdERlZiBvZiBtYXRjaGVzKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgZmVhdERlZi5lbnRyaWVzKSB7XG4gICAgICAgICAgICBjb25zdCBsaW5lID0gdHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3Moc3ViKVxuICAgICAgICAgICAgICA6IGZvcm1hdEVudHJ5KHN1Yik7XG4gICAgICAgICAgICBzdWJMaW5lcy5wdXNoKGAqKiR7ZmVhdERlZi5uYW1lfToqKiAke2xpbmV9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN1YkxpbmVzLnB1c2goXCJcIik7IC8vIHNwYWNlclxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyAzKSBBbnkgb3RoZXIgbmVzdGVkIFwiZW50cmllc1wiIGJsb2Nrc1xuICAgIGlmIChpc1R5cGVkRW50cnkoZW50KSAmJiBlbnQudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgZW50Lm5hbWUpIHtcbiAgICAgIHN1YkxpbmVzLnB1c2goYCMjIyMjICR7ZW50Lm5hbWV9YCk7XG4gICAgICBmb3IgKGNvbnN0IGUyIG9mIEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdKSB7XG4gICAgICAgIHN1YkxpbmVzLnB1c2goZm9ybWF0RW50cnkoZTIpKTtcbiAgICAgIH1cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIDQpIEluc2V0c1xuICAgIGlmIChpc1R5cGVkRW50cnkoZW50KSAmJiBlbnQudHlwZSA9PT0gXCJpbnNldFwiICYmIGVudC5uYW1lKSB7XG4gICAgICBjb25zdCBpbm5lciA9IEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdO1xuICAgICAgc3ViTGluZXMucHVzaChgPiAqKiR7ZW50Lm5hbWV9KipgKTtcbiAgICAgIGlubmVyLmZvckVhY2goKGUyOiBhbnkpID0+IHN1YkxpbmVzLnB1c2goYD4gJHtmb3JtYXRFbnRyeShlMil9YCkpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gNSkgRmFsbGJhY2tcbiAgICBjb25zdCBmYiA9IGZvcm1hdEVudHJ5KGVudCk7XG4gICAgaWYgKGZiKSBzdWJMaW5lcy5wdXNoKGZiKTtcbiAgfVxuICB9XG59XG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQ2xlYW4gdXAgJiBwdXNoIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBjb25zdCBzdWJjbGFzc0NvbnRlbnQgPSBzdWJMaW5lc1xuICAgIC5qb2luKFwiXFxuXFxuXCIpXG4gICAgLnJlcGxhY2UoL1xcbnszLH0vZywgXCJcXG5cXG5cIik7XG4gIHN1YmNsYXNzRmlsZXMucHVzaCh7XG4gICAgcGF0aDogYENsYXNzZXMvJHtjbGFzc05hbWV9L1N1YmNsYXNzZXMvJHtzdWJjbGFzc05hbWV9Lm1kYCxcbiAgICBjb250ZW50OiBzdWJjbGFzc0NvbnRlbnRcbiAgfSk7XG59XG5cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3ViY2xhc3NlcyBTdW1tYXJ5IFx1MjUwMFx1MjUwMFx1MjUwMFxuaWYgKHN1YnMubGVuZ3RoKSB7XG4gIGNvbnN0IGxpbmtzID0gc3Vicy5tYXAoKHNjOiBhbnkpID0+XG4gICAgYFtbU3ViY2xhc3Nlcy8ke3NjLm5hbWUucmVwbGFjZSgvW1xcXFwvXS9nLCBcIi1cIil9fCR7c2MubmFtZX1dXWBcbiAgKTtcbiAgbGluZXMucHVzaChgXFxuKipTdWJjbGFzc2VzOioqICR7bGlua3Muam9pbihcIiwgXCIpfWApO1xufVxuXG5cbiAgLy8gR2V0IGZ1bGwgY2xhc3MgZmVhdHVyZSBkZWZpbml0aW9uc1xuY29uc3QgYWxsRmVhdHVyZXMgPSBBcnJheS5pc0FycmF5KGpzb24uY2xhc3NGZWF0dXJlKSA/IGpzb24uY2xhc3NGZWF0dXJlIDoganNvbi5sb29rdXA/LmNsYXNzRmVhdHVyZSA/PyBbXTtcbmNvbnN0IGZlYXR1cmVzQnlMZXZlbDogUmVjb3JkPG51bWJlciwgYW55W10+ID0ge307XG5cbmZvciAoY29uc3QgZW50cnkgb2YgYWxsRmVhdHVyZXMpIHtcbiAgaWYgKGVudHJ5LmNsYXNzTmFtZSAhPT0gY2xhc3NOYW1lKSBjb250aW51ZTtcbiAgY29uc3QgbHZsID0gZW50cnkubGV2ZWwgPz8gMDtcbiAgaWYgKCFmZWF0dXJlc0J5TGV2ZWxbbHZsXSkgZmVhdHVyZXNCeUxldmVsW2x2bF0gPSBbXTtcbiAgZmVhdHVyZXNCeUxldmVsW2x2bF0ucHVzaChlbnRyeSk7XG59XG5cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIExldmVsIEZlYXR1cmVzIFx1MjUwMFx1MjUwMFx1MjUwMFxubGluZXMucHVzaChgYCk7XG5saW5lcy5wdXNoKGAtLS1gKTtcbmxpbmVzLnB1c2goYCMjIExldmVsIEZlYXR1cmVzYCk7XG5cbmNvbnN0IGxldmVscyA9IE9iamVjdFxuICAua2V5cyhmZWF0dXJlc0J5TGV2ZWwpXG4gIC5tYXAobiA9PiArbilcbiAgLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcblxuZm9yIChjb25zdCBsdmwgb2YgbGV2ZWxzKSB7XG4gIGxpbmVzLnB1c2goYCMjIyBMZXZlbCAke2x2bH1gKTtcblxuICBmb3IgKGNvbnN0IGZlYXQgb2YgZmVhdHVyZXNCeUxldmVsW2x2bF0pIHtcbiAgICAvLyBGZWF0dXJlIGhlYWRlclxuICAgIGxpbmVzLnB1c2goYCMjIyMgJHtmZWF0Lm5hbWV9YCk7XG5cbiAgICAvLyBFbnN1cmUgZW50cmllcyBpcyBhbHdheXMgYW4gYXJyYXlcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShmZWF0LmVudHJpZXMpXG4gICAgICA/IGZlYXQuZW50cmllc1xuICAgICAgOiBbZmVhdC5lbnRyaWVzXTtcblxuICAgIGZvciAoY29uc3QgZW50IG9mIGVudHJpZXMpIHtcbiAgICAgIC8vIDEpIFBsYWluLXRleHQgcGFyYWdyYXBoXG4gICAgICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgY29uc3QgdHh0ID0gZm9ybWF0RW50cnkoZW50KS50cmltKCk7XG4gICAgICAgICAgLy8gc2tpcCBhbnkgcHVyZS1icmFjZSBsaW5lc1xuICAgICAgICAgIGlmICh0eHQgPT09IFwie1wiIHx8IHR4dCA9PT0gXCJ9XCIpIGNvbnRpbnVlO1xuICAgICAgICAgIGxpbmVzLnB1c2godHh0KTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1R5cGVkRW50cnkoZW50KSAmJiBlbnQudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnQuaXRlbXMpKSB7XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGVudC5pdGVtcykge1xuICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSl9YCk7XG4gICAgfVxuICAgIGNvbnRpbnVlO1xuICB9XG4gICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgaW5zaWRlIHlvdXIgZm9yIChjb25zdCBlbnQgb2YgZW50cmllcykgbG9vcCBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIGlmIChpc1R5cGVkRW50cnkoZW50KSAmJiBlbnQudHlwZSA9PT0gXCJvcHRpb25zXCIpIHtcbiAgaWYgKGVudC5jb3VudCkge1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgbGluZXMucHVzaChgKipDaG9vc2UgJHtlbnQuY291bnR9IG9mIHRoZSBmb2xsb3dpbmcgb3B0aW9uczoqKmApO1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG4gIH1cblxuICBmb3IgKGNvbnN0IG9wdFJlZiBvZiBBcnJheS5pc0FycmF5KGVudC5lbnRyaWVzKSA/IGVudC5lbnRyaWVzIDogW2VudC5lbnRyaWVzXSkge1xuICAgIGlmIChvcHRSZWYudHlwZSA9PT0gXCJyZWZPcHRpb25hbGZlYXR1cmVcIikge1xuICAgICAgY29uc3QgW29wdE5hbWUsIG9wdFNyY10gPSBvcHRSZWYub3B0aW9uYWxmZWF0dXJlLnNwbGl0KFwifFwiKTtcbiAgICAgIGNvbnN0IGZlYXREZWYgPSBvcHRpb25hbEZlYXR1cmVzLmZpbmQoXG4gICAgICAgIGYgPT4gZi5uYW1lID09PSBvcHROYW1lICYmICghb3B0U3JjIHx8IGYuc291cmNlID09PSBvcHRTcmMpXG4gICAgICApO1xuXG4gICAgICBpZiAoZmVhdERlZikge1xuICAgICAgICAvLyBsb29wIHRocm91Z2ggZWFjaCBsaW5lIGluIHRoZSBmZWF0dXJlXHUyMDE5cyBlbnRyaWVzW11cbiAgICAgICAgZmVhdERlZi5lbnRyaWVzLmZvckVhY2goKHN1YkVudHJ5OiBhbnksIGlkeDogYW55KSA9PiB7XG4gICAgICAgICAgLy8gcmVuZGVyIHRleHRcbiAgICAgICAgICBjb25zdCB0ZXh0ID0gdHlwZW9mIHN1YkVudHJ5ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3Moc3ViRW50cnkpXG4gICAgICAgICAgICA6IGZvcm1hdEVudHJ5KHN1YkVudHJ5KTtcblxuICAgICAgICAgIGlmIChpZHggPT09IDApIHtcbiAgICAgICAgICAgIC8vIGZpcnN0IGxpbmU6IGJvbGRlZCBuYW1lICsgZGVzY3JpcHRpb25cbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gKioke2ZlYXREZWYubmFtZX06KiogJHt0ZXh0fWApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBzdWJzZXF1ZW50IGxpbmVzOiBuZXN0ZWQgYnVsbGV0XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAgIC0gJHt0ZXh0fWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7IC8vIGJsYW5rIGxpbmUgYWZ0ZXIgZWFjaCBmZWF0dXJlIGJsb2NrXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBmYWxsYmFjayBpZiBub3QgZm91bmRcbiAgICAgICAgbGluZXMucHVzaChgKioke29wdE5hbWV9OioqYCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vblx1MjAxMHJlZk9wdGlvbmFsZmVhdHVyZSBmYWxsYmFja1xuICAgICAgY29uc3QgdHh0ID0gZm9ybWF0RW50cnkob3B0UmVmKTtcbiAgICAgIGlmICh0eHQpIGxpbmVzLnB1c2goYC0gJHt0eHR9YCk7XG4gICAgfVxuICB9XG5cbiAgY29udGludWU7XG59XG5cblxuICAgICAgLy8gMykgU3RhbmRhbG9uZSByZWZPcHRpb25hbGZlYXR1cmVcbiAgICAgIGlmIChpc1R5cGVkRW50cnkoZW50KSAmJiBlbnQudHlwZSA9PT0gXCJyZWZPcHRpb25hbGZlYXR1cmVcIikge1xuICAgICAgICBjb25zdCBbbmFtZV0gPSBlbnQub3B0aW9uYWxmZWF0dXJlLnNwbGl0KFwifFwiKTtcbiAgICAgICAgbGluZXMucHVzaChgLSBbWyR7bmFtZX18JHtuYW1lfV1dYCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyA0KSBOZXN0ZWQgXHUyMDFDZW50cmllc1x1MjAxRCBibG9jayB3aXRoIGl0cyBvd24gaGVhZGluZ1xuICAgICAgaWYgKGlzVHlwZWRFbnRyeShlbnQpICYmIGVudC50eXBlID09PSBcImVudHJpZXNcIiAmJiBlbnQubmFtZSkge1xuICAgICAgICBsaW5lcy5wdXNoKGAjIyMjIyAke2VudC5uYW1lfWApO1xuICAgICAgICBjb25zdCBpbm5lciA9IEFycmF5LmlzQXJyYXkoZW50LmVudHJpZXMpID8gZW50LmVudHJpZXMgOiBbZW50LmVudHJpZXNdO1xuICAgICAgICBmb3IgKGNvbnN0IGUyIG9mIGlubmVyKSB7XG4gICAgICAgICAgbGluZXMucHVzaChmb3JtYXRFbnRyeShlMikpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyA1KSBGYWxsYmFjayBmb3IgYW55IG90aGVyIG9iamVjdCBzaGFwZVxuICAgICAgY29uc3QgZmFsbGJhY2sgPSBmb3JtYXRFbnRyeShlbnQpO1xuICAgICAgaWYgKGZhbGxiYWNrKSBsaW5lcy5wdXNoKGZhbGxiYWNrKTtcbiAgICB9XG5cbiAgICAvLyBCbGFuayBsaW5lIGFmdGVyIGVhY2ggZmVhdHVyZVxuICAgIGxpbmVzLnB1c2goYGApO1xuICB9IFxuXG4gIC8vIERpdmlkZXIgYmV0d2VlbiBsZXZlbHNcbiAgbGluZXMucHVzaChgLS0tYCk7XG59XG5cblxuXG4gIC8vIHN0aXRjaCwgcmVwbGFjZSB0YWdzLCByZXR1cm5cbiAgbGV0IGNvbnRlbnQgPSBgLS0tXFxuJHt5YW1sfVxcbi0tLVxcblxcbiR7bGluZXMuam9pbihcIlxcblwiKX1gO1xuICAvLyBjb21tZW50IHRoaXMgb3V0IHdoaWxlIGRlYnVnZ2luZzpcbiAgY29udGVudCA9IHJlcGxhY2U1ZVRhZ3MoY29udGVudCk7XG5cbiAgY29udGVudCA9IGNvbnRlbnRcbiAgLnJlcGxhY2UoL1xcbnszLH0vZywgJ1xcblxcbicpICAgLy8gbm8gbW9yZSB0aGFuIDIgbmV3bGluZXMgaW4gYSByb3dcbiAgLnJlcGxhY2UoL1xcbiArXFxuL2csICdcXG5cXG4nKTsgIC8vIHRyaW0gYmxhbmsgbGluZXMgd2l0aCB0cmFpbGluZyBzcGFjZXNcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IGBDbGFzc2VzLyR7Y2xhc3NOYW1lfS8ke2NsYXNzTmFtZX0ubWRgLFxuICAgICAgY29udGVudCxcbiAgICB9LFxuICAgIC4uLnN1YmNsYXNzRmlsZXMsXG4gIF07XG4gIFxufVxuIiwgIi8vNWUgMjAyNSBydWxlc1xuXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcblxuLyoqXG4gKiBQYXJzZSBhY3Rpb25zLmpzb24gaW50byBhIHNpbmdsZSBNYXJrZG93biBub3RlIHdpdGggIyMgaGVhZGVycyBmb3IgZWFjaCBhY3Rpb24sXG4gKiBoYW5kbGluZyBuZXN0ZWQgZW50cmllcywgaW5zZXRzLCBsaXN0cywgdGFibGVzLCBhbmQgYWRkaW5nIHNlcGFyYXRvcnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUFjdGlvbnNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShqc29uLmFjdGlvbikpIHJldHVybiBbXTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAvKiogUmVjdXJzaXZlbHkgZW1pdCBhbnkgYmxvY2s6IHRleHQsIGxpc3QsIHRhYmxlLCBlbnRyaWVzL2luc2V0LCBvciBmYWxsYmFjayAqL1xuICBmdW5jdGlvbiBlbWl0QmxvY2soYmxvY2s6IGFueSkge1xuICAgIGlmICghYmxvY2spIHJldHVybjtcblxuICAgIC8vIDEpIFBsYWluIHRleHQgcGFyYWdyYXBoc1xuICAgIGlmICh0eXBlb2YgYmxvY2sgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGZvciAoY29uc3QgcGFyYSBvZiBibG9jay5zcGxpdCgvXFxuezIsfS8pKSB7XG4gICAgICAgIGNvbnN0IHQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAyKSBCdWxsZXQgbGlzdFxuICAgIGlmIChibG9jay50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGJsb2NrLml0ZW1zKSkge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGJsb2NrLml0ZW1zKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgICAgfVxuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAzKSBUYWJsZVxuICAgIGlmIChibG9jay50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShibG9jay5yb3dzKSkge1xuICAgICAgY29uc3QgaGVhZGVycyA9IGJsb2NrLmNvbExhYmVscyB8fCBbXTtcbiAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIi0tLVwiKS5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICBmb3IgKGNvbnN0IHJvdyBvZiBibG9jay5yb3dzKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgfVxuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyA0KSBOZXN0ZWQgZW50cmllcy9pbnNldFxuICAgIGlmICgoYmxvY2sudHlwZSA9PT0gXCJlbnRyaWVzXCIgfHwgYmxvY2sudHlwZSA9PT0gXCJpbnNldFwiKSAmJiBBcnJheS5pc0FycmF5KGJsb2NrLmVudHJpZXMpKSB7XG4gICAgICBpZiAoYmxvY2submFtZSkge1xuICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIGxpbmVzLnBvcCgpO1xuICAgICAgICBsaW5lcy5wdXNoKGAjIyMgJHtibG9jay5uYW1lfWApO1xuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBibG9jay5lbnRyaWVzKSB7XG4gICAgICAgIGVtaXRCbG9jayhjaGlsZCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gNSkgRmFsbGJhY2sgZm9yIGFueSBvdGhlciBvYmplY3Qgb3IgYXJyYXlcbiAgICBjb25zdCB0eHQgPSBBcnJheS5pc0FycmF5KGJsb2NrKVxuICAgICAgPyBibG9jay5qb2luKFwiIFwiKVxuICAgICAgOiB0eXBlb2YgYmxvY2sgPT09IFwib2JqZWN0XCJcbiAgICAgID8gSlNPTi5zdHJpbmdpZnkoYmxvY2spXG4gICAgICA6IFN0cmluZyhibG9jayk7XG4gICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgIGxpbmVzLnB1c2goXCJcIik7XG4gIH1cblxuICAvLyBMb29wIHRocm91Z2ggZWFjaCBhY3Rpb25cbiAgZm9yIChjb25zdCBhY3Rpb24gb2YganNvbi5hY3Rpb24pIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke2FjdGlvbi5uYW1lfWApO1xuICAgIGZvciAoY29uc3QgZW50cnkgb2YgQXJyYXkuaXNBcnJheShhY3Rpb24uZW50cmllcykgPyBhY3Rpb24uZW50cmllcyA6IFthY3Rpb24uZW50cmllc10pIHtcbiAgICAgIGVtaXRCbG9jayhlbnRyeSk7XG4gICAgfVxuXG4gICAgLy8gXHUyMDFDU2VlIEFsc29cdTIwMUQgc2VjdGlvblxuICAgIGlmIChBcnJheS5pc0FycmF5KGFjdGlvbi5zZWVBbHNvQWN0aW9uKSkge1xuICAgICAgbGluZXMucHVzaChcIioqU2VlIEFsc286KipcIik7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgZm9yIChjb25zdCByZWYgb2YgYWN0aW9uLnNlZUFsc29BY3Rpb24pIHtcbiAgICAgICAgY29uc3QgW25hbWVdID0gU3RyaW5nKHJlZikuc3BsaXQoXCJ8XCIpO1xuICAgICAgICBsaW5lcy5wdXNoKGAtIFtbJHtuYW1lfV1dYCk7XG4gICAgICB9XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFNlcGFyYXRvclxuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cblxuICAvLyBSZW1vdmUgYW55IGRvdWJsZS1ibGFuayBsaW5lc1xuICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgIHJldHVybiBhY2MuY29uY2F0KGN1cnIpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvQWN0aW9ucy5tZFwiLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSxcbiAgXTtcbn1cblxuLyoqXG4gKiBQYXJzZSBjb21iaW5lZCBjb25kaXRpb25zZGlzZWFzZXMuanNvbiBpbnRvIHR3byBNYXJrZG93biBub3RlczogQ29uZGl0aW9ucy5tZCBhbmQgRGlzZWFzZXMubWRcbiAqIGFkZGluZyBzZXBhcmF0b3JzIGJldHdlZW4gZW50cmllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBvdXRwdXRzOiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuXG4gIGNvbnN0IHByb2Nlc3NJdGVtcyA9IChpdGVtczogYW55W10sIG91dFBhdGg6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAvLyBUb3BcdTIwMTBsZXZlbCBoZWFkZXIgZm9yIGVhY2ggY29uZGl0aW9uL2Rpc2Vhc2VcbiAgICAgIGxpbmVzLnB1c2goYCMjICR7aXRlbS5uYW1lfWApO1xuXG4gICAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShpdGVtLmVudHJpZXMpID8gaXRlbS5lbnRyaWVzIDogW2l0ZW0uZW50cmllc107XG4gICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgICAgaWYgKCFlbnRyeSkgY29udGludWU7XG5cbiAgICAgICAgLy8gMSkgUGxhaW4gdGV4dCBwYXJhZ3JhcGhzXG4gICAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgZW50cnkuc3BsaXQoL1xcbnsyLH0vKSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gMikgQnVsbGV0IGxpc3RzXG4gICAgICAgIGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCB0eHQgb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKHR4dCl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gMykgVGFibGVzXG4gICAgICAgIGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgICAgICAgY29uc3QgaGVhZGVycyA9IGVudHJ5LmNvbExhYmVscyB8fCBbXTtcbiAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiLS0tXCIpLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiBlbnRyeS5yb3dzKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyA0KSBOZXN0ZWQgXCJlbnRyaWVzXCIgYmxvY2tzXG4gICAgICAgIGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwiZW50cmllc1wiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICAvLyBJZiB0aGlzIGJsb2NrIGhhcyBpdHMgb3duIG5hbWUsIGVtaXQgaXRcbiAgICAgICAgICBpZiAoZW50cnkubmFtZSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChgIyMjICR7ZW50cnkubmFtZX1gKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGVudHJ5LmVudHJpZXMpIHtcbiAgICAgICAgICAgICAgLy8gTmFtZWQgc3ViXHUyMDEwYmxvY2sgKGUuZy4gXCJDYW4ndCBTZWVcIilcbiAgICAgICAgICAgICAgaWYgKHN1Yi50eXBlID09PSBcImVudHJpZXNcIiAmJiBzdWIubmFtZSAmJiBBcnJheS5pc0FycmF5KHN1Yi5lbnRyaWVzKSkge1xuICAgICAgICAgICAgICAgIGlmIChsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSA9PT0gXCJcIikgbGluZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChgIyMjIyAke3N1Yi5uYW1lfWApO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdHh0RW50cnkgb2Ygc3ViLmVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSB0eXBlb2YgdHh0RW50cnkgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXBsYWNlNWVUYWdzKHR4dEVudHJ5KVxuICAgICAgICAgICAgICAgICAgICA6IHJlcGxhY2U1ZVRhZ3MoU3RyaW5nKHR4dEVudHJ5KSk7XG4gICAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKHRleHQpO1xuICAgICAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy8gUGxhaW5cdTIwMTB0ZXh0IHN1Ylx1MjAxMGVudHJ5XG4gICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3Moc3ViKSk7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBVbm5hbWVkIHdyYXBwZXI6IGp1c3QgZmxhdHRlbiBpdHMgY2hpbGRyZW5cbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGVudHJ5LmVudHJpZXMpIHtcbiAgICAgICAgICAgICAgaWYgKHN1Yi50eXBlID09PSBcImVudHJpZXNcIiAmJiBzdWIubmFtZSAmJiBBcnJheS5pc0FycmF5KHN1Yi5lbnRyaWVzKSkge1xuICAgICAgICAgICAgICAgIGlmIChsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSA9PT0gXCJcIikgbGluZXMucG9wKCk7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChgIyMjICR7c3ViLm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0eHRFbnRyeSBvZiBzdWIuZW50cmllcykge1xuICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IHR5cGVvZiB0eHRFbnRyeSA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3ModHh0RW50cnkpXG4gICAgICAgICAgICAgICAgICAgIDogcmVwbGFjZTVlVGFncyhTdHJpbmcodHh0RW50cnkpKTtcbiAgICAgICAgICAgICAgICAgIGxpbmVzLnB1c2godGV4dCk7XG4gICAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc3ViID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHN1YikpO1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gNSkgQW55dGhpbmcgZWxzZSAoZmFsbGJhY2spXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpXG4gICAgICAgICAgICA/IGVudHJ5LmpvaW4oXCIgXCIpXG4gICAgICAgICAgICA6IHR5cGVvZiBlbnRyeSA9PT0gXCJvYmplY3RcIlxuICAgICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGVudHJ5KVxuICAgICAgICAgICAgICA6IFN0cmluZyhlbnRyeSk7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU2VwYXJhdG9yIGJldHdlZW4gZW50cmllc1xuICAgICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgICB9XG5cbiAgICAvLyBDbGVhbiB1cCBhbnkgZG91YmxlXHUyMDEwYmxhbmsgbGluZXNcbiAgICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgICB9LCBbXSk7XG5cbiAgICBvdXRwdXRzLnB1c2goe1xuICAgICAgcGF0aDogb3V0UGF0aCxcbiAgICAgIGNvbnRlbnQ6IGNsZWFuZWQuam9pbihcIlxcblwiKS50cmltKCkgKyBcIlxcblwiLFxuICAgIH0pO1xuICB9O1xuXG4gIHByb2Nlc3NJdGVtcyhqc29uLmNvbmRpdGlvbiB8fCBbXSwgICBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvQ29uZGl0aW9ucy5tZFwiKTtcbiAgcHJvY2Vzc0l0ZW1zKGpzb24uZGlzZWFzZSAgIHx8IFtdLCAgIFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9EaXNlYXNlcy5tZFwiKTtcbiAgcmV0dXJuIG91dHB1dHM7XG59XG5cbi8qKlxuICogUGFyc2Ugc2Vuc2VzLmpzb24gaW50byBhIHNpbmdsZSBNYXJrZG93biBub3RlIHdpdGggIyMgaGVhZGVycyBmb3IgZWFjaCBzZW5zZSxcbiAqIGhhbmRsaW5nIGxpc3RzLCB0YWJsZXMsIG5lc3RlZCBlbnRyaWVzL2luc2V0cywgYW5kIHNlcGFyYXRvcnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNlbnNlc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3QgaXRlbXMgPSBBcnJheS5pc0FycmF5KGpzb24uc2Vuc2UpXG4gICAgPyBqc29uLnNlbnNlXG4gICAgOiBBcnJheS5pc0FycmF5KGpzb24uc2Vuc2VzKVxuICAgID8ganNvbi5zZW5zZXNcbiAgICA6IFtdO1xuICBpZiAoIWl0ZW1zLmxlbmd0aCkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGZ1bmN0aW9uIGVtaXRCbG9jayhibG9jazogYW55KSB7XG4gICAgaWYgKCFibG9jaykgcmV0dXJuO1xuXG4gICAgLy8gMSkgUGxhaW5cdTIwMTB0ZXh0IHBhcmFncmFwaChzKVxuICAgIGlmICh0eXBlb2YgYmxvY2sgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGZvciAoY29uc3QgcGFyYSBvZiBibG9jay5zcGxpdCgvXFxuezIsfS8pKSB7XG4gICAgICAgIGNvbnN0IHQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAyKSBCdWxsZXQgbGlzdCAoaGFuZGxlcyBib3RoIHN0cmluZyBpdGVtcyBhbmQgb2JqZWN0IGl0ZW1zKVxuICAgIGlmIChibG9jay50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGJsb2NrLml0ZW1zKSkge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGJsb2NrLml0ZW1zKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIC8vIG9iamVjdCBpdGVtcyB3aXRoIG5hbWUrZW50cmllc1xuICAgICAgICAgIGlmIChpdGVtLm5hbWUgJiYgQXJyYXkuaXNBcnJheShpdGVtLmVudHJpZXMpKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICoqJHtpdGVtLm5hbWV9KipgKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50IG9mIGl0ZW0uZW50cmllcykge1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKGAgIC0gJHtyZXBsYWNlNWVUYWdzKGVudCl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBmYWxsYmFjazogc3RyaW5naWZ5XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhKU09OLnN0cmluZ2lmeShpdGVtKSl9YCk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDMpIFRhYmxlXG4gICAgaWYgKGJsb2NrLnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGJsb2NrLnJvd3MpKSB7XG4gICAgICBjb25zdCBoZWFkZXJzID0gYmxvY2suY29sTGFiZWxzIHx8IFtdO1xuICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiLS0tXCIpLmpvaW4oXCIgfCBcIil9IHxgKTtcbiAgICAgIGZvciAoY29uc3Qgcm93IG9mIGJsb2NrLnJvd3MpIHtcbiAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICB9XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDQpIE5lc3RlZCBlbnRyaWVzIC8gaW5zZXRzXG4gICAgaWYgKChibG9jay50eXBlID09PSBcImVudHJpZXNcIiB8fCBibG9jay50eXBlID09PSBcImluc2V0XCIpICYmIEFycmF5LmlzQXJyYXkoYmxvY2suZW50cmllcykpIHtcbiAgICAgIC8vIG5hbWVkIGJsb2NrIFx1MjE5MiBcIiMjIyBOYW1lXCJcbiAgICAgIGlmIChibG9jay5uYW1lKSB7XG4gICAgICAgIGlmIChsaW5lc1tsaW5lcy5sZW5ndGggLSAxXSA9PT0gXCJcIikgbGluZXMucG9wKCk7XG4gICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2Jsb2NrLm5hbWV9YCk7XG4gICAgICB9XG4gICAgICAvLyByZWN1cnNlIGludG8gY2hpbGRyZW5cbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgYmxvY2suZW50cmllcykge1xuICAgICAgICBlbWl0QmxvY2soY2hpbGQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIDUpIEZhbGxiYWNrIGZvciBhcnJheXMgb3Igb3RoZXIgb2JqZWN0c1xuICAgIGNvbnN0IHR4dCA9XG4gICAgICBBcnJheS5pc0FycmF5KGJsb2NrKVxuICAgICAgICA/IGJsb2NrLmpvaW4oXCIgXCIpXG4gICAgICAgIDogdHlwZW9mIGJsb2NrID09PSBcIm9iamVjdFwiXG4gICAgICAgID8gSlNPTi5zdHJpbmdpZnkoYmxvY2spXG4gICAgICAgIDogU3RyaW5nKGJsb2NrKTtcbiAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgbGluZXMucHVzaChcIlwiKTtcbiAgfVxuXG4gIC8vIEJ1aWxkIG91dCBlYWNoIHNlbnNlXG4gIGZvciAoY29uc3Qgc2Vuc2Ugb2YgaXRlbXMpIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke3NlbnNlLm5hbWV9YCk7XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBBcnJheS5pc0FycmF5KHNlbnNlLmVudHJpZXMpID8gc2Vuc2UuZW50cmllcyA6IFtzZW5zZS5lbnRyaWVzXSkge1xuICAgICAgZW1pdEJsb2NrKGVudHJ5KTtcbiAgICB9XG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgfVxuXG4gIC8vIFJlbW92ZSBhbnkgZG91YmxlXHUyMDEwYmxhbmsgbGluZXNcbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL1NlbnNlcy5tZFwiLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSxcbiAgXTtcbn1cblxuLyoqXG4gKiBQYXJzZSBza2lsbHMuanNvbiBpbnRvIGEgc2luZ2xlIE1hcmtkb3duIG5vdGUgd2l0aCAjIyBoZWFkZXJzIGZvciBlYWNoIHNraWxsLFxuICogcHJlcGVuZGluZyBhbiBhYmlsaXR5IGxpbmUsIGhhbmRsaW5nIHBhcmFncmFwaHMsIGFuZCBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTa2lsbHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShqc29uLnNraWxsKVxuICAgID8ganNvbi5za2lsbFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLnNraWxscylcbiAgICA/IGpzb24uc2tpbGxzXG4gICAgOiBbXTtcbiAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCBza2lsbCBvZiBpdGVtcykge1xuICAgIGxpbmVzLnB1c2goYCMjICR7c2tpbGwubmFtZX1gKTtcbiAgICBpZiAoc2tpbGwuYWJpbGl0eSkge1xuICAgICAgbGluZXMucHVzaChgKkFiaWxpdHk6ICR7c2tpbGwuYWJpbGl0eX0qYCk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShza2lsbC5lbnRyaWVzKSA/IHNraWxsLmVudHJpZXMgOiBbc2tpbGwuZW50cmllc107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgcGFyYXMgPSBlbnRyeS5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdHh0ID0gQXJyYXkuaXNBcnJheShlbnRyeSkgPyBlbnRyeS5qb2luKFwiIFwiKSA6IFN0cmluZyhlbnRyeSk7XG4gICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU2VwYXJhdG9yIGJldHdlZW4gc2tpbGxzXG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgfVxuICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgIHJldHVybiBhY2MuY29uY2F0KGN1cnIpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvU2tpbGxzLm1kXCIsXG4gICAgICBjb250ZW50OiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9LFxuICBdO1xufVxuIiwgImltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEZFQVRTX01FVEFfREVGUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjtcblxuLyoqXG4gKiBQYXJzZSBmZWF0cy5qc29uIGludG8gb25lIE1hcmtkb3duIGZpbGUgcGVyIGZlYXQgdW5kZXIgUGxheWVyIEJ1aWxkL0ZlYXRzLFxuICogaW5jbHVkaW5nIGZyb250bWF0dGVyLCBjbGVhbmVkIHByZXJlcXVpc2l0ZXMsIGFuZCBmb3JtYXR0ZWQgZW50cmllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRmVhdHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGZlYXRzOiBhbnlbXSA9IEFycmF5LmlzQXJyYXkoanNvbi5mZWF0KVxuICAgID8ganNvbi5mZWF0XG4gICAgOiBBcnJheS5pc0FycmF5KGpzb24uZmVhdHMpXG4gICAgPyBqc29uLmZlYXRzXG4gICAgOiBbXTtcblxuICByZXR1cm4gZmVhdHMubWFwKChmZWF0OiBhbnkpID0+IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICBjb25zdCBmbSA9IGJ1aWxkRk0oeyAuLi5mZWF0LCBfZWRpdGlvbklkOiBlZGl0aW9uSWQgfSwgRkVBVFNfTUVUQV9ERUZTKTtcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICAgIGxpbmVzLnB1c2goc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0sIEZFQVRTX01FVEFfREVGUykpO1xuICAgIGxpbmVzLnB1c2goXCItLS1cIiwgXCJcIik7XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgVGl0bGUgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgbGluZXMucHVzaChgIyAke2ZlYXQubmFtZX1gLCBcIlwiKTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBQcmVyZXF1aXNpdGVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGNvbnN0IHByZXJlcXM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmVhdC5wcmVyZXF1aXNpdGUpKSB7XG4gICAgICBmZWF0LnByZXJlcXVpc2l0ZS5mb3JFYWNoKChwcjogYW55KSA9PiB7XG4gICAgICAgIGlmIChwci5sZXZlbCkgcHJlcmVxcy5wdXNoKGBMZXZlbCAke3ByLmxldmVsfWApO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwci5mZWF0KSkge1xuICAgICAgICAgIHByLmZlYXQuZm9yRWFjaCgoZjogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gZi5zcGxpdChcInxcIilbMF0ucmVwbGFjZSgvXFxiXFx3L2csIGMgPT4gYy50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBbWyR7bmFtZX1dXWApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGZlYXQuc3BlbGxjYXN0aW5nUHJlcGFyZWQpIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBTcGVsbGNhc3RlcmApO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQudG9vbFByb2ZpY2llbmNpZXMpKSB7XG4gICAgICBmZWF0LnRvb2xQcm9maWNpZW5jaWVzLmZvckVhY2goKHRwOiBhbnkpID0+IHtcbiAgICAgICAgT2JqZWN0LmVudHJpZXModHApLmZvckVhY2goKFtrZXldKSA9PiB7XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ2FueUFydGlzYW5zVG9vbCcpIHtcbiAgICAgICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBQcm9maWNpZW50IHdpdGggYW4gYXJ0aXNhbidzIHRvb2xgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJlcmVxcy5wdXNoKGBQcmVyZXF1aXNpdGU6IFByb2ZpY2llbnQgd2l0aCAke2tleS5yZXBsYWNlKC8oW0EtWl0pL2csJyAkMScpLnRyaW0oKX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQuYXJtb3JQcm9maWNpZW5jaWVzKSkge1xuICAgICAgZmVhdC5hcm1vclByb2ZpY2llbmNpZXMuZm9yRWFjaCgoYXJtOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgYXJtU3RyID0gdHlwZW9mIGFybSA9PT0gJ3N0cmluZycgPyBhcm0gOiBKU09OLnN0cmluZ2lmeShhcm0pO1xuICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogUHJvZmljaWVudCB3aXRoICR7YXJtU3RyLnJlcGxhY2UoLyhbQS1aXSkvZywnICQxJykudHJpbSgpfWApO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChmZWF0LnJhY2UpIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiAke2ZlYXQucmFjZX1gKTtcblxuICAgIGlmIChwcmVyZXFzLmxlbmd0aCkge1xuICAgICAgbGluZXMucHVzaChcIioqUHJlcmVxdWlzaXRlcyoqXCIpO1xuICAgICAgcHJlcmVxcy5mb3JFYWNoKHAgPT4gbGluZXMucHVzaChgLSAke3B9YCkpO1xuICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG5cbiAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRW50cmllcyByZW5kZXJpbmcgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoZmVhdC5lbnRyaWVzKSA/IGZlYXQuZW50cmllcyA6IFtmZWF0LmVudHJpZXNdO1xuICAgIGVudHJpZXMuZm9yRWFjaCgoZW50cnk6IGFueSkgPT4ge1xuICAgICAgaWYgKCFlbnRyeSkgcmV0dXJuO1xuXG4gICAgICAvLyBQbGFpbiB0ZXh0XG4gICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICBlbnRyeS5zcGxpdCgvXFxuezIsfS8pLmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgY29uc3QgdCA9IHAudHJpbSgpO1xuICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAvLyBMaXN0XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09ICdsaXN0JyAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICBlbnRyeS5pdGVtcy5mb3JFYWNoKChpdDogYW55KSA9PiB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBpdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0KX1gKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGl0LnR5cGUgPT09ICdpdGVtJyAmJiBpdC5uYW1lKSB7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKGAtICoqJHtpdC5uYW1lfSoqYCk7XG4gICAgICAgICAgICBjb25zdCBzdWJzID0gQXJyYXkuaXNBcnJheShpdC5lbnRyaWVzKSA/IGl0LmVudHJpZXMgOiBbaXQuZW50cmllc107XG4gICAgICAgICAgICBzdWJzLmZvckVhY2goKHM6IGFueSkgPT5cbiAgICAgICAgICAgICAgbGluZXMucHVzaChgICAtICR7cmVwbGFjZTVlVGFncyh0eXBlb2YgcyA9PT0gJ3N0cmluZycgPyBzIDogSlNPTi5zdHJpbmdpZnkocykpfWApXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG5cbiAgICAgIC8vIEluc2V0IGFzIGluZGVudGVkIGJ1bGxldFxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSAnaW5zZXQnKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYC0gKiR7ZW50cnkubmFtZX0qYCk7XG4gICAgICAgIGNvbnN0IHN1YnMgPSBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpID8gZW50cnkuZW50cmllcyA6IFtlbnRyeS5lbnRyaWVzXTtcbiAgICAgICAgc3Vicy5mb3JFYWNoKChzOiBhbnkpID0+IGxpbmVzLnB1c2goYCAgLSAke3JlcGxhY2U1ZVRhZ3Mocyl9YCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gICAgICAvLyBTZWN0aW9uIG9yIGVudHJpZXNcbiAgICAgIH0gZWxzZSBpZiAoKGVudHJ5LnR5cGUgPT09ICdzZWN0aW9uJyB8fCBlbnRyeS50eXBlID09PSAnZW50cmllcycpICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgaWYgKGVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbnRyeS5lbnRyaWVzLmZvckVhY2goKHM6IGFueSkgPT4ge1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eXBlb2YgcyA9PT0gJ3N0cmluZycgPyBzIDogSlNPTi5zdHJpbmdpZnkocykpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgLy8gVGFibGVcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ3RhYmxlJyAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgICAgIGNvbnN0IGhkciA9IGVudHJ5LmNvbExhYmVscyB8fCBbXTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hkci5qb2luKCcgfCAnKX0gfGApO1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGRyLm1hcCgoKSA9PiAnLS0tJykuam9pbignIHwgJyl9IHxgKTtcbiAgICAgICAgZW50cnkucm93cy5mb3JFYWNoKChyb3c6IGFueVtdKSA9PlxuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtyb3cuam9pbignIHwgJyl9IHxgKVxuICAgICAgICApO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhdGg6IGBQbGF5ZXIgQnVpbGQvRmVhdHMvJHtmZWF0Lm5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IGxpbmVzLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9O1xuICB9KTtcbn1cbiIsICIvLyBzcmMvcGFyc2Vycy9iYWNrZ3JvdW5kcy50c1xuaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgRk1fRklFTERTLCBmaWx0ZXJWYWxpZFNraWxscywgQkFDS0dST1VORF9NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cbi8qKlxuICogUGFyc2UgYmFja2dyb3VuZHMuanNvbiBpbnRvIG9uZSBNYXJrZG93biBmaWxlIHBlciBiYWNrZ3JvdW5kIHVuZGVyIFBsYXllciBCdWlsZC9CYWNrZ3JvdW5kcyxcbiAqIGV4Y2x1ZGluZyBhbnkgXHUyMDFDVmFyaWFudFx1MjAyNlx1MjAxRCBvciBcdTIwMUNCYWxkdXJcdTIwMTlzIEdhdGVcdTIwMjZcdTIwMUQgZW50cmllcy5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VCYWNrZ3JvdW5kc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgLy8gcHVsbCBpbiB0aGUgYXJyYXlcbiAgY29uc3QgcmF3OiBhbnlbXSA9IEFycmF5LmlzQXJyYXkoanNvbi5iYWNrZ3JvdW5kKVxuICAgID8ganNvbi5iYWNrZ3JvdW5kXG4gICAgOiBBcnJheS5pc0FycmF5KGpzb24uYmFja2dyb3VuZHMpXG4gICAgPyBqc29uLmJhY2tncm91bmRzXG4gICAgOiBbXTtcblxuICAvLyBmaWx0ZXIgb3V0IHVud2FudGVkIGVudHJpZXNcbiAgY29uc3QgYmFja2dyb3VuZHMgPSByYXcuZmlsdGVyKGJnID0+IHtcbiAgICBjb25zdCBubTogc3RyaW5nID0gYmcubmFtZSB8fCBcIlwiO1xuICAgIHJldHVybiAhbm0uc3RhcnRzV2l0aChcIlZhcmlhbnRcIikgJiYgIW5tLmluY2x1ZGVzKFwiQmFsZHVyJ3MgR2F0ZVwiKTtcbiAgfSk7XG5cbiAgY29uc3Qgb3V0cHV0czogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBiYWNrZ3JvdW5kcy5mb3JFYWNoKGJnID0+IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGJ1aWxkIGZyb250bWF0dGVyIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgZm0gPSBidWlsZEZNKGJnLCBCQUNLR1JPVU5EX01FVEFfREVGUyk7XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBjb2xsZWN0IG9ubHkgdGhlIGVudHJpZXMgZmxhZ2dlZCBpc0ZlYXR1cmUgXHUyNTAwXHUyNTAwXHUyNTAwXG5jb25zdCBleHRyYVRyYWl0czogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KGJnLmVudHJpZXMpXG4gID8gKGJnLmVudHJpZXMgYXMgYW55W10pXG4gICAgICAuZmlsdGVyKChlOiBhbnkpID0+IGUuZGF0YT8uaXNGZWF0dXJlICYmIHR5cGVvZiBlLm5hbWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAubWFwKChlOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGUubmFtZS5yZXBsYWNlKC9eRmVhdHVyZTpcXHMqLywgXCJcIik7XG4gICAgICAgIHJldHVybiBgW1ske2JnLm5hbWV9IyR7bmFtZX1dXWA7XG4gICAgICB9KVxuICA6IFtdO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgc2VyaWFsaXplIGZyb250bWF0dGVyIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtLCBCQUNLR1JPVU5EX01FVEFfREVGUyk7XG5saW5lcy5wdXNoKFwiLS0tXCIsIHlhbWwsIFwiLS0tXCIsIFwiXCIpO1xuXG4gXG4gICAgLy8gdGl0bGVcbiAgICBsaW5lcy5wdXNoKGAjICR7YmcubmFtZX1gLCBcIlwiKTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBza2lsbCBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnNraWxsUHJvZmljaWVuY2llcykgJiYgYmcuc2tpbGxQcm9maWNpZW5jaWVzLmxlbmd0aCkge1xuICAgICAgY29uc3Qgc2tpbGxzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgYmcuc2tpbGxQcm9maWNpZW5jaWVzLmZvckVhY2goKGVudDogYW55KSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgc2tpbGxzLnB1c2goY2FwKGVudCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGVudC5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShlbnQuY2hvb3NlLmZyb20pKSB7XG4gICAgICAgICAgc2tpbGxzLnB1c2goYENob29zZSAke2VudC5jaG9vc2UuYW1vdW50fSBmcm9tICR7ZW50LmNob29zZS5mcm9tLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhlbnQpXG4gICAgICAgICAgICAuZmlsdGVyKChbLCB2XSkgPT4gdiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChba10pID0+IHNraWxscy5wdXNoKGNhcChrKSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGxpbmVzLnB1c2goYCoqU2tpbGwgUHJvZmljaWVuY2llczoqKiAke3NraWxscy5qb2luKFwiLCBcIil9YCwgXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGxhbmd1YWdlIHByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYmcubGFuZ3VhZ2VQcm9maWNpZW5jaWVzKSAmJiBiZy5sYW5ndWFnZVByb2ZpY2llbmNpZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBsYW5nczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGJnLmxhbmd1YWdlUHJvZmljaWVuY2llcy5mb3JFYWNoKChlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZW50LmFueVN0YW5kYXJkKSB7XG4gICAgICAgICAgbGFuZ3MucHVzaChgJHtlbnQuYW55U3RhbmRhcmR9IG9mIHlvdXIgY2hvaWNlYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoWywgdl0pID0+IHYgPT09IHRydWUpXG4gICAgICAgICAgICAuZm9yRWFjaCgoW2tdKSA9PiBsYW5ncy5wdXNoKGNhcChrKSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGxpbmVzLnB1c2goYCoqTGFuZ3VhZ2VzOioqICR7bGFuZ3Muam9pbihcIiwgXCIpfWAsIFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCB0b29sIHByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnRvb2xQcm9maWNpZW5jaWVzKSAmJiBiZy50b29sUHJvZmljaWVuY2llcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgdG9vbHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgYmcudG9vbFByb2ZpY2llbmNpZXMuZm9yRWFjaCgoZW50OiBhbnkpID0+IHtcbiAgICAgICAgICAgIC8vIFx1MjAxQ0Nob29zZSBYIGZyb20gXHUyMDI2XHUyMDFEXG4gICAgICAgICAgICBpZiAoZW50LmNob29zZSAmJiBBcnJheS5pc0FycmF5KGVudC5jaG9vc2UuZnJvbSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBlbnQuY2hvb3NlLmZyb20ubWFwKGh1bWFuaXplKS5qb2luKFwiLCBcIik7XG4gICAgICAgICAgICB0b29scy5wdXNoKGBDaG9vc2UgJHtlbnQuY2hvb3NlLmNvdW50fSBmcm9tICR7bGlzdH1gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcGxhaW4gc3RyaW5nIChyYXJlIGhlcmUsIGJ1dCBqdXN0IGluIGNhc2UpXG4gICAgICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdG9vbHMucHVzaChodW1hbml6ZShlbnQpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gb2JqZWN0IHdpdGggYm9vbGVhbiBmbGFnczogZ2F0aGVyICphbGwqIHRydWUga2V5c1xuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoW18sIHZdKSA9PiB2ID09PSB0cnVlKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrXSkgPT4gdG9vbHMucHVzaChodW1hbml6ZShrKSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsaW5lcy5wdXNoKGAqKlRvb2wgUHJvZmljaWVuY2llczoqKiAke3Rvb2xzLmpvaW4oXCIsIFwiKX1gLCBcIlwiKTtcbiAgICAgICAgfVxuXG5cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBzdGFydGluZyBlcXVpcG1lbnQgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYmcuc3RhcnRpbmdFcXVpcG1lbnQpICYmIGJnLnN0YXJ0aW5nRXF1aXBtZW50Lmxlbmd0aCkge1xuICAgICAgbGluZXMucHVzaChgKipFcXVpcG1lbnQ6KipgKTtcbiAgICAgIGJnLnN0YXJ0aW5nRXF1aXBtZW50LmZvckVhY2goKGdycDogYW55KSA9PiB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGdycC5fKSkge1xuICAgICAgICAgIGdycC5fLmZvckVhY2goKGl0OiBhbnkpID0+IGxpbmVzLnB1c2goYC0gJHtmbXRJdGVtKGl0KX1gKSk7XG4gICAgICAgIH1cbiAgICAgICAgW1wiYVwiLCBcImJcIl0uZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGdycFtrZXldKSkge1xuICAgICAgICAgICAgZ3JwW2tleV0uZm9yRWFjaChpdCA9PiBsaW5lcy5wdXNoKGAtICR7Zm10SXRlbShpdCl9YCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGFsbCBmZWF0dXJlICYgZW50cmllcyBibG9ja3MgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYmcuZW50cmllcykpIHtcbiAgICAgIGJnLmVudHJpZXMuZm9yRWFjaCgoZW50cnk6IGFueSkgPT4ge1xuICAgICAgICAvLyBza2lwIHRoZSBzdW1tYXJ5IGxpc3QgYmxvY2tcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIGVudHJ5LnN0eWxlID09PSBcImxpc3QtaGFuZy1ub3RpdGxlXCIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2VjdGlvbiBoZWFkZXJcbiAgICAgICAgaWYgKGVudHJ5Lm5hbWUpIHtcbmNvbnN0IGhlYWRlciA9IGVudHJ5LmRhdGE/LmlzRmVhdHVyZVxuICA/IGVudHJ5Lm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpXG4gIDogZW50cnkubmFtZTtcbmxpbmVzLnB1c2goYCMjICR7aGVhZGVyfWAsIFwiXCIpOyAgICAgICAgfVxuICAgICAgICAvLyBlbnRyeSBjb250ZW50XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgICAgZW50cnkuZW50cmllcy5mb3JFYWNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3MoZSksIFwiXCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZS5pdGVtcykpIHtcbiAgICAgICAgICAgICAgZS5pdGVtcy5mb3JFYWNoKChpdDogYW55KSA9PlxuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0LmVudHJ5ID8/IGl0KX1gKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnR5cGUgPT09IFwidGFibGVcIikge1xuICAgICAgICAgICAgICBjb25zdCB0YmwgPSByZW5kZXJNYXJrZG93blRhYmxlKGUpO1xuICAgICAgICAgICAgICBpZiAodGJsKSBsaW5lcy5wdXNoKHRibCwgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgICBlbnRyeS5pdGVtcy5mb3JFYWNoKChpdDogYW55KSA9PlxuICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXQuZW50cnkgPz8gaXQpfWApXG4gICAgICAgICAgKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBvdXRwdXRzLnB1c2goe1xuICAgICAgcGF0aDogYFBsYXllciBCdWlsZC9CYWNrZ3JvdW5kcy8ke2JnLm5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IGxpbmVzLmpvaW4oXCJcXG5cIikudHJpbUVuZCgpICsgXCJcXG5cIixcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIG91dHB1dHM7XG59XG5cbi8vIFx1MjAxNFx1MjAxNFx1MjAxNCBoZWxwZXJzIFx1MjAxNFx1MjAxNFx1MjAxNFxuZnVuY3Rpb24gY2FwKHN0cjogc3RyaW5nKSB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59XG5cblxuZnVuY3Rpb24gZm10SXRlbShpdGVtOiBhbnkpOiBzdHJpbmcge1xuICAvLyAxKSByYXcgc3RyaW5nIG9yIHRhZ2dlZCBpdGVtXG4gIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGlmIChpdGVtLmluY2x1ZGVzKFwifFwiKSkge1xuICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoYHtAaXRlbSAke2l0ZW19fWApO1xuICAgIH1cbiAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhpdGVtKTtcbiAgfVxuXG4gIC8vIDIpIHB1cmUgZ29sZC1waWVjZSBlbnRyeTogeyB2YWx1ZTogMTAgfSBvciB7IGNvbnRhaW5zVmFsdWU6IDE1MDAgfVxuICBjb25zdCBwcmljZVJhdyA9IChpdGVtLmNvbnRhaW5zVmFsdWUgPz8gaXRlbS52YWx1ZSkgYXMgbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBpZiAoXG4gICAgdHlwZW9mIHByaWNlUmF3ID09PSBcIm51bWJlclwiICYmXG4gICAgLy8gbWFrZSBzdXJlIGl0XHUyMDE5cyBub3QgYWxzbyBhbiBcdTIwMUNpdGVtXHUyMDFEIG9yIFx1MjAxQ2VxdWlwbWVudFR5cGVcdTIwMURcbiAgICAhaXRlbS5pdGVtICYmXG4gICAgIWl0ZW0uZXF1aXBtZW50VHlwZSAmJlxuICAgICFpdGVtLnNwZWNpYWxcbiAgKSB7XG4gICAgY29uc3QgZ3AgPSBwcmljZVJhdyA+PSAxMDAgPyBwcmljZVJhdyAvIDEwMCA6IHByaWNlUmF3O1xuICAgIHJldHVybiBgJHtncH0gZ3BgO1xuICB9XG5cbiAgLy8gMykgZXhwbGljaXQgaXRlbSBvYmplY3Qgd2l0aCBvcHRpb25hbCBwcmljZVxuICBpZiAoaXRlbS5pdGVtKSB7XG4gICAgY29uc3QgbGluayA9IHJlcGxhY2U1ZVRhZ3MoYHtAaXRlbSAke2l0ZW0uaXRlbX19YCk7XG4gICAgaWYgKHR5cGVvZiBwcmljZVJhdyA9PT0gXCJudW1iZXJcIikge1xuICAgICAgY29uc3QgZ3AgPSBwcmljZVJhdyA+PSAxMDAgPyBwcmljZVJhdyAvIDEwMCA6IHByaWNlUmF3O1xuICAgICAgcmV0dXJuIGAke2xpbmt9ICgke2dwfSBncClgO1xuICAgIH1cbiAgICByZXR1cm4gbGluaztcbiAgfVxuXG4gIC8vIDQpIHNwZWNpYWwtY2FzZSB0ZXh0XG4gIGlmICh0eXBlb2YgaXRlbS5zcGVjaWFsID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGl0ZW0uc3BlY2lhbDtcbiAgfVxuXG4gIC8vIDUpIGtub3duIGVxdWlwbWVudFR5cGUga2V5c1xuICBpZiAoaXRlbS5lcXVpcG1lbnRUeXBlKSB7XG4gICAgc3dpdGNoIChpdGVtLmVxdWlwbWVudFR5cGUpIHtcbiAgICAgIGNhc2UgXCJ0b29sQXJ0aXNhblwiOlxuICAgICAgICByZXR1cm4gXCJPbmUgdHlwZSBvZiBhcnRpc2FuXHUyMDE5cyB0b29scyAob2YgeW91ciBjaG9pY2UpXCI7XG4gICAgICBjYXNlIFwiaW5zdHJ1bWVudE11c2ljYWxcIjpcbiAgICAgICAgcmV0dXJuIFwiT25lIHR5cGUgb2YgbXVzaWNhbCBpbnN0cnVtZW50IChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGNhc2UgXCJzZXRHYW1pbmdcIjpcbiAgICAgICAgcmV0dXJuIFwiT25lIHNldCBvZiBnYW1pbmcgZGljZSAob2YgeW91ciBjaG9pY2UpXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gaHVtYW5pemUoaXRlbS5lcXVpcG1lbnRUeXBlKTtcbiAgICB9XG4gIH1cblxuICAvLyA2KSBmYWxsYmFjazogZHVtcCBhbnkgbGVmdG92ZXIgdGFnIHN5bnRheFxuICByZXR1cm4gcmVwbGFjZTVlVGFncyhKU09OLnN0cmluZ2lmeShpdGVtKSk7XG59XG5cblxuXG5mdW5jdGlvbiBodW1hbml6ZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHNwYWNlZCA9IHN0ci5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxICQyXCIpO1xuICByZXR1cm4gc3BhY2VkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3BhY2VkLnNsaWNlKDEpO1xufVxuIiwgIi8vIHNyYy9ydWxlc2V0SW5zdGFsbGVyLnRzXG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEFWQUlMQUJMRV9FRElUSU9OUyB9IGZyb20gXCIuL2VkaXRpb25zXCI7XG5cbi8vIFNUQVRJQyBpbXBvcnQgb2YgZXZlcnkgaW5zdGFsbGVyIHlvdSBzaGlwOlxuaW1wb3J0ICogYXMgZml2ZWUyMDE0SW5zdGFsbGVyIGZyb20gXCIuL3BhcnNlcnMvNWUtanNvbi9pbnN0YWxsZXJcIjtcbmltcG9ydCAqIGFzIGZpdmVlMjAyNUluc3RhbGxlciBmcm9tIFwiLi9wYXJzZXJzLzVlLTIwMjUvaW5zdGFsbGVyXCI7XG4vLyBpbXBvcnQgKiBhcyBhbm90aGVySW5zdGFsbGVyIGZyb20gXCIuL3BhcnNlcnMvb3RoZXIvaW5zdGFsbGVyXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbXBvcnRSdWxlc2V0RGF0YShwYXJhbXM6IHtcbiAgYXBwOiBBcHA7XG4gIGVkaXRpb25LZXk6IHN0cmluZztcbiAgdGFyZ2V0UGF0aDogc3RyaW5nO1xufSkge1xuICBjb25zdCB7IGFwcCwgZWRpdGlvbktleSwgdGFyZ2V0UGF0aCB9ID0gcGFyYW1zO1xuICBjb25zdCBlZGl0aW9uID0gQVZBSUxBQkxFX0VESVRJT05TLmZpbmQoKGUpID0+IGUuaWQgPT09IGVkaXRpb25LZXkpO1xuICBpZiAoIWVkaXRpb24pIHtcbiAgICBjb25zb2xlLndhcm4oXCJFZGl0aW9uIG5vdCBmb3VuZCBmb3I6XCIsIGVkaXRpb25LZXkpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoIWVkaXRpb24ucGFyc2VyKSB7XG4gICAgY29uc29sZS53YXJuKFwiTm8gcGFyc2VyIGRlZmluZWQgZm9yOlwiLCBlZGl0aW9uS2V5KTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBhbGwgaW5zdGFsbGVycyBleHBvc2UgaW1wb3J0RWRpdGlvbkRhdGEoKVxuICBsZXQgaW5zdGFsbGVyTW9kdWxlOiB7IGltcG9ydEVkaXRpb25EYXRhOiAoYXJnczogeyBhcHA6IEFwcDsgZWRpdGlvbjogdHlwZW9mIGVkaXRpb247IHRhcmdldFBhdGg6IHN0cmluZyB9KSA9PiBQcm9taXNlPHZvaWQ+IH07XG5cbiAgc3dpdGNoIChlZGl0aW9uLnBhcnNlcikge1xuICAgIGNhc2UgXCI1ZS1qc29uXCI6XG4gICAgICBpbnN0YWxsZXJNb2R1bGUgPSBmaXZlZTIwMTRJbnN0YWxsZXI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiNWUtMjAyNVwiOlxuICAgICAgaW5zdGFsbGVyTW9kdWxlID0gZml2ZWUyMDI1SW5zdGFsbGVyO1xuICAgICAgYnJlYWs7XG4gICAgLy8gY2FzZSBcIm90aGVyLXBhcnNlclwiOlxuICAgIC8vICAgaW5zdGFsbGVyTW9kdWxlID0gYW5vdGhlckluc3RhbGxlcjtcbiAgICAvLyAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcGFyc2VyOiAke2VkaXRpb24ucGFyc2VyfWApO1xuICB9XG5cbiAgYXdhaXQgaW5zdGFsbGVyTW9kdWxlLmltcG9ydEVkaXRpb25EYXRhKHsgYXBwLCBlZGl0aW9uLCB0YXJnZXRQYXRoIH0pO1xufVxuIiwgIi8vIGN1c3RvbUluc3RhbGxNb2RhbC50c1xuaW1wb3J0IHsgQXBwLCBNb2RhbCwgc2V0SWNvbiwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5cbmV4cG9ydCBjbGFzcyBJbnN0YWxsaW5nTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgfVxuICBvbk9wZW4oKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICB0aGlzLmNvbnRlbnRFbFxuICAgICAgLmNyZWF0ZURpdih7IHRleHQ6ICdJbnN0YWxsaW5nXHUyMDI2JywgY2xzOiAnbW9kLXF1aWV0JyB9KVxuICAgICAgLnN0eWxlLmNzc1RleHQgPVxuICAgICAgJ2ZvbnQtc3R5bGU6IGl0YWxpYzsgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDFlbTsnO1xuICB9XG4gIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgVHJlZU5vZGUge1xuICBuYW1lOiBzdHJpbmc7XG4gIGZ1bGxQYXRoOiBzdHJpbmc7XG4gIGlzRm9sZGVyOiBib29sZWFuO1xuICBjaGlsZHJlbjogUmVjb3JkPHN0cmluZywgVHJlZU5vZGU+O1xufVxuXG4vKipcbiAqIFNob3dzIGEgXHUyMDFDQ3VzdG9tIEluc3RhbGxcdTIwMUQgbW9kYWwuIE9uY2UgdGhlIHVzZXIgY2xpY2tzIFx1MjAxQ0luc3RhbGwgU2VsZWN0ZWQsXHUyMDFEXG4gKiB0aGlzIGhhbmRzIGJhY2sgYW4gYXJyYXkgb2YgYHsgcGF0aCwgaXNGb2xkZXIgfWAgdG8gYHBsdWdpbi5wZXJmb3JtQ3VzdG9tSW5zdGFsbCguLi4pYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3dDdXN0b21JbnN0YWxsTW9kYWwoXG4gIGFwcDogQXBwLFxuICBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpblxuKSB7XG4gIC8vICgxKSBCdWlsZCBhIHF1aWNrIG1hcDogZnVsbFBhdGggXHUyMTkyIG1hbmlmZXN0S2V5IChmb3IgZGVwZW5kZW5jeSBsb29rdXBzKVxuICBjb25zdCBmdWxsUGF0aFRvS2V5OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gIGZvciAoY29uc3QgZiBvZiBwbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgZnVsbFBhdGhUb0tleVtmLnBhdGhdID0gZi5rZXk7XG4gIH1cbiAgZm9yIChjb25zdCBmIG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgZnVsbFBhdGhUb0tleVtmLnBhdGhdID0gZi5rZXk7XG4gIH1cblxuICAvLyAoMikgQnVpbGQgYSBuZXN0ZWQgVHJlZU5vZGUgc3RydWN0dXJlIGZyb20gbWFuaWZlc3RDYWNoZVxuICBjb25zdCByb290OiBUcmVlTm9kZSA9IHsgbmFtZTogJycsIGZ1bGxQYXRoOiAnJywgaXNGb2xkZXI6IHRydWUsIGNoaWxkcmVuOiB7fSB9O1xuXG4gIGZ1bmN0aW9uIGVuc3VyZUZvbGRlck5vZGUoc2VnbWVudHM6IHN0cmluZ1tdKTogVHJlZU5vZGUge1xuICAgIGxldCBjdXJzb3IgPSByb290O1xuICAgIGxldCBidWlsdFNvRmFyID0gJyc7XG4gICAgZm9yIChjb25zdCBzZWcgb2Ygc2VnbWVudHMpIHtcbiAgICAgIGJ1aWx0U29GYXIgPSBidWlsdFNvRmFyID8gYCR7YnVpbHRTb0Zhcn0vJHtzZWd9YCA6IHNlZztcbiAgICAgIGlmICghY3Vyc29yLmNoaWxkcmVuW3NlZ10pIHtcbiAgICAgICAgY3Vyc29yLmNoaWxkcmVuW3NlZ10gPSB7XG4gICAgICAgICAgbmFtZTogc2VnLFxuICAgICAgICAgIGZ1bGxQYXRoOiBidWlsdFNvRmFyLFxuICAgICAgICAgIGlzRm9sZGVyOiB0cnVlLFxuICAgICAgICAgIGNoaWxkcmVuOiB7fSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGN1cnNvciA9IGN1cnNvci5jaGlsZHJlbltzZWddO1xuICAgIH1cbiAgICByZXR1cm4gY3Vyc29yO1xuICB9XG5cbiAgLy8gSW5zZXJ0IGFsbCBmb2xkZXIgZW50cmllcyBmaXJzdFxuICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICBjb25zdCBzZWdtZW50cyA9IGZvbGRlckVudHJ5LnBhdGguc3BsaXQoJy8nKTtcbiAgICBlbnN1cmVGb2xkZXJOb2RlKHNlZ21lbnRzKTtcbiAgfVxuXG4gIC8vIEluc2VydCBhbGwgZmlsZSBlbnRyaWVzIHVuZGVyIHRoZWlyIHBhcmVudCBmb2xkZXIgbm9kZXNcbiAgZm9yIChjb25zdCBmaWxlRW50cnkgb2YgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICBjb25zdCBzZWdtZW50cyA9IGZpbGVFbnRyeS5wYXRoLnNwbGl0KCcvJyk7XG4gICAgY29uc3QgZmlsZU5hbWUgPSBzZWdtZW50cy5wb3AoKSE7XG4gICAgY29uc3QgcGFyZW50Tm9kZSA9IHNlZ21lbnRzLmxlbmd0aCA/IGVuc3VyZUZvbGRlck5vZGUoc2VnbWVudHMpIDogcm9vdDtcbiAgICBwYXJlbnROb2RlLmNoaWxkcmVuW2ZpbGVOYW1lXSA9IHtcbiAgICAgIG5hbWU6IGZpbGVOYW1lLFxuICAgICAgZnVsbFBhdGg6IGZpbGVFbnRyeS5wYXRoLFxuICAgICAgaXNGb2xkZXI6IGZhbHNlLFxuICAgICAgY2hpbGRyZW46IHt9LFxuICAgIH07XG4gIH1cblxuICAvLyAoMykgRGVmaW5lIG91ciBNb2RhbCBzdWJjbGFzc1xuICBjbGFzcyBDdXN0b21JbnN0YWxsTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBjaGVja2JveE1hcDogUmVjb3JkPHN0cmluZywgSFRNTElucHV0RWxlbWVudD4gPSB7fTtcbiAgICBwcml2YXRlIGNvbnNvbGVFbDogSFRNTEVsZW1lbnQ7ICAgICAgICAgICAgICAgIC8vIDxkaXY+IHRoYXQgaG9sZHMgXHUyMDFDZGVwZW5kZW5jeSBjb25zb2xlXHUyMDFEXG4gICAgcHJpdmF0ZSBjdXJyZW50QmF0Y2hMaW5lczogSFRNTEVsZW1lbnRbXSA9IFtdOyAgLy8gbGluZXMgZnJvbSB0aGUgbW9zdCByZWNlbnQgZGVwZW5kZW5jeSBwYXNzXG5cbiAgICAvLyBUb3BcdTIwMTBsZXZlbCBmaWx0ZXIgY2hlY2tib3hlczpcbiAgICBwcml2YXRlIHBsdWdpbkNoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByaXZhdGUgZGVtb0NoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByaXZhdGUgc2V0dGluZ3NDaGVja2JveDogSFRNTElucHV0RWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCgnQ3VzdG9tIEluc3RhbGwnKTtcbiAgICBcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uRWwgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgIGRlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQgPSAnQWxsIGNoZWNrZWQgaXRlbXMgd2lsbCBiZSBpbnN0YWxsZWQuIERlcGVuZGVuY2llcyB3aWxsIGJlIG1hbmFnZWQgYXV0b21hdGljYWxseS4nO1xuICAgICAgZGVzY3JpcHRpb25FbC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIG1hcmdpbi10b3A6IDAuMjVlbTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMC43NWVtO1xuICAgICAgYDtcblxuICAgICAgLy9cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCAoQSkgU0lOR0xFIFNDUk9MTEFCTEUgQk9YIEZPUiBcdTIwMUNPUFRJT05TICsgVFJFRVx1MjAxRCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICBjb25zdCBvcHRpb25zQm94ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICBPYmplY3QuYXNzaWduKG9wdGlvbnNCb3guc3R5bGUsIHtcbiAgICAgICAgbWF4SGVpZ2h0OiAnNDgwcHgnLCAgICAgICAgICAgICAgIC8vIEVub3VnaCBzcGFjZSBmb3IgY2hlY2tib3hlcyArIHRyZWVcbiAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsICAgICAgICAgICAgICAgIC8vIEV2ZXJ5dGhpbmcgaW5zaWRlIG9wdGlvbnNCb3ggd2lsbCBzY3JvbGxcbiAgICAgICAgbWFyZ2luOiAnMC41ZW0gMCcsXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgIHBhZGRpbmc6ICcwLjVlbScsXG4gICAgICB9KTtcbiAgICBcbiAgICAgIC8vXG4gICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgKEExKSBcdTIwMUNJbmNsdWRlIFx1MjAyNlx1MjAxRCBDSEVDS0JPWEVTIEFUIFRIRSBUT1AgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAvL1xuICAgICAgLy8gV2UgY3JlYXRlIG9uZSBzbWFsbCBcdTIwMUNjaGVja2JveCBwYW5lbFx1MjAxRCB0aGF0IHNpdHMgYXQgdGhlIHRvcCBvZiBvcHRpb25zQm94LlxuICAgICAgY29uc3QgY2hlY2tib3hTZWN0aW9uID0gb3B0aW9uc0JveC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24oY2hlY2tib3hTZWN0aW9uLnN0eWxlLCB7XG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG4gICAgICAgIGdhcDogJzAuNWVtJyxcbiAgICAgICAgbWFyZ2luQm90dG9tOiAnMC43NWVtJyxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy8gMSkgXHUyMDFDSW5jbHVkZSBQbHVnaW5zXHUyMDFEXG4gICAgICBjb25zdCBwbHVnaW5Sb3cgPSBjaGVja2JveFNlY3Rpb24uY3JlYXRlRGl2KCk7XG4gICAgICBwbHVnaW5Sb3cuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgIHBsdWdpblJvdy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICB0aGlzLnBsdWdpbkNoZWNrYm94ID0gcGx1Z2luUm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgdGhpcy5wbHVnaW5DaGVja2JveC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgIHRoaXMucGx1Z2luQ2hlY2tib3guaWQgPSAndnZ1bmRlcmxvcmUtY2hlY2tib3gtcGx1Z2lucyc7XG4gICAgICB0aGlzLnBsdWdpbkNoZWNrYm94LnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuNWVtJztcbiAgICAgIHBsdWdpblJvdy5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICAgIHRleHQ6ICdDb21tdW5pdHkgUGx1Z2lucycsXG4gICAgICAgIGF0dHI6IHsgZm9yOiB0aGlzLnBsdWdpbkNoZWNrYm94LmlkIH0sXG4gICAgICB9KTtcbiAgICBcbiAgICAgIC8vIDIpIFx1MjAxQ0luY2x1ZGUgRGVtbyBGaWxlc1x1MjAxRFxuICAgICAgY29uc3QgZGVtb1JvdyA9IGNoZWNrYm94U2VjdGlvbi5jcmVhdGVEaXYoKTtcbiAgICAgIGRlbW9Sb3cuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgIGRlbW9Sb3cuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgdGhpcy5kZW1vQ2hlY2tib3ggPSBkZW1vUm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgdGhpcy5kZW1vQ2hlY2tib3guY2hlY2tlZCA9IHRydWU7XG4gICAgICB0aGlzLmRlbW9DaGVja2JveC5pZCA9ICd2dnVuZGVybG9yZS1jaGVja2JveC1kZW1vJztcbiAgICAgIHRoaXMuZGVtb0NoZWNrYm94LnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuNWVtJztcbiAgICAgIGRlbW9Sb3cuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgICB0ZXh0OiAnVlZ1bmRlcmxvcmUgRGVtbyBGaWxlcycsXG4gICAgICAgIGF0dHI6IHsgZm9yOiB0aGlzLmRlbW9DaGVja2JveC5pZCB9LFxuICAgICAgfSk7XG4gICAgXG4gICAgICAvLyAzKSBcdTIwMUNJbmNsdWRlIFZhdWx0IFNldHRpbmdzIChob3RrZXlzLCBldGMuKVx1MjAxRFxuICAgICAgY29uc3Qgc2V0dGluZ3NSb3cgPSBjaGVja2JveFNlY3Rpb24uY3JlYXRlRGl2KCk7XG4gICAgICBzZXR0aW5nc1Jvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgc2V0dGluZ3NSb3cuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgdGhpcy5zZXR0aW5nc0NoZWNrYm94ID0gc2V0dGluZ3NSb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICB0aGlzLnNldHRpbmdzQ2hlY2tib3guY2hlY2tlZCA9IHRydWU7XG4gICAgICB0aGlzLnNldHRpbmdzQ2hlY2tib3guaWQgPSAndnZ1bmRlcmxvcmUtY2hlY2tib3gtc2V0dGluZ3MnO1xuICAgICAgdGhpcy5zZXR0aW5nc0NoZWNrYm94LnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuNWVtJztcbiAgICAgIHNldHRpbmdzUm93LmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgICAgdGV4dDogJ1ZhdWx0IFNldHRpbmdzIChhcHBlcmFuY2UsIGhvdGtleXMsIGdyYXBoIHNldHVwLCBldGMuKScsXG4gICAgICAgIGF0dHI6IHsgZm9yOiB0aGlzLnNldHRpbmdzQ2hlY2tib3guaWQgfSxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy9cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCAoQTIpIFRISU4gRElWSURFUiBMSU5FIEJFVFdFRU4gQ0hFQ0tCT1hFUyBBTkQgVFJFRSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICBjb25zdCBkaXZpZGVyID0gb3B0aW9uc0JveC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24oZGl2aWRlci5zdHlsZSwge1xuICAgICAgICBib3JkZXJUb3A6ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuICAgICAgICBtYXJnaW46ICcwLjVlbSAwJyxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy9cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCAoQTMpIE1BTklGRVNUIFRSRUUgUkVOREVSRUQgQkVMT1cgVEhFIERJVklERVIgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAvL1xuICAgICAgY29uc3QgY29udGFpbmVyID0gb3B0aW9uc0JveC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24oY29udGFpbmVyLnN0eWxlLCB7XG4gICAgICAgIC8vIFdlIG5vIGxvbmdlciBnaXZlIHRoaXMgaW5uZXIgZGl2IGl0cyBvd24gc2Nyb2xsYmFyLlxuICAgICAgICAvLyBJbnN0ZWFkLCBjb250YWluZXIgd2lsbCBleHBhbmQgaW5zaWRlIG9wdGlvbnNCb3gsIGFuZFxuICAgICAgICAvLyBvcHRpb25zQm94IHdpbGwgc2Nyb2xsIGV2ZXJ5dGhpbmcgKGNoZWNrYm94ZXMgKyB0cmVlKSB0b2dldGhlci5cbiAgICAgICAgbWFyZ2luOiAnMCcsXG4gICAgICAgIHBhZGRpbmc6ICcwJyxcbiAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICB9KTtcbiAgICBcbiAgICAgIGNvbnN0IElOREVOVF9QWCA9IDE2O1xuICAgICAgY29uc3QgbG9va3VwRW50cnkgPSAoZnVsbFBhdGg6IHN0cmluZykgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMuZmluZCgoZikgPT4gZi5wYXRoID09PSBmdWxsUGF0aCkgfHxcbiAgICAgICAgICBwbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcy5maW5kKChmKSA9PiBmLnBhdGggPT09IGZ1bGxQYXRoKVxuICAgICAgICApO1xuICAgICAgfTtcbiAgICBcbiAgICAgIC8vIFJlcmVuZGVyIGxvZ2ljIGZvciB0aGUgdHJlZTsgaGlkZXMgb3B0aW9uYWwgaXRlbXMgaWYgdGhlIGRlbW9DaGVja2JveCBpcyB1bmNoZWNrZWRcbiAgICAgIGNvbnN0IHJlbmRlclRyZWUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICB0aGlzLmNoZWNrYm94TWFwID0ge307XG4gICAgICAgIHRoaXMuY3VycmVudEJhdGNoTGluZXMgPSBbXTtcbiAgICBcbiAgICAgICAgY29uc3QgZGVtb0FsbG93ZWQgPSB0aGlzLmRlbW9DaGVja2JveC5jaGVja2VkO1xuICAgIFxuICAgICAgICBjb25zdCByZW5kZXJOb2RlID0gKG5vZGU6IFRyZWVOb2RlLCBwYXJlbnRFbDogSFRNTEVsZW1lbnQsIGluZGVudCA9IDApID0+IHtcbiAgICAgICAgICAvLyBJZiB0aGlzIG5vZGUgY29ycmVzcG9uZHMgdG8gYSBtYW5pZmVzdCBlbnRyeTpcbiAgICAgICAgICBpZiAobm9kZS5mdWxsUGF0aCkge1xuICAgICAgICAgICAgY29uc3QgZW50cnkgPSBsb29rdXBFbnRyeShub2RlLmZ1bGxQYXRoKTtcbiAgICAgICAgICAgIGlmIChlbnRyeSAmJiBlbnRyeS5vcHRpb25hbCAmJiAhZGVtb0FsbG93ZWQpIHtcbiAgICAgICAgICAgICAgLy8gU2tpcCBvcHRpb25hbCBkZW1vIGl0ZW1zIHdoZW4gXHUyMDFDSW5jbHVkZSBEZW1vIEZpbGVzXHUyMDFEIGlzIGZhbHNlXG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgaWYgKG5vZGUuaXNGb2xkZXIpIHtcbiAgICAgICAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGT0xERVIgQ0FTRSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgICAgICAgIGNvbnN0IGRldGFpbHMgPSBwYXJlbnRFbC5jcmVhdGVFbCgnZGV0YWlscycpO1xuICAgICAgICAgICAgZGV0YWlscy5vcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIGRldGFpbHMuc3R5bGUubWFyZ2luID0gJzRweCAwJztcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHN1bW1hcnkgPSBkZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5Jyk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHN1bW1hcnkuc3R5bGUsIHtcbiAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgbWFyZ2luTGVmdDogYCR7aW5kZW50ICogSU5ERU5UX1BYfXB4YCxcbiAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgICAgICAgIHBhZGRpbmc6ICcycHggNnB4JyxcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdW1tYXJ5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHN1bW1hcnkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3VtbWFyeS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgICBzdW1tYXJ5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIC8vICgxKSBGb2xkZXIgY2hlY2tib3hcbiAgICAgICAgICAgIGNvbnN0IGNiID0gc3VtbWFyeS5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgIGNiLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuNWVtJztcbiAgICAgICAgICAgIGNiLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgY2Iuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgdGhpcy5jaGVja2JveE1hcFtub2RlLmZ1bGxQYXRoXSA9IGNiO1xuICAgIFxuICAgICAgICAgICAgLy8gKDIpIEZvbGRlciBpY29uXG4gICAgICAgICAgICBjb25zdCBpY29uRWwgPSBzdW1tYXJ5LmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24taWNvbicgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGljb25FbCwgJ2ZvbGRlcicpO1xuICAgICAgICAgICAgaWNvbkVsLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuM2VtJztcbiAgICAgICAgICAgIGljb25FbC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMC45KSc7XG4gICAgICAgICAgICBpY29uRWwuc3R5bGUub3BhY2l0eSA9ICcwLjc1JztcbiAgICBcbiAgICAgICAgICAgIC8vICgzKSBGb2xkZXIgbGFiZWxcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gc3VtbWFyeS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogbm9kZS5uYW1lIH0pO1xuICAgICAgICAgICAgbGFiZWwuc3R5bGUuZm9udFdlaWdodCA9ICc2MDAnO1xuICAgICAgICAgICAgbGFiZWwuc3R5bGUuZm9udFNpemUgPSAnMC45NWVtJztcbiAgICBcbiAgICAgICAgICAgIC8vICg0KSBXaGVuIGZvbGRlclx1MjAxMGNoZWNrYm94IHRvZ2dsZXM6XG4gICAgICAgICAgICBjYi5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy50b2dnbGVEZXNjZW5kYW50cyhub2RlLCBjYi5jaGVja2VkKTtcbiAgICAgICAgICAgICAgdGhpcy5lbmZvcmNlRGVwZW5kZW5jaWVzKG5vZGUuZnVsbFBhdGgsIGNiLmNoZWNrZWQpO1xuICAgICAgICAgICAgICB0aGlzLmZhZGVBbGxFeGNlcHRDdXJyZW50QmF0Y2goKTtcbiAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAvLyAoNSkgUmVjdXJzZSBpbnRvIGNoaWxkcmVuXG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbkNvbnRhaW5lciA9IGRldGFpbHMuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICBjaGlsZHJlbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSAnNHB4JztcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2hpbGROYW1lIG9mIE9iamVjdC5rZXlzKG5vZGUuY2hpbGRyZW4pLnNvcnQoKSkge1xuICAgICAgICAgICAgICByZW5kZXJOb2RlKG5vZGUuY2hpbGRyZW5bY2hpbGROYW1lXSwgY2hpbGRyZW5Db250YWluZXIsIGluZGVudCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRklMRSBDQVNFIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgICAgICAgY29uc3Qgcm93ID0gcGFyZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHJvdy5zdHlsZSwge1xuICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiBgJHtpbmRlbnQgKiBJTkRFTlRfUFh9cHhgLFxuICAgICAgICAgICAgICBwYWRkaW5nOiAnMnB4IDZweCcsXG4gICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgICAgICAgIG1hcmdpblRvcDogJzJweCcsXG4gICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogJzJweCcsXG4gICAgICAgICAgICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHJvdy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3ZlciknO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgcm93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIC8vICgxKSBGaWxlIGNoZWNrYm94XG4gICAgICAgICAgICBjb25zdCBjYiA9IHJvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgIGNiLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuNWVtJztcbiAgICAgICAgICAgIGNiLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgY2Iuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgdGhpcy5jaGVja2JveE1hcFtub2RlLmZ1bGxQYXRoXSA9IGNiO1xuICAgIFxuICAgICAgICAgICAgLy8gKDIpIEZpbGUgaWNvblxuICAgICAgICAgICAgY29uc3QgaWNvbkVsID0gcm93LmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24taWNvbicgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGljb25FbCwgJ2RvY3VtZW50Jyk7XG4gICAgICAgICAgICBpY29uRWwuc3R5bGUubWFyZ2luUmlnaHQgPSAnMC4zZW0nO1xuICAgICAgICAgICAgaWNvbkVsLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgwLjgpJztcbiAgICAgICAgICAgIGljb25FbC5zdHlsZS5vcGFjaXR5ID0gJzAuNSc7XG4gICAgXG4gICAgICAgICAgICAvLyAoMykgRmlsZSBsYWJlbFxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSByb3cuY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiBub2RlLm5hbWUgfSk7XG4gICAgICAgICAgICBsYWJlbC5zdHlsZS5mb250U2l6ZSA9ICcwLjllbSc7XG4gICAgXG4gICAgICAgICAgICAvLyAoNCkgV2hlbiBmaWxlXHUyMDEwY2hlY2tib3ggdG9nZ2xlczpcbiAgICAgICAgICAgIGNiLm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmVuZm9yY2VEZXBlbmRlbmNpZXMobm9kZS5mdWxsUGF0aCwgY2IuY2hlY2tlZCk7XG4gICAgICAgICAgICAgIHRoaXMuZmFkZUFsbEV4Y2VwdEN1cnJlbnRCYXRjaCgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8vIEtpY2sgb2ZmIHJlY3Vyc2lvbiBhdCByb290XG4gICAgICAgIGZvciAoY29uc3QgdG9wTmFtZSBvZiBPYmplY3Qua2V5cyhyb290LmNoaWxkcmVuKS5zb3J0KCkpIHtcbiAgICAgICAgICByZW5kZXJOb2RlKHJvb3QuY2hpbGRyZW5bdG9wTmFtZV0sIGNvbnRhaW5lciwgMCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgXG4gICAgICAvLyBGaXJzdCBkcmF3IG9mIHRoZSB0cmVlIChiZWxvdyB0aGUgZGl2aWRlcilcbiAgICAgIHJlbmRlclRyZWUoKTtcbiAgICBcbiAgICAgIC8vXG4gICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgKEIpIERFUEVOREVOQ1kgQ09OU09MRSBCRUxPVyBUSEUgU0NST0xMQUJMRSBPUFRJT05TIEJPWCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICB0aGlzLmNvbnNvbGVFbCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2N1c3RvbS1jb25zb2xlJyB9KTtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jb25zb2xlRWwuc3R5bGUsIHtcbiAgICAgICAgaGVpZ2h0OiAnMTQwcHgnLFxuICAgICAgICBtYXJnaW46ICcwLjVlbSAwJyxcbiAgICAgICAgcGFkZGluZzogJzhweCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KScsXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgIGZvbnRGYW1pbHk6ICdtb25vc3BhY2UnLFxuICAgICAgICBmb250U2l6ZTogJzAuODJlbScsXG4gICAgICAgIGxpbmVIZWlnaHQ6ICcxLjRlbScsXG4gICAgICAgIGNvbG9yOiAndmFyKC0tdGV4dC1ub3JtYWwpJyxcbiAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgIHdoaXRlU3BhY2U6ICdwcmUtd3JhcCcsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gdGhpcy5jb25zb2xlRWwuY3JlYXRlRGl2KHtcbiAgICAgICAgdGV4dDogJz4gRGVwZW5kZW5jeSBlcnJvcnMgYW5kIHdhcm5pbmdzIHdpbGwgYXBwZWFyIGhlcmVcdTIwMjYnLFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuYXNzaWduKHBsYWNlaG9sZGVyLnN0eWxlLCB7XG4gICAgICAgIG9wYWNpdHk6ICcwLjQnLFxuICAgICAgICBmb250U3R5bGU6ICdpdGFsaWMnLFxuICAgICAgICBtYXJnaW5Cb3R0b206ICc0cHgnLFxuICAgICAgfSk7XG4gICAgXG4gICAgICAvL1xuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIChDKSBFVkVOVCBIQU5ETEVSUyBGT1IgVEhFIFRIUkVFIENIRUNLQk9YRVMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAvL1xuICAgICAgLy8gMSkgXHUyMDFDSW5jbHVkZSBQbHVnaW5zXHUyMDFEIHRvZ2dsZWRcbiAgICAgIHRoaXMucGx1Z2luQ2hlY2tib3gub25jaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFdBUk5JTkdfQ0xBU1MgPSAndnZ1bmRlcmxvcmUtd2FybmluZyc7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW5DaGVja2JveC5jaGVja2VkKSB7XG4gICAgICAgICAgLy8gSWYgY29uc29sZSBvbmx5IGhhcyB0aGUgcGxhY2Vob2xkZXIsIGNsZWFyIGl0XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5jb25zb2xlRWwuY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmXG4gICAgICAgICAgICAodGhpcy5jb25zb2xlRWwuY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnQpLnRleHRDb250ZW50Py5zdGFydHNXaXRoKFxuICAgICAgICAgICAgICAnPiBEZXBlbmRlbmN5IGNvbnNvbGUnXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnNvbGVFbC5lbXB0eSgpO1xuICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAvLyBBZGQgYSByZWQgd2FybmluZyBsaW5lXG4gICAgICAgICAgY29uc3Qgd2FybmluZ0xpbmUgPSB0aGlzLmNvbnNvbGVFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgdGV4dDpcbiAgICAgICAgICAgICAgJ1dBUk5JTkc6IFRoZSBWVnVuZGVybG9yZSBUb29sa2l0IHdpbGwgbm90IGZ1bmN0aW9uIHdpdGhvdXQgYWxsIGluY2x1ZGVkIHBsdWdpbnMhIFlvdSBwcm9iYWJseSB3YW50IHRvIHJlLWNoZWNrIHRoYXQgb25lLicsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgd2FybmluZ0xpbmUuYWRkQ2xhc3MoV0FSTklOR19DTEFTUyk7XG4gICAgICAgICAgd2FybmluZ0xpbmUuc3R5bGUuY29sb3IgPSAnI0ZGMDAwMCc7XG4gICAgXG4gICAgICAgICAgLy8gU2Nyb2xsIGNvbnNvbGUgdG8gYm90dG9tXG4gICAgICAgICAgdGhpcy5jb25zb2xlRWwuc2Nyb2xsVG9wID0gdGhpcy5jb25zb2xlRWwuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJlbW92ZSBvbmx5IG91ciB3YXJuaW5nIGxpbmVzIChsZWF2ZSBhbnkgb3RoZXIgbWVzc2FnZXMgYWxvbmUpXG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdXYXJuaW5ncyA9IHRoaXMuY29uc29sZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke1dBUk5JTkdfQ0xBU1N9YCk7XG4gICAgICAgICAgZXhpc3RpbmdXYXJuaW5ncy5mb3JFYWNoKChlbCkgPT4gZWwucmVtb3ZlKCkpO1xuICAgIFxuICAgICAgICAgIC8vIElmIGNvbnNvbGUgaXMgbm93IGVtcHR5LCByZVx1MjAxMGluc2VydCB0aGUgcGxhY2Vob2xkZXJcbiAgICAgICAgICBpZiAodGhpcy5jb25zb2xlRWwuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBwaCA9IHRoaXMuY29uc29sZUVsLmNyZWF0ZURpdih7XG4gICAgICAgICAgICAgIHRleHQ6ICc+IERlcGVuZGVuY3kgY29uc29sZSBvdXRwdXQgd2lsbCBhcHBlYXIgaGVyZVx1MjAyNicsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocGguc3R5bGUsIHtcbiAgICAgICAgICAgICAgb3BhY2l0eTogJzAuNCcsXG4gICAgICAgICAgICAgIGZvbnRTdHlsZTogJ2l0YWxpYycsXG4gICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogJzRweCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgLy8gU2Nyb2xsIHRvIGJvdHRvbSBhZ2FpblxuICAgICAgICAgIHRoaXMuY29uc29sZUVsLnNjcm9sbFRvcCA9IHRoaXMuY29uc29sZUVsLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICBcbiAgICAgIC8vIDIpIFx1MjAxQ0luY2x1ZGUgRGVtbyBGaWxlc1x1MjAxRCB0b2dnbGVkXG4gICAgICB0aGlzLmRlbW9DaGVja2JveC5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgcmVuZGVyVHJlZSgpO1xuICAgICAgfTtcbiAgICBcbiAgICAgIC8vIDMpIFx1MjAxQ0luY2x1ZGUgVmF1bHQgU2V0dGluZ3NcdTIwMUQgdG9nZ2xlZFxuICAgICAgLy8gKG5vIG5lZWQgdG8gcmUtcmVuZGVyIHRoZSB0cmVlLCBzaW5jZSB2YXVsdCBzZXR0aW5ncyBhcmVuXHUyMDE5dCBpbiB0aGUgbWFuaWZlc3QgdHJlZSlcbiAgICBcbiAgICAgIC8vXG4gICAgICBjb25zdCBidXR0b25Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24oYnV0dG9uUm93LnN0eWxlLCB7XG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJywgICAvLyBwdXNoIGxlZnQgdnMgcmlnaHRcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgIHBhZGRpbmdUb3A6ICc4cHgnLFxuICAgICAgICBib3JkZXJUb3A6ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuICAgICAgICBtYXJnaW5Ub3A6ICc4cHgnLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIDEpIFx1MjAxQ1Jlc2V0IFNlbGVjdGlvblx1MjAxRCBvbiB0aGUgTEVGVFxuICAgICAgY29uc3QgcmVzZXRCdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1Jlc2V0IFNlbGVjdGlvbicgfSk7XG4gICAgICByZXNldEJ0bi5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgYDtcbiAgICAgIHJlc2V0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIC8vIDEpIEdhdGhlciBhbnkgZXhpc3RpbmcgV0FSTklORyBsaW5lc1xuICAgICAgICBjb25zdCB3YXJuaW5ncyA9IEFycmF5LmZyb20oXG4gICAgICAgICAgdGhpcy5jb25zb2xlRWwucXVlcnlTZWxlY3RvckFsbCgnLnZ2dW5kZXJsb3JlLXdhcm5pbmcnKVxuICAgICAgICApIGFzIEhUTUxFbGVtZW50W107XG4gICAgICBcbiAgICAgICAgLy8gMikgV2lwZSBvdXQgdGhlIGNvbnNvbGUgZW50aXJlbHkgKHRoaXMgcmVtb3ZlcyBhbGwgZGVwZW5kZW5jeSBsaW5lcylcbiAgICAgICAgdGhpcy5jb25zb2xlRWwuZW1wdHkoKTtcbiAgICAgIFxuICAgICAgICAvLyAzKSBSZVx1MjAxMGFwcGVuZCBlYWNoIHBsdWdpblx1MjAxMHdhcm5pbmcgYmFjayBpbnRvIHRoZSBjb25zb2xlXG4gICAgICAgIHdhcm5pbmdzLmZvckVhY2goKHdhcm5pbmdFbCkgPT4ge1xuICAgICAgICAgIHRoaXMuY29uc29sZUVsLmFwcGVuZENoaWxkKHdhcm5pbmdFbCk7XG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICAgIC8vIDQpIFJlXHUyMDEwY2hlY2sgZXZlcnkgc2luZ2xlIG1hbmlmZXN0XHUyMDEwdHJlZSBjaGVja2JveFxuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMuY2hlY2tib3hNYXApLmZvckVhY2goKGNiKSA9PiB7XG4gICAgICAgICAgY2IuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgXG4gICAgICAvLyAyKSBDcmVhdGUgYSByaWdodFx1MjAxMGFsaWduZWQgc3ViXHUyMDEwY29udGFpbmVyIGZvciBcdTIwMUNJbnN0YWxsIFNlbGVjdGVkXHUyMDFEICsgXHUyMDFDQ2FuY2VsXHUyMDFEXG4gICAgICBjb25zdCByaWdodEdyb3VwID0gYnV0dG9uUm93LmNyZWF0ZURpdigpO1xuICAgICAgT2JqZWN0LmFzc2lnbihyaWdodEdyb3VwLnN0eWxlLCB7XG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgZ2FwOiAnMC41ZW0nLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIDJhKSBcdTIwMUNJbnN0YWxsIFNlbGVjdGVkXHUyMDFEIChwcmltYXJ5IENUQSlcbiAgICAgIGNvbnN0IGluc3RhbGxCdG4gPSByaWdodEdyb3VwLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6ICdJbnN0YWxsIFNlbGVjdGVkJyxcbiAgICAgICAgY2xzOiAnbW9kLWN0YScsXG4gICAgICB9KTtcbiAgICAgIGluc3RhbGxCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgaW5zdGFsbEJ0bi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuICAgICAgXG4gICAgICAgIC8vIChpKSBDbG9zZSB0aGlzIGN1c3RvbVx1MjAxMGluc3RhbGwgbW9kYWxcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgXG4gICAgICAgIC8vIChpaSkgU2hvdyBcdTIwMUNJbnN0YWxsaW5nXHUyMDI2XHUyMDFEIHBsYWNlaG9sZGVyXG4gICAgICAgIGNvbnN0IGluc3RhbGxpbmcgPSBuZXcgSW5zdGFsbGluZ01vZGFsKGFwcCk7XG4gICAgICAgIGluc3RhbGxpbmcub3BlbigpO1xuICAgICAgXG4gICAgICAgIC8vIChpaWkpIEdhdGhlciBhbGwgY2hlY2tlZCBtYW5pZmVzdCBlbnRyaWVzXG4gICAgICAgIGNvbnN0IHRvSW5zdGFsbDogeyBwYXRoOiBzdHJpbmc7IGlzRm9sZGVyOiBib29sZWFuIH1bXSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IFtmcCwgY2hlY2tib3hdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuY2hlY2tib3hNYXApKSB7XG4gICAgICAgICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzRm9sZGVyID0gcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5zb21lKChmKSA9PiBmLnBhdGggPT09IGZwKTtcbiAgICAgICAgICAgIHRvSW5zdGFsbC5wdXNoKHsgcGF0aDogZnAsIGlzRm9sZGVyIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXG4gICAgICAgIC8vIChpdikgSWYgXHUyMDFDSW5jbHVkZSBQbHVnaW5zXHUyMDFEIGlzIGNoZWNrZWQgXHUyMTkyIHB1bGwgZG93biBgLm9ic2lkaWFuL3BsdWdpbnNgICsgYGNvbW11bml0eS1wbHVnaW5zLmpzb25gXG4gICAgICAgIC8vIChpdikgSWYgXHUyMDFDSW5jbHVkZSBQbHVnaW5zXHUyMDFEIGlzIGNoZWNrZWQgXHUyMTkyIGZldGNoIHRoZSBHaXRIdWItc2lkZSAub2JzaWRpYW4vcGx1Z2lucyBhbmQgb25seSBlbnF1ZXVlXG4vLyAgICAgdGhvc2UgZm9sZGVycy9maWxlcyB0aGF0IGFyZW5cdTIwMTl0IGFscmVhZHkgaW4gdGhlIHZhdWx0LlxuaWYgKHRoaXMucGx1Z2luQ2hlY2tib3guY2hlY2tlZCkge1xuICB0cnkge1xuICAgIGNvbnN0IGFwaVVybCA9XG4gICAgICAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL2NvbnRlbnRzLy5vYnNpZGlhbi9wbHVnaW5zP3JlZj1tYWluJztcbiAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goYXBpVXJsKTtcbiAgICBpZiAocmVzcC5vaykge1xuICAgICAgY29uc3QgcGx1Z2luRmlsZXM6IEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiAnZmlsZScgfCAnZGlyJyB9PiA9IGF3YWl0IHJlc3AuanNvbigpO1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHBsdWdpbkZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGxvY2FsUGF0aCA9IGAub2JzaWRpYW4vcGx1Z2lucy8ke2l0ZW0ubmFtZX1gO1xuICAgICAgICAvLyBJZiB0aGF0IHBsdWdpbiBmb2xkZXIgKG9yIGZpbGUpIGRvZXMgX25vdF8gYWxyZWFkeSBleGlzdCBpbiB0aGUgdmF1bHQsIGVucXVldWUgaXQ6XG4gICAgICAgIGNvbnN0IGV4aXN0c0xvY2FsbHkgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhsb2NhbFBhdGgpO1xuICAgICAgICBpZiAoIWV4aXN0c0xvY2FsbHkpIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZGlyJykge1xuICAgICAgICAgICAgdG9JbnN0YWxsLnB1c2goeyBwYXRoOiBsb2NhbFBhdGgsIGlzRm9sZGVyOiB0cnVlIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0b0luc3RhbGwucHVzaCh7IHBhdGg6IGxvY2FsUGF0aCwgaXNGb2xkZXI6IGZhbHNlIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBlbnVtZXJhdGUgLm9ic2lkaWFuL3BsdWdpbnMgZnJvbSBHaXRIdWI6JywgZSk7XG4gIH1cblxuICAvLyBFdmVuIGlmIGNvbW11bml0eS1wbHVnaW5zLmpzb24gYWxyZWFkeSBleGlzdHMsIHlvdSBtaWdodCB3YW50IHRvIG92ZXJ3cml0ZSBpdCxcbiAgLy8gb3IgeW91IGNhbiBhbHNvIGNoZWNrIGFkYXB0ZXIuZXhpc3RzKC4uLikgYmVmb3JlIHB1c2hpbmcgaXQuIEV4YW1wbGUgYWx3YXlzIG92ZXJ3cml0ZXM6XG4gIHRvSW5zdGFsbC5wdXNoKHsgcGF0aDogJy5vYnNpZGlhbi9jb21tdW5pdHktcGx1Z2lucy5qc29uJywgaXNGb2xkZXI6IGZhbHNlIH0pO1xufVxuXG4gICAgICBcbiAgICAgICAgLy8gKHYpIElmIFx1MjAxQ0luY2x1ZGUgVmF1bHQgU2V0dGluZ3NcdTIwMUQgaXMgY2hlY2tlZCBcdTIxOTIgYWRkIHRoZSBmb3VyIEpTT04gZmlsZXMgdW5kZXIgYC5vYnNpZGlhbi9gXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzQ2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgICAgIGNvbnN0IHZhdWx0U2V0dGluZ3NQYXRocyA9IFtcbiAgICAgICAgICAgICcub2JzaWRpYW4vYXBwLmpzb24nLFxuICAgICAgICAgICAgJy5vYnNpZGlhbi9hcHBlYXJhbmNlLmpzb24nLFxuICAgICAgICAgICAgJy5vYnNpZGlhbi9ncmFwaC5qc29uJyxcbiAgICAgICAgICAgICcub2JzaWRpYW4vaG90a2V5cy5qc29uJyxcbiAgICAgICAgICBdO1xuICAgICAgICAgIGZvciAoY29uc3QgdnMgb2YgdmF1bHRTZXR0aW5nc1BhdGhzKSB7XG4gICAgICAgICAgICB0b0luc3RhbGwucHVzaCh7IHBhdGg6IHZzLCBpc0ZvbGRlcjogZmFsc2UgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBcbiAgICAgICAgLy8gKHZpKSBQZXJmb3JtIHRoZSBhY3R1YWwgaW5zdGFsbFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHBsdWdpbi5wZXJmb3JtQ3VzdG9tSW5zdGFsbCh0b0luc3RhbGwpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgcGVyZm9ybUN1c3RvbUluc3RhbGwoKSB0aHJldzonLCBlcnIpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBDdXN0b20gaW5zdGFsbCBmYWlsZWRcdTIwMTRzZWUgY29uc29sZScpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGluc3RhbGxpbmcuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gMmIpIFx1MjAxQ0NhbmNlbFx1MjAxRCBvbiB0aGUgcmlnaHRcbiAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IHJpZ2h0R3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgICBjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gICAgXG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG5cbiAgICAvKiogUmVjdXJzaXZlbHkgdG9nZ2xlIGRlc2NlbmRhbnRzXHUyMDE5IGNoZWNrZWRcdTIwMTBzdGF0ZSB3aXRob3V0IGxvZ2dpbmcgZWFjaCBvbmUuICovXG4gICAgcHJpdmF0ZSB0b2dnbGVEZXNjZW5kYW50cyhub2RlOiBUcmVlTm9kZSwgY2hlY2tlZDogYm9vbGVhbikge1xuICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBPYmplY3QudmFsdWVzKG5vZGUuY2hpbGRyZW4pKSB7XG4gICAgICAgIGNvbnN0IGNiID0gdGhpcy5jaGVja2JveE1hcFtjaGlsZC5mdWxsUGF0aF07XG4gICAgICAgIGlmIChjYikgY2IuY2hlY2tlZCA9IGNoZWNrZWQ7XG4gICAgICAgIGlmIChjaGlsZC5pc0ZvbGRlcikge1xuICAgICAgICAgIHRoaXMudG9nZ2xlRGVzY2VuZGFudHMoY2hpbGQsIGNoZWNrZWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5mb3JjZSBkZXBlbmRlbmN5IGxvZ2ljIChhdXRvXHUyMDEwY2hlY2sgcHJlcmVxdWlzaXRlcywgYXV0b1x1MjAxMHVuY2hlY2sgZGVwZW5kZW50cykuXG4gICAgICogRWFjaCB0aW1lIHdlIGZsaXAgYSBib3ggXHUyMDFDYmVjYXVzZSBvZiBhIGRlcGVuZGVuY3ksXHUyMDFEIHdlIGxvZyBvbmUgbGluZSB0byB0aGUgY29uc29sZS5cbiAgICAgKi9cbiAgICBwcml2YXRlIGVuZm9yY2VEZXBlbmRlbmNpZXMoY2hhbmdlZFBhdGg6IHN0cmluZywgaXNDaGVja2VkOiBib29sZWFuKSB7XG4gICAgICBjb25zdCBjaGFuZ2VkS2V5ID0gZnVsbFBhdGhUb0tleVtjaGFuZ2VkUGF0aF07XG4gICAgICBpZiAoIWNoYW5nZWRLZXkpIHJldHVybjtcblxuICAgICAgLy8gQnVpbGQgYSBxdWljayBtYXA6IGZ1bGxQYXRoIFx1MjE5MiBkaXNwbGF5TmFtZVxuICAgICAgY29uc3QgZnVsbFBhdGhUb0Rpc3BsYXk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgIGZvciAoY29uc3QgZiBvZiBwbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICAgIGZ1bGxQYXRoVG9EaXNwbGF5W2YucGF0aF0gPSBmLmRpc3BsYXlOYW1lID8/IGYucGF0aC5zcGxpdCgnLycpLnBvcCgpITtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgZiBvZiBwbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgICBmdWxsUGF0aFRvRGlzcGxheVtmLnBhdGhdID0gZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSE7XG4gICAgICB9XG4gICAgICBjb25zdCBjaGFuZ2VkTmFtZSA9IGZ1bGxQYXRoVG9EaXNwbGF5W2NoYW5nZWRQYXRoXSA/PyBjaGFuZ2VkUGF0aC5zcGxpdCgnLycpLnBvcCgpITtcblxuICAgICAgLy8gU3RhcnQgYSBuZXcgXHUyMDFDYmF0Y2hcdTIwMUQ6XG4gICAgICB0aGlzLmN1cnJlbnRCYXRjaExpbmVzID0gW107XG5cbiAgICAgIGlmIChpc0NoZWNrZWQpIHtcbiAgICAgICAgLy8gXHUyNUI2IEF1dG9cdTIwMTBjaGVjayBwcmVyZXF1aXNpdGVzXG4gICAgICAgIGNvbnN0IHN0YWNrID0gW2NoYW5nZWRLZXldO1xuICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgY3VyID0gc3RhY2sucG9wKCkhO1xuICAgICAgICAgIGNvbnN0IGRlcHMgPSBwbHVnaW4ucmVxdWlyZXNHcmFwaC5nZXQoY3VyKSA/PyBbXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IGRlcEtleSBvZiBkZXBzKSB7XG4gICAgICAgICAgICBjb25zdCBkZXBFbnRyeSA9XG4gICAgICAgICAgICAgIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoKHgpID0+IHgua2V5ID09PSBkZXBLZXkpIHx8XG4gICAgICAgICAgICAgIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMuZmluZCgoeCkgPT4geC5rZXkgPT09IGRlcEtleSk7XG4gICAgICAgICAgICBpZiAoZGVwRW50cnkpIHtcbiAgICAgICAgICAgICAgY29uc3QgZGVwUGF0aCA9IGRlcEVudHJ5LnBhdGg7XG4gICAgICAgICAgICAgIGNvbnN0IGNiID0gdGhpcy5jaGVja2JveE1hcFtkZXBQYXRoXTtcbiAgICAgICAgICAgICAgaWYgKGNiICYmICFjYi5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgY2IuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVwTmFtZSA9IGZ1bGxQYXRoVG9EaXNwbGF5W2RlcFBhdGhdID8/IGRlcFBhdGguc3BsaXQoJy8nKS5wb3AoKSE7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUVsID0gdGhpcy5hcHBlbmRMb2dMaW5lKFxuICAgICAgICAgICAgICAgICAgZGVwUGF0aCxcbiAgICAgICAgICAgICAgICAgIGA+ICR7ZGVwTmFtZX0gYXV0b21hdGljYWxseSBjaGVja2VkIChyZXF1aXJlZCBieSAke2NoYW5nZWROYW1lfSlgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRCYXRjaExpbmVzLnB1c2gobGluZUVsKTtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGRlcEtleSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1MjVCNiBBdXRvXHUyMDEwdW5jaGVjayBkZXBlbmRlbnRzXG4gICAgICAgIGNvbnN0IGRlcGVuZGVudHNPZiA9ICh0YXJnZXRLZXk6IHN0cmluZykgPT5cbiAgICAgICAgICBBcnJheS5mcm9tKHBsdWdpbi5yZXF1aXJlc0dyYXBoLmVudHJpZXMoKSlcbiAgICAgICAgICAgIC5maWx0ZXIoKFssIGRlcHNdKSA9PiBkZXBzLmluY2x1ZGVzKHRhcmdldEtleSkpXG4gICAgICAgICAgICAubWFwKChba10pID0+IGspO1xuXG4gICAgICAgIGNvbnN0IHN0YWNrID0gW2NoYW5nZWRLZXldO1xuICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgY3VyID0gc3RhY2sucG9wKCkhO1xuICAgICAgICAgIGZvciAoY29uc3QgY2hpbGRLZXkgb2YgZGVwZW5kZW50c09mKGN1cikpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkRW50cnkgPVxuICAgICAgICAgICAgICBwbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcy5maW5kKCh4KSA9PiB4LmtleSA9PT0gY2hpbGRLZXkpIHx8XG4gICAgICAgICAgICAgIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMuZmluZCgoeCkgPT4geC5rZXkgPT09IGNoaWxkS2V5KTtcbiAgICAgICAgICAgIGlmIChjaGlsZEVudHJ5KSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNoaWxkUGF0aCA9IGNoaWxkRW50cnkucGF0aDtcbiAgICAgICAgICAgICAgY29uc3QgY2IgPSB0aGlzLmNoZWNrYm94TWFwW2NoaWxkUGF0aF07XG4gICAgICAgICAgICAgIGlmIChjYiAmJiBjYi5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgY2IuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkTmFtZSA9IGZ1bGxQYXRoVG9EaXNwbGF5W2NoaWxkUGF0aF0gPz8gY2hpbGRQYXRoLnNwbGl0KCcvJykucG9wKCkhO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVFbCA9IHRoaXMuYXBwZW5kTG9nTGluZShcbiAgICAgICAgICAgICAgICAgIGNoaWxkUGF0aCxcbiAgICAgICAgICAgICAgICAgIGA+ICR7Y2hpbGROYW1lfSBhdXRvbWF0aWNhbGx5IHVuY2hlY2tlZCAoZGVwZW5kcyBvbiAke2NoYW5nZWROYW1lfSlgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRCYXRjaExpbmVzLnB1c2gobGluZUVsKTtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGNoaWxkS2V5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmZhZGVBbGxFeGNlcHRDdXJyZW50QmF0Y2goKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBlbmQgb25lIFx1MjAxQ21vbm9cdTIwMUQgbGluZSBwbHVzIGEgdGlueSB1bmRvIGJ1dHRvbi4gUmV0dXJucyB0aGUgbmV3IDxkaXY+LlxuICAgICAqL1xuICAgIHByaXZhdGUgYXBwZW5kTG9nTGluZShmdWxsUGF0aDogc3RyaW5nLCB0ZXh0OiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG5cbiAgICAgIC8vICgyKSBCdWlsZCBhIG5ldyA8ZGl2PiBmb3IgdGhpcyBsaW5lXG4gICAgICBjb25zdCBsaW5lID0gdGhpcy5jb25zb2xlRWwuY3JlYXRlRGl2KCk7XG4gICAgICBPYmplY3QuYXNzaWduKGxpbmUuc3R5bGUsIHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLFxuICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgbWFyZ2luOiAnMnB4IDAnLFxuICAgICAgICBvcGFjaXR5OiAnMS4wJyxcbiAgICAgICAgdHJhbnNpdGlvbjogJ29wYWNpdHkgMC4ycyBlYXNlJyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyAoMykgTGVmdDogdGhlIG1lc3NhZ2UgdGV4dFxuICAgICAgbGluZS5jcmVhdGVTcGFuKHsgdGV4dCB9KTtcblxuICAgICAgLy8gKDQpIFJpZ2h0OiBcdTIwMUN1bmRvXHUyMDFEIGJ1dHRvblxuICAgICAgY29uc3QgdW5kb0J0biA9IGxpbmUuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ3VuZG8nLCBjbHM6ICdtb2Qtc21hbGwnIH0pO1xuICAgICAgT2JqZWN0LmFzc2lnbih1bmRvQnRuLnN0eWxlLCB7XG4gICAgICAgIG1hcmdpbkxlZnQ6ICcwLjVlbScsXG4gICAgICAgIGZvbnRTaXplOiAnMC43NWVtJyxcbiAgICAgICAgcGFkZGluZzogJzJweCA0cHgnLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgIH0pO1xuICAgICAgdW5kb0J0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjYiA9IHRoaXMuY2hlY2tib3hNYXBbZnVsbFBhdGhdO1xuICAgICAgICBpZiAoY2IpIHtcbiAgICAgICAgICBjYi5jaGVja2VkID0gIWNiLmNoZWNrZWQ7XG4gICAgICAgICAgdGhpcy5lbmZvcmNlRGVwZW5kZW5jaWVzKGZ1bGxQYXRoLCBjYi5jaGVja2VkKTtcbiAgICAgICAgICB0aGlzLmZhZGVBbGxFeGNlcHRDdXJyZW50QmF0Y2goKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gKDUpIFNjcm9sbCB0aGUgY29uc29sZSB0byBib3R0b21cbiAgICAgIHRoaXMuY29uc29sZUVsLnNjcm9sbFRvcCA9IHRoaXMuY29uc29sZUVsLnNjcm9sbEhlaWdodDtcbiAgICAgIHJldHVybiBsaW5lO1xuICAgIH1cblxuICAgIC8qKiBGYWRlIG91dCBldmVyeSBjb25zb2xlIGxpbmUgdGhhdCBpcyAqbm90KiBwYXJ0IG9mIGN1cnJlbnRCYXRjaExpbmVzLiAqL1xuICAgIHByaXZhdGUgZmFkZUFsbEV4Y2VwdEN1cnJlbnRCYXRjaCgpIHtcbiAgICAgIGNvbnN0IHRvdGFsID0gdGhpcy5jb25zb2xlRWwuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5jb25zb2xlRWwuY2hpbGRyZW5baV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRCYXRjaExpbmVzLmluY2x1ZGVzKGNoaWxkKSkge1xuICAgICAgICAgIGNoaWxkLnN0eWxlLm9wYWNpdHkgPSAnMS4wJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGlsZC5zdHlsZS5vcGFjaXR5ID0gJzAuNic7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAoNCkgRmluYWxseSwgb3BlbiB0aGUgbW9kYWxcbiAgbmV3IEN1c3RvbUluc3RhbGxNb2RhbChhcHApLm9wZW4oKTtcbn1cbiIsICJpbXBvcnQgeyBWYXVsdCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tICdjcnlwdG8nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xraXRGaWxlQ2FjaGVFbnRyeSB7XG5cdGhhc2g6IHN0cmluZztcblx0Z2l0aHViUGF0aDogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBUb29sa2l0RmlsZUNhY2hlID0gUmVjb3JkPHN0cmluZywgVG9vbGtpdEZpbGVDYWNoZUVudHJ5PjsgLy8gdmF1bHRQYXRoID0+IHtoYXNoLCBnaXRodWJQYXRofVxuXG5leHBvcnQgY2xhc3MgVG9vbGtpdEZpbGVDYWNoZU1hbmFnZXIge1xuXHRwcml2YXRlIHZhdWx0OiBWYXVsdDtcblx0cHJpdmF0ZSBjYWNoZTogVG9vbGtpdEZpbGVDYWNoZTtcblx0cHJpdmF0ZSBzYXZlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuXG5cdGNvbnN0cnVjdG9yKHZhdWx0OiBWYXVsdCwgaW5pdGlhbENhY2hlOiBUb29sa2l0RmlsZUNhY2hlIHwgdW5kZWZpbmVkLCBzYXZlQ2FsbGJhY2s6ICgpID0+IFByb21pc2U8dm9pZD4pIHtcblx0XHR0aGlzLnZhdWx0ID0gdmF1bHQ7XG5cdFx0dGhpcy5jYWNoZSA9IGluaXRpYWxDYWNoZSB8fCB7fTtcblx0XHR0aGlzLnNhdmUgPSBzYXZlQ2FsbGJhY2s7XG5cdH1cblxuXHRwcml2YXRlIGhhc2hDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShjb250ZW50KS5kaWdlc3QoJ2hleCcpO1xuXHR9XG5cblx0YXN5bmMgaXNVcFRvRGF0ZSh2YXVsdFBhdGg6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdC8vY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBDaGVja2luZyBpZiBcIiR7dmF1bHRQYXRofVwiIGlzIHVwIHRvIGRhdGUuYCk7XG5cdFxuXHRcdGNvbnN0IGVudHJ5ID0gdGhpcy5jYWNoZVt2YXVsdFBhdGhdO1xuXHRcdGlmICghZW50cnkpIHtcblx0XHRcdC8vY29uc29sZS5sb2coYFx1Mjc0QyBObyBjYWNoZWQgaGFzaCBmb3VuZCBmb3I6ICR7dmF1bHRQYXRofWApO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpO1xuXHRcdGlmICghZXhpc3RzKSB7XG5cdFx0XHQvL2NvbnNvbGUubG9nKGBcdTI3NEMgRmlsZSBkb2VzIG5vdCBleGlzdCBpbiB2YXVsdDogJHt2YXVsdFBhdGh9YCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcblx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5hZGFwdGVyLnJlYWQodmF1bHRQYXRoKTtcblx0XHRjb25zdCBsb2NhbEhhc2ggPSB0aGlzLmhhc2hDb250ZW50KGNvbnRlbnQpO1xuXHRcdGNvbnN0IGlzU2FtZSA9IGxvY2FsSGFzaCA9PT0gZW50cnkuaGFzaDtcblx0XG5cdFx0Ly9jb25zb2xlLmxvZyhgXHVEODNEXHVERDIyIExvY2FsIGhhc2g6ICAke2xvY2FsSGFzaH1gKTtcblx0XHQvL2NvbnNvbGUubG9nKGBcdUQ4M0RcdURDRTYgQ2FjaGVkIGhhc2g6ICR7ZW50cnkuaGFzaH1gKTtcblx0XHQvL2NvbnNvbGUubG9nKGlzU2FtZSA/IGBcdTI3MDUgRmlsZSBpcyB1cCB0byBkYXRlLmAgOiBgXHVEODNEXHVERDAxIEZpbGUgbmVlZHMgdXBkYXRlLmApO1xuXHRcblx0XHRyZXR1cm4gaXNTYW1lO1xuXHR9XG5cdFxuXG5cdGFzeW5jIHVwZGF0ZUNhY2hlKHZhdWx0UGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIGdpdGh1YlBhdGg6IHN0cmluZywgc2F2ZU5vdzogYm9vbGVhbiA9IHRydWUpIHtcblx0XHR0aGlzLmNhY2hlW3ZhdWx0UGF0aF0gPSB7XG5cdFx0XHRoYXNoOiB0aGlzLmhhc2hDb250ZW50KGNvbnRlbnQpLFxuXHRcdFx0Z2l0aHViUGF0aFxuXHRcdH07XG5cdFx0aWYgKHNhdmVOb3cpIGF3YWl0IHRoaXMuc2F2ZSgpO1xuXHR9XG5cblx0Z2V0Q2FjaGUoKTogVG9vbGtpdEZpbGVDYWNoZSB7XG5cdFx0cmV0dXJuIHRoaXMuY2FjaGU7XG5cdH1cblxuXHRnZXRUcmFja2VkRmlsZXMoKTogc3RyaW5nW10ge1xuXHRcdHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmNhY2hlKTtcblx0fVxuXG5cdGdldEdpdEh1YlBhdGgodmF1bHRQYXRoOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuXHRcdHJldHVybiB0aGlzLmNhY2hlW3ZhdWx0UGF0aF0/LmdpdGh1YlBhdGg7XG5cdH1cblxuXHRyZXNldENhY2hlKCkge1xuXHRcdHRoaXMuY2FjaGUgPSB7fTtcblx0fVxuXG5cdGFzeW5jIHJlbW92ZUZyb21DYWNoZSh2YXVsdFBhdGg6IHN0cmluZykge1xuXHRcdGRlbGV0ZSB0aGlzLmNhY2hlW3ZhdWx0UGF0aF07XG5cdFx0YXdhaXQgdGhpcy5zYXZlKCk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBub3JtYWxpemVQYXRoLCBWYXVsdCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IGRpcm5hbWUsIGJhc2VuYW1lLCBqb2luIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBwcm9taXNlcyBhcyBmcyB9IGZyb20gJ2ZzJztcblxuZXhwb3J0IGNsYXNzIEJhY2t1cE1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHZhdWx0OiBWYXVsdCkge31cblxuICAvKipcbiAgICogTWlycm9yIGV2ZXJ5IHZhdWx0IGZpbGUgKGV4Y2x1ZGluZyAub2JzaWRpYW4gJiBiYWNrdXBzKSBpbnRvIGEgdGltZXN0YW1wZWQgZm9sZGVyLFxuICAgKiB0aGVuIHBydW5lIHRvIGtlZXAgb25seSB0aGUgbGF0ZXN0IE4gZnVsbCBzbmFwc2hvdHMuXG4gICAqIEBwYXJhbSBsYWJlbCBPcHRpb25hbCBzdWZmaXggZm9yIHRoZSBiYWNrdXAgZm9sZGVyIG5hbWVcbiAgICogQHBhcmFtIG1heEZ1bGxCYWNrdXBzIE51bWJlciBvZiBmdWxsIHNuYXBzaG90cyB0byByZXRhaW4gKGRlZmF1bHQ6IDUpXG4gICAqL1xuICBhc3luYyBiYWNrdXBWYXVsdE1pcnJvcihsYWJlbD86IHN0cmluZywgbWF4RnVsbEJhY2t1cHM6IG51bWJlciA9IDUpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHRzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1s6Ll0vZywgJy0nKTtcbiAgICBjb25zdCB0YWcgPSBsYWJlbCA/IGAtJHtsYWJlbH1gIDogJyc7XG4gICAgY29uc3QgYmFzZSA9IG5vcm1hbGl6ZVBhdGgoYC52YXVsdC1iYWNrdXBzL2Z1bGwvJHt0c30ke3RhZ31gKTtcbiAgICBjb25zb2xlLmxvZyhgW0JhY2t1cE1hbmFnZXJdIFN0YXJ0aW5nIG1pcnJvciBiYWNrdXA6ICR7YmFzZX1gKTtcblxuICAgIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKGJhc2UpO1xuXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIHRoaXMudmF1bHQuZ2V0RmlsZXMoKSkge1xuICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKCcudmF1bHQtYmFja3Vwcy8nKSB8fCBmaWxlLnBhdGguc3RhcnRzV2l0aCgnLm9ic2lkaWFuLycpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMudmF1bHQucmVhZChmaWxlKTtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5vcm1hbGl6ZVBhdGgoYCR7YmFzZX0vJHtmaWxlLnBhdGh9YCk7XG4gICAgICBhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyhkaXJuYW1lKHRhcmdldCkpO1xuICAgICAgYXdhaXQgdGhpcy52YXVsdC5jcmVhdGUodGFyZ2V0LCBjb250ZW50KTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnW0JhY2t1cE1hbmFnZXJdIE1pcnJvciBiYWNrdXAgY29tcGxldGUuIFBydW5pbmcgb2xkIGJhY2t1cHMuLi4nKTtcbiAgICBhd2FpdCB0aGlzLnBydW5lRnVsbEJhY2t1cHMoYmFzZSwgbWF4RnVsbEJhY2t1cHMpO1xuICAgLy8gY29uc29sZS5sb2coJ1tCYWNrdXBNYW5hZ2VyXSBQcnVuaW5nIGNvbXBsZXRlLicpO1xuICAgIHJldHVybiBiYXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIExlZ2FjeSBhbGlhcyBmb3IgbWlycm9yLWJhc2VkIGJhY2t1cHNcbiAgICovXG4gIGFzeW5jIGJhY2t1cFZhdWx0VG9aaXAobGFiZWw/OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLmJhY2t1cFZhdWx0TWlycm9yKGxhYmVsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIG9sZGVzdCBmdWxsIGJhY2t1cCBmb2xkZXJzLCBrZWVwaW5nIG9ubHkgdGhlIG1vc3QgcmVjZW50IGBrZWVwYCBzbmFwc2hvdHMuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHBydW5lRnVsbEJhY2t1cHMoY3VycmVudFBhdGg6IHN0cmluZywga2VlcDogbnVtYmVyKSB7XG4gICAgY29uc3Qgcm9vdCA9IG5vcm1hbGl6ZVBhdGgoJy52YXVsdC1iYWNrdXBzL2Z1bGwnKTtcbiAgIC8vIGNvbnNvbGUubG9nKGBbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3Vwczogcm9vdD0ke3Jvb3R9LCBrZWVwPSR7a2VlcH1gKTtcblxuICAgIC8vIGVuc3VyZSB0aGUgcm9vdCBleGlzdHNcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyhyb290KTtcbiAgICBpZiAoIShhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHJvb3QpKSkge1xuICAgICAvLyBjb25zb2xlLmxvZygnW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IHJvb3QgZm9sZGVyIG5vdCBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGdldCBmb2xkZXIgbmFtZXNcbiAgICBjb25zdCBsaXN0aW5nID0gYXdhaXQgdGhpcy52YXVsdC5hZGFwdGVyLmxpc3Qocm9vdCk7XG4gICAgY29uc3QgcmF3Rm9sZGVyczogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KGxpc3RpbmcpXG4gICAgICA/IGxpc3RpbmcgYXMgc3RyaW5nW11cbiAgICAgIDogJ2ZvbGRlcnMnIGluIGxpc3RpbmdcbiAgICAgID8gKGxpc3RpbmcgYXMgYW55KS5mb2xkZXJzXG4gICAgICA6IFtdO1xuICAgIGNvbnN0IGZvbGRlcnMgPSByYXdGb2xkZXJzLm1hcChmID0+IGJhc2VuYW1lKGYpKTtcbiAgICAvL2NvbnNvbGUubG9nKCdbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3VwczogZm9sZGVycyAoYmFzZW5hbWVzKTonLCBmb2xkZXJzKTtcblxuICAgIC8vIHNvcnQgZGVzY2VuZGluZyBzbyBuZXdlc3QgZmlyc3RcbiAgICBjb25zdCBzb3J0ZWQgPSBbLi4uZm9sZGVyc10uc29ydCgoYSwgYikgPT4gYi5sb2NhbGVDb21wYXJlKGEpKTtcbiAgICAvL2NvbnNvbGUubG9nKCdbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3Vwczogc29ydGVkOicsIHNvcnRlZCk7XG5cbiAgICAvLyBjb21wdXRlIGZpbGVzeXN0ZW0gcm9vdCB0byByZW1vdmUgZnJvbVxuICAgIGNvbnN0IGFkYXB0ZXJBbnkgPSB0aGlzLnZhdWx0LmFkYXB0ZXIgYXMgYW55O1xuICAgIGNvbnN0IGZzUm9vdCA9IGFkYXB0ZXJBbnkuYmFzZVBhdGggPyBqb2luKGFkYXB0ZXJBbnkuYmFzZVBhdGgsIHJvb3QpIDogbnVsbDtcbiAgICBpZiAoIWZzUm9vdCkge1xuICAgICAgLy9jb25zb2xlLndhcm4oJ1tCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiBjYW5ub3QgZGV0ZXJtaW5lIEZTIHJvb3QsIHNraXBwaW5nIHBydW5lJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIG9sZCBzbmFwc2hvdHMgYmV5b25kIGBrZWVwYFxuICAgIGZvciAobGV0IGkgPSBrZWVwOyBpIDwgc29ydGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBuYW1lID0gc29ydGVkW2ldO1xuICAgICAgY29uc3QgdmF1bHRQYXRoID0gbm9ybWFsaXplUGF0aChgJHtyb290fS8ke25hbWV9YCk7XG4gICAgICBpZiAodmF1bHRQYXRoID09PSBjdXJyZW50UGF0aCkge1xuICAgICAgIC8vIGNvbnNvbGUubG9nKGBbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3Vwczogc2tpcHBpbmcgY3VycmVudCAke25hbWV9YCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgLy9jb25zb2xlLmxvZyhgW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IHJlbW92aW5nIEZTIGZvbGRlcjogJHtuYW1lfWApO1xuICAgICAgY29uc3QgcmVtb3ZlUGF0aCA9IGpvaW4oZnNSb290LCBuYW1lKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGZzLnJtKHJlbW92ZVBhdGgsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhgW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IHJlbW92ZWQgJHtyZW1vdmVQYXRofWApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoYFtCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiBmYWlsZWQgdG8gcmVtb3ZlICR7cmVtb3ZlUGF0aH1gLCBlKTtcbiAgICAgIH1cbiAgICAgIC8vIGFsc28gY2xlYW4gdXAgdmF1bHQgaW5kZXhcbiAgICAgIGNvbnN0IGFmID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodmF1bHRQYXRoKTtcbiAgICAgIGlmIChhZikge1xuICAgICAgICBhd2FpdCB0aGlzLnZhdWx0LmRlbGV0ZShhZik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY3Vyc2l2ZWx5IGVuc3VyZXMgdGhhdCBhIGRpcmVjdG9yeSBleGlzdHMgaW4gdGhlIHZhdWx0LlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBlbnN1cmVGb2xkZXJFeGlzdHMoZm9sZGVyUGF0aDogc3RyaW5nKSB7XG4gICAgaWYgKCFmb2xkZXJQYXRoIHx8IChhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZvbGRlclBhdGgpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwYXJlbnQgPSBkaXJuYW1lKGZvbGRlclBhdGgpO1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKHBhcmVudCk7XG4gICAgYXdhaXQgdGhpcy52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XG4gIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUEseUJBQUFBO0FBQUEsRUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQyxtQkFTTzs7O0FDVFAsSUFBQUMsbUJBaUJPOzs7QUNoQlAsSUFBQUMsbUJBQW9EOzs7QUN1QjNDLElBQU0scUJBQWdDO0FBQUEsRUFDM0M7QUFBQSxJQUNFLElBQUk7QUFBQSxJQUNKLE9BQU87QUFBQSxJQUNQLE1BQU07QUFBQSxJQUNOLFFBQVE7QUFBQSxJQUNSLFdBQVc7QUFBQSxJQUNYLFlBQVksQ0FBQyxFQUFFO0FBQUEsRUFDakI7QUFBQSxFQUNBO0FBQUEsSUFDRSxJQUFJO0FBQUEsSUFDSixPQUFPO0FBQUEsSUFDUCxNQUFNO0FBQUEsSUFDTixRQUFRO0FBQUEsSUFDUixXQUFXO0FBQUEsRUFDYjtBQUlGOzs7QUMzQ0Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBbUM7OztBQ0duQyxJQUFNLGtCQUEwQztBQUFBO0FBQUEsRUFFOUMsS0FBSztBQUFBLEVBQ0wsSUFBSztBQUFBLEVBQ0wsS0FBSztBQUFBO0FBQUEsRUFHTCxLQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixNQUFNO0FBQUEsRUFDTixPQUFPO0FBQUEsRUFDUCxLQUFNO0FBQUEsRUFDTixLQUFNO0FBQUEsRUFDTixPQUFNO0FBQUEsRUFDTixLQUFNO0FBQUE7QUFBQSxFQUdOLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLE1BQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLE1BQUs7QUFBQTtBQUFBLEVBR0wsS0FBVTtBQUFBLEVBQ1YsSUFBVTtBQUFBLEVBQ1YsV0FBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsUUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsYUFBWTtBQUFBLEVBQ1osYUFBWTtBQUFBLEVBQ1osS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsUUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsUUFBVTtBQUFBLEVBQ1YsSUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsUUFBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsSUFBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsUUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsSUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsSUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsV0FBWTtBQUFBLEVBQ1osVUFBWTtBQUFBLEVBQ1osS0FBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsTUFBVTtBQUFBLEVBQ1YsV0FBWTtBQUFBLEVBQ1osU0FBVTtBQUFBLEVBQ1YsWUFBWTtBQUFBLEVBQ1osYUFBWTtBQUFBLEVBQ1osS0FBVTtBQUFBLEVBQ1YsT0FBVTtBQUFBLEVBQ1YsUUFBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsS0FBVTtBQUFBLEVBQ1YsS0FBVTtB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SztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsTUFBSztBQUFBLEVBQ0wsS0FBSztBQUFBLEVBQ0wsTUFBSztBQUFBO0FBQUEsRUFHTCxLQUFVO0FBQUEsRUFDVixJQUFVO0FBQUEsRUFDVixXQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixRQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixhQUFZO0FBQUEsRUFDWixhQUFZO0FBQUEsRUFDWixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixRQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixRQUFVO0FBQUEsRUFDVixJQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixRQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixJQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixPQUFVO0FBQUEsRUFDVixNQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixRQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFDVixJQUFVO0FBQUEsRUFDVixLQUFVO0FBQUEsRUFD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QSxFQUNILEdBQUc7QUFDTDtBQUVPLElBQU1DLGlCQUF1QztBQUFBLEVBQ2xELElBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLFdBQVc7QUFBQSxFQUNYLFVBQVU7QUFBQSxFQUNWLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLGFBQWE7QUFBQSxFQUNiLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLEdBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFBQSxFQUNMLEtBQUs7QUFBQSxFQUNMLElBQUs7QUFDUDtBQUdBLElBQU1DLGlCQUF1QztBQUFBO0FBQUEsRUFFM0MsS0FBTztBQUFBLEVBQ1AsS0FBTztBQUFBLEVBQ1AsS0FBTztBQUFBLEVBQ1AsS0FBTztBQUFBLEVBQ1AsTUFBTztBQUFBLEVBQ1AsTUFBTztBQUFBLEVBQ1AsTUFBTztBQUFBLEVBQ1AsT0FBTztBQUFBO0FBQUEsRUFFUCxNQUFPO0FBQUE7QUFBQSxFQUdQLE1BQU87QUFBQSxFQUNQLE1BQU87QUFBQSxFQUNQLE1BQU87QUFBQSxFQUNQLE9BQU87QUFBQSxFQUNQLE1BQU87QUFBQTtBQUFBLEVBR1AsTUFBTTtBQUFBO0FBQUEsRUFFTixLQUFNO0FBQUEsRUFDTixNQUFNO0FBQUE7QUFBQSxFQUdOLE1BQU87QUFBQSxFQUNQLEtBQU87QUFBQSxFQUNQLE9BQU87QUFBQSxFQUNQLE1BQU87QUFBQTtBQUFBLEVBR1AsS0FBTztBQUFBO0FBQUEs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Z0JBQWdCO0FBRXJCLHlCQUFtQjtBQUFBLElBQ3JCLFNBQVMsS0FBSztBQUNaLGNBQVEsTUFBTSwrQkFBMEIsR0FBRztBQUFBLElBQzdDLFVBQUU7QUFFQSxrQkFBWSxNQUFNO0FBQ2xCLFVBQUksS0FBSyxZQUFhLE1BQUssWUFBWSxRQUFRO0FBQy9DLFVBQUk7QUFBQSxRQUNGLG1CQUNJLHVEQUNBO0FBQUEsTUFDTjtBQUFBLElBQ0Y7QUFBQSxFQUNGO0FBQUE7QUFBQSxFQUdBLE1BQU0scUJBQW9DO0FBQ3hDLFVBQU0sRUFBRSxtQkFBbUIsaUJBQWlCLElBQUksS0FBSztBQUVyRCxRQUFJLENBQUMscUJBQXFCLGlCQUFpQixXQUFXLEdBQUc7QUFDdkQsVUFBSSx3QkFBTyx1REFBNkM7QUFDeEQ7QUFBQSxJQUNGO0FBRUEsVUFBTSxPQUEyQixDQUFDO0FBQ2xDLFFBQUksbUJBQW1CO0FBQ3JCLFdBQUssS0FBSyxrQkFBa0I7QUFBQSxRQUMxQixLQUFLLEtBQUs7QUFBQSxRQUNWLFlBQVk7QUFBQSxRQUNaLFlBQVk7QUFBQSxNQUNkLENBQUMsQ0FBQztBQUFBLElBQ0o7QUFDRixlQUFXLE9BQU8sa0JBQWtCO0FBQ2xDLFlBQU0sY0FBYyxzQkFBc0IsR0FBRztBQUM3QyxXQUFLLEtBQUssa0JBQWtCO0FBQUEsUUFDMUIsS0FBWSxLQUFLO0FBQUEsUUFDakIsWUFBWTtBQUFBLFFBQ1osWUFBWSxzQkFBc0IsV0FBVztBQUFBLE1BQy9DLENBQUMsQ0FBQztBQUFBLElBQ0o7QUFFRSxVQUFNLFFBQVEsSUFBSSxJQUFJO0FBQ3RCLFFBQUksd0JBQU8saUNBQTRCO0FBQUEsRUFDekM7QUFJQTsiLAogICJuYW1lcyI6IFsiSW5zdGFsbGluZ01vZGFsIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImNhcGl0YWxpemVGaXJzdCIsICJTSVpFX01BUCIsICJ1bmlmaWVkU2tpbGxzIiwgIlNJWkVfTUFQIiwgInVuaWZpZWRTa2lsbHMiLCAiZmVhdHVyZXNCeUxldmVsIiwgImNvZGUiLCAiY2FwIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbnN0YWxsZXJfZXhwb3J0cyIsICJpbXBvcnRFZGl0aW9uRGF0YSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiU09VUkNFX05BTUVfTUFQIiwgImdldEZ1bGxTb3VyY2VOYW1lIiwgInJlcGxhY2U1ZVRhZ3MiLCAiY2FwaXRhbGl6ZUVhY2giLCAiY2FwaXRhbGl6ZSIsICJyZW5kZXJNYXJrZG93blRhYmxlIiwgInJlcGxhY2U1ZVRhZ3MiLCAiZm9ybWF0RW50cnkiLCAicmVwbGFjZTVlVGFncyIsICJyZW5kZXJNYXJrZG93blRhYmxlIiwgInNraXBwZWRNb25zdGVycyIsICJTSVpFX01BUCIsICJBTElHTk1FTlRfTUFQIiwgImNhcGl0YWxpemVGaXJzdCIsICJmb3JtYXRTaXplQWJicmV2IiwgImZvcm1hdEFsaWdubWVudEFiYnJldiIsICJSQVdfTlBDUyIsICJOT1JNQUxJWkVEX05QQ19OQU1FUyIsICJub3JtYWxpemVOYW1lIiwgImNhdGVnb3JpemVDcmVhdHVyZSIsICJyZW5kZXJBYmlsaXRpZXNUYWJsZSIsICJyZW5kZXJFbnRyeSIsICJyZXBsYWNlNWVUYWdzIiwgInBhcnNlQmVzdGlhcnlGaWxlIiwgImdldEZ1bGxTb3VyY2VOYW1lIiwgImJ1aWxkRk0iLCAiQkVTVElBUllfTUVUQV9ERUZTIiwgInNlcmlhbGl6ZUZyb250bWF0dGVyIiwgIkZNX0ZJRUxEUyIsICJjYXBpdGFsaXplRmlyc3QiLCAiREFNQUdFX1RZUEVfTUFQIiwgIlBST1BFUlRZX01BUCIsICJJVEVNX1RZUEVfTUFQIiwgImNvZGVGb2xkZXJNYXAiLCAicGFyc2VJdGVtc0ZpbGUiLCAiYnVpbGRGTSIsICJJVEVNX01FVEFfREVGUyIsICJzZXJpYWxpemVGcm9udG1hdHRlciIsICJyZXBsYWNlNWVUYWdzIiwgImNhcCIsICJBQklMSVRZX0ZVTEwiLCAiU0laRV9NQVAiLCAiRk1fRklFTERTIiwgInVuaWZpZWRBcm1vclByb2ZzIiwgInVuaWZpZWRXZWFwb25Qcm9mcyIsICJyZXBsYWNlNWVUYWdzIiwgInVuaWZpZWRTYXZlcyIsICJ1bmlmaWVkU2tpbGxzIiwgInVuaWZpZWRUb29sUHJvZnMiLCAiQUxMX0ZJRUxEX0RFRlMiLCAiZ2V0RnVsbFNvdXJjZU5hbWUiLCAiU0tJTExfT1BUSU9OUyIsICJTQ0hPT0xfTUFQIiwgImZvcm1hdFRpbWUiLCAiZm9ybWF0UmFuZ2UiLCAiZm9ybWF0RHVyYXRpb24iLCAiZm9ybWF0QWxpZ25tZW50QWJicmV2IiwgIklURU1fVFlQRV9NQVAiLCAiUFJPUEVSVFlfTUFQIiwgImJ1aWxkRk0iLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiU1BFTExfS0VZUyIsICJTUEVDSUVTX0tFWVMiLCAiSVRFTV9LRVlTIiwgIkJFU1RJQVJZX0tFWVMiLCAiQ0xBU1NfS0VZUyIsICJCQUNLR1JPVU5EX0tFWVMiLCAiRkVBVFNfS0VZUyIsICJTUEVMTF9NRVRBX0RFRlMiLCAiQUxMX0ZJRUxEX0RFRlMiLCAiU1BFQ0lFU19NRVRBX0RFRlMiLCAiSVRFTV9NRVRBX0RFRlMiLCAiQkVTVElBUllfTUVUQV9ERUZTIiwgIkNMQVNTX01FVEFfREVGUyIsICJCQUNLR1JPVU5EX01FVEFfREVGUyIsICJGRUFUU19NRVRBX0RFRlMiLCAiU0NIT09MX01BUCIsICJvcmRpbmFsIiwgImZvcm1hdFJhbmdlIiwgImZvcm1hdFRpbWUiLCAiZm9ybWF0RHVyYXRpb24iLCAiZm9ybWF0Q29tcG9uZW50cyIsICJwYXJzZVNwZWxsc0ZpbGUiLCAiZ2V0RnVsbFNvdXJjZU5hbWUiLCAiYnVpbGRGTSIsICJTUEVMTF9NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiZm9ybWF0RW50cnkiLCAic2x1ZyIsICJCTE9DS0VEX1RSQUlUUyIsICJwYXJzZVNwZWNpZXNGaWxlIiwgImJ1aWxkRk0iLCAiU1BFQ0lFU19NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAiU0laRV9NQVAiLCAiRk1fRklFTERTIiwgInJlbmRlck1hcmtkb3duVGFibGUiLCAicmVwbGFjZTVlVGFncyIsICJmb3JtYXRFbnRyeSIsICJpc1R5cGVkRW50cnkiLCAiZm9ybWF0RmVhdHVyZUxpbmsiLCAiT1BUX0ZFQVRVUkVfVFlQRV9UT19GVUxMIiwgInBhcnNlQ2xhc3NGaWxlIiwgImJ1aWxkRk0iLCAiQ0xBU1NfTUVUQV9ERUZTIiwgInNlcmlhbGl6ZUZyb250bWF0dGVyIiwgInVuaWZpZWRXZWFwb25Qcm9mcyIsICJ1bmlmaWVkVG9vbFByb2ZzIiwgIlNLSUxMX09QVElPTlMiLCAidW5pZmllZFNraWxscyIsICJmZWF0dXJlc0J5TGV2ZWwiLCAicmVwbGFjZTVlVGFncyIsICJmb3JtYXRGZWF0dXJlTGluayIsICJyZW5kZXJNYXJrZG93blRhYmxlIiwgImZvcm1hdEVudHJ5IiwgIk9QVF9GRUFUVVJFX1RZUEVfVE9fRlVMTCIsICJpc1R5cGVkRW50cnkiLCAiY29kZSIsICJwYXJzZUFjdGlvbnNGaWxlIiwgInJlcGxhY2U1ZVRhZ3MiLCAicGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlIiwgInBhcnNlU2Vuc2VzRmlsZSIsICJwYXJzZVNraWxsc0ZpbGUiLCAicGFyc2VGZWF0c0ZpbGUiLCAiYnVpbGRGTSIsICJGRUFUU19NRVRBX0RFRlMiLCAic2VyaWFsaXplRnJvbnRtYXR0ZXIiLCAicmVwbGFjZTVlVGFncyIsICJwYXJzZUJhY2tncm91bmRzRmlsZSIsICJidWlsZEZNIiwgIkJBQ0tHUk9VTkRfTUVUQV9ERUZTIiwgInNlcmlhbGl6ZUZyb250bWF0dGVyIiwgImNhcCIsICJodW1hbml6ZSIsICJmbXRJdGVtIiwgInJlcGxhY2U1ZVRhZ3MiLCAicmVuZGVyTWFya2Rvd25UYWJsZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAibGlzdFNwZWxsRmlsZXNGcm9tR2l0SHViIiwgImxpc3RCZXN0aWFyeUZpbGVzRnJvbUdpdEh1YiIsICJJVEVNX0pTT05fRklMRVMiLCAibGlzdEl0ZW1GaWxlc0Zyb21HaXRIdWIiLCAibGlzdENsYXNzRmlsZXNGcm9tR2l0SHViIiwgImVuc3VyZUZvbGRlciIsICJpbXBvcnRFZGl0aW9uRGF0YSIsICJwYXJzZVNwZWxsc0ZpbGUiLCAicGFyc2VCZXN0aWFyeUZpbGUiLCAicGFyc2VJdGVtc0ZpbGUiLCAicGFyc2VTcGVjaWVzRmlsZSIsICJyZXMiLCAianNvbiIsICJtZEZpbGVzIiwgInBhcnNlQ2xhc3NGaWxlIiwgInBhcnNlQWN0aW9uc0ZpbGUiLCAicGFyc2VDb25kaXRpb25zRGlzZWFzZXNGaWxlIiwgInBhcnNlU2Vuc2VzRmlsZSIsICJwYXJzZVNraWxsc0ZpbGUiLCAicGFyc2VGZWF0c0ZpbGUiLCAicGFyc2VCYWNrZ3JvdW5kc0ZpbGUiLCAiaW5zdGFsbGVyX2V4cG9ydHMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJwYXRoIiwgImltcG9ydF9vYnNpZGlhbiIsICJmcyIsICJJbnN0YWxsaW5nTW9kYWwiLCAicGF0aCIsICJjb250ZW50Il0KfQo=
