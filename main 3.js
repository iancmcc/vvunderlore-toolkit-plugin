/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  InstallingModal: () => InstallingModal2,
  default: () => VVunderloreToolkitPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian7 = require("obsidian");

// src/settings.ts
var import_obsidian5 = require("obsidian");

// src/firstinstallconfirm.ts
var import_obsidian3 = require("obsidian");

// src/editions.ts
var AVAILABLE_EDITIONS = [
  {
    id: "5e-2014",
    label: "D&D 5E (2014)",
    repo: "5etools-mirror-3/5etools-2014-src",
    parser: "5e-json",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-2014-src/main/data",
    categories: [""]
  },
  {
    id: "5e-2025",
    label: "D&D 5E (2025)",
    repo: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-src/main/data",
    parser: "5e-json",
    sourceUrl: "5etools-mirror-3/5etools-src"
  },
  {
    id: "test",
    label: "Test Ruleset",
    repo: "5etools-mirror-3/5etools-2014-src",
    parser: "5e-json",
    sourceUrl: "https://raw.githubusercontent.com/5etools-mirror-3/5etools-2014-src/main/data",
    categories: ["spells", "bestiary"]
  }
];

// src/parsers/5e-json/installer.ts
var installer_exports = {};
__export(installer_exports, {
  importEditionData: () => importEditionData
});
var import_obsidian = require("obsidian");

// src/parsers/5e-json/helpers/sourceMap.ts
var SOURCE_NAME_MAP = {
  // Core rulebooks
  PHB: "Player's Handbook",
  MM: "Monster Manual",
  DMG: "Dungeon Master's Guide",
  // Official expansions & adventure modules
  CoS: "Curse of Strahd",
  OotA: "Out of the Abyss",
  PotA: "Princes of the Apocalypse",
  HotDQ: "Hoard of the Dragon Queen",
  RoT: "Rise of Tiamat",
  SKT: "Storm King's Thunder",
  TftYP: "Tales from the Yawning Portal",
  ToA: "Tomb of Annihilation",
  // Supplemental guides
  XGE: "Xanathar's Guide to Everything",
  VGM: "Volo's Guide to Monsters",
  TCE: "Tasha's Cauldron of Everything",
  EGW: "Eberron: Rising from the Last War",
  ERLW: "Explorer's Guide to Wildemount",
  MTF: "Monsters of the Multiverse",
  VRGR: "Van Richten's Guide to Ravenloft",
  // Additional sourcebooks
  AAG: "Astral Adventurer\u2019s Guide",
  AI: "Acquisitions Incorporated",
  AitFRAVFT: "Adventures in the Forgotten Realms: A Visual Field Test",
  BMT: "Big Monster Tome",
  DoDk: "Dragon of Darkkeep",
  FTD: "Fizban\u2019s Treasury of Dragons",
  GGR: "Guildmaster\u2019s Guide to Ravnica",
  GHLoE: "Ghosts of the Horizon: Light Over Elensaria",
  IDRotF: "Icewind Dale: Rime of the Frostmaiden",
  LLK: "Lost Laboratory of Kwalish",
  SatO: "Sapphire of Truth",
  SCC: "Strixhaven: Curriculum of Chaos",
  TDCSR: "The Dungeon Coach\u2019s Rulebook"
};
function getFullSourceName(abbrev, editionId) {
  let name = SOURCE_NAME_MAP[abbrev] ?? abbrev;
  if (abbrev === "PHB") {
    if (editionId?.includes("2014")) name += " (2014)";
    else if (editionId?.includes("2025")) name += " (2025)";
  }
  return name;
}

// src/parsers/5e-json/helpers/tagReplacer.ts
function replace5eTags(input) {
  let text;
  if (Array.isArray(input)) {
    text = input.join(" ");
  } else if (typeof input === "string") {
    text = input;
  } else {
    text = String(input ?? "");
  }
  return text.replace(
    /\{@(spell|item|creature|race) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, __, name) => `[[${capitalizeEach(name)}]]`
  ).replace(
    /\{@(condition|status|action|skill) ([^|}]+)(?:\|[^}]+)?\}/g,
    (_, tag, name) => `[[${capitalize(tag)}s#${name}|${capitalizeEach(name)}]]`
  ).replace(
    /\{@classFeature ([^|}]+)\|([^|}]+)(?:\|[^}]+)?\}/g,
    (_, feature, cls) => `[[${cls}#${feature}]]`
  ).replace(/\{@(book|filter) ([^|}]+)(?:\|[^}]+)?\}/g, (_, __, txt) => txt).replace(/\{@note ([^}]+)\}/g, (_, note) => `*${note}*`).replace(/\{@(damage|dice|dc|hit|sense) ([^}]+)\}/g, (_, __, value) => value).replace(/\{@chance ([^|}]+)(?:\|[^}]+)?\}/g, (_, value) => `${value}%`).replace(/\{@quickref ([^|}]+)(?:\|[^|]*\|[^}]*)?\}/g, (_, term) => {
    const known = [
      "difficult terrain",
      "total cover",
      "half cover",
      "three-quarters cover",
      "heavily obscured",
      "lightly obscured"
    ];
    return known.includes(term.toLowerCase()) ? `[[Rules#${capitalizeEach(term)}]]` : term;
  }).replace(/\{@recharge\s*([^}]+)\}/g, (_, num) => `(recharge: ${num.trim()})`).replace(/\{@(scaledice|scaledamage)[^}]*\|([^|}]+)\}/g, (_, __, value) => value).replace(/\{@d20[^}]*\}/g, "").replace(/\{@[^}]+\}/g, "");
}
function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
function capitalizeEach(str) {
  return str.split(" ").map(capitalize).join(" ");
}

// src/parsers/5e-json/helpers/markdownTable.ts
function renderMarkdownTable(entry) {
  if (entry.type !== "table" || !Array.isArray(entry.rows)) return "";
  const caption = entry.caption ? `##### ${entry.caption}
` : "";
  const headers = (entry.colLabels ?? []).map((h) => replace5eTags(h.trim()));
  const headerRow = `| ${headers.join(" | ")} |`;
  const dividerRow = `| ${headers.map(() => ":--").join(" | ")} |`;
  const bodyRows = entry.rows.map((row) => {
    const cells = row.map((cell) => {
      if (typeof cell === "string") return replace5eTags(cell);
      if (typeof cell === "object") {
        if (cell.roll?.exact !== void 0) return `${cell.roll.exact}`;
        if (cell.roll?.min !== void 0 && cell.roll?.max !== void 0) {
          return `${cell.roll.min}\u2013${cell.roll.max}`;
        }
        return replace5eTags(JSON.stringify(cell));
      }
      return replace5eTags(String(cell));
    });
    return `| ${cells.join(" | ")} |`;
  });
  return `${caption}${headerRow}
${dividerRow}
${bodyRows.join("\n")}`;
}

// src/parsers/5e-json/helpers/formatEntry.ts
function formatEntry(entry) {
  if (typeof entry === "string") {
    const cleaned = entry.trim();
    if (!cleaned || cleaned === "}") return "";
    return replace5eTags(cleaned);
  }
  if (entry.type === "entries" && Array.isArray(entry.entries)) {
    const body = entry.entries.map(formatEntry).filter((str) => str.trim().length > 0).join("\n\n");
    return entry.name ? `##### ${entry.name}
${body}` : body;
  }
  if (entry.type === "list" && Array.isArray(entry.items)) {
    return entry.items.map((i) => `- ${replace5eTags(typeof i === "string" ? i : JSON.stringify(i))}`).join("\n");
  }
  if (entry.type === "table" && Array.isArray(entry.rows)) {
    return renderMarkdownTable(entry);
  }
  if (entry.type === "quote" && Array.isArray(entry.entries)) {
    const quote = entry.entries.map(formatEntry).join(" ").trim();
    const author = entry.by ? ` \u2014 ${entry.by}` : "";
    return `*"${quote}${author}"*`;
  }
  if (entry.type === "inset" && Array.isArray(entry.entries)) {
    const inset = entry.entries.map(formatEntry).join("\n").trim();
    return `> ${inset.replace(/\n/g, "\n> ")}`;
  }
  if (entry.type === "refClassFeature" && typeof entry.classFeature === "string") {
    const [name] = entry.classFeature.split("|");
    const anchor = name.replace(/[^\w\s-]/g, "").replace(/\s+/g, "-").toLowerCase();
    return `[[#${anchor}]]`;
  }
  return "";
}

// src/parsers/5e-json/bestiary.ts
var skippedMonsters = [];
var SIZE_MAP = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var ALIGNMENT_MAP = {
  L: "Lawful",
  N: "Neutral",
  C: "Chaotic",
  G: "Good",
  E: "Evil",
  U: "Unaligned"
};
function capitalizeFirst(str) {
  const s = String(str || "");
  return s.charAt(0).toUpperCase() + s.slice(1);
}
function formatSizeAbbrev(abbrev) {
  return SIZE_MAP[abbrev] || abbrev;
}
function formatAlignmentAbbrev(abbrev) {
  return abbrev.trim().split(/\s+/).map((letter) => ALIGNMENT_MAP[letter] || letter).join(" ");
}
var RAW_NPCS = [
  "Abjurer",
  "Acolyte",
  "Apprentice Wizard",
  "Archdruid",
  "Archer",
  "Archmage",
  "Assassin",
  "Bandit",
  "Bandit Captain",
  "Bard",
  "Berserker",
  "Blackguard",
  "Champion",
  "Commoner",
  "Conjurer",
  "Cult Fanatic",
  "Cultist",
  "Diviner",
  "Druid (NPC)",
  "Druid NPC",
  "Enchanter",
  "Evoker",
  "Gladiator",
  "Guard",
  "Illusionist",
  "Knight",
  "Kraken Priest",
  "Mage",
  "Martial Arts Adept",
  "Master Thief",
  "Necromancer",
  "Noble",
  "Priest",
  "Scout",
  "Spy",
  "Swashbuckler",
  "Thug",
  "Transmuter",
  "Tribal Warrior",
  "Veteran",
  "War Priest",
  "Warlock of the Archfey",
  "Warlock of the Fiend",
  "Warlock of the Great Old One",
  "Warlord"
];
var NORMALIZED_NPC_NAMES = new Set(RAW_NPCS.map((n) => normalizeName(n)));
function normalizeName(name) {
  return name.replace(/\s+/g, " ").trim().toLowerCase();
}
function categorizeCreature(monster) {
  const typeValue = monster.type;
  const name = monster.name;
  const t = typeof typeValue === "string" ? typeValue.toLowerCase() : typeValue?.type?.toLowerCase() || String(typeValue).toLowerCase();
  const normalizedName = normalizeName(name);
  if (monster.isNpc || monster.isNamedCreature) return "Story NPCs";
  if (t === "beast") return "Beasts";
  if (t === "humanoid" && NORMALIZED_NPC_NAMES.has(normalizedName)) return "Non-Beasts";
  if (t === "humanoid") return "Monsters";
  return "Monsters";
}
function renderAbilitiesTable(str, dex, con, int, wis, cha) {
  return [
    `| STR | DEX | CON | INT | WIS | CHA |`,
    `| --- | --- | --- | --- | --- | --- |`,
    `| ${str} | ${dex} | ${con} | ${int} | ${wis} | ${cha} |`
  ].join("\n");
}
function renderEntry(entry) {
  const name = entry.name;
  let descriptions = [];
  if (Array.isArray(entry.entries)) {
    descriptions = entry.entries;
  } else if (typeof entry.entries === "string") {
    descriptions = [entry.entries];
  } else if (Array.isArray(entry.desc)) {
    descriptions = entry.desc;
  } else if (typeof entry.desc === "string") {
    descriptions = [entry.desc];
  }
  const raw = descriptions.join(" ");
  const desc = replace5eTags(raw);
  return `***${name}.*** ${desc}`;
}
function parseBestiaryFile(json, editionId) {
  if (!json.monster) return [];
  json._editionId = editionId;
  const validMonsters = json.monster.filter((m) => {
    const acVal = Array.isArray(m.ac) ? m.ac[0]?.ac ?? m.ac[0] : typeof m.ac === "object" ? m.ac?.ac ?? null : m.ac;
    const hpVal = typeof m.hp === "object" ? m.hp?.average ?? m.hp?.hp ?? null : m.hp;
    return acVal != null && hpVal != null && !isNaN(Number(acVal)) && !isNaN(Number(hpVal));
  });
  const allNames = new Set(json.monster.map((m) => m.name));
  const validNames = new Set(validMonsters.map((m) => m.name));
  const missing = [...allNames].filter((name) => !validNames.has(name));
  return validMonsters.map((monster) => {
    const name = monster.name;
    const safeName = name.replace(/\//g, "-");
    const rawSize = monster.size || "M";
    const rawAlignment = Array.isArray(monster.alignment) ? monster.alignment.join(" ") : monster.alignment || "N";
    let rawType = "Unknown";
    if (typeof monster.type === "string") {
      rawType = capitalizeFirst(monster.type);
    } else if (monster.type?.type) {
      const base = capitalizeFirst(monster.type.type);
      const tags = monster.type.tags?.length ? ` (${monster.type.tags.map(capitalizeFirst).join(", ")})` : "";
      rawType = `${base}${tags}`;
    }
    monster._parsedType = rawType;
    const ac = Array.isArray(monster.ac) ? monster.ac[0].ac : monster.ac;
    const hp = monster.hp?.average ?? monster.hp;
    const cr = monster.cr;
    if (!ac && !hp) {
      skippedMonsters.push(monster.name);
      return null;
    }
    const abilities = Array.isArray(monster.ability) ? monster.ability : [monster.str, monster.dex, monster.con, monster.int, monster.wis, monster.cha];
    const [str = 10, dex = 10, con = 10, int = 10, wis = 10, cha = 10] = abilities;
    const speedList = [];
    if (typeof monster.speed === "object") {
      for (const [mode, val] of Object.entries(monster.speed)) {
        if (mode === "canHover") continue;
        if (val && typeof val === "object" && "number" in val) {
          const num = val.number;
          const cond = val.condition ? ` ${val.condition}` : "";
          speedList.push(`${mode} ${num} ft.${cond}`);
        } else {
          speedList.push(`${mode} ${val} ft.`);
        }
      }
    } else {
      speedList.push(`${monster.speed} ft.`);
    }
    const speed = speedList.join(", ");
    const senses = [];
    if (monster.senses) {
      if (Array.isArray(monster.senses)) {
        monster.senses.forEach((s) => {
          const clean = s.replace(/^\d+\s*/, "");
          senses.push(capitalizeFirst(clean));
        });
      } else {
        Object.entries(monster.senses).forEach(([sense, val]) => {
          senses.push(`${capitalizeFirst(sense)} ${val}`);
        });
      }
    }
    const savingThrows = monster.save ? Object.keys(monster.save).map((k) => k.toUpperCase()) : [];
    const skills = monster.skill ? Object.keys(monster.skill).map((s) => capitalizeFirst(s)) : [];
    const languages = Array.isArray(monster.languages) ? monster.languages : monster.languages ? [monster.languages] : [];
    let source = getFullSourceName(monster.source, editionId);
    source = source.replace(/:/g, " -");
    const category = categorizeCreature(monster);
    const fm = buildFM(monster, BESTIARY_META_DEFS);
    const yaml = serializeFrontmatter(fm);
    let body = `# ${name}

${formatSizeAbbrev(rawSize)} ${rawType}, ${formatAlignmentAbbrev(rawAlignment)}

**Armor Class**: ${ac}
**Hit Points**: ${hp}
**Speed**: ${speed}
` + (savingThrows.length ? `**Saving Throws**: ${savingThrows.join(", ")}
` : "") + (skills.length ? `**Skills**: ${skills.join(", ")}
` : "") + (senses.length ? `**Senses**: ${senses.join(", ")}
` : "") + (languages.length ? `**Languages**: ${languages.join(", ")}
` : "") + `**Challenge**: ${cr}

` + renderAbilitiesTable(str, dex, con, int, wis, cha);
    if (monster.trait) body += `

### Traits
${monster.trait.map(renderEntry).join("\n\n")}`;
    if (monster.action) body += `

### Actions
${monster.action.map(renderEntry).join("\n\n")}`;
    if (monster.reaction) body += `

### Reactions
${monster.reaction.map(renderEntry).join("\n\n")}`;
    if (monster.legendary) body += `

### Legendary Actions
${monster.legendary.map(renderEntry).join("\n\n")}`;
    const content = `---
${yaml}
---

${body}`;
    return {
      path: `${category}/${safeName}.md`,
      content
    };
  });
}

// src/parsers/5e-json/items.ts
function capitalizeFirst2(s) {
  return s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();
}
var DAMAGE_TYPE_MAP = {
  P: "Piercing",
  B: "Bludgeoning",
  S: "Slashing",
  N: "Necrotic",
  R: "Radiant",
  F: "Fire",
  C: "Cold",
  L: "Lightning",
  T: "Thunder",
  A: "Acid",
  H: "Healing",
  U: "Force",
  V: "Psychic"
};
var PROPERTY_MAP = {
  A: "Ammunition",
  F: "Finesse",
  H: "Heavy",
  L: "Light",
  R: "Reload",
  S: "Special",
  "2H": "Two-Handed",
  T: "Thrown",
  V: "Versatile"
};
var ITEM_TYPE_MAP = {
  $G: "Gem",
  A: "Ammunition",
  AT: "Artisan Tools",
  EXP: "Explosive",
  G: "Gear",
  GS: "Game",
  HA: "Heavy Armor",
  INS: "Instrument",
  LA: "Light Armor",
  M: "Weapon",
  MA: "Medium Armor",
  MNT: "Mounts and Vehicles",
  P: "Consumable",
  R: "Ranged Weapon",
  RD: "Rod",
  RG: "Ring",
  S: "Shield",
  SC: "Scroll",
  SCF: "Spell Casting Focus",
  SHP: "Ship",
  T: "Tool",
  TAH: "Mounts and Vehicles",
  TG: "Trade Goods",
  VEH: "Mounts and Vehicles",
  WD: "Wand"
};
var codeFolderMap = {
  "A": "Weapons and Armor/Ammunition",
  "M": "Weapons and Armor/Weapons",
  "R": "Weapons and Armor/Ranged Weapons",
  "S": "Weapons and Armor/Shields",
  "LA": "Weapons and Armor/Armor/Light Armor",
  "MA": "Weapons and Armor/Armor/Medium Armor",
  "HA": "Weapons and Armor/Armor/Heavy Armor",
  "EXP": "Weapons and Armor/Weapons/Explosives",
  "RD": "Magical Items/Rods",
  "RG": "Magical Items/Rings",
  "SC": "Magical Items/Scrolls",
  "SCF": "Magical Items/Spell Casting Focus",
  "WD": "Magical Items/Wands",
  "$G": "Valuables/Gems",
  "TG": "Valuables/Trade Goods",
  "AT": "Artisan Goods/Tools",
  "T": "Artisan Goods/Tools",
  "INS": "Artisan Goods/Instruments",
  "GS": "Artisan Goods/Games",
  "G": "Gear",
  "MNT": "Gear/Mounts and Vehicles",
  "TAH": "Gear/Mounts and Vehicles",
  "VEH": "Gear/Mounts and Vehicles",
  "P": "Consumables"
};
function parseItemsFile(json, editionId) {
  const rawItems = [];
  if (Array.isArray(json.baseitem)) rawItems.push(...json.baseitem);
  if (Array.isArray(json.item)) rawItems.push(...json.item);
  if (Array.isArray(json.object)) rawItems.push(...json.object);
  if (Array.isArray(json.vehicle)) rawItems.push(...json.vehicle);
  if (!rawItems.length) return [];
  const baseNames = new Set(
    Array.isArray(json.baseitem) ? json.baseitem.map((b) => b.name) : []
  );
  const out = [];
  for (const it of rawItems) {
    const name = it.name;
    const safeName = name.replace(/[\/\\:]/g, "-");
    const rawCode = (it.type || "").split("|")[0].split("|")[0].replace(/^\$/, "");
    let folder = codeFolderMap[rawCode] ?? "Miscellaneous";
    if (it.bonusWeapon) {
      folder = `${folder}/Variants`;
    } else {
      const isMagic = !!it.wondrous || !!it.reqAttune || !!it.req_attune || String(it.rarity).toLowerCase().includes("magic");
      if (isMagic) {
        const [, ...rest] = folder.split("/");
        folder = ["Magical Items", ...rest].join("/");
      }
    }
    if ((folder.startsWith("Weapons and Armor/Weapons") || folder.startsWith("Weapons and Armor/Ranged Weapons")) && it.weaponCategory) {
      folder = `${folder}/${capitalizeFirst2(it.weaponCategory)}`;
    }
    json._editionId = editionId;
    const fm = buildFM(it, ITEM_META_DEFS);
    if (rawCode === "M" && it.weaponCategory) {
      fm.type = `${capitalizeFirst2(it.weaponCategory)} Weapon`;
    } else if (ITEM_TYPE_MAP[rawCode]) {
      fm.type = ITEM_TYPE_MAP[rawCode];
    }
    if (Array.isArray(fm.damageTypes)) {
      fm.damageTypes = fm.damageTypes.map(
        (code) => DAMAGE_TYPE_MAP[code] || code
      );
    }
    let yaml = serializeFrontmatter(fm);
    if (Array.isArray(it.packContents)) {
      yaml += "\npackContents:";
      for (const pc of it.packContents) {
        yaml += `
  - item: "${pc.item}"
    quantity: ${pc.quantity}`;
      }
    }
    const frontmatter = `---
${yaml}
---`;
    const lines = [];
    lines.push(`# ${name}`);
    lines.push("");
    const subtitle = it.weapon ? `${capitalizeFirst2(it.weaponCategory)} Weapon` : it.armor ? folder.split("/").pop() || "Armor" : "";
    if (subtitle) lines.push(`### *${subtitle}*`);
    if (it.weapon) {
      lines.push(`**Category**: ${capitalizeFirst2(it.weaponCategory)}`);
      lines.push(`**Damage**: ${it.dmg1 ?? ""}${it.dmg2 ? ` / ${it.dmg2}` : ""}`);
      const typesBody = (Array.isArray(it.dmgType) ? it.dmgType : [it.dmgType]).filter((t) => Boolean(t)).map((t) => DAMAGE_TYPE_MAP[t] || t);
      lines.push(`**Damage Type**: ${typesBody.join(", ")}`);
      lines.push(`**Range**: ${it.range ?? "\u2014"}`);
      lines.push(`**Reload**: ${it.reload ?? "\u2014"}`);
      if (it.ammoType) lines.push(`**Ammo Type**: ${it.ammoType}`);
      if (Array.isArray(it.property) && it.property.length) {
        const propsBody = it.property.map((p) => PROPERTY_MAP[p] || p);
        lines.push(`**Properties**: ${propsBody.join(", ")}`);
      }
    }
    if (it.armor) {
      lines.push(`**Armor Class**: ${it.ac}`);
      if (it.stealth) lines.push(`**Stealth Disadvantage**: true`);
      lines.push("");
    }
    const desc = it.entries ?? it.desc;
    if (desc) {
      for (const p of Array.isArray(desc) ? desc : [desc]) {
        if (typeof p === "string") {
          for (const line of replace5eTags(p).split("\n")) {
            lines.push(line);
          }
          lines.push("");
        } else if (p && typeof p === "object") {
          if (lines[lines.length - 1] === "") {
            lines.pop();
          }
          lines.push(`#### ${p.name}`);
          const sub = Array.isArray(p.entries) ? p.entries : [];
          for (const sp of sub) {
            for (const line of replace5eTags(sp).split("\n")) {
              lines.push(line);
            }
          }
          lines.push("");
        }
      }
    }
    const body = lines.join("\n");
    out.push({ path: `Items/${folder}/${safeName}.md`, content: `${frontmatter}

${body}` });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-json/helpers/frontmatter.ts
function cap(str) {
  if (typeof str !== "string") return "";
  return str.charAt(0).toUpperCase() + str.slice(1);
}
var FM_FIELDS = {
  ABILITY_BONUSES: "ability_bonuses",
  AC: "AC",
  ALIGNMENT: "Alignment",
  AMMO_TYPE: "Ammo Type",
  ARMOR_PROFICIENCIES: "armor-prof",
  ATTACK_TYPE: "attack_type",
  ATTUNEMENT: "Attunement",
  ATTUNE_REQ: "Attune_Req",
  CASTING_TIME: "casting_time",
  CHARISMA: "charisma",
  CHA_MOD: "cha_mod",
  CONCENTRATION: "concentration",
  CONDITION_IMM: "cond_immunity",
  CONSTITUTION: "constitution",
  CON_MOD: "con_mod",
  COST: "cost",
  CHALLENGE_RATING: "CR",
  DAMAGE_TYPE: "damage_type",
  DAMAGE_TYPES: "damageTypes",
  DAMAGE: "damage",
  DAMAGE_RES: "dmg_resistance",
  DAMAGE_IMM: "dmg_immunity",
  DEXTERITY: "dexterity",
  DEX_MOD: "dex_mod",
  DURATION: "duration",
  RULESET: "ruleset",
  HP: "HP",
  INTELLIGENCE: "intelligence",
  INT_MOD: "int_mod",
  LANGUAGES: "languages",
  LEVEL: "level",
  MAGICAL: "magical",
  MATERIAL: "material",
  NAME: "name",
  PROPERTIES: "properties",
  RANGE: "range",
  RARITY: "rarity",
  RELOAD: "reload",
  RITUAL: "ritual",
  SAVE: "save",
  SAVING_THROWS: "saving_throws",
  SCHOOL: "school",
  SENSES: "senses",
  SIZE: "size",
  SKILLS: "skills",
  SKILL_CHOICE_LIST: "skill_choice_list",
  SOMATIC: "somatic",
  SOURCE: "source",
  SPECIES: "species",
  SPEED: "speed",
  STEALTH_DISADVANTAGE: "stealthDisadvantage",
  STRENGTH: "strength",
  STR_MOD: "str_mod",
  SUBRACES: "subraces",
  TOOL_PROFICIENCIES: "tool-prof",
  TOOL_CHOICE_LIST: "tool_choice_list",
  TRAITS: "traits",
  TYPE: "type",
  VARIANT: "Variant",
  VERBAL: "verbal",
  WEAPON_PROFICIENCIES: "weapon-prof",
  WEIGHT: "weight",
  WISDOM: "wisdom",
  WIS_MOD: "wis_mod"
};
var unifiedArmorProfs = (val) => Array.isArray(val?.armor) ? val.armor.map(cap) : Array.isArray(val) ? val.map(cap) : [];
var unifiedWeaponProfs = (val) => Array.isArray(val?.weapons) ? val.weapons.map(cap) : Array.isArray(val) ? val.map(cap) : [];
var unifiedSaves = (val) => {
  if (Array.isArray(val)) {
    return val.map(
      (k) => ({
        str: "Strength",
        dex: "Dexterity",
        con: "Constitution",
        int: "Intelligence",
        wis: "Wisdom",
        cha: "Charisma"
      })[k] ?? k.toUpperCase()
    );
  }
  if (typeof val === "object" && val !== null) {
    return Object.keys(val).map((k) => k.toUpperCase());
  }
  return [];
};
var unifiedSkills = (val) => {
  if (val && !Array.isArray(val) && typeof val === "object") {
    const entries = Object.entries(val);
    if (entries.length > 0 && entries.every(([, v]) => typeof v === "string" || typeof v === "number")) {
      return entries.map(([k, v]) => `${cap(k)} ${v}`.trim());
    }
    const nested = val.skills ?? val.skillProf ?? val.skillProficiencies;
    return unifiedSkills(nested);
  }
  if (!Array.isArray(val)) return [];
  const out = /* @__PURE__ */ new Set();
  for (const entry of val) {
    if (entry?.choose) {
      const cnt = entry.choose.count ?? 1;
      out.add(`Choose ${cnt}`);
    } else if (typeof entry === "string") {
      out.add(cap(entry));
    } else if (entry?.name && typeof entry.name === "string") {
      out.add(cap(entry.name));
    } else if (typeof entry === "object" && entry !== null) {
      Object.entries(entry).filter(([, v]) => v === true).forEach(([k]) => out.add(cap(k)));
    }
  }
  return [...out];
};
var unifiedToolProfs = (val) => {
  let entries = val;
  if (val && typeof val === "object" && !Array.isArray(val)) {
    if (Array.isArray(val.toolProficiencies)) {
      entries = val.toolProficiencies;
    } else if (Array.isArray(val.tools)) {
      entries = val.tools;
    } else {
      entries = [val];
    }
  }
  if (!Array.isArray(entries)) return [];
  const out = /* @__PURE__ */ new Set();
  for (const entry of entries) {
    if (entry?.choose && Array.isArray(entry.choose.from)) {
      const from = entry.choose.from.map(cap).join(", ");
      out.add(`Choose ${entry.choose.count} from: ${from}`);
    } else if (typeof entry === "string") {
      out.add(cap(entry));
    } else if (typeof entry === "object" && entry !== null) {
      Object.entries(entry).filter(([, v]) => v === true || typeof v === "number").forEach(([k, v]) => {
        if (k.startsWith("any") && typeof v === "number") {
          const raw = k.replace(/^any/, "");
          const spaced = raw.replace(/([a-z])([A-Z])/g, "$1 $2").split(" ").map(cap).join(" ");
          out.add(`Choose ${v} ${spaced}`);
        } else if (v === true) {
          out.add(cap(k));
        }
      });
    }
  }
  return [...out];
};
var ALL_FIELD_DEFS = [
  // ─── Core ───
  { callSign: "NAME", jsonKey: "name" },
  { callSign: "SOURCE", jsonKey: ["source"], conv: (raw, all) => {
    const out = /* @__PURE__ */ new Set();
    const arr = Array.isArray(raw) ? raw : [raw];
    arr.forEach((src) => out.add(getFullSourceName(src, all._editionId)));
    for (const os of all.otherSources ?? []) out.add(getFullSourceName(os.source, all._editionId));
    for (const rep of all.reprintedAs ?? []) {
      const [, src] = rep.split("|");
      out.add(getFullSourceName(src, all._editionId));
    }
    return [...out];
  } },
  // ─── Proficiencies ───
  { callSign: "ARMOR_PROFICIENCIES", jsonKey: ["armorProficiencies", "armorProfs", "startingProficiencies"], conv: unifiedArmorProfs },
  { callSign: "WEAPON_PROFICIENCIES", jsonKey: ["weaponProficiencies", "weaponProfs", "startingProficiencies"], conv: unifiedWeaponProfs },
  { callSign: "TOOL_PROFICIENCIES", jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"], conv: unifiedToolProfs },
  {
    callSign: "TOOL_CHOICE_LIST",
    jsonKey: ["toolProficiencies", "toolProfs", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.toolProficiencies) ? raw.toolProficiencies : Array.isArray(raw?.tools) ? raw.tools : [];
      const choice = arr.find((e) => e?.choose);
      return choice?.choose?.from?.map((s) => cap(s)) ?? [];
    }
  },
  { callSign: "SAVING_THROWS", jsonKey: ["save", "proficiency"], conv: unifiedSaves },
  {
    callSign: "SKILLS",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: unifiedSkills
  },
  {
    callSign: "SKILL_CHOICE_LIST",
    jsonKey: ["skill", "skillProf", "skillProficiencies", "startingProficiencies"],
    conv: (raw) => {
      const arr = Array.isArray(raw) ? raw : Array.isArray(raw?.skillProficiencies) ? raw.skillProficiencies : Array.isArray(raw?.skills) ? raw.skills : Array.isArray(raw?.skillProf) ? raw.skillProf : [];
      const choice = arr.find((e) => e?.choose);
      return choice?.choose?.from?.map((s) => cap(s)) ?? [];
    }
  },
  // ─── Spells ───
  { callSign: "LEVEL", jsonKey: "level" },
  { callSign: "SCHOOL", jsonKey: "school", conv: (s) => SCHOOL_MAP[s] ?? s },
  { callSign: "CASTING_TIME", jsonKey: "time", conv: formatTime },
  { callSign: "RANGE", jsonKey: "range", conv: formatRange },
  { callSign: "DURATION", jsonKey: "duration", conv: formatDuration },
  { callSign: "VERBAL", jsonKey: "components", conv: (c) => !!c.v },
  { callSign: "SOMATIC", jsonKey: "components", conv: (c) => !!c.s },
  { callSign: "MATERIAL", jsonKey: "components", conv: (c) => !!c.m },
  { callSign: "ATTACK_TYPE", jsonKey: "attackType" },
  { callSign: "DAMAGE_TYPE", jsonKey: "damageInflict", conv: (d) => Array.isArray(d) ? d[0] : d },
  { callSign: "RITUAL", jsonKey: "ritual" },
  { callSign: "CONCENTRATION", jsonKey: "duration", conv: (ds) => Array.isArray(ds) && ds.some((x) => x.concentration) },
  { callSign: "SAVE", jsonKey: "saveAttr" },
  // ─── Species / Creatures ───
  { callSign: "SPECIES", jsonKey: "name" },
  { callSign: "SIZE", jsonKey: "size", conv: formatSizeAbbrev },
  {
    callSign: "SPEED",
    jsonKey: "speed",
    conv: (sp) => {
      if (!sp || typeof sp !== "object") return [];
      return Object.entries(sp).filter(([k]) => k !== "canHover").map(([k, v]) => {
        const num = typeof v === "object" && v !== null && "number" in v ? v.number : v;
        return `${cap(k)} ${num} ft.`;
      });
    }
  },
  { callSign: "LANGUAGES", jsonKey: ["languages", "languageProficiencies"], conv: (arr) => {
    if (!Array.isArray(arr)) return [];
    const out = [];
    for (const lp of arr) {
      if (typeof lp === "string") out.push(cap(lp));
      else if (typeof lp === "object") {
        for (const [lang, val] of Object.entries(lp)) {
          if (val) out.push(cap(lang));
        }
      }
    }
    return [...new Set(out)];
  } },
  { callSign: "SENSES", jsonKey: "senses", conv: (sen) => {
    if (Array.isArray(sen)) return sen.map((s) => s.replace(/^\d+\s*/, "").replace(/^./, (c) => c.toUpperCase()));
    if (sen && typeof sen === "object") return Object.entries(sen).map(([k, v]) => `${k.charAt(0).toUpperCase() + k.slice(1)} ${v}`);
    return [];
  } },
  {
    callSign: "TRAITS",
    jsonKey: "entries",
    conv: (ents) => {
      if (!Array.isArray(ents)) return [];
      const arr = ents;
      const featureNames = arr.filter((e) => e?.data?.isFeature && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
      if (featureNames.length > 0) {
        return featureNames;
      }
      return arr.filter((e) => e && typeof e.name === "string").map((e) => e.name.replace(/^Feature:\s*/, "").trim());
    }
  },
  { callSign: "AC", jsonKey: "ac", conv: (a) => Array.isArray(a) ? a[0].ac : a },
  { callSign: "HP", jsonKey: "hp", conv: (hp) => hp?.average ?? hp },
  { callSign: "CHALLENGE_RATING", jsonKey: "cr" },
  { callSign: "STRENGTH", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[0] : arr?.str ?? 0 },
  { callSign: "DEXTERITY", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[1] : arr?.dex ?? 0 },
  { callSign: "CONSTITUTION", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[2] : arr?.con ?? 0 },
  { callSign: "INTELLIGENCE", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[3] : arr?.int ?? 0 },
  { callSign: "WISDOM", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[4] : arr?.wis ?? 0 },
  { callSign: "CHARISMA", jsonKey: "ability", conv: (arr) => Array.isArray(arr) ? arr[5] : arr?.cha ?? 0 },
  {
    callSign: "ALIGNMENT",
    jsonKey: "alignment",
    conv: (a) => {
      const raw = Array.isArray(a) ? a.join(" ") : typeof a === "string" ? a : String(a);
      const cleaned = raw.replace(/\bA\b/g, "Any").replace(/\bU\b/g, "Unaligned").replace(/\bN\b/g, "Neutral").replace(/\bL\b/g, "Lawful").replace(/\bC\b/g, "Chaotic").replace(/\bG\b/g, "Good").replace(/\bE\b/g, "Evil");
      return formatAlignmentAbbrev(cleaned);
    }
  },
  {
    callSign: "TYPE",
    jsonKey: "type",
    conv: (t) => {
      if (!t) return void 0;
      if (typeof t === "string") return cap(t);
      if (typeof t === "object") {
        const base = t.type ? cap(t.type) : "Unknown";
        const tags = Array.isArray(t.tags) ? t.tags.map(cap) : [];
        return tags.length ? `${base} (${tags.join(", ")})` : base;
      }
      return void 0;
    }
  },
  // ─── Items ───
  { callSign: "TYPE", jsonKey: "_parsedType" },
  { callSign: "RARITY", jsonKey: "rarity", conv: (r) => {
    const s = String(r || "").toLowerCase();
    return s && s !== "none" ? s[0].toUpperCase() + s.slice(1) : void 0;
  } },
  {
    callSign: "COST",
    jsonKey: "value",
    conv: (raw) => {
      const s = String(raw).trim().toLowerCase();
      let num;
      if (s.endsWith("cp")) {
        num = parseFloat(s);
        return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
      }
      if (s.endsWith("sp")) {
        num = parseFloat(s);
        return num >= 10 ? `${Math.round(num / 10 * 100) / 100}gp` : `${num}sp`;
      }
      if (s.endsWith("gp")) {
        num = parseFloat(s);
        return `${Math.round(num * 100) / 100}gp`;
      }
      num = parseFloat(s) || 0;
      return num >= 100 ? `${Math.round(num / 100 * 100) / 100}gp` : `${num}cp`;
    }
  },
  { callSign: "WEIGHT", jsonKey: "weight" },
  { callSign: "MAGICAL", jsonKey: "wondrous", conv: (_w, all) => !!all.wondrous || !!all.reqAttune },
  { callSign: "VARIANT", jsonKey: "bonusWeapon", conv: (b) => typeof b === "string" && b.startsWith("+") },
  { callSign: "PROPERTIES", jsonKey: "property", conv: (arr) => Array.isArray(arr) ? arr.map((p) => PROPERTY_MAP[p] || p) : [] },
  { callSign: "DAMAGE", jsonKey: "dmg1", conv: (d, all) => d ? all.dmg2 ? `${d} / ${all.dmg2}` : `${d}` : void 0 },
  { callSign: "DAMAGE_TYPES", jsonKey: "dmgType", conv: (dt) => dt == null ? [] : Array.isArray(dt) ? dt : [dt] },
  { callSign: "RANGE", jsonKey: "range" },
  { callSign: "RELOAD", jsonKey: "reload" },
  { callSign: "AMMO_TYPE", jsonKey: "ammoType" },
  { callSign: "STEALTH_DISADVANTAGE", jsonKey: "stealth" },
  {
    callSign: "ATTUNEMENT",
    jsonKey: ["wondrous", "reqAttune", "req_attune", "reqAttuneTags"],
    conv: (_raw, allJson) => {
      const j = allJson;
      const hasText = typeof j.reqAttune === "string" && j.reqAttune.trim() !== "";
      const hasTags = Array.isArray(j.reqAttuneTags) && j.reqAttuneTags.length > 0;
      return hasText || hasTags;
    }
  },
  {
    callSign: "ATTUNE_REQ",
    jsonKey: "reqAttuneTags",
    conv: (tags = [], _all) => {
      const mapLetter = {
        A: "Any",
        U: "Unaligned",
        N: "Neutral",
        L: "Lawful",
        C: "Chaotic",
        G: "Good",
        E: "Evil"
      };
      const reqs = [];
      for (const tag of tags) {
        if (tag.class && Array.isArray(tag.alignment)) {
          const cls = cap(tag.class);
          for (const code of tag.alignment) {
            reqs.push(`${mapLetter[code] || code} ${cls}`);
          }
        } else if (tag.class) {
          reqs.push(cap(tag.class));
        } else if (Array.isArray(tag.alignment)) {
          for (const code of tag.alignment) {
            reqs.push(mapLetter[code] || code);
          }
        } else if (tag.background) {
          const [bg] = String(tag.background).split("|");
          reqs.push(bg.split(" ").map(cap).join(" "));
        } else if (tag.spellcasting) {
          reqs.push("Spellcaster");
        }
      }
      return Array.from(new Set(reqs));
    }
  },
  // ─── Other ───
  { callSign: "DAMAGE_RES", jsonKey: "resist", conv: (v) => Array.isArray(v) ? v.map(cap) : [] },
  { callSign: "RULESET", jsonKey: "_editionId" }
];
function buildFM(json, defs) {
  const fm = {};
  for (const { callSign, jsonKey, conv } of defs) {
    const keys = Array.isArray(jsonKey) ? jsonKey : [jsonKey];
    let raw = void 0;
    for (const key of keys) {
      if (json[key] != null) {
        raw = json[key];
        break;
      }
    }
    if (raw == null) continue;
    const val = conv ? conv(raw, json) : raw;
    fm[FM_FIELDS[callSign]] = val;
  }
  return fm;
}
function serializeFrontmatter(fm) {
  const filtered = {};
  const hasSkillChoice = Array.isArray(fm[FM_FIELDS.SKILL_CHOICE_LIST]) && fm[FM_FIELDS.SKILL_CHOICE_LIST].length > 0;
  const hasToolChoice = Array.isArray(fm[FM_FIELDS.TOOL_CHOICE_LIST]) && fm[FM_FIELDS.TOOL_CHOICE_LIST].length > 0;
  for (const [k, v] of Object.entries(fm)) {
    if (v === void 0) continue;
    if (hasSkillChoice && k === FM_FIELDS.SKILLS) {
      continue;
    }
    if (hasToolChoice && k === FM_FIELDS.TOOL_PROFICIENCIES) {
      continue;
    }
    filtered[k] = v;
  }
  return Object.entries(filtered).map(([k, v]) => {
    if (Array.isArray(v)) {
      return `${k}:
${v.map((i) => `  - ${i}`).join("\n")}`;
    }
    if (typeof v === "string") {
      return `${k}: "${v}"`;
    }
    return `${k}: ${v}`;
  }).join("\n");
}
var SPELL_KEYS = [
  "NAME",
  "LEVEL",
  "SCHOOL",
  "CASTING_TIME",
  "RANGE",
  "DURATION",
  "VERBAL",
  "SOMATIC",
  "MATERIAL",
  "CONCENTRATION",
  "SOURCE",
  "RULESET"
];
var SPECIES_KEYS = [
  "SPECIES",
  "SIZE",
  "SPEED",
  "LANGUAGES",
  "TRAITS",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "SENSES",
  "DAMAGE_RES",
  "SOURCE",
  "RULESET"
];
var ITEM_KEYS = [
  "NAME",
  "TYPE",
  "RARITY",
  "COST",
  "WEIGHT",
  "SOURCE",
  "PROPERTIES",
  "DAMAGE",
  "DAMAGE_TYPES",
  "RANGE",
  "RELOAD",
  "AMMO_TYPE",
  "AC",
  "STEALTH_DISADVANTAGE",
  "MAGICAL",
  "ATTUNEMENT",
  "ATTUNE_REQ",
  "RULESET"
];
var BESTIARY_KEYS = [
  "NAME",
  "SIZE",
  "TYPE",
  "ALIGNMENT",
  "AC",
  "HP",
  "SPEED",
  "CHALLENGE_RATING",
  "STRENGTH",
  "DEXTERITY",
  "CONSTITUTION",
  "INTELLIGENCE",
  "WISDOM",
  "CHARISMA",
  "SAVING_THROWS",
  "SKILLS",
  "SENSES",
  "LANGUAGES",
  "SOURCE",
  "RULESET"
];
var CLASS_KEYS = [
  "NAME",
  "SOURCE",
  "ARMOR_PROFICIENCIES",
  "WEAPON_PROFICIENCIES",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "SAVING_THROWS",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "RULESET"
];
var BACKGROUND_KEYS = [
  "NAME",
  "SKILLS",
  "SKILL_CHOICE_LIST",
  "TOOL_PROFICIENCIES",
  "TOOL_CHOICE_LIST",
  "TRAITS",
  "SOURCE",
  "RULESET"
];
var SPELL_META_DEFS = ALL_FIELD_DEFS.filter((def) => SPELL_KEYS.includes(def.callSign));
var SPECIES_META_DEFS = ALL_FIELD_DEFS.filter((def) => SPECIES_KEYS.includes(def.callSign));
var ITEM_META_DEFS = ALL_FIELD_DEFS.filter((def) => ITEM_KEYS.includes(def.callSign));
var BESTIARY_META_DEFS = ALL_FIELD_DEFS.filter((def) => BESTIARY_KEYS.includes(def.callSign));
var CLASS_META_DEFS = ALL_FIELD_DEFS.filter((def) => CLASS_KEYS.includes(def.callSign));
var BACKGROUND_META_DEFS = ALL_FIELD_DEFS.filter((def) => BACKGROUND_KEYS.includes(def.callSign));

// src/parsers/5e-json/spells.ts
var SCHOOL_MAP = {
  A: "Abjuration",
  C: "Conjuration",
  D: "Divination",
  E: "Enchantment",
  V: "Evocation",
  I: "Illusion",
  N: "Necromancy",
  T: "Transmutation"
};
function ordinal(n) {
  const suffix = n === 1 ? "st" : n === 2 ? "nd" : n === 3 ? "rd" : "th";
  return `${n}${suffix}`;
}
function formatRange(range) {
  if (!range) return "";
  if (typeof range === "string") return range;
  if (range.type === "special") return "Special";
  if (range.type === "point" && range.distance) {
    const dist = range.distance;
    if (dist.type === "touch") return "Touch";
    if (dist.type === "self") return "Self";
    if (dist.type === "sight") return "Sight";
    if (dist.amount) return `${dist.amount} ${dist.type}`;
  }
  return "Varies";
}
function formatTime(time) {
  if (!Array.isArray(time)) return "";
  return time.map((t) => `${t.number} ${t.unit}`).join(", ");
}
function formatDuration(duration) {
  if (!Array.isArray(duration)) return "";
  return duration.map((d) => {
    if (d.type === "instant") return "Instantaneous";
    if (d.type === "timed" && d.duration) {
      return `${d.duration.amount} ${d.duration.type}${d.concentration ? " (concentration)" : ""}`;
    }
    if (d.type === "permanent") return "Permanent";
    return "Special";
  }).join(", ");
}
function formatComponents(components) {
  if (!components) return "";
  const out = [];
  if (components.v) out.push("V");
  if (components.s) out.push("S");
  if (components.m) out.push("M");
  return out.join(", ");
}
function parseSpellsFile(json, editionId) {
  if (!json.spell) return [];
  json._editionId = editionId;
  return json.spell.map((spell) => {
    const sources = spell.source ? Array.isArray(spell.source) ? spell.source : [spell.source] : ["unknown"];
    const name = spell.name;
    const school = SCHOOL_MAP[spell.school] ?? spell.school;
    const level = spell.level;
    const range = formatRange(spell.range);
    const castingTime = formatTime(spell.time);
    const duration = formatDuration(spell.duration);
    const formattedSources = sources.map((s) => getFullSourceName(s, editionId));
    const attackType = spell.attackType || "";
    const damageType = spell.damageInflict?.[0] || "Teleportation";
    const ritual = spell.ritual === true;
    const concentration = spell.duration?.some((d) => d.concentration) ?? false;
    const FM = buildFM(spell, SPELL_META_DEFS);
    const yaml = serializeFrontmatter(FM);
    const safeName = name.replace(/\//g, "-");
    const title = `# ${name}`;
    const levelLabel = level === 0 ? `${school} Cantrip` : `${ordinal(level)}-level ${school} Spell`;
    const subtitle = `### *${levelLabel}*${concentration ? " *(Concentration)*" : ""}`;
    const headerLines = [
      title,
      subtitle,
      `**Casting Time:** ${castingTime}`,
      `**Range:** ${range}`,
      `**Components:** ${formatComponents(spell.components)}`,
      `**Duration:** ${duration}`
    ];
    const bodyLines = [
      ...(spell.entries ?? []).map((e) => formatEntry(e)),
      ...(spell.entriesHigherLevel ?? []).map((e) => formatEntry(e))
    ];
    const footerLines = [
      `---`,
      `**Source:** ${formattedSources.join(", ")}`
    ];
    return {
      path: `${safeName}.md`,
      content: [
        `---
${yaml}
---`,
        headerLines.join("\n"),
        ``,
        bodyLines.join("\n\n"),
        ``,
        footerLines.join("\n")
      ].join("\n")
    };
  });
}

// src/parsers/5e-json/species.ts
function slug(name) {
  return name.replace(/[\/:"]/g, "-");
}
var SIZE_MAP2 = {
  T: "Tiny",
  S: "Small",
  M: "Medium",
  L: "Large",
  H: "Huge",
  G: "Gargantuan"
};
var BLOCKED_TRAITS = ["Age", "Size", "Languages", "Creature Type", "Speed"];
function parseSpeciesFile(json, editionId) {
  if (!Array.isArray(json.race)) return [];
  json._editionId = editionId;
  const rawVariants = json.race.filter(
    (r) => !("reprintedAs" in r) && !/\((?:Kaladesh|Zendikar|Amonkhet|Innistrad|Ixalan)\)$/.test(r.name)
  );
  const byName = /* @__PURE__ */ new Map();
  for (const r of rawVariants) {
    const list = byName.get(r.name) ?? [];
    list.push(r);
    byName.set(r.name, list);
  }
  const out = [];
  for (const [name, variants] of byName.entries()) {
    const safeName = slug(name);
    const primary = variants.reduce(
      (best, cur) => Object.keys(cur).length > Object.keys(best).length ? cur : best,
      variants[0]
    );
    const fm = buildFM(primary, SPECIES_META_DEFS);
    const senses = [];
    if (primary.darkvision) senses.push(`Darkvision ${primary.darkvision} ft.`);
    if (primary.blindsight) senses.push(`Blindsight ${primary.blindsight} ft.`);
    if (primary.tremorsense) senses.push(`Tremorsense ${primary.tremorsense} ft.`);
    if (primary.truesight) senses.push(`Truesight ${primary.truesight} ft.`);
    if (senses.length) fm.senses = senses;
    if (Array.isArray(fm.traits)) {
      fm.traits = fm.traits.filter((t) => !BLOCKED_TRAITS.includes(t));
    }
    const yaml = serializeFrontmatter(fm);
    const lines = [];
    lines.push(`# ${name}`);
    lines.push(`## Stats`);
    const size = Array.isArray(primary.size) ? primary.size.map((s) => SIZE_MAP2[s] || s).join("/") : SIZE_MAP2[primary.size] ?? primary.size;
    lines.push(`**Size:** ${size}`);
    const speedVal = typeof primary.speed === "number" ? primary.speed : primary.speed?.walk ?? primary.speed?.base ?? 0;
    lines.push(`**Speed:** ${speedVal} ft. walking`);
    const rawAb = primary.ability;
    if (Array.isArray(rawAb)) {
      const bonuses = { str: 0, dex: 0, con: 0, int: 0, wis: 0, cha: 0 };
      let choose = null;
      for (const obj of rawAb) {
        for (const [key, val] of Object.entries(obj)) {
          if (key === "choose") {
            choose = val;
          } else {
            bonuses[key] += val;
          }
        }
      }
      const parts = Object.entries(bonuses).filter(([, v]) => v !== 0).map(([k, v]) => `${k.toUpperCase()} ${v >= 0 ? "+" : ""}${v}`);
      if (choose?.count && choose?.from) {
        const opts = choose.from.map((s) => s.toUpperCase());
        parts.push(`CHOOSE ${choose.count} from ${opts.join(", ")}`);
      }
      if (parts.length) lines.push(`**Ability Scores:** ${parts.join(", ")}`);
    }
    const langs = fm["languages"];
    if (langs && Array.isArray(langs) && langs.length) {
      lines.push(`**Languages:** ${langs.join(", ")}`);
    }
    const addIfArray = (label, field) => {
      if (Array.isArray(field) && field.length) {
        const out2 = [];
        let hasChoice = false;
        for (const s of field) {
          if (typeof s === "string") {
            out2.push(s.charAt(0).toUpperCase() + s.slice(1));
          } else if (s.name || s.proficiency) {
            const val = s.name || s.proficiency;
            if (val) out2.push(val.charAt(0).toUpperCase() + val.slice(1));
          } else if (s.choose?.from) {
            hasChoice = true;
            const count = s.choose.count || 1;
            const list = s.choose.from.map((s2) => s2.charAt(0).toUpperCase() + s2.slice(1)).join(", ");
            lines.push(`**${label}:** Choose ${count} from: ${list}`);
          }
        }
        if (hasChoice) out2.push("Choice");
      }
    };
    const rawSkills = primary.skillProficiencies;
    if (Array.isArray(rawSkills) && rawSkills.length) {
      const skillLabels = [];
      for (const entry of rawSkills) {
        if (entry?.choose?.from) {
          const from = entry.choose.from.map((s) => s.charAt(0).toUpperCase() + s.slice(1));
          skillLabels.push(`Choose from: ${from.join(", ")}`);
        } else {
          const val = entry?.proficiency || entry?.name || entry;
          if (typeof val === "string") {
            skillLabels.push(val.charAt(0).toUpperCase() + val.slice(1));
          }
        }
      }
      if (skillLabels.length) lines.push(`**Skill Proficiencies:** ${skillLabels.join("; ")}`);
    }
    const toolProfs = fm[FM_FIELDS.TOOL_PROFICIENCIES];
    const weaponProfs = fm[FM_FIELDS.WEAPON_PROFICIENCIES];
    const armorProfs = fm[FM_FIELDS.ARMOR_PROFICIENCIES];
    if (toolProfs?.length) lines.push(`**Tool Proficiencies:**   ${toolProfs.join(", ")}`);
    if (weaponProfs?.length) lines.push(`**Weapon Proficiencies:** ${weaponProfs.join(", ")}`);
    if (armorProfs?.length) lines.push(`**Armor Proficiencies:**  ${armorProfs.join(", ")}`);
    lines.push(`## Traits`);
    const seen = /* @__PURE__ */ new Set();
    for (const trait of fm.traits || []) {
      lines.push(`##### ${trait}`);
      const entry = primary.entries?.find(
        (e) => typeof e !== "string" && e.name === trait
      );
      if (entry && Array.isArray(entry.entries)) {
        ;
        entry.entries.forEach((sub, idx) => {
          let block;
          if (sub.type === "table") {
            block = renderMarkdownTable(sub);
          } else if (sub.type === "list") {
            block = sub.items.map((item) => {
              if (typeof item === "string") {
                return `- ${replace5eTags(item).trim()}`;
              }
              const label = item.name?.trim() ?? "";
              const entry2 = item.entry ? replace5eTags(item.entry).trim() : "";
              return label || entry2 ? `- ${label}${entry2 ? " " + entry2 : ""}` : "";
            }).filter(Boolean).join("\n");
          } else if (typeof sub === "string") {
            block = replace5eTags(sub).trim();
          }
          if (block && !seen.has(block)) {
            lines.push(block);
            seen.add(block);
            if (entry.entries.length > 1 && idx < entry.entries.length - 1) {
              lines.push("");
            }
          }
        });
      }
    }
    const body = lines.join("\n");
    out.push({
      path: `Species/${safeName}.md`,
      content: `---
${yaml}
---

${body}`
    });
  }
  return out.sort((a, b) => a.path.localeCompare(b.path));
}

// src/parsers/5e-json/classes.ts
function formatFeatureLink(name) {
  const ignore = ["Ability Score Improvement", "Archetype Feature", "Subclass Feature"];
  if (ignore.some((sub) => name.toLowerCase().includes(sub.toLowerCase()))) {
    return name;
  }
  const anchor = name.replace(/[^\w\s]/g, "").replace(/-/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, (l) => l.toUpperCase());
  return `[[#${anchor}]]`;
}
function parseClassFile(json, editionId, fileName) {
  json._editionId = editionId;
  const cls = Array.isArray(json.class) ? json.class[0] : json;
  const className = typeof cls.name === "string" ? cls.name : fileName ? fileName.replace(/^class-/, "").replace(/\.json$/, "") : "Unknown";
  const subclassFiles = [];
  const PROF_BONUS_BY_LEVEL = [
    "+2",
    "+2",
    "+2",
    "+2",
    "+3",
    "+3",
    "+3",
    "+3",
    "+4",
    "+4",
    "+4",
    "+4",
    "+5",
    "+5",
    "+5",
    "+5",
    "+6",
    "+6",
    "+6",
    "+6"
  ];
  const hdNum = cls.hd?.number ?? 1;
  const hdFaces = cls.hd?.faces ?? 6;
  const hdStr = `${hdNum}d${hdFaces}`;
  const hdMax = hdNum * hdFaces;
  const hdAvg = Math.ceil((hdFaces + 1) / 2);
  const baseFM = buildFM(cls, CLASS_META_DEFS);
  const fm = { ...baseFM, hd: hdStr };
  const yaml = serializeFrontmatter(fm);
  const lines = [];
  lines.push(`# ${className}`);
  if (cls.source) lines.push(`**Source:** ${cls.source}`);
  lines.push(``);
  lines.push(`## Hit Points`);
  lines.push(`**Hit Dice:** ${hdStr} per ${className} level`);
  lines.push(`**Hit Points at 1st Level:** ${hdMax} + your Constitution modifier`);
  lines.push(
    `**Hit Points at Higher Levels:** ${hdStr} (or ${hdAvg}) + your Constitution modifier per level after 1st`
  );
  lines.push(`
### Proficiencies`);
  const sp = cls.startingProficiencies ?? {};
  if (Array.isArray(sp.armor) && sp.armor.length) lines.push(`**Armor:** ${sp.armor.join(", ")}`);
  if (Array.isArray(sp.weapons) && sp.weapons.length) lines.push(`**Weapons:** ${sp.weapons.join(", ")}`);
  const toolList = unifiedToolProfs(sp.tools);
  if (toolList.length) {
    lines.push(`**Tools:** ${toolList.join(", ")}`);
  }
  const saves = Array.isArray(cls.proficiency) ? cls.proficiency.map(
    (k) => ({
      str: "Strength",
      dex: "Dexterity",
      con: "Constitution",
      int: "Intelligence",
      wis: "Wisdom",
      cha: "Charisma"
    })[k] || k.toUpperCase()
  ) : [];
  if (saves.length) lines.push(`**Saving Throws:** ${saves.join(", ")}`);
  const skillChoices = sp.skills ?? [];
  if (skillChoices.length) {
    const skillText = skillChoices.map(
      (s) => s.choose ? `Choose ${s.choose.count} from: ${s.choose.from.map((o) => o.replace(/([A-Z])/g, " $1").trim()).join(", ")}` : s.name ?? s
    ).join("; ");
    lines.push(`**Skills:** ${skillText}`);
  }
  if (Array.isArray(cls.startingEquipment)) {
    lines.push(`
### Equipment`);
    cls.startingEquipment.filter((e) => typeof e === "string").forEach((item) => lines.push(`- ${item}`));
  }
  const progGroups = cls.classTableGroups ?? [];
  const maxLevel = 20;
  lines.push(`
## Class Progression`);
  if (!progGroups.length) {
    lines.push(`*(No class table provided for this class.)*`);
  } else {
    const featuresByLevel2 = {};
    for (const feat of cls.classFeatures ?? []) {
      const raw = typeof feat === "object" && feat.classFeature ? feat.classFeature : String(feat);
      const [name, , , lvlStr] = raw.split("|");
      const lvl = Number(lvlStr ?? 0);
      if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
      featuresByLevel2[lvl].push(name);
    }
    const allLabelsSet = /* @__PURE__ */ new Set();
    const rowMaps = {};
    for (const group of progGroups) {
      const labels = Array.isArray(group.colLabels) ? group.colLabels.map((l) => replace5eTags(l)) : [];
      const rows = Array.isArray(group.rows) ? group.rows : Array.isArray(group.rowsSpellProgression) ? group.rowsSpellProgression : [];
      if (!labels.length || !rows.length) continue;
      for (let lvl = 0; lvl < rows.length; lvl++) {
        const levelNum = lvl + 1;
        if (!rowMaps[levelNum]) rowMaps[levelNum] = {};
        const rowMap = rowMaps[levelNum];
        const cells = rows[lvl];
        for (let i = 0; i < labels.length; i++) {
          const label = labels[i];
          const cell = cells[i];
          allLabelsSet.add(label);
          let val = "";
          if (Array.isArray(cell)) {
            val = cell.join(", ");
          } else if (typeof cell === "object" && cell !== null && "value" in cell) {
            val = String(cell.value);
          } else {
            val = String(cell ?? "");
          }
          rowMap[label] = val;
        }
      }
    }
    const allLabels = Array.from(allLabelsSet);
    const mergedLabels = ["Level", "Proficiency Bonus", "Class Features", ...allLabels];
    const mergedRows = [];
    for (let lvl = 1; lvl <= maxLevel; lvl++) {
      const featureList = (featuresByLevel2[lvl] ?? []).map(formatFeatureLink);
      const rowMap = rowMaps[lvl] ?? {};
      const row = [
        lvl.toString(),
        PROF_BONUS_BY_LEVEL[lvl - 1],
        featureList.join(", ").replace(/\|/g, "&#124;"),
        ...allLabels.map((label) => rowMap[label] ?? "")
      ];
      mergedRows.push(row);
    }
    lines.push(renderMarkdownTable({
      type: "table",
      caption: "",
      colLabels: mergedLabels,
      rows: mergedRows
    }));
  }
  const subs = Array.isArray(json.subclass) ? json.subclass : [];
  const subclassFeatures = Array.isArray(json.subclassFeature) ? json.subclassFeature : json.lookup?.subclassFeature ?? [];
  for (const sc of subs) {
    const subclassName = sc.name;
    const subLines = [];
    const featuresByLevel2 = {};
    const introEntry = subclassFeatures.find(
      (f) => f.name === sc.name && f.level === 3 && f.subclassShortName === sc.shortName && f.subclassSource === sc.source
    );
    if (introEntry?.entries?.length) {
      subLines.push(formatEntry(introEntry.entries));
    }
    for (const feat of subclassFeatures) {
      if (feat.subclassShortName === sc.shortName && feat.subclassSource === sc.source && feat.className === className) {
        const lvl = feat.level ?? 0;
        if (!featuresByLevel2[lvl]) featuresByLevel2[lvl] = [];
        featuresByLevel2[lvl].push(feat);
      }
    }
    subLines.push(`# ${subclassName}`);
    subLines.push(`**Parent Class:** [[${className}]]`);
    if (sc.source) subLines.push(`**Source:** ${sc.source}`);
    const progGroups2 = sc.subclassTableGroups ?? [];
    if (progGroups2.length) {
      const allLabelsSet = /* @__PURE__ */ new Set();
      const rowMaps = {};
      for (const group of progGroups2) {
        const labels = (group.colLabels ?? []).map(replace5eTags);
        const rows = group.rows ?? group.rowsSpellProgression ?? [];
        for (let i = 0; i < rows.length; i++) {
          const row = rows[i];
          if (!rowMaps[i + 1]) rowMaps[i + 1] = {};
          row.forEach((cell, j) => {
            const label = labels[j];
            if (!label) return;
            allLabelsSet.add(label);
            rowMaps[i + 1][label] = typeof cell === "object" && "value" in cell ? String(cell.value) : String(cell ?? "");
          });
        }
      }
      const allLabels = Array.from(allLabelsSet);
      const mergedLabels = ["Level", ...allLabels];
      const mergedRows = [];
      for (let lvl = 1; lvl <= 20; lvl++) {
        const row = rowMaps[lvl] ?? {};
        const finalRow = [String(lvl), ...allLabels.map((label) => row[label] ?? "")];
        mergedRows.push(finalRow);
      }
      subLines.push(`## Subclass Progression`);
      subLines.push(renderMarkdownTable({
        type: "table",
        caption: "",
        colLabels: mergedLabels,
        rows: mergedRows
      }));
    }
    for (const lvl of Object.keys(featuresByLevel2).sort((a, b) => +a - +b)) {
      subLines.push(`---`);
      subLines.push(`## Level ${lvl}`);
      for (const feat of featuresByLevel2[+lvl]) {
        subLines.push(`### ${feat.name}`);
        const desc = Array.isArray(feat.entries) ? feat.entries.map(formatEntry).join("\n\n") : formatEntry(feat.entries);
        subLines.push(desc);
      }
    }
    let subclassContent = subLines.join("\n\n");
    subclassContent = subclassContent.replace(/\n{3,}/g, "\n\n");
    subclassFiles.push({
      path: `Classes/${className}/Subclasses/${subclassName}.md`,
      content: subclassContent
    });
  }
  if (subs.length) {
    lines.push(`
## Subclasses`);
    for (const sc of subs) {
      lines.push(`- [[Subclasses/${sc.name.replace(/[\/\\]/g, "-")}]]`);
    }
  }
  const allFeatures = Array.isArray(json.classFeature) ? json.classFeature : json.lookup?.classFeature ?? [];
  const featuresByLevel = {};
  for (const entry of allFeatures) {
    if (entry.className !== className) continue;
    const lvl = entry.level ?? 0;
    if (!featuresByLevel[lvl]) featuresByLevel[lvl] = [];
    featuresByLevel[lvl].push(entry);
  }
  for (const lvl of Object.keys(featuresByLevel).sort((a, b) => +a - +b)) {
    lines.push(`## Level ${lvl}`);
    for (const feat of featuresByLevel[+lvl]) {
      lines.push(`### ${feat.name}`);
      const desc = Array.isArray(feat.entries) ? feat.entries.filter(
        (e) => !(typeof e === "string" && e.trim() === "}") && !(typeof e === "object" && Object.keys(e).length === 0)
      ).map(replace5eTags).join("\n\n") : typeof feat.entries === "string" ? replace5eTags(feat.entries) : "";
      if (desc.trim()) {
        lines.push(desc);
      }
      lines.push("");
    }
    lines.push("---");
  }
  let content = `---
${yaml}
---

${lines.join("\n")}`;
  content = replace5eTags(content);
  content = content.replace(/\n{3,}/g, "\n\n").replace(/\n +\n/g, "\n\n");
  return [
    {
      path: `Classes/${className}/${className}.md`,
      content
    },
    ...subclassFiles
  ];
}

// src/parsers/5e-json/rules.ts
function parseActionsFile(json, editionId) {
  if (!Array.isArray(json.action)) return [];
  const lines = [];
  for (const action of json.action) {
    lines.push(`## ${action.name}`);
    const entries = Array.isArray(action.entries) ? action.entries : [action.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else if ((entry.type === "entries" || entry.type === "inset") && Array.isArray(entry.entries)) {
        lines.push(`### ${entry.name}`);
        for (const sub of entry.entries) {
          if (typeof sub === "string") {
            const ps = sub.split(/\n{2,}/);
            for (const p of ps) {
              const tt = p.trim();
              if (tt) {
                lines.push(replace5eTags(tt));
                lines.push("");
              }
            }
          } else if (sub.type === "list" && Array.isArray(sub.items)) {
            for (const li of sub.items) {
              lines.push(`- ${replace5eTags(li)}`);
            }
            lines.push("");
          } else {
            const txt = Array.isArray(sub) ? sub.join(" ") : typeof sub === "object" ? JSON.stringify(sub) : String(sub);
            lines.push(replace5eTags(txt));
            lines.push("");
          }
        }
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const headers = entry.colLabels || [];
        lines.push(`| ${headers.join(" | ")} |`);
        lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
        for (const row of entry.rows) {
          lines.push(`| ${row.join(" | ")} |`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : typeof entry === "object" ? JSON.stringify(entry) : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Actions.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseConditionsDiseasesFile(json, editionId) {
  const outputs = [];
  const processItems = (items, outPath) => {
    const lines = [];
    for (const item of items) {
      lines.push(`## ${item.name}`);
      const entries = Array.isArray(item.entries) ? item.entries : [item.entries];
      for (const entry of entries) {
        if (!entry) continue;
        if (typeof entry === "string") {
          const paras = entry.split(/\n{2,}/);
          for (const para of paras) {
            const t = para.trim();
            if (t) {
              lines.push(replace5eTags(t));
              lines.push("");
            }
          }
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          for (const txt of entry.items) {
            lines.push(`- ${replace5eTags(txt)}`);
          }
          lines.push("");
        } else if (entry.type === "table" && Array.isArray(entry.rows)) {
          const headers = entry.colLabels || [];
          lines.push(`| ${headers.join(" | ")} |`);
          lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
          for (const row of entry.rows) {
            lines.push(`| ${row.join(" | ")} |`);
          }
          lines.push("");
        } else if (entry.type === "entries" && Array.isArray(entry.entries)) {
          lines.push(`### ${entry.name}`);
          for (const sub of entry.entries) {
            const txt = typeof sub === "string" ? sub : String(sub);
            lines.push(replace5eTags(txt));
            lines.push("");
          }
        } else {
          const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
          lines.push(replace5eTags(txt));
          lines.push("");
        }
      }
      lines.push("---");
    }
    const cleaned = lines.reduce((acc, curr) => {
      if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
      return acc.concat(curr);
    }, []);
    outputs.push({ path: outPath, content: cleaned.join("\n").trim() + "\n" });
  };
  processItems(json.condition || [], "Rules and Reference/Conditions.md");
  processItems(json.disease || [], "Rules and Reference/Diseases.md");
  return outputs;
}
function parseSensesFile(json, editionId) {
  const items = Array.isArray(json.sense) ? json.sense : Array.isArray(json.senses) ? json.senses : [];
  if (!items.length) return [];
  const lines = [];
  for (const sense of items) {
    lines.push(`## ${sense.name}`);
    const entries = Array.isArray(sense.entries) ? sense.entries : [sense.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else if ((entry.type === "entries" || entry.type === "inset") && Array.isArray(entry.entries)) {
        lines.push(`### ${entry.name}`);
        for (const sub of entry.entries) {
          const txt = typeof sub === "string" ? sub : String(sub);
          lines.push(replace5eTags(txt));
          lines.push("");
        }
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const headers = entry.colLabels || [];
        lines.push(`| ${headers.join(" | ")} |`);
        lines.push(`| ${headers.map(() => "---").join(" | ")} |`);
        for (const row of entry.rows) {
          lines.push(`| ${row.join(" | ")} |`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Senses.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}
function parseSkillsFile(json, editionId) {
  const items = Array.isArray(json.skill) ? json.skill : Array.isArray(json.skills) ? json.skills : [];
  if (!items.length) return [];
  const lines = [];
  for (const skill of items) {
    lines.push(`## ${skill.name}`);
    if (skill.ability) {
      lines.push(`*Ability: ${skill.ability}*`);
      lines.push("");
    }
    const entries = Array.isArray(skill.entries) ? skill.entries : [skill.entries];
    for (const entry of entries) {
      if (!entry) continue;
      if (typeof entry === "string") {
        const paras = entry.split(/\n{2,}/);
        for (const para of paras) {
          const t = para.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        }
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        for (const item of entry.items) {
          lines.push(`- ${replace5eTags(item)}`);
        }
        lines.push("");
      } else {
        const txt = Array.isArray(entry) ? entry.join(" ") : String(entry);
        lines.push(replace5eTags(txt));
        lines.push("");
      }
    }
    lines.push("---");
  }
  const cleaned = lines.reduce((acc, curr) => {
    if (curr === "" && acc.length && acc[acc.length - 1] === "") return acc;
    return acc.concat(curr);
  }, []);
  return [
    {
      path: "Rules and Reference/Skills.md",
      content: cleaned.join("\n").trim() + "\n"
    }
  ];
}

// src/parsers/5e-json/feats.ts
function parseFeatsFile(json, editionId) {
  const feats = Array.isArray(json.feat) ? json.feat : Array.isArray(json.feats) ? json.feats : [];
  const outputs = [];
  feats.forEach((feat) => {
    const lines = [];
    lines.push("---");
    if (feat.source) lines.push(`source: "${feat.source}"`);
    lines.push("---", "");
    lines.push(`# ${feat.name}`);
    lines.push("");
    const prereqs = [];
    if (Array.isArray(feat.prerequisite)) {
      feat.prerequisite.forEach((pr) => {
        if (pr.level) prereqs.push(`Level ${pr.level}`);
        if (Array.isArray(pr.feat)) {
          pr.feat.forEach((f) => {
            const name = f.split("|")[0].replace(/\b\w/g, (c) => c.toUpperCase());
            prereqs.push(`Prerequisite: [[${name}]]`);
          });
        }
      });
    }
    if (feat.spellcastingPrepared) prereqs.push(`Prerequisite: Spellcaster`);
    if (Array.isArray(feat.toolProficiencies)) {
      feat.toolProficiencies.forEach((tp) => {
        Object.entries(tp).forEach(([key]) => {
          if (key === "anyArtisansTool") prereqs.push(`Prerequisite: Proficient with an artisan's tool`);
          else prereqs.push(`Prerequisite: Proficient with ${key.replace(/([A-Z])/g, " $1").trim()}`);
        });
      });
    }
    if (Array.isArray(feat.armorProficiencies)) {
      feat.armorProficiencies.forEach((arm) => {
        const armStr = typeof arm === "string" ? arm : JSON.stringify(arm);
        prereqs.push(`Prerequisite: Proficient with ${armStr.replace(/([A-Z])/g, " $1").trim()}`);
      });
    }
    if (feat.race) prereqs.push(`Prerequisite: ${feat.race}`);
    if (prereqs.length) {
      lines.push(`**Prerequisites**`);
      prereqs.forEach((p) => lines.push(`- ${p}`));
      lines.push("");
    }
    const entries = Array.isArray(feat.entries) ? feat.entries : [feat.entries];
    entries.forEach((entry) => {
      if (!entry) return;
      if (typeof entry === "string") {
        entry.split(/\n{2,}/).forEach((p) => {
          const t = p.trim();
          if (t) {
            lines.push(replace5eTags(t));
            lines.push("");
          }
        });
      } else if (entry.type === "list" && Array.isArray(entry.items)) {
        entry.items.forEach((it) => {
          if (typeof it === "string") {
            lines.push(`- ${replace5eTags(it)}`);
          } else if (it.type === "item" && it.name) {
            lines.push(`- **${it.name}**`);
            const subs = Array.isArray(it.entries) ? it.entries : [it.entries];
            subs.forEach((s) => lines.push(`  - ${replace5eTags(typeof s === "string" ? s : JSON.stringify(s))}`));
          }
        });
        lines.push("");
      } else if (entry.type === "inset") {
        lines.push(`- *${entry.name}*`);
        const subs = Array.isArray(entry.entries) ? entry.entries : [entry.entries];
        subs.forEach((s) => lines.push(`  - ${replace5eTags(s)}`));
        lines.push("");
      } else if ((entry.type === "section" || entry.type === "entries") && Array.isArray(entry.entries)) {
        if (entry.name) {
          lines.push(`## ${entry.name}`);
          lines.push("");
        }
        entry.entries.forEach((s) => {
          lines.push(replace5eTags(typeof s === "string" ? s : JSON.stringify(s)));
          lines.push("");
        });
      } else if (entry.type === "table" && Array.isArray(entry.rows)) {
        const hdr = entry.colLabels || [];
        lines.push(`| ${hdr.join(" | ")} |`);
        lines.push(`| ${hdr.map(() => "---").join(" | ")} |`);
        entry.rows.forEach((row) => lines.push(`| ${row.join(" | ")} |`));
        lines.push("");
      }
    });
    outputs.push({
      path: `Player Build/Feats/${feat.name}.md`,
      content: lines.join("\n").trim() + "\n"
    });
  });
  return outputs;
}

// src/parsers/5e-json/backgrounds.ts
function parseBackgroundsFile(json, editionId) {
  const raw = Array.isArray(json.background) ? json.background : Array.isArray(json.backgrounds) ? json.backgrounds : [];
  const backgrounds = raw.filter((bg) => {
    const nm = bg.name || "";
    return !nm.startsWith("Variant") && !nm.includes("Baldur's Gate");
  });
  const outputs = [];
  backgrounds.forEach((bg) => {
    const lines = [];
    const fm = buildFM(bg, BACKGROUND_META_DEFS);
    fm["ruleset"] = editionId;
    fm[FM_FIELDS.RULESET] = editionId;
    const extraTraits = Array.isArray(bg.entries) ? bg.entries.filter((e) => e.data?.isFeature && typeof e.name === "string").map((e) => {
      const name = e.name.replace(/^Feature:\s*/, "");
      return `[[${bg.name}#${name}]]`;
    }) : [];
    const yaml = serializeFrontmatter(fm);
    lines.push("---", yaml, "---", "");
    lines.push(`# ${bg.name}`, "");
    if (Array.isArray(bg.skillProficiencies) && bg.skillProficiencies.length) {
      const skills = [];
      bg.skillProficiencies.forEach((ent) => {
        if (typeof ent === "string") {
          skills.push(cap2(ent));
        } else if (ent.choose && Array.isArray(ent.choose.from)) {
          skills.push(`Choose ${ent.choose.amount} from ${ent.choose.from.join(", ")}`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => skills.push(cap2(k)));
        }
      });
      lines.push(`**Skill Proficiencies:** ${skills.join(", ")}`, "");
    }
    if (Array.isArray(bg.languageProficiencies) && bg.languageProficiencies.length) {
      const langs = [];
      bg.languageProficiencies.forEach((ent) => {
        if (ent.anyStandard) {
          langs.push(`${ent.anyStandard} of your choice`);
        } else {
          Object.entries(ent).filter(([, v]) => v === true).forEach(([k]) => langs.push(cap2(k)));
        }
      });
      lines.push(`**Languages:** ${langs.join(", ")}`, "");
    }
    if (Array.isArray(bg.toolProficiencies) && bg.toolProficiencies.length) {
      const tools = [];
      bg.toolProficiencies.forEach((ent) => {
        if (ent.choose && Array.isArray(ent.choose.from)) {
          const list = ent.choose.from.map(humanize).join(", ");
          tools.push(`Choose ${ent.choose.count} from ${list}`);
          return;
        }
        if (typeof ent === "string") {
          tools.push(humanize(ent));
          return;
        }
        Object.entries(ent).filter(([_, v]) => v === true).forEach(([k]) => tools.push(humanize(k)));
      });
      lines.push(`**Tool Proficiencies:** ${tools.join(", ")}`, "");
    }
    if (Array.isArray(bg.startingEquipment) && bg.startingEquipment.length) {
      lines.push(`**Equipment:**`);
      bg.startingEquipment.forEach((grp) => {
        if (Array.isArray(grp._)) {
          grp._.forEach((it) => lines.push(`- ${fmtItem(it)}`));
        }
        ["a", "b"].forEach((key) => {
          if (Array.isArray(grp[key])) {
            grp[key].forEach((it) => lines.push(`- ${fmtItem(it)}`));
          }
        });
      });
      lines.push("");
    }
    if (Array.isArray(bg.entries)) {
      bg.entries.forEach((entry) => {
        if (entry.type === "list" && entry.style === "list-hang-notitle") {
          return;
        }
        if (entry.name) {
          const header = entry.data?.isFeature ? entry.name.replace(/^Feature:\s*/, "") : entry.name;
          lines.push(`## ${header}`, "");
        }
        if (Array.isArray(entry.entries)) {
          entry.entries.forEach((e) => {
            if (typeof e === "string") {
              lines.push(replace5eTags(e), "");
            } else if (e.type === "list" && Array.isArray(e.items)) {
              e.items.forEach(
                (it) => lines.push(`- ${replace5eTags(it.entry ?? it)}`)
              );
              lines.push("");
            } else if (e.type === "table") {
              const tbl = renderMarkdownTable(e);
              if (tbl) lines.push(tbl, "");
            }
          });
        } else if (entry.type === "list" && Array.isArray(entry.items)) {
          entry.items.forEach(
            (it) => lines.push(`- ${replace5eTags(it.entry ?? it)}`)
          );
          lines.push("");
        }
      });
    }
    outputs.push({
      path: `Player Build/Backgrounds/${bg.name}.md`,
      content: lines.join("\n").trimEnd() + "\n"
    });
  });
  return outputs;
}
function cap2(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
function fmtItem(item) {
  if (typeof item === "string") {
    if (item.includes("|")) {
      return replace5eTags(`{@item ${item}}`);
    }
    return replace5eTags(item);
  }
  const priceRaw = item.containsValue ?? item.value;
  if (typeof priceRaw === "number" && // make sure it’s not also an “item” or “equipmentType”
  !item.item && !item.equipmentType && !item.special) {
    const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
    return `${gp} gp`;
  }
  if (item.item) {
    const link = replace5eTags(`{@item ${item.item}}`);
    if (typeof priceRaw === "number") {
      const gp = priceRaw >= 100 ? priceRaw / 100 : priceRaw;
      return `${link} (${gp} gp)`;
    }
    return link;
  }
  if (typeof item.special === "string") {
    return item.special;
  }
  if (item.equipmentType) {
    switch (item.equipmentType) {
      case "toolArtisan":
        return "One type of artisan\u2019s tools (of your choice)";
      case "instrumentMusical":
        return "One type of musical instrument (of your choice)";
      case "setGaming":
        return "One set of gaming dice (of your choice)";
      default:
        return humanize(item.equipmentType);
    }
  }
  return replace5eTags(JSON.stringify(item));
}
function humanize(str) {
  const spaced = str.replace(/([a-z])([A-Z])/g, "$1 $2");
  return spaced.charAt(0).toUpperCase() + spaced.slice(1);
}

// src/parsers/5e-json/installer.ts
var import_obsidian2 = require("obsidian");
async function listSpellFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/spells`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && item.name.startsWith("spells-") && item.name.endsWith(".json")).map((item) => item.name);
}
async function listBestiaryFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/bestiary`;
  const res = await fetch(url);
  const list = await res.json();
  const CORE_SOURCES = [
    "bestiary-phb.json",
    "bestiary-mm.json",
    "bestiary-dmg.json",
    "bestiary-xge.json",
    "bestiary-vgm.json",
    "bestiary-tce.json",
    "bestiary-egw.json",
    "bestiary-erlw.json",
    "bestiary-mtf.json",
    "bestiary-vrgr.json",
    "bestiary-cos.json",
    "bestiary-oota.json",
    "bestiary-pota.json",
    "bestiary-hotdq.json",
    "bestiary-rot.json",
    "bestiary-skt.json",
    "bestiary-tftyp.json",
    "bestiary-toa.json"
  ];
  return list.filter((item) => item.type === "file" && CORE_SOURCES.includes(item.name)).map((item) => item.name);
}
var ITEM_JSON_FILES = [
  "items-base.json",
  "items.json",
  "objects.json",
  "vehicles.json",
  "decks.json"
];
async function listItemFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data`;
  const res = await fetch(url);
  const data = await res.json();
  return data.filter((item) => item.type === "file" && ITEM_JSON_FILES.includes(item.name)).map((item) => item.name);
}
async function listClassFilesFromGitHub(repo) {
  const url = `https://api.github.com/repos/${repo}/contents/data/class`;
  const res = await fetch(url);
  const listing = await res.json();
  return listing.filter(
    (item) => item.type === "file" && item.name.startsWith("class-") && item.name.endsWith(".json")
  ).map((item) => item.name);
}
async function ensureFolder(app, folderPath) {
  const parts = folderPath.split("/");
  let curr = "";
  for (const p of parts) {
    curr = curr ? `${curr}/${p}` : p;
    try {
      await app.vault.createFolder(curr);
    } catch {
    }
  }
}
async function importEditionData(params) {
  const { app, edition, targetPath } = params;
  const repo = edition.repo ?? "";
  {
    const spellFiles = await listSpellFilesFromGitHub(repo);
    for (const fileName of spellFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/spells/${fileName}`);
        const json = await res.json();
        const files = parseSpellsFile(json, edition.id);
        for (const md of files) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Spells/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import spell ${fileName}:`, e);
      }
    }
  }
  {
    const bestiaryFiles = await listBestiaryFilesFromGitHub(repo);
    for (const fileName of bestiaryFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/bestiary/${fileName}`);
        const json = await res.json();
        const parsed = parseBestiaryFile(json, edition.id);
        for (const md of parsed) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Bestiary/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import bestiary ${fileName}:`, e);
      }
    }
  }
  {
    const itemFiles = await listItemFilesFromGitHub(repo);
    for (const fn of itemFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/${fn}`);
        const json = await res.json();
        const mdFiles = parseItemsFile(json, edition.id);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
          const folder = fullPath.split("/").slice(0, -1).join("/");
          await ensureFolder(app, folder);
          await app.vault.adapter.write(fullPath, md.content);
        }
      } catch (e) {
        console.warn(`Failed to import items from ${fn}:`, e);
      }
    }
  }
  {
    const res = await fetch(`${edition.sourceUrl}/races.json`);
    const json = await res.json();
    const mdFiles = parseSpeciesFile(json, edition.id);
    for (const md of mdFiles) {
      const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
      await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
      await app.vault.adapter.write(fullPath, md.content);
    }
  }
  {
    const classFiles = await listClassFilesFromGitHub(repo);
    for (const fileName of classFiles) {
      try {
        const res = await fetch(`${edition.sourceUrl}/class/${fileName}`);
        const json = await res.json();
        const mdFiles = parseClassFile(json, edition.id, fileName);
        for (const md of mdFiles) {
          const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/Player Build/${md.path}`);
          await ensureFolder(app, fullPath.split("/").slice(0, -1).join("/"));
          const existing = app.vault.getAbstractFileByPath(fullPath);
          if (existing instanceof import_obsidian2.TFile) {
            await app.vault.modify(existing, md.content);
          } else {
            await app.vault.create(fullPath, md.content);
          }
        }
      } catch (e) {
        console.warn(`Failed to import class ${fileName}:`, e);
      }
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/actions.json`);
      const json = await res.json();
      const mdFiles = parseActionsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import actions.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/conditionsdiseases.json`);
      const json = await res.json();
      const mdFiles = parseConditionsDiseasesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import conditionsdiseases.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/senses.json`);
      const json = await res.json();
      const mdFiles = parseSensesFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import senses.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/skills.json`);
      const json = await res.json();
      const mdFiles = parseSkillsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import skills.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/feats.json`);
      const json = await res.json();
      const mdFiles = parseFeatsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(
          `${targetPath}/${md.path}`
        );
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import feats.json:", e);
    }
  }
  {
    try {
      const res = await fetch(`${edition.sourceUrl}/backgrounds.json`);
      const json = await res.json();
      const mdFiles = parseBackgroundsFile(json, edition.id);
      for (const md of mdFiles) {
        const fullPath = (0, import_obsidian.normalizePath)(`${targetPath}/${md.path}`);
        const folder = fullPath.split("/").slice(0, -1).join("/");
        await ensureFolder(app, folder);
        await app.vault.adapter.write(fullPath, md.content);
      }
    } catch (e) {
      console.warn("Failed to import backgrounds.json:", e);
    }
  }
}

// src/rulesetInstaller.ts
async function importRulesetData(params) {
  const { app, editionKey, targetPath } = params;
  const edition = AVAILABLE_EDITIONS.find((e) => e.id === editionKey);
  if (!edition) return;
  if (!edition.parser) {
    console.warn("No parser defined for:", editionKey);
    return;
  }
  let installerModule;
  switch (edition.parser) {
    case "5e-json":
      installerModule = installer_exports;
      break;
    // case "other-parser":
    //   installerModule = anotherInstaller;
    //   break;
    default:
      throw new Error(`Unknown parser: ${edition.parser}`);
  }
  await installerModule.importEditionData({ app, edition, targetPath });
}

// src/firstinstallconfirm.ts
var ConfirmFreshInstallModal = class extends import_obsidian3.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    this.contentEl.empty();
    this.titleEl.setText("\u26A0\uFE0F Warning: Fresh Vault Recommended");
    this.contentEl.createEl("div", {
      text: "The full VVunderlore install is intended for a fresh, empty Obsidian vault. If you install in a vault that already has files, any file whose path matches a VVunderlore Toolkit file will be overwritten.\n\nAlso things could just get messy.\n\nMake a perception check and proceed with caution!"
    }).style.cssText = `
        white-space: pre-wrap;
        margin-bottom: 1em;
        line-height: 1.4em;
      `;
    const buttonRow = this.contentEl.createEl("div");
    buttonRow.style.cssText = `
      display: flex;
      justify-content: flex-end;
      gap: 0.5em;
    `;
    new import_obsidian3.ButtonComponent(buttonRow).setButtonText("Oh god, cancel!").onClick(() => {
      this.close();
    });
    new import_obsidian3.ButtonComponent(buttonRow).setButtonText("Install!!").setCta().onClick(async () => {
      this.close();
      const opts = {
        compendium: this.plugin.settings.rulesetCompendium,
        references: [...this.plugin.settings.rulesetReference]
      };
      new import_obsidian3.Notice("\u23F3 Installing toolkit\u2026");
      const compendium = this.plugin.settings.rulesetCompendium;
      const references = [...this.plugin.settings.rulesetReference];
      try {
        await this.plugin.installFullToolkit({ compendium, references });
        if (compendium) {
          await importRulesetData({
            app: this.app,
            editionKey: compendium,
            targetPath: "Compendium"
          });
        }
      } catch (err) {
        console.error("\u274C installToolkit() failed:", err);
        new import_obsidian3.Notice("\u274C Toolkit installation failed. See console.");
      }
      this.plugin.settings.needsInstall = false;
      await this.plugin.saveSettings();
      this.plugin.settingsTab.display();
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/customInstallModal.ts
var import_obsidian4 = require("obsidian");
var InstallingModal = class extends import_obsidian4.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.contentEl.empty();
    this.contentEl.createDiv({ text: "Installing\u2026", cls: "mod-quiet" }).style.cssText = "font-style: italic; color: var(--text-muted); text-align: center; padding: 1em;";
  }
  onClose() {
    this.contentEl.empty();
  }
};
function showCustomInstallModal(app, plugin) {
  const fullPathToKey = {};
  for (const f of plugin.manifestCache.folders) {
    fullPathToKey[f.path] = f.key;
  }
  for (const f of plugin.manifestCache.files) {
    fullPathToKey[f.path] = f.key;
  }
  const root = { name: "", fullPath: "", isFolder: true, children: {} };
  function ensureFolderNode(segments) {
    let cursor = root;
    let builtSoFar = "";
    for (const seg of segments) {
      builtSoFar = builtSoFar ? `${builtSoFar}/${seg}` : seg;
      if (!cursor.children[seg]) {
        cursor.children[seg] = {
          name: seg,
          fullPath: builtSoFar,
          isFolder: true,
          children: {}
        };
      }
      cursor = cursor.children[seg];
    }
    return cursor;
  }
  for (const folderEntry of plugin.manifestCache.folders) {
    const segments = folderEntry.path.split("/");
    ensureFolderNode(segments);
  }
  for (const fileEntry of plugin.manifestCache.files) {
    const segments = fileEntry.path.split("/");
    const fileName = segments.pop();
    const parentNode = segments.length ? ensureFolderNode(segments) : root;
    parentNode.children[fileName] = {
      name: fileName,
      fullPath: fileEntry.path,
      isFolder: false,
      children: {}
    };
  }
  class CustomInstallModal extends import_obsidian4.Modal {
    constructor(app2) {
      super(app2);
      this.checkboxMap = {};
      // <div> that holds “dependency console”
      this.currentBatchLines = [];
    }
    onOpen() {
      this.contentEl.empty();
      this.titleEl.setText("Custom Install");
      const descriptionEl = this.contentEl.createDiv();
      descriptionEl.textContent = "All checked items will be installed. Dependencies will be managed automatically.";
      descriptionEl.style.cssText = `
        font-size: 0.9em;
        color: var(--text-muted);
        margin-top: 0.25em;
        margin-bottom: 0.75em;
      `;
      const optionsBox = this.contentEl.createDiv();
      Object.assign(optionsBox.style, {
        maxHeight: "480px",
        // Enough space for checkboxes + tree
        overflowY: "auto",
        // Everything inside optionsBox will scroll
        margin: "0.5em 0",
        border: "1px solid var(--divider-color)",
        borderRadius: "4px",
        padding: "0.5em"
      });
      const checkboxSection = optionsBox.createDiv();
      Object.assign(checkboxSection.style, {
        display: "flex",
        flexDirection: "column",
        gap: "0.5em",
        marginBottom: "0.75em"
      });
      const pluginRow = checkboxSection.createDiv();
      pluginRow.style.display = "flex";
      pluginRow.style.alignItems = "center";
      this.pluginCheckbox = pluginRow.createEl("input", { type: "checkbox" });
      this.pluginCheckbox.checked = true;
      this.pluginCheckbox.id = "vvunderlore-checkbox-plugins";
      this.pluginCheckbox.style.marginRight = "0.5em";
      pluginRow.createEl("label", {
        text: "Community Plugins",
        attr: { for: this.pluginCheckbox.id }
      });
      const demoRow = checkboxSection.createDiv();
      demoRow.style.display = "flex";
      demoRow.style.alignItems = "center";
      this.demoCheckbox = demoRow.createEl("input", { type: "checkbox" });
      this.demoCheckbox.checked = true;
      this.demoCheckbox.id = "vvunderlore-checkbox-demo";
      this.demoCheckbox.style.marginRight = "0.5em";
      demoRow.createEl("label", {
        text: "VVunderlore Demo Files",
        attr: { for: this.demoCheckbox.id }
      });
      const settingsRow = checkboxSection.createDiv();
      settingsRow.style.display = "flex";
      settingsRow.style.alignItems = "center";
      this.settingsCheckbox = settingsRow.createEl("input", { type: "checkbox" });
      this.settingsCheckbox.checked = true;
      this.settingsCheckbox.id = "vvunderlore-checkbox-settings";
      this.settingsCheckbox.style.marginRight = "0.5em";
      settingsRow.createEl("label", {
        text: "Vault Settings (apperance, hotkeys, graph setup, etc.)",
        attr: { for: this.settingsCheckbox.id }
      });
      const divider = optionsBox.createDiv();
      Object.assign(divider.style, {
        borderTop: "1px solid var(--divider-color)",
        margin: "0.5em 0"
      });
      const container = optionsBox.createDiv();
      Object.assign(container.style, {
        // We no longer give this inner div its own scrollbar.
        // Instead, container will expand inside optionsBox, and
        // optionsBox will scroll everything (checkboxes + tree) together.
        margin: "0",
        padding: "0",
        border: "none"
      });
      const INDENT_PX = 16;
      const lookupEntry = (fullPath) => {
        return plugin.manifestCache.folders.find((f) => f.path === fullPath) || plugin.manifestCache.files.find((f) => f.path === fullPath);
      };
      const renderTree = () => {
        container.empty();
        this.checkboxMap = {};
        this.currentBatchLines = [];
        const demoAllowed = this.demoCheckbox.checked;
        const renderNode = (node, parentEl, indent = 0) => {
          if (node.fullPath) {
            const entry = lookupEntry(node.fullPath);
            if (entry && entry.optional && !demoAllowed) {
              return;
            }
          }
          if (node.isFolder) {
            const details = parentEl.createEl("details");
            details.open = true;
            details.style.margin = "4px 0";
            const summary = details.createEl("summary");
            Object.assign(summary.style, {
              display: "flex",
              alignItems: "center",
              marginLeft: `${indent * INDENT_PX}px`,
              cursor: "pointer",
              padding: "2px 6px",
              borderRadius: "4px",
              userSelect: "none"
            });
            summary.addEventListener("mouseenter", () => {
              summary.style.backgroundColor = "var(--background-modifier-hover)";
            });
            summary.addEventListener("mouseleave", () => {
              summary.style.backgroundColor = "transparent";
            });
            const cb = summary.createEl("input", { type: "checkbox" });
            cb.style.marginRight = "0.5em";
            cb.checked = true;
            cb.style.cursor = "pointer";
            this.checkboxMap[node.fullPath] = cb;
            const iconEl = summary.createDiv({ cls: "suggestion-icon" });
            (0, import_obsidian4.setIcon)(iconEl, "folder");
            iconEl.style.marginRight = "0.3em";
            iconEl.style.transform = "scale(0.9)";
            iconEl.style.opacity = "0.75";
            const label = summary.createEl("span", { text: node.name });
            label.style.fontWeight = "600";
            label.style.fontSize = "0.95em";
            cb.onchange = () => {
              this.toggleDescendants(node, cb.checked);
              this.enforceDependencies(node.fullPath, cb.checked);
              this.fadeAllExceptCurrentBatch();
            };
            const childrenContainer = details.createDiv();
            childrenContainer.style.marginTop = "4px";
            for (const childName of Object.keys(node.children).sort()) {
              renderNode(node.children[childName], childrenContainer, indent + 1);
            }
          } else {
            const row = parentEl.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "center",
              marginLeft: `${indent * INDENT_PX}px`,
              padding: "2px 6px",
              borderRadius: "4px",
              marginTop: "2px",
              marginBottom: "2px",
              userSelect: "none"
            });
            row.addEventListener("mouseenter", () => {
              row.style.backgroundColor = "var(--background-modifier-hover)";
            });
            row.addEventListener("mouseleave", () => {
              row.style.backgroundColor = "transparent";
            });
            const cb = row.createEl("input", { type: "checkbox" });
            cb.style.marginRight = "0.5em";
            cb.checked = true;
            cb.style.cursor = "pointer";
            this.checkboxMap[node.fullPath] = cb;
            const iconEl = row.createDiv({ cls: "suggestion-icon" });
            (0, import_obsidian4.setIcon)(iconEl, "document");
            iconEl.style.marginRight = "0.3em";
            iconEl.style.transform = "scale(0.8)";
            iconEl.style.opacity = "0.5";
            const label = row.createEl("label", { text: node.name });
            label.style.fontSize = "0.9em";
            cb.onchange = () => {
              this.enforceDependencies(node.fullPath, cb.checked);
              this.fadeAllExceptCurrentBatch();
            };
          }
        };
        for (const topName of Object.keys(root.children).sort()) {
          renderNode(root.children[topName], container, 0);
        }
      };
      renderTree();
      this.consoleEl = this.contentEl.createDiv({ cls: "custom-console" });
      Object.assign(this.consoleEl.style, {
        height: "140px",
        margin: "0.5em 0",
        padding: "8px",
        backgroundColor: "var(--background-secondary)",
        border: "1px solid var(--divider-color)",
        borderRadius: "4px",
        fontFamily: "monospace",
        fontSize: "0.82em",
        lineHeight: "1.4em",
        color: "var(--text-normal)",
        overflowY: "auto",
        whiteSpace: "pre-wrap"
      });
      const placeholder = this.consoleEl.createDiv({
        text: "> Dependency errors and warnings will appear here\u2026"
      });
      Object.assign(placeholder.style, {
        opacity: "0.4",
        fontStyle: "italic",
        marginBottom: "4px"
      });
      this.pluginCheckbox.onchange = () => {
        const WARNING_CLASS = "vvunderlore-warning";
        if (!this.pluginCheckbox.checked) {
          if (this.consoleEl.children.length === 1 && this.consoleEl.children[0].textContent?.startsWith(
            "> Dependency console"
          )) {
            this.consoleEl.empty();
          }
          const warningLine = this.consoleEl.createDiv({
            text: "WARNING: The VVunderlore Toolkit will not function without all included plugins! You probably want to re-check that one."
          });
          warningLine.addClass(WARNING_CLASS);
          warningLine.style.color = "#FF0000";
          this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
        } else {
          const existingWarnings = this.consoleEl.querySelectorAll(`.${WARNING_CLASS}`);
          existingWarnings.forEach((el) => el.remove());
          if (this.consoleEl.children.length === 0) {
            const ph = this.consoleEl.createDiv({
              text: "> Dependency console output will appear here\u2026"
            });
            Object.assign(ph.style, {
              opacity: "0.4",
              fontStyle: "italic",
              marginBottom: "4px"
            });
          }
          this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
        }
      };
      this.demoCheckbox.onchange = () => {
        renderTree();
      };
      const buttonRow = this.contentEl.createDiv();
      Object.assign(buttonRow.style, {
        display: "flex",
        justifyContent: "space-between",
        // push left vs right
        alignItems: "center",
        paddingTop: "8px",
        borderTop: "1px solid var(--divider-color)",
        marginTop: "8px"
      });
      const resetBtn = buttonRow.createEl("button", { text: "Reset Selection" });
      resetBtn.style.cssText = `
        font-size: 0.9em;
        color: var(--text-normal);
      `;
      resetBtn.onclick = () => {
        const warnings = Array.from(
          this.consoleEl.querySelectorAll(".vvunderlore-warning")
        );
        this.consoleEl.empty();
        warnings.forEach((warningEl) => {
          this.consoleEl.appendChild(warningEl);
        });
        Object.values(this.checkboxMap).forEach((cb) => {
          cb.checked = true;
        });
      };
      const rightGroup = buttonRow.createDiv();
      Object.assign(rightGroup.style, {
        display: "flex",
        gap: "0.5em"
      });
      const installBtn = rightGroup.createEl("button", {
        text: "Install Selected",
        cls: "mod-cta"
      });
      installBtn.onclick = async () => {
        installBtn.setAttribute("disabled", "");
        this.close();
        const installing = new InstallingModal(app);
        installing.open();
        const toInstall = [];
        for (const [fp, checkbox] of Object.entries(this.checkboxMap)) {
          if (checkbox.checked) {
            const isFolder = plugin.manifestCache.folders.some((f) => f.path === fp);
            toInstall.push({ path: fp, isFolder });
          }
        }
        if (this.pluginCheckbox.checked) {
          try {
            const apiUrl = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/.obsidian/plugins?ref=main";
            const resp = await fetch(apiUrl);
            if (resp.ok) {
              const pluginFiles = await resp.json();
              for (const item of pluginFiles) {
                const localPath = `.obsidian/plugins/${item.name}`;
                const existsLocally = await this.app.vault.adapter.exists(localPath);
                if (!existsLocally) {
                  if (item.type === "dir") {
                    toInstall.push({ path: localPath, isFolder: true });
                  } else {
                    toInstall.push({ path: localPath, isFolder: false });
                  }
                }
              }
            }
          } catch (e) {
            console.error("Failed to enumerate .obsidian/plugins from GitHub:", e);
          }
          toInstall.push({ path: ".obsidian/community-plugins.json", isFolder: false });
        }
        if (this.settingsCheckbox.checked) {
          const vaultSettingsPaths = [
            ".obsidian/app.json",
            ".obsidian/appearance.json",
            ".obsidian/graph.json",
            ".obsidian/hotkeys.json"
          ];
          for (const vs of vaultSettingsPaths) {
            toInstall.push({ path: vs, isFolder: false });
          }
        }
        try {
          await plugin.performCustomInstall(toInstall);
        } catch (err) {
          console.error("\u274C performCustomInstall() threw:", err);
          new import_obsidian4.Notice("\u274C Custom install failed\u2014see console");
        } finally {
          installing.close();
        }
      };
      const cancelBtn = rightGroup.createEl("button", { text: "Cancel" });
      cancelBtn.onclick = () => this.close();
    }
    onClose() {
      this.contentEl.empty();
    }
    /** Recursively toggle descendants’ checked‐state without logging each one. */
    toggleDescendants(node, checked) {
      for (const child of Object.values(node.children)) {
        const cb = this.checkboxMap[child.fullPath];
        if (cb) cb.checked = checked;
        if (child.isFolder) {
          this.toggleDescendants(child, checked);
        }
      }
    }
    /**
     * Enforce dependency logic (auto‐check prerequisites, auto‐uncheck dependents).
     * Each time we flip a box “because of a dependency,” we log one line to the console.
     */
    enforceDependencies(changedPath, isChecked) {
      const changedKey = fullPathToKey[changedPath];
      if (!changedKey) return;
      const fullPathToDisplay = {};
      for (const f of plugin.manifestCache.folders) {
        fullPathToDisplay[f.path] = f.displayName ?? f.path.split("/").pop();
      }
      for (const f of plugin.manifestCache.files) {
        fullPathToDisplay[f.path] = f.displayName ?? f.path.split("/").pop();
      }
      const changedName = fullPathToDisplay[changedPath] ?? changedPath.split("/").pop();
      this.currentBatchLines = [];
      if (isChecked) {
        const stack = [changedKey];
        while (stack.length) {
          const cur = stack.pop();
          const deps = plugin.requiresGraph.get(cur) ?? [];
          for (const depKey of deps) {
            const depEntry = plugin.manifestCache.files.find((x) => x.key === depKey) || plugin.manifestCache.folders.find((x) => x.key === depKey);
            if (depEntry) {
              const depPath = depEntry.path;
              const cb = this.checkboxMap[depPath];
              if (cb && !cb.checked) {
                cb.checked = true;
                const depName = fullPathToDisplay[depPath] ?? depPath.split("/").pop();
                const lineEl = this.appendLogLine(
                  depPath,
                  `> ${depName} automatically checked (required by ${changedName})`
                );
                this.currentBatchLines.push(lineEl);
                stack.push(depKey);
              }
            }
          }
        }
      } else {
        const dependentsOf = (targetKey) => Array.from(plugin.requiresGraph.entries()).filter(([, deps]) => deps.includes(targetKey)).map(([k]) => k);
        const stack = [changedKey];
        while (stack.length) {
          const cur = stack.pop();
          for (const childKey of dependentsOf(cur)) {
            const childEntry = plugin.manifestCache.files.find((x) => x.key === childKey) || plugin.manifestCache.folders.find((x) => x.key === childKey);
            if (childEntry) {
              const childPath = childEntry.path;
              const cb = this.checkboxMap[childPath];
              if (cb && cb.checked) {
                cb.checked = false;
                const childName = fullPathToDisplay[childPath] ?? childPath.split("/").pop();
                const lineEl = this.appendLogLine(
                  childPath,
                  `> ${childName} automatically unchecked (depends on ${changedName})`
                );
                this.currentBatchLines.push(lineEl);
                stack.push(childKey);
              }
            }
          }
        }
      }
      this.fadeAllExceptCurrentBatch();
    }
    /**
     * Append one “mono” line plus a tiny undo button. Returns the new <div>.
     */
    appendLogLine(fullPath, text) {
      const line = this.consoleEl.createDiv();
      Object.assign(line.style, {
        display: "flex",
        justifyContent: "space-between",
        alignItems: "center",
        margin: "2px 0",
        opacity: "1.0",
        transition: "opacity 0.2s ease"
      });
      line.createSpan({ text });
      const undoBtn = line.createEl("button", { text: "undo", cls: "mod-small" });
      Object.assign(undoBtn.style, {
        marginLeft: "0.5em",
        fontSize: "0.75em",
        padding: "2px 4px",
        cursor: "pointer"
      });
      undoBtn.onclick = () => {
        const cb = this.checkboxMap[fullPath];
        if (cb) {
          cb.checked = !cb.checked;
          this.enforceDependencies(fullPath, cb.checked);
          this.fadeAllExceptCurrentBatch();
        }
      };
      this.consoleEl.scrollTop = this.consoleEl.scrollHeight;
      return line;
    }
    /** Fade out every console line that is *not* part of currentBatchLines. */
    fadeAllExceptCurrentBatch() {
      const total = this.consoleEl.children.length;
      for (let i = 0; i < total; i++) {
        const child = this.consoleEl.children[i];
        if (this.currentBatchLines.includes(child)) {
          child.style.opacity = "1.0";
        } else {
          child.style.opacity = "0.6";
        }
      }
    }
  }
  new CustomInstallModal(app).open();
}

// src/settings.ts
var path = __toESM(require("path"));
var FilePathSuggester = class extends import_obsidian5.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.paths = [];
    this.currentSuggestions = [];
    this.renderedSuggestions = /* @__PURE__ */ new Map();
    this.inputEl = inputEl;
    const folders = Object.values(app.vault.getAllLoadedFiles()).filter((f) => f instanceof import_obsidian5.TFolder).map((f) => ({ path: f.path, isFolder: true }));
    const files = app.vault.getMarkdownFiles().map((f) => ({ path: f.path, isFolder: false }));
    this.paths = [...folders, ...files];
    this.inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        setTimeout(() => {
          const container = this.containerEl;
          if (!container) return;
          const selectedEl = container.querySelector(".suggestion-item.is-selected");
          if (selectedEl) {
            const selectedPath = this.renderedSuggestions.get(selectedEl);
            if (selectedPath) {
              this.selectSuggestion(selectedPath);
            }
          }
        }, 0);
      }
    });
  }
  getSuggestions(inputStr) {
    const query = inputStr.toLowerCase();
    this.currentSuggestions = this.paths.filter(({ path: path2 }) => path2.toLowerCase().includes(query)).map((p) => p.path);
    return this.currentSuggestions;
  }
  renderSuggestion(path2, el) {
    const isFolder = this.paths.find((p) => p.path === path2)?.isFolder;
    el.addClass("mod-complex");
    const iconEl = el.createDiv({ cls: "suggestion-icon" });
    (0, import_obsidian5.setIcon)(iconEl, isFolder ? "folder" : "document");
    const name = path2.split("/").pop();
    const displayName = isFolder ? name : name.replace(/\.md$/, "");
    el.createDiv({ text: displayName, cls: "suggestion-title" });
    const parentPath = path2.split("/").slice(0, -1).join("/");
    el.createDiv({ text: parentPath, cls: "search-suggest-info-text" });
    el.addEventListener("click", (e) => {
      e.stopPropagation();
      this.selectSuggestion(path2);
    });
    this.renderedSuggestions.set(el, path2);
  }
  selectSuggestion(path2) {
    this.inputEl.value = path2;
    this.inputEl.dispatchEvent(new Event("input"));
    this.close();
  }
};
var MarkdownPreviewModal = class extends import_obsidian5.Modal {
  constructor(app, content) {
    super(app);
    this.content = content;
  }
  onOpen() {
    this.contentEl.addEventListener("click", (e) => e.stopPropagation());
    this.contentEl.empty();
    this.contentEl.createEl("h2", { text: "Toolkit Changelog" });
    const md = this.contentEl.createDiv();
    const dummyComponent = new class extends import_obsidian5.Component {
    }();
    import_obsidian5.MarkdownRenderer.renderMarkdown(this.content, md, "/", dummyComponent);
  }
  onClose() {
    this.contentEl.empty();
  }
};
var ToolkitSettingsTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.versionValueEl = null;
    this.forceWarningEl = null;
    this.plugin = plugin;
  }
  renderHeader(root) {
    const header = root.createDiv();
    header.style.display = "flex";
    header.style.justifyContent = "space-between";
    header.style.alignItems = "center";
    header.style.borderBottom = "1px solid var(--divider-color)";
    header.style.marginBottom = "2em";
    header.style.paddingBottom = "0.5em";
    header.createEl("h3", { text: "VVunderlore Toolkit Settings" });
    const headerBtns = header.createDiv();
    headerBtns.style.display = "flex";
    headerBtns.style.gap = "0.5em";
    const docsBtn = headerBtns.createEl("button", { text: "Docs" });
    docsBtn.onclick = () => window.open("http://vvunderlore.com", "_blank");
    const githubBtn = headerBtns.createEl("button", { text: "GitHub" });
    githubBtn.onclick = () => window.open("https://github.com/slamwise0001/VVunderlore-Toolkit-Full", "_blank");
    const kofiBtn = headerBtns.createEl("button", {
      text: "\u2615 Ko-fi",
      cls: "mod-cta"
    });
    kofiBtn.style.backgroundColor = "#ff5900";
    kofiBtn.style.color = "white";
    kofiBtn.onclick = () => window.open("https://ko-fi.com/vvunderlore", "_blank");
  }
  renderFirstRunCard(root) {
    if (this.plugin.settings.needsInstall) {
      this.plugin.settings.rulesetCompendium = "";
      this.plugin.settings.rulesetReference = [];
    }
    const card = root.createEl("div", { cls: "vvunderlore-first-run" });
    Object.assign(card.style, {
      display: "flex",
      flexDirection: "column",
      alignItems: "center",
      textAlign: "center",
      /* 
      	Push the card a bit down from the top of the settings pane.
      	You can adjust "2em" to move it higher or lower.
      */
      marginTop: "2em",
      /* Optional: add some padding so it doesn't hug the edges */
      padding: "1em",
      border: "2px solid var(--divider-color)",
      borderRadius: "18px",
      /* (optional) round the corners slightly */
      backgroundColor: "var(--background-primary)"
      /* (optional) white/gray background */
    });
    const title = card.createEl("h2", {
      text: "\u{1F3F0} Welcome to VVunderlore",
      cls: "vv-card-title"
    });
    title.style.marginBottom = "0.5em";
    const desc = card.createEl("p", {
      text: "Get started by installing the default toolkit\u2014\nor choose individual pieces to suit your vault.",
      cls: "vv-card-desc"
    });
    desc.style.marginBottom = "1.25em";
    const plugin = this.plugin;
    const grid = card.createDiv();
    Object.assign(grid.style, {
      display: "grid",
      gridTemplateColumns: "max-content max-content",
      columnGap: "1rem",
      rowGap: "0.25rem",
      justifyContent: "center",
      justifyItems: "center",
      marginBottom: "1rem"
    });
    const labelRs = grid.createEl("div", { text: "Ruleset" });
    labelRs.style.fontWeight = "bold";
    const labelRef = grid.createEl("div", { text: "Reference (optional)" });
    labelRef.style.fontWeight = "bold";
    const rsCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const refCell = grid.createDiv({ attr: { style: "text-align:center" } });
    const summaryBar = grid.createDiv();
    Object.assign(summaryBar.style, {
      gridColumn: "1 / span 2",
      display: "flex",
      alignItems: "center",
      flexWrap: "wrap",
      gap: "0.5rem",
      fontSize: "0.85em",
      color: "var(--text-muted)",
      fontStyle: "italic",
      marginTop: "0.25rem",
      marginBottom: "1rem"
    });
    const rulesetSpan = summaryBar.createSpan({
      text: `Ruleset: ${plugin.settings.rulesetCompendium ? `D&D 5E (${plugin.settings.rulesetCompendium})` : ""}`
    });
    rulesetSpan.style.fontWeight = "bold";
    summaryBar.createSpan({ text: "References:" });
    const chipsWrapper = summaryBar.createDiv();
    Object.assign(chipsWrapper.style, { display: "flex", gap: "4px" });
    function addChip(id) {
      const ed = AVAILABLE_EDITIONS.find((e) => e.id === id);
      const chip = chipsWrapper.createDiv({
        attr: {
          style: "background: var(--interactive-accent); color: white; padding:2px 6px; border-radius:4px; display:inline-flex; align-items:center; gap:4px;"
        }
      });
      chip.createSpan({ text: ed.label });
      const rem = chip.createSpan({
        text: "\xD7",
        attr: { style: "cursor:pointer; margin-left:4px;" }
      });
      rem.onclick = async () => {
        plugin.settings.rulesetReference = plugin.settings.rulesetReference.filter((x) => x !== id);
        await plugin.saveSettings();
        chip.remove();
        updateInstallButtons();
      };
    }
    ;
    plugin.settings.rulesetReference.forEach((e) => addChip(e));
    const rsDropdown = new import_obsidian5.DropdownComponent(rsCell);
    rsDropdown.addOption("", "Select edition\u2026");
    AVAILABLE_EDITIONS.forEach((ed) => {
      rsDropdown.addOption(ed.id, ed.label);
    });
    rsDropdown.setValue(this.plugin.settings.rulesetCompendium).onChange(async (val) => {
      this.plugin.settings.rulesetCompendium = val;
      await this.plugin.saveSettings();
      const chosen = AVAILABLE_EDITIONS.find((e) => e.id === val);
      rulesetSpan.textContent = chosen ? chosen.label : "";
      chipsWrapper.empty();
      updateInstallButtons();
    });
    const searchWrapperEl = refCell.createDiv({ attr: { style: "text-align:center;" } });
    const searchComp = new import_obsidian5.SearchComponent(searchWrapperEl);
    searchComp.setPlaceholder("Add reference rules\u2026");
    const suggestionInputEl = searchComp.inputEl;
    new class extends import_obsidian5.AbstractInputSuggest {
      constructor(app, inputEl) {
        super(app, inputEl);
      }
      // 1) Propose edition IDs (minus the one they picked as the main ruleset)
      getSuggestions(input) {
        return AVAILABLE_EDITIONS.filter((ed) => ed.id !== plugin.settings.rulesetCompendium).filter((ed) => ed.label.toLowerCase().includes(input.toLowerCase())).map((ed) => ed.id);
      }
      // 2) Render the human-readable label
      renderSuggestion(item, el) {
        const ed = AVAILABLE_EDITIONS.find((e) => e.id === item);
        el.createDiv({ text: ed.label });
      }
      // 3) When they pick one, store its ID and add a chip
      selectSuggestion(item) {
        if (!plugin.settings.rulesetReference.includes(item)) {
          plugin.settings.rulesetReference.push(item);
          plugin.saveSettings();
          addChip(item);
        }
        this.close();
        suggestionInputEl.value = "";
        updateInstallButtons();
      }
    }(this.app, suggestionInputEl);
    const btnRow1 = card.createEl("div", { cls: "vv-button-row" });
    Object.assign(btnRow1.style, {
      display: "flex",
      gap: "0.75em",
      justifyContent: "center",
      marginBottom: "1.5em"
    });
    const installBtn1 = btnRow1.createEl("button", {
      text: "Install Toolkit",
      cls: "mod-cta"
    });
    installBtn1.onClickEvent(
      () => new ConfirmFreshInstallModal(this.app, this.plugin).open()
    );
    const customBtn1 = btnRow1.createEl("button", {
      text: "Custom Install",
      cls: "mod-cta"
    });
    Object.assign(customBtn1.style, {
      background: "none",
      border: "1px solid var(--interactive-accent)",
      color: "var(--text-normal)"
    });
    customBtn1.onClickEvent(() => showCustomInstallModal(this.app, this.plugin));
    const updateInstallButtons = () => {
      const hasRuleset = Boolean(this.plugin.settings.rulesetCompendium);
      installBtn1.toggleAttribute("disabled", !hasRuleset);
      customBtn1.toggleAttribute("disabled", !hasRuleset);
    };
    updateInstallButtons();
    const skipPara = card.createEl("p", { cls: "vv-skip-link" });
    Object.assign(skipPara.style, {
      textAlign: "center",
      marginTop: "0.25em"
    });
    skipPara.createEl("a", {
      text: "Already have the Toolkit? Show me the settings \u2192"
    }).onClickEvent(async () => {
      const markerPath = ".vvunderlore_installed";
      try {
        if (!await this.app.vault.adapter.exists(markerPath)) {
          await this.app.vault.create(markerPath, "");
        }
      } catch (e) {
        console.error("\u274C Failed to create marker file:", e);
      }
      this.plugin.settings.needsInstall = false;
      await this.plugin.saveSettings();
      this.display();
    });
  }
  display() {
    console.log("\u{1F527} display() called, needsInstall =", this.plugin.settings.needsInstall);
    const { containerEl } = this;
    const savedScrollTop = containerEl.scrollTop;
    containerEl.empty();
    this.renderHeader(containerEl);
    if (this.plugin.settings.needsInstall) {
      console.log("\u{1F9EA} Showing first-run card");
      this.renderFirstRunCard(containerEl);
      containerEl.scrollTop = savedScrollTop;
      return;
    }
    ;
    (async () => {
      const versionRow = containerEl.createDiv();
      versionRow.style.marginBottom = "1em";
      versionRow.style.display = "flex";
      versionRow.style.justifyContent = "space-between";
      versionRow.style.alignItems = "flex-start";
      versionRow.style.gap = "2em";
      versionRow.style.flexWrap = "wrap";
      versionRow.style.borderBottom = "1px solid var(--divider-color)";
      const versionInfo = versionRow.createDiv();
      versionInfo.style.display = "flex";
      versionInfo.style.flexDirection = "column";
      versionInfo.style.gap = "0.25em";
      let installed = "Not installed";
      try {
        const verContent = await this.app.vault.adapter.read(".version.json");
        const json = JSON.parse(verContent);
        installed = json.version ?? "Not installed";
      } catch (err) {
        console.warn("Could not read .version.json from vault:", err);
      }
      const latest = this.plugin.settings.latestToolkitVersion ?? "Could not fetch";
      const isMatch = installed === latest;
      const vaultRow = versionInfo.createDiv();
      vaultRow.appendText("Vault Toolkit Version: ");
      this.versionValueEl = vaultRow.createSpan();
      this.versionValueEl.textContent = installed;
      this.versionValueEl.style.fontWeight = "bold";
      this.versionValueEl.style.color = isMatch ? "var(--text-success)" : "var(--text-error)";
      const latestRow = versionInfo.createEl("div", { text: "Latest Official Version: " });
      latestRow.createSpan({
        text: latest,
        attr: { style: "font-weight: bold; color: var(--text-success);" }
      });
      const versionControls = versionRow.createDiv();
      versionControls.style.display = "flex";
      versionControls.style.flexDirection = "column";
      versionControls.style.alignItems = "flex-end";
      versionControls.style.gap = "0.5em";
      const buttonRow = versionControls.createDiv();
      buttonRow.style.display = "flex";
      buttonRow.style.gap = "0.5em";
      const checkBtn = buttonRow.createEl("button", {
        text: installed !== latest ? "Preview Update" : "Check for Updates",
        cls: "mod-cta"
      });
      checkBtn.addEventListener("click", async () => {
        if (installed !== latest) {
          this.plugin.previewUpdatesModal();
        } else {
          await this.plugin.checkForUpdates();
        }
      });
      const changelogBtn = buttonRow.createEl("button", { text: "\u{1F4D6} View Changelog" });
      changelogBtn.addEventListener("click", () => {
        new MarkdownPreviewModal(this.app, this.plugin.changelog).open();
      });
      if (this.plugin.settings.lastChecked) {
        const lastChecked = versionControls.createDiv();
        lastChecked.style.fontSize = "11px";
        lastChecked.style.color = "var(--text-muted)";
        lastChecked.textContent = `Last checked: ${new Date(this.plugin.settings.lastChecked).toLocaleString()}`;
      }
      const fixDetails = containerEl.createEl("details", { cls: "vk-section" });
      const fixHeader = fixDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(fixHeader.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const fixHeaderRow = fixHeader.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const fixTitleBlock = fixHeaderRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      fixTitleBlock.createEl("h5", { text: "Fix Your Vault" });
      fixTitleBlock.createEl("div", {
        text: "Fix and broken, deleted, or misplaced files in your toolkit.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const fixToggleIcon = fixHeaderRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(fixToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        // Rotate around its own center
        userSelect: "none",
        transform: fixDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      fixDetails.ontoggle = () => {
        fixToggleIcon.style.transform = fixDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const fixBody = fixDetails.createDiv({ cls: "vk-section-body" });
      fixBody.style.paddingLeft = "1em";
      const fixButtonRow = fixBody.createDiv();
      fixButtonRow.style.display = "flex";
      fixButtonRow.style.justifyContent = "space-between";
      fixButtonRow.style.alignItems = "center";
      fixButtonRow.style.marginTop = "0.5em";
      const warningContainer = fixButtonRow.createDiv();
      this.forceWarningEl = warningContainer;
      let installedVersionStr = "";
      try {
        const versionFile = await this.plugin.app.vault.adapter.read(".version.json");
        const parsed = JSON.parse(versionFile);
        installedVersionStr = (parsed.version ?? "").trim();
      } catch {
        installedVersionStr = "";
      }
      const latestVersionStr = (this.plugin.settings.latestToolkitVersion ?? "").trim();
      console.log("\u{1F9EA} Comparing versions:", installedVersionStr, latestVersionStr);
      if (installedVersionStr && latestVersionStr && installedVersionStr !== latestVersionStr) {
        const warn = warningContainer.createEl("div", {
          text: `\u26A0\uFE0F New version available (${installedVersionStr} \u2192 ${latestVersionStr}) \u2014 use regular update instead`
        });
        warn.style.fontSize = "0.85em";
        warn.style.color = "var(--text-muted)";
        warn.style.fontStyle = "italic";
        warn.setAttr(
          "title",
          "Force updating while a new version is available may skip important changes."
        );
      }
      const buttonGroup = fixButtonRow.createDiv();
      buttonGroup.style.display = "flex";
      buttonGroup.style.gap = "0.5em";
      buttonGroup.createEl("button", {
        text: "Force Update Vault",
        cls: "mod-cta"
      }).onclick = async () => {
        await this.plugin.forceUpdatePreviewAndConfirm();
      };
      buttonGroup.createEl("button", {
        text: "Undo Update"
      }).onclick = async () => {
        await this.plugin.undoForceUpdate();
      };
      const fixTimestampRow = fixBody.createDiv();
      Object.assign(fixTimestampRow.style, {
        textAlign: "right",
        fontSize: "11px",
        color: "var(--text-muted)",
        marginTop: "0.25em"
      });
      fixTimestampRow.textContent = `Last forced: ${this.plugin.settings.lastForceUpdate ? new Date(this.plugin.settings.lastForceUpdate).toLocaleString() : "Not forced yet"}`;
      const backupDetails = containerEl.createEl("details", { cls: "vk-section" });
      const backupSummary = backupDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(backupSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const backupTitleRow = backupSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const titleBlock = backupTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      titleBlock.createEl("h5", { text: "Vault Backups" });
      titleBlock.createEl("div", {
        text: "The Toolkit will back up your vault automatically before updates. You can also back up manually anytime.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const backupVvIcon = backupTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(backupVvIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: backupDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      backupDetails.ontoggle = () => {
        backupVvIcon.style.transform = backupDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const backupBody = backupDetails.createDiv({ cls: "vk-section-body" });
      backupBody.style.paddingLeft = "1em";
      new import_obsidian5.Setting(backupBody).setName("Auto-Backup Before Update").setDesc("Create a full .zip of the vault before applying version updates. Force updates will only back up the files that will be modified or removed.").addToggle(
        (t) => t.setValue(this.plugin.settings.autoBackupBeforeUpdate).onChange(async (v) => {
          this.plugin.settings.autoBackupBeforeUpdate = v;
          await this.plugin.saveSettings();
        })
      );
      new import_obsidian5.Setting(backupBody).setName("Manual Backup").setDesc("Immediately create a zip backup of your vault").addButton(
        (b) => b.setButtonText("Backup Vault Now").setCta().onClick(async () => {
          const path2 = await this.plugin.backupManager.backupVaultToZip("manual");
          new import_obsidian5.Notice(`Backup created: ${path2}`);
        })
      );
      new import_obsidian5.Setting(backupBody).setName("Open Backups Folder").setDesc("Open the backups folder on disk. MacOS: Cant see it? Hit Shift+Cmd+(period).").addButton(
        (b) => b.setButtonText("Open Folder").onClick(async () => {
          try {
            const vaultBasePath = this.plugin.app.vault.adapter.getBasePath();
            const backupFolderPath = path.join(
              vaultBasePath,
              ".vault-backups"
            );
            const { shell } = window.require("electron");
            const result = await shell.openPath(backupFolderPath);
            if (typeof result === "string" && result.length > 0) {
              console.error("\u274C shell.openPath error:", result);
              new import_obsidian5.Notice("Could not open backups folder. See console.");
            }
          } catch (err) {
            console.error("\u274C Could not open backups folder:", err);
            new import_obsidian5.Notice("Could not open backups folder. See console.");
          }
        })
      );
      backupBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin-top: 1.5em;"
        }
      });
      const customizationDetails = containerEl.createEl("details", { cls: "vk-section" });
      const customizationSummary = customizationDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(customizationSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "flex-start",
        padding: "0.5em 0",
        cursor: "pointer"
      });
      const titleRow = customizationSummary.createDiv({
        attr: {
          style: `
			display: flex;
			width: 100%;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const customizationTitleBlock = titleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      const h5 = customizationTitleBlock.createEl("h5");
      h5.appendText("Custom File Management ");
      customizationTitleBlock.createEl("div", {
        text: "Skip updates on certain files or remap relocated Toolkit files so they can update.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const customVvIcon = titleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(customVvIcon.style, {
        fontWeight: "bold",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: customizationDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      customizationDetails.ontoggle = () => {
        customVvIcon.style.transform = customizationDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const customizationBodyWrapper = customizationDetails.createDiv({
        attr: { style: "padding-left: 1em; padding-right: 1em;" }
      });
      const customizationBody = customizationBodyWrapper.createDiv({ cls: "vk-section-body" });
      const skipSection = customizationBody.createDiv();
      const settingItem = skipSection.createDiv({ cls: "setting-item" });
      const info = settingItem.createDiv({ cls: "setting-item-info" });
      info.createDiv({ text: "Skip Toolkit Items", cls: "setting-item-name" });
      info.createDiv({
        text: "Files listed here will be ignored during toolkit updates.",
        cls: "setting-item-description"
      });
      const control = settingItem.createDiv({ cls: "setting-item-control" });
      const dropdown = new import_obsidian5.DropdownComponent(control);
      dropdown.selectEl.style.minWidth = "220px";
      dropdown.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, f.displayName ?? f.path.split("/").pop()));
      this.plugin.manifestCache.folders.filter((f) => !f.optional).forEach((f) => dropdown.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)"));
      new import_obsidian5.ButtonComponent(control).setButtonText("Add").setCta().onClick(async () => {
        const key = dropdown.getValue();
        if (!key) return new import_obsidian5.Notice("Pick something to skip.");
        if (!this.plugin.settings.customPaths.some((c) => c.manifestKey === key)) {
          this.plugin.settings.customPaths.push({ vaultPath: key, manifestKey: key, doUpdate: false });
          await this.plugin.saveSettings();
          renderSkipTable();
        }
      });
      const skipTableWrapper = skipSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top:0.75em" } });
      const renderSkipTable = () => {
        skipTableWrapper.empty();
        const items = this.plugin.settings.customPaths.filter((c) => !c.doUpdate);
        if (items.length === 0) {
          const emptyMsg = skipTableWrapper.createEl("div", { text: "No items skipped." });
          emptyMsg.style.textAlign = "center";
          emptyMsg.style.opacity = "0.6";
          emptyMsg.style.padding = "0.5em";
          return;
        }
        const table = skipTableWrapper.createEl("table", { cls: "setting-table" });
        const header = table.createTHead().insertRow();
        header.insertCell().textContent = "Skipped Files/Folders";
        const body = table.createTBody();
        items.forEach((entry) => {
          const row = body.insertRow();
          const contentCell = row.insertCell();
          contentCell.colSpan = 1;
          contentCell.style.display = "flex";
          contentCell.style.justifyContent = "space-between";
          contentCell.style.paddingLeft = "4em";
          contentCell.style.alignItems = "center";
          contentCell.style.gap = "1em";
          contentCell.style.fontWeight = "bold";
          contentCell.createSpan({ text: entry.manifestKey });
          const removeLink = contentCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.style.fontSize = "0.8em";
          removeLink.style.color = "var(--text-faint)";
          removeLink.style.textDecoration = "underline";
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderSkipTable();
          };
        });
      };
      renderSkipTable();
      customizationBody.createEl("div", {
        attr: { style: "height: 1em; border-top: 1px solid var(--divider-color); margin: 1em 0;" }
      });
      const remapSection = customizationBody.createDiv();
      const remapSetting = remapSection.createDiv({ cls: "setting-item" });
      const remapInfo = remapSetting.createDiv({ cls: "setting-item-info" });
      remapInfo.createDiv({ text: "Remap File Paths", cls: "setting-item-name" });
      remapInfo.createDiv({
        text: "Remap toolkit files vault paths if you chose to move anything. Moving files without remapping will result in duplicate and/or out-of-date files after update.",
        cls: "setting-item-description"
      });
      const remapControlBlock = remapSection.createDiv({ cls: "vk-inline-add-controls" });
      remapControlBlock.style.flexWrap = "wrap";
      remapControlBlock.style.marginTop = "0.5em";
      let remapDrop;
      let remapInput;
      remapDrop = new import_obsidian5.DropdownComponent(remapControlBlock);
      remapDrop.selectEl.style.minWidth = "220px";
      remapDrop.addOption("", "Select an item\u2026");
      this.plugin.manifestCache.files.forEach(
        (f) => remapDrop.addOption(f.path, f.displayName ?? f.path.split("/").pop())
      );
      this.plugin.manifestCache.folders.forEach(
        (f) => remapDrop.addOption(f.path, (f.displayName ?? f.path.split("/").pop()) + "/ (folder)")
      );
      const searchWrapper = remapControlBlock.createDiv();
      const searchComponent = new import_obsidian5.SearchComponent(searchWrapper);
      searchComponent.setPlaceholder("Search vault path\u2026");
      new FilePathSuggester(this.app, searchComponent.inputEl);
      remapInput = searchComponent.inputEl;
      new import_obsidian5.ButtonComponent(remapControlBlock).setButtonText("Add Remap").setCta().onClick(async () => {
        const key = remapDrop.getValue();
        const vp = remapInput.value.trim();
        if (!key || !vp) return new import_obsidian5.Notice("Select an item and enter a vault path.");
        if (!this.app.vault.getAbstractFileByPath(vp)) return new import_obsidian5.Notice("Vault path not found.");
        this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => c.manifestKey !== key);
        this.plugin.settings.customPaths.push({ manifestKey: key, vaultPath: vp, doUpdate: true });
        await this.plugin.saveSettings();
        remapInput.value = "";
        remapDrop.setValue("");
        renderRemapPanel();
      });
      const remapTableWrapper = remapSection.createDiv({ cls: "vk-table-wrapper", attr: { style: "margin-top: 0.75em" } });
      const renderRemapPanel = () => {
        remapTableWrapper.empty();
        const toRemap = this.plugin.settings.customPaths.filter((c) => c.doUpdate);
        if (toRemap.length === 0) {
          const emptyMsg = remapTableWrapper.createEl("div", { text: "No custom paths defined." });
          emptyMsg.style.textAlign = "center";
          emptyMsg.style.opacity = "0.6";
          emptyMsg.style.padding = "0.5em";
          return;
        }
        const table = remapTableWrapper.createEl("table", { cls: "setting-table" });
        const head = table.createTHead().insertRow();
        ["Toolit Item", "New Vault Path", ""].forEach((txt) => head.insertCell().textContent = txt);
        const body = table.createTBody();
        toRemap.forEach((entry) => {
          const row = body.insertRow();
          row.insertCell().textContent = entry.manifestKey;
          row.insertCell().textContent = entry.vaultPath;
          const removeCell = row.insertCell();
          const removeLink = removeCell.createEl("a", { text: "Remove entry", href: "#" });
          removeLink.style.fontSize = "0.8em";
          removeLink.style.color = "var(--text-faint)";
          removeLink.style.textDecoration = "underline";
          removeLink.onclick = async (e) => {
            e.preventDefault();
            this.plugin.settings.customPaths.remove(entry);
            await this.plugin.saveSettings();
            renderRemapPanel();
          };
        });
      };
      renderRemapPanel();
      customizationBody.createEl("div", {
        attr: {
          style: "border-top: 1px solid var(--divider-color); margin: 0.5em 0;"
        }
      });
      const highlightDetails = containerEl.createEl("details", { cls: "vk-section" });
      const highlightSummary = highlightDetails.createEl("summary", { cls: "vk-section-header" });
      Object.assign(highlightSummary.style, {
        display: "flex",
        flexDirection: "column",
        alignItems: "stretch",
        padding: "0.5em 0",
        borderBottom: "1px solid var(--divider-color)",
        cursor: "pointer"
      });
      const highlightTitleRow = highlightSummary.createDiv({
        attr: {
          style: `
			display: flex;
			justify-content: space-between;
			align-items: flex-end;
			`
        }
      });
      const hlTitleBlock = highlightTitleRow.createDiv({
        attr: { style: "display: flex; flex-direction: column;" }
      });
      hlTitleBlock.createEl("h5", { text: "File Highlights" });
      hlTitleBlock.createEl("div", {
        text: "Toggle on/off the highlighting of Toolkit-specific files. Also make the highlights cool colors.",
        cls: "setting-item-description",
        attr: { style: "margin-top: 0.25em;" }
      });
      const hlToggleIcon = highlightTitleRow.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
      Object.assign(hlToggleIcon.style, {
        fontWeight: "bold",
        display: "inline-block",
        transition: "transform 0.2s ease",
        transformOrigin: "50% 50%",
        userSelect: "none",
        transform: highlightDetails.open ? "rotate(0deg)" : "rotate(180deg)"
      });
      highlightDetails.ontoggle = () => {
        hlToggleIcon.style.transform = highlightDetails.open ? "rotate(0deg)" : "rotate(180deg)";
      };
      const highlightBody = highlightDetails.createDiv({ cls: "vk-section-body" });
      highlightBody.style.paddingLeft = "1em";
      new import_obsidian5.Setting(highlightBody).setName("Enable File/Folder Highlighting").setDesc("Any file/folder installed by VVunderlore will have this background.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.highlightEnabled).onChange(async (enabled) => {
          this.plugin.settings.highlightEnabled = enabled;
          await this.plugin.saveSettings();
          if (enabled) {
            this.plugin.enableHighlight();
          } else {
            this.plugin.disableHighlight();
          }
          renderHighlightColorPickers();
        });
      });
      const colorPickerWrapper = highlightBody.createDiv();
      const renderHighlightColorPickers = () => {
        colorPickerWrapper.empty();
        if (!this.plugin.settings.highlightEnabled) {
          return;
        }
        new import_obsidian5.Setting(colorPickerWrapper).setName("Light Mode Highlight Color").setDesc("Choose the background color for files/folders in Light mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorLight).onChange(async (newColor) => {
            this.plugin.settings.highlightColorLight = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
        new import_obsidian5.Setting(colorPickerWrapper).setName("Dark Mode Highlight Color").setDesc("Choose the background color for files/folders in Dark mode.").addColorPicker((picker) => {
          picker.setValue(this.plugin.settings.highlightColorDark).onChange(async (newColor) => {
            this.plugin.settings.highlightColorDark = newColor;
            await this.plugin.saveSettings();
            this.plugin.disableHighlight();
            this.plugin.enableHighlight();
          });
        });
      };
      renderHighlightColorPickers();
      renderSkipTable();
      renderRemapPanel();
      const removeDemoSetting = new import_obsidian5.Setting(containerEl);
      removeDemoSetting.settingEl.style.borderTop = "none";
      removeDemoSetting.setName("Remove Demo Files").setDesc("Delete every \u201Coptional\u201D demo file and folder from your vault.").addButton(
        (button) => button.setButtonText("Remove Demo Files").onClick(async () => {
          const optionalFileEntries = this.plugin.manifestCache.files.filter((f) => f.optional);
          const optionalFolderEntries = this.plugin.manifestCache.folders.filter((f) => f.optional);
          const totalCountFiles = optionalFileEntries.length;
          const totalCountFolders = optionalFolderEntries.length;
          const totalCount = totalCountFiles + totalCountFolders;
          if (totalCount === 0) {
            new import_obsidian5.Notice("No \u201Coptional\u201D demo files or folders to remove.");
            return;
          }
          const userConfirmed = await new Promise((resolve) => {
            const confirmModal = new class extends import_obsidian5.Modal {
              constructor(app) {
                super(app);
              }
              onOpen() {
                this.contentEl.empty();
                this.contentEl.createEl("h2", { text: "Confirm Removal" });
                this.contentEl.createEl("p", {
                  text: `This will permanently delete ${totalCountFiles} file(s) and ${totalCountFolders} folder(s). Continue?`
                });
                const btnRow = this.contentEl.createEl("div");
                Object.assign(btnRow.style, {
                  display: "flex",
                  justifyContent: "flex-end",
                  gap: "0.5em",
                  marginTop: "1.5em"
                });
                btnRow.createEl("button", { text: "Cancel" }).onclick = () => {
                  resolve(false);
                  this.close();
                };
                btnRow.createEl("button", { text: "Yes, Remove", cls: "mod-danger" }).onclick = () => {
                  resolve(true);
                  this.close();
                };
              }
              onClose() {
                this.contentEl.empty();
              }
            }(this.app);
            confirmModal.open();
          });
          if (!userConfirmed) {
            return;
          }
          let filesDeleted = 0;
          for (const fileEntry of optionalFileEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === fileEntry.key);
            const vaultPath = mapped?.vaultPath ?? fileEntry.path;
            if (await this.app.vault.adapter.exists(vaultPath)) {
              try {
                await this.app.vault.adapter.remove(vaultPath);
                filesDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional file ${vaultPath}`, err);
              }
            }
          }
          let foldersDeleted = 0;
          for (const folderEntry of optionalFolderEntries) {
            const mapped = this.plugin.settings.customPaths.find((c) => c.manifestKey === folderEntry.key);
            const vaultFolderPath = mapped?.vaultPath ?? folderEntry.path;
            if (await this.app.vault.adapter.exists(vaultFolderPath)) {
              try {
                await this.app.vault.adapter.rmdir(vaultFolderPath, true);
                foldersDeleted++;
              } catch (err) {
                console.error(`Failed to delete optional folder ${vaultFolderPath}`, err);
              }
            }
          }
          this.plugin.settings.customPaths = this.plugin.settings.customPaths.filter((c) => {
            const isOptFile = optionalFileEntries.some((f) => f.key === c.manifestKey);
            const isOptFolder = optionalFolderEntries.some((f) => f.key === c.manifestKey);
            return !isOptFile && !isOptFolder;
          });
          await this.plugin.saveSettings();
          new import_obsidian5.Notice(`Deleted ${filesDeleted} file(s) and ${foldersDeleted} folder(s).`);
          this.display();
        })
      );
      const footer = containerEl.createDiv({ cls: "setting-item" });
      Object.assign(footer.style, {
        fontSize: "0.85em",
        color: "var(--text-muted)",
        marginTop: "2em"
      });
      footer.createEl("span", {
        text: `VVunderlore Toolkit Plugin v${this.plugin.manifest.version} \u2022 `
      });
      footer.createEl("a", {
        text: "View on GitHub",
        href: "https://github.com/slamwise0001/vvunderlore-toolkit-plugin",
        attr: { target: "_blank" }
      });
      containerEl.scrollTop = savedScrollTop;
    })();
  }
  async updateVersionDisplay() {
    if (!this.versionValueEl || !this.forceWarningEl) return;
    let installed = "";
    try {
      const ver = await this.plugin.app.vault.adapter.read(".version.json");
      installed = JSON.parse(ver).version ?? "";
    } catch {
    }
    const latest = (this.plugin.settings.latestToolkitVersion ?? "").trim();
    const isMatch = installed === latest;
    this.versionValueEl.textContent = installed || "Not installed";
    this.versionValueEl.style.color = isMatch ? "var(--text-success)" : "var(--text-error)";
    this.forceWarningEl.empty();
    if (installed && latest && installed !== latest) {
      const warn = this.forceWarningEl.createDiv({
        text: `\u26A0\uFE0F New version available (${installed} \u2192 ${latest}) \u2014 use regular update instead`
      });
      warn.style.cssText = `
			font-size: 0.85em;
			color: var(--text-muted);
			font-style: italic;
		  `;
      warn.setAttr("title", "Force updating while a new version is available may skip important changes.");
    }
  }
};

// src/fileCacheManager.ts
var import_crypto = require("crypto");
var ToolkitFileCacheManager = class {
  constructor(vault, initialCache, saveCallback) {
    this.vault = vault;
    this.cache = initialCache || {};
    this.save = saveCallback;
  }
  hashContent(content) {
    return (0, import_crypto.createHash)("sha256").update(content).digest("hex");
  }
  async isUpToDate(vaultPath) {
    const entry = this.cache[vaultPath];
    if (!entry) {
      return false;
    }
    const exists = await this.vault.adapter.exists(vaultPath);
    if (!exists) {
      return false;
    }
    const content = await this.vault.adapter.read(vaultPath);
    const localHash = this.hashContent(content);
    const isSame = localHash === entry.hash;
    return isSame;
  }
  async updateCache(vaultPath, content, githubPath, saveNow = true) {
    this.cache[vaultPath] = {
      hash: this.hashContent(content),
      githubPath
    };
    if (saveNow) await this.save();
  }
  getCache() {
    return this.cache;
  }
  getTrackedFiles() {
    return Object.keys(this.cache);
  }
  getGitHubPath(vaultPath) {
    return this.cache[vaultPath]?.githubPath;
  }
  resetCache() {
    this.cache = {};
  }
  async removeFromCache(vaultPath) {
    delete this.cache[vaultPath];
    await this.save();
  }
};

// src/backup/BackupManager.ts
var import_obsidian6 = require("obsidian");
var import_path = require("path");
var import_fs = require("fs");
var BackupManager = class {
  constructor(vault) {
    this.vault = vault;
  }
  /**
   * Mirror every vault file (excluding .obsidian & backups) into a timestamped folder,
   * then prune to keep only the latest N full snapshots.
   * @param label Optional suffix for the backup folder name
   * @param maxFullBackups Number of full snapshots to retain (default: 5)
   */
  async backupVaultMirror(label, maxFullBackups = 5) {
    const ts = (/* @__PURE__ */ new Date()).toISOString().replace(/[:.]/g, "-");
    const tag = label ? `-${label}` : "";
    const base = (0, import_obsidian6.normalizePath)(`.vault-backups/full/${ts}${tag}`);
    console.log(`[BackupManager] Starting mirror backup: ${base}`);
    await this.ensureFolderExists(base);
    for (const file of this.vault.getFiles()) {
      if (file.path.startsWith(".vault-backups/") || file.path.startsWith(".obsidian/")) {
        continue;
      }
      const content = await this.vault.read(file);
      const target = (0, import_obsidian6.normalizePath)(`${base}/${file.path}`);
      await this.ensureFolderExists((0, import_path.dirname)(target));
      await this.vault.create(target, content);
    }
    console.log("[BackupManager] Mirror backup complete. Pruning old backups...");
    await this.pruneFullBackups(base, maxFullBackups);
    return base;
  }
  /**
   * Legacy alias for mirror-based backups
   */
  async backupVaultToZip(label) {
    return this.backupVaultMirror(label);
  }
  /**
   * Deletes oldest full backup folders, keeping only the most recent `keep` snapshots.
   */
  async pruneFullBackups(currentPath, keep) {
    const root = (0, import_obsidian6.normalizePath)(".vault-backups/full");
    await this.ensureFolderExists(root);
    if (!await this.vault.adapter.exists(root)) {
      return;
    }
    const listing = await this.vault.adapter.list(root);
    const rawFolders = Array.isArray(listing) ? listing : "folders" in listing ? listing.folders : [];
    const folders = rawFolders.map((f) => (0, import_path.basename)(f));
    const sorted = [...folders].sort((a, b) => b.localeCompare(a));
    const adapterAny = this.vault.adapter;
    const fsRoot = adapterAny.basePath ? (0, import_path.join)(adapterAny.basePath, root) : null;
    if (!fsRoot) {
      return;
    }
    for (let i = keep; i < sorted.length; i++) {
      const name = sorted[i];
      const vaultPath = (0, import_obsidian6.normalizePath)(`${root}/${name}`);
      if (vaultPath === currentPath) {
        continue;
      }
      const removePath = (0, import_path.join)(fsRoot, name);
      try {
        await import_fs.promises.rm(removePath, { recursive: true, force: true });
      } catch (e) {
      }
      const af = this.vault.getAbstractFileByPath(vaultPath);
      if (af) {
        await this.vault.delete(af);
      }
    }
  }
  /**
   * Recursively ensures that a directory exists in the vault.
   */
  async ensureFolderExists(folderPath) {
    if (!folderPath || await this.vault.adapter.exists(folderPath)) {
      return;
    }
    const parent = (0, import_path.dirname)(folderPath);
    await this.ensureFolderExists(parent);
    await this.vault.createFolder(folderPath);
  }
};

// src/main.ts
var loadingIcon = "data:image/png;base64,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";
var InstallingModal2 = class extends import_obsidian7.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.contentEl.empty();
    const img = this.contentEl.createEl("img", {
      attr: { src: loadingIcon, alt: "Installing\u2026" }
    });
    Object.assign(img.style, {
      display: "block",
      margin: "1em auto 0.5em",
      width: "100px",
      height: "100px"
    });
    img.animate(
      [
        { transform: "rotate(0deg)" },
        { transform: "rotate(-360deg)" }
      ],
      {
        duration: 1500,
        // one and a half seconds per revolution
        iterations: Infinity,
        easing: "linear"
      }
    );
    const txt = this.contentEl.createDiv({ text: "Installing\u2026", cls: "mod-quiet" });
    txt.style.cssText = "font-style: italic; color: var(--text-muted); text-align: center; padding: 1em;";
  }
  onClose() {
    this.contentEl.empty();
  }
};
var DEFAULT_SETTINGS = {
  installedVersion: "1.0.0",
  customizeUpdates: false,
  updateTargets: {
    tools: true,
    toolsPath: "Tools",
    templates: true,
    templatesPath: "Extras/Templates",
    omninomicon: true,
    omninomiconPath: "Adventures/Omninomicon.md",
    spellbook: true,
    spellbookPath: "Compendium/Spells/_Spellbook.md"
  },
  latestDefaults: void 0,
  pathOverrides: {},
  backupFiles: {},
  backupPath: "",
  autoBackup: false,
  lastBackupTime: "",
  backupError: "",
  customPaths: [],
  autoBackupBeforeUpdate: true,
  needsInstall: true,
  highlightEnabled: false,
  highlightColorLight: "rgb(107, 146, 120)",
  highlightColorDark: "rgb( 50,  70,  50)",
  rulesetCompendium: "",
  rulesetReference: []
};
var VVunderloreToolkitPlugin = class extends import_obsidian7.Plugin {
  constructor() {
    super(...arguments);
    this.manifestCache = { files: [], folders: [] };
    this.changelog = "";
    this.autoCheckInterval = null;
    this.oldPathsByGithub = {};
    this.styleEl = null;
    this.excludedPaths = [
      ".obsidian",
      ".DS_Store",
      ".gitignore",
      ".gitattributes",
      ".github",
      "README.md",
      ".version.json",
      "plugins",
      "Compendium"
    ];
  }
  // ─── HELPERS ────────────────────────────────────────────────────────
  /** Given a GitHub path, return the overridden vault path or the original. */
  resolveVaultPath(githubPath) {
    const custom = this.settings.customPaths.find(
      (c) => c.manifestKey === githubPath || c.manifestKey === this.keyFor(githubPath)
    );
    return custom?.vaultPath ?? githubPath;
  }
  /** Convert “some/folder/file.md” → “some-folder-file” (lowercased, no extension). */
  keyFor(path2) {
    return path2.replace(/[/\\]/g, "-").replace(/\.[^.]+$/, "").toLowerCase();
  }
  isExcluded(path2) {
    return this.excludedPaths.some(
      (ex) => path2 === ex || path2.startsWith(`${ex}/`) || path2.includes(`/${ex}/`) || path2.endsWith(`/${ex}`) || path2.includes(`/${ex}`)
    );
  }
  // ─── CUSTOM INSTALL LOGIC ───────────────────────────────────────────
  async performCustomInstall(toInstall) {
    const allFiles = this.app.vault.getAllLoadedFiles().filter((f) => f instanceof import_obsidian7.TFile).map((f) => f.path);
    const nonMarkerFiles = allFiles.filter((p) => p !== ".vvunderlore_installed");
    if (nonMarkerFiles.length > 0 && this.settings.autoBackupBeforeUpdate) {
      const folder = await this.backupManager.backupVaultMirror("pre-custom-install");
      new import_obsidian7.Notice(`Backup before custom\u2010install created at: ${folder}`);
    }
    for (const entry of toInstall) {
      if (entry.isFolder) {
        if (!await this.app.vault.adapter.exists(entry.path)) {
          await this.app.vault.createFolder(entry.path);
          console.log(`Created folder: ${entry.path}`);
        }
      } else {
        const manifestEntry = this.manifestCache.files.find(
          (f) => f.path === entry.path
        );
        if (!manifestEntry) {
          console.warn(`Could not find manifest entry for file: ${entry.path}`);
          continue;
        }
        await this.updateEntryFromManifest(manifestEntry, true);
      }
    }
    await this.updateVersionFile();
    this.settings.installedVersion = this.settings.latestToolkitVersion ?? this.settings.installedVersion;
    this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
    this.settings.needsInstall = false;
    await this.saveSettings();
    const markerPath = ".vvunderlore_installed";
    if (!await this.app.vault.adapter.exists(markerPath)) {
      await this.app.vault.create(markerPath, "");
    }
    this.settings.needsInstall = false;
    this.settings.highlightEnabled = true;
    await this.saveSettings();
    this.enableHighlight();
    if (this.settingsTab) {
      this.settingsTab.display();
    }
    new import_obsidian7.Notice("\u2705 Custom install complete \u2026");
  }
  // ─── HIGHLIGHTING (Light + Dark Mode) ──────────────────────────────
  get highlightCSS() {
    const light = this.settings.highlightColorLight.trim() || "rgba(107,146,120,1)";
    const dark = this.settings.highlightColorDark.trim() || "rgba( 50, 70, 50,1)";
    const fileSelectors = this.manifestCache.files.map((f) => {
      const escaped = f.path.replace(/"/g, '\\"');
      return `.nav-file-title[data-path="${escaped}"]`;
    });
    const folderSelectors = this.manifestCache.folders.map((f) => {
      const escaped = f.path.replace(/"/g, '\\"');
      return `.nav-folder-title[data-path="${escaped}"]`;
    });
    const lines = [
      `:root {`,
      `  --vvunderlore-toolkit-highlight: ${light};`,
      `}`,
      ``,
      `body.theme-dark {`,
      `  --vvunderlore-toolkit-highlight: ${dark};`,
      `}`,
      ``
    ];
    if (fileSelectors.length) {
      lines.push(`${fileSelectors.join(", ")} {`);
      lines.push(`  background-color: var(--vvunderlore-toolkit-highlight);`);
      lines.push(`  border-radius: 3px;`);
      lines.push(`}`);
      lines.push(``);
    }
    if (folderSelectors.length) {
      lines.push(`${folderSelectors.join(", ")} {`);
      lines.push(`  background-color: var(--vvunderlore-toolkit-highlight);`);
      lines.push(`  border-radius: 3px;`);
      lines.push(`}`);
      lines.push(``);
    }
    return lines.join("\n");
  }
  enableHighlight() {
    if (this.styleEl) return;
    this.styleEl = document.createElement("style");
    this.styleEl.id = "vvunderlore-highlight-inject";
    this.styleEl.textContent = this.highlightCSS;
    document.head.appendChild(this.styleEl);
  }
  disableHighlight() {
    if (!this.styleEl) return;
    this.styleEl.remove();
    this.styleEl = null;
  }
  // ─── REMOTE BASELINE CACHING ─────────────────────────────────────────
  async fetchRemoteBaseline() {
    console.log("\u{1F501} fetchRemoteBaseline() called");
    if (!this.manifestCache || !Array.isArray(this.manifestCache.files)) {
      console.warn("\u26A0\uFE0F manifestCache is missing or invalid");
      return;
    }
    for (const entry of this.manifestCache.files) {
      try {
        const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${entry.path}`;
        const remoteText = await (await fetch(rawUrl)).text();
        const resolved = this.resolveVaultPath(entry.path);
        if (resolved !== entry.path) {
          await this.fileCacheManager.removeFromCache(entry.path);
        }
        await this.fileCacheManager.updateCache(
          resolved,
          remoteText,
          entry.path,
          false
        );
      } catch (e) {
        console.error(`Failed to fetch raw baseline for ${entry.path}`, e);
      }
    }
    console.log("\u{1F4E6} Final cache:", this.fileCacheManager.getCache());
  }
  // ─── MARKER FILE CHECKS (first‐run detection) ───────────────────────
  async checkMarkerFile() {
    const devForce = window.forceNeedsInstall;
    if (devForce) {
      this.settings.needsInstall = true;
      console.log("\u{1F9EA} DEV MODE: Forcing needsInstall = true");
      await this.saveSettings();
      if (this.settingsTab) this.settingsTab.display();
      return;
    }
    const markerPath = ".TEST_vvunderlore_installed";
    const markerExists = await this.app.vault.adapter.exists(markerPath);
    this.settings.needsInstall = !markerExists;
    console.log(
      markerExists ? "\u2705 Marker file found \u2192 needsInstall = false" : "\u{1F7E1} Marker file NOT found \u2192 needsInstall = true"
    );
    await this.saveSettings();
    if (this.settingsTab) {
      this.settingsTab.display();
    }
  }
  // ─── MANIFEST SYNC ────────────────────────────────────────────────────
  async syncManifest() {
    try {
      const res = await fetch(
        "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/manifest.json"
      );
      if (!res.ok) throw new Error(`Failed to fetch manifest: ${res.statusText}`);
      const manifest = await res.json();
      this.settings.latestDefaults = manifest.defaultPaths || {};
      this.manifestCache = manifest;
      const manifestContent = JSON.stringify(manifest, null, 2);
      await this.app.vault.adapter.write("manifest.json", manifestContent);
      await this.saveSettings();
      console.log("Manifest synced and local manifest updated.");
    } catch (error) {
      console.error("Error syncing manifest:", error);
      new import_obsidian7.Notice("Failed to sync manifest.");
    }
  }
  // ─── PLUGIN LIFECYCLE ─────────────────────────────────────────────────
  async onload() {
    await this.loadSettings();
    this.backupManager = new BackupManager(this.app.vault);
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      this.settings.fileCache ?? {},
      async () => await this.saveSettings()
    );
    this.settingsTab = new ToolkitSettingsTab(this.app, this);
    this.addSettingTab(this.settingsTab);
    try {
      const content = await this.app.vault.adapter.read("manifest.json");
      this.manifestCache = JSON.parse(content);
      console.log("\u2705 Loaded manifest from vault:", this.manifestCache);
    } catch (err) {
      console.warn("Manifest not found in vault; will fetch from GitHub shortly.");
    }
    if (this.settings.highlightEnabled && !this.settings.needsInstall) {
      this.enableHighlight();
    }
    setTimeout(async () => {
      await this.syncManifest();
      await this.showIndexingModal();
      await this.checkForUpdates();
      this.oldPathsByGithub = Object.entries(
        this.fileCacheManager.getCache()
      ).reduce((map, [vaultPath, entry]) => {
        map[entry.githubPath] = vaultPath;
        return map;
      }, {});
      console.log("\u{1F4E6} Cached Files:", this.fileCacheManager.getCache());
    }, 250);
    this.scheduleAutoUpdateCheck();
    if (!this.settings.customPaths) {
      this.settings.customPaths = [];
    }
    try {
      const raw = await this.app.vault.adapter.read("manifest.json");
      const manifest = JSON.parse(raw);
      const entries = [...manifest.folders || [], ...manifest.files || []];
      this.requiresGraph = /* @__PURE__ */ new Map();
      for (const e of entries) {
        this.requiresGraph.set(e.key, e.requires ?? []);
      }
    } catch (e) {
      console.warn("Could not build requiresGraph (manifest.json missing or invalid).");
      this.requiresGraph = /* @__PURE__ */ new Map();
    }
  }
  onunload() {
    this.disableHighlight();
    if (this.autoCheckInterval) {
      clearInterval(this.autoCheckInterval);
    }
  }
  scheduleAutoUpdateCheck() {
    this.autoCheckInterval = window.setInterval(() => {
      this.checkForUpdates();
    }, 60 * 60 * 1e3);
  }
  // ─── BACKUP & UNDO ────────────────────────────────────────────────────
  async backupFile(filePath, content) {
    this.settings.backupFiles = this.settings.backupFiles || {};
    this.settings.backupFiles[filePath] = content;
    await this.saveSettings();
    console.log(`Backup stored for ${filePath}`);
  }
  async undoForceUpdate() {
    if (!this.settings.backupFiles || Object.keys(this.settings.backupFiles).length === 0) {
      new import_obsidian7.Notice("No backups available to restore.");
      return;
    }
    for (const [filePath, backupContent] of Object.entries(this.settings.backupFiles)) {
      if (await this.app.vault.adapter.exists(filePath)) {
        await this.app.vault.adapter.write(filePath, backupContent);
        console.log(`Restored ${filePath}`);
      } else {
        await this.app.vault.create(filePath, backupContent);
        console.log(`Recreated and restored ${filePath}`);
      }
    }
    new import_obsidian7.Notice("\u2705 Force update undone.");
    this.settings.backupFiles = {};
    await this.saveSettings();
  }
  // ─── FOLDER SYNC ───────────────────────────────────────────────────────
  async syncMissingFolders() {
    if (this.manifestCache && this.manifestCache.folders) {
      for (const folderEntry of this.manifestCache.folders) {
        const folderPath = folderEntry.path;
        if (!await this.app.vault.adapter.exists(folderPath)) {
          await this.app.vault.createFolder(folderPath);
          console.log(`\u{1F4C1} Created missing folder: ${folderPath}`);
        }
      }
    }
  }
  // ─── FORCE-UPDATE PREVIEW ──────────────────────────────────────────────
  async buildForceUpdatePreview() {
    const previewList = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          previewList.push({
            filePath: vp,
            action: "deny-listed \u2013 will not update",
            selected: false
          });
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.key);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        if (!exists) {
          previewList.push({
            filePath: vp,
            action: `new file${tag}`,
            selected: true
          });
        } else if (!await this.fileCacheManager.isUpToDate(vp)) {
          previewList.push({
            filePath: vp,
            action: `will be overwritten${tag}`,
            selected: true
          });
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        if (!await this.app.vault.adapter.exists(fld.path) && !isDenyFolder) {
          previewList.push({
            filePath: fld.path,
            action: "missing folder (will be created)",
            selected: true,
            isFolder: true
          });
        }
      }
      return previewList;
    }
    for (const entry of this.manifestCache.files) {
      if (entry.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => entry.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
      const exists = await this.app.vault.adapter.exists(vaultPath);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vaultPath);
      let tag = "";
      if (vaultPath !== entry.path) tag = " (remapped)";
      if (!exists) {
        previewList.push({
          filePath: vaultPath,
          action: `new file${tag}`,
          selected: true
        });
      } else if (!upToDate) {
        previewList.push({
          filePath: vaultPath,
          action: `will be overwritten${tag}`,
          selected: true
        });
      }
    }
    for (const entry of this.manifestCache.folders) {
      if (entry.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(entry.path);
      if (!await this.app.vault.adapter.exists(entry.path) && !isDenyFolder) {
        previewList.push({
          filePath: entry.path,
          action: "missing folder (will be created)",
          selected: true,
          isFolder: true
        });
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        previewList.push({
          filePath: prevPath,
          action: `moved \u2192 ${manifestPath}`,
          selected: true
        });
      }
    }
    return previewList;
  }
  async forceUpdatePreviewAndConfirm() {
    const previewList = await this.buildForceUpdatePreview();
    const denyItems = [];
    const normalItems = [];
    for (const item of previewList) {
      if (item.action.startsWith("deny-listed")) {
        denyItems.push(item);
      } else {
        normalItems.push(item);
      }
    }
    const modal = new class extends import_obsidian7.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.contentEl.empty();
        this.titleEl.setText("Force Update Preview");
        this.contentEl.createEl("p", {
          text: 'The following items will be updated. Uncheck any items you do NOT want to change, then click "Confirm and Update".'
        });
        if (this.normal.length) {
          const normalContainer = this.contentEl.createEl("div");
          Object.assign(normalContainer.style, {
            maxHeight: "300px",
            overflowY: "auto",
            marginTop: "1em"
          });
          this.normal.forEach((item) => {
            const row = normalContainer.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace"
            });
            const label = row.createDiv();
            label.style.flexGrow = "1";
            label.style.display = "flex";
            label.style.flexDirection = "column";
            const labelWrapper = label.createDiv();
            labelWrapper.textContent = item.filePath;
            const note = label.createDiv({ text: item.action });
            note.style.fontSize = "13px";
            note.style.color = "var(--text-muted)";
            note.style.fontStyle = "italic";
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.onchange = () => {
              item.selected = checkbox.checked;
            };
          });
        } else {
          const noCandidates = this.contentEl.createEl("div");
          Object.assign(noCandidates.style, {
            display: "inline-block",
            fontFamily: "monospace",
            fontStyle: "italic",
            marginTop: "0.5em"
          });
          noCandidates.textContent = "No force-update candidates.";
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em",
            marginTop: "1em"
          });
          summary.createEl("span", { text: `Deny-List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.style.transform = denyDetails.open ? "rotate(0deg)" : "rotate(180deg)";
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.style.paddingLeft = "1em";
          this.denied.forEach((item) => {
            const row = denyBody.createDiv();
            Object.assign(row.style, {
              display: "flex",
              alignItems: "flex-start",
              justifyContent: "space-between",
              padding: "6px 0",
              fontFamily: "monospace",
              color: "var(--text-faint)",
              fontStyle: "italic"
            });
            const labelWrapper = row.createDiv();
            labelWrapper.textContent = item.filePath;
            labelWrapper.style.textDecoration = "line-through";
            const note = row.createDiv({ text: item.action });
            note.style.fontSize = "13px";
            note.style.color = "var(--text-faint)";
            note.style.fontStyle = "italic";
            const checkbox = row.createEl("input", { type: "checkbox" });
            checkbox.checked = item.selected;
            checkbox.disabled = true;
            checkbox.title = "This item is deny-listed";
          });
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          gap: "0.5em",
          marginTop: "1.5em"
        });
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm and Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          this.close();
          await this.plugin.performForceUpdateWithSelection([...this.normal, ...this.denied]);
        };
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalItems, denyItems);
    modal.plugin = this;
    modal.open();
  }
  async updateEntryFromManifest(entry, force = false) {
    const custom = this.settings.customPaths.find((c) => c.manifestKey === entry.key);
    if (custom?.doUpdate === false) {
      console.log(`\u23ED\uFE0F Skipping ${entry.key} (${entry.displayName}) \u2014 blacklisted`);
      return;
    }
    const finalVaultPath = custom?.vaultPath ?? this.resolveVaultPath(entry.path);
    if (!force && await this.fileCacheManager.isUpToDate(finalVaultPath)) {
      console.log(`\u2714\uFE0F Already up to date: ${entry.displayName}`);
      return;
    }
    const url = `https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/${entry.path}`;
    try {
      const res = await fetch(url);
      const text = await res.text();
      await this.app.vault.adapter.write(finalVaultPath, text);
      await this.fileCacheManager.updateCache(finalVaultPath, text, entry.path);
      console.log(`\u2705 Updated ${entry.displayName} \u2192 ${finalVaultPath}`);
    } catch (e) {
      console.error(`\u274C Error updating ${entry.displayName}:`, e);
    }
  }
  async performForceUpdateWithSelection(previewList) {
    if (this.settings.autoBackupBeforeUpdate) {
    }
    this.settings.backupFiles = {};
    await this.saveSettings();
    try {
      const toUpdate = previewList.filter(
        (item) => item.selected && !item.isFolder && !this.settings.customPaths.some(
          (c) => c.vaultPath === item.filePath && c.doUpdate === false
        )
      );
      for (const item of toUpdate) {
        const entry = this.manifestCache.files.find(
          (f) => this.resolveVaultPath(f.path) === item.filePath
        );
        if (!entry) {
          console.warn(`\u26A0\uFE0F Could not match preview item to manifest: ${item.filePath}`);
          continue;
        }
        await this.updateEntryFromManifest(entry, true);
      }
      for (const entry of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(entry.path)) {
          await this.app.vault.createFolder(entry.path);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion ?? "unknown";
      this.settings.lastForceUpdate = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
      new import_obsidian7.Notice("\u2705 Toolkit force\u2010updated with your selections.");
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C Force update failed. Version not changed.", err);
      new import_obsidian7.Notice("\u274C One or more files failed. Version NOT updated.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  // ─── SINGLE-FILE UPDATE (with GitHub API + raw fallback) ──────────────
  async updateSingleFileFromGitHub({ githubPath, vaultPath }, force = false) {
    if (this.settings.customizeUpdates) {
      vaultPath = this.resolveVaultPath(githubPath);
      const custom = this.settings.customPaths.find((c) => c.manifestKey === githubPath);
      if (custom?.doUpdate === false) {
        return;
      }
    } else {
      vaultPath = githubPath;
    }
    if (!vaultPath) {
      console.error(`\u274C No valid vault path resolved for ${githubPath}`);
      return;
    }
    const oldVault = this.oldPathsByGithub[githubPath];
    if (oldVault && oldVault !== vaultPath) {
      if (await this.app.vault.adapter.exists(vaultPath)) {
        const stray = await this.app.vault.adapter.read(vaultPath);
        await this.backupFile(vaultPath, stray);
        await this.app.vault.adapter.remove(vaultPath);
      }
      const oldFile = this.app.vault.getAbstractFileByPath(oldVault);
      if (oldFile instanceof import_obsidian7.TFile) {
        await this.app.vault.rename(oldFile, vaultPath);
        const newContent = await this.app.vault.adapter.read(vaultPath);
        await this.fileCacheManager.updateCache(vaultPath, newContent, githubPath);
        return;
      }
    }
    const fileExists = await this.app.vault.adapter.exists(vaultPath);
    if (force && fileExists) {
      const current = await this.app.vault.adapter.read(vaultPath);
      await this.backupFile(vaultPath, current);
    }
    if (!force && fileExists && await this.fileCacheManager.isUpToDate(vaultPath)) {
      return;
    }
    const apiUrl = encodeURI(
      `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubPath}?ref=main`
    );
    try {
      let res = await fetch(apiUrl);
      if (res.status === 404) {
        const rawUrl = encodeURI(
          `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${githubPath}`
        );
        res = await fetch(rawUrl);
        if (!res.ok) throw new Error(`Raw fetch failed: ${res.statusText}`);
        const content2 = await res.text();
        if (fileExists) {
          await this.app.vault.adapter.write(vaultPath, content2);
        } else {
          await this.app.vault.create(vaultPath, content2);
        }
        await this.fileCacheManager.updateCache(vaultPath, content2, githubPath);
        return;
      }
      if (!res.ok) throw new Error(`GitHub API error: ${res.statusText}`);
      const { download_url } = await res.json();
      const content = await (await fetch(download_url)).text();
      if (fileExists) {
        await this.app.vault.adapter.write(vaultPath, content);
      } else {
        await this.app.vault.create(vaultPath, content);
      }
      await this.fileCacheManager.updateCache(vaultPath, content, githubPath);
    } catch (e) {
      console.error(`\u274C Failed to update ${vaultPath}`, e);
    }
  }
  // ─── PREVIEW + REMOTE-BASELINE + DIFF ─────────────────────────────────
  async previewUpdatesModal() {
    const loading = new class extends import_obsidian7.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.empty();
        this.contentEl.createDiv({
          text: "\u{1F504} Checking for updates\u2026",
          cls: "mod-warning"
        }).addEventListener("click", (e) => e.stopPropagation());
      }
    }(this.app);
    loading.open();
    await this.syncManifest();
    await this.fetchRemoteBaseline();
    const diffs = await this.buildUpdatePreview();
    loading.close();
    const denyListedLines = [];
    const normalLines = [];
    for (const d of diffs) {
      if (d.startsWith("\u274C deny\u2010listed")) {
        denyListedLines.push(d);
      } else {
        normalLines.push(d);
      }
    }
    const modal = new class extends import_obsidian7.Modal {
      constructor(app, normal, denied) {
        super(app);
        this.normal = normal;
        this.denied = denied;
      }
      onOpen() {
        this.contentEl.empty();
        this.titleEl.setText("Update Preview");
        this.contentEl.createEl("p", {
          text: "Only files whose contents differ from GitHub will be updated:"
        });
        if (this.normal.length) {
          const ul = this.contentEl.createEl("ul");
          this.normal.forEach((line) => {
            const li = ul.createEl("li", { text: line });
          });
        } else {
          this.contentEl.createEl("div", {
            text: "\u2705 Everything is already up to date!",
            cls: "mod-info"
          });
        }
        if (this.denied.length) {
          const denyDetails = this.contentEl.createEl("details", { cls: "vk-section" });
          denyDetails.open = false;
          const summary = denyDetails.createEl("summary", { cls: "vk-section-header" });
          Object.assign(summary.style, {
            cursor: "pointer",
            display: "flex",
            color: "var(--text-faint)",
            alignItems: "center",
            gap: "0.5em"
          });
          summary.createEl("span", { text: `Deny\u2010List Files (${this.denied.length})` });
          const toggleIcon = summary.createEl("span", { text: "VV", cls: "vk-toggle-icon" });
          Object.assign(toggleIcon.style, {
            fontWeight: "bold",
            display: "inline-block",
            transition: "transform 0.2s ease",
            transformOrigin: "50% 50%",
            userSelect: "none",
            transform: "rotate(180deg)"
          });
          denyDetails.ontoggle = () => {
            toggleIcon.style.transform = denyDetails.open ? "rotate(0deg)" : "rotate(180deg)";
          };
          const denyBody = denyDetails.createDiv({ cls: "vk-section-body" });
          denyBody.style.paddingLeft = "1em";
          const denyUl = denyBody.createEl("ul");
          this.denied.forEach((line) => {
            const li = denyUl.createEl("li", { text: line });
            li.style.color = "var(--text-faint)";
            li.style.fontStyle = "italic";
          });
        }
        const buttonRow = this.contentEl.createEl("div");
        Object.assign(buttonRow.style, {
          display: "flex",
          justifyContent: "flex-end",
          marginTop: "1.25em"
          // tweak spacing as you like
        });
        const confirmBtn = buttonRow.createEl("button", {
          text: "Confirm & Update",
          cls: "mod-cta"
        });
        confirmBtn.onclick = async () => {
          await this.plugin.updateSelectedToolkitContent();
          this.close();
        };
        const cancelBtn = buttonRow.createEl("button", { text: "Cancel" });
        cancelBtn.onclick = () => this.close();
      }
      onClose() {
        this.contentEl.empty();
      }
    }(this.app, normalLines, denyListedLines);
    modal.plugin = this;
    modal.open();
  }
  async buildUpdatePreview() {
    const changes = [];
    const denyListedFolders = this.settings.customPaths.filter((c) => c.doUpdate === false).map((c) => c.manifestKey);
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists || !upToDate) {
          changes.push(`\u274C deny\u2010listed \u2013 will not update: ${vp}`);
        }
      }
    }
    if (!this.settings.customizeUpdates) {
      for (const f of this.manifestCache.files) {
        if (f.optional) {
          continue;
        }
        const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
        const isInDenyFolder = denyListedFolders.some(
          (folder) => f.path.startsWith(folder + "/")
        );
        if (custom?.doUpdate === false || isInDenyFolder) {
          continue;
        }
        const vp = this.resolveVaultPath(f.path);
        let tag = "";
        if (vp !== f.path) tag = " (remapped)";
        const exists = await this.app.vault.adapter.exists(vp);
        const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
        if (!exists) {
          changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
        } else if (!upToDate) {
          changes.push(`\u{1F501} Will update: ${vp}${tag}`);
        }
      }
      for (const fld of this.manifestCache.folders) {
        if (fld.optional) {
          continue;
        }
        const isDenyFolder = denyListedFolders.includes(fld.path);
        const exists = await this.app.vault.adapter.exists(fld.path);
        if (!exists && !isDenyFolder) {
          changes.push(`\u{1F4C1} New folder: ${fld.path}`);
        }
      }
      return changes.length ? changes : ["\u2705 Everything is already up to date!"];
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const custom = this.settings.customPaths.find((c) => c.manifestKey === f.path);
      const isInDenyFolder = denyListedFolders.some(
        (folder) => f.path.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      const vp = custom?.vaultPath ?? this.resolveVaultPath(f.path);
      let tag = "";
      if (vp !== f.path) tag = " (remapped)";
      const exists = await this.app.vault.adapter.exists(vp);
      const upToDate = exists && await this.fileCacheManager.isUpToDate(vp);
      if (!exists) {
        changes.push(`\u{1F4C4} New file: ${vp}${tag}`);
      } else if (!upToDate) {
        changes.push(`\u{1F501} Will update: ${vp}${tag}`);
      }
    }
    for (const fld of this.manifestCache.folders) {
      if (fld.optional) {
        continue;
      }
      const isDenyFolder = denyListedFolders.includes(fld.path);
      const exists = await this.app.vault.adapter.exists(fld.path);
      if (!exists && !isDenyFolder) {
        changes.push(`\u{1F4C1} New folder: ${fld.path}`);
      }
    }
    for (const f of this.manifestCache.files) {
      if (f.optional) {
        continue;
      }
      const manifestKey = f.key;
      const manifestPath = f.path;
      const custom = this.settings.customPaths.find((c) => c.manifestKey === manifestKey);
      const prevPath = this.oldPathsByGithub[manifestPath];
      const isInDenyFolder = denyListedFolders.some(
        (folder) => manifestPath.startsWith(folder + "/")
      );
      if (custom?.doUpdate === false || isInDenyFolder) {
        continue;
      }
      if (custom && custom.vaultPath && custom.vaultPath !== manifestPath) {
        continue;
      }
      if (prevPath && prevPath !== manifestPath && (!custom || custom.vaultPath === manifestPath)) {
        changes.push(`\u27A1\uFE0F Moved: ${prevPath} \u2192 ${manifestPath}`);
      }
    }
    return changes.length ? changes : ["\u2705 Everything is already up to date!"];
  }
  // ─── VERSION-CHECK / UPDATE FLOW ─────────────────────────────────────
  async checkForUpdates() {
    const isNewerVersion = (remote, local) => {
      const pa = remote.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      const pb = local.replace(/^v/, "").split(".").map((n) => parseInt(n, 10) || 0);
      for (let i = 0; i < Math.max(pa.length, pb.length); i++) {
        if ((pa[i] || 0) > (pb[i] || 0)) return true;
        if ((pa[i] || 0) < (pb[i] || 0)) return false;
      }
      return false;
    };
    const toolkitPath = ".version.json";
    const toolkitUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-full/main/.version.json";
    const pluginUrl = "https://raw.githubusercontent.com/slamwise0001/vvunderlore-toolkit-plugin/main/version.json";
    const changelogUrl = "https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/README.md";
    let localTK = "0.0.0";
    try {
      const content = await this.app.vault.adapter.read(toolkitPath);
      const json = JSON.parse(content);
      localTK = json.version || localTK;
    } catch (err) {
      console.error("\u274C Failed to read local toolkit version:", err);
    }
    let remoteTK = "0.0.0";
    try {
      const res = await fetch(toolkitUrl);
      const data = await res.json();
      remoteTK = data.version || remoteTK;
      this.settings.latestToolkitVersion = remoteTK;
      if (data.defaultPaths) {
        this.settings.latestDefaults = data.defaultPaths;
      }
      this.settings.lastChecked = (/* @__PURE__ */ new Date()).toISOString();
      await this.saveSettings();
    } catch (err) {
      console.error("\u274C Failed to fetch remote toolkit version:", err);
    }
    console.log({ localTK, remoteTK });
    if (isNewerVersion(remoteTK, localTK)) {
      new import_obsidian7.Notice(`\u26A0\uFE0F Toolkit update available! Installed: v${localTK}, Latest: v${remoteTK}`);
      await this.fetchRemoteBaseline();
    } else {
      new import_obsidian7.Notice(`\u2705 Toolkit is up to date (v${localTK})`);
    }
    const localPL = this.manifest.version;
    let remotePL = localPL;
    try {
      const res = await fetch(pluginUrl);
      const data = await res.json();
      remotePL = data.version || remotePL;
    } catch (err) {
      console.error("\u274C Failed to fetch remote plugin version:", err);
    }
    console.log({ localPL, remotePL });
    if (isNewerVersion(remotePL, localPL)) {
      new import_obsidian7.Notice(`\u2699\uFE0F Plugin update available! Installed: v${localPL}, Latest: v${remotePL}`);
    } else {
      new import_obsidian7.Notice(`\u2705 Plugin is up to date (v${localPL})`);
    }
    try {
      const changelogRes = await fetch(changelogUrl);
      this.changelog = await changelogRes.text();
    } catch (err) {
      console.error("\u274C Failed to fetch changelog:", err);
    }
  }
  async loadSettings() {
    const loaded = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, loaded);
    if (typeof this.settings.rulesetCompendium !== "string") {
      this.settings.rulesetCompendium = "";
    }
    if (!Array.isArray(this.settings.rulesetReference)) {
      this.settings.rulesetReference = [];
    }
    this.fileCacheManager = new ToolkitFileCacheManager(
      this.app.vault,
      loaded?.fileCache ?? {},
      async () => await this.saveSettings()
    );
    setTimeout(() => this.checkMarkerFile(), 500);
  }
  async saveSettings() {
    await this.saveData({
      ...this.settings,
      fileCache: this.fileCacheManager.getCache()
    });
  }
  async getLocalToolkitVersion() {
    try {
      const content = await this.app.vault.adapter.read(".version.json");
      const json = JSON.parse(content);
      return json.version || null;
    } catch (err) {
      console.error("\u274C Failed to read .version.json:", err);
      return null;
    }
  }
  async updateFullToolkitRepo() {
    const excluded = [
      ".obsidian",
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    const fetchRepoRoot = async () => {
      const apiUrl = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/";
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch repo root`);
      return await response.json();
    };
    try {
      const contents = await fetchRepoRoot();
      const filtered = contents.filter(
        (item) => !excluded.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      );
      filtered.sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const item of filtered) {
        if (item.type === "dir") {
          await this.updateFolderFromGitHub(item.path, item.path);
        }
        if (item.type === "file") {
          const response = await fetch(item.download_url);
          const content = await response.text();
          const filePath = item.path;
          const exists = await this.app.vault.adapter.exists(filePath);
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, item.path, false);
        }
      }
      await this.saveSettings();
      const markerPath = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(markerPath)) {
        await this.app.vault.create(markerPath, "");
      }
      this.settings.needsInstall = false;
      await this.saveSettings();
      if (this.settingsTab) {
        this.settingsTab.display();
      }
      if (this.settings.highlightEnabled) {
        this.enableHighlight();
      }
      new import_obsidian7.Notice("\u2705 VVunderlore Toolkit successfully installed!");
    } catch (err) {
      console.error("\u274C updateFullToolkitRepo() error:", err);
      new import_obsidian7.Notice("\u274C Failed to install toolkit. See console for details.");
    }
  }
  async updateSelectedToolkitContent() {
    if (this.settings.autoBackupBeforeUpdate) {
      const folder = await this.backupManager.backupVaultMirror("pre-update");
      new import_obsidian7.Notice(`Vault mirror backup created at: ${folder}`);
    }
    if (!this.settings.latestDefaults) {
      new import_obsidian7.Notice("\u274C GitHub defaults not loaded yet.");
      return;
    }
    const allManifestFiles = this.manifestCache.files.map((f) => f.path);
    const fileOverrides = Object.fromEntries(
      this.settings.customPaths.map((c) => [c.manifestKey, c])
    );
    try {
      for (const ghPath of allManifestFiles) {
        const override = fileOverrides[ghPath];
        if (override?.doUpdate === false) {
          console.log(`\u23ED\uFE0F Skipping deny-listed: ${ghPath}`);
          continue;
        }
        const vaultPath = this.settings.customizeUpdates ? this.resolveVaultPath(ghPath) : ghPath;
        const entry = this.manifestCache.files.find((f) => f.path === ghPath);
        if (!entry) continue;
        await this.updateEntryFromManifest(entry, false);
      }
      for (const folder of this.manifestCache.folders) {
        if (!await this.app.vault.adapter.exists(folder.path)) {
          await this.app.vault.createFolder(folder.path);
        }
      }
      await this.updateVersionFile();
      this.settings.installedVersion = this.settings.latestToolkitVersion;
      await this.saveSettings();
      new import_obsidian7.Notice("\u2705 Toolkit content updated.");
      if (this.settingsTab) {
        await this.settingsTab.updateVersionDisplay();
      }
    } catch (err) {
      console.error("\u274C Update failed. Version not updated.", err);
      new import_obsidian7.Notice("\u274C Update failed. See console for details. Version file NOT changed.");
    }
    if (this.settings.highlightEnabled) {
      this.enableHighlight();
    }
  }
  async updateFolderFromGitHub(githubFolderPath, vaultFolderPath) {
    const excluded = [
      ".obsidian",
      ".gitignore",
      ".gitattributes",
      ".DS_Store",
      "plugins",
      "Compendium",
      "README.md",
      ".version.json",
      ".github"
    ];
    if (excluded.some((ex) => githubFolderPath === ex || githubFolderPath.startsWith(`${ex}/`))) {
      return;
    }
    const apiUrl = `https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/contents/${githubFolderPath}`;
    try {
      const response = await fetch(apiUrl);
      if (!response.ok) throw new Error(`Failed to fetch folder: ${githubFolderPath}`);
      const files = await response.json();
      if (!await this.app.vault.adapter.exists(vaultFolderPath)) {
        await this.app.vault.createFolder(vaultFolderPath);
      }
      for (const file of files) {
        if (excluded.some((ex) => file.path === ex || file.path.startsWith(`${ex}/`))) {
          continue;
        }
        const filePath = `${vaultFolderPath}/${file.name}`;
        if (file.type === "file") {
          const fileResponse = await fetch(file.download_url);
          const content = await fileResponse.text();
          const exists = await this.app.vault.adapter.exists(filePath);
          if (exists) {
            const current = await this.app.vault.adapter.read(filePath);
            if (current !== content) {
              await this.backupFile(filePath, current);
            }
          }
          if (!exists) {
            await this.app.vault.create(filePath, content);
          } else {
            if (await this.app.vault.adapter.read(filePath) !== content) {
              await this.app.vault.adapter.write(filePath, content);
            }
          }
          await this.fileCacheManager.updateCache(filePath, content, file.path, false);
        } else if (file.type === "dir") {
          await this.updateFolderFromGitHub(file.path, `${vaultFolderPath}/${file.name}`);
        }
      }
      await this.saveSettings();
      new import_obsidian7.Notice(`\u2705 Folder synced: ${vaultFolderPath}`);
    } catch (error) {
      console.error(`\u274C Failed to sync folder: ${vaultFolderPath}`, error);
      new import_obsidian7.Notice(`\u274C Failed to update folder: ${vaultFolderPath}`);
    }
  }
  async rebuildFileCache() {
    const cache = this.fileCacheManager;
    const tasks = [];
    for (const entry of this.manifestCache.files) {
      const vaultPath = this.resolveVaultPath(entry.path);
      if (await this.app.vault.adapter.exists(vaultPath)) {
        tasks.push((async () => {
          const content = await this.app.vault.adapter.read(vaultPath);
          await cache.updateCache(vaultPath, content, entry.path, false);
        })());
      }
    }
    for (const folderEntry of this.manifestCache.folders) {
      const folderPath = folderEntry.path;
      const folder = this.app.vault.getAbstractFileByPath(folderPath);
      if (folder instanceof import_obsidian7.TFolder) {
        import_obsidian7.Vault.recurseChildren(folder, (file) => {
          if (file instanceof import_obsidian7.TFile && file.extension === "md") {
            const filePath = file.path;
            tasks.push((async () => {
              const content = await this.app.vault.adapter.read(filePath);
              await cache.updateCache(filePath, content, filePath, false);
            })());
          }
        });
      }
    }
    const batchSize = 10;
    for (let i = 0; i < tasks.length; i += batchSize) {
      await Promise.all(tasks.slice(i, i + batchSize));
    }
    await this.saveSettings();
  }
  async showIndexingModal() {
    const modal = new class extends import_obsidian7.Modal {
      constructor(app) {
        super(app);
      }
      onOpen() {
        this.contentEl.addEventListener("click", (e) => e.stopPropagation());
        this.titleEl.setText("\u{1F504} Indexing Toolkit Files...");
        this.contentEl.createEl("p", {
          text: "Indexing and caching your VVunderlore Vault for faster updates and safer syncing."
        });
      }
    }(this.app);
    modal.open();
    await this.rebuildFileCache();
    modal.close();
    new import_obsidian7.Notice("\u2705 VVunderlore caching complete.");
  }
  async updateVersionFile() {
    if (!this.settings.latestToolkitVersion) {
      console.warn("No latest version found; skipping version file update.");
      return;
    }
    const versionPath = ".version.json";
    const content = JSON.stringify({ version: this.settings.latestToolkitVersion }, null, 2);
    const exists = await this.app.vault.adapter.exists(versionPath);
    if (exists) {
      await this.app.vault.adapter.write(versionPath, content);
    } else {
      await this.app.vault.create(versionPath, content);
    }
  }
  /** main.ts **/
  /** 
   * Install the selected compendium and zero or more reference editions.
   */
  async installFullToolkit(opts = { compendium: "", references: [] }) {
    const { compendium, references } = opts;
    if (!compendium) {
      throw new Error("No compendium edition selected");
    }
    const placeholder = new InstallingModal2(this.app);
    placeholder.open();
    let installSucceeded = false;
    try {
      const treeApi = "https://api.github.com/repos/slamwise0001/VVunderlore-Toolkit-Full/git/trees/main?recursive=1";
      const resp = await fetch(treeApi);
      if (!resp.ok) {
        throw new Error(`Failed to list repo tree: ${resp.statusText}`);
      }
      const json = await resp.json();
      const items = Array.isArray(json.tree) ? json.tree : [];
      const staticEntries = items.filter(
        (item) => !this.excludedPaths.some(
          (ex) => item.path === ex || item.path.startsWith(`${ex}/`)
        )
      ).sort((a, b) => a.type === b.type ? 0 : a.type === "tree" ? -1 : 1);
      for (const entry of staticEntries) {
        if (entry.type === "tree") {
          if (!await this.app.vault.adapter.exists(entry.path)) {
            await this.app.vault.createFolder(entry.path);
          }
        } else {
          const rawUrl = `https://raw.githubusercontent.com/slamwise0001/VVunderlore-Toolkit-Full/main/${encodeURIComponent(entry.path)}`;
          const fileResp = await fetch(rawUrl);
          if (!fileResp.ok) continue;
          const text = await fileResp.text();
          if (await this.app.vault.adapter.exists(entry.path)) {
            const old = await this.app.vault.adapter.read(entry.path);
            if (old !== text) {
              await this.app.vault.adapter.write(entry.path, text);
            }
          } else {
            await this.app.vault.create(entry.path, text);
          }
        }
      }
      const parseJobs = [
        importRulesetData({
          app: this.app,
          editionKey: compendium,
          targetPath: `Compendium`
        }),
        ...references.map(
          (refKey) => importRulesetData({
            app: this.app,
            editionKey: refKey,
            targetPath: `${refKey}`
          })
        )
      ];
      await Promise.all(parseJobs);
      const marker = ".vvunderlore_installed";
      if (!await this.app.vault.adapter.exists(marker)) {
        await this.app.vault.create(marker, "");
      }
      this.settings.needsInstall = false;
      this.settings.highlightEnabled = true;
      await this.saveSettings();
      this.enableHighlight();
      installSucceeded = true;
    } catch (err) {
      console.error("\u274C installFullToolkit()", err);
    } finally {
      placeholder.close();
      if (this.settingsTab) this.settingsTab.display();
      new import_obsidian7.Notice(
        installSucceeded ? "\u2705 VVunderlore Toolkit successfully installed!" : "\u274C Failed to install toolkit. See console for details."
      );
    }
  }
};
// Annotate the CommonJS export names for ESM import in node:
0 && (module.exports = {
  InstallingModal
});
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9maXJzdGluc3RhbGxjb25maXJtLnRzIiwgInNyYy9lZGl0aW9ucy50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2luc3RhbGxlci50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvc291cmNlTWFwLnRzIiwgInNyYy9wYXJzZXJzLzVlLWpzb24vaGVscGVycy90YWdSZXBsYWNlci50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvbWFya2Rvd25UYWJsZS50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvZm9ybWF0RW50cnkudHMiLCAic3JjL3BhcnNlcnMvNWUtanNvbi9iZXN0aWFyeS50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2l0ZW1zLnRzIiwgInNyYy9wYXJzZXJzLzVlLWpzb24vaGVscGVycy9mcm9udG1hdHRlci50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL3NwZWxscy50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL3NwZWNpZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtanNvbi9jbGFzc2VzLnRzIiwgInNyYy9wYXJzZXJzLzVlLWpzb24vcnVsZXMudHMiLCAic3JjL3BhcnNlcnMvNWUtanNvbi9mZWF0cy50cyIsICJzcmMvcGFyc2Vycy81ZS1qc29uL2JhY2tncm91bmRzLnRzIiwgInNyYy9ydWxlc2V0SW5zdGFsbGVyLnRzIiwgInNyYy9jdXN0b21JbnN0YWxsTW9kYWwudHMiLCAic3JjL2ZpbGVDYWNoZU1hbmFnZXIudHMiLCAic3JjL2JhY2t1cC9CYWNrdXBNYW5hZ2VyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge1xuICBBcHAsXG4gIFBsdWdpbixcbiAgTm90aWNlLFxuICBNb2RhbCxcbiAgU2V0dGluZyxcbiAgVEZvbGRlcixcbiAgVEZpbGUsXG4gIFZhdWx0XG59IGZyb20gJ29ic2lkaWFuJzsgXG5cbmltcG9ydCB7IFRvb2xraXRTZXR0aW5nc1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgVG9vbGtpdEZpbGVDYWNoZU1hbmFnZXIgfSBmcm9tICcuL2ZpbGVDYWNoZU1hbmFnZXInO1xuaW1wb3J0IHR5cGUgeyBUb29sa2l0RmlsZUNhY2hlRW50cnkgfSBmcm9tICcuL2ZpbGVDYWNoZU1hbmFnZXInO1xuaW1wb3J0IHsgQmFja3VwTWFuYWdlciB9IGZyb20gJy4vYmFja3VwL0JhY2t1cE1hbmFnZXInO1xuaW1wb3J0IHsgc2hvd0N1c3RvbUluc3RhbGxNb2RhbCB9IGZyb20gJy4vY3VzdG9tSW5zdGFsbE1vZGFsJztcbmltcG9ydCB7IEFWQUlMQUJMRV9FRElUSU9OUyB9IGZyb20gJy4vZWRpdGlvbnMnO1xuaW1wb3J0IHsgaW1wb3J0UnVsZXNldERhdGEgfSBmcm9tICcuL3J1bGVzZXRJbnN0YWxsZXInO1xuXG5jb25zdCBsb2FkaW5nSWNvbiA9IFxuJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICtcbidpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBTkVBQUFEUkNBWUFBQUJTT2xmdkFBQUFDWEJJV1hNQUFCY1JBQUFYRVFIS0p2TS9BQUFMNWtsRVFWUjRuTzNkVDZ3ZFpSbkg4VjloeWd1RllsdEtTZ1h4RkFob1FxVVVRaUJHdUJneEVURzZxVUZjdEJwTjNOYkV1RENSMjhUNEp5NUFqUWtMRTB0MG9TWkdkT1hDMklOS01Cck4zWUFMR3prUUlFcVVYckZDWDV3V0YyZE1qTTd6bk43M21abDd6dTMzazV6TlBKbDMzbnZQL2ZWTW52UDJuVTNDLzZsU09pVHBZTWZESHE1elh1bDRUTXlCYXIwbk1LZEdrcFk2SG5OYngrTmhUcHkzM2hNQUZoMGhBb0lJRVJCRWlJQWdRZ1FFMFoxYnU2T1NIalZxQnlVZE1tb1BWU210OWpHaE5uWE9kdzkxclhNZElWcTdaK3VjeDIyRktxVWw1N3g5dmN3RzY0N2JPU0NJRUFGQmhBZ0lJa1JBRUNFQ2d1ak9EZWV3cEpKVjNMZEkybTdVRGtpNnFxMVFwWFNzNEZxMHhnc1FvdUdzV0sxeFQ1VlNKV21YVWY2SHBOTkdiV210MTBJWmJ1ZUFJRUlFQkJFaUlJZ1FBVUdFQ0FpaU85ZWhPdWRsU2NzZEQvczVsWFhhckpYbWt2UUhxMUNsOUViQnRjYm5jbXVjVHlJZ2lCQUJRWVFJQ0NKRVFCQWhBb0lJRVJDMGFiMG5zR2lxbEpZbFBkanhzUGRJZXR5bzFYWE9yVzNuWnFYMmtuSGVXNXpyZmRPcHZkT3BQV3djM3lQcDQwWnR3N2UvK1NRQ2dnZ1JFRVNJZ0NCQ0JBUVJJaUNJRUFGQkc3ckYzV3pyVzdSaHh4eTV1MlJ2QmsrVjBuVldyYzc1dUhQZUFhc2thWXRSdTBIU1o0emFobWgvODBrRUJCRWlJSWdRQVVHRUNBZ2lSRURRUXV5eFVLVzBUV1VQeVJwSkduYzZtWDQ2bWpkSjJtYlU5bFVwV2VldDFEbVhQSDN2dFlKenBPbU9xMjB1a25TWlVYdFY5bnN3Y1I2TXRscm5YTEx0OHVBV29zVWRhRlYzM2tLdFVqcFA5dS9OKzMyZWtXUnRBbkpNMGwwRjArbTgvZTJwVWhvWnBkMlM3ak5xejlRNWY4c1liMG4yKzdvdzdXOXU1NEFnUWdRRUVTSWdpQkFCUVlRSUNKcWJGdmVNTnZaSVphMXFzMFhhZEpwR0JXTnVrdCtGczJwbm5IUGU1TlJXSkZsdDdKTDJ0cXFVM3VhVVR6bTFTNHpqbTUyNW5IVEdXMVZaKzN0UzV6eHh4aDNVM0xTNGgyNTM5clRoU0IvNldNWDliYWY4bkZQN25YSDhqS1RYamRxSk91ZmZudFhFL3N1TXY0Y2p6YjduYzRIYk9TQ0lFQUZCaEFnSUlrUkFFQ0VDZ2dadmNUdHR5NUhzZHFmWHFpNWQ0UzNuZXA2UnlscmpIcStObmFxVXJqWnFKeVhWYllVNjUxZWM2M252KzhpcFdWc2RuOVowdFhZYmJ4NGVyLzN0L1IwTjN2NGV2TVh0UE02d3FJMGRXT0ZkMUNidHFUVnV0ckdybEQ0cXlRcVJHYjQ2NXlldGkxVXBQZWJNNVlOT2JXUWNQMVhuL0JmbnZFN05lQThHYjM5ek93Y0VFU0lnaUJBQlFZUUlDQ0pFUUZBdkxXNm4vU2gxMzhZZU9XTjZKZ1huL09jODYzb2oyUjJzMHRYWXV5VmRZOVRPeUZnbFhTVjdkeE5KTzUzYUUwN3RkdVA0UzVJRzY4N05tNzYrSnpKYnpuWE9KVzMxZmM2WWcyNW9VZWQ4Vk5MUnR0cU0xdXZod3RYWTc1ZjlTTWsrV0x2MlNOTGZqT05qTGY2ZTU4VzRuUU9DQ0JFUVJJaUFJRUlFQkJFaUlLaVhCYWpPSWxPek8xZWx0RlhUcDZxMXVVWFNJMFp0YnJhYmJWcjcxbHpNMzhsWnNONm55SmlXcnppMXp4YU1OMms2bW12U3RPZ3ZOOHI3bTlkYWpmdllkbmx1ZHZ1UnRGWFNyVWJ0K2lFbkV2QzRwRjhZdForcmJML3RkOHYrTHdodjFEbjNFU1RMY3R2Qldadk15UGhLWUlZazZTcWo5dnM2NTU4WWMxbVd2OHArWERBWEY3ZHpRQkFoQW9JSUVSQkVpSUFnUWdRRUZYZm5taTZJNVloem50V3V2VXoyMDlaT1N2cVNVWHZHbWNkNnNMcGxSMVcrMnR3YWM4ak9uR2NpL3oxZnRzNXoydDlaMHZORzdaSXFKYXVUdTl1YVIxK0t2eWNxK1M2b09jK3FMV25hQm03ekswbjNHclhUZGM3V1RqTllaMzNzc2Q0RTZCYWpmSi9zZjR4NzJjU0UyemtnaUJBQlFZUUlDQ0pFUUJBaEFvTFdZd0hxa25IYzIwL2JleEtiOXhoSGJFd3ZTenB1MUNhU1hqQnErNTEyKzlIU1Biem5LVVFqNTV3emRjNjUrNmxnUWIyczZTYjZiWjZWL2YzU2Zra2ZNR3BqRmU0QXhlMGNFRVNJZ0NCQ0JBUVJJaUNJRUFGQmJuY3VzRkw3UnVjOGE1K0JWV2ZNaVRNZXpqMm5uTnJUa241bTFPNlVkR1hYazVuVjRqWTNmSml4VXZ0K1owd3JST09oSHhPSXhWVG5mRXBHa0txVW5wYjkvTmlySkwycjYvbHdPd2NFRVNJZ2lCQUJRWVFJQ0NKRVFGQmZDMUN0UGJWeDdsbVJ2VC81cUVySjJuOWhwYzc1Y0Z1aFN1bVFwSVBHZVJjMnJ6WlhXSk9NNkN0RVczc2FGd3Vtem5sVnhpNUh6U1ltU3dYRGpnclA2d1czYzBBUUlRS0NDQkVRUklpQUlFSUVCUFhWbmJ1enAzRUJ5ZC9YL0tibTFXYWZwSnVOMmtOVlNxdEc3WENkODRvMW1iNUN0TE9uY1FFMXUvSk0ybXJOSHZHWEdxZU9uR0c5M2FhMmVmUGhkZzRJSWtSQUVDRUNnZ2dSRUVTSWdLQyt1bk1uZXhvWG1PV003QzJHLytTY2Q3Tm1kT0VzZllXbzdtbGM0R3hZajBMOXA2U1hqSnIxd0lTWnVKMERnZ2dSRUVTSWdDQkNCQVFSSWlDb3IrNmN0WTByMExmOWtqNXAxRFpMdXNDb2JTKzlZRjhoc3ZyMFFOKzJTOW96NUFXNW5RT0NDQkVRUklpQUlFSUVCQkVpSUtpdjd0d1BuUnFibUtCUFg1ZjBIYU4ydWV6OVA3NG9hVy9KQmZra0FvSUlFUkJFaUlBZ1FnUUVFU0lnaUJBQlFYMjF1SC9rMUw1Z0hMK3QyUUsyemJqTzJYcGtJZVpZOHpRODY1R1M0enJuVFIxZmNxdWtLNDNheHlRZDZ2aDZmQklCVVlRSUNDSkVRQkFoQW9JSUVSQkVpSUFndDhYdHRSK2RkdlNzODM1Z2xIWkx1dGVvWFZDbHRNdW92VjduZk1LNkhqYWVLcVZsU1E5MlBPemRkYzdqa2hQNUpBS0NDQkVRUklpQUlFSUVCQkVpSUlnUUFVRjlyZUkyMVRsL29uVWlLVjB0NlFIanRHc2svZG1valNXeHduc2Q5YkZTdTBwSmtxenpucEwwZmFPMlU5SmxSdTJLNXRVcFBvbUFJRUlFQkJFaUlJZ1FBVUdFQ0FpS2RPZkc1cURUYmswclo1RmZsdlNjVWZ1WGM3MkpjNzNWT3VjVmF5NVlHK2YzUEpMOS9wVCsvaStRdE1Pb2JaTjBrVkhiSXVrU1o4ek9kYjFKaEtUeUZkNkYxMXFTMzE2bC9kMlJJVGVTYVZidDMyT1U3NUIwdTFIYjNieldpbFhjd0hvaFJFQVFJUUtDQ0JFUVJJaUFvTDRXb1A3U3ZHRDM3ZWhWbGJXL1BaTTY1MG5CZVF0dnh1OXJiQnczMzdjcXBXMlM5aFZNWmJ1a3R4dTEzWkl1Tm1xYm5URW56YXZONmxuTnFrVmZMVzdyQjVTa2s4YnhQdHFrUzdMYjM1NGpkYzdMWGM1bFVYVDk5VVRnUGZDY2xsUmJsNVIwdmxIcjVYM2xkZzRJSWtSQUVDRUNnZ2dSRUVTSWdLQytXdHlubmRyWU9PNjFvMStWOUx4UmU3M08rYTlHeld0L3V4YWhOVjZsdEUvVEZjMWRHbmM4M2luWnEvUFAxM1RWZFp0SzA2ZmVXYXdQZ0Jja3ZXalVyTCtoa0Y1YTNDVm10RUwvS09raG8vWmluZk9QTzU3THNzcjJlaDYwTlY2bGRFelNVcGRqOXJES2ZvK2sxczFwTkEzSkRVWnRoNlJiQ3k3NU5Va1BHN1hWT3VmaTc0TXMzTTRCUVlRSUNDSkVRQkFoQW9JSUVSQTArRGJDamxjay9kcXBYVy9VZGxRcC9iM2dlbDQ3ZXFKaFcrT2xKdXErSlcwcS9ObDJ5ZDY2OTJMWm01RjQ3ZTJKN05YWXh6VnRxN2V4RnEyR3pGT0wrMEpOZitGdGJwZjB2WTR2MlhrN3VxZkhJSHFLTjljbzRhM3dkbVJKMXZkNFNkTzlzOWRxcmxiWmN6c0hCQkVpSUlnUUFVR0VDQWdpUkVEUVBMVzRhMGxXcS9vcFNVZU0ybHNsSFRKcUwwdjZqVldyVXJMYTVudWJWNXV4MHhHemp2ZGxVbkpTMDBWc05hUHI5VjNqdUxmbGJ5WHBVcU5tN1lVZ1RYKzJSNDNhMkRsdmNIUFQ0aTQxWS9YM2NVbmZNR29ubWxlYkJ5Ujl4S2pOVlh1MVJPbG1KRlZLN3pWSzc1RDAxZWk4L3NmQzdLUE83UndRUklpQUlFSUVCQkVpSUlnUUFVSHoxT0l1TlpIZC90NHE2WDFHN1RYWnEzMXZMSmxJbGRJTzJhdVM3NUc5d1Bab3lRWW5WVXFITkgzVVk1dEgxanBlTStheVU3YTZldFljWnBuSWJtTlBDc2NjM01LSHFQbmpXMjZyTmUzdlR3ODRuUjJTcmpWcW45SzBGZHhtckxJL21vT3lOeXA1ckdBOHlWK0YvbFBqdVBVUHh5eVRSZis2UU9KMkRnZ2pSRUFRSVFLQ0NCRVFSSWlBb0lYdnpzMHdrZDMrbHV3RnVIYzFyOWFhMHdiMjlpQ3dWakpMMHBZcUphditIdG10OFRjN1kzcDdkSHY3VmR6djFLNHpqbC9rbkRQUkJtaGpleForRlhlcEtxVk5zbi8rQnlWOXZtRFk0ODJyelcyeVc4RWZsdlNrVWZ1eTdQK1djYTNzWjVkK3lEZ3UrV0h2ZEY5ekxkQnE3RkxjemdGQmhBZ0lJa1JBRUNFQ2dnZ1JFTFRSVzl5eldGMnFZMDdOczFmMklsT3ZEWHhBMGgzT21GYUxlN016cHRlcUx1VjlYV0NaZEQySmVYUE90cmo3c0E1N2NRK3E2MGRSYmhUY3pnRkJoQWdJSWtSQUVDRUNnZ2dSRUhTdXQ3aTdObDd2Q1dCNC93WVJCYm4xOTgvcnBBQUFBQUJKUlU1RXJrSmdnZz09J1xuIFxuY2xhc3MgSW5zdGFsbGluZ01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkgeyBzdXBlcihhcHApOyB9XG4gIG9uT3BlbigpIHtcbiAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIGNvbnN0IGltZyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdpbWcnLCB7XG4gICAgICBhdHRyOiB7IHNyYzogbG9hZGluZ0ljb24sIGFsdDogJ0luc3RhbGxpbmdcdTIwMjYnIH0sXG4gICAgfSk7XG4gICAgT2JqZWN0LmFzc2lnbihpbWcuc3R5bGUsIHtcbiAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICBtYXJnaW46ICcxZW0gYXV0byAwLjVlbScsXG4gICAgICB3aWR0aDogJzEwMHB4JyxcbiAgICAgIGhlaWdodDogJzEwMHB4JyxcbiAgICB9KTtcbiAgICBpbWcuYW5pbWF0ZShcbiAgICAgIFtcbiAgICAgICAgeyB0cmFuc2Zvcm06ICdyb3RhdGUoMGRlZyknIH0sXG4gICAgICAgIHsgdHJhbnNmb3JtOiAncm90YXRlKC0zNjBkZWcpJyB9XG4gICAgICBdLFxuICAgICAge1xuICAgICAgICBkdXJhdGlvbjogMTUwMCwgICAgICAvLyBvbmUgYW5kIGEgaGFsZiBzZWNvbmRzIHBlciByZXZvbHV0aW9uXG4gICAgICAgIGl0ZXJhdGlvbnM6IEluZmluaXR5LFxuICAgICAgICBlYXNpbmc6ICdsaW5lYXInXG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCB0eHQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyB0ZXh0OiAnSW5zdGFsbGluZ1x1MjAyNicsIGNsczogJ21vZC1xdWlldCcgfSk7XG4gICAgdHh0LnN0eWxlLmNzc1RleHQgPVxuICAgICAgJ2ZvbnQtc3R5bGU6IGl0YWxpYzsgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDFlbTsnO1xuICB9XG4gIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgfSBcbn1cblxuXG5pbnRlcmZhY2UgUHJldmlld0l0ZW0ge1xuICBmaWxlUGF0aDogc3RyaW5nO1xuICBhY3Rpb246IHN0cmluZztcbiAgc2VsZWN0ZWQ6IGJvb2xlYW47IFxuICBpc0ZvbGRlcj86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBUb29sa2l0U2V0dGluZ3Mge1xuICBpbnN0YWxsZWRWZXJzaW9uOiBzdHJpbmc7XG4gIGxhdGVzdFRvb2xraXRWZXJzaW9uPzogc3RyaW5nO1xuICBjdXN0b21pemVVcGRhdGVzOiBib29sZWFuO1xuICB1cGRhdGVUYXJnZXRzOiB7XG4gICAgdG9vbHM6IGJvb2xlYW47XG4gICAgdG9vbHNQYXRoPzogc3RyaW5nO1xuICAgIHRlbXBsYXRlczogYm9vbGVhbjtcbiAgICB0ZW1wbGF0ZXNQYXRoPzogc3RyaW5nO1xuICAgIG9tbmlub21pY29uOiBib29sZWFuO1xuICAgIG9tbmlub21pY29uUGF0aD86IHN0cmluZztcbiAgICBzcGVsbGJvb2s6IGJvb2xlYW47XG4gICAgc3BlbGxib29rUGF0aDogc3RyaW5nO1xuICB9O1xuICBsYXRlc3REZWZhdWx0cz86IHtcbiAgICB0b29scz86IHN0cmluZztcbiAgICB0ZW1wbGF0ZXM/OiBzdHJpbmc7XG4gICAgb21uaW5vbWljb24/OiBzdHJpbmc7XG4gICAgc3BlbGxib29rPzogc3RyaW5nO1xuICB9O1xuICBsYXN0Q2hlY2tlZD86IHN0cmluZztcbiAgbGFzdEZvcmNlVXBkYXRlPzogc3RyaW5nO1xuICBmaWxlQ2FjaGU/OiBSZWNvcmQ8c3RyaW5nLCBUb29sa2l0RmlsZUNhY2hlRW50cnk+O1xuICBwYXRoT3ZlcnJpZGVzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgYmFja3VwRmlsZXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICBiYWNrdXBQYXRoPzogc3RyaW5nO1xuICBhdXRvQmFja3VwPzogYm9vbGVhbjtcbiAgbGFzdEJhY2t1cFRpbWU/OiBzdHJpbmc7XG4gIGJhY2t1cEVycm9yPzogc3RyaW5nO1xuICBjdXN0b21QYXRoczogQ3VzdG9tUGF0aEVudHJ5W107XG4gIGF1dG9CYWNrdXBCZWZvcmVVcGRhdGU6IGJvb2xlYW47XG4gIG5lZWRzSW5zdGFsbDogYm9vbGVhbjtcbiAgaGlnaGxpZ2h0RW5hYmxlZDogYm9vbGVhbjtcbiAgaGlnaGxpZ2h0Q29sb3JMaWdodDogc3RyaW5nO1xuICBoaWdobGlnaHRDb2xvckRhcms6IHN0cmluZztcbiAgcnVsZXNldENvbXBlbmRpdW06IHN0cmluZztcbiAgcnVsZXNldFJlZmVyZW5jZTogc3RyaW5nW107XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFRvb2xraXRTZXR0aW5ncyA9IHtcbiAgaW5zdGFsbGVkVmVyc2lvbjogJzEuMC4wJyxcbiAgY3VzdG9taXplVXBkYXRlczogZmFsc2UsXG4gIHVwZGF0ZVRhcmdldHM6IHtcbiAgICB0b29sczogdHJ1ZSxcbiAgICB0b29sc1BhdGg6ICdUb29scycsXG4gICAgdGVtcGxhdGVzOiB0cnVlLFxuICAgIHRlbXBsYXRlc1BhdGg6ICdFeHRyYXMvVGVtcGxhdGVzJyxcbiAgICBvbW5pbm9taWNvbjogdHJ1ZSxcbiAgICBvbW5pbm9taWNvblBhdGg6ICdBZHZlbnR1cmVzL09tbmlub21pY29uLm1kJyxcbiAgICBzcGVsbGJvb2s6IHRydWUsXG4gICAgc3BlbGxib29rUGF0aDogJ0NvbXBlbmRpdW0vU3BlbGxzL19TcGVsbGJvb2subWQnLFxuICB9LFxuICBsYXRlc3REZWZhdWx0czogdW5kZWZpbmVkLFxuICBwYXRoT3ZlcnJpZGVzOiB7fSxcbiAgYmFja3VwRmlsZXM6IHt9LFxuICBiYWNrdXBQYXRoOiAnJyxcbiAgYXV0b0JhY2t1cDogZmFsc2UsXG4gIGxhc3RCYWNrdXBUaW1lOiAnJyxcbiAgYmFja3VwRXJyb3I6ICcnLFxuICBjdXN0b21QYXRoczogW10sXG4gIGF1dG9CYWNrdXBCZWZvcmVVcGRhdGU6IHRydWUsXG4gIG5lZWRzSW5zdGFsbDogdHJ1ZSxcbiAgaGlnaGxpZ2h0RW5hYmxlZDogZmFsc2UsXG4gIGhpZ2hsaWdodENvbG9yTGlnaHQ6ICdyZ2IoMTA3LCAxNDYsIDEyMCknLFxuICBoaWdobGlnaHRDb2xvckRhcms6ICdyZ2IoIDUwLCAgNzAsICA1MCknLFxuICBydWxlc2V0Q29tcGVuZGl1bTogXCJcIixcbiAgcnVsZXNldFJlZmVyZW5jZTogW10sXG59O1xuXG5pbnRlcmZhY2UgQ3VzdG9tUGF0aEVudHJ5IHtcbiAgdmF1bHRQYXRoOiBzdHJpbmc7XG4gIG1hbmlmZXN0S2V5OiBzdHJpbmc7XG4gIGRvVXBkYXRlOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1hbmlmZXN0RmlsZUVudHJ5IHtcbiAgcGF0aDogc3RyaW5nO1xuICBrZXk6IHN0cmluZztcbiAgY3VzdG9tT3ZlcnJpZGU/OiBib29sZWFuO1xuICBkaXNwbGF5TmFtZT86IHN0cmluZztcbiAgb3B0aW9uYWw/OiBib29sZWFuOyAvLyBcdTIxOTAgbWFyayBvcHRpb25hbCBmaWxlcy9mb2xkZXJzIGlmIHlvdSB3aXNoXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5zdGFsbE9wdGlvbnMge1xuXHRjb21wZW5kaXVtOiBzdHJpbmc7XG5cdHJlZmVyZW5jZXM6IHN0cmluZ1tdO1xuICB9XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHJlcXVpcmVzR3JhcGg6IE1hcDxzdHJpbmcsIHN0cmluZ1tdPjtcbiAgcHVibGljIHNldHRpbmdzVGFiOiBUb29sa2l0U2V0dGluZ3NUYWI7XG4gIHNldHRpbmdzOiBUb29sa2l0U2V0dGluZ3M7XG4gIGZpbGVDYWNoZU1hbmFnZXI6IFRvb2xraXRGaWxlQ2FjaGVNYW5hZ2VyO1xuICBtYW5pZmVzdENhY2hlOiB7XG4gICAgZmlsZXM6IE1hbmlmZXN0RmlsZUVudHJ5W107XG4gICAgZm9sZGVyczogTWFuaWZlc3RGaWxlRW50cnlbXTtcbiAgfSA9IHsgZmlsZXM6IFtdLCBmb2xkZXJzOiBbXSB9O1xuICBjaGFuZ2Vsb2c6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIGF1dG9DaGVja0ludGVydmFsOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBvbGRQYXRoc0J5R2l0aHViOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gIHByaXZhdGUgc3R5bGVFbDogSFRNTFN0eWxlRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG4gIGJhY2t1cE1hbmFnZXI6IEJhY2t1cE1hbmFnZXI7XG4gIGV4Y2x1ZGVkUGF0aHMgPSBbXG4gICAgJy5vYnNpZGlhbicsXG4gICAgJy5EU19TdG9yZScsXG4gICAgJy5naXRpZ25vcmUnLFxuICAgICcuZ2l0YXR0cmlidXRlcycsXG4gICAgJy5naXRodWInLFxuICAgICdSRUFETUUubWQnLFxuICAgICcudmVyc2lvbi5qc29uJyxcbiAgICAncGx1Z2lucycsXG4gICAgJ0NvbXBlbmRpdW0nXG4gIF07XG4gIFxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSEVMUEVSUyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICAvKiogR2l2ZW4gYSBHaXRIdWIgcGF0aCwgcmV0dXJuIHRoZSBvdmVycmlkZGVuIHZhdWx0IHBhdGggb3IgdGhlIG9yaWdpbmFsLiAqL1xuICByZXNvbHZlVmF1bHRQYXRoKGdpdGh1YlBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKFxuICAgICAgKGMpID0+XG4gICAgICAgIGMubWFuaWZlc3RLZXkgPT09IGdpdGh1YlBhdGggfHxcbiAgICAgICAgYy5tYW5pZmVzdEtleSA9PT0gdGhpcy5rZXlGb3IoZ2l0aHViUGF0aClcbiAgICApO1xuICAgIHJldHVybiBjdXN0b20/LnZhdWx0UGF0aCA/PyBnaXRodWJQYXRoO1xuICB9XG5cbiAgLyoqIENvbnZlcnQgXHUyMDFDc29tZS9mb2xkZXIvZmlsZS5tZFx1MjAxRCBcdTIxOTIgXHUyMDFDc29tZS1mb2xkZXItZmlsZVx1MjAxRCAobG93ZXJjYXNlZCwgbm8gZXh0ZW5zaW9uKS4gKi9cbiAga2V5Rm9yKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHBhdGhcbiAgICAgIC5yZXBsYWNlKC9bL1xcXFxdL2csICctJylcbiAgICAgIC5yZXBsYWNlKC9cXC5bXi5dKyQvLCAnJylcbiAgICAgIC50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgaXNFeGNsdWRlZChwYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5leGNsdWRlZFBhdGhzLnNvbWUoXG4gICAgICAoZXgpID0+XG4gICAgICAgIHBhdGggPT09IGV4IHx8XG4gICAgICAgIHBhdGguc3RhcnRzV2l0aChgJHtleH0vYCkgfHxcbiAgICAgICAgcGF0aC5pbmNsdWRlcyhgLyR7ZXh9L2ApIHx8XG4gICAgICAgIHBhdGguZW5kc1dpdGgoYC8ke2V4fWApIHx8XG4gICAgICAgIHBhdGguaW5jbHVkZXMoYC8ke2V4fWApXG4gICAgKTtcbiAgfVxuICBcbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIENVU1RPTSBJTlNUQUxMIExPR0lDIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIHB1YmxpYyBhc3luYyBwZXJmb3JtQ3VzdG9tSW5zdGFsbChcbiAgICB0b0luc3RhbGw6IHsgcGF0aDogc3RyaW5nOyBpc0ZvbGRlcjogYm9vbGVhbiB9W11cbiAgKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0XG5cdC8vIG9wdGlvbmFsIGJhY2t1cCAvL1xuXHRjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKClcblx0LmZpbHRlcigoZik6IGYgaXMgVEZpbGUgPT4gZiBpbnN0YW5jZW9mIFRGaWxlKVxuXHQubWFwKChmKSA9PiBmLnBhdGgpO1xuXHRjb25zdCBub25NYXJrZXJGaWxlcyA9IGFsbEZpbGVzLmZpbHRlcigocCkgPT4gcCAhPT0gJy52dnVuZGVybG9yZV9pbnN0YWxsZWQnKTtcblxuXHRpZiAobm9uTWFya2VyRmlsZXMubGVuZ3RoID4gMCAmJiB0aGlzLnNldHRpbmdzLmF1dG9CYWNrdXBCZWZvcmVVcGRhdGUpIHtcblx0Y29uc3QgZm9sZGVyID0gYXdhaXQgdGhpcy5iYWNrdXBNYW5hZ2VyLmJhY2t1cFZhdWx0TWlycm9yKCdwcmUtY3VzdG9tLWluc3RhbGwnKTtcblx0bmV3IE5vdGljZShgQmFja3VwIGJlZm9yZSBjdXN0b21cdTIwMTBpbnN0YWxsIGNyZWF0ZWQgYXQ6ICR7Zm9sZGVyfWApO1xuXHR9XG4gICAgLy8gMikgTG9vcCBvdmVyIGVhY2ggc2VsZWN0ZWQgcGF0aFxuICAgIGZvciAoY29uc3QgZW50cnkgb2YgdG9JbnN0YWxsKSB7XG4gICAgICBpZiAoZW50cnkuaXNGb2xkZXIpIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZW50cnkucGF0aCkpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGVudHJ5LnBhdGgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBDcmVhdGVkIGZvbGRlcjogJHtlbnRyeS5wYXRofWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGaWxlIFx1MjE5MiBmaW5kIE1hbmlmZXN0RmlsZUVudHJ5XG4gICAgICAgIGNvbnN0IG1hbmlmZXN0RW50cnkgPSB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMuZmluZChcbiAgICAgICAgICAoZikgPT4gZi5wYXRoID09PSBlbnRyeS5wYXRoXG4gICAgICAgICk7XG4gICAgICAgIGlmICghbWFuaWZlc3RFbnRyeSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IGZpbmQgbWFuaWZlc3QgZW50cnkgZm9yIGZpbGU6ICR7ZW50cnkucGF0aH1gKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXVzZSB5b3VyIGV4aXN0aW5nIFx1MjAxQ3VwZGF0ZUVudHJ5RnJvbU1hbmlmZXN0XHUyMDFEIChmb3JjZSA9IHRydWUpXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRW50cnlGcm9tTWFuaWZlc3QobWFuaWZlc3RFbnRyeSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuXHRcdC8vIDMpIFVwZGF0ZSAudmVyc2lvbi5qc29uIGFuZCBzZXR0aW5nc1xuXHRcdGF3YWl0IHRoaXMudXBkYXRlVmVyc2lvbkZpbGUoKTtcblx0XHR0aGlzLnNldHRpbmdzLmluc3RhbGxlZFZlcnNpb24gPVxuXHRcdHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gdGhpcy5zZXR0aW5ncy5pbnN0YWxsZWRWZXJzaW9uO1xuXHRcdHRoaXMuc2V0dGluZ3MubGFzdEZvcmNlVXBkYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXHRcdHRoaXMuc2V0dGluZ3MubmVlZHNJbnN0YWxsID0gZmFsc2U7XG5cdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdC8vIDQpIENyZWF0ZSB0aGUgaGlkZGVuIG1hcmtlciBmaWxlXG5cdFx0Y29uc3QgbWFya2VyUGF0aCA9ICcudnZ1bmRlcmxvcmVfaW5zdGFsbGVkJztcblx0XHRpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhtYXJrZXJQYXRoKSkpIHtcblx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobWFya2VyUGF0aCwgJycpO1xuXHRcdH1cblxuXHRcdC8vIDUpIFJlXHUyMDEwZW5hYmxlIGhpZ2hsaWdodGluZyAoYWx3YXlzIHR1cm4gaXQgYmFjayBvbilcblx0XHR0aGlzLnNldHRpbmdzLm5lZWRzSW5zdGFsbCA9IGZhbHNlO1xuXHRcdHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCA9IHRydWU7XG5cdFx0YXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHR0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFxuXHRcdGlmICh0aGlzLnNldHRpbmdzVGFiKSB7XG5cdFx0ICB0aGlzLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcblx0XHR9XG5cdFx0bmV3IE5vdGljZSgnXHUyNzA1IEN1c3RvbSBpbnN0YWxsIGNvbXBsZXRlIFx1MjAyNicpO1xuXHR9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEhJR0hMSUdIVElORyAoTGlnaHQgKyBEYXJrIE1vZGUpIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIHByaXZhdGUgZ2V0IGhpZ2hsaWdodENTUygpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxpZ2h0ID0gdGhpcy5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckxpZ2h0LnRyaW0oKSB8fCAncmdiYSgxMDcsMTQ2LDEyMCwxKSc7XG4gICAgY29uc3QgZGFyayA9IHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0Q29sb3JEYXJrLnRyaW0oKSB8fCAncmdiYSggNTAsIDcwLCA1MCwxKSc7XG5cbiAgICBjb25zdCBmaWxlU2VsZWN0b3JzID0gdGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzLm1hcCgoZikgPT4ge1xuICAgICAgY29uc3QgZXNjYXBlZCA9IGYucGF0aC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJyk7XG4gICAgICByZXR1cm4gYC5uYXYtZmlsZS10aXRsZVtkYXRhLXBhdGg9XCIke2VzY2FwZWR9XCJdYDtcbiAgICB9KTtcblxuICAgIGNvbnN0IGZvbGRlclNlbGVjdG9ycyA9IHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzLm1hcCgoZikgPT4ge1xuICAgICAgY29uc3QgZXNjYXBlZCA9IGYucGF0aC5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJyk7XG4gICAgICByZXR1cm4gYC5uYXYtZm9sZGVyLXRpdGxlW2RhdGEtcGF0aD1cIiR7ZXNjYXBlZH1cIl1gO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW1xuICAgICAgYDpyb290IHtgLFxuICAgICAgYCAgLS12dnVuZGVybG9yZS10b29sa2l0LWhpZ2hsaWdodDogJHtsaWdodH07YCxcbiAgICAgIGB9YCxcbiAgICAgIGBgLFxuICAgICAgYGJvZHkudGhlbWUtZGFyayB7YCxcbiAgICAgIGAgIC0tdnZ1bmRlcmxvcmUtdG9vbGtpdC1oaWdobGlnaHQ6ICR7ZGFya307YCxcbiAgICAgIGB9YCxcbiAgICAgIGBgLFxuICAgIF07XG5cbiAgICBpZiAoZmlsZVNlbGVjdG9ycy5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYCR7ZmlsZVNlbGVjdG9ycy5qb2luKCcsICcpfSB7YCk7XG4gICAgICBsaW5lcy5wdXNoKGAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXZ2dW5kZXJsb3JlLXRvb2xraXQtaGlnaGxpZ2h0KTtgKTtcbiAgICAgIGxpbmVzLnB1c2goYCAgYm9yZGVyLXJhZGl1czogM3B4O2ApO1xuICAgICAgbGluZXMucHVzaChgfWApO1xuICAgICAgbGluZXMucHVzaChgYCk7XG4gICAgfVxuXG4gICAgaWYgKGZvbGRlclNlbGVjdG9ycy5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYCR7Zm9sZGVyU2VsZWN0b3JzLmpvaW4oJywgJyl9IHtgKTtcbiAgICAgIGxpbmVzLnB1c2goYCAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdnZ1bmRlcmxvcmUtdG9vbGtpdC1oaWdobGlnaHQpO2ApO1xuICAgICAgbGluZXMucHVzaChgICBib3JkZXItcmFkaXVzOiAzcHg7YCk7XG4gICAgICBsaW5lcy5wdXNoKGB9YCk7XG4gICAgICBsaW5lcy5wdXNoKGBgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXMuam9pbignXFxuJyk7XG4gIH1cblxuICBwdWJsaWMgZW5hYmxlSGlnaGxpZ2h0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnN0eWxlRWwpIHJldHVybjtcbiAgICB0aGlzLnN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHRoaXMuc3R5bGVFbC5pZCA9ICd2dnVuZGVybG9yZS1oaWdobGlnaHQtaW5qZWN0JztcbiAgICB0aGlzLnN0eWxlRWwudGV4dENvbnRlbnQgPSB0aGlzLmhpZ2hsaWdodENTUztcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRoaXMuc3R5bGVFbCk7XG4gIH1cblxuICBwdWJsaWMgZGlzYWJsZUhpZ2hsaWdodCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuc3R5bGVFbCkgcmV0dXJuO1xuICAgIHRoaXMuc3R5bGVFbC5yZW1vdmUoKTtcbiAgICB0aGlzLnN0eWxlRWwgPSBudWxsO1xuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFJFTU9URSBCQVNFTElORSBDQUNISU5HIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIHB1YmxpYyBhc3luYyBmZXRjaFJlbW90ZUJhc2VsaW5lKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdUREMDEgZmV0Y2hSZW1vdGVCYXNlbGluZSgpIGNhbGxlZCcpO1xuXG4gICAgaWYgKCF0aGlzLm1hbmlmZXN0Q2FjaGUgfHwgIUFycmF5LmlzQXJyYXkodGhpcy5tYW5pZmVzdENhY2hlLmZpbGVzKSkge1xuICAgICAgY29uc29sZS53YXJuKCdcdTI2QTBcdUZFMEYgbWFuaWZlc3RDYWNoZSBpcyBtaXNzaW5nIG9yIGludmFsaWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmF3VXJsID0gYGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vJHtlbnRyeS5wYXRofWA7XG4gICAgICAgIGNvbnN0IHJlbW90ZVRleHQgPSBhd2FpdCAoYXdhaXQgZmV0Y2gocmF3VXJsKSkudGV4dCgpO1xuICAgICAgICBjb25zdCByZXNvbHZlZCA9IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChlbnRyeS5wYXRoKTtcblxuICAgICAgICAvLyBJZiByZW1hcHBlZCwgcmVtb3ZlIHRoZSBvbGQgY2FjaGUgZW50cnlcbiAgICAgICAgaWYgKHJlc29sdmVkICE9PSBlbnRyeS5wYXRoKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnJlbW92ZUZyb21DYWNoZShlbnRyeS5wYXRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZShcbiAgICAgICAgICByZXNvbHZlZCxcbiAgICAgICAgICByZW1vdGVUZXh0LFxuICAgICAgICAgIGVudHJ5LnBhdGgsXG4gICAgICAgICAgZmFsc2VcbiAgICAgICAgKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGZldGNoIHJhdyBiYXNlbGluZSBmb3IgJHtlbnRyeS5wYXRofWAsIGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdURDRTYgRmluYWwgY2FjaGU6JywgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmdldENhY2hlKCkpO1xuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE1BUktFUiBGSUxFIENIRUNLUyAoZmlyc3RcdTIwMTBydW4gZGV0ZWN0aW9uKSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBwcml2YXRlIGFzeW5jIGNoZWNrTWFya2VyRmlsZSgpIHtcbiAgICBjb25zdCBkZXZGb3JjZSA9ICh3aW5kb3cgYXMgYW55KS5mb3JjZU5lZWRzSW5zdGFsbDtcbiAgICBpZiAoZGV2Rm9yY2UpIHtcbiAgICAgIHRoaXMuc2V0dGluZ3MubmVlZHNJbnN0YWxsID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUubG9nKCdcdUQ4M0VcdURERUEgREVWIE1PREU6IEZvcmNpbmcgbmVlZHNJbnN0YWxsID0gdHJ1ZScpO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzVGFiKSB0aGlzLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtYXJrZXJQYXRoID0gJy5URVNUX3Z2dW5kZXJsb3JlX2luc3RhbGxlZCc7XG4gICAgY29uc3QgbWFya2VyRXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMobWFya2VyUGF0aCk7XG4gICAgdGhpcy5zZXR0aW5ncy5uZWVkc0luc3RhbGwgPSAhbWFya2VyRXhpc3RzO1xuXG4gICAgY29uc29sZS5sb2coXG4gICAgICBtYXJrZXJFeGlzdHNcbiAgICAgICAgPyAnXHUyNzA1IE1hcmtlciBmaWxlIGZvdW5kIFx1MjE5MiBuZWVkc0luc3RhbGwgPSBmYWxzZSdcbiAgICAgICAgOiAnXHVEODNEXHVERkUxIE1hcmtlciBmaWxlIE5PVCBmb3VuZCBcdTIxOTIgbmVlZHNJbnN0YWxsID0gdHJ1ZSdcbiAgICApO1xuXG4gICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuICAgICAgdGhpcy5zZXR0aW5nc1RhYi5kaXNwbGF5KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIE1BTklGRVNUIFNZTkMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgc3luY01hbmlmZXN0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcbiAgICAgICAgJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vbWFuaWZlc3QuanNvbidcbiAgICAgICk7XG4gICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggbWFuaWZlc3Q6ICR7cmVzLnN0YXR1c1RleHR9YCk7XG4gICAgICBjb25zdCBtYW5pZmVzdCA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICB0aGlzLnNldHRpbmdzLmxhdGVzdERlZmF1bHRzID0gbWFuaWZlc3QuZGVmYXVsdFBhdGhzIHx8IHt9O1xuICAgICAgdGhpcy5tYW5pZmVzdENhY2hlID0gbWFuaWZlc3Q7XG5cbiAgICAgIGNvbnN0IG1hbmlmZXN0Q29udGVudCA9IEpTT04uc3RyaW5naWZ5KG1hbmlmZXN0LCBudWxsLCAyKTtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoJ21hbmlmZXN0Lmpzb24nLCBtYW5pZmVzdENvbnRlbnQpO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgY29uc29sZS5sb2coJ01hbmlmZXN0IHN5bmNlZCBhbmQgbG9jYWwgbWFuaWZlc3QgdXBkYXRlZC4nKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc3luY2luZyBtYW5pZmVzdDonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gc3luYyBtYW5pZmVzdC4nKTtcbiAgICB9XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUExVR0lOIExJRkVDWUNMRSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuICBhc3luYyBvbmxvYWQoKSB7XG4gICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgIHRoaXMuYmFja3VwTWFuYWdlciA9IG5ldyBCYWNrdXBNYW5hZ2VyKHRoaXMuYXBwLnZhdWx0KTtcblxuICAgIHRoaXMuZmlsZUNhY2hlTWFuYWdlciA9IG5ldyBUb29sa2l0RmlsZUNhY2hlTWFuYWdlcihcbiAgICAgIHRoaXMuYXBwLnZhdWx0LFxuICAgICAgdGhpcy5zZXR0aW5ncy5maWxlQ2FjaGUgPz8ge30sXG4gICAgICBhc3luYyAoKSA9PiBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpXG4gICAgKTtcblxuICAgIHRoaXMuc2V0dGluZ3NUYWIgPSBuZXcgVG9vbGtpdFNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKTtcbiAgICB0aGlzLmFkZFNldHRpbmdUYWIodGhpcy5zZXR0aW5nc1RhYik7XG5cbiAgICAvLyBJbW1lZGlhdGVseSBsb2FkIGFueSBjYWNoZWQgbWFuaWZlc3QuanNvbi4gSWYgbm90IHByZXNlbnQsIHdlJ2xsIGZldGNoIGluIGEgbW9tZW50LlxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCdtYW5pZmVzdC5qc29uJyk7XG4gICAgICB0aGlzLm1hbmlmZXN0Q2FjaGUgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgICAgY29uc29sZS5sb2coJ1x1MjcwNSBMb2FkZWQgbWFuaWZlc3QgZnJvbSB2YXVsdDonLCB0aGlzLm1hbmlmZXN0Q2FjaGUpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS53YXJuKCdNYW5pZmVzdCBub3QgZm91bmQgaW4gdmF1bHQ7IHdpbGwgZmV0Y2ggZnJvbSBHaXRIdWIgc2hvcnRseS4nKTtcbiAgICB9XG5cbiAgICAvLyBJZiBoaWdobGlnaHRpbmcgd2FzIE9OIGJlZm9yZSwgcmVzdG9yZSBpdCBub3c6XG5cdGlmICh0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQgJiYgIXRoaXMuc2V0dGluZ3MubmVlZHNJbnN0YWxsKSB7XG5cdFx0dGhpcy5lbmFibGVIaWdobGlnaHQoKTtcblx0ICB9XG5cbiAgICAvLyBEZWZlciBoZWF2aWVyIHRhc2tzIHNsaWdodGx5IHNvIFVJIGlzblx1MjAxOXQgYmxvY2tlZDpcbiAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMuc3luY01hbmlmZXN0KCk7XG4gICAgICBhd2FpdCB0aGlzLnNob3dJbmRleGluZ01vZGFsKCk7XG4gICAgICBhd2FpdCB0aGlzLmNoZWNrRm9yVXBkYXRlcygpO1xuXG4gICAgICAvLyBCdWlsZCByZXZlcnNlIGNhY2hlIGZvciBcdTIwMUNtb3ZlZFx1MjAxRCBkZXRlY3Rpb25cbiAgICAgIHRoaXMub2xkUGF0aHNCeUdpdGh1YiA9IE9iamVjdC5lbnRyaWVzKFxuICAgICAgICB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuZ2V0Q2FjaGUoKSBhcyBSZWNvcmQ8c3RyaW5nLCBUb29sa2l0RmlsZUNhY2hlRW50cnk+XG4gICAgICApLnJlZHVjZSgobWFwLCBbdmF1bHRQYXRoLCBlbnRyeV0pID0+IHtcbiAgICAgICAgbWFwW2VudHJ5LmdpdGh1YlBhdGhdID0gdmF1bHRQYXRoO1xuICAgICAgICByZXR1cm4gbWFwO1xuICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPik7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdcdUQ4M0RcdURDRTYgQ2FjaGVkIEZpbGVzOicsIHRoaXMuZmlsZUNhY2hlTWFuYWdlci5nZXRDYWNoZSgpKTtcbiAgICB9LCAyNTApO1xuXG4gICAgdGhpcy5zY2hlZHVsZUF1dG9VcGRhdGVDaGVjaygpO1xuXG4gICAgLy8gRGVmZW5zaXZlOiBlbnN1cmUgc2V0dGluZ3MuY3VzdG9tUGF0aHMgZXhpc3RzXG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzKSB7XG4gICAgICB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzID0gW107XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgdGhlIHJlcXVpcmVzR3JhcGggZnJvbSBtYW5pZmVzdC5qc29uXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJhdyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnbWFuaWZlc3QuanNvbicpO1xuICAgICAgY29uc3QgbWFuaWZlc3QgPSBKU09OLnBhcnNlKHJhdykgYXMge1xuICAgICAgICBmaWxlczogQXJyYXk8eyBrZXk6IHN0cmluZzsgcmVxdWlyZXM/OiBzdHJpbmdbXSB9PjtcbiAgICAgICAgZm9sZGVyczogQXJyYXk8eyBrZXk6IHN0cmluZzsgcmVxdWlyZXM/OiBzdHJpbmdbXSB9PjtcbiAgICAgIH07XG4gICAgICBjb25zdCBlbnRyaWVzID0gWy4uLihtYW5pZmVzdC5mb2xkZXJzIHx8IFtdKSwgLi4uKG1hbmlmZXN0LmZpbGVzIHx8IFtdKV07XG4gICAgICB0aGlzLnJlcXVpcmVzR3JhcGggPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nW10+KCk7XG4gICAgICBmb3IgKGNvbnN0IGUgb2YgZW50cmllcykge1xuICAgICAgICB0aGlzLnJlcXVpcmVzR3JhcGguc2V0KGUua2V5LCBlLnJlcXVpcmVzID8/IFtdKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBidWlsZCByZXF1aXJlc0dyYXBoIChtYW5pZmVzdC5qc29uIG1pc3Npbmcgb3IgaW52YWxpZCkuJyk7XG4gICAgICB0aGlzLnJlcXVpcmVzR3JhcGggPSBuZXcgTWFwKCk7XG4gICAgfVxuICB9XG5cbiAgb251bmxvYWQoKSB7XG4gICAgdGhpcy5kaXNhYmxlSGlnaGxpZ2h0KCk7XG4gICAgaWYgKHRoaXMuYXV0b0NoZWNrSW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvQ2hlY2tJbnRlcnZhbCk7XG4gICAgfVxuICB9XG5cbiAgc2NoZWR1bGVBdXRvVXBkYXRlQ2hlY2soKSB7XG4gICAgdGhpcy5hdXRvQ2hlY2tJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLmNoZWNrRm9yVXBkYXRlcygpO1xuICAgIH0sIDYwICogNjAgKiAxMDAwKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBCQUNLVVAgJiBVTkRPIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIGJhY2t1cEZpbGUoZmlsZVBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcyA9IHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgfHwge307XG4gICAgdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlc1tmaWxlUGF0aF0gPSBjb250ZW50O1xuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgY29uc29sZS5sb2coYEJhY2t1cCBzdG9yZWQgZm9yICR7ZmlsZVBhdGh9YCk7XG4gIH1cblxuICBhc3luYyB1bmRvRm9yY2VVcGRhdGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmJhY2t1cEZpbGVzIHx8IE9iamVjdC5rZXlzKHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZSgnTm8gYmFja3VwcyBhdmFpbGFibGUgdG8gcmVzdG9yZS4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yIChjb25zdCBbZmlsZVBhdGgsIGJhY2t1cENvbnRlbnRdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMpKSB7XG4gICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmlsZVBhdGgpKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZVBhdGgsIGJhY2t1cENvbnRlbnQpO1xuICAgICAgICBjb25zb2xlLmxvZyhgUmVzdG9yZWQgJHtmaWxlUGF0aH1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgYmFja3VwQ29udGVudCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBSZWNyZWF0ZWQgYW5kIHJlc3RvcmVkICR7ZmlsZVBhdGh9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBGb3JjZSB1cGRhdGUgdW5kb25lLicpO1xuICAgIHRoaXMuc2V0dGluZ3MuYmFja3VwRmlsZXMgPSB7fTtcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICB9XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZPTERFUiBTWU5DIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG4gIGFzeW5jIHN5bmNNaXNzaW5nRm9sZGVycygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5tYW5pZmVzdENhY2hlICYmIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSBmb2xkZXJFbnRyeS5wYXRoO1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmb2xkZXJQYXRoKSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1RENDMSBDcmVhdGVkIG1pc3NpbmcgZm9sZGVyOiAke2ZvbGRlclBhdGh9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIEZPUkNFLVVQREFURSBQUkVWSUVXIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXG5hc3luYyBidWlsZEZvcmNlVXBkYXRlUHJldmlldygpOiBQcm9taXNlPFByZXZpZXdJdGVtW10+IHtcblx0Y29uc3QgcHJldmlld0xpc3Q6IFByZXZpZXdJdGVtW10gPSBbXTtcblxuXHQvLyAwKSBDb2xsZWN0IGFsbCBibGFja2xpc3RlZCBmb2xkZXJzIChtYW5pZmVzdEtleSB2YWx1ZXMgd2hlcmUgZG9VcGRhdGUgPT09IGZhbHNlKVxuXHRjb25zdCBkZW55TGlzdGVkRm9sZGVycyA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHNcblx0ICAuZmlsdGVyKChjKSA9PiBjLmRvVXBkYXRlID09PSBmYWxzZSlcblx0ICAubWFwKChjKSA9PiBjLm1hbmlmZXN0S2V5KTtcblxuXHQvLyAxKSBEZW55LWxpc3RlZCBmaWxlcyBmaXJzdFx1MjAxNGJ1dCBvbmx5IGlmIHRoZXkgd291bGQgYWN0dWFsbHkgYmUgXCJuZXdcIiBvciBcIm91dCBvZiBkYXRlXCJcblx0Zm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcblx0ICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmaWxlXG5cdCAgaWYgKGVudHJ5Lm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuXG5cdCAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBlbnRyeS5rZXkpO1xuXHQgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuXHRcdGVudHJ5LnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdCAgKTtcblx0ICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHQvLyBSZXNvbHZlIHZhdWx0IHBhdGggKGFjY291bnRpbmcgZm9yIGFueSByZW1hcHBpbmcpXG5cdFx0Y29uc3QgdnAgPSBjdXN0b20/LnZhdWx0UGF0aCA/PyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZW50cnkucGF0aCk7XG5cblx0XHQvLyBDaGVjazogZG9lcyB0aGUgZmlsZSBleGlzdCBsb2NhbGx5PyBBbmQgaXMgaXQgdXAtdG8tZGF0ZT9cblx0XHRjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2cCk7XG5cdFx0Y29uc3QgdXBUb0RhdGUgPSBleGlzdHMgJiYgKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKHZwKSk7XG5cblx0XHQvLyBPbmx5IHNob3cgYXMgZGVueS1saXN0ZWQgaWYgaXQgd291bGQgaGF2ZSBiZWVuIFx1MjAxQ25ld1x1MjAxRCAobWlzc2luZykgb3IgXHUyMDFDb3V0LW9mLWRhdGVcdTIwMURcblx0XHRpZiAoIWV4aXN0cyB8fCAhdXBUb0RhdGUpIHtcblx0XHQgIHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdFx0ZmlsZVBhdGg6IHZwLFxuXHRcdFx0YWN0aW9uOiAnZGVueS1saXN0ZWQgXHUyMDEzIHdpbGwgbm90IHVwZGF0ZScsXG5cdFx0XHRzZWxlY3RlZDogZmFsc2UsXG5cdFx0ICB9KTtcblx0XHR9XG5cdCAgfVxuXHR9XG5cblx0Ly8gMikgRlVMTC1TWU5DIG1vZGUgKHNraXAgYW55IGZpbGUvZm9sZGVyIHRoYXQgaXMgYmxhY2tsaXN0ZWQpXG5cdGlmICghdGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzKSB7XG5cdCAgZm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHRcdC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0XHRpZiAoZi5vcHRpb25hbCkge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBmLmtleSk7XG5cdFx0Y29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0ICBmLnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdFx0KTtcblx0XHRpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHQgIGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IHZwID0gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGYucGF0aCk7XG5cdFx0bGV0IHRhZyA9ICcnO1xuXHRcdGlmICh2cCAhPT0gZi5wYXRoKSB0YWcgPSAnIChyZW1hcHBlZCknO1xuXG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuXHRcdGlmICghZXhpc3RzKSB7XG5cdFx0ICBwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHRcdGZpbGVQYXRoOiB2cCxcblx0XHRcdGFjdGlvbjogYG5ldyBmaWxlJHt0YWd9YCxcblx0XHRcdHNlbGVjdGVkOiB0cnVlLFxuXHRcdCAgfSk7XG5cdFx0fSBlbHNlIGlmICghKGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci5pc1VwVG9EYXRlKHZwKSkpIHtcblx0XHQgIHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdFx0ZmlsZVBhdGg6IHZwLFxuXHRcdFx0YWN0aW9uOiBgd2lsbCBiZSBvdmVyd3JpdHRlbiR7dGFnfWAsXG5cdFx0XHRzZWxlY3RlZDogdHJ1ZSxcblx0XHQgIH0pO1xuXHRcdH1cblx0ICB9XG5cblx0ICBmb3IgKGNvbnN0IGZsZCBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuXHRcdC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuXHRcdGlmIChmbGQub3B0aW9uYWwpIHtcblx0XHQgIGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGNvbnN0IGlzRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLmluY2x1ZGVzKGZsZC5wYXRoKTtcblx0XHRpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmbGQucGF0aCkpICYmICFpc0RlbnlGb2xkZXIpIHtcblx0XHQgIHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdFx0ZmlsZVBhdGg6IGZsZC5wYXRoLFxuXHRcdFx0YWN0aW9uOiAnbWlzc2luZyBmb2xkZXIgKHdpbGwgYmUgY3JlYXRlZCknLFxuXHRcdFx0c2VsZWN0ZWQ6IHRydWUsXG5cdFx0XHRpc0ZvbGRlcjogdHJ1ZSxcblx0XHQgIH0pO1xuXHRcdH1cblx0ICB9XG5cblx0ICByZXR1cm4gcHJldmlld0xpc3Q7XG5cdH1cblxuXHQvLyAzKSBDVVNUT00tU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0IGlzIGJsYWNrbGlzdGVkKVxuXHRmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0ICBpZiAoZW50cnkub3B0aW9uYWwpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cblx0ICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGVudHJ5LmtleSk7XG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0ZW50cnkucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcblx0ICApO1xuXHQgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblxuXHQgIGNvbnN0IHZhdWx0UGF0aCA9IGN1c3RvbT8udmF1bHRQYXRoID8/IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChlbnRyeS5wYXRoKTtcblx0ICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpO1xuXHQgIGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2YXVsdFBhdGgpKTtcblxuXHQgIGxldCB0YWcgPSAnJztcblx0ICBpZiAodmF1bHRQYXRoICE9PSBlbnRyeS5wYXRoKSB0YWcgPSAnIChyZW1hcHBlZCknO1xuXG5cdCAgaWYgKCFleGlzdHMpIHtcblx0XHRwcmV2aWV3TGlzdC5wdXNoKHtcblx0XHQgIGZpbGVQYXRoOiB2YXVsdFBhdGgsXG5cdFx0ICBhY3Rpb246IGBuZXcgZmlsZSR7dGFnfWAsXG5cdFx0ICBzZWxlY3RlZDogdHJ1ZSxcblx0XHR9KTtcblx0ICB9IGVsc2UgaWYgKCF1cFRvRGF0ZSkge1xuXHRcdHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdCAgZmlsZVBhdGg6IHZhdWx0UGF0aCxcblx0XHQgIGFjdGlvbjogYHdpbGwgYmUgb3ZlcndyaXR0ZW4ke3RhZ31gLFxuXHRcdCAgc2VsZWN0ZWQ6IHRydWUsXG5cdFx0fSk7XG5cdCAgfVxuXHR9XG5cblx0Zm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuXHQgIGlmIChlbnRyeS5vcHRpb25hbCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblxuXHQgIGNvbnN0IGlzRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLmluY2x1ZGVzKGVudHJ5LnBhdGgpO1xuXHQgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGVudHJ5LnBhdGgpKSAmJiAhaXNEZW55Rm9sZGVyKSB7XG5cdFx0cHJldmlld0xpc3QucHVzaCh7XG5cdFx0ICBmaWxlUGF0aDogZW50cnkucGF0aCxcblx0XHQgIGFjdGlvbjogJ21pc3NpbmcgZm9sZGVyICh3aWxsIGJlIGNyZWF0ZWQpJyxcblx0XHQgIHNlbGVjdGVkOiB0cnVlLFxuXHRcdCAgaXNGb2xkZXI6IHRydWUsXG5cdFx0fSk7XG5cdCAgfVxuXHR9XG5cblx0Ly8gM2MpIFx1MjAxQ01vdmVkXHUyMDFEIGRldGVjdGlvbiAoc2tpcCBibGFja2xpc3RlZClcblx0Zm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0ICBpZiAoZi5vcHRpb25hbCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblxuXHQgIGNvbnN0IG1hbmlmZXN0S2V5ID0gZi5rZXk7XG5cdCAgY29uc3QgbWFuaWZlc3RQYXRoID0gZi5wYXRoO1xuXHQgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gbWFuaWZlc3RLZXkpO1xuXHQgIGNvbnN0IHByZXZQYXRoID0gdGhpcy5vbGRQYXRoc0J5R2l0aHViW21hbmlmZXN0UGF0aF07XG5cblx0ICBjb25zdCBpc0luRGVueUZvbGRlciA9IGRlbnlMaXN0ZWRGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT5cblx0XHRtYW5pZmVzdFBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdCAgKTtcblx0ICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cdCAgaWYgKGN1c3RvbSAmJiBjdXN0b20udmF1bHRQYXRoICYmIGN1c3RvbS52YXVsdFBhdGggIT09IG1hbmlmZXN0UGF0aCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cblx0ICBpZiAoXG5cdFx0cHJldlBhdGggJiZcblx0XHRwcmV2UGF0aCAhPT0gbWFuaWZlc3RQYXRoICYmXG5cdFx0KCFjdXN0b20gfHwgY3VzdG9tLnZhdWx0UGF0aCA9PT0gbWFuaWZlc3RQYXRoKVxuXHQgICkge1xuXHRcdHByZXZpZXdMaXN0LnB1c2goe1xuXHRcdCAgZmlsZVBhdGg6IHByZXZQYXRoLFxuXHRcdCAgYWN0aW9uOiBgbW92ZWQgXHUyMTkyICR7bWFuaWZlc3RQYXRofWAsXG5cdFx0ICBzZWxlY3RlZDogdHJ1ZSxcblx0XHR9KTtcblx0ICB9XG5cdH1cblxuXHRyZXR1cm4gcHJldmlld0xpc3Q7XG4gIH1cblxuICBcbiAgXG4gIFxuICBhc3luYyBmb3JjZVVwZGF0ZVByZXZpZXdBbmRDb25maXJtKCkge1xuXHQvLyAxKSBCdWlsZCB0aGUgZmxhdCBsaXN0IG9mIFByZXZpZXdJdGVtIG9iamVjdHNcblx0Y29uc3QgcHJldmlld0xpc3QgPSBhd2FpdCB0aGlzLmJ1aWxkRm9yY2VVcGRhdGVQcmV2aWV3KCk7XG4gIFxuXHQvLyAyKSBTcGxpdCB0aGUgaXRlbXMgaW50byBcdTIwMUNkZW55LWxpc3RlZFx1MjAxRCB2cy4gXHUyMDFDbm9ybWFsXHUyMDFEIGl0ZW1zXG5cdC8vICAgIChidWlsZEZvcmNlVXBkYXRlUHJldmlldyB1c2VzIGFjdGlvbiA9ICdkZW55LWxpc3RlZCBcdTIwMTMgd2lsbCBub3QgdXBkYXRlJylcblx0Y29uc3QgZGVueUl0ZW1zOiBQcmV2aWV3SXRlbVtdID0gW107XG5cdGNvbnN0IG5vcm1hbEl0ZW1zOiBQcmV2aWV3SXRlbVtdID0gW107XG5cdGZvciAoY29uc3QgaXRlbSBvZiBwcmV2aWV3TGlzdCkge1xuXHQgIGlmIChpdGVtLmFjdGlvbi5zdGFydHNXaXRoKCdkZW55LWxpc3RlZCcpKSB7XG5cdFx0ZGVueUl0ZW1zLnB1c2goaXRlbSk7XG5cdCAgfSBlbHNlIHtcblx0XHRub3JtYWxJdGVtcy5wdXNoKGl0ZW0pO1xuXHQgIH1cblx0fVxuICBcblx0Ly8gMykgQ3JlYXRlIGFuZCBvcGVuIHRoZSBtb2RhbCB3aXRoIGJvdGggbGlzdHNcblx0Y29uc3QgbW9kYWwgPSBuZXcgKGNsYXNzIGV4dGVuZHMgTW9kYWwge1xuXHQgIHBsdWdpbjogVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luO1xuXHQgIG5vcm1hbDogUHJldmlld0l0ZW1bXTtcblx0ICBkZW5pZWQ6IFByZXZpZXdJdGVtW107XG4gIFxuXHQgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBub3JtYWw6IFByZXZpZXdJdGVtW10sIGRlbmllZDogUHJldmlld0l0ZW1bXSkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5ub3JtYWwgPSBub3JtYWw7XG5cdFx0dGhpcy5kZW5pZWQgPSBkZW5pZWQ7XG5cdCAgfVxuICBcblx0ICBvbk9wZW4oKSB7XG5cdFx0Ly8gUHJldmVudCBjbGlja3MgZnJvbSBjbG9zaW5nIGFueXRoaW5nIGJlaGluZFxuXHRcdHRoaXMuY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdFx0dGhpcy50aXRsZUVsLnNldFRleHQoJ0ZvcmNlIFVwZGF0ZSBQcmV2aWV3Jyk7XG4gIFxuXHRcdC8vIEludHJvIHBhcmFncmFwaFxuXHRcdHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdwJywge1xuXHRcdCAgdGV4dDpcblx0XHRcdCdUaGUgZm9sbG93aW5nIGl0ZW1zIHdpbGwgYmUgdXBkYXRlZC4gVW5jaGVjayBhbnkgaXRlbXMgeW91IGRvIE5PVCB3YW50IHRvIGNoYW5nZSwgdGhlbiBjbGljayBcIkNvbmZpcm0gYW5kIFVwZGF0ZVwiLicsXG5cdFx0fSk7XG4gIFxuXHRcdC8vIDQpIFJlbmRlciBcdTIwMUNub3JtYWxcdTIwMUQgKG5vbi1kZW55KSBpdGVtcyB3aXRoIGNoZWNrYm94ZXNcblx0XHRpZiAodGhpcy5ub3JtYWwubGVuZ3RoKSB7XG5cdFx0ICBjb25zdCBub3JtYWxDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG5cdFx0ICBPYmplY3QuYXNzaWduKG5vcm1hbENvbnRhaW5lci5zdHlsZSwge1xuXHRcdFx0bWF4SGVpZ2h0OiAnMzAwcHgnLFxuXHRcdFx0b3ZlcmZsb3dZOiAnYXV0bycsXG5cdFx0XHRtYXJnaW5Ub3A6ICcxZW0nLFxuXHRcdCAgfSk7XG4gIFxuXHRcdCAgdGhpcy5ub3JtYWwuZm9yRWFjaCgoaXRlbSkgPT4ge1xuXHRcdFx0Y29uc3Qgcm93ID0gbm9ybWFsQ29udGFpbmVyLmNyZWF0ZURpdigpO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihyb3cuc3R5bGUsIHtcblx0XHRcdCAgZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0ICBhbGlnbkl0ZW1zOiAnZmxleC1zdGFydCcsXG5cdFx0XHQgIGp1c3RpZnlDb250ZW50OiAnc3BhY2UtYmV0d2VlbicsXG5cdFx0XHQgIHBhZGRpbmc6ICc2cHggMCcsXG5cdFx0XHQgIGZvbnRGYW1pbHk6ICdtb25vc3BhY2UnLFxuXHRcdFx0fSk7XG4gIFxuXHRcdFx0Ly8gTGVmdDogZmlsZSBwYXRoICsgYWN0aW9uIG5vdGVcblx0XHRcdGNvbnN0IGxhYmVsID0gcm93LmNyZWF0ZURpdigpO1xuXHRcdFx0bGFiZWwuc3R5bGUuZmxleEdyb3cgPSAnMSc7XG5cdFx0XHRsYWJlbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdFx0bGFiZWwuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nO1xuICBcblx0XHRcdGNvbnN0IGxhYmVsV3JhcHBlciA9IGxhYmVsLmNyZWF0ZURpdigpO1xuXHRcdFx0bGFiZWxXcmFwcGVyLnRleHRDb250ZW50ID0gaXRlbS5maWxlUGF0aDtcbiAgXG5cdFx0XHRjb25zdCBub3RlID0gbGFiZWwuY3JlYXRlRGl2KHsgdGV4dDogaXRlbS5hY3Rpb24gfSk7XG5cdFx0XHRub3RlLnN0eWxlLmZvbnRTaXplID0gJzEzcHgnO1xuXHRcdFx0bm90ZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG5cdFx0XHRub3RlLnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnO1xuICBcblx0XHRcdC8vIFJpZ2h0OiBjaGVja2JveFxuXHRcdFx0Y29uc3QgY2hlY2tib3ggPSByb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuXHRcdFx0Y2hlY2tib3guY2hlY2tlZCA9IGl0ZW0uc2VsZWN0ZWQ7XG5cdFx0XHRjaGVja2JveC5vbmNoYW5nZSA9ICgpID0+IHtcblx0XHRcdCAgaXRlbS5zZWxlY3RlZCA9IGNoZWNrYm94LmNoZWNrZWQ7XG5cdFx0XHR9O1xuXHRcdCAgfSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IG5vQ2FuZGlkYXRlcyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcblx0XHRcdE9iamVjdC5hc3NpZ24obm9DYW5kaWRhdGVzLnN0eWxlLCB7XG5cdFx0XHQgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuXHRcdFx0ICBmb250RmFtaWx5OiAnbW9ub3NwYWNlJyxcblx0XHRcdCAgZm9udFN0eWxlOiAnaXRhbGljJyxcblx0XHRcdCAgbWFyZ2luVG9wOiAnMC41ZW0nLFxuXHRcdFx0fSk7XG5cdFx0XHRub0NhbmRpZGF0ZXMudGV4dENvbnRlbnQgPSAnTm8gZm9yY2UtdXBkYXRlIGNhbmRpZGF0ZXMuJztcblx0XHR9XG4gIFxuXHRcdC8vIDUpIFJlbmRlciBcdTIwMUNkZW55LWxpc3RlZFx1MjAxRCBpdGVtcyBpbnNpZGUgYSBjb2xsYXBzZWQgPGRldGFpbHM+XG5cdFx0aWYgKHRoaXMuZGVuaWVkLmxlbmd0aCkge1xuXHRcdCAgY29uc3QgZGVueURldGFpbHMgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGV0YWlscycsIHsgY2xzOiAndmstc2VjdGlvbicgfSk7XG5cdFx0ICBkZW55RGV0YWlscy5vcGVuID0gZmFsc2U7XG4gIFxuXHRcdCAgY29uc3Qgc3VtbWFyeSA9IGRlbnlEZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG5cdFx0ICBPYmplY3QuYXNzaWduKHN1bW1hcnkuc3R5bGUsIHtcblx0XHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0Y29sb3I6ICd2YXIoLS10ZXh0LWZhaW50KScsXG5cdFx0XHRhbGlnbkl0ZW1zOiAnY2VudGVyJyxcblx0XHRcdGdhcDogJzAuNWVtJyxcblx0XHRcdG1hcmdpblRvcDogJzFlbScsXG5cdFx0ICB9KTtcblx0XHQgIHN1bW1hcnkuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGBEZW55LUxpc3QgRmlsZXMgKCR7dGhpcy5kZW5pZWQubGVuZ3RofSlgIH0pO1xuICBcblx0XHQgIC8vIFJvdGF0aW5nIFx1MjAxQ1ZWXHUyMDFEIGljb24gb24gZXhwYW5kL2NvbGxhcHNlXG5cdFx0ICBjb25zdCB0b2dnbGVJY29uID0gc3VtbWFyeS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXHRcdCAgT2JqZWN0LmFzc2lnbih0b2dnbGVJY29uLnN0eWxlLCB7XG5cdFx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0XHRkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcblx0XHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuXHRcdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdFx0dHJhbnNmb3JtOiAncm90YXRlKDE4MGRlZyknLFxuXHRcdCAgfSk7XG5cdFx0ICBkZW55RGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRcdHRvZ2dsZUljb24uc3R5bGUudHJhbnNmb3JtID0gZGVueURldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHQgIH07XG4gIFxuXHRcdCAgLy8gQm9keSBvZiA8ZGV0YWlscz4gXHUyMDE0IGVhY2ggZGVueS1saXN0ZWQgaXRlbSBpcyBmYWludCBhbmQgZGlzYWJsZWRcblx0XHQgIGNvbnN0IGRlbnlCb2R5ID0gZGVueURldGFpbHMuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblx0XHQgIGRlbnlCb2R5LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzFlbSc7XG4gIFxuXHRcdCAgdGhpcy5kZW5pZWQuZm9yRWFjaCgoaXRlbSkgPT4ge1xuXHRcdFx0Y29uc3Qgcm93ID0gZGVueUJvZHkuY3JlYXRlRGl2KCk7XG5cdFx0XHRPYmplY3QuYXNzaWduKHJvdy5zdHlsZSwge1xuXHRcdFx0ICBkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHQgIGFsaWduSXRlbXM6ICdmbGV4LXN0YXJ0Jyxcblx0XHRcdCAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJyxcblx0XHRcdCAgcGFkZGluZzogJzZweCAwJyxcblx0XHRcdCAgZm9udEZhbWlseTogJ21vbm9zcGFjZScsXG5cdFx0XHQgIGNvbG9yOiAndmFyKC0tdGV4dC1mYWludCknLFxuXHRcdFx0ICBmb250U3R5bGU6ICdpdGFsaWMnLFxuXHRcdFx0fSk7XG4gIFxuXHRcdFx0Y29uc3QgbGFiZWxXcmFwcGVyID0gcm93LmNyZWF0ZURpdigpO1xuXHRcdFx0bGFiZWxXcmFwcGVyLnRleHRDb250ZW50ID0gaXRlbS5maWxlUGF0aDtcblx0XHRcdGxhYmVsV3JhcHBlci5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdsaW5lLXRocm91Z2gnO1xuICBcblx0XHRcdGNvbnN0IG5vdGUgPSByb3cuY3JlYXRlRGl2KHsgdGV4dDogaXRlbS5hY3Rpb24gfSk7XG5cdFx0XHRub3RlLnN0eWxlLmZvbnRTaXplID0gJzEzcHgnO1xuXHRcdFx0bm90ZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LWZhaW50KSc7XG5cdFx0XHRub3RlLnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnO1xuICBcblx0XHRcdC8vIERlbnktbGlzdGVkIGNoZWNrYm94IGlzIGRpc2FibGVkXG5cdFx0XHRjb25zdCBjaGVja2JveCA9IHJvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XG5cdFx0XHRjaGVja2JveC5jaGVja2VkID0gaXRlbS5zZWxlY3RlZDtcblx0XHRcdGNoZWNrYm94LmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdGNoZWNrYm94LnRpdGxlID0gJ1RoaXMgaXRlbSBpcyBkZW55LWxpc3RlZCc7XG5cdFx0ICB9KTtcblx0XHR9XG4gIFxuXHRcdC8vIDYpIEJ1dHRvbnMgYXQgdGhlIGJvdHRvbVxuXHRcdGNvbnN0IGJ1dHRvblJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcblx0XHRPYmplY3QuYXNzaWduKGJ1dHRvblJvdy5zdHlsZSwge1xuXHRcdCAgZGlzcGxheTogJ2ZsZXgnLFxuXHRcdCAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LWVuZCcsXG5cdFx0ICBnYXA6ICcwLjVlbScsXG5cdFx0ICBtYXJnaW5Ub3A6ICcxLjVlbScsXG5cdFx0fSk7XG4gIFxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcblx0XHRjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IHRoaXMuY2xvc2UoKTtcbiAgXG5cdFx0Y29uc3QgY29uZmlybUJ0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdCAgdGV4dDogJ0NvbmZpcm0gYW5kIFVwZGF0ZScsXG5cdFx0ICBjbHM6ICdtb2QtY3RhJyxcblx0XHR9KTtcblx0XHRjb25maXJtQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0ICB0aGlzLmNsb3NlKCk7XG5cdFx0ICAvLyBQYXNzIGV2ZXJ5dGhpbmcgaW50byBwZXJmb3JtRm9yY2VVcGRhdGVXaXRoU2VsZWN0aW9uOyBkZW55LWxpc3RlZCBpdGVtcyB3aWxsIGJlIHNraXBwZWRcblx0XHQgIGF3YWl0IHRoaXMucGx1Z2luLnBlcmZvcm1Gb3JjZVVwZGF0ZVdpdGhTZWxlY3Rpb24oWy4uLnRoaXMubm9ybWFsLCAuLi50aGlzLmRlbmllZF0pO1xuXHRcdH07XG5cdCAgfVxuICBcblx0ICBvbkNsb3NlKCkge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdCAgfVxuXHR9KSh0aGlzLmFwcCwgbm9ybWFsSXRlbXMsIGRlbnlJdGVtcyk7XG4gIFxuXHQvLyBBdHRhY2ggcGx1Z2luIHBvaW50ZXIgYW5kIG9wZW5cblx0KG1vZGFsIGFzIGFueSkucGx1Z2luID0gdGhpcztcblx0bW9kYWwub3BlbigpO1xuICB9XG4gIFxuXG4gIGFzeW5jIHVwZGF0ZUVudHJ5RnJvbU1hbmlmZXN0KGVudHJ5OiBNYW5pZmVzdEZpbGVFbnRyeSwgZm9yY2U6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIGNvbnN0IGN1c3RvbSA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZW50cnkua2V5KTtcbiAgICBpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBcdTIzRURcdUZFMEYgU2tpcHBpbmcgJHtlbnRyeS5rZXl9ICgke2VudHJ5LmRpc3BsYXlOYW1lfSkgXHUyMDE0IGJsYWNrbGlzdGVkYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZmluYWxWYXVsdFBhdGggPSBjdXN0b20/LnZhdWx0UGF0aCA/PyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZW50cnkucGF0aCk7XG4gICAgaWYgKCFmb3JjZSAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUoZmluYWxWYXVsdFBhdGgpKSkge1xuICAgICAgY29uc29sZS5sb2coYFx1MjcxNFx1RkUwRiBBbHJlYWR5IHVwIHRvIGRhdGU6ICR7ZW50cnkuZGlzcGxheU5hbWV9YCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdXJsID0gYGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvdnZ1bmRlcmxvcmUtdG9vbGtpdC1mdWxsL21haW4vJHtlbnRyeS5wYXRofWA7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmluYWxWYXVsdFBhdGgsIHRleHQpO1xuICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKGZpbmFsVmF1bHRQYXRoLCB0ZXh0LCBlbnRyeS5wYXRoKTtcbiAgICAgIGNvbnNvbGUubG9nKGBcdTI3MDUgVXBkYXRlZCAke2VudHJ5LmRpc3BsYXlOYW1lfSBcdTIxOTIgJHtmaW5hbFZhdWx0UGF0aH1gKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdTI3NEMgRXJyb3IgdXBkYXRpbmcgJHtlbnRyeS5kaXNwbGF5TmFtZX06YCwgZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcGVyZm9ybUZvcmNlVXBkYXRlV2l0aFNlbGVjdGlvbihwcmV2aWV3TGlzdDogUHJldmlld0l0ZW1bXSkge1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmF1dG9CYWNrdXBCZWZvcmVVcGRhdGUpIHtcbiAgICAgIC8vIFx1MjAyNiAoeW91ciBleGlzdGluZyBiYWNrdXAgY29kZSkgXHUyMDI2XG4gICAgfVxuXG4gICAgdGhpcy5zZXR0aW5ncy5iYWNrdXBGaWxlcyA9IHt9O1xuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICB0cnkge1xuICAgICAgLy8gXHUyNDYwIEZpbHRlciBvdXQgZm9sZGVycywgdW5jaGVja2VkLCBhbmQgZGVueS1saXN0ZWQ6XG4gICAgICBjb25zdCB0b1VwZGF0ZSA9IHByZXZpZXdMaXN0LmZpbHRlcihcbiAgICAgICAgKGl0ZW0pID0+XG4gICAgICAgICAgaXRlbS5zZWxlY3RlZCAmJlxuICAgICAgICAgICFpdGVtLmlzRm9sZGVyICYmXG4gICAgICAgICAgIXRoaXMuc2V0dGluZ3MuY3VzdG9tUGF0aHMuc29tZShcbiAgICAgICAgICAgIChjKSA9PiBjLnZhdWx0UGF0aCA9PT0gaXRlbS5maWxlUGF0aCAmJiBjLmRvVXBkYXRlID09PSBmYWxzZVxuICAgICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIC8vIFx1MjQ2MSBVcGRhdGUgZWFjaCBzZWxlY3RlZCBmaWxlXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdG9VcGRhdGUpIHtcbiAgICAgICAgY29uc3QgZW50cnkgPSB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMuZmluZChcbiAgICAgICAgICAoZikgPT4gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGYucGF0aCkgPT09IGl0ZW0uZmlsZVBhdGhcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFlbnRyeSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgXHUyNkEwXHVGRTBGIENvdWxkIG5vdCBtYXRjaCBwcmV2aWV3IGl0ZW0gdG8gbWFuaWZlc3Q6ICR7aXRlbS5maWxlUGF0aH1gKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUVudHJ5RnJvbU1hbmlmZXN0KGVudHJ5LCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgLy8gXHUyNDYyIEVuc3VyZSBhbGwgbWFuaWZlc3QgZm9sZGVycyBleGlzdFxuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZW50cnkucGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gNCkgQnVtcCB2ZXJzaW9uXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVZlcnNpb25GaWxlKCk7XG4gICAgICB0aGlzLnNldHRpbmdzLmluc3RhbGxlZFZlcnNpb24gPSB0aGlzLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uID8/ICd1bmtub3duJztcbiAgICAgIHRoaXMuc2V0dGluZ3MubGFzdEZvcmNlVXBkYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgbmV3IE5vdGljZSgnXHUyNzA1IFRvb2xraXQgZm9yY2VcdTIwMTB1cGRhdGVkIHdpdGggeW91ciBzZWxlY3Rpb25zLicpO1xuXG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzVGFiLnVwZGF0ZVZlcnNpb25EaXNwbGF5KCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgRm9yY2UgdXBkYXRlIGZhaWxlZC4gVmVyc2lvbiBub3QgY2hhbmdlZC4nLCBlcnIpO1xuICAgICAgbmV3IE5vdGljZSgnXHUyNzRDIE9uZSBvciBtb3JlIGZpbGVzIGZhaWxlZC4gVmVyc2lvbiBOT1QgdXBkYXRlZC4nKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKSB7XG4gICAgICB0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTSU5HTEUtRklMRSBVUERBVEUgKHdpdGggR2l0SHViIEFQSSArIHJhdyBmYWxsYmFjaykgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgdXBkYXRlU2luZ2xlRmlsZUZyb21HaXRIdWIoXG4gICAgeyBnaXRodWJQYXRoLCB2YXVsdFBhdGggfTogeyBnaXRodWJQYXRoOiBzdHJpbmc7IHZhdWx0UGF0aDogc3RyaW5nIH0sXG4gICAgZm9yY2U6IGJvb2xlYW4gPSBmYWxzZVxuICApIHtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzKSB7XG4gICAgICB2YXVsdFBhdGggPSB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZ2l0aHViUGF0aCk7XG4gICAgICBjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGdpdGh1YlBhdGgpO1xuICAgICAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmF1bHRQYXRoID0gZ2l0aHViUGF0aDtcbiAgICB9XG5cbiAgICBpZiAoIXZhdWx0UGF0aCkge1xuICAgICAgY29uc29sZS5lcnJvcihgXHUyNzRDIE5vIHZhbGlkIHZhdWx0IHBhdGggcmVzb2x2ZWQgZm9yICR7Z2l0aHViUGF0aH1gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAxKSBIYW5kbGUgbG9jYWwgcmVuYW1lcyBmaXJzdFxuICAgIGNvbnN0IG9sZFZhdWx0ID0gdGhpcy5vbGRQYXRoc0J5R2l0aHViW2dpdGh1YlBhdGhdO1xuICAgIGlmIChvbGRWYXVsdCAmJiBvbGRWYXVsdCAhPT0gdmF1bHRQYXRoKSB7XG4gICAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKSkge1xuICAgICAgICBjb25zdCBzdHJheSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuICAgICAgICBhd2FpdCB0aGlzLmJhY2t1cEZpbGUodmF1bHRQYXRoLCBzdHJheSk7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVtb3ZlKHZhdWx0UGF0aCk7XG4gICAgICB9XG4gICAgICBjb25zdCBvbGRGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9sZFZhdWx0KTtcbiAgICAgIGlmIChvbGRGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQucmVuYW1lKG9sZEZpbGUsIHZhdWx0UGF0aCk7XG4gICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQodmF1bHRQYXRoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLnVwZGF0ZUNhY2hlKHZhdWx0UGF0aCwgbmV3Q29udGVudCwgZ2l0aHViUGF0aCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAyKSBFeGlzdGVuY2UsIGJhY2t1cCAmIHNraXAgbG9naWNcbiAgICBjb25zdCBmaWxlRXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModmF1bHRQYXRoKTtcbiAgICBpZiAoZm9yY2UgJiYgZmlsZUV4aXN0cykge1xuICAgICAgY29uc3QgY3VycmVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh2YXVsdFBhdGgpO1xuICAgICAgYXdhaXQgdGhpcy5iYWNrdXBGaWxlKHZhdWx0UGF0aCwgY3VycmVudCk7XG4gICAgfVxuICAgIGlmICghZm9yY2UgJiYgZmlsZUV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodmF1bHRQYXRoKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyAzKSBGZXRjaCB2aWEgR2l0SHViIEFQSSwgZmFsbGJhY2sgdG8gcmF3XG4gICAgY29uc3QgYXBpVXJsID0gZW5jb2RlVVJJKFxuICAgICAgYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9jb250ZW50cy8ke2dpdGh1YlBhdGh9P3JlZj1tYWluYFxuICAgICk7XG4gICAgdHJ5IHtcbiAgICAgIGxldCByZXMgPSBhd2FpdCBmZXRjaChhcGlVcmwpO1xuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICBjb25zdCByYXdVcmwgPSBlbmNvZGVVUkkoXG4gICAgICAgICAgYGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL21haW4vJHtnaXRodWJQYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgcmVzID0gYXdhaXQgZmV0Y2gocmF3VXJsKTtcbiAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgUmF3IGZldGNoIGZhaWxlZDogJHtyZXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgICAgIGlmIChmaWxlRXhpc3RzKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZSh2YXVsdFBhdGgsIGNvbnRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZSh2YXVsdFBhdGgsIGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZSh2YXVsdFBhdGgsIGNvbnRlbnQsIGdpdGh1YlBhdGgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEdpdEh1YiBBUEkgZXJyb3I6ICR7cmVzLnN0YXR1c1RleHR9YCk7XG4gICAgICBjb25zdCB7IGRvd25sb2FkX3VybCB9ID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIHsgZG93bmxvYWRfdXJsOiBzdHJpbmcgfTtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCAoYXdhaXQgZmV0Y2goZG93bmxvYWRfdXJsKSkudGV4dCgpO1xuICAgICAgaWYgKGZpbGVFeGlzdHMpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZSh2YXVsdFBhdGgsIGNvbnRlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHZhdWx0UGF0aCwgY29udGVudCk7XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUodmF1bHRQYXRoLCBjb250ZW50LCBnaXRodWJQYXRoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdTI3NEMgRmFpbGVkIHRvIHVwZGF0ZSAke3ZhdWx0UGF0aH1gLCBlKTtcbiAgICB9XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUFJFVklFVyArIFJFTU9URS1CQVNFTElORSArIERJRkYgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgcHJldmlld1VwZGF0ZXNNb2RhbCgpIHtcblx0Ly8gXHUyMDFDTG9hZGluZ1x1MjAyNlx1MjAxRCBwbGFjZWhvbGRlciB3aGlsZSBzeW5jaW5nXG5cdGNvbnN0IGxvYWRpbmcgPSBuZXcgKGNsYXNzIGV4dGVuZHMgTW9kYWwge1xuXHQgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0ICB9XG5cdCAgb25PcGVuKCkge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdFx0dGhpcy5jb250ZW50RWxcblx0XHQgIC5jcmVhdGVEaXYoe1xuXHRcdFx0dGV4dDogJ1x1RDgzRFx1REQwNCBDaGVja2luZyBmb3IgdXBkYXRlc1x1MjAyNicsXG5cdFx0XHRjbHM6ICdtb2Qtd2FybmluZycsXG5cdFx0ICB9KVxuXHRcdCAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXHQgIH1cblx0fSkodGhpcy5hcHApO1xuICBcblx0bG9hZGluZy5vcGVuKCk7XG5cdGF3YWl0IHRoaXMuc3luY01hbmlmZXN0KCk7XG5cdGF3YWl0IHRoaXMuZmV0Y2hSZW1vdGVCYXNlbGluZSgpO1xuXHQvLyBidWlsZFVwZGF0ZVByZXZpZXcoKSBub3cgcmV0dXJucyBvbmx5IFx1MjAxQ3JlYWxcdTIwMUQgZGlmZnMgKG5vIHN0YWxlIGRlbnlcdTIwMTBsaXN0KVxuXHRjb25zdCBkaWZmcyA9IGF3YWl0IHRoaXMuYnVpbGRVcGRhdGVQcmV2aWV3KCk7XG5cdGxvYWRpbmcuY2xvc2UoKTtcbiAgXG5cdC8vIFNwbGl0IG91dCBkZW55XHUyMDEwbGlzdGVkIGxpbmVzIHZzLiBldmVyeXRoaW5nIGVsc2Vcblx0Y29uc3QgZGVueUxpc3RlZExpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXHRjb25zdCBub3JtYWxMaW5lczogc3RyaW5nW10gPSBbXTtcbiAgXG5cdGZvciAoY29uc3QgZCBvZiBkaWZmcykge1xuXHQgIGlmIChkLnN0YXJ0c1dpdGgoJ1x1Mjc0QyBkZW55XHUyMDEwbGlzdGVkJykpIHtcblx0XHRkZW55TGlzdGVkTGluZXMucHVzaChkKTtcblx0ICB9IGVsc2Uge1xuXHRcdG5vcm1hbExpbmVzLnB1c2goZCk7XG5cdCAgfVxuXHR9XG4gIFxuXHQvLyBOb3cgY3JlYXRlIHRoZSBtb2RhbFxuXHRjb25zdCBtb2RhbCA9IG5ldyAoY2xhc3MgZXh0ZW5kcyBNb2RhbCB7XG5cdCAgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW47XG5cdCAgbm9ybWFsOiBzdHJpbmdbXTtcblx0ICBkZW5pZWQ6IHN0cmluZ1tdO1xuICBcblx0ICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbm9ybWFsOiBzdHJpbmdbXSwgZGVuaWVkOiBzdHJpbmdbXSkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5ub3JtYWwgPSBub3JtYWw7XG5cdFx0dGhpcy5kZW5pZWQgPSBkZW5pZWQ7XG5cdCAgfVxuICBcblx0ICBvbk9wZW4oKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLnRpdGxlRWwuc2V0VGV4dCgnVXBkYXRlIFByZXZpZXcnKTtcbiAgXG5cdFx0Ly8gSW50cm8gcGFyYWdyYXBoXG5cdFx0dGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XG5cdFx0ICB0ZXh0OiAnT25seSBmaWxlcyB3aG9zZSBjb250ZW50cyBkaWZmZXIgZnJvbSBHaXRIdWIgd2lsbCBiZSB1cGRhdGVkOicsXG5cdFx0fSk7XG4gIFxuXHRcdC8vIDEpIElmIHRoZXJlIGFyZSBhbnkgXHUyMDFDbm9ybWFsXHUyMDFEIGRpZmZzLCByZW5kZXIgdGhlbSBpbiBhIGJ1bGxldCBsaXN0XG5cdFx0aWYgKHRoaXMubm9ybWFsLmxlbmd0aCkge1xuXHRcdCAgY29uc3QgdWwgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgndWwnKTtcblx0XHQgIHRoaXMubm9ybWFsLmZvckVhY2goKGxpbmUpID0+IHtcblx0XHRcdGNvbnN0IGxpID0gdWwuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiBsaW5lIH0pO1xuXHRcdFx0Ly8gTm8gc3BlY2lhbCBzdHlsaW5nIGZvciB0aGVzZTsgdGhleSBzaG93IHVwIG5vcm1hbGx5LlxuXHRcdCAgfSk7XG5cdFx0fSBlbHNlIHtcblx0XHQgIC8vIElmIG5vIG5vcm1hbCBkaWZmcywgc2F5IFx1MjAxQ1VwIHRvIGRhdGVcdTIwMURcblx0XHQgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHR0ZXh0OiAnXHUyNzA1IEV2ZXJ5dGhpbmcgaXMgYWxyZWFkeSB1cCB0byBkYXRlIScsXG5cdFx0XHRjbHM6ICdtb2QtaW5mbycsXG5cdFx0ICB9KTtcblx0XHR9XG4gIFxuXHRcdC8vIDIpIElmIHRoZXJlIGFyZSBhbnkgZGVueVx1MjAxMGxpc3RlZCBsaW5lcywgdHVjayB0aGVtIGludG8gYSA8ZGV0YWlscz4gYmxvY2tcblx0XHRpZiAodGhpcy5kZW5pZWQubGVuZ3RoKSB7XG5cdFx0ICBjb25zdCBkZW55RGV0YWlscyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblx0XHQgIC8vIEFsd2F5cyBzdGFydCBjb2xsYXBzZWQgYnkgZGVmYXVsdFxuXHRcdCAgZGVueURldGFpbHMub3BlbiA9IGZhbHNlO1xuICBcblx0XHQgIC8vIFN1bW1hcnkgbGluZTogc2hvd3MgXHUyMDFDRGVueVx1MjAxMExpc3QgRmlsZXMgKG4pXHUyMDFEXG5cdFx0ICBjb25zdCBzdW1tYXJ5ID0gZGVueURldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcblx0XHQgIE9iamVjdC5hc3NpZ24oc3VtbWFyeS5zdHlsZSwge1xuXHRcdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRjb2xvcjogJ3ZhcigtLXRleHQtZmFpbnQpJyxcblx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxuXHRcdFx0Z2FwOiAnMC41ZW0nLFxuXHRcdCAgfSk7XG5cdFx0ICBzdW1tYXJ5LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgRGVueVx1MjAxMExpc3QgRmlsZXMgKCR7dGhpcy5kZW5pZWQubGVuZ3RofSlgIH0pO1xuICBcblx0XHQgIC8vIFJpZ2h0XHUyMDEwc2lkZSBpY29uIHJvdGF0aW5nIG9uIGV4cGFuZC9jb2xsYXBzZVxuXHRcdCAgY29uc3QgdG9nZ2xlSWNvbiA9IHN1bW1hcnkuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdWVicsIGNsczogJ3ZrLXRvZ2dsZS1pY29uJyB9KTtcblx0XHQgIE9iamVjdC5hc3NpZ24odG9nZ2xlSWNvbi5zdHlsZSwge1xuXHRcdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdFx0ZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0XHR0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMnMgZWFzZScsXG5cdFx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJyxcblx0XHRcdHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XHRcdHRyYW5zZm9ybTogJ3JvdGF0ZSgxODBkZWcpJyxcblx0XHQgIH0pO1xuXHRcdCAgZGVueURldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG5cdFx0XHR0b2dnbGVJY29uLnN0eWxlLnRyYW5zZm9ybSA9IGRlbnlEZXRhaWxzLm9wZW4gPyAncm90YXRlKDBkZWcpJyA6ICdyb3RhdGUoMTgwZGVnKSc7XG5cdFx0ICB9O1xuICBcblx0XHQgIC8vIEJvZHkgb2YgdGhlIGRldGFpbHM6IGEgc2ltcGxlIDx1bD4gY29udGFpbmluZyBvbmx5IGRlbnlcdTIwMTBsaXN0ZWQgbGluZXNcblx0XHQgIGNvbnN0IGRlbnlCb2R5ID0gZGVueURldGFpbHMuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblx0XHQgIGRlbnlCb2R5LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzFlbSc7XG5cdFx0ICBjb25zdCBkZW55VWwgPSBkZW55Qm9keS5jcmVhdGVFbCgndWwnKTtcblx0XHQgIHRoaXMuZGVuaWVkLmZvckVhY2goKGxpbmUpID0+IHtcblx0XHRcdGNvbnN0IGxpID0gZGVueVVsLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogbGluZSB9KTtcblx0XHRcdGxpLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtZmFpbnQpJztcblx0XHRcdGxpLnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnO1xuXHRcdCAgfSk7XG5cdFx0fVxuICBcblx0XHRjb25zdCBidXR0b25Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG5cdFx0T2JqZWN0LmFzc2lnbihidXR0b25Sb3cuc3R5bGUsIHtcblx0XHQgIGRpc3BsYXk6ICdmbGV4Jyxcblx0XHQgIGp1c3RpZnlDb250ZW50OiAnZmxleC1lbmQnLFxuXHRcdCAgbWFyZ2luVG9wOiAnMS4yNWVtJywgICAgICAgLy8gdHdlYWsgc3BhY2luZyBhcyB5b3UgbGlrZVxuXHRcdH0pO1xuXHRcdFxuXHRcdC8vIFx1MjAxQ0NvbmZpcm0gJiBVcGRhdGVcdTIwMUQgYnV0dG9uXG5cdFx0Y29uc3QgY29uZmlybUJ0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdCAgdGV4dDogJ0NvbmZpcm0gJiBVcGRhdGUnLFxuXHRcdCAgY2xzOiAnbW9kLWN0YScsXG5cdFx0fSk7XG5cdFx0Y29uZmlybUJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdCAgYXdhaXQgKHRoaXMgYXMgYW55KS5wbHVnaW4udXBkYXRlU2VsZWN0ZWRUb29sa2l0Q29udGVudCgpO1xuXHRcdCAgdGhpcy5jbG9zZSgpO1xuXHRcdH07XG5cdFx0XG5cdFx0Ly8gXHUyMDFDQ2FuY2VsXHUyMDFEIGJ1dHRvblxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcblx0XHRjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IHRoaXMuY2xvc2UoKTtcblx0ICB9XG4gIFxuXHQgIG9uQ2xvc2UoKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0ICB9XG5cdH0pKHRoaXMuYXBwLCBub3JtYWxMaW5lcywgZGVueUxpc3RlZExpbmVzKTtcbiAgXG5cdC8vIEF0dGFjaCBwbHVnaW4gcG9pbnRlciBhbmQgb3BlblxuXHQobW9kYWwgYXMgYW55KS5wbHVnaW4gPSB0aGlzO1xuXHRtb2RhbC5vcGVuKCk7XG4gIH1cbiAgXG5cbiAgYXN5bmMgYnVpbGRVcGRhdGVQcmV2aWV3KCk6IFByb21pc2U8c3RyaW5nW10+IHtcblx0Y29uc3QgY2hhbmdlczogc3RyaW5nW10gPSBbXTtcbiAgXG5cdC8vIDApIENvbGxlY3QgYWxsIGJsYWNrbGlzdGVkIGZvbGRlcnMgKG1hbmlmZXN0S2V5IHZhbHVlcyB3aGVyZSBkb1VwZGF0ZSA9PT0gZmFsc2UpXG5cdGNvbnN0IGRlbnlMaXN0ZWRGb2xkZXJzID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRoc1xuXHQgIC5maWx0ZXIoKGMpID0+IGMuZG9VcGRhdGUgPT09IGZhbHNlKVxuXHQgIC5tYXAoKGMpID0+IGMubWFuaWZlc3RLZXkpO1xuICBcblx0Ly8gMSkgRGVueVx1MjAxMGxpc3RlZCBlbnRyaWVzXHUyMDE0YnV0IG9ubHkgaWYgdGhleVx1MjAxOWQgYWN0dWFsbHkgYmUgXHUyMDFDbmV3XHUyMDFEIChtaXNzaW5nKSBvciBcdTIwMUNvdXRcdTIwMTBvZlx1MjAxMGRhdGVcdTIwMURcblx0Zm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0ICBpZiAoZi5vcHRpb25hbCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cbiAgXG5cdCAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBmLnBhdGgpO1xuXHQgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuXHRcdGYucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcblx0ICApO1xuXHQgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuXHRcdC8vIFJlc29sdmUgdGhlIHZhdWx0IHBhdGggKGhhbmRsZXMgcmVtYXBwaW5nIGlmIHByZXNlbnQpXG5cdFx0Y29uc3QgdnAgPSBjdXN0b20/LnZhdWx0UGF0aCA/PyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZi5wYXRoKTtcbiAgXG5cdFx0Ly8gQ2hlY2sgaWYgZmlsZSBleGlzdHMgbG9jYWxseSBhbmQgaWYgaXRcdTIwMTlzIHVwXHUyMDEwdG9cdTIwMTBkYXRlXG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHModnApO1xuXHRcdGNvbnN0IHVwVG9EYXRlID0gZXhpc3RzICYmIChhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIuaXNVcFRvRGF0ZSh2cCkpO1xuICBcblx0XHQvLyBPbmx5IHNob3cgYSBkZW55XHUyMDEwbGlzdGVkIGVudHJ5IGlmIGl0IHdvdWxkIG90aGVyd2lzZSBiZSBjcmVhdGVkIG9yIG92ZXJ3cml0dGVuXG5cdFx0aWYgKCFleGlzdHMgfHwgIXVwVG9EYXRlKSB7XG5cdFx0ICBjaGFuZ2VzLnB1c2goYFx1Mjc0QyBkZW55XHUyMDEwbGlzdGVkIFx1MjAxMyB3aWxsIG5vdCB1cGRhdGU6ICR7dnB9YCk7XG5cdFx0fVxuXHQgIH1cblx0fVxuICBcblx0Ly8gMikgRlVMTFx1MjAxMFNZTkMgbW9kZSAoc2tpcCBhbnkgZmlsZS9mb2xkZXIgdGhhdFx1MjAxOXMgYmxhY2tsaXN0ZWQpXG5cdGlmICghdGhpcy5zZXR0aW5ncy5jdXN0b21pemVVcGRhdGVzKSB7XG5cdCAgZm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHRcdC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0XHRpZiAoZi5vcHRpb25hbCkge1xuXHRcdCAgY29udGludWU7XG5cdFx0fVxuICBcblx0XHRjb25zdCBjdXN0b20gPSB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbmQoKGMpID0+IGMubWFuaWZlc3RLZXkgPT09IGYucGF0aCk7XG5cdFx0Y29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0ICBmLnBhdGguc3RhcnRzV2l0aChmb2xkZXIgKyAnLycpXG5cdFx0KTtcblx0XHRpZiAoY3VzdG9tPy5kb1VwZGF0ZSA9PT0gZmFsc2UgfHwgaXNJbkRlbnlGb2xkZXIpIHtcblx0XHQgIGNvbnRpbnVlO1xuXHRcdH1cbiAgXG5cdFx0Y29uc3QgdnAgPSB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZi5wYXRoKTtcblx0XHRsZXQgdGFnID0gJyc7XG5cdFx0aWYgKHZwICE9PSBmLnBhdGgpIHRhZyA9ICcgKHJlbWFwcGVkKSc7XG4gIFxuXHRcdGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZwKTtcblx0XHRjb25zdCB1cFRvRGF0ZSA9IGV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodnApKTtcbiAgXG5cdFx0aWYgKCFleGlzdHMpIHtcblx0XHQgIGNoYW5nZXMucHVzaChgXHVEODNEXHVEQ0M0IE5ldyBmaWxlOiAke3ZwfSR7dGFnfWApO1xuXHRcdH0gZWxzZSBpZiAoIXVwVG9EYXRlKSB7XG5cdFx0ICBjaGFuZ2VzLnB1c2goYFx1RDgzRFx1REQwMSBXaWxsIHVwZGF0ZTogJHt2cH0ke3RhZ31gKTtcblx0XHR9XG5cdCAgfVxuICBcblx0ICBmb3IgKGNvbnN0IGZsZCBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuXHRcdC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZvbGRlclxuXHRcdGlmIChmbGQub3B0aW9uYWwpIHtcblx0XHQgIGNvbnRpbnVlO1xuXHRcdH1cbiAgXG5cdFx0Y29uc3QgaXNEZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuaW5jbHVkZXMoZmxkLnBhdGgpO1xuXHRcdGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZsZC5wYXRoKTtcblx0XHRpZiAoIWV4aXN0cyAmJiAhaXNEZW55Rm9sZGVyKSB7XG5cdFx0ICBjaGFuZ2VzLnB1c2goYFx1RDgzRFx1RENDMSBOZXcgZm9sZGVyOiAke2ZsZC5wYXRofWApO1xuXHRcdH1cblx0ICB9XG4gIFxuXHQgIHJldHVybiBjaGFuZ2VzLmxlbmd0aCA/IGNoYW5nZXMgOiBbJ1x1MjcwNSBFdmVyeXRoaW5nIGlzIGFscmVhZHkgdXAgdG8gZGF0ZSEnXTtcblx0fVxuICBcblx0Ly8gMykgQ1VTVE9NXHUyMDEwU1lOQyBtb2RlIChza2lwIGFueSBmaWxlL2ZvbGRlciB0aGF0XHUyMDE5cyBibGFja2xpc3RlZClcblx0Zm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0ICBpZiAoZi5vcHRpb25hbCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cbiAgXG5cdCAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBmLnBhdGgpO1xuXHQgIGNvbnN0IGlzSW5EZW55Rm9sZGVyID0gZGVueUxpc3RlZEZvbGRlcnMuc29tZSgoZm9sZGVyKSA9PlxuXHRcdGYucGF0aC5zdGFydHNXaXRoKGZvbGRlciArICcvJylcblx0ICApO1xuXHQgIGlmIChjdXN0b20/LmRvVXBkYXRlID09PSBmYWxzZSB8fCBpc0luRGVueUZvbGRlcikge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cbiAgXG5cdCAgY29uc3QgdnAgPSBjdXN0b20/LnZhdWx0UGF0aCA/PyB0aGlzLnJlc29sdmVWYXVsdFBhdGgoZi5wYXRoKTtcblx0ICBsZXQgdGFnID0gJyc7XG5cdCAgaWYgKHZwICE9PSBmLnBhdGgpIHRhZyA9ICcgKHJlbWFwcGVkKSc7XG4gIFxuXHQgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZwKTtcblx0ICBjb25zdCB1cFRvRGF0ZSA9IGV4aXN0cyAmJiAoYXdhaXQgdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmlzVXBUb0RhdGUodnApKTtcbiAgXG5cdCAgaWYgKCFleGlzdHMpIHtcblx0XHRjaGFuZ2VzLnB1c2goYFx1RDgzRFx1RENDNCBOZXcgZmlsZTogJHt2cH0ke3RhZ31gKTtcblx0ICB9IGVsc2UgaWYgKCF1cFRvRGF0ZSkge1xuXHRcdGNoYW5nZXMucHVzaChgXHVEODNEXHVERDAxIFdpbGwgdXBkYXRlOiAke3ZwfSR7dGFnfWApO1xuXHQgIH1cblx0fVxuICBcblx0Zm9yIChjb25zdCBmbGQgb2YgdGhpcy5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcblx0ICAvLyBcdTI1MDBcdTI1MDAgU0tJUCBhbnkgb3B0aW9uYWw6dHJ1ZSBmb2xkZXJcblx0ICBpZiAoZmxkLm9wdGlvbmFsKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuICBcblx0ICBjb25zdCBpc0RlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5pbmNsdWRlcyhmbGQucGF0aCk7XG5cdCAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmxkLnBhdGgpO1xuXHQgIGlmICghZXhpc3RzICYmICFpc0RlbnlGb2xkZXIpIHtcblx0XHRjaGFuZ2VzLnB1c2goYFx1RDgzRFx1RENDMSBOZXcgZm9sZGVyOiAke2ZsZC5wYXRofWApO1xuXHQgIH1cblx0fVxuICBcblx0Ly8gM2MpIFx1MjAxQ01vdmVkXHUyMDFEIGRldGVjdGlvbiAoc2tpcCBibGFja2xpc3RlZClcblx0Zm9yIChjb25zdCBmIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcykge1xuXHQgIC8vIFx1MjUwMFx1MjUwMCBTS0lQIGFueSBvcHRpb25hbDp0cnVlIGZpbGVcblx0ICBpZiAoZi5vcHRpb25hbCkge1xuXHRcdGNvbnRpbnVlO1xuXHQgIH1cbiAgXG5cdCAgY29uc3QgbWFuaWZlc3RLZXkgPSBmLmtleTtcblx0ICBjb25zdCBtYW5pZmVzdFBhdGggPSBmLnBhdGg7XG5cdCAgY29uc3QgY3VzdG9tID0gdGhpcy5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBtYW5pZmVzdEtleSk7XG5cdCAgY29uc3QgcHJldlBhdGggPSB0aGlzLm9sZFBhdGhzQnlHaXRodWJbbWFuaWZlc3RQYXRoXTtcbiAgXG5cdCAgY29uc3QgaXNJbkRlbnlGb2xkZXIgPSBkZW55TGlzdGVkRm9sZGVycy5zb21lKChmb2xkZXIpID0+XG5cdFx0bWFuaWZlc3RQYXRoLnN0YXJ0c1dpdGgoZm9sZGVyICsgJy8nKVxuXHQgICk7XG5cdCAgaWYgKGN1c3RvbT8uZG9VcGRhdGUgPT09IGZhbHNlIHx8IGlzSW5EZW55Rm9sZGVyKSB7XG5cdFx0Y29udGludWU7XG5cdCAgfVxuXHQgIGlmIChjdXN0b20gJiYgY3VzdG9tLnZhdWx0UGF0aCAmJiBjdXN0b20udmF1bHRQYXRoICE9PSBtYW5pZmVzdFBhdGgpIHtcblx0XHRjb250aW51ZTtcblx0ICB9XG5cdCAgaWYgKFxuXHRcdHByZXZQYXRoICYmXG5cdFx0cHJldlBhdGggIT09IG1hbmlmZXN0UGF0aCAmJlxuXHRcdCghY3VzdG9tIHx8IGN1c3RvbS52YXVsdFBhdGggPT09IG1hbmlmZXN0UGF0aClcblx0ICApIHtcblx0XHRjaGFuZ2VzLnB1c2goYFx1MjdBMVx1RkUwRiBNb3ZlZDogJHtwcmV2UGF0aH0gXHUyMTkyICR7bWFuaWZlc3RQYXRofWApO1xuXHQgIH1cblx0fVxuICBcblx0cmV0dXJuIGNoYW5nZXMubGVuZ3RoID8gY2hhbmdlcyA6IFsnXHUyNzA1IEV2ZXJ5dGhpbmcgaXMgYWxyZWFkeSB1cCB0byBkYXRlISddO1xuICB9XG4gIFxuICBcbiAgXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBWRVJTSU9OLUNIRUNLIC8gVVBEQVRFIEZMT1cgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbiAgYXN5bmMgY2hlY2tGb3JVcGRhdGVzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGlzTmV3ZXJWZXJzaW9uID0gKHJlbW90ZTogc3RyaW5nLCBsb2NhbDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgICBjb25zdCBwYSA9IHJlbW90ZVxuICAgICAgICAucmVwbGFjZSgvXnYvLCAnJylcbiAgICAgICAgLnNwbGl0KCcuJylcbiAgICAgICAgLm1hcCgobikgPT4gcGFyc2VJbnQobiwgMTApIHx8IDApO1xuICAgICAgY29uc3QgcGIgPSBsb2NhbFxuICAgICAgICAucmVwbGFjZSgvXnYvLCAnJylcbiAgICAgICAgLnNwbGl0KCcuJylcbiAgICAgICAgLm1hcCgobikgPT4gcGFyc2VJbnQobiwgMTApIHx8IDApO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1heChwYS5sZW5ndGgsIHBiLmxlbmd0aCk7IGkrKykge1xuICAgICAgICBpZiAoKHBhW2ldIHx8IDApID4gKHBiW2ldIHx8IDApKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKChwYVtpXSB8fCAwKSA8IChwYltpXSB8fCAwKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBjb25zdCB0b29sa2l0UGF0aCA9ICcudmVyc2lvbi5qc29uJztcbiAgICBjb25zdCB0b29sa2l0VXJsID1cbiAgICAgICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL3Z2dW5kZXJsb3JlLXRvb2xraXQtZnVsbC9tYWluLy52ZXJzaW9uLmpzb24nO1xuICAgIGNvbnN0IHBsdWdpblVybCA9XG4gICAgICAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NsYW13aXNlMDAwMS92dnVuZGVybG9yZS10b29sa2l0LXBsdWdpbi9tYWluL3ZlcnNpb24uanNvbic7XG4gICAgY29uc3QgY2hhbmdlbG9nVXJsID1cbiAgICAgICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluL1JFQURNRS5tZCc7XG5cbiAgICAvLyAxKSBSZWFkIGxvY2FsIHRvb2xraXQgdmVyc2lvblxuICAgIGxldCBsb2NhbFRLID0gJzAuMC4wJztcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCh0b29sa2l0UGF0aCk7XG4gICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICAgIGxvY2FsVEsgPSBqc29uLnZlcnNpb24gfHwgbG9jYWxUSztcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gcmVhZCBsb2NhbCB0b29sa2l0IHZlcnNpb246JywgZXJyKTtcbiAgICB9XG5cbiAgICAvLyAyKSBGZXRjaCByZW1vdGUgdG9vbGtpdCB2ZXJzaW9uICYgZGVmYXVsdHNcbiAgICBsZXQgcmVtb3RlVEsgPSAnMC4wLjAnO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh0b29sa2l0VXJsKTtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgcmVtb3RlVEsgPSBkYXRhLnZlcnNpb24gfHwgcmVtb3RlVEs7XG5cbiAgICAgIHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPSByZW1vdGVUSztcbiAgICAgIGlmIChkYXRhLmRlZmF1bHRQYXRocykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLmxhdGVzdERlZmF1bHRzID0gZGF0YS5kZWZhdWx0UGF0aHM7XG4gICAgICB9XG4gICAgICB0aGlzLnNldHRpbmdzLmxhc3RDaGVja2VkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gZmV0Y2ggcmVtb3RlIHRvb2xraXQgdmVyc2lvbjonLCBlcnIpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKHsgbG9jYWxUSywgcmVtb3RlVEsgfSk7XG4gICAgaWYgKGlzTmV3ZXJWZXJzaW9uKHJlbW90ZVRLLCBsb2NhbFRLKSkge1xuICAgICAgbmV3IE5vdGljZShgXHUyNkEwXHVGRTBGIFRvb2xraXQgdXBkYXRlIGF2YWlsYWJsZSEgSW5zdGFsbGVkOiB2JHtsb2NhbFRLfSwgTGF0ZXN0OiB2JHtyZW1vdGVUS31gKTtcbiAgICAgIGF3YWl0IHRoaXMuZmV0Y2hSZW1vdGVCYXNlbGluZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXcgTm90aWNlKGBcdTI3MDUgVG9vbGtpdCBpcyB1cCB0byBkYXRlICh2JHtsb2NhbFRLfSlgKTtcbiAgICB9XG5cbiAgICAvLyA0KSBSZWFkIGxvY2FsIHBsdWdpbiB2ZXJzaW9uXG4gICAgY29uc3QgbG9jYWxQTCA9IHRoaXMubWFuaWZlc3QudmVyc2lvbjtcblxuICAgIC8vIDUpIEZldGNoIHJlbW90ZSBwbHVnaW4gdmVyc2lvbiAmIGNvbXBhcmVcbiAgICBsZXQgcmVtb3RlUEwgPSBsb2NhbFBMO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChwbHVnaW5VcmwpO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICByZW1vdGVQTCA9IGRhdGEudmVyc2lvbiB8fCByZW1vdGVQTDtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gZmV0Y2ggcmVtb3RlIHBsdWdpbiB2ZXJzaW9uOicsIGVycik7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coeyBsb2NhbFBMLCByZW1vdGVQTCB9KTtcbiAgICBpZiAoaXNOZXdlclZlcnNpb24ocmVtb3RlUEwsIGxvY2FsUEwpKSB7XG4gICAgICBuZXcgTm90aWNlKGBcdTI2OTlcdUZFMEYgUGx1Z2luIHVwZGF0ZSBhdmFpbGFibGUhIEluc3RhbGxlZDogdiR7bG9jYWxQTH0sIExhdGVzdDogdiR7cmVtb3RlUEx9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ldyBOb3RpY2UoYFx1MjcwNSBQbHVnaW4gaXMgdXAgdG8gZGF0ZSAodiR7bG9jYWxQTH0pYCk7XG4gICAgfVxuXG4gICAgLy8gNikgRmV0Y2ggY2hhbmdlbG9nIGZvciBVSSBkaXNwbGF5XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNoYW5nZWxvZ1JlcyA9IGF3YWl0IGZldGNoKGNoYW5nZWxvZ1VybCk7XG4gICAgICB0aGlzLmNoYW5nZWxvZyA9IGF3YWl0IGNoYW5nZWxvZ1Jlcy50ZXh0KCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgRmFpbGVkIHRvIGZldGNoIGNoYW5nZWxvZzonLCBlcnIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0Y29uc3QgbG9hZGVkID0gKGF3YWl0IHRoaXMubG9hZERhdGEoKSkgYXMgUGFydGlhbDxUb29sa2l0U2V0dGluZ3M+O1xuXHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgbG9hZGVkKTtcbiAgXG5cdC8vIEJhY2tmaWxsIG91ciBuZXcgZmllbGRzIGlmIHRoZSBzdG9yZWQgZGF0YSB3YXMgbWlzc2luZyB0aGVtXG5cdGlmICh0eXBlb2YgdGhpcy5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSAhPT0gXCJzdHJpbmdcIikge1xuXHQgIHRoaXMuc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0gPSBcIlwiO1xuXHR9XG5cdGlmICghQXJyYXkuaXNBcnJheSh0aGlzLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UpKSB7XG5cdCAgdGhpcy5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlID0gW107XG5cdH1cbiAgXG5cdHRoaXMuZmlsZUNhY2hlTWFuYWdlciA9IG5ldyBUb29sa2l0RmlsZUNhY2hlTWFuYWdlcihcblx0ICB0aGlzLmFwcC52YXVsdCxcblx0ICBsb2FkZWQ/LmZpbGVDYWNoZSA/PyB7fSxcblx0ICBhc3luYyAoKSA9PiBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpXG5cdCk7XG5cblx0Ly8gR2l2ZSB2YXVsdCBhIG1vbWVudCB0byBzZXR0bGUsIHRoZW4gY2hlY2sgZm9yIG1hcmtlclxuXHRzZXRUaW1lb3V0KCgpID0+IHRoaXMuY2hlY2tNYXJrZXJGaWxlKCksIDUwMCk7XG4gIH0gXG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEoe1xuICAgICAgLi4udGhpcy5zZXR0aW5ncyxcbiAgICAgIGZpbGVDYWNoZTogdGhpcy5maWxlQ2FjaGVNYW5hZ2VyLmdldENhY2hlKCksXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBnZXRMb2NhbFRvb2xraXRWZXJzaW9uKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCcudmVyc2lvbi5qc29uJyk7XG4gICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICAgIHJldHVybiBqc29uLnZlcnNpb24gfHwgbnVsbDtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBGYWlsZWQgdG8gcmVhZCAudmVyc2lvbi5qc29uOicsIGVycik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVGdWxsVG9vbGtpdFJlcG8oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZXhjbHVkZWQgPSBbXG4gICAgICAnLm9ic2lkaWFuJyxcbiAgICAgICcuZ2l0aWdub3JlJyxcbiAgICAgICcuZ2l0YXR0cmlidXRlcycsXG4gICAgICAnLkRTX1N0b3JlJyxcbiAgICAgICdwbHVnaW5zJyxcbiAgICAgICdDb21wZW5kaXVtJyxcbiAgICAgICdSRUFETUUubWQnLFxuICAgICAgJy52ZXJzaW9uLmpzb24nLFxuICAgICAgJy5naXRodWInXG4gICAgXTtcblxuICAgIGNvbnN0IGZldGNoUmVwb1Jvb3QgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhcGlVcmwgPVxuICAgICAgICAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL2NvbnRlbnRzLyc7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaVVybCk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCByZXBvIHJvb3RgKTtcbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50cyA9IGF3YWl0IGZldGNoUmVwb1Jvb3QoKTtcbiAgICAgIC8vIGZpbHRlciBvdXQgZXhjbHVkZWQgdG9wLWxldmVsIGl0ZW1zXG4gICAgICBjb25zdCBmaWx0ZXJlZCA9IGNvbnRlbnRzLmZpbHRlcihcbiAgICAgICAgKGl0ZW06IGFueSkgPT5cbiAgICAgICAgICAhZXhjbHVkZWQuc29tZShcbiAgICAgICAgICAgIChleCkgPT5cbiAgICAgICAgICAgICAgaXRlbS5wYXRoID09PSBleCB8fFxuICAgICAgICAgICAgICBpdGVtLnBhdGguc3RhcnRzV2l0aChgJHtleH0vYClcbiAgICAgICAgICApXG4gICAgICApO1xuXG4gICAgICAvLyBTb3J0IHNvIFx1MjAxQ3RyZWVcdTIwMUQgKGZvbGRlcnMpIGNvbWUgYmVmb3JlIFx1MjAxQ2Jsb2JcdTIwMUQgKGZpbGVzKVxuICAgICAgZmlsdGVyZWQuc29ydCgoYTogYW55LCBiOiBhbnkpID0+IChhLnR5cGUgPT09IGIudHlwZSA/IDAgOiBhLnR5cGUgPT09ICd0cmVlJyA/IC0xIDogMSkpO1xuXG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZmlsdGVyZWQpIHtcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2RpcicpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUZvbGRlckZyb21HaXRIdWIoaXRlbS5wYXRoLCBpdGVtLnBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmaWxlJykge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goaXRlbS5kb3dubG9hZF91cmwpO1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBpdGVtLnBhdGg7XG4gICAgICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmlsZVBhdGgpO1xuICAgICAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50ICE9PSBjb250ZW50KSB7XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBhd2FpdCB0aGlzLmZpbGVDYWNoZU1hbmFnZXIudXBkYXRlQ2FjaGUoZmlsZVBhdGgsIGNvbnRlbnQsIGl0ZW0ucGF0aCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgIGNvbnN0IG1hcmtlclBhdGggPSAnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCc7XG4gICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhtYXJrZXJQYXRoKSkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG1hcmtlclBhdGgsICcnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXR0aW5ncy5uZWVkc0luc3RhbGwgPSBmYWxzZTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICBpZiAodGhpcy5zZXR0aW5nc1RhYikge1xuICAgICAgICB0aGlzLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCkge1xuICAgICAgICB0aGlzLmVuYWJsZUhpZ2hsaWdodCgpO1xuICAgICAgfVxuXG4gICAgICBuZXcgTm90aWNlKCdcdTI3MDUgVlZ1bmRlcmxvcmUgVG9vbGtpdCBzdWNjZXNzZnVsbHkgaW5zdGFsbGVkIScpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIHVwZGF0ZUZ1bGxUb29sa2l0UmVwbygpIGVycm9yOicsIGVycik7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgRmFpbGVkIHRvIGluc3RhbGwgdG9vbGtpdC4gU2VlIGNvbnNvbGUgZm9yIGRldGFpbHMuJyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlU2VsZWN0ZWRUb29sa2l0Q29udGVudCgpIHtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5hdXRvQmFja3VwQmVmb3JlVXBkYXRlKSB7XG4gICAgICBjb25zdCBmb2xkZXIgPSBhd2FpdCB0aGlzLmJhY2t1cE1hbmFnZXIuYmFja3VwVmF1bHRNaXJyb3IoJ3ByZS11cGRhdGUnKTtcbiAgICAgIG5ldyBOb3RpY2UoYFZhdWx0IG1pcnJvciBiYWNrdXAgY3JlYXRlZCBhdDogJHtmb2xkZXJ9YCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmxhdGVzdERlZmF1bHRzKSB7XG4gICAgICBuZXcgTm90aWNlKCdcdTI3NEMgR2l0SHViIGRlZmF1bHRzIG5vdCBsb2FkZWQgeWV0LicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGFsbE1hbmlmZXN0RmlsZXMgPSB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMubWFwKChmKSA9PiBmLnBhdGgpO1xuICAgIGNvbnN0IGZpbGVPdmVycmlkZXMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICB0aGlzLnNldHRpbmdzLmN1c3RvbVBhdGhzLm1hcCgoYykgPT4gW2MubWFuaWZlc3RLZXksIGNdKVxuICAgICk7XG5cbiAgICB0cnkge1xuICAgICAgZm9yIChjb25zdCBnaFBhdGggb2YgYWxsTWFuaWZlc3RGaWxlcykge1xuICAgICAgICBjb25zdCBvdmVycmlkZSA9IGZpbGVPdmVycmlkZXNbZ2hQYXRoXTtcbiAgICAgICAgaWYgKG92ZXJyaWRlPy5kb1VwZGF0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgXHUyM0VEXHVGRTBGIFNraXBwaW5nIGRlbnktbGlzdGVkOiAke2doUGF0aH1gKTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHZhdWx0UGF0aCA9IHRoaXMuc2V0dGluZ3MuY3VzdG9taXplVXBkYXRlc1xuICAgICAgICAgID8gdGhpcy5yZXNvbHZlVmF1bHRQYXRoKGdoUGF0aClcbiAgICAgICAgICA6IGdoUGF0aDtcblxuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMubWFuaWZlc3RDYWNoZS5maWxlcy5maW5kKChmKSA9PiBmLnBhdGggPT09IGdoUGF0aCk7XG4gICAgICAgIGlmICghZW50cnkpIGNvbnRpbnVlO1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUVudHJ5RnJvbU1hbmlmZXN0KGVudHJ5LCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgZm9sZGVyIG9mIHRoaXMubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZvbGRlci5wYXRoKSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyLnBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlVmVyc2lvbkZpbGUoKTtcbiAgICAgIHRoaXMuc2V0dGluZ3MuaW5zdGFsbGVkVmVyc2lvbiA9IHRoaXMuc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24hO1xuICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBUb29sa2l0IGNvbnRlbnQgdXBkYXRlZC4nKTtcblxuICAgICAgaWYgKHRoaXMuc2V0dGluZ3NUYWIpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXR0aW5nc1RhYi51cGRhdGVWZXJzaW9uRGlzcGxheSgpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignXHUyNzRDIFVwZGF0ZSBmYWlsZWQuIFZlcnNpb24gbm90IHVwZGF0ZWQuJywgZXJyKTtcbiAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBVcGRhdGUgZmFpbGVkLiBTZWUgY29uc29sZSBmb3IgZGV0YWlscy4gVmVyc2lvbiBmaWxlIE5PVCBjaGFuZ2VkLicpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQpIHtcbiAgICAgIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlRm9sZGVyRnJvbUdpdEh1YihnaXRodWJGb2xkZXJQYXRoOiBzdHJpbmcsIHZhdWx0Rm9sZGVyUGF0aDogc3RyaW5nKSB7XG4gICAgY29uc3QgZXhjbHVkZWQgPSBbXG4gICAgICAnLm9ic2lkaWFuJyxcbiAgICAgICcuZ2l0aWdub3JlJyxcbiAgICAgICcuZ2l0YXR0cmlidXRlcycsXG4gICAgICAnLkRTX1N0b3JlJyxcbiAgICAgICdwbHVnaW5zJyxcbiAgICAgICdDb21wZW5kaXVtJyxcbiAgICAgICdSRUFETUUubWQnLFxuICAgICAgJy52ZXJzaW9uLmpzb24nLFxuICAgICAgJy5naXRodWInXG4gICAgXTtcbiAgICBpZiAoZXhjbHVkZWQuc29tZSgoZXgpID0+IGdpdGh1YkZvbGRlclBhdGggPT09IGV4IHx8IGdpdGh1YkZvbGRlclBhdGguc3RhcnRzV2l0aChgJHtleH0vYCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGFwaVVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwvY29udGVudHMvJHtnaXRodWJGb2xkZXJQYXRofWA7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYXBpVXJsKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGZldGNoIGZvbGRlcjogJHtnaXRodWJGb2xkZXJQYXRofWApO1xuICAgICAgY29uc3QgZmlsZXMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdEZvbGRlclBhdGgpKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIodmF1bHRGb2xkZXJQYXRoKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICBpZiAoZXhjbHVkZWQuc29tZSgoZXgpID0+IGZpbGUucGF0aCA9PT0gZXggfHwgZmlsZS5wYXRoLnN0YXJ0c1dpdGgoYCR7ZXh9L2ApKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYCR7dmF1bHRGb2xkZXJQYXRofS8ke2ZpbGUubmFtZX1gO1xuICAgICAgICBpZiAoZmlsZS50eXBlID09PSAnZmlsZScpIHtcbiAgICAgICAgICBjb25zdCBmaWxlUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmaWxlLmRvd25sb2FkX3VybCk7XG4gICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IGZpbGVSZXNwb25zZS50ZXh0KCk7XG4gICAgICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmlsZVBhdGgpO1xuICAgICAgICAgIGlmIChleGlzdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQgIT09IGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5iYWNrdXBGaWxlKGZpbGVQYXRoLCBjdXJyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICgoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGZpbGVQYXRoKSkgIT09IGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IHRoaXMuZmlsZUNhY2hlTWFuYWdlci51cGRhdGVDYWNoZShmaWxlUGF0aCwgY29udGVudCwgZmlsZS5wYXRoLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZmlsZS50eXBlID09PSAnZGlyJykge1xuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRm9sZGVyRnJvbUdpdEh1YihmaWxlLnBhdGgsIGAke3ZhdWx0Rm9sZGVyUGF0aH0vJHtmaWxlLm5hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICBuZXcgTm90aWNlKGBcdTI3MDUgRm9sZGVyIHN5bmNlZDogJHt2YXVsdEZvbGRlclBhdGh9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFx1Mjc0QyBGYWlsZWQgdG8gc3luYyBmb2xkZXI6ICR7dmF1bHRGb2xkZXJQYXRofWAsIGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoYFx1Mjc0QyBGYWlsZWQgdG8gdXBkYXRlIGZvbGRlcjogJHt2YXVsdEZvbGRlclBhdGh9YCk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVidWlsZEZpbGVDYWNoZSgpIHtcbiAgICBjb25zdCBjYWNoZSA9IHRoaXMuZmlsZUNhY2hlTWFuYWdlcjtcbiAgICBjb25zdCB0YXNrczogUHJvbWlzZTx2b2lkPltdID0gW107XG5cbiAgICAvLyAxKSBJbmRleCBleGFjdGx5IHRoZSBmaWxlcyBsaXN0ZWQgaW4gdGhlIG1hbmlmZXN0XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICAgIGNvbnN0IHZhdWx0UGF0aCA9IHRoaXMucmVzb2x2ZVZhdWx0UGF0aChlbnRyeS5wYXRoKTtcbiAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpKSB7XG4gICAgICAgIHRhc2tzLnB1c2goKGFzeW5jICgpID0+IHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKHZhdWx0UGF0aCk7XG4gICAgICAgICAgYXdhaXQgY2FjaGUudXBkYXRlQ2FjaGUodmF1bHRQYXRoLCBjb250ZW50LCBlbnRyeS5wYXRoLCBmYWxzZSk7XG4gICAgICAgIH0pKCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDIpIEluZGV4IGFueSBtYXJrZG93biBjaGlsZHJlbiB1bmRlciBtYW5pZmVzdCBmb2xkZXJzXG4gICAgZm9yIChjb25zdCBmb2xkZXJFbnRyeSBvZiB0aGlzLm1hbmlmZXN0Q2FjaGUuZm9sZGVycykge1xuICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IGZvbGRlckVudHJ5LnBhdGg7XG4gICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG4gICAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICBWYXVsdC5yZWN1cnNlQ2hpbGRyZW4oZm9sZGVyLCAoZmlsZSkgPT4ge1xuICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gZmlsZS5wYXRoO1xuICAgICAgICAgICAgdGFza3MucHVzaCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGZpbGVQYXRoKTtcbiAgICAgICAgICAgICAgYXdhaXQgY2FjaGUudXBkYXRlQ2FjaGUoZmlsZVBhdGgsIGNvbnRlbnQsIGZpbGVQYXRoLCBmYWxzZSk7XG4gICAgICAgICAgICB9KSgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGJhdGNoU2l6ZSA9IDEwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFza3MubGVuZ3RoOyBpICs9IGJhdGNoU2l6ZSkge1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGFza3Muc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSkpO1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gIH1cblxuICBhc3luYyBzaG93SW5kZXhpbmdNb2RhbCgpIHtcbiAgICBjb25zdCBtb2RhbCA9IG5ldyAoY2xhc3MgZXh0ZW5kcyBNb2RhbCB7XG4gICAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgfVxuICAgICAgb25PcGVuKCkge1xuICAgICAgICB0aGlzLmNvbnRlbnRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpKTtcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoJ1x1RDgzRFx1REQwNCBJbmRleGluZyBUb29sa2l0IEZpbGVzLi4uJyk7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdwJywge1xuICAgICAgICAgIHRleHQ6ICdJbmRleGluZyBhbmQgY2FjaGluZyB5b3VyIFZWdW5kZXJsb3JlIFZhdWx0IGZvciBmYXN0ZXIgdXBkYXRlcyBhbmQgc2FmZXIgc3luY2luZy4nXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pKHRoaXMuYXBwKTtcblxuICAgIG1vZGFsLm9wZW4oKTtcbiAgICBhd2FpdCB0aGlzLnJlYnVpbGRGaWxlQ2FjaGUoKTtcbiAgICBtb2RhbC5jbG9zZSgpO1xuICAgIG5ldyBOb3RpY2UoJ1x1MjcwNSBWVnVuZGVybG9yZSBjYWNoaW5nIGNvbXBsZXRlLicpO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlVmVyc2lvbkZpbGUoKSB7XG4gICAgaWYgKCF0aGlzLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ05vIGxhdGVzdCB2ZXJzaW9uIGZvdW5kOyBza2lwcGluZyB2ZXJzaW9uIGZpbGUgdXBkYXRlLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB2ZXJzaW9uUGF0aCA9ICcudmVyc2lvbi5qc29uJztcbiAgICBjb25zdCBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiB0aGlzLnNldHRpbmdzLmxhdGVzdFRvb2xraXRWZXJzaW9uIH0sIG51bGwsIDIpO1xuICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZlcnNpb25QYXRoKTtcbiAgICBpZiAoZXhpc3RzKSB7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKHZlcnNpb25QYXRoLCBjb250ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHZlcnNpb25QYXRoLCBjb250ZW50KTtcbiAgICB9XG4gIH1cblxuICAvKiogbWFpbi50cyAqKi9cblxuLyoqIFxuICogSW5zdGFsbCB0aGUgc2VsZWN0ZWQgY29tcGVuZGl1bSBhbmQgemVybyBvciBtb3JlIHJlZmVyZW5jZSBlZGl0aW9ucy5cbiAqL1xucHVibGljIGFzeW5jIGluc3RhbGxGdWxsVG9vbGtpdChcbiAgb3B0czogeyBjb21wZW5kaXVtOiBzdHJpbmc7IHJlZmVyZW5jZXM6IHN0cmluZ1tdIH0gPSB7IGNvbXBlbmRpdW06IFwiXCIsIHJlZmVyZW5jZXM6IFtdIH1cbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB7IGNvbXBlbmRpdW0sIHJlZmVyZW5jZXMgfSA9IG9wdHM7XG4gIGlmICghY29tcGVuZGl1bSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGNvbXBlbmRpdW0gZWRpdGlvbiBzZWxlY3RlZFwiKTtcbiAgfVxuXG4gIC8vIDEpIFNob3cgdGhlIFx1MjAxQ0luc3RhbGxpbmdcdTIwMjZcdTIwMUQgc3Bpbm5lclxuICBjb25zdCBwbGFjZWhvbGRlciA9IG5ldyBJbnN0YWxsaW5nTW9kYWwodGhpcy5hcHApO1xuICBwbGFjZWhvbGRlci5vcGVuKCk7XG5cbiAgbGV0IGluc3RhbGxTdWNjZWVkZWQgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICAvLyAyKSBTdGF0aWMgY29weSBvZiBldmVyeXRoaW5nIGluIHRoZSByZXBvIEVYQ0VQVCBhbnkgQ29tcGVuZGl1bS8qXG4gICAgY29uc3QgdHJlZUFwaSA9XG4gICAgICBcImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3Mvc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9naXQvdHJlZXMvbWFpbj9yZWN1cnNpdmU9MVwiO1xuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBmZXRjaCh0cmVlQXBpKTtcbiAgICBpZiAoIXJlc3Aub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGxpc3QgcmVwbyB0cmVlOiAke3Jlc3Auc3RhdHVzVGV4dH1gKTtcbiAgICB9XG4gICAgY29uc3QganNvbjogYW55ID0gYXdhaXQgcmVzcC5qc29uKCk7XG4gICAgY29uc3QgaXRlbXMgPSBBcnJheS5pc0FycmF5KGpzb24udHJlZSkgPyBqc29uLnRyZWUgOiBbXTtcblxuICAgIC8vIFVzZSB5b3VyIGV4Y2x1ZGVkUGF0aHMgKHdoaWNoIGFscmVhZHkgY29udGFpbnMgXCJDb21wZW5kaXVtXCIpXG4gICAgY29uc3Qgc3RhdGljRW50cmllcyA9IChpdGVtcyBhcyBBcnJheTx7IHBhdGg6IHN0cmluZzsgdHlwZTogc3RyaW5nIH0+KVxuICAgICAgLmZpbHRlcigoaXRlbSkgPT5cbiAgICAgICAgIXRoaXMuZXhjbHVkZWRQYXRocy5zb21lKGV4ID0+XG4gICAgICAgICAgaXRlbS5wYXRoID09PSBleCB8fCBpdGVtLnBhdGguc3RhcnRzV2l0aChgJHtleH0vYClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICAgLnNvcnQoKGEsIGIpID0+IChhLnR5cGUgPT09IGIudHlwZSA/IDAgOiBhLnR5cGUgPT09IFwidHJlZVwiID8gLTEgOiAxKSk7XG5cbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHN0YXRpY0VudHJpZXMpIHtcbiAgICAgIGlmIChlbnRyeS50eXBlID09PSBcInRyZWVcIikge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZW50cnkucGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHJhd1VybCA9IFxuICAgICAgICAgIGBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc2xhbXdpc2UwMDAxL1ZWdW5kZXJsb3JlLVRvb2xraXQtRnVsbC9tYWluLyR7ZW5jb2RlVVJJQ29tcG9uZW50KGVudHJ5LnBhdGgpfWA7XG4gICAgICAgIGNvbnN0IGZpbGVSZXNwID0gYXdhaXQgZmV0Y2gocmF3VXJsKTtcbiAgICAgICAgaWYgKCFmaWxlUmVzcC5vaykgY29udGludWU7XG4gICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBmaWxlUmVzcC50ZXh0KCk7XG4gICAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhlbnRyeS5wYXRoKSkge1xuICAgICAgICAgIGNvbnN0IG9sZCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChlbnRyeS5wYXRoKTtcbiAgICAgICAgICBpZiAob2xkICE9PSB0ZXh0KSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGVudHJ5LnBhdGgsIHRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoZW50cnkucGF0aCwgdGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAzKSBLaWNrIG9mZiB5b3VyIEpTT05cdTIxOTJNRCBwYXJzZXJzIGluIHBhcmFsbGVsXG4gICAgY29uc3QgcGFyc2VKb2JzID0gW1xuICAgICAgaW1wb3J0UnVsZXNldERhdGEoe1xuICAgICAgICBhcHA6IHRoaXMuYXBwLFxuICAgICAgICBlZGl0aW9uS2V5OiBjb21wZW5kaXVtLFxuICAgICAgICB0YXJnZXRQYXRoOiBgQ29tcGVuZGl1bWAsXG4gICAgICB9KSxcbiAgICAgIC4uLnJlZmVyZW5jZXMubWFwKHJlZktleSA9PlxuICAgICAgICBpbXBvcnRSdWxlc2V0RGF0YSh7XG4gICAgICAgICAgYXBwOiB0aGlzLmFwcCxcbiAgICAgICAgICBlZGl0aW9uS2V5OiByZWZLZXksXG4gICAgICAgICAgdGFyZ2V0UGF0aDogYCR7cmVmS2V5fWAsXG4gICAgICAgIH0pXG4gICAgICApLFxuICAgIF07XG4gICAgLy8gdGhpcyB3b25cdTIwMTl0IHJlc29sdmUgdW50aWwgX2FsbF8gcGFyc2VycyBoYXZlIGZpbmlzaGVkIHdyaXRpbmcgdGhlaXIgTUQgZmlsZXNcbiAgICBhd2FpdCBQcm9taXNlLmFsbChwYXJzZUpvYnMpO1xuXG4gICAgLy8gNCkgUG9zdC1pbnN0YWxsIGhvdXNla2VlcGluZ1xuICAgIGNvbnN0IG1hcmtlciA9IFwiLnZ2dW5kZXJsb3JlX2luc3RhbGxlZFwiO1xuICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKG1hcmtlcikpKSB7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobWFya2VyLCBcIlwiKTtcbiAgICB9XG4gICAgdGhpcy5zZXR0aW5ncy5uZWVkc0luc3RhbGwgICAgID0gZmFsc2U7XG4gICAgdGhpcy5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkID0gdHJ1ZTtcbiAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIHRoaXMuZW5hYmxlSGlnaGxpZ2h0KCk7XG5cbiAgICBpbnN0YWxsU3VjY2VlZGVkID0gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlx1Mjc0QyBpbnN0YWxsRnVsbFRvb2xraXQoKVwiLCBlcnIpO1xuICB9IGZpbmFsbHkge1xuICAgIC8vIG9ubHkgbm93IGNsb3NlIHRoZSBzcGlubmVyICYgcmVkcmF3IHRoZSBVSVxuICAgIHBsYWNlaG9sZGVyLmNsb3NlKCk7XG4gICAgaWYgKHRoaXMuc2V0dGluZ3NUYWIpIHRoaXMuc2V0dGluZ3NUYWIuZGlzcGxheSgpO1xuICAgIG5ldyBOb3RpY2UoXG4gICAgICBpbnN0YWxsU3VjY2VlZGVkXG4gICAgICAgID8gXCJcdTI3MDUgVlZ1bmRlcmxvcmUgVG9vbGtpdCBzdWNjZXNzZnVsbHkgaW5zdGFsbGVkIVwiXG4gICAgICAgIDogXCJcdTI3NEMgRmFpbGVkIHRvIGluc3RhbGwgdG9vbGtpdC4gU2VlIGNvbnNvbGUgZm9yIGRldGFpbHMuXCJcbiAgICApO1xuICB9XG59XG5cblxuXG59XG5leHBvcnQgeyBJbnN0YWxsaW5nTW9kYWwgfTsiLCAiaW1wb3J0IHtcblx0UGx1Z2luU2V0dGluZ1RhYixcblx0U2V0dGluZyxcblx0QXBwLFxuXHRURmlsZSxcblx0VEZvbGRlcixcblx0QWJzdHJhY3RJbnB1dFN1Z2dlc3QsXG5cdHNldEljb24sXG5cdE1vZGFsLFxuXHRNYXJrZG93blJlbmRlcmVyLFxuXHRDb21wb25lbnQsXG5cdE5vdGljZSxcblx0VGV4dENvbXBvbmVudCxcblx0VG9nZ2xlQ29tcG9uZW50LFxuXHRCdXR0b25Db21wb25lbnQsXG5cdERyb3Bkb3duQ29tcG9uZW50LFxuXHRTZWFyY2hDb21wb25lbnRcbn0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBDb25maXJtRnJlc2hJbnN0YWxsTW9kYWwgfSBmcm9tICcuL2ZpcnN0aW5zdGFsbGNvbmZpcm0nO1xuaW1wb3J0IHsgc2hvd0N1c3RvbUluc3RhbGxNb2RhbCB9IGZyb20gXCIuL2N1c3RvbUluc3RhbGxNb2RhbFwiO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IEFWQUlMQUJMRV9FRElUSU9OUywgRWRpdGlvbiB9IGZyb20gJy4vZWRpdGlvbnMnXG5cblxuLy8gRGVmaW5lIHlvdXIgQ3VzdG9tUGF0aEVudHJ5IGludGVyZmFjZS5cbmludGVyZmFjZSBDdXN0b21QYXRoRW50cnkge1xuXHR2YXVsdFBhdGg6IHN0cmluZztcblx0bWFuaWZlc3RLZXk6IHN0cmluZztcblx0ZG9VcGRhdGU6IGJvb2xlYW47XG59XG5cbi8vIEZpbGVQYXRoU3VnZ2VzdGVyIGZvciBsaXZlIHNlYXJjaCBvbiB2YXVsdCBmaWxlcy5cbmNsYXNzIEZpbGVQYXRoU3VnZ2VzdGVyIGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8c3RyaW5nPiB7XG5cdHByaXZhdGUgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcblx0cHJpdmF0ZSBwYXRoczogeyBwYXRoOiBzdHJpbmc7IGlzRm9sZGVyOiBib29sZWFuIH1bXSA9IFtdO1xuXHRwcml2YXRlIGN1cnJlbnRTdWdnZXN0aW9uczogc3RyaW5nW10gPSBbXTtcblx0cHJpdmF0ZSByZW5kZXJlZFN1Z2dlc3Rpb25zOiBNYXA8SFRNTEVsZW1lbnQsIHN0cmluZz4gPSBuZXcgTWFwKCk7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcblx0XHRzdXBlcihhcHAsIGlucHV0RWwpO1xuXHRcdHRoaXMuaW5wdXRFbCA9IGlucHV0RWw7XG5cblx0XHQvLyBHZXQgZm9sZGVycyBhbmQgbWFya2Rvd24gZmlsZXMgZnJvbSB0aGUgdmF1bHQuXG5cdFx0Y29uc3QgZm9sZGVycyA9IE9iamVjdC52YWx1ZXMoYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCkpXG5cdFx0XHQuZmlsdGVyKChmKTogZiBpcyBURm9sZGVyID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKVxuXHRcdFx0Lm1hcChmID0+ICh7IHBhdGg6IGYucGF0aCwgaXNGb2xkZXI6IHRydWUgfSkpO1xuXHRcdGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKVxuXHRcdFx0Lm1hcChmID0+ICh7IHBhdGg6IGYucGF0aCwgaXNGb2xkZXI6IGZhbHNlIH0pKTtcblx0XHR0aGlzLnBhdGhzID0gWy4uLmZvbGRlcnMsIC4uLmZpbGVzXTtcblxuXHRcdHRoaXMuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjb250YWluZXIgPSAodGhpcyBhcyBhbnkpLmNvbnRhaW5lckVsIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0XHRcdGlmICghY29udGFpbmVyKSByZXR1cm47XG5cdFx0XHRcdFx0Y29uc3Qgc2VsZWN0ZWRFbCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc3VnZ2VzdGlvbi1pdGVtLmlzLXNlbGVjdGVkJykgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHRcdFx0aWYgKHNlbGVjdGVkRWwpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNlbGVjdGVkUGF0aCA9IHRoaXMucmVuZGVyZWRTdWdnZXN0aW9ucy5nZXQoc2VsZWN0ZWRFbCk7XG5cdFx0XHRcdFx0XHRpZiAoc2VsZWN0ZWRQYXRoKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0U3VnZ2VzdGlvbihzZWxlY3RlZFBhdGgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSwgMCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRnZXRTdWdnZXN0aW9ucyhpbnB1dFN0cjogc3RyaW5nKTogc3RyaW5nW10ge1xuXHRcdGNvbnN0IHF1ZXJ5ID0gaW5wdXRTdHIudG9Mb3dlckNhc2UoKTtcblx0XHR0aGlzLmN1cnJlbnRTdWdnZXN0aW9ucyA9IHRoaXMucGF0aHNcblx0XHRcdC5maWx0ZXIoKHsgcGF0aCB9KSA9PiBwYXRoLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpKVxuXHRcdFx0Lm1hcChwID0+IHAucGF0aCk7XG5cdFx0cmV0dXJuIHRoaXMuY3VycmVudFN1Z2dlc3Rpb25zO1xuXHR9XG5cblx0cmVuZGVyU3VnZ2VzdGlvbihwYXRoOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGlzRm9sZGVyID0gdGhpcy5wYXRocy5maW5kKHAgPT4gcC5wYXRoID09PSBwYXRoKT8uaXNGb2xkZXI7XG5cdFx0ZWwuYWRkQ2xhc3MoXCJtb2QtY29tcGxleFwiKTtcblx0XHRjb25zdCBpY29uRWwgPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWljb24nIH0pO1xuXHRcdHNldEljb24oaWNvbkVsLCBpc0ZvbGRlciA/ICdmb2xkZXInIDogJ2RvY3VtZW50Jyk7XG5cblx0XHRjb25zdCBuYW1lID0gcGF0aC5zcGxpdCgnLycpLnBvcCgpITtcblx0XHRjb25zdCBkaXNwbGF5TmFtZSA9IGlzRm9sZGVyID8gbmFtZSA6IG5hbWUucmVwbGFjZSgvXFwubWQkLywgJycpO1xuXHRcdGVsLmNyZWF0ZURpdih7IHRleHQ6IGRpc3BsYXlOYW1lLCBjbHM6ICdzdWdnZXN0aW9uLXRpdGxlJyB9KTtcblx0XHRjb25zdCBwYXJlbnRQYXRoID0gcGF0aC5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKS5qb2luKCcvJyk7XG5cdFx0ZWwuY3JlYXRlRGl2KHsgdGV4dDogcGFyZW50UGF0aCwgY2xzOiAnc2VhcmNoLXN1Z2dlc3QtaW5mby10ZXh0JyB9KTtcblx0XHRlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGU6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR0aGlzLnNlbGVjdFN1Z2dlc3Rpb24ocGF0aCk7XG5cdFx0fSk7XG5cdFx0dGhpcy5yZW5kZXJlZFN1Z2dlc3Rpb25zLnNldChlbCwgcGF0aCk7XG5cdH1cblxuXHRzZWxlY3RTdWdnZXN0aW9uKHBhdGg6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMuaW5wdXRFbC52YWx1ZSA9IHBhdGg7XG5cdFx0dGhpcy5pbnB1dEVsLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaW5wdXRcIikpO1xuXHRcdHRoaXMuY2xvc2UoKTtcblx0fVxufVxuXG4vLyBNb2RhbCBmb3IgZGlzcGxheWluZyB0aGUgY2hhbmdlbG9nLlxuY2xhc3MgTWFya2Rvd25QcmV2aWV3TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwcml2YXRlIGNvbnRlbnQ6IHN0cmluZykge1xuXHRcdHN1cGVyKGFwcCk7XG5cdH1cblxuXHRvbk9wZW4oKTogdm9pZCB7XG5cdFx0dGhpcy5jb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSk7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKTtcblx0XHR0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdUb29sa2l0IENoYW5nZWxvZycgfSk7XG5cdFx0Y29uc3QgbWQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcblx0XHRjb25zdCBkdW1teUNvbXBvbmVudCA9IG5ldyBjbGFzcyBleHRlbmRzIENvbXBvbmVudCB7fSgpO1xuXHRcdE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24odGhpcy5jb250ZW50LCBtZCwgJy8nLCBkdW1teUNvbXBvbmVudCk7XG5cdH1cblxuXHRvbkNsb3NlKCk6IHZvaWQge1xuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuLy8gVGhlIGZ1bGwgc2V0dGluZ3MgdGFiLlxuZXhwb3J0IGNsYXNzIFRvb2xraXRTZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47ICBcblx0fSAgIFxuXHRwcml2YXRlIHJlbmRlckhlYWRlcihyb290OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGhlYWRlciA9IHJvb3QuY3JlYXRlRGl2KCk7XG5cdFx0aGVhZGVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0aGVhZGVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nO1xuXHRcdGhlYWRlci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG5cdFx0aGVhZGVyLnN0eWxlLmJvcmRlckJvdHRvbSA9ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknO1xuXHRcdGhlYWRlci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMmVtJztcblx0XHRoZWFkZXIuc3R5bGUucGFkZGluZ0JvdHRvbSA9ICcwLjVlbSc7XG5cdCAgXG5cdFx0aGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1ZWdW5kZXJsb3JlIFRvb2xraXQgU2V0dGluZ3MnIH0pO1xuXHQgIFxuXHRcdGNvbnN0IGhlYWRlckJ0bnMgPSBoZWFkZXIuY3JlYXRlRGl2KCk7XG5cdFx0aGVhZGVyQnRucy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdGhlYWRlckJ0bnMuc3R5bGUuZ2FwID0gJzAuNWVtJztcblx0ICBcblx0XHRjb25zdCBkb2NzQnRuID0gaGVhZGVyQnRucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRG9jcycgfSk7XG5cdFx0ZG9jc0J0bi5vbmNsaWNrID0gKCkgPT4gd2luZG93Lm9wZW4oJ2h0dHA6Ly92dnVuZGVybG9yZS5jb20nLCAnX2JsYW5rJyk7XG5cdCAgXG5cdFx0Y29uc3QgZ2l0aHViQnRuID0gaGVhZGVyQnRucy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnR2l0SHViJyB9KTtcblx0XHRnaXRodWJCdG4ub25jbGljayA9ICgpID0+XG5cdFx0ICB3aW5kb3cub3BlbignaHR0cHM6Ly9naXRodWIuY29tL3NsYW13aXNlMDAwMS9WVnVuZGVybG9yZS1Ub29sa2l0LUZ1bGwnLCAnX2JsYW5rJyk7XG5cdCAgXG5cdFx0Y29uc3Qga29maUJ0biA9IGhlYWRlckJ0bnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHQgIHRleHQ6ICdcdTI2MTUgS28tZmknLFxuXHRcdCAgY2xzOiAnbW9kLWN0YScsXG5cdFx0fSk7XG5cdFx0a29maUJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2ZmNTkwMCc7XG5cdFx0a29maUJ0bi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG5cdFx0a29maUJ0bi5vbmNsaWNrID0gKCkgPT4gd2luZG93Lm9wZW4oJ2h0dHBzOi8va28tZmkuY29tL3Z2dW5kZXJsb3JlJywgJ19ibGFuaycpO1xuXHQgIH1cblx0ICBcblx0XHRwcml2YXRlIHJlbmRlckZpcnN0UnVuQ2FyZChyb290OiBIVE1MRWxlbWVudCl7XG5cdFx0XHRcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZWVkc0luc3RhbGwpIHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0gID0gJyc7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UgICAgPSBbXTtcblx0XHRcdH1cblx0XHRcdC8vIDEpIE91dGVyIHdyYXBwZXJcblx0XHRcdGNvbnN0IGNhcmQgPSByb290LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Z2dW5kZXJsb3JlLWZpcnN0LXJ1bicgfSk7XG5cdFx0XHQvLyBNYWtlIHRoZSBjYXJkIGEgZmxleFx1MjAxMGNvbHVtbiBhbmQgY2VudGVyIGV2ZXJ5dGhpbmc6XG5cdFx0XHRPYmplY3QuYXNzaWduKGNhcmQuc3R5bGUsIHtcblx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuXHRcdFx0YWxpZ25JdGVtczogJ2NlbnRlcicsXG5cdFx0XHR0ZXh0QWxpZ246ICdjZW50ZXInLFxuXHRcdFx0LyogXG5cdFx0XHRcdFB1c2ggdGhlIGNhcmQgYSBiaXQgZG93biBmcm9tIHRoZSB0b3Agb2YgdGhlIHNldHRpbmdzIHBhbmUuXG5cdFx0XHRcdFlvdSBjYW4gYWRqdXN0IFwiMmVtXCIgdG8gbW92ZSBpdCBoaWdoZXIgb3IgbG93ZXIuXG5cdFx0XHQqL1xuXHRcdFx0bWFyZ2luVG9wOiAnMmVtJyxcblx0XHRcdC8qIE9wdGlvbmFsOiBhZGQgc29tZSBwYWRkaW5nIHNvIGl0IGRvZXNuJ3QgaHVnIHRoZSBlZGdlcyAqL1xuXHRcdFx0cGFkZGluZzogJzFlbScsXG5cdFx0XHRib3JkZXI6ICcycHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuXHRcdFx0Ym9yZGVyUmFkaXVzOiAnMThweCcsICAgICAgICAvKiAob3B0aW9uYWwpIHJvdW5kIHRoZSBjb3JuZXJzIHNsaWdodGx5ICovXG5cdFx0XHRiYWNrZ3JvdW5kQ29sb3I6ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJywgLyogKG9wdGlvbmFsKSB3aGl0ZS9ncmF5IGJhY2tncm91bmQgKi9cblx0XHRcdH0pO1xuXHRcdFxuXHRcdFx0Ly8gMikgSGVhZGVyXG5cdFx0XHRjb25zdCB0aXRsZSA9IGNhcmQuY3JlYXRlRWwoJ2gyJywge1xuXHRcdFx0dGV4dDogJ1x1RDgzQ1x1REZGMCBXZWxjb21lIHRvIFZWdW5kZXJsb3JlJyxcblx0XHRcdGNsczogJ3Z2LWNhcmQtdGl0bGUnLFxuXHRcdFx0fSk7XG5cdFx0XHQvLyBHaXZlIHRoZSB0aXRsZSBhIGxpdHRsZSBib3R0b20gbWFyZ2luXG5cdFx0XHR0aXRsZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMC41ZW0nO1xuXHRcdFxuXHRcdFx0Ly8gMykgSW5zdHJ1Y3Rpb25hbCBjb3B5XG5cdFx0XHRjb25zdCBkZXNjID0gY2FyZC5jcmVhdGVFbCgncCcsIHtcblx0XHRcdHRleHQ6XG5cdFx0XHRcdCdHZXQgc3RhcnRlZCBieSBpbnN0YWxsaW5nIHRoZSBkZWZhdWx0IHRvb2xraXRcdTIwMTRcXG5vciBjaG9vc2UgaW5kaXZpZHVhbCBwaWVjZXMgdG8gc3VpdCB5b3VyIHZhdWx0LicsXG5cdFx0XHRjbHM6ICd2di1jYXJkLWRlc2MnLFxuXHRcdFx0fSk7XG5cdFx0XHQvLyBTbGlnaHQgYm90dG9tIG1hcmdpbiBzbyBpdCBkb2Vzbid0IGJ1dHQgcmlnaHQgdXAgYWdhaW5zdCB0aGUgYnV0dG9uc1xuXHRcdFx0ZGVzYy5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMS4yNWVtJztcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFJVTEVTRVQgLyBSRUZFUkVOQ0UgR1JJRCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHBsdWdpbiA9IHRoaXMucGx1Z2luO1xuXG4vLyAxKSBHcmlkIGNvbnRhaW5lclxuY29uc3QgZ3JpZCA9IGNhcmQuY3JlYXRlRGl2KCk7XG5PYmplY3QuYXNzaWduKGdyaWQuc3R5bGUsIHtcbiAgZGlzcGxheTogJ2dyaWQnLFxuICBncmlkVGVtcGxhdGVDb2x1bW5zOiAnbWF4LWNvbnRlbnQgbWF4LWNvbnRlbnQnLFxuICBjb2x1bW5HYXA6ICcxcmVtJyxcbiAgcm93R2FwOiAnMC4yNXJlbScsXG4gIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAganVzdGlmeUl0ZW1zOiAnY2VudGVyJyxcbiAgbWFyZ2luQm90dG9tOiAnMXJlbScsXG59KTtcblxuLy8gMikgSGVhZGVyIHJvd1xuY29uc3QgbGFiZWxScyA9IGdyaWQuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ1J1bGVzZXQnIH0pO1xubGFiZWxScy5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuY29uc3QgbGFiZWxSZWYgPSBncmlkLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdSZWZlcmVuY2UgKG9wdGlvbmFsKScgfSk7XG5sYWJlbFJlZi5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuXG4vLyAzKSBJbnB1dCBjZWxsc1xuY29uc3QgcnNDZWxsID0gZ3JpZC5jcmVhdGVEaXYoeyBhdHRyOiB7IHN0eWxlOiAndGV4dC1hbGlnbjpjZW50ZXInIH0gfSk7XG5jb25zdCByZWZDZWxsID0gZ3JpZC5jcmVhdGVEaXYoeyBhdHRyOiB7IHN0eWxlOiAndGV4dC1hbGlnbjpjZW50ZXInIH0gfSk7XG5cbi8vIDQpIE11dGVkLCBpdGFsaWMgc3VtbWFyeSBiYXIgKHNwYW5zIGJvdGggY29sdW1ucylcbmNvbnN0IHN1bW1hcnlCYXIgPSBncmlkLmNyZWF0ZURpdigpO1xuT2JqZWN0LmFzc2lnbihzdW1tYXJ5QmFyLnN0eWxlLCB7XG4gIGdyaWRDb2x1bW46ICcxIC8gc3BhbiAyJyxcbiAgZGlzcGxheTogJ2ZsZXgnLFxuICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgZmxleFdyYXA6ICd3cmFwJyxcbiAgZ2FwOiAnMC41cmVtJyxcbiAgZm9udFNpemU6ICcwLjg1ZW0nLFxuICBjb2xvcjogJ3ZhcigtLXRleHQtbXV0ZWQpJyxcbiAgZm9udFN0eWxlOiAnaXRhbGljJyxcbiAgbWFyZ2luVG9wOiAnMC4yNXJlbScsXG4gIG1hcmdpbkJvdHRvbTogJzFyZW0nLFxufSk7XG5jb25zdCBydWxlc2V0U3BhbiA9IHN1bW1hcnlCYXIuY3JlYXRlU3Bhbih7XG4gIHRleHQ6IGBSdWxlc2V0OiAke1xuICAgIHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bVxuICAgICAgPyBgRCZEIDVFICgke3BsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bX0pYFxuICAgICAgOiAnJ1xuICB9YCxcbn0pO1xucnVsZXNldFNwYW4uc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbnN1bW1hcnlCYXIuY3JlYXRlU3Bhbih7IHRleHQ6ICdSZWZlcmVuY2VzOicgfSk7XG5jb25zdCBjaGlwc1dyYXBwZXIgPSBzdW1tYXJ5QmFyLmNyZWF0ZURpdigpO1xuT2JqZWN0LmFzc2lnbihjaGlwc1dyYXBwZXIuc3R5bGUsIHsgZGlzcGxheTogJ2ZsZXgnLCBnYXA6ICc0cHgnIH0pO1xuXG4vLyBIZWxwZXIgdG8gcmVuZGVyIGEgY2hpcFxuZnVuY3Rpb24gYWRkQ2hpcChpZDogc3RyaW5nKSB7XG5cdGNvbnN0IGVkID0gQVZBSUxBQkxFX0VESVRJT05TLmZpbmQoZSA9PiBlLmlkID09PSBpZCkhO1xuXHRjb25zdCBjaGlwID0gY2hpcHNXcmFwcGVyLmNyZWF0ZURpdih7XG5cdCAgYXR0cjoge1xuXHRcdHN0eWxlOlxuXHRcdCAgJ2JhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzoycHggNnB4OyAnICtcblx0XHQgICdib3JkZXItcmFkaXVzOjRweDsgZGlzcGxheTppbmxpbmUtZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBnYXA6NHB4Oydcblx0ICB9XG5cdH0pO1xuXHRjaGlwLmNyZWF0ZVNwYW4oeyB0ZXh0OiBlZC5sYWJlbCB9KTtcblx0Y29uc3QgcmVtID0gY2hpcC5jcmVhdGVTcGFuKHtcblx0ICB0ZXh0OiAnXHUwMEQ3Jyxcblx0ICBhdHRyOiB7IHN0eWxlOiAnY3Vyc29yOnBvaW50ZXI7IG1hcmdpbi1sZWZ0OjRweDsnIH1cblx0fSk7XG5cdHJlbS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHQgIHBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlID0gcGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UuZmlsdGVyKHggPT4geCAhPT0gaWQpO1xuXHQgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0ICBjaGlwLnJlbW92ZSgpO1xuXHQgIHVwZGF0ZUluc3RhbGxCdXR0b25zKCk7XG5cdH07XG4gIH1cbiAgO1xuXG4vLyBJbml0aWFsIGNoaXBzIGRyYXdcbnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlLmZvckVhY2goZSA9PiBhZGRDaGlwKGUpKTtcblxuLy8gNSkgUnVsZXNldCBkcm9wZG93blxuY29uc3QgcnNEcm9wZG93biA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChyc0NlbGwpO1xucnNEcm9wZG93bi5hZGRPcHRpb24oJycsICdTZWxlY3QgZWRpdGlvblx1MjAyNicpO1xuQVZBSUxBQkxFX0VESVRJT05TLmZvckVhY2goKGVkOiBFZGl0aW9uKSA9PiB7XG4gIHJzRHJvcGRvd24uYWRkT3B0aW9uKGVkLmlkLCBlZC5sYWJlbCk7XG59KTtcbnJzRHJvcGRvd25cbiAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtKVxuICAub25DaGFuZ2UoYXN5bmMgKHZhbCkgPT4ge1xuICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtID0gdmFsO1xuICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgLy8gTGl2ZVx1MjAxMHVwZGF0ZSB5b3VyIHN1bW1hcnkgYmFyOlxuICAgIGNvbnN0IGNob3NlbiA9IEFWQUlMQUJMRV9FRElUSU9OUy5maW5kKGUgPT4gZS5pZCA9PT0gdmFsKTtcbiAgICBydWxlc2V0U3Bhbi50ZXh0Q29udGVudCA9IGNob3NlbiA/IGNob3Nlbi5sYWJlbCA6ICcnO1xuXG4gICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHJlZmVyZW5jZSBjaGlwczpcbiAgICBjaGlwc1dyYXBwZXIuZW1wdHkoKTtcblxuICAgIHVwZGF0ZUluc3RhbGxCdXR0b25zKCk7XG4gIH0pO1xuXG4gIGNvbnN0IHNlYXJjaFdyYXBwZXJFbCA9IHJlZkNlbGwuY3JlYXRlRGl2KHsgYXR0cjogeyBzdHlsZTogJ3RleHQtYWxpZ246Y2VudGVyOycgfSB9KTtcbiAgY29uc3Qgc2VhcmNoQ29tcCA9IG5ldyBTZWFyY2hDb21wb25lbnQoc2VhcmNoV3JhcHBlckVsKTtcbiAgc2VhcmNoQ29tcC5zZXRQbGFjZWhvbGRlcignQWRkIHJlZmVyZW5jZSBydWxlc1x1MjAyNicpO1xuICBjb25zdCBzdWdnZXN0aW9uSW5wdXRFbCA9IHNlYXJjaENvbXAuaW5wdXRFbDtcbiAgXG4gIG5ldyBjbGFzcyBleHRlbmRzIEFic3RyYWN0SW5wdXRTdWdnZXN0PHN0cmluZz4ge1xuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudCkge1xuXHQgIHN1cGVyKGFwcCwgaW5wdXRFbCk7XG5cdH1cbiAgXG5cdC8vIDEpIFByb3Bvc2UgZWRpdGlvbiBJRHMgKG1pbnVzIHRoZSBvbmUgdGhleSBwaWNrZWQgYXMgdGhlIG1haW4gcnVsZXNldClcblx0Z2V0U3VnZ2VzdGlvbnMoaW5wdXQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcblx0ICByZXR1cm4gQVZBSUxBQkxFX0VESVRJT05TXG5cdFx0LmZpbHRlcihlZCA9PiBlZC5pZCAhPT0gcGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRDb21wZW5kaXVtKSAgICAgICAgICAgIC8vIGZpbHRlciBvdXQgdGhlIGNob3NlbiBydWxlc2V0XG5cdFx0LmZpbHRlcihlZCA9PiBlZC5sYWJlbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGlucHV0LnRvTG93ZXJDYXNlKCkpKSAgICAgLy8gbWF0Y2ggb24gbGFiZWwgdGV4dFxuXHRcdC5tYXAoZWQgPT4gZWQuaWQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiB0aGUgSUQgZm9yIGVhY2hcblx0fVxuICBcblx0Ly8gMikgUmVuZGVyIHRoZSBodW1hbi1yZWFkYWJsZSBsYWJlbFxuXHRyZW5kZXJTdWdnZXN0aW9uKGl0ZW06IHN0cmluZywgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cdCAgY29uc3QgZWQgPSBBVkFJTEFCTEVfRURJVElPTlMuZmluZChlID0+IGUuaWQgPT09IGl0ZW0pITtcblx0ICBlbC5jcmVhdGVEaXYoeyB0ZXh0OiBlZC5sYWJlbCB9KTtcblx0fVxuICBcblx0Ly8gMykgV2hlbiB0aGV5IHBpY2sgb25lLCBzdG9yZSBpdHMgSUQgYW5kIGFkZCBhIGNoaXBcblx0c2VsZWN0U3VnZ2VzdGlvbihpdGVtOiBzdHJpbmcpOiB2b2lkIHtcblx0ICBpZiAoIXBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0UmVmZXJlbmNlLmluY2x1ZGVzKGl0ZW0pKSB7XG5cdFx0cGx1Z2luLnNldHRpbmdzLnJ1bGVzZXRSZWZlcmVuY2UucHVzaChpdGVtKTtcblx0XHRwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0YWRkQ2hpcChpdGVtKTtcblx0ICB9XG5cdCAgdGhpcy5jbG9zZSgpO1xuXHQgIHN1Z2dlc3Rpb25JbnB1dEVsLnZhbHVlID0gJyc7XG5cdCAgdXBkYXRlSW5zdGFsbEJ1dHRvbnMoKTtcblx0fVxuICB9KHRoaXMuYXBwLCBzdWdnZXN0aW9uSW5wdXRFbCk7XG4gIFxuXG5cblxuXG5cdFx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQnV0dG9uIHJvdyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRcdGNvbnN0IGJ0blJvdzEgPSBjYXJkLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Z2LWJ1dHRvbi1yb3cnIH0pO1xuXHRcdFx0T2JqZWN0LmFzc2lnbihidG5Sb3cxLnN0eWxlLCB7XG5cdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRnYXA6ICcwLjc1ZW0nLFxuXHRcdFx0anVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuXHRcdFx0bWFyZ2luQm90dG9tOiAnMS41ZW0nLFxuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnN0IGluc3RhbGxCdG4xID0gYnRuUm93MS5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0dGV4dDogJ0luc3RhbGwgVG9vbGtpdCcsXG5cdFx0XHRjbHM6ICdtb2QtY3RhJyxcblx0XHRcdH0pO1xuXHRcdFx0aW5zdGFsbEJ0bjEub25DbGlja0V2ZW50KCgpID0+XG5cdFx0XHRuZXcgQ29uZmlybUZyZXNoSW5zdGFsbE1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikub3BlbigpXG5cdFx0XHQpO1xuXG5cdFx0XHRjb25zdCBjdXN0b21CdG4xID0gYnRuUm93MS5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0dGV4dDogJ0N1c3RvbSBJbnN0YWxsJyxcblx0XHRcdGNsczogJ21vZC1jdGEnLFxuXHRcdFx0fSk7XG5cdFx0XHRPYmplY3QuYXNzaWduKGN1c3RvbUJ0bjEuc3R5bGUsIHtcblx0XHRcdGJhY2tncm91bmQ6ICdub25lJyxcblx0XHRcdGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJyxcblx0XHRcdGNvbG9yOiAndmFyKC0tdGV4dC1ub3JtYWwpJyxcblx0XHRcdH0pO1xuXHRcdFx0Y3VzdG9tQnRuMS5vbkNsaWNrRXZlbnQoKCkgPT4gc2hvd0N1c3RvbUluc3RhbGxNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pKTtcblxuXHRcdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIEhlbHBlciB0byBlbmFibGUvZGlzYWJsZSB0aGUgYnV0dG9ucyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRcdGNvbnN0IHVwZGF0ZUluc3RhbGxCdXR0b25zID0gKCkgPT4ge1xuXHRcdFx0Y29uc3QgaGFzUnVsZXNldCA9IEJvb2xlYW4odGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW0pO1xuXHRcdFx0aW5zdGFsbEJ0bjEudG9nZ2xlQXR0cmlidXRlKCdkaXNhYmxlZCcsICFoYXNSdWxlc2V0KTtcblx0XHRcdGN1c3RvbUJ0bjEudG9nZ2xlQXR0cmlidXRlKCdkaXNhYmxlZCcsICFoYXNSdWxlc2V0KTtcblx0XHRcdH07XG5cblx0XHRcdC8vIDcpIEluaXRpYWwgY2FsbCwgaW4gY2FzZSB3ZVx1MjAxOXJlIHJlLXJlbmRlcmluZ1xuXHRcdFx0dXBkYXRlSW5zdGFsbEJ1dHRvbnMoKTtcblxuXHRcdFxuXHRcdFx0Ly8gNSkgXHUyMDFDU2tpcFx1MjAxRCBsaW5rXG5cdFx0XHRjb25zdCBza2lwUGFyYSA9IGNhcmQuY3JlYXRlRWwoJ3AnLCB7IGNsczogJ3Z2LXNraXAtbGluaycgfSk7XG5cdFx0XHQvLyBDZW50ZXIgaXQgYW5kIGdpdmUgaXQgYSB0aW55IHRvcCBtYXJnaW5cblx0XHRcdE9iamVjdC5hc3NpZ24oc2tpcFBhcmEuc3R5bGUsIHtcblx0XHRcdHRleHRBbGlnbjogJ2NlbnRlcicsXG5cdFx0XHRtYXJnaW5Ub3A6ICcwLjI1ZW0nLFxuXHRcdFx0fSk7XG5cdFx0XHRza2lwUGFyYVxuXHRcdFx0LmNyZWF0ZUVsKCdhJywge1xuXHRcdFx0dGV4dDogJ0FscmVhZHkgaGF2ZSB0aGUgVG9vbGtpdD8gU2hvdyBtZSB0aGUgc2V0dGluZ3MgXHUyMTkyJyxcblx0XHRcdH0pXG5cdFx0XHQub25DbGlja0V2ZW50KGFzeW5jICgpID0+IHtcblx0XHRcdC8vIDEpIENyZWF0ZSB0aGUgaGlkZGVuIG1hcmtlciBmaWxlIHNvIFwiZmlyc3RcdTIwMTBydW5cIiBuZXZlciBzaG93cyBhZ2Fpbjpcblx0XHRcdGNvbnN0IG1hcmtlclBhdGggPSAnLnZ2dW5kZXJsb3JlX2luc3RhbGxlZCc7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHQvLyBPbmx5IHdyaXRlIGl0IGlmIGl0IGRvZXMgbm90IGV4aXN0IHlldFxuXHRcdFx0XHRpZiAoIShhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhtYXJrZXJQYXRoKSkpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG1hcmtlclBhdGgsICcnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdcdTI3NEMgRmFpbGVkIHRvIGNyZWF0ZSBtYXJrZXIgZmlsZTonLCBlKTtcblx0XHRcdH1cblx0XHRcblx0XHRcdC8vIDIpIEZsaXAgbmVlZHNJbnN0YWxsIHRvIGZhbHNlIChzbyB0aGUgZmlyc3RcdTIwMTBydW4gY2FyZCBpcyBnb25lKVxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubmVlZHNJbnN0YWxsID0gZmFsc2U7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcblx0XHRcdC8vIDMpIFJlXHUyMDEwcmVuZGVyIHRoZSBub3JtYWwgc2V0dGluZ3MgVUlcblx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHQgIFxuXHQgIFxuXHRwcml2YXRlIHZlcnNpb25WYWx1ZUVsOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIGZvcmNlV2FybmluZ0VsOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc29sZS5sb2coXCJcdUQ4M0RcdUREMjcgZGlzcGxheSgpIGNhbGxlZCwgbmVlZHNJbnN0YWxsID1cIiwgdGhpcy5wbHVnaW4uc2V0dGluZ3MubmVlZHNJbnN0YWxsKTtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdGNvbnN0IHNhdmVkU2Nyb2xsVG9wID0gY29udGFpbmVyRWwuc2Nyb2xsVG9wO1xuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cdFxuXHRcdHRoaXMucmVuZGVySGVhZGVyKGNvbnRhaW5lckVsKTsgLy8gXHVEODNEXHVEQzQ4XHUwMEEwQWx3YXlzIHJlbmRlciBoZWFkZXIgZmlyc3Rcblx0XG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm5lZWRzSW5zdGFsbCkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJcdUQ4M0VcdURERUEgU2hvd2luZyBmaXJzdC1ydW4gY2FyZFwiKTtcblx0XHRcdHRoaXMucmVuZGVyRmlyc3RSdW5DYXJkKGNvbnRhaW5lckVsKTtcblx0XHRcdGNvbnRhaW5lckVsLnNjcm9sbFRvcCA9IHNhdmVkU2Nyb2xsVG9wO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0Oyhhc3luYyAoKSA9PiB7XHRcblx0XHRcblx0XHQvKiogXHUyNTAwXHUyNTAwXHUyNTAwIFZFUlNJT04gU0VDVElPTiBcdTI1MDBcdTI1MDBcdTI1MDAgKi9cblx0XHRjb25zdCB2ZXJzaW9uUm93ID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG5cdFx0dmVyc2lvblJvdy5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMWVtJztcblx0XHR2ZXJzaW9uUm93LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0dmVyc2lvblJvdy5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdzcGFjZS1iZXR3ZWVuJztcblx0XHR2ZXJzaW9uUm93LnN0eWxlLmFsaWduSXRlbXMgPSAnZmxleC1zdGFydCc7XG5cdFx0dmVyc2lvblJvdy5zdHlsZS5nYXAgPSAnMmVtJztcblx0XHR2ZXJzaW9uUm93LnN0eWxlLmZsZXhXcmFwID0gJ3dyYXAnO1xuXHRcdHZlcnNpb25Sb3cuc3R5bGUuYm9yZGVyQm90dG9tID0gJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKSc7XG5cblx0XHRjb25zdCB2ZXJzaW9uSW5mbyA9IHZlcnNpb25Sb3cuY3JlYXRlRGl2KCk7XG5cdFx0dmVyc2lvbkluZm8uc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHR2ZXJzaW9uSW5mby5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XG5cdFx0dmVyc2lvbkluZm8uc3R5bGUuZ2FwID0gJzAuMjVlbSc7XG5cblx0XHRsZXQgaW5zdGFsbGVkID0gJ05vdCBpbnN0YWxsZWQnO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCB2ZXJDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKCcudmVyc2lvbi5qc29uJyk7XG5cdFx0XHRjb25zdCBqc29uID0gSlNPTi5wYXJzZSh2ZXJDb250ZW50KTtcblx0XHRcdGluc3RhbGxlZCA9IGpzb24udmVyc2lvbiA/PyAnTm90IGluc3RhbGxlZCc7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCByZWFkIC52ZXJzaW9uLmpzb24gZnJvbSB2YXVsdDonLCBlcnIpO1xuXHRcdH1cblx0XHRjb25zdCBsYXRlc3QgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiA/PyAnQ291bGQgbm90IGZldGNoJztcblx0XHRjb25zdCBpc01hdGNoID0gaW5zdGFsbGVkID09PSBsYXRlc3Q7XG5cblx0XHRjb25zdCB2YXVsdFJvdyA9IHZlcnNpb25JbmZvLmNyZWF0ZURpdigpO1xuXHRcdHZhdWx0Um93LmFwcGVuZFRleHQoJ1ZhdWx0IFRvb2xraXQgVmVyc2lvbjogJyk7XG5cdFx0XG5cdFx0dGhpcy52ZXJzaW9uVmFsdWVFbCA9IHZhdWx0Um93LmNyZWF0ZVNwYW4oKTsgIC8vIFx1RDgzRFx1REQyNSBzYXZlIHJlZlxuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwudGV4dENvbnRlbnQgPSBpbnN0YWxsZWQ7XG5cdFx0dGhpcy52ZXJzaW9uVmFsdWVFbC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuXHRcdHRoaXMudmVyc2lvblZhbHVlRWwuc3R5bGUuY29sb3IgPSBpc01hdGNoID8gJ3ZhcigtLXRleHQtc3VjY2VzcyknIDogJ3ZhcigtLXRleHQtZXJyb3IpJztcblx0XHRcblx0XHRjb25zdCBsYXRlc3RSb3cgPSB2ZXJzaW9uSW5mby5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnTGF0ZXN0IE9mZmljaWFsIFZlcnNpb246ICcgfSk7XG5cdFx0bGF0ZXN0Um93LmNyZWF0ZVNwYW4oe1xuXHRcdFx0dGV4dDogbGF0ZXN0LFxuXHRcdFx0YXR0cjogeyBzdHlsZTogJ2ZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogdmFyKC0tdGV4dC1zdWNjZXNzKTsnIH1cblx0XHR9KTtcblxuXHRcdGNvbnN0IHZlcnNpb25Db250cm9scyA9IHZlcnNpb25Sb3cuY3JlYXRlRGl2KCk7XG5cdFx0dmVyc2lvbkNvbnRyb2xzLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0dmVyc2lvbkNvbnRyb2xzLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcblx0XHR2ZXJzaW9uQ29udHJvbHMuc3R5bGUuYWxpZ25JdGVtcyA9ICdmbGV4LWVuZCc7XG5cdFx0dmVyc2lvbkNvbnRyb2xzLnN0eWxlLmdhcCA9ICcwLjVlbSc7XG5cblx0XHRjb25zdCBidXR0b25Sb3cgPSB2ZXJzaW9uQ29udHJvbHMuY3JlYXRlRGl2KCk7XG5cdFx0YnV0dG9uUm93LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0YnV0dG9uUm93LnN0eWxlLmdhcCA9ICcwLjVlbSc7XG5cblx0XHRjb25zdCBjaGVja0J0biA9IGJ1dHRvblJvdy5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0dGV4dDogaW5zdGFsbGVkICE9PSBsYXRlc3QgPyAnUHJldmlldyBVcGRhdGUnIDogJ0NoZWNrIGZvciBVcGRhdGVzJyxcblx0XHRcdGNsczogJ21vZC1jdGEnXG5cdFx0fSk7XG5cdFx0Y2hlY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAoaW5zdGFsbGVkICE9PSBsYXRlc3QpIHtcblx0XHRcdFx0dGhpcy5wbHVnaW4ucHJldmlld1VwZGF0ZXNNb2RhbCgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uY2hlY2tGb3JVcGRhdGVzKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Y29uc3QgY2hhbmdlbG9nQnRuID0gYnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdcdUQ4M0RcdURDRDYgVmlldyBDaGFuZ2Vsb2cnIH0pO1xuXHRcdGNoYW5nZWxvZ0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdG5ldyBNYXJrZG93blByZXZpZXdNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4uY2hhbmdlbG9nKS5vcGVuKCk7XG5cdFx0fSk7XG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RDaGVja2VkKSB7XG5cdFx0XHRjb25zdCBsYXN0Q2hlY2tlZCA9IHZlcnNpb25Db250cm9scy5jcmVhdGVEaXYoKTtcblx0XHRcdGxhc3RDaGVja2VkLnN0eWxlLmZvbnRTaXplID0gJzExcHgnO1xuXHRcdFx0bGFzdENoZWNrZWQuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuXHRcdFx0bGFzdENoZWNrZWQudGV4dENvbnRlbnQgPSBgTGFzdCBjaGVja2VkOiAke25ldyBEYXRlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RDaGVja2VkKS50b0xvY2FsZVN0cmluZygpfWA7XG5cdFx0fVxuXG5cdFx0XG5cblx0XHQvKiogXHUyNTAwXHUyNTAwXHUyNTAwIEZJWCBZT1VSIFZBVUxUIFNFQ1RJT04gKGNvbGxhcHNpYmxlLCBmaXhlZFx1MjAxMGljb24pIFx1MjUwMFx1MjUwMFx1MjUwMCAqL1xuXHRcdGNvbnN0IGZpeERldGFpbHMgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGV0YWlscycsIHsgY2xzOiAndmstc2VjdGlvbicgfSk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgUmVwbGFjZSB5b3VyIG9sZCBmaXhIZWFkZXIgd2l0aCB0aGlzIDxzdW1tYXJ5PiBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBmaXhIZWFkZXIgPSBmaXhEZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5JywgeyBjbHM6ICd2ay1zZWN0aW9uLWhlYWRlcicgfSk7XG5cdFx0T2JqZWN0LmFzc2lnbihmaXhIZWFkZXIuc3R5bGUsIHtcblx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0ZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG5cdFx0YWxpZ25JdGVtczogJ3N0cmV0Y2gnLFxuXHRcdHBhZGRpbmc6ICcwLjVlbSAwJyxcblx0XHRib3JkZXJCb3R0b206ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuXHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdH0pO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwIENyZWF0ZSBhIHNpbmdsZSBmbGV4XHUyMDEwcm93IGluc2lkZSB0aGUgc3VtbWFyeSBmb3IgdGl0bGUraWNvbiBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBmaXhIZWFkZXJSb3cgPSBmaXhIZWFkZXIuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7XG5cdFx0XHRzdHlsZTogYFxuXHRcdFx0ZGlzcGxheTogZmxleDtcblx0XHRcdGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2Vlbjtcblx0XHRcdGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcblx0XHRcdGAsXG5cdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMCBMZWZ0IHNpZGU6IHRpdGxlICsgZGVzY3JpcHRpb24gYmxvY2sgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgZml4VGl0bGVCbG9jayA9IGZpeEhlYWRlclJvdy5jcmVhdGVEaXYoe1xuXHRcdGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOycgfVxuXHRcdH0pO1xuXHRcdGZpeFRpdGxlQmxvY2suY3JlYXRlRWwoJ2g1JywgeyB0ZXh0OiAnRml4IFlvdXIgVmF1bHQnIH0pO1xuXHRcdGZpeFRpdGxlQmxvY2suY3JlYXRlRWwoJ2RpdicsIHtcblx0XHR0ZXh0OiAnRml4IGFuZCBicm9rZW4sIGRlbGV0ZWQsIG9yIG1pc3BsYWNlZCBmaWxlcyBpbiB5b3VyIHRvb2xraXQuJyxcblx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOiAwLjI1ZW07JyB9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwIFJpZ2h0IHNpZGU6IHN0YXRpYyB0b2dnbGUgaWNvbiAocm90YXRlcyBpbiBwbGFjZSBvbmx5KSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBmaXhUb2dnbGVJY29uID0gZml4SGVhZGVyUm93LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnVlYnLCBjbHM6ICd2ay10b2dnbGUtaWNvbicgfSk7XG5cdFx0T2JqZWN0LmFzc2lnbihmaXhUb2dnbGVJY29uLnN0eWxlLCB7XG5cdFx0Zm9udFdlaWdodDogJ2JvbGQnLFxuXHRcdGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLFxuXHRcdHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gMC4ycyBlYXNlJyxcblx0XHR0cmFuc2Zvcm1PcmlnaW46ICc1MCUgNTAlJywgLy8gUm90YXRlIGFyb3VuZCBpdHMgb3duIGNlbnRlclxuXHRcdHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XHR0cmFuc2Zvcm06IGZpeERldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJyxcblx0XHR9KTtcblx0XHRmaXhEZXRhaWxzLm9udG9nZ2xlID0gKCkgPT4ge1xuXHRcdGZpeFRvZ2dsZUljb24uc3R5bGUudHJhbnNmb3JtID0gZml4RGV0YWlscy5vcGVuID8gJ3JvdGF0ZSgwZGVnKScgOiAncm90YXRlKDE4MGRlZyknO1xuXHRcdH07XG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQm9keSAoc2FtZSBhcyBiZWZvcmUsIGp1c3QgaW5kZW50ZWQgdW5kZXIgPGRldGFpbHM+KSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBmaXhCb2R5ID0gZml4RGV0YWlscy5jcmVhdGVEaXYoeyBjbHM6ICd2ay1zZWN0aW9uLWJvZHknIH0pO1xuXHRcdGZpeEJvZHkuc3R5bGUucGFkZGluZ0xlZnQgPSAnMWVtJztcblxuXHRcdC8vIFx1MjUwMFx1MjUwMCBCdXR0b24gKyB3YXJuaW5nIHJvdyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBmaXhCdXR0b25Sb3cgPSBmaXhCb2R5LmNyZWF0ZURpdigpO1xuXHRcdGZpeEJ1dHRvblJvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdGZpeEJ1dHRvblJvdy5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdzcGFjZS1iZXR3ZWVuJztcblx0XHRmaXhCdXR0b25Sb3cuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuXHRcdGZpeEJ1dHRvblJvdy5zdHlsZS5tYXJnaW5Ub3AgPSAnMC41ZW0nO1xuXG5cdFx0Y29uc3Qgd2FybmluZ0NvbnRhaW5lciA9IGZpeEJ1dHRvblJvdy5jcmVhdGVEaXYoKTtcblx0XHR0aGlzLmZvcmNlV2FybmluZ0VsID0gd2FybmluZ0NvbnRhaW5lcjtcblxuXHRcdGxldCBpbnN0YWxsZWRWZXJzaW9uU3RyID0gJyc7XG5cdFx0dHJ5IHtcblx0XHRjb25zdCB2ZXJzaW9uRmlsZSA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoJy52ZXJzaW9uLmpzb24nKTtcblx0XHRjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHZlcnNpb25GaWxlKTtcblx0XHRpbnN0YWxsZWRWZXJzaW9uU3RyID0gKHBhcnNlZC52ZXJzaW9uID8/ICcnKS50cmltKCk7XG5cdFx0fSBjYXRjaCB7XG5cdFx0aW5zdGFsbGVkVmVyc2lvblN0ciA9ICcnO1xuXHRcdH1cblxuXHRcdGNvbnN0IGxhdGVzdFZlcnNpb25TdHIgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3MubGF0ZXN0VG9vbGtpdFZlcnNpb24gPz8gJycpLnRyaW0oKTtcblxuXHRcdGNvbnNvbGUubG9nKFwiXHVEODNFXHVEREVBIENvbXBhcmluZyB2ZXJzaW9uczpcIiwgaW5zdGFsbGVkVmVyc2lvblN0ciwgbGF0ZXN0VmVyc2lvblN0cik7XG5cblx0XHRpZiAoaW5zdGFsbGVkVmVyc2lvblN0ciAmJiBsYXRlc3RWZXJzaW9uU3RyICYmIGluc3RhbGxlZFZlcnNpb25TdHIgIT09IGxhdGVzdFZlcnNpb25TdHIpIHtcblx0XHRjb25zdCB3YXJuID0gd2FybmluZ0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0dGV4dDogYFx1MjZBMFx1RkUwRiBOZXcgdmVyc2lvbiBhdmFpbGFibGUgKCR7aW5zdGFsbGVkVmVyc2lvblN0cn0gXHUyMTkyICR7bGF0ZXN0VmVyc2lvblN0cn0pIFx1MjAxNCB1c2UgcmVndWxhciB1cGRhdGUgaW5zdGVhZGAsXG5cdFx0fSk7XG5cdFx0d2Fybi5zdHlsZS5mb250U2l6ZSA9ICcwLjg1ZW0nO1xuXHRcdHdhcm4uc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuXHRcdHdhcm4uc3R5bGUuZm9udFN0eWxlID0gJ2l0YWxpYyc7XG5cdFx0d2Fybi5zZXRBdHRyKFxuXHRcdFx0J3RpdGxlJyxcblx0XHRcdCdGb3JjZSB1cGRhdGluZyB3aGlsZSBhIG5ldyB2ZXJzaW9uIGlzIGF2YWlsYWJsZSBtYXkgc2tpcCBpbXBvcnRhbnQgY2hhbmdlcy4nXG5cdFx0KTtcblx0XHR9XG5cblx0XHQvLyBcdTI3QTFcdUZFMEYgUmlnaHQgc2lkZTogYWN0aW9uIGJ1dHRvbnNcblx0XHRjb25zdCBidXR0b25Hcm91cCA9IGZpeEJ1dHRvblJvdy5jcmVhdGVEaXYoKTtcblx0XHRidXR0b25Hcm91cC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdGJ1dHRvbkdyb3VwLnN0eWxlLmdhcCA9ICcwLjVlbSc7XG5cblx0XHRidXR0b25Hcm91cC5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdHRleHQ6ICdGb3JjZSBVcGRhdGUgVmF1bHQnLFxuXHRcdGNsczogJ21vZC1jdGEnXG5cdFx0fSkub25jbGljayA9IGFzeW5jICgpID0+IHtcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5mb3JjZVVwZGF0ZVByZXZpZXdBbmRDb25maXJtKCk7XG5cdFx0fTtcblxuXHRcdGJ1dHRvbkdyb3VwLmNyZWF0ZUVsKCdidXR0b24nLCB7XG5cdFx0dGV4dDogJ1VuZG8gVXBkYXRlJ1xuXHRcdH0pLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4udW5kb0ZvcmNlVXBkYXRlKCk7XG5cdFx0fTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMCBUaW1lc3RhbXAgcm93IFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGZpeFRpbWVzdGFtcFJvdyA9IGZpeEJvZHkuY3JlYXRlRGl2KCk7XG5cdFx0T2JqZWN0LmFzc2lnbihmaXhUaW1lc3RhbXBSb3cuc3R5bGUsIHtcblx0XHR0ZXh0QWxpZ246ICdyaWdodCcsXG5cdFx0Zm9udFNpemU6ICcxMXB4Jyxcblx0XHRjb2xvcjogJ3ZhcigtLXRleHQtbXV0ZWQpJyxcblx0XHRtYXJnaW5Ub3A6ICcwLjI1ZW0nXG5cdFx0fSk7XG5cdFx0Zml4VGltZXN0YW1wUm93LnRleHRDb250ZW50ID0gYExhc3QgZm9yY2VkOiAke1xuXHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RGb3JjZVVwZGF0ZVxuXHRcdFx0PyBuZXcgRGF0ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXN0Rm9yY2VVcGRhdGUpLnRvTG9jYWxlU3RyaW5nKClcblx0XHRcdDogJ05vdCBmb3JjZWQgeWV0J1xuXHRcdH1gO1xuXG5cblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBCQUNLVVAgU0VDVElPTiBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBiYWNrdXBEZXRhaWxzID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RldGFpbHMnLCB7IGNsczogJ3ZrLXNlY3Rpb24nIH0pO1xuXG5cdFx0Ly8gU3VtbWFyeSBibG9jazogc3RhY2tlZCBjb2x1bW4gbGF5b3V0XG5cdFx0Y29uc3QgYmFja3VwU3VtbWFyeSA9IGJhY2t1cERldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcblxuXHRcdE9iamVjdC5hc3NpZ24oYmFja3VwU3VtbWFyeS5zdHlsZSwge1xuXHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcblx0XHRhbGlnbkl0ZW1zOiAnc3RyZXRjaCcsXG5cdFx0cGFkZGluZzogJzAuNWVtIDAnLFxuXHRcdGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG5cdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0fSk7XG5cblx0XHQvLyBDcmVhdGUgdGl0bGUgKyBpY29uIHJvd1xuXHRcdGNvbnN0IGJhY2t1cFRpdGxlUm93ID0gYmFja3VwU3VtbWFyeS5jcmVhdGVEaXYoe1xuXHRcdGF0dHI6IHtcblx0XHRcdHN0eWxlOiBgXG5cdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuXHRcdFx0YCxcblx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gTGVmdDogaGVhZGVyIGJsb2NrICh0aXRsZSArIGRlc2NyaXB0aW9uIHRvZ2V0aGVyKSBcblx0XHRjb25zdCB0aXRsZUJsb2NrID0gYmFja3VwVGl0bGVSb3cuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsnIH1cblx0XHR9KTtcblxuXHRcdHRpdGxlQmxvY2suY3JlYXRlRWwoJ2g1JywgeyB0ZXh0OiAnVmF1bHQgQmFja3VwcycgfSk7XG5cblx0XHR0aXRsZUJsb2NrLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0dGV4dDogJ1RoZSBUb29sa2l0IHdpbGwgYmFjayB1cCB5b3VyIHZhdWx0IGF1dG9tYXRpY2FsbHkgYmVmb3JlIHVwZGF0ZXMuIFlvdSBjYW4gYWxzbyBiYWNrIHVwIG1hbnVhbGx5IGFueXRpbWUuJyxcblx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOiAwLjI1ZW07JyB9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gUmlnaHQ6IGNvbGxhcHNlIGljb25cblx0XHRjb25zdCBiYWNrdXBWdkljb24gPSBiYWNrdXBUaXRsZVJvdy5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJ1ZWJywgY2xzOiAndmstdG9nZ2xlLWljb24nIH0pO1xuXG5cdFx0T2JqZWN0LmFzc2lnbihiYWNrdXBWdkljb24uc3R5bGUsIHtcblx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0ZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0dHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuXHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuXHRcdHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XHR0cmFuc2Zvcm06IGJhY2t1cERldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJyxcblx0XHR9KTtcblxuXHRcdC8vIENvbGxhcHNlIHJvdGF0aW9uIGJlaGF2aW9yXG5cdFx0YmFja3VwRGV0YWlscy5vbnRvZ2dsZSA9ICgpID0+IHtcblx0XHRiYWNrdXBWdkljb24uc3R5bGUudHJhbnNmb3JtID0gYmFja3VwRGV0YWlscy5vcGVuID8gJ3JvdGF0ZSgwZGVnKScgOiAncm90YXRlKDE4MGRlZyknO1xuXHRcdH07XG5cblx0XHQvLyAyKSBCb2R5XG5cdFx0Y29uc3QgYmFja3VwQm9keSA9IGJhY2t1cERldGFpbHMuY3JlYXRlRGl2KHsgY2xzOiAndmstc2VjdGlvbi1ib2R5JyB9KTtcblx0XHRiYWNrdXBCb2R5LnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzFlbSc7XG5cblx0XHRuZXcgU2V0dGluZyhiYWNrdXBCb2R5KVxuXHRcdC5zZXROYW1lKCdBdXRvLUJhY2t1cCBCZWZvcmUgVXBkYXRlJylcblx0XHQuc2V0RGVzYygnQ3JlYXRlIGEgZnVsbCAuemlwIG9mIHRoZSB2YXVsdCBiZWZvcmUgYXBwbHlpbmcgdmVyc2lvbiB1cGRhdGVzLiBGb3JjZSB1cGRhdGVzIHdpbGwgb25seSBiYWNrIHVwIHRoZSBmaWxlcyB0aGF0IHdpbGwgYmUgbW9kaWZpZWQgb3IgcmVtb3ZlZC4nKVxuXHRcdC5hZGRUb2dnbGUodCA9PlxuXHRcdFx0dFxuXHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9CYWNrdXBCZWZvcmVVcGRhdGUpXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgdiA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9CYWNrdXBCZWZvcmVVcGRhdGUgPSB2O1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdG5ldyBTZXR0aW5nKGJhY2t1cEJvZHkpXG5cdFx0LnNldE5hbWUoJ01hbnVhbCBCYWNrdXAnKVxuXHRcdC5zZXREZXNjKCdJbW1lZGlhdGVseSBjcmVhdGUgYSB6aXAgYmFja3VwIG9mIHlvdXIgdmF1bHQnKVxuXHRcdC5hZGRCdXR0b24oYiA9PlxuXHRcdFx0YlxuXHRcdFx0LnNldEJ1dHRvblRleHQoJ0JhY2t1cCBWYXVsdCBOb3cnKVxuXHRcdFx0LnNldEN0YSgpXG5cdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHBhdGggPSBhd2FpdCB0aGlzLnBsdWdpbi5iYWNrdXBNYW5hZ2VyLmJhY2t1cFZhdWx0VG9aaXAoJ21hbnVhbCcpO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBCYWNrdXAgY3JlYXRlZDogJHtwYXRofWApO1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdFx0bmV3IFNldHRpbmcoYmFja3VwQm9keSlcblx0XHQuc2V0TmFtZSgnT3BlbiBCYWNrdXBzIEZvbGRlcicpXG5cdFx0LnNldERlc2MoJ09wZW4gdGhlIGJhY2t1cHMgZm9sZGVyIG9uIGRpc2suIE1hY09TOiBDYW50IHNlZSBpdD8gSGl0IFNoaWZ0K0NtZCsocGVyaW9kKS4nKVxuXHRcdC5hZGRCdXR0b24oYiA9PlxuXHRcdCAgYlxuXHRcdFx0LnNldEJ1dHRvblRleHQoJ09wZW4gRm9sZGVyJylcblx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdCAgdHJ5IHtcblxuXHRcdFx0XHRjb25zdCB2YXVsdEJhc2VQYXRoOiBzdHJpbmcgPSAodGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIgYXMgYW55KS5nZXRCYXNlUGF0aCgpO1xuXG5cdFx0XHRcdGNvbnN0IGJhY2t1cEZvbGRlclBhdGggPSBwYXRoLmpvaW4oXG5cdFx0XHRcdCAgdmF1bHRCYXNlUGF0aCxcblx0XHRcdFx0ICAnLnZhdWx0LWJhY2t1cHMnXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Y29uc3QgeyBzaGVsbCB9ID0gKHdpbmRvdyBhcyBhbnkpLnJlcXVpcmUoJ2VsZWN0cm9uJyk7XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNoZWxsLm9wZW5QYXRoKGJhY2t1cEZvbGRlclBhdGgpO1xuXHRcdFx0XHRpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycgJiYgcmVzdWx0Lmxlbmd0aCA+IDApIHtcblx0XHRcdFx0ICBjb25zb2xlLmVycm9yKCdcdTI3NEMgc2hlbGwub3BlblBhdGggZXJyb3I6JywgcmVzdWx0KTtcblx0XHRcdFx0ICBuZXcgTm90aWNlKCdDb3VsZCBub3Qgb3BlbiBiYWNrdXBzIGZvbGRlci4gU2VlIGNvbnNvbGUuJyk7XG5cdFx0XHRcdH1cblx0XHRcdCAgfSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1x1Mjc0QyBDb3VsZCBub3Qgb3BlbiBiYWNrdXBzIGZvbGRlcjonLCBlcnIpO1xuXHRcdFx0XHRuZXcgTm90aWNlKCdDb3VsZCBub3Qgb3BlbiBiYWNrdXBzIGZvbGRlci4gU2VlIGNvbnNvbGUuJyk7XG5cdFx0XHQgIH1cblx0XHRcdH0pXG5cdFx0KTtcblx0XHRiYWNrdXBCb2R5LmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0XHRhdHRyOiB7XG5cdFx0XHQgIHN0eWxlOiAnYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpOyBtYXJnaW4tdG9wOiAxLjVlbTsnXG5cdFx0XHR9XG5cdFx0ICB9KTtcblxuXG5cdFx0ICBcblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgQ1VTVE9NIFVQREFURVMgU0VDVElPTiBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjb25zdCBjdXN0b21pemF0aW9uRGV0YWlscyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkZXRhaWxzJywgeyBjbHM6ICd2ay1zZWN0aW9uJyB9KTtcblxuXHRcdGNvbnN0IGN1c3RvbWl6YXRpb25TdW1tYXJ5ID0gY3VzdG9taXphdGlvbkRldGFpbHMuY3JlYXRlRWwoJ3N1bW1hcnknLCB7IGNsczogJ3ZrLXNlY3Rpb24taGVhZGVyJyB9KTtcblxuXHRcdE9iamVjdC5hc3NpZ24oY3VzdG9taXphdGlvblN1bW1hcnkuc3R5bGUsIHtcblx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0ZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG5cdFx0YWxpZ25JdGVtczogJ2ZsZXgtc3RhcnQnLFxuXHRcdHBhZGRpbmc6ICcwLjVlbSAwJyxcblx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHR9KTtcblxuXHRcdGNvbnN0IHRpdGxlUm93ID0gY3VzdG9taXphdGlvblN1bW1hcnkuY3JlYXRlRGl2KHtcblx0XHRhdHRyOiB7XG5cdFx0XHRzdHlsZTogYFxuXHRcdFx0ZGlzcGxheTogZmxleDtcblx0XHRcdHdpZHRoOiAxMDAlO1xuXHRcdFx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuXHRcdFx0YCxcblx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgY3VzdG9taXphdGlvblRpdGxlQmxvY2sgPSB0aXRsZVJvdy5jcmVhdGVEaXYoe1xuXHRcdGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOycgfVxuXHRcdH0pO1xuXG5cdFx0Y29uc3QgaDUgPSBjdXN0b21pemF0aW9uVGl0bGVCbG9jay5jcmVhdGVFbCgnaDUnKTtcblx0XHRoNS5hcHBlbmRUZXh0KCdDdXN0b20gRmlsZSBNYW5hZ2VtZW50ICcpO1xuXG5cdFx0Y3VzdG9taXphdGlvblRpdGxlQmxvY2suY3JlYXRlRWwoJ2RpdicsIHtcblx0XHR0ZXh0OiAnU2tpcCB1cGRhdGVzIG9uIGNlcnRhaW4gZmlsZXMgb3IgcmVtYXAgcmVsb2NhdGVkIFRvb2xraXQgZmlsZXMgc28gdGhleSBjYW4gdXBkYXRlLicsXG5cdFx0Y2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcblx0XHRhdHRyOiB7IHN0eWxlOiAnbWFyZ2luLXRvcDogMC4yNWVtOycgfSxcblx0XHR9KTtcblxuXHRcdGNvbnN0IGN1c3RvbVZ2SWNvbiA9IHRpdGxlUm93LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnVlYnLCBjbHM6ICd2ay10b2dnbGUtaWNvbicgfSk7XG5cblx0XHRPYmplY3QuYXNzaWduKGN1c3RvbVZ2SWNvbi5zdHlsZSwge1xuXHRcdGZvbnRXZWlnaHQ6ICdib2xkJyxcblx0XHR0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDAuMnMgZWFzZScsXG5cdFx0dHJhbnNmb3JtT3JpZ2luOiAnNTAlIDUwJScsXG5cdFx0dXNlclNlbGVjdDogJ25vbmUnLFxuXHRcdHRyYW5zZm9ybTogY3VzdG9taXphdGlvbkRldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJyxcblx0XHR9KTtcblxuXHRcdGN1c3RvbWl6YXRpb25EZXRhaWxzLm9udG9nZ2xlID0gKCkgPT4ge1xuXHRcdGN1c3RvbVZ2SWNvbi5zdHlsZS50cmFuc2Zvcm0gPSBjdXN0b21pemF0aW9uRGV0YWlscy5vcGVuID8gJ3JvdGF0ZSgwZGVnKScgOiAncm90YXRlKDE4MGRlZyknO1xuXHRcdH07XG5cblx0XHRjb25zdCBjdXN0b21pemF0aW9uQm9keVdyYXBwZXIgPSBjdXN0b21pemF0aW9uRGV0YWlscy5jcmVhdGVEaXYoe1xuXHRcdFx0YXR0cjogeyBzdHlsZTogJ3BhZGRpbmctbGVmdDogMWVtOyBwYWRkaW5nLXJpZ2h0OiAxZW07JyB9XG5cdFx0ICB9KTtcblx0XHQgIGNvbnN0IGN1c3RvbWl6YXRpb25Cb2R5ID0gY3VzdG9taXphdGlvbkJvZHlXcmFwcGVyLmNyZWF0ZURpdih7IGNsczogJ3ZrLXNlY3Rpb24tYm9keScgfSk7XG5cblxuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwIFNLSVAtTElTVCBQQU5FTCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblxuXHRcdGNvbnN0IHNraXBTZWN0aW9uID0gY3VzdG9taXphdGlvbkJvZHkuY3JlYXRlRGl2KCk7XG5cblx0XHQvLyAxLiBDcmVhdGUgc2V0dGluZyBibG9jayAobWF0Y2hlcyBPYnNpZGlhbiBuYXRpdmUgVUkgbGF5b3V0KVxuXHRcdGNvbnN0IHNldHRpbmdJdGVtID0gc2tpcFNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtJyB9KTtcblxuXHRcdC8vIDIuIExlZnQgY29sdW1uOiB0aXRsZSArIGRlc2NyaXB0aW9uXG5cdFx0Y29uc3QgaW5mbyA9IHNldHRpbmdJdGVtLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbS1pbmZvJyB9KTtcblx0XHRpbmZvLmNyZWF0ZURpdih7IHRleHQ6ICdTa2lwIFRvb2xraXQgSXRlbXMnLCBjbHM6ICdzZXR0aW5nLWl0ZW0tbmFtZScgfSk7XG5cdFx0aW5mby5jcmVhdGVEaXYoe1xuXHRcdHRleHQ6ICdGaWxlcyBsaXN0ZWQgaGVyZSB3aWxsIGJlIGlnbm9yZWQgZHVyaW5nIHRvb2xraXQgdXBkYXRlcy4nLFxuXHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXG5cdFx0fSk7XG5cblx0XHQvLyAzLiBSaWdodCBjb2x1bW46IGRyb3Bkb3duICsgYnV0dG9uXG5cdFx0Y29uc3QgY29udHJvbCA9IHNldHRpbmdJdGVtLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmctaXRlbS1jb250cm9sJyB9KTtcblxuXHRcdGNvbnN0IGRyb3Bkb3duID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KGNvbnRyb2wpO1xuXHRcdGRyb3Bkb3duLnNlbGVjdEVsLnN0eWxlLm1pbldpZHRoID0gJzIyMHB4Jztcblx0XHRkcm9wZG93bi5hZGRPcHRpb24oJycsICdTZWxlY3QgYW4gaXRlbVx1MjAyNicpO1xuXHRcdHRoaXMucGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXNcblx0XHQuZmlsdGVyKGYgPT4gIWYub3B0aW9uYWwpXG5cdFx0LmZvckVhY2goZiA9PiBkcm9wZG93bi5hZGRPcHRpb24oZi5wYXRoLCBmLmRpc3BsYXlOYW1lID8/IGYucGF0aC5zcGxpdCgnLycpLnBvcCgpISkpO1xuXHRcdHRoaXMucGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVyc1xuXHRcdC5maWx0ZXIoZiA9PiAhZi5vcHRpb25hbClcblx0XHQuZm9yRWFjaChmID0+IGRyb3Bkb3duLmFkZE9wdGlvbihmLnBhdGgsIChmLmRpc3BsYXlOYW1lID8/IGYucGF0aC5zcGxpdCgnLycpLnBvcCgpISkgKyAnLyAoZm9sZGVyKScpKTtcblxuXHRcdG5ldyBCdXR0b25Db21wb25lbnQoY29udHJvbClcblx0XHQuc2V0QnV0dG9uVGV4dCgnQWRkJylcblx0XHQuc2V0Q3RhKClcblx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBrZXkgPSBkcm9wZG93bi5nZXRWYWx1ZSgpO1xuXHRcdFx0aWYgKCFrZXkpIHJldHVybiBuZXcgTm90aWNlKCdQaWNrIHNvbWV0aGluZyB0byBza2lwLicpO1xuXHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5zb21lKGMgPT4gYy5tYW5pZmVzdEtleSA9PT0ga2V5KSkge1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMucHVzaCh7IHZhdWx0UGF0aDoga2V5LCBtYW5pZmVzdEtleToga2V5LCBkb1VwZGF0ZTogZmFsc2UgfSk7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdHJlbmRlclNraXBUYWJsZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gNC4gVGFibGUgd3JhcHBlciBmb3Igc2tpcHBlZCBpdGVtc1xuXHRcdGNvbnN0IHNraXBUYWJsZVdyYXBwZXIgPSBza2lwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICd2ay10YWJsZS13cmFwcGVyJywgYXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6MC43NWVtJyB9IH0pO1xuXG5cdFx0Y29uc3QgcmVuZGVyU2tpcFRhYmxlID0gKCkgPT4ge1xuXHRcdHNraXBUYWJsZVdyYXBwZXIuZW1wdHkoKTtcblxuXHRcdGNvbnN0IGl0ZW1zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmlsdGVyKGMgPT4gIWMuZG9VcGRhdGUpO1xuXG5cdFx0aWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Ly8gTm8gdGFibGUgaWYgbm90aGluZyB0byBzaG93IFx1MjAxNCBqdXN0IGFuIGVtcHR5IHN0YXRlIG1lc3NhZ2Vcblx0XHRcdGNvbnN0IGVtcHR5TXNnID0gc2tpcFRhYmxlV3JhcHBlci5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnTm8gaXRlbXMgc2tpcHBlZC4nIH0pO1xuXHRcdFx0ZW1wdHlNc2cuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG5cdFx0XHRlbXB0eU1zZy5zdHlsZS5vcGFjaXR5ID0gJzAuNic7XG5cdFx0XHRlbXB0eU1zZy5zdHlsZS5wYWRkaW5nID0gJzAuNWVtJztcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBSZW5kZXIgdGFibGUgb25seSBpZiBpdGVtcyBleGlzdFxuXHRcdGNvbnN0IHRhYmxlID0gc2tpcFRhYmxlV3JhcHBlci5jcmVhdGVFbCgndGFibGUnLCB7IGNsczogJ3NldHRpbmctdGFibGUnIH0pO1xuXG5cdFx0Y29uc3QgaGVhZGVyID0gdGFibGUuY3JlYXRlVEhlYWQoKS5pbnNlcnRSb3coKTtcblx0XHRoZWFkZXIuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gJ1NraXBwZWQgRmlsZXMvRm9sZGVycyc7XG5cblx0XHRjb25zdCBib2R5ID0gdGFibGUuY3JlYXRlVEJvZHkoKTtcblxuXHRcdGl0ZW1zLmZvckVhY2goKGVudHJ5KSA9PiB7XG5cdFx0XHRjb25zdCByb3cgPSBib2R5Lmluc2VydFJvdygpO1xuXHRcdFx0Y29uc3QgY29udGVudENlbGwgPSByb3cuaW5zZXJ0Q2VsbCgpO1xuXHRcdFx0Y29udGVudENlbGwuY29sU3BhbiA9IDE7XG5cdFx0XHRjb250ZW50Q2VsbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuXHRcdFx0Y29udGVudENlbGwuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7XG5cdFx0XHRjb250ZW50Q2VsbC5zdHlsZS5wYWRkaW5nTGVmdCA9ICc0ZW0nO1xuXHRcdFx0Y29udGVudENlbGwuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuXHRcdFx0Y29udGVudENlbGwuc3R5bGUuZ2FwID0gJzFlbSc7XG5cdFx0XHRjb250ZW50Q2VsbC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuXG5cdFx0XHRjb250ZW50Q2VsbC5jcmVhdGVTcGFuKHsgdGV4dDogZW50cnkubWFuaWZlc3RLZXkgfSk7XG5cblx0XHRcdGNvbnN0IHJlbW92ZUxpbmsgPSBjb250ZW50Q2VsbC5jcmVhdGVFbCgnYScsIHsgdGV4dDogJ1JlbW92ZSBlbnRyeScsIGhyZWY6ICcjJyB9KTtcblx0XHRcdHJlbW92ZUxpbmsuc3R5bGUuZm9udFNpemUgPSAnMC44ZW0nO1xuXHRcdFx0cmVtb3ZlTGluay5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LWZhaW50KSc7XG5cdFx0XHRyZW1vdmVMaW5rLnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ3VuZGVybGluZSc7XG5cdFx0XHRyZW1vdmVMaW5rLm9uY2xpY2sgPSBhc3luYyAoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMucmVtb3ZlKGVudHJ5KTtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0cmVuZGVyU2tpcFRhYmxlKCk7XG5cdFx0XHR9O1xuXHRcdH0pO1xuXHRcdH07XG5cblx0XHRyZW5kZXJTa2lwVGFibGUoKTtcblxuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMCBTcGFjZXIgJiBEaXZpZGVyIEJlZm9yZSBSZW1hcCBQYW5lbCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcblx0XHRjdXN0b21pemF0aW9uQm9keS5jcmVhdGVFbCgnZGl2Jywge1xuXHRcdFx0YXR0cjogeyBzdHlsZTogJ2hlaWdodDogMWVtOyBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvcik7IG1hcmdpbjogMWVtIDA7JyB9XG5cdFx0fSk7XG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDAgUkVNQVAgUEFORUwgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cdFx0Y29uc3QgcmVtYXBTZWN0aW9uID0gY3VzdG9taXphdGlvbkJvZHkuY3JlYXRlRGl2KCk7XG5cblxuXHRcdC8vIFNldHRpbmctc3R5bGUgd3JhcHBlclxuXHRcdGNvbnN0IHJlbWFwU2V0dGluZyA9IHJlbWFwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0nIH0pO1xuXG5cdFx0Ly8gTGVmdDogaGVhZGVyICsgZGVzY3JpcHRpb24gKHVuY2hhbmdlZCBzdHlsZSlcblx0XHRjb25zdCByZW1hcEluZm8gPSByZW1hcFNldHRpbmcuY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZy1pdGVtLWluZm8nIH0pO1xuXHRcdHJlbWFwSW5mby5jcmVhdGVEaXYoeyB0ZXh0OiAnUmVtYXAgRmlsZSBQYXRocycsIGNsczogJ3NldHRpbmctaXRlbS1uYW1lJyB9KTtcblx0XHRyZW1hcEluZm8uY3JlYXRlRGl2KHtcblx0XHRcdHRleHQ6ICdSZW1hcCB0b29sa2l0IGZpbGVzIHZhdWx0IHBhdGhzIGlmIHlvdSBjaG9zZSB0byBtb3ZlIGFueXRoaW5nLiBNb3ZpbmcgZmlsZXMgd2l0aG91dCByZW1hcHBpbmcgd2lsbCByZXN1bHQgaW4gZHVwbGljYXRlIGFuZC9vciBvdXQtb2YtZGF0ZSBmaWxlcyBhZnRlciB1cGRhdGUuJyxcblx0XHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbidcblx0XHR9KTtcblxuXHRcdC8vIE5ldyBmdWxsLXdpZHRoIGJsb2NrIGJlbG93IGZvciBjb250cm9sc1xuXHRcdGNvbnN0IHJlbWFwQ29udHJvbEJsb2NrID0gcmVtYXBTZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ3ZrLWlubGluZS1hZGQtY29udHJvbHMnIH0pO1xuXHRcdHJlbWFwQ29udHJvbEJsb2NrLnN0eWxlLmZsZXhXcmFwID0gJ3dyYXAnO1xuXHRcdHJlbWFwQ29udHJvbEJsb2NrLnN0eWxlLm1hcmdpblRvcCA9ICcwLjVlbSc7XG5cblx0XHRsZXQgcmVtYXBEcm9wOiBEcm9wZG93bkNvbXBvbmVudDtcblx0XHRsZXQgcmVtYXBJbnB1dDogSFRNTElucHV0RWxlbWVudDtcblxuXHRcdHJlbWFwRHJvcCA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChyZW1hcENvbnRyb2xCbG9jayk7XG5cdFx0cmVtYXBEcm9wLnNlbGVjdEVsLnN0eWxlLm1pbldpZHRoID0gJzIyMHB4Jztcblx0XHRyZW1hcERyb3AuYWRkT3B0aW9uKCcnLCAnU2VsZWN0IGFuIGl0ZW1cdTIwMjYnKTtcblx0XHR0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzLmZvckVhY2goZiA9PlxuXHRcdFx0cmVtYXBEcm9wLmFkZE9wdGlvbihmLnBhdGgsIGYuZGlzcGxheU5hbWUgPz8gZi5wYXRoLnNwbGl0KCcvJykucG9wKCkhKVxuXHRcdCk7XG5cdFx0dGhpcy5wbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzLmZvckVhY2goZiA9PlxuXHRcdFx0cmVtYXBEcm9wLmFkZE9wdGlvbihmLnBhdGgsIChmLmRpc3BsYXlOYW1lID8/IGYucGF0aC5zcGxpdCgnLycpLnBvcCgpISkgKyAnLyAoZm9sZGVyKScpXG5cdFx0KTtcblxuXHRcdGNvbnN0IHNlYXJjaFdyYXBwZXIgPSByZW1hcENvbnRyb2xCbG9jay5jcmVhdGVEaXYoKTtcblx0XHRjb25zdCBzZWFyY2hDb21wb25lbnQgPSBuZXcgU2VhcmNoQ29tcG9uZW50KHNlYXJjaFdyYXBwZXIpO1xuXHRcdHNlYXJjaENvbXBvbmVudC5zZXRQbGFjZWhvbGRlcignU2VhcmNoIHZhdWx0IHBhdGhcdTIwMjYnKTtcblx0XHRuZXcgRmlsZVBhdGhTdWdnZXN0ZXIodGhpcy5hcHAsIHNlYXJjaENvbXBvbmVudC5pbnB1dEVsKTtcblx0XHRyZW1hcElucHV0ID0gc2VhcmNoQ29tcG9uZW50LmlucHV0RWw7XG5cblx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KHJlbWFwQ29udHJvbEJsb2NrKVxuXHRcdFx0LnNldEJ1dHRvblRleHQoJ0FkZCBSZW1hcCcpXG5cdFx0XHQuc2V0Q3RhKClcblx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0Y29uc3Qga2V5ID0gcmVtYXBEcm9wLmdldFZhbHVlKCk7XG5cdFx0XHRcdGNvbnN0IHZwID0gcmVtYXBJbnB1dC52YWx1ZS50cmltKCk7XG5cdFx0XHRcdGlmICgha2V5IHx8ICF2cCkgcmV0dXJuIG5ldyBOb3RpY2UoJ1NlbGVjdCBhbiBpdGVtIGFuZCBlbnRlciBhIHZhdWx0IHBhdGguJyk7XG5cdFx0XHRcdGlmICghdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHZwKSkgcmV0dXJuIG5ldyBOb3RpY2UoJ1ZhdWx0IHBhdGggbm90IGZvdW5kLicpO1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbHRlcihjID0+IGMubWFuaWZlc3RLZXkgIT09IGtleSk7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLnB1c2goeyBtYW5pZmVzdEtleToga2V5LCB2YXVsdFBhdGg6IHZwLCBkb1VwZGF0ZTogdHJ1ZSB9KTtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdHJlbWFwSW5wdXQudmFsdWUgPSAnJztcblx0XHRcdFx0cmVtYXBEcm9wLnNldFZhbHVlKCcnKTtcblx0XHRcdFx0cmVuZGVyUmVtYXBQYW5lbCgpO1xuXHRcdFx0fSk7XG5cblxuXHRcdC8vIDQuIFRhYmxlIHdyYXBwZXJcblx0XHRjb25zdCByZW1hcFRhYmxlV3JhcHBlciA9IHJlbWFwU2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICd2ay10YWJsZS13cmFwcGVyJywgYXR0cjogeyBzdHlsZTogJ21hcmdpbi10b3A6IDAuNzVlbScgfSB9KTtcblxuXHRcdGNvbnN0IHJlbmRlclJlbWFwUGFuZWwgPSAoKSA9PiB7XG5cdFx0cmVtYXBUYWJsZVdyYXBwZXIuZW1wdHkoKTtcblxuXHRcdGNvbnN0IHRvUmVtYXAgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5maWx0ZXIoYyA9PiBjLmRvVXBkYXRlKTtcblxuXHRcdGlmICh0b1JlbWFwLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0Y29uc3QgZW1wdHlNc2cgPSByZW1hcFRhYmxlV3JhcHBlci5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnTm8gY3VzdG9tIHBhdGhzIGRlZmluZWQuJyB9KTtcblx0XHRcdGVtcHR5TXNnLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuXHRcdFx0ZW1wdHlNc2cuc3R5bGUub3BhY2l0eSA9ICcwLjYnO1xuXHRcdFx0ZW1wdHlNc2cuc3R5bGUucGFkZGluZyA9ICcwLjVlbSc7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgdGFibGUgPSByZW1hcFRhYmxlV3JhcHBlci5jcmVhdGVFbCgndGFibGUnLCB7IGNsczogJ3NldHRpbmctdGFibGUnIH0pO1xuXHRcdGNvbnN0IGhlYWQgPSB0YWJsZS5jcmVhdGVUSGVhZCgpLmluc2VydFJvdygpO1xuXHRcdFsnVG9vbGl0IEl0ZW0nLCAnTmV3IFZhdWx0IFBhdGgnLCAnJ10uZm9yRWFjaCh0eHQgPT4gaGVhZC5pbnNlcnRDZWxsKCkudGV4dENvbnRlbnQgPSB0eHQpO1xuXG5cdFx0Y29uc3QgYm9keSA9IHRhYmxlLmNyZWF0ZVRCb2R5KCk7XG5cdFx0dG9SZW1hcC5mb3JFYWNoKGVudHJ5ID0+IHtcblx0XHRcdGNvbnN0IHJvdyA9IGJvZHkuaW5zZXJ0Um93KCk7XG5cblx0XHRcdC8vIE1hbmlmZXN0IEtleVxuXHRcdFx0cm93Lmluc2VydENlbGwoKS50ZXh0Q29udGVudCA9IGVudHJ5Lm1hbmlmZXN0S2V5O1xuXG5cdFx0XHQvLyBWYXVsdCBQYXRoXG5cdFx0XHRyb3cuaW5zZXJ0Q2VsbCgpLnRleHRDb250ZW50ID0gZW50cnkudmF1bHRQYXRoO1xuXG5cdFx0XHQvLyBSZW1vdmUgbGlua1xuXHRcdFx0Y29uc3QgcmVtb3ZlQ2VsbCA9IHJvdy5pbnNlcnRDZWxsKCk7XG5cdFx0XHRjb25zdCByZW1vdmVMaW5rID0gcmVtb3ZlQ2VsbC5jcmVhdGVFbCgnYScsIHsgdGV4dDogJ1JlbW92ZSBlbnRyeScsIGhyZWY6ICcjJyB9KTtcblx0XHRcdHJlbW92ZUxpbmsuc3R5bGUuZm9udFNpemUgPSAnMC44ZW0nO1xuXHRcdFx0cmVtb3ZlTGluay5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LWZhaW50KSc7XG5cdFx0XHRyZW1vdmVMaW5rLnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ3VuZGVybGluZSc7XG5cdFx0XHRyZW1vdmVMaW5rLm9uY2xpY2sgPSBhc3luYyAoZSkgPT4ge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMucmVtb3ZlKGVudHJ5KTtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0cmVuZGVyUmVtYXBQYW5lbCgpO1xuXHRcdFx0fTtcblx0XHR9KTtcblx0XHR9O1xuXG5cdFx0cmVuZGVyUmVtYXBQYW5lbCgpO1xuXG5cdFx0Ly8gQWRkIGRpdmlkZXIgaW5zaWRlIHRoZSBib2R5LCBhdCB0aGUgdG9wXG5cdFx0Y3VzdG9taXphdGlvbkJvZHkuY3JlYXRlRWwoJ2RpdicsIHtcblx0XHRcdGF0dHI6IHtcblx0XHRcdHN0eWxlOiAnYm9yZGVyLXRvcDogMXB4IHNvbGlkIHZhcigtLWRpdmlkZXItY29sb3IpOyBtYXJnaW46IDAuNWVtIDA7J1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwIEhJR0hMSUdIVCBTRUNUSU9OIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdGNvbnN0IGhpZ2hsaWdodERldGFpbHMgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGV0YWlscycsIHsgY2xzOiAndmstc2VjdGlvbicgfSk7XG5cblx0XHQvLyAxKSBCdWlsZCB0aGUgPHN1bW1hcnk+IGZvciBoaWdobGlnaHQsIG1hdGNoaW5nIGJhY2t1cCBzdHlsZTpcblx0XHRjb25zdCBoaWdobGlnaHRTdW1tYXJ5ID0gaGlnaGxpZ2h0RGV0YWlscy5jcmVhdGVFbCgnc3VtbWFyeScsIHsgY2xzOiAndmstc2VjdGlvbi1oZWFkZXInIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oaGlnaGxpZ2h0U3VtbWFyeS5zdHlsZSwge1xuXHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcblx0XHRhbGlnbkl0ZW1zOiAnc3RyZXRjaCcsXG5cdFx0cGFkZGluZzogJzAuNWVtIDAnLFxuXHRcdGJvcmRlckJvdHRvbTogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG5cdFx0Y3Vyc29yOiAncG9pbnRlcicsXG5cdFx0fSk7XG5cblx0XHQvLyAxYSkgQ3JlYXRlIHRoZSB0aXRsZSArIGljb24gcm93IChmbGV4IHJvdyBqdXN0aWZ5IHNwYWNlLWJldHdlZW4pOlxuXHRcdGNvbnN0IGhpZ2hsaWdodFRpdGxlUm93ID0gaGlnaGxpZ2h0U3VtbWFyeS5jcmVhdGVEaXYoe1xuXHRcdGF0dHI6IHtcblx0XHRcdHN0eWxlOiBgXG5cdFx0XHRkaXNwbGF5OiBmbGV4O1xuXHRcdFx0anVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuXHRcdFx0YWxpZ24taXRlbXM6IGZsZXgtZW5kO1xuXHRcdFx0YCxcblx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gMWIpIExlZnQgc2lkZTogdGl0bGUgKyBkZXNjcmlwdGlvblxuXHRcdGNvbnN0IGhsVGl0bGVCbG9jayA9IGhpZ2hsaWdodFRpdGxlUm93LmNyZWF0ZURpdih7XG5cdFx0YXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47JyB9XG5cdFx0fSk7XG5cdFx0aGxUaXRsZUJsb2NrLmNyZWF0ZUVsKCdoNScsIHsgdGV4dDogJ0ZpbGUgSGlnaGxpZ2h0cycgfSk7XG5cdFx0aGxUaXRsZUJsb2NrLmNyZWF0ZUVsKCdkaXYnLCB7XG5cdFx0dGV4dDogJ1RvZ2dsZSBvbi9vZmYgdGhlIGhpZ2hsaWdodGluZyBvZiBUb29sa2l0LXNwZWNpZmljIGZpbGVzLiBBbHNvIG1ha2UgdGhlIGhpZ2hsaWdodHMgY29vbCBjb2xvcnMuJyxcblx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxuXHRcdGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tdG9wOiAwLjI1ZW07JyB9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gMWMpIFJpZ2h0IHNpZGU6IGNvbGxhcHNpbmcgYXJyb3cvaWNvblxuXHRcdGNvbnN0IGhsVG9nZ2xlSWNvbiA9IGhpZ2hsaWdodFRpdGxlUm93LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnVlYnLCBjbHM6ICd2ay10b2dnbGUtaWNvbicgfSk7XG5cdFx0T2JqZWN0LmFzc2lnbihobFRvZ2dsZUljb24uc3R5bGUsIHtcblx0XHRmb250V2VpZ2h0OiAnYm9sZCcsXG5cdFx0ZGlzcGxheTogJ2lubGluZS1ibG9jaycsXG5cdFx0dHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAwLjJzIGVhc2UnLFxuXHRcdHRyYW5zZm9ybU9yaWdpbjogJzUwJSA1MCUnLFxuXHRcdHVzZXJTZWxlY3Q6ICdub25lJyxcblx0XHR0cmFuc2Zvcm06IGhpZ2hsaWdodERldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJyxcblx0XHR9KTtcblxuXHRcdC8vIDFkKSBNYWtlIHRoZSBpY29uIHJvdGF0ZSB3aGVuIHRoZSA8ZGV0YWlscz4gb3BlbnMvY2xvc2VzOlxuXHRcdGhpZ2hsaWdodERldGFpbHMub250b2dnbGUgPSAoKSA9PiB7XG5cdFx0aGxUb2dnbGVJY29uLnN0eWxlLnRyYW5zZm9ybSA9IGhpZ2hsaWdodERldGFpbHMub3BlbiA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHR9O1xuXG5cdFx0Ly8gMikgQ3JlYXRlIHRoZSBib2R5IGNvbnRhaW5lciAoaW5kZW50ZWQsIHNhbWUgYXMgYmFja3VwKVxuXHRcdGNvbnN0IGhpZ2hsaWdodEJvZHkgPSBoaWdobGlnaHREZXRhaWxzLmNyZWF0ZURpdih7IGNsczogJ3ZrLXNlY3Rpb24tYm9keScgfSk7XG5cdFx0aGlnaGxpZ2h0Qm9keS5zdHlsZS5wYWRkaW5nTGVmdCA9ICcxZW0nO1xuXG5cdFx0Ly8gMykgXHUyMDFDRW5hYmxlIEhpZ2hsaWdodFx1MjAxRCB0b2dnbGUgYXMgYSBTZXR0aW5nIGluc2lkZSBoaWdobGlnaHRCb2R5OlxuXHRcdG5ldyBTZXR0aW5nKGhpZ2hsaWdodEJvZHkpXG5cdFx0LnNldE5hbWUoJ0VuYWJsZSBGaWxlL0ZvbGRlciBIaWdobGlnaHRpbmcnKVxuXHRcdC5zZXREZXNjKCdBbnkgZmlsZS9mb2xkZXIgaW5zdGFsbGVkIGJ5IFZWdW5kZXJsb3JlIHdpbGwgaGF2ZSB0aGlzIGJhY2tncm91bmQuJylcblx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG5cdFx0XHR0b2dnbGVcblx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRFbmFibGVkKVxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIChlbmFibGVkKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodEVuYWJsZWQgPSBlbmFibGVkO1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdFx0XHRpZiAoZW5hYmxlZCkge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5lbmFibGVIaWdobGlnaHQoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5wbHVnaW4uZGlzYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVcdTIwMTByZW5kZXIgdGhlIGNvbG9yIHBpY2tlcnMgd2hlbmV2ZXIgdGhlIHRvZ2dsZSBjaGFuZ2VzOlxuXHRcdFx0XHRyZW5kZXJIaWdobGlnaHRDb2xvclBpY2tlcnMoKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gNCkgV3JhcHBlciBmb3IgTGlnaHQvRGFyayBjb2xvciBwaWNrZXJzOlxuXHRcdGNvbnN0IGNvbG9yUGlja2VyV3JhcHBlciA9IGhpZ2hsaWdodEJvZHkuY3JlYXRlRGl2KCk7XG5cblx0XHQvLyA1KSBBIGZ1bmN0aW9uIHRvIHJlbmRlciBvciBjbGVhciB0aGUgdHdvIENvbG9yUGlja2VyIHNldHRpbmdzOlxuXHRcdGNvbnN0IHJlbmRlckhpZ2hsaWdodENvbG9yUGlja2VycyA9ICgpID0+IHtcblx0XHRjb2xvclBpY2tlcldyYXBwZXIuZW1wdHkoKTtcblxuXHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlnaGxpZ2h0RW5hYmxlZCkge1xuXHRcdFx0cmV0dXJuOyAvLyBkbyBub3Qgc2hvdyBwaWNrZXJzIGlmIGhpZ2hsaWdodGluZyBpcyBkaXNhYmxlZFxuXHRcdH1cblxuXHRcdC8vIDVhKSBMaWdodCBtb2RlIGNvbG9yIHBpY2tlclxuXHRcdG5ldyBTZXR0aW5nKGNvbG9yUGlja2VyV3JhcHBlcilcblx0XHRcdC5zZXROYW1lKCdMaWdodCBNb2RlIEhpZ2hsaWdodCBDb2xvcicpXG5cdFx0XHQuc2V0RGVzYygnQ2hvb3NlIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIGZvciBmaWxlcy9mb2xkZXJzIGluIExpZ2h0IG1vZGUuJylcblx0XHRcdC5hZGRDb2xvclBpY2tlcihwaWNrZXIgPT4ge1xuXHRcdFx0cGlja2VyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckxpZ2h0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKG5ld0NvbG9yKSA9PiB7XG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yTGlnaHQgPSBuZXdDb2xvcjtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0Ly8gUmVcdTIwMTBpbmplY3QgQ1NTIHNvIHRoZSBuZXcgY29sb3IgdGFrZXMgZWZmZWN0IGltbWVkaWF0ZWx5OlxuXHRcdFx0XHR0aGlzLnBsdWdpbi5kaXNhYmxlSGlnaGxpZ2h0KCk7XG5cdFx0XHRcdHRoaXMucGx1Z2luLmVuYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0Ly8gNWIpIERhcmsgbW9kZSBjb2xvciBwaWNrZXJcblx0XHRuZXcgU2V0dGluZyhjb2xvclBpY2tlcldyYXBwZXIpXG5cdFx0XHQuc2V0TmFtZSgnRGFyayBNb2RlIEhpZ2hsaWdodCBDb2xvcicpXG5cdFx0XHQuc2V0RGVzYygnQ2hvb3NlIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIGZvciBmaWxlcy9mb2xkZXJzIGluIERhcmsgbW9kZS4nKVxuXHRcdFx0LmFkZENvbG9yUGlja2VyKHBpY2tlciA9PiB7XG5cdFx0XHRwaWNrZXJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZ2hsaWdodENvbG9yRGFyaylcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIChuZXdDb2xvcikgPT4ge1xuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWdobGlnaHRDb2xvckRhcmsgPSBuZXdDb2xvcjtcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0Ly8gUmVcdTIwMTBpbmplY3QgQ1NTIHNvIHRoZSBuZXcgY29sb3IgdGFrZXMgZWZmZWN0IGltbWVkaWF0ZWx5OlxuXHRcdFx0XHR0aGlzLnBsdWdpbi5kaXNhYmxlSGlnaGxpZ2h0KCk7XG5cdFx0XHRcdHRoaXMucGx1Z2luLmVuYWJsZUhpZ2hsaWdodCgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHQvLyA2KSBDYWxsIG9uY2Ugb24gaW5pdGlhbCByZW5kZXIgc28gdGhhdCBpZiBoaWdobGlnaHRFbmFibGVkID09PSB0cnVlLCB0aGUgcGlja2VycyBzaG93IHVwLlxuXHRcdHJlbmRlckhpZ2hsaWdodENvbG9yUGlja2VycygpO1xuXG5cblx0XHQvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSU5JVElBTCBEUkFXIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuXHRcdHJlbmRlclNraXBUYWJsZSgpO1xuXHRcdHJlbmRlclJlbWFwUGFuZWwoKTtcblxuXG5cdFx0Ly9SRU1PVkUgREVNTyBGSUxFU1xuXHRcdC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBSRU1PVkUgREVNTyBGSUxFUyAodXBkYXRlZCkgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG5cbi8vIDEpIENyZWF0ZSBhIFNldHRpbmcgcm93LCBidXQgaW1tZWRpYXRlbHkgc3RyaXAgb2ZmIGl0cyBkZWZhdWx0IHRvcFx1MjAxMGJvcmRlcjpcbmNvbnN0IHJlbW92ZURlbW9TZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xuKHJlbW92ZURlbW9TZXR0aW5nLnNldHRpbmdFbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuYm9yZGVyVG9wID0gJ25vbmUnO1xuXG5yZW1vdmVEZW1vU2V0dGluZ1xuICAuc2V0TmFtZSgnUmVtb3ZlIERlbW8gRmlsZXMnKVxuICAuc2V0RGVzYygnRGVsZXRlIGV2ZXJ5IFx1MjAxQ29wdGlvbmFsXHUyMDFEIGRlbW8gZmlsZSBhbmQgZm9sZGVyIGZyb20geW91ciB2YXVsdC4nKVxuICAuYWRkQnV0dG9uKChidXR0b24pID0+XG4gICAgYnV0dG9uXG4gICAgICAuc2V0QnV0dG9uVGV4dCgnUmVtb3ZlIERlbW8gRmlsZXMnKVxuXG4gICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbmFsRmlsZUVudHJpZXMgPSB0aGlzLnBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbHRlcigoZikgPT4gZi5vcHRpb25hbCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbmFsRm9sZGVyRW50cmllcyA9IHRoaXMucGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5maWx0ZXIoKGYpID0+IGYub3B0aW9uYWwpO1xuXG4gICAgICAgIGNvbnN0IHRvdGFsQ291bnRGaWxlcyA9IG9wdGlvbmFsRmlsZUVudHJpZXMubGVuZ3RoO1xuICAgICAgICBjb25zdCB0b3RhbENvdW50Rm9sZGVycyA9IG9wdGlvbmFsRm9sZGVyRW50cmllcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRvdGFsQ291bnQgPSB0b3RhbENvdW50RmlsZXMgKyB0b3RhbENvdW50Rm9sZGVycztcblxuICAgICAgICBpZiAodG90YWxDb3VudCA9PT0gMCkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIFx1MjAxQ29wdGlvbmFsXHUyMDFEIGRlbW8gZmlsZXMgb3IgZm9sZGVycyB0byByZW1vdmUuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDIpIEFzayBmb3IgY29uZmlybWF0aW9uIGluIGEgc21hbGwgTW9kYWwgLS0tXG4gICAgICAgIGNvbnN0IHVzZXJDb25maXJtZWQgPSBhd2FpdCBuZXcgUHJvbWlzZTxib29sZWFuPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbmZpcm1Nb2RhbCA9IG5ldyBjbGFzcyBleHRlbmRzIE1vZGFsIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvbk9wZW4oKSB7XG4gICAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0NvbmZpcm0gUmVtb3ZhbCcgfSk7XG4gICAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdwJywge1xuICAgICAgICAgICAgICAgIHRleHQ6IGBUaGlzIHdpbGwgcGVybWFuZW50bHkgZGVsZXRlICR7dG90YWxDb3VudEZpbGVzfSBmaWxlKHMpIGFuZCAke3RvdGFsQ291bnRGb2xkZXJzfSBmb2xkZXIocykuIENvbnRpbnVlP2AsXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGNvbnN0IGJ0blJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcbiAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihidG5Sb3cuc3R5bGUsIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdmbGV4LWVuZCcsXG4gICAgICAgICAgICAgICAgZ2FwOiAnMC41ZW0nLFxuICAgICAgICAgICAgICAgIG1hcmdpblRvcDogJzEuNWVtJyxcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgYnRuUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgIGJ0blJvdy5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnWWVzLCBSZW1vdmUnLCBjbHM6ICdtb2QtZGFuZ2VyJyB9KS5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb25DbG9zZSgpIHtcbiAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KHRoaXMuYXBwKTtcblxuICAgICAgICAgIGNvbmZpcm1Nb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghdXNlckNvbmZpcm1lZCkge1xuICAgICAgICAgIHJldHVybjsgLy8gdXNlciBjbGlja2VkIFx1MjAxQ0NhbmNlbFx1MjAxRFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIDMpIERlbGV0ZSBvcHRpb25hbCBmaWxlcyBvbmUgYnkgb25lIC0tLVxuICAgICAgICBsZXQgZmlsZXNEZWxldGVkID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBmaWxlRW50cnkgb2Ygb3B0aW9uYWxGaWxlRW50cmllcykge1xuICAgICAgICAgIC8vIDNhKSBSZXNwZWN0IGFueSByZW1hcHBpbmcgaW4gY3VzdG9tUGF0aHNcbiAgICAgICAgICBjb25zdCBtYXBwZWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocy5maW5kKChjKSA9PiBjLm1hbmlmZXN0S2V5ID09PSBmaWxlRW50cnkua2V5KTtcbiAgICAgICAgICBjb25zdCB2YXVsdFBhdGggPSBtYXBwZWQ/LnZhdWx0UGF0aCA/PyBmaWxlRW50cnkucGF0aDtcblxuICAgICAgICAgIC8vIDNiKSBJZiBpdCBhY3R1YWxseSBleGlzdHMsIHJlbW92ZSBpdFxuICAgICAgICAgIGlmIChhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlbW92ZSh2YXVsdFBhdGgpO1xuICAgICAgICAgICAgICBmaWxlc0RlbGV0ZWQrKztcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZGVsZXRlIG9wdGlvbmFsIGZpbGUgJHt2YXVsdFBhdGh9YCwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0gNCkgRGVsZXRlIG9wdGlvbmFsIGZvbGRlcnMgcmVjdXJzaXZlbHkgLS0tXG4gICAgICAgIGxldCBmb2xkZXJzRGVsZXRlZCA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgZm9sZGVyRW50cnkgb2Ygb3B0aW9uYWxGb2xkZXJFbnRyaWVzKSB7XG4gICAgICAgICAgY29uc3QgbWFwcGVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tUGF0aHMuZmluZCgoYykgPT4gYy5tYW5pZmVzdEtleSA9PT0gZm9sZGVyRW50cnkua2V5KTtcbiAgICAgICAgICBjb25zdCB2YXVsdEZvbGRlclBhdGggPSBtYXBwZWQ/LnZhdWx0UGF0aCA/PyBmb2xkZXJFbnRyeS5wYXRoO1xuXG4gICAgICAgICAgaWYgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHZhdWx0Rm9sZGVyUGF0aCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIC8vIFRoZSBzZWNvbmQgYXJndW1lbnQgYHRydWVgIGVuc3VyZXMgcmVjdXJzaXZlIGRlbGV0ZVxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJtZGlyKHZhdWx0Rm9sZGVyUGF0aCwgdHJ1ZSk7XG4gICAgICAgICAgICAgIGZvbGRlcnNEZWxldGVkKys7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGRlbGV0ZSBvcHRpb25hbCBmb2xkZXIgJHt2YXVsdEZvbGRlclBhdGh9YCwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyAtLS0gNSkgQ2xlYW4gdXAgYW55IFx1MjAxQ2N1c3RvbVBhdGhzXHUyMDFEIGVudHJpZXMgZm9yIG9wdGlvbmFsIGl0ZW1zIC0tLVxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21QYXRocyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbVBhdGhzLmZpbHRlcigoYykgPT4ge1xuICAgICAgICAgIC8vIElmIHRoaXMgbWFwcGluZ1x1MjAxOXMgbWFuaWZlc3RLZXkgd2FzIG9wdGlvbmFsLCBkcm9wIGl0XG4gICAgICAgICAgY29uc3QgaXNPcHRGaWxlID0gb3B0aW9uYWxGaWxlRW50cmllcy5zb21lKChmKSA9PiBmLmtleSA9PT0gYy5tYW5pZmVzdEtleSk7XG4gICAgICAgICAgY29uc3QgaXNPcHRGb2xkZXIgPSBvcHRpb25hbEZvbGRlckVudHJpZXMuc29tZSgoZikgPT4gZi5rZXkgPT09IGMubWFuaWZlc3RLZXkpO1xuICAgICAgICAgIHJldHVybiAhaXNPcHRGaWxlICYmICFpc09wdEZvbGRlcjtcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICAgIC8vIC0tLSA2KSBTaG93IGEgbm90aWNlIGFuZCByZS1yZW5kZXIgdGhlIHNldHRpbmdzIHBhZ2UgLS0tXG4gICAgICAgIG5ldyBOb3RpY2UoYERlbGV0ZWQgJHtmaWxlc0RlbGV0ZWR9IGZpbGUocykgYW5kICR7Zm9sZGVyc0RlbGV0ZWR9IGZvbGRlcihzKS5gKTtcbiAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICB9KVxuICApO1xuXG5cblxuXG5cdFx0LyoqIFx1MjUwMFx1MjUwMFx1MjUwMCBGT09URVIgU0VDVElPTiBcdTI1MDBcdTI1MDBcdTI1MDAgKi9cblx0XHRjb25zdCBmb290ZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nLWl0ZW0nIH0pO1xuXHRcdE9iamVjdC5hc3NpZ24oZm9vdGVyLnN0eWxlLCB7XG5cdFx0Zm9udFNpemU6ICcwLjg1ZW0nLFxuXHRcdGNvbG9yOiAndmFyKC0tdGV4dC1tdXRlZCknLFxuXHRcdG1hcmdpblRvcDogJzJlbScsXG5cdFx0fSk7XG5cdFx0Zm9vdGVyLmNyZWF0ZUVsKCdzcGFuJywge1xuXHRcdFx0dGV4dDogYFZWdW5kZXJsb3JlIFRvb2xraXQgUGx1Z2luIHYke3RoaXMucGx1Z2luLm1hbmlmZXN0LnZlcnNpb259IFx1MjAyMiBgXG5cdFx0fSk7XG5cdFx0Zm9vdGVyLmNyZWF0ZUVsKCdhJywge1xuXHRcdFx0dGV4dDogJ1ZpZXcgb24gR2l0SHViJyxcblx0XHRcdGhyZWY6ICdodHRwczovL2dpdGh1Yi5jb20vc2xhbXdpc2UwMDAxL3Z2dW5kZXJsb3JlLXRvb2xraXQtcGx1Z2luJyxcblx0XHRcdGF0dHI6IHsgdGFyZ2V0OiAnX2JsYW5rJyB9XG5cdFx0fSk7XG5cblx0XHRjb250YWluZXJFbC5zY3JvbGxUb3AgPSBzYXZlZFNjcm9sbFRvcDtcblx0fSkoKTtcblx0fVxuXG5cdGFzeW5jIHVwZGF0ZVZlcnNpb25EaXNwbGF5KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghdGhpcy52ZXJzaW9uVmFsdWVFbCB8fCAhdGhpcy5mb3JjZVdhcm5pbmdFbCkgcmV0dXJuO1xuXHQgIFxuXHRcdC8vIHJlYWQgLnZlcnNpb24uanNvblxuXHRcdGxldCBpbnN0YWxsZWQgPSAnJztcblx0XHR0cnkge1xuXHRcdCAgY29uc3QgdmVyID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIucmVhZCgnLnZlcnNpb24uanNvbicpO1xuXHRcdCAgaW5zdGFsbGVkID0gSlNPTi5wYXJzZSh2ZXIpLnZlcnNpb24gPz8gJyc7XG5cdFx0fSBjYXRjaCB7fVxuXHRcdGNvbnN0IGxhdGVzdCA9ICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXRlc3RUb29sa2l0VmVyc2lvbiA/PyAnJykudHJpbSgpO1xuXHRcdGNvbnN0IGlzTWF0Y2ggPSBpbnN0YWxsZWQgPT09IGxhdGVzdDtcblx0ICBcblx0XHQvLyB1cGRhdGUganVzdCB0aGUgdmVyc2lvbiBzcGFuXG5cdFx0dGhpcy52ZXJzaW9uVmFsdWVFbC50ZXh0Q29udGVudCA9IGluc3RhbGxlZCB8fCAnTm90IGluc3RhbGxlZCc7XG5cdFx0dGhpcy52ZXJzaW9uVmFsdWVFbC5zdHlsZS5jb2xvciA9IGlzTWF0Y2hcblx0XHQgID8gJ3ZhcigtLXRleHQtc3VjY2VzcyknXG5cdFx0ICA6ICd2YXIoLS10ZXh0LWVycm9yKSc7XG5cdCAgXG5cdFx0Ly8gY2xlYXIgYW5kIHJlLXJlbmRlciBqdXN0IHRoZSB3YXJuaW5nIGNvbnRhaW5lclxuXHRcdHRoaXMuZm9yY2VXYXJuaW5nRWwuZW1wdHkoKTtcblx0XHRpZiAoaW5zdGFsbGVkICYmIGxhdGVzdCAmJiBpbnN0YWxsZWQgIT09IGxhdGVzdCkge1xuXHRcdCAgY29uc3Qgd2FybiA9IHRoaXMuZm9yY2VXYXJuaW5nRWwuY3JlYXRlRGl2KHtcblx0XHRcdHRleHQ6IGBcdTI2QTBcdUZFMEYgTmV3IHZlcnNpb24gYXZhaWxhYmxlICgke2luc3RhbGxlZH0gXHUyMTkyICR7bGF0ZXN0fSkgXHUyMDE0IHVzZSByZWd1bGFyIHVwZGF0ZSBpbnN0ZWFkYCxcblx0XHQgIH0pO1xuXHRcdCAgd2Fybi5zdHlsZS5jc3NUZXh0ID0gYFxuXHRcdFx0Zm9udC1zaXplOiAwLjg1ZW07XG5cdFx0XHRjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG5cdFx0XHRmb250LXN0eWxlOiBpdGFsaWM7XG5cdFx0ICBgO1xuXHRcdCAgd2Fybi5zZXRBdHRyKCd0aXRsZScsICdGb3JjZSB1cGRhdGluZyB3aGlsZSBhIG5ldyB2ZXJzaW9uIGlzIGF2YWlsYWJsZSBtYXkgc2tpcCBpbXBvcnRhbnQgY2hhbmdlcy4nKTtcblx0XHR9XG5cdCAgfVxuXHQgIFxufSAgXG4iLCAiLy8gc3JjL2ZpcnN0aW5zdGFsbGNvbmZpcm0udHNcbmltcG9ydCB7IEFwcCwgTW9kYWwsIEJ1dHRvbkNvbXBvbmVudCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBJbnN0YWxsT3B0aW9ucyB9IGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBpbXBvcnRSdWxlc2V0RGF0YSB9IGZyb20gXCIuL3J1bGVzZXRJbnN0YWxsZXJcIjtcblxuZXhwb3J0IGNsYXNzIENvbmZpcm1GcmVzaEluc3RhbGxNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgcHJpdmF0ZSBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBWVnVuZGVybG9yZVRvb2xraXRQbHVnaW4pIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgb25PcGVuKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChcIlx1MjZBMFx1RkUwRiBXYXJuaW5nOiBGcmVzaCBWYXVsdCBSZWNvbW1lbmRlZFwiKTtcblxuICAgIC8vIERpc2NsYWltZXIgdGV4dFxuICAgIHRoaXMuY29udGVudEVsXG4gICAgICAuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgdGV4dDpcbiAgICAgICAgICBcIlRoZSBmdWxsIFZWdW5kZXJsb3JlIGluc3RhbGwgaXMgaW50ZW5kZWQgZm9yIGEgZnJlc2gsIGVtcHR5IE9ic2lkaWFuIHZhdWx0LiBcIiArXG4gICAgICAgICAgXCJJZiB5b3UgaW5zdGFsbCBpbiBhIHZhdWx0IHRoYXQgYWxyZWFkeSBoYXMgZmlsZXMsIGFueSBmaWxlIHdob3NlIHBhdGggbWF0Y2hlcyBhIFwiICtcbiAgICAgICAgICBcIlZWdW5kZXJsb3JlIFRvb2xraXQgZmlsZSB3aWxsIGJlIG92ZXJ3cml0dGVuLlxcblxcblwiICtcbiAgICAgICAgICBcIkFsc28gdGhpbmdzIGNvdWxkIGp1c3QgZ2V0IG1lc3N5LlxcblxcblwiICtcbiAgICAgICAgICBcIk1ha2UgYSBwZXJjZXB0aW9uIGNoZWNrIGFuZCBwcm9jZWVkIHdpdGggY2F1dGlvbiFcIixcbiAgICAgIH0pXG4gICAgICAuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAxZW07XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxLjRlbTtcbiAgICAgIGA7XG5cbiAgICAvLyBCdXR0b24gcm93IGNvbnRhaW5lclxuICAgIGNvbnN0IGJ1dHRvblJvdyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcbiAgICBidXR0b25Sb3cuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgICAgZ2FwOiAwLjVlbTtcbiAgICBgO1xuXG4gICAgLy8gXCJPaCBnb2QsIGNhbmNlbCFcIiBidXR0b25cbiAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvblJvdylcbiAgICAgIC5zZXRCdXR0b25UZXh0KFwiT2ggZ29kLCBjYW5jZWwhXCIpXG4gICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuXG4gICAgLy8gXCJJbnN0YWxsISFcIiBidXR0b25cbiAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvblJvdylcbiAgICAgIC5zZXRCdXR0b25UZXh0KFwiSW5zdGFsbCEhXCIpXG4gICAgICAuc2V0Q3RhKCkgLy8gbWFrZXMgaXQgbG9vayBsaWtlIGEgcHJpbWFyeSBhY3Rpb25cbiAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gY2xvc2UgdGhpcyBtb2RhbCBpbW1lZGlhdGVseVxuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gIFxuICAgICAgICBjb25zdCBvcHRzOiBJbnN0YWxsT3B0aW9ucyA9IHtcbiAgICAgICAgICBjb21wZW5kaXVtOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ydWxlc2V0Q29tcGVuZGl1bSxcbiAgICAgICAgICByZWZlcmVuY2VzOiBbLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZV0sXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gbGV0IHRoZSB1c2VyIGtub3cgd2UncmUgd29ya2luZ1xuICAgICAgICBuZXcgTm90aWNlKFwiXHUyM0YzIEluc3RhbGxpbmcgdG9vbGtpdFx1MjAyNlwiKTtcbiAgXG4gICAgICAgIC8vIGdyYWIgdGhlIHNlbGVjdGlvbnMgZnJvbSBzZXR0aW5nc1xuICAgICAgICBjb25zdCBjb21wZW5kaXVtID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldENvbXBlbmRpdW07XG4gICAgICAgIGNvbnN0IHJlZmVyZW5jZXMgPSBbLi4udGhpcy5wbHVnaW4uc2V0dGluZ3MucnVsZXNldFJlZmVyZW5jZV07XG4gIFxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIHJ1biB5b3VyIG5ldyBpbnN0YWxsZXJcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5pbnN0YWxsRnVsbFRvb2xraXQoeyBjb21wZW5kaXVtLCByZWZlcmVuY2VzIH0pO1xuXG5cbiAgICAgICAgICBpZiAoY29tcGVuZGl1bSkge1xuICAgICAgICAgICAgYXdhaXQgaW1wb3J0UnVsZXNldERhdGEoe1xuICAgICAgICAgICAgICBhcHA6IHRoaXMuYXBwLFxuICAgICAgICAgICAgICBlZGl0aW9uS2V5OiBjb21wZW5kaXVtLFxuICAgICAgICAgICAgICB0YXJnZXRQYXRoOiBcIkNvbXBlbmRpdW1cIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiXHUyNzRDIGluc3RhbGxUb29sa2l0KCkgZmFpbGVkOlwiLCBlcnIpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoXCJcdTI3NEMgVG9vbGtpdCBpbnN0YWxsYXRpb24gZmFpbGVkLiBTZWUgY29uc29sZS5cIik7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIC8vIG1hcmsgZmlyc3RcdTIwMTBydW4gY29tcGxldGUgc28gdGhlIGNhcmQgbmV2ZXIgc2hvd3MgYWdhaW5cbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubmVlZHNJbnN0YWxsID0gZmFsc2U7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICBcbiAgICAgICAgLy8gcmVcdTIwMTBkcmF3IHRoZSBzZXR0aW5ncyBVSSBub3cgdGhhdCB3ZSdyZSBwYXN0IGZpcnN0XHUyMDEwcnVuXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzVGFiLmRpc3BsYXkoKTtcbiAgICAgIH0pXG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiIsICIvLyBGVVRVUkUgU1lTVEVNUzogXG4vLyBDYWxsIG9mIEN0aHVsdSBcbi8vIE1vdGhlcnNoaXBcbi8vIFBGMkVcbi8vIE1cdTAwRjZyayBCb3JnXG4vLyBCbGFkZXMgaW4gdGhlIERhcmtcbi8vIERlbHRhIEdyZWVuXG4vLyBTdGFyZmluZGVyXG4vLyBUaGUgT25lIFJpbmdcbi8vIEZhdGUgXG4vLyBDeWJlcnB1bmtcbi8vIExhbmNlclxuLy8gUG93ZXJlZCBieSB0aGUgQXBvY2FseXBzZVxuLy8gU3RhciBXYXJzIFJQR1xuXG5leHBvcnQgaW50ZXJmYWNlIEVkaXRpb24ge1xuICAgIGlkOiBzdHJpbmc7ICAgICAgICAgICAgICAvLyBlLmcuIFwiNWUtMjAxNFwiXG4gICAgbGFiZWw6IHN0cmluZzsgICAgICAgICAgIC8vIGUuZy4gXCJEJkQgNUUgKDIwMTQpXCJcbiAgICByZXBvPzogc3RyaW5nOyAgICAgICAgICAgIC8vIGUuZy4gXCI1ZXRvb2xzLW1pcnJvci0zLzVldG9vbHMtMjAxNC1zcmNcIlxuICAgIHBhcnNlcj86IHN0cmluZzsgICAgICAgLy8geW91ciBwYXJzZXJcdTIwMTBzZWxlY3RvclxuICAgIHNvdXJjZVVybD86IHN0cmluZztcbiAgICBjYXRlZ29yaWVzPzogc3RyaW5nW107XG4gIH1cbiAgXG4gIGV4cG9ydCBjb25zdCBBVkFJTEFCTEVfRURJVElPTlM6IEVkaXRpb25bXSA9IFtcbiAgICB7XG4gICAgICBpZDogJzVlLTIwMTQnLFxuICAgICAgbGFiZWw6ICdEJkQgNUUgKDIwMTQpJyxcbiAgICAgIHJlcG86ICc1ZXRvb2xzLW1pcnJvci0zLzVldG9vbHMtMjAxNC1zcmMnLFxuICAgICAgcGFyc2VyOiAnNWUtanNvbicsXG4gICAgICBzb3VyY2VVcmw6ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLTIwMTQtc3JjL21haW4vZGF0YScsXG4gICAgICBjYXRlZ29yaWVzOiBbJyddLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICc1ZS0yMDI1JyxcbiAgICAgIGxhYmVsOiAnRCZEIDVFICgyMDI1KScsXG4gICAgICByZXBvOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLzVldG9vbHMtbWlycm9yLTMvNWV0b29scy1zcmMvbWFpbi9kYXRhJyxcbiAgICAgIHBhcnNlcjogJzVlLWpzb24nLFxuICAgICAgc291cmNlVXJsOiAnNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLXNyYydcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAndGVzdCcsXG4gICAgICBsYWJlbDogJ1Rlc3QgUnVsZXNldCcsXG4gICAgICByZXBvOiAnNWV0b29scy1taXJyb3ItMy81ZXRvb2xzLTIwMTQtc3JjJyxcbiAgICAgIHBhcnNlcjogJzVlLWpzb24nLFxuICAgICAgc291cmNlVXJsOiAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tLzVldG9vbHMtbWlycm9yLTMvNWV0b29scy0yMDE0LXNyYy9tYWluL2RhdGEnLFxuICAgICAgY2F0ZWdvcmllczogWydzcGVsbHMnLCAnYmVzdGlhcnknXSxcbiAgICB9LCBcbiAgICBcblxuICBdO1xuXG4gICAgLy8ge1xuICAgIC8vICAgaWQ6ICcnLFxuICAgIC8vICAgbGFiZWw6ICcnLFxuICAgIC8vICAgcmVwbzogJycsXG4gICAgLy8gICBwYXJzZXI6ICcnLFxuICAgIC8vICAgc291cmNlVXJsOiAnJyxcbiAgICAvLyAgIGNhdGVnb3JpZXM6IFsnJ10sXG4gICAgLy8gfSwgICIsICJpbXBvcnQgeyBBcHAsIG5vcm1hbGl6ZVBhdGggfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB0eXBlIHsgRWRpdGlvbiB9IGZyb20gXCIuLi8uLi9lZGl0aW9uc1wiO1xuaW1wb3J0IHsgcGFyc2VTcGVsbHNGaWxlIH0gZnJvbSBcIi4vc3BlbGxzXCI7XG5pbXBvcnQgeyBwYXJzZUJlc3RpYXJ5RmlsZSB9IGZyb20gXCIuL2Jlc3RpYXJ5XCI7XG5pbXBvcnQgeyBwYXJzZUl0ZW1zRmlsZSB9IGZyb20gXCIuL2l0ZW1zXCI7XG5pbXBvcnQgeyBwYXJzZVNwZWNpZXNGaWxlIH0gZnJvbSBcIi4vc3BlY2llc1wiO1xuaW1wb3J0IHsgcGFyc2VDbGFzc0ZpbGUgfSBmcm9tIFwiLi9jbGFzc2VzXCI7XG5pbXBvcnQgeyBwYXJzZUFjdGlvbnNGaWxlLCBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUsIHBhcnNlU2Vuc2VzRmlsZSwgcGFyc2VTa2lsbHNGaWxlIH0gZnJvbSBcIi4vcnVsZXNcIjtcbmltcG9ydCB7IHBhcnNlRmVhdHNGaWxlIH0gZnJvbSBcIi4vZmVhdHNcIjtcbmltcG9ydCB7IHBhcnNlQmFja2dyb3VuZHNGaWxlIH0gZnJvbSBcIi4vYmFja2dyb3VuZHNcIjtcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cblxuLy8gXHUyMDE0IEdpdEh1YiBsaXN0aW5ncyBcdTIwMTRcbmFzeW5jIGZ1bmN0aW9uIGxpc3RTcGVsbEZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YS9zcGVsbHNgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBkYXRhID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIHJldHVybiBkYXRhXG4gICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiYgaXRlbS5uYW1lLnN0YXJ0c1dpdGgoXCJzcGVsbHMtXCIpICYmIGl0ZW0ubmFtZS5lbmRzV2l0aChcIi5qc29uXCIpKVxuICAgIC5tYXAoaXRlbSA9PiBpdGVtLm5hbWUpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBsaXN0QmVzdGlhcnlGaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGEvYmVzdGlhcnlgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBsaXN0ID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIGNvbnN0IENPUkVfU09VUkNFUyA9IFtcbiAgICBcImJlc3RpYXJ5LXBoYi5qc29uXCIsIFwiYmVzdGlhcnktbW0uanNvblwiLCBcImJlc3RpYXJ5LWRtZy5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS14Z2UuanNvblwiLCBcImJlc3RpYXJ5LXZnbS5qc29uXCIsIFwiYmVzdGlhcnktdGNlLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LWVndy5qc29uXCIsIFwiYmVzdGlhcnktZXJsdy5qc29uXCIsIFwiYmVzdGlhcnktbXRmLmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXZyZ3IuanNvblwiLCBcImJlc3RpYXJ5LWNvcy5qc29uXCIsIFwiYmVzdGlhcnktb290YS5qc29uXCIsXG4gICAgXCJiZXN0aWFyeS1wb3RhLmpzb25cIiwgXCJiZXN0aWFyeS1ob3RkcS5qc29uXCIsIFwiYmVzdGlhcnktcm90Lmpzb25cIixcbiAgICBcImJlc3RpYXJ5LXNrdC5qc29uXCIsIFwiYmVzdGlhcnktdGZ0eXAuanNvblwiLCBcImJlc3RpYXJ5LXRvYS5qc29uXCJcbiAgXTtcbiAgcmV0dXJuIGxpc3RcbiAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSBcImZpbGVcIiAmJiBDT1JFX1NPVVJDRVMuaW5jbHVkZXMoaXRlbS5uYW1lKSlcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuY29uc3QgSVRFTV9KU09OX0ZJTEVTID0gW1xuICBcIml0ZW1zLWJhc2UuanNvblwiLFxuICBcIml0ZW1zLmpzb25cIixcbiAgXCJvYmplY3RzLmpzb25cIixcbiAgXCJ2ZWhpY2xlcy5qc29uXCIsXG4gIFwiZGVja3MuanNvblwiLFxuXTtcblxuYXN5bmMgZnVuY3Rpb24gbGlzdEl0ZW1GaWxlc0Zyb21HaXRIdWIocmVwbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy8ke3JlcG99L2NvbnRlbnRzL2RhdGFgO1xuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwpO1xuICBjb25zdCBkYXRhID0gKGF3YWl0IHJlcy5qc29uKCkpIGFzIEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT47XG4gIHJldHVybiBkYXRhXG4gICAgLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiYgSVRFTV9KU09OX0ZJTEVTLmluY2x1ZGVzKGl0ZW0ubmFtZSkpXG4gICAgLm1hcChpdGVtID0+IGl0ZW0ubmFtZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxpc3RDbGFzc0ZpbGVzRnJvbUdpdEh1YihyZXBvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zLyR7cmVwb30vY29udGVudHMvZGF0YS9jbGFzc2A7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XG4gIGNvbnN0IGxpc3RpbmcgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQXJyYXk8eyBuYW1lOiBzdHJpbmc7IHR5cGU6IHN0cmluZyB9PjtcbiAgcmV0dXJuIGxpc3RpbmdcbiAgICAuZmlsdGVyKGl0ZW0gPT5cbiAgICAgIGl0ZW0udHlwZSA9PT0gXCJmaWxlXCIgJiZcbiAgICAgIGl0ZW0ubmFtZS5zdGFydHNXaXRoKFwiY2xhc3MtXCIpICYmXG4gICAgICBpdGVtLm5hbWUuZW5kc1dpdGgoXCIuanNvblwiKVxuICAgIClcbiAgICAubWFwKGl0ZW0gPT4gaXRlbS5uYW1lKTtcbn1cblxuLy8gXHUyMDE0IGVuc3VyZSB0aGUgdmF1bHQgZm9sZGVyIGV4aXN0cyBcdTIwMTRcbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZUZvbGRlcihhcHA6IEFwcCwgZm9sZGVyUGF0aDogc3RyaW5nKSB7XG4gIGNvbnN0IHBhcnRzID0gZm9sZGVyUGF0aC5zcGxpdChcIi9cIik7XG4gIGxldCBjdXJyID0gXCJcIjtcbiAgZm9yIChjb25zdCBwIG9mIHBhcnRzKSB7XG4gICAgY3VyciA9IGN1cnIgPyBgJHtjdXJyfS8ke3B9YCA6IHA7XG4gICAgdHJ5IHsgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihjdXJyKTsgfVxuICAgIGNhdGNoIHt9IC8vIGFscmVhZHkgZXhpc3RzXG4gIH1cbn1cblxuLy8gXHUyMDE0IHRoZSBvbmUgZW50cnktcG9pbnQgdGhhdCB5b3VyIHRvcC1sZXZlbCBjYWxscyBcdTIwMTRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbXBvcnRFZGl0aW9uRGF0YShwYXJhbXM6IHtcbiAgYXBwOiBBcHA7XG4gIGVkaXRpb246IEVkaXRpb247XG4gIHRhcmdldFBhdGg6IHN0cmluZztcbn0pIHtcbiAgY29uc3QgeyBhcHAsIGVkaXRpb24sIHRhcmdldFBhdGggfSA9IHBhcmFtcztcbiAgY29uc3QgcmVwbyA9IGVkaXRpb24ucmVwbyA/PyBcIlwiO1xuXG4gIC8vIFx1RDgzRFx1REQzOSBTUEVMTFNcbiAge1xuICAgIGNvbnN0IHNwZWxsRmlsZXMgPSBhd2FpdCBsaXN0U3BlbGxGaWxlc0Zyb21HaXRIdWIocmVwbyk7XG4gICAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBzcGVsbEZpbGVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L3NwZWxscy8ke2ZpbGVOYW1lfWApO1xuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgY29uc3QgZmlsZXMgPSBwYXJzZVNwZWxsc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICAgIGZvciAoY29uc3QgbWQgb2YgZmlsZXMpIHtcbiAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vU3BlbGxzLyR7bWQucGF0aH1gKTtcbiAgICAgICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gaW1wb3J0IHNwZWxsICR7ZmlsZU5hbWV9OmAsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFx1RDgzRFx1REQzOSBCRVNUSUFSWVxuICB7XG4gICAgY29uc3QgYmVzdGlhcnlGaWxlcyA9IGF3YWl0IGxpc3RCZXN0aWFyeUZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgICBmb3IgKGNvbnN0IGZpbGVOYW1lIG9mIGJlc3RpYXJ5RmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlcyAgICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9iZXN0aWFyeS8ke2ZpbGVOYW1lfWApO1xuICAgICAgICBjb25zdCBqc29uICAgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXJzZUJlc3RpYXJ5RmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICAgICAgZm9yIChjb25zdCBtZCBvZiBwYXJzZWQpIHtcbiAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vQmVzdGlhcnkvJHttZC5wYXRofWApO1xuICAgICAgICAgIGNvbnN0IGZvbGRlciAgID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcbiAgICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgYmVzdGlhcnkgJHtmaWxlTmFtZX06YCwgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gXHVEODNEXHVERDM5IElURU1TXG4gIHtcbiAgICBjb25zdCBpdGVtRmlsZXMgPSBhd2FpdCBsaXN0SXRlbUZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgICBmb3IgKGNvbnN0IGZuIG9mIGl0ZW1GaWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS8ke2ZufWApO1xuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlSXRlbXNGaWxlKGpzb24sIGVkaXRpb24uaWQpO1xuICAgICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWApO1xuICAgICAgICAgIGNvbnN0IGZvbGRlciAgID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcbiAgICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgaXRlbXMgZnJvbSAke2ZufTpgLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbi8vIFx1RDgzRFx1REQzOSBTUEVDSUVTXG57XG4gIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vcmFjZXMuanNvbmApO1xuICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgY29uc3QgbWRGaWxlcyA9IHBhcnNlU3BlY2llc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS9QbGF5ZXIgQnVpbGQvJHttZC5wYXRofWApO1xuICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIikpO1xuICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgfVxufVxuLy8gXHVEODNEXHVERDM5IENMQVNTRVNcbntcbiAgY29uc3QgY2xhc3NGaWxlcyA9IGF3YWl0IGxpc3RDbGFzc0ZpbGVzRnJvbUdpdEh1YihyZXBvKTtcbiAgZm9yIChjb25zdCBmaWxlTmFtZSBvZiBjbGFzc0ZpbGVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIGZldGNoIHRoZSByYXcgY2xhc3MgSlNPTlxuICAgICAgY29uc3QgcmVzICAgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2NsYXNzLyR7ZmlsZU5hbWV9YCk7XG4gICAgICBjb25zdCBqc29uICAgPSBhd2FpdCByZXMuanNvbigpO1xuXG4gICAgICAvLyBwYXJzZSBpbnRvIG9uZSBvciBtb3JlIG1hcmtkb3duIGZpbGVzXG4gICAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VDbGFzc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCwgZmlsZU5hbWUpO1xuXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKGAke3RhcmdldFBhdGh9L1BsYXllciBCdWlsZC8ke21kLnBhdGh9YCk7XG4gICAgICAgIC8vIDEpIGVuc3VyZSB0aGUgZm9sZGVyIGV4aXN0c1xuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmdWxsUGF0aC5zcGxpdChcIi9cIikuc2xpY2UoMCwgLTEpLmpvaW4oXCIvXCIpKTtcblxuICAgICAgICAvLyAyKSB3cml0ZSB2aWEgT2JzaWRpYW5cdTIwMTlzIEFQSSBzbyBub3RlcyByZWZyZXNoXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmdWxsUGF0aCk7XG4gICAgICAgIGlmIChleGlzdGluZyBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgLy8gT3ZlcndyaXRlIGFuIGV4aXN0aW5nIG5vdGUgYW5kIGZpcmUgdGhlIGNoYW5nZSBldmVudFxuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5tb2RpZnkoZXhpc3RpbmcsIG1kLmNvbnRlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIENyZWF0ZSBhIGJyYW5kLW5ldyBub3RlIChhbHNvIGZpcmVzIHRoZSBjaGFuZ2UgZXZlbnQpXG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBpbXBvcnQgY2xhc3MgJHtmaWxlTmFtZX06YCwgZSk7XG4gICAgfVxuICB9XG59XG5cblxuIC8vIFx1RDgzRFx1REQzOSBSVUxFUzogQUNUSU9OU1xuICB7XG4gICAgdHJ5IHtcblxuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9hY3Rpb25zLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlQWN0aW9uc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgXG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgZm9sZGVyKTtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZnVsbFBhdGgsIG1kLmNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBpbXBvcnQgYWN0aW9ucy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuXG4gICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBDT05ESVRJT05TICYgRElTRUFTRVNcbiAge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXMgID0gYXdhaXQgZmV0Y2goYCR7ZWRpdGlvbi5zb3VyY2VVcmx9L2NvbmRpdGlvbnNkaXNlYXNlcy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUNvbmRpdGlvbnNEaXNlYXNlc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG4gICAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBub3JtYWxpemVQYXRoKFxuICAgICAgICAgIGAke3RhcmdldFBhdGh9LyR7bWQucGF0aH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG4gICAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZ1bGxQYXRoLCBtZC5jb250ZW50KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gaW1wb3J0IGNvbmRpdGlvbnNkaXNlYXNlcy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBTRU5TRVNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc2Vuc2VzLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlU2Vuc2VzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBzZW5zZXMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgICAgLy8gXHVEODNEXHVERDM5IFJVTEVTOiBTS0lMTFNcbiAge1xuICAgIHRyeSB7XG5cbiAgICAgIGNvbnN0IHJlcyAgPSBhd2FpdCBmZXRjaChgJHtlZGl0aW9uLnNvdXJjZVVybH0vc2tpbGxzLmpzb25gKTtcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIFxuICAgICAgY29uc3QgbWRGaWxlcyA9IHBhcnNlU2tpbGxzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBza2lsbHMuanNvbjpcIiwgZSk7XG4gICAgfVxuICB9XG5cbiAgIC8vIFx1RDgzRFx1REQzOSBGRUFUU1xuICB7XG4gICAgdHJ5IHtcblxuICAgICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9mZWF0cy5qc29uYCk7XG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICBcbiAgICAgIGNvbnN0IG1kRmlsZXMgPSBwYXJzZUZlYXRzRmlsZShqc29uLCBlZGl0aW9uLmlkKTtcbiAgICBcbiAgICAgIGZvciAoY29uc3QgbWQgb2YgbWRGaWxlcykge1xuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG5vcm1hbGl6ZVBhdGgoXG4gICAgICAgICAgYCR7dGFyZ2V0UGF0aH0vJHttZC5wYXRofWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gZnVsbFBhdGguc3BsaXQoXCIvXCIpLnNsaWNlKDAsIC0xKS5qb2luKFwiL1wiKTtcblxuICAgICAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBmb2xkZXIpO1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBmZWF0cy5qc29uOlwiLCBlKTtcbiAgICB9XG4gIH1cblxuLy8gXHVEODNEXHVERDM5IEJBQ0tHUk9VTkRTXG57XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzICA9IGF3YWl0IGZldGNoKGAke2VkaXRpb24uc291cmNlVXJsfS9iYWNrZ3JvdW5kcy5qc29uYCk7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG5cbiAgICBjb25zdCBtZEZpbGVzID0gcGFyc2VCYWNrZ3JvdW5kc0ZpbGUoanNvbiwgZWRpdGlvbi5pZCk7XG5cbiAgICBmb3IgKGNvbnN0IG1kIG9mIG1kRmlsZXMpIHtcbiAgICAgIC8vIG1kLnBhdGggaXMgXCJQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMvPE5hbWU+Lm1kXCJcbiAgICAgIGNvbnN0IGZ1bGxQYXRoID0gbm9ybWFsaXplUGF0aChgJHt0YXJnZXRQYXRofS8ke21kLnBhdGh9YCk7XG4gICAgICBjb25zdCBmb2xkZXIgICA9IGZ1bGxQYXRoLnNwbGl0KFwiL1wiKS5zbGljZSgwLCAtMSkuam9pbihcIi9cIik7XG5cbiAgICAgIGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGZvbGRlcik7XG4gICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmdWxsUGF0aCwgbWQuY29udGVudCk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGltcG9ydCBiYWNrZ3JvdW5kcy5qc29uOlwiLCBlKTtcbiAgfVxufVxuXG59IiwgIi8vIGhlbHBlcnMvc291cmNlTWFwLnRzXG5cbi8vIE1hcCBvZiA1ZSBzb3VyY2UgYWJicmV2aWF0aW9ucyB0byB0aGVpciBmdWxsIHRpdGxlc1xuY29uc3QgU09VUkNFX05BTUVfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAvLyBDb3JlIHJ1bGVib29rc1xuICBQSEI6IFwiUGxheWVyJ3MgSGFuZGJvb2tcIixcbiAgTU06ICBcIk1vbnN0ZXIgTWFudWFsXCIsXG4gIERNRzogXCJEdW5nZW9uIE1hc3RlcidzIEd1aWRlXCIsXG5cbiAgLy8gT2ZmaWNpYWwgZXhwYW5zaW9ucyAmIGFkdmVudHVyZSBtb2R1bGVzXG4gIENvUzogIFwiQ3Vyc2Ugb2YgU3RyYWhkXCIsXG4gIE9vdEE6IFwiT3V0IG9mIHRoZSBBYnlzc1wiLFxuICBQb3RBOiBcIlByaW5jZXMgb2YgdGhlIEFwb2NhbHlwc2VcIixcbiAgSG90RFE6IFwiSG9hcmQgb2YgdGhlIERyYWdvbiBRdWVlblwiLFxuICBSb1Q6ICBcIlJpc2Ugb2YgVGlhbWF0XCIsXG4gIFNLVDogIFwiU3Rvcm0gS2luZydzIFRodW5kZXJcIixcbiAgVGZ0WVA6XCJUYWxlcyBmcm9tIHRoZSBZYXduaW5nIFBvcnRhbFwiLFxuICBUb0E6ICBcIlRvbWIgb2YgQW5uaWhpbGF0aW9uXCIsXG5cbiAgLy8gU3VwcGxlbWVudGFsIGd1aWRlc1xuICBYR0U6IFwiWGFuYXRoYXIncyBHdWlkZSB0byBFdmVyeXRoaW5nXCIsXG4gIFZHTTogXCJWb2xvJ3MgR3VpZGUgdG8gTW9uc3RlcnNcIixcbiAgVENFOiBcIlRhc2hhJ3MgQ2F1bGRyb24gb2YgRXZlcnl0aGluZ1wiLFxuICBFR1c6IFwiRWJlcnJvbjogUmlzaW5nIGZyb20gdGhlIExhc3QgV2FyXCIsXG4gIEVSTFc6XCJFeHBsb3JlcidzIEd1aWRlIHRvIFdpbGRlbW91bnRcIixcbiAgTVRGOiBcIk1vbnN0ZXJzIG9mIHRoZSBNdWx0aXZlcnNlXCIsXG4gIFZSR1I6XCJWYW4gUmljaHRlbidzIEd1aWRlIHRvIFJhdmVubG9mdFwiLFxuXG4gIC8vIEFkZGl0aW9uYWwgc291cmNlYm9va3NcbiAgQUFHOiAgICAgIFwiQXN0cmFsIEFkdmVudHVyZXJcdTIwMTlzIEd1aWRlXCIsXG4gIEFJOiAgICAgICBcIkFjcXVpc2l0aW9ucyBJbmNvcnBvcmF0ZWRcIixcbiAgQWl0RlJBVkZUOlwiQWR2ZW50dXJlcyBpbiB0aGUgRm9yZ290dGVuIFJlYWxtczogQSBWaXN1YWwgRmllbGQgVGVzdFwiLFxuICBCTVQ6ICAgICAgXCJCaWcgTW9uc3RlciBUb21lXCIsXG4gIERvRGs6ICAgICBcIkRyYWdvbiBvZiBEYXJra2VlcFwiLFxuICBGVEQ6ICAgICAgXCJGaXpiYW5cdTIwMTlzIFRyZWFzdXJ5IG9mIERyYWdvbnNcIixcbiAgR0dSOiAgICAgIFwiR3VpbGRtYXN0ZXJcdTIwMTlzIEd1aWRlIHRvIFJhdm5pY2FcIixcbiAgR0hMb0U6ICAgIFwiR2hvc3RzIG9mIHRoZSBIb3Jpem9uOiBMaWdodCBPdmVyIEVsZW5zYXJpYVwiLFxuICBJRFJvdEY6ICAgXCJJY2V3aW5kIERhbGU6IFJpbWUgb2YgdGhlIEZyb3N0bWFpZGVuXCIsXG4gIExMSzogICAgICBcIkxvc3QgTGFib3JhdG9yeSBvZiBLd2FsaXNoXCIsXG4gIFNhdE86ICAgICBcIlNhcHBoaXJlIG9mIFRydXRoXCIsXG4gIFNDQzogICAgICBcIlN0cml4aGF2ZW46IEN1cnJpY3VsdW0gb2YgQ2hhb3NcIixcbiAgVERDU1I6ICAgIFwiVGhlIER1bmdlb24gQ29hY2hcdTIwMTlzIFJ1bGVib29rXCJcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZnVsbCBzb3VyY2UgbmFtZSBmb3IgYSBnaXZlbiBhYmJyZXZpYXRpb24uXG4gKiBPcHRpb25hbGx5IGFwcGVuZHMgeWVhciBmb3IgUEhCIHZhcmlhbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVsbFNvdXJjZU5hbWUoYWJicmV2OiBzdHJpbmcsIGVkaXRpb25JZD86IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBuYW1lID0gU09VUkNFX05BTUVfTUFQW2FiYnJldl0gPz8gYWJicmV2O1xuXG4gIC8vIEFwcGVuZCB5ZWFyIGZvciBQSEIgaWYgdGhlIGVkaXRpb24gY29udGV4dCBpcyBrbm93blxuICBpZiAoYWJicmV2ID09PSBcIlBIQlwiKSB7XG4gICAgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDE0XCIpKSBuYW1lICs9IFwiICgyMDE0KVwiO1xuICAgIGVsc2UgaWYgKGVkaXRpb25JZD8uaW5jbHVkZXMoXCIyMDI1XCIpKSBuYW1lICs9IFwiICgyMDI1KVwiO1xuICB9XG5cbiAgcmV0dXJuIG5hbWU7XG59XG4iLCAiLy8gcGFyc2Vycy81ZS1qc29uL2hlbHBlcnMvdGFnUmVwbGFjZXIudHNcblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2U1ZVRhZ3MoaW5wdXQ6IHVua25vd24pOiBzdHJpbmcge1xuICAvLyAxKSBUdXJuIGFycmF5cyBpbnRvIHNwYWNlLWpvaW5lZCBzdHJpbmdzXG4gIC8vIDIpIExlYXZlIHN0cmluZ3MgYWxvbmVcbiAgLy8gMykgQ29lcmNlIGV2ZXJ5dGhpbmcgZWxzZSB0byBzdHJpbmcgKG9yIGVtcHR5KVxuICBsZXQgdGV4dDogc3RyaW5nO1xuICBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICB0ZXh0ID0gaW5wdXQuam9pbihcIiBcIik7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgdGV4dCA9IGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHRleHQgPSBTdHJpbmcoaW5wdXQgPz8gXCJcIik7XG4gIH1cblxuICAvLyBub3cgcnVuIGFsbCB5b3VyIEAtdGFnIHJlcGxhY2VtZW50cyBvbiB0aGF0IHRleHRcbiAgcmV0dXJuIHRleHRcbiAgICAucmVwbGFjZSgvXFx7QChzcGVsbHxpdGVtfGNyZWF0dXJlfHJhY2UpIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgX18sIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemVFYWNoKG5hbWUpfV1dYFxuICAgIClcbiAgICAucmVwbGFjZSgvXFx7QChjb25kaXRpb258c3RhdHVzfGFjdGlvbnxza2lsbCkgKFtefH1dKykoPzpcXHxbXn1dKyk/XFx9L2csIChfLCB0YWcsIG5hbWUpID0+XG4gICAgICBgW1ske2NhcGl0YWxpemUodGFnKX1zIyR7bmFtZX18JHtjYXBpdGFsaXplRWFjaChuYW1lKX1dXWBcbiAgICApXG4gICAgLnJlcGxhY2UoL1xce0BjbGFzc0ZlYXR1cmUgKFtefH1dKylcXHwoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIGZlYXR1cmUsIGNscykgPT5cbiAgICAgIGBbWyR7Y2xzfSMke2ZlYXR1cmV9XV1gXG4gICAgKVxuICAgIC5yZXBsYWNlKC9cXHtAKGJvb2t8ZmlsdGVyKSAoW158fV0rKSg/OlxcfFtefV0rKT9cXH0vZywgKF8sIF9fLCB0eHQpID0+IHR4dClcbiAgICAucmVwbGFjZSgvXFx7QG5vdGUgKFtefV0rKVxcfS9nLCAoXywgbm90ZSkgPT4gYCoke25vdGV9KmApXG4gICAgLnJlcGxhY2UoL1xce0AoZGFtYWdlfGRpY2V8ZGN8aGl0fHNlbnNlKSAoW159XSspXFx9L2csIChfLCBfXywgdmFsdWUpID0+IHZhbHVlKVxuICAgIC5yZXBsYWNlKC9cXHtAY2hhbmNlIChbXnx9XSspKD86XFx8W159XSspP1xcfS9nLCAoXywgdmFsdWUpID0+IGAke3ZhbHVlfSVgKVxuICAgIC5yZXBsYWNlKC9cXHtAcXVpY2tyZWYgKFtefH1dKykoPzpcXHxbXnxdKlxcfFtefV0qKT9cXH0vZywgKF8sIHRlcm0pID0+IHtcbiAgICAgIGNvbnN0IGtub3duID0gW1xuICAgICAgICBcImRpZmZpY3VsdCB0ZXJyYWluXCIsIFwidG90YWwgY292ZXJcIiwgXCJoYWxmIGNvdmVyXCIsIFwidGhyZWUtcXVhcnRlcnMgY292ZXJcIixcbiAgICAgICAgXCJoZWF2aWx5IG9ic2N1cmVkXCIsIFwibGlnaHRseSBvYnNjdXJlZFwiXG4gICAgICBdO1xuICAgICAgcmV0dXJuIGtub3duLmluY2x1ZGVzKHRlcm0udG9Mb3dlckNhc2UoKSlcbiAgICAgICAgPyBgW1tSdWxlcyMke2NhcGl0YWxpemVFYWNoKHRlcm0pfV1dYFxuICAgICAgICA6IHRlcm07XG4gICAgfSlcbiAgICAucmVwbGFjZSgvXFx7QHJlY2hhcmdlXFxzKihbXn1dKylcXH0vZywgKF8sIG51bSkgPT4gYChyZWNoYXJnZTogJHtudW0udHJpbSgpfSlgKVxuICAgIC5yZXBsYWNlKC9cXHtAKHNjYWxlZGljZXxzY2FsZWRhbWFnZSlbXn1dKlxcfChbXnx9XSspXFx9L2csIChfLCBfXywgdmFsdWUpID0+IHZhbHVlKVxuICAgIC5yZXBsYWNlKC9cXHtAZDIwW159XSpcXH0vZywgXCJcIilcbiAgICAucmVwbGFjZSgvXFx7QFtefV0rXFx9L2csIFwiXCIpO1xufVxuXG5mdW5jdGlvbiBjYXBpdGFsaXplKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiBjYXBpdGFsaXplRWFjaChzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzdHIuc3BsaXQoXCIgXCIpLm1hcChjYXBpdGFsaXplKS5qb2luKFwiIFwiKTtcbn1cbiIsICJpbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vdGFnUmVwbGFjZXJcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlck1hcmtkb3duVGFibGUoZW50cnk6IGFueSk6IHN0cmluZyB7XG4gIGlmIChlbnRyeS50eXBlICE9PSBcInRhYmxlXCIgfHwgIUFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHJldHVybiBcIlwiO1xuXG4gIGNvbnN0IGNhcHRpb24gPSBlbnRyeS5jYXB0aW9uID8gYCMjIyMjICR7ZW50cnkuY2FwdGlvbn1cXG5gIDogXCJcIjtcblxuICBjb25zdCBoZWFkZXJzID0gKGVudHJ5LmNvbExhYmVscyA/PyBbXSlcbiAgICAubWFwKChoOiBzdHJpbmcpID0+IHJlcGxhY2U1ZVRhZ3MoaC50cmltKCkpKTsgLy8gXHUyNzA1IHRhZyByZXBsYWNlIG9uIGhlYWRlcnNcblxuICBjb25zdCBoZWFkZXJSb3cgPSBgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGA7XG4gIGNvbnN0IGRpdmlkZXJSb3cgPSBgfCAke2hlYWRlcnMubWFwKCgpID0+IFwiOi0tXCIpLmpvaW4oXCIgfCBcIil9IHxgO1xuXG4gIGNvbnN0IGJvZHlSb3dzID0gZW50cnkucm93cy5tYXAoKHJvdzogYW55W10pID0+IHtcbiAgICBjb25zdCBjZWxscyA9IHJvdy5tYXAoKGNlbGwpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgY2VsbCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoY2VsbCk7IC8vIFx1MjcwNSB0YWcgcmVwbGFjZSBzdHJpbmdzXG5cbiAgICAgIGlmICh0eXBlb2YgY2VsbCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBpZiAoY2VsbC5yb2xsPy5leGFjdCAhPT0gdW5kZWZpbmVkKSByZXR1cm4gYCR7Y2VsbC5yb2xsLmV4YWN0fWA7XG4gICAgICAgIGlmIChjZWxsLnJvbGw/Lm1pbiAhPT0gdW5kZWZpbmVkICYmIGNlbGwucm9sbD8ubWF4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm4gYCR7Y2VsbC5yb2xsLm1pbn1cdTIwMTMke2NlbGwucm9sbC5tYXh9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhKU09OLnN0cmluZ2lmeShjZWxsKSk7IC8vIGZhbGxiYWNrIGZvciB1bmtub3duIHNoYXBlc1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhTdHJpbmcoY2VsbCkpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGB8ICR7Y2VsbHMuam9pbihcIiB8IFwiKX0gfGA7XG4gIH0pO1xuXG4gIHJldHVybiBgJHtjYXB0aW9ufSR7aGVhZGVyUm93fVxcbiR7ZGl2aWRlclJvd31cXG4ke2JvZHlSb3dzLmpvaW4oXCJcXG5cIil9YDtcbn1cbiIsICIvLyBmb3JtYXRFbnRyeS50c1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vbWFya2Rvd25UYWJsZVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RW50cnkoZW50cnk6IGFueSk6IHN0cmluZyB7XG4gIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCBjbGVhbmVkID0gZW50cnkudHJpbSgpO1xuICAgIGlmICghY2xlYW5lZCB8fCBjbGVhbmVkID09PSBcIn1cIikgcmV0dXJuIFwiXCI7XG4gICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoY2xlYW5lZCk7XG4gIH1cblxuICBpZiAoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgIGNvbnN0IGJvZHkgPSBlbnRyeS5lbnRyaWVzXG4gICAgICAubWFwKGZvcm1hdEVudHJ5KVxuICAgICAgLmZpbHRlcigoc3RyOiBzdHJpbmcpID0+IHN0ci50cmltKCkubGVuZ3RoID4gMClcbiAgICAgIC5qb2luKFwiXFxuXFxuXCIpO1xuXG4gICAgcmV0dXJuIGVudHJ5Lm5hbWVcbiAgICAgID8gYCMjIyMjICR7ZW50cnkubmFtZX1cXG4ke2JvZHl9YFxuICAgICAgOiBib2R5O1xuICB9XG5cbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgcmV0dXJuIGVudHJ5Lml0ZW1zXG4gICAgICAubWFwKChpOiBhbnkpID0+IGAtICR7cmVwbGFjZTVlVGFncyh0eXBlb2YgaSA9PT0gXCJzdHJpbmdcIiA/IGkgOiBKU09OLnN0cmluZ2lmeShpKSl9YClcbiAgICAgIC5qb2luKFwiXFxuXCIpO1xuICB9XG5cbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwidGFibGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgcmV0dXJuIHJlbmRlck1hcmtkb3duVGFibGUoZW50cnkpO1xuICB9XG5cbiAgaWYgKGVudHJ5LnR5cGUgPT09IFwicXVvdGVcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgY29uc3QgcXVvdGUgPSBlbnRyeS5lbnRyaWVzLm1hcChmb3JtYXRFbnRyeSkuam9pbihcIiBcIikudHJpbSgpO1xuICAgIGNvbnN0IGF1dGhvciA9IGVudHJ5LmJ5ID8gYCBcdTIwMTQgJHtlbnRyeS5ieX1gIDogXCJcIjtcbiAgICByZXR1cm4gYCpcIiR7cXVvdGV9JHthdXRob3J9XCIqYDtcbiAgfVxuXG4gIGlmIChlbnRyeS50eXBlID09PSBcImluc2V0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgIGNvbnN0IGluc2V0ID0gZW50cnkuZW50cmllcy5tYXAoZm9ybWF0RW50cnkpLmpvaW4oXCJcXG5cIikudHJpbSgpO1xuICAgIHJldHVybiBgPiAke2luc2V0LnJlcGxhY2UoL1xcbi9nLCBcIlxcbj4gXCIpfWA7XG4gIH1cblxuICBpZiAoZW50cnkudHlwZSA9PT0gXCJyZWZDbGFzc0ZlYXR1cmVcIiAmJiB0eXBlb2YgZW50cnkuY2xhc3NGZWF0dXJlID09PSBcInN0cmluZ1wiKSB7XG4gICAgY29uc3QgW25hbWVdID0gZW50cnkuY2xhc3NGZWF0dXJlLnNwbGl0KFwifFwiKTtcbiAgICBjb25zdCBhbmNob3IgPSBuYW1lXG4gICAgICAucmVwbGFjZSgvW15cXHdcXHMtXS9nLCBcIlwiKVxuICAgICAgLnJlcGxhY2UoL1xccysvZywgXCItXCIpXG4gICAgICAudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gYFtbIyR7YW5jaG9yfV1dYDtcbiAgfVxuXG4gIC8vIElmIGl0J3MgYW4gdW5rbm93biBvYmplY3QsIHNraXAgaXQgc2FmZWx5XG4gIHJldHVybiBcIlwiO1xufVxuIiwgIi8vIHBhcnNlcnMvNWUtanNvbi9iZXN0aWFyeS50c1xuXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCJzcmMvdHlwZXNcIjtcbmltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vaGVscGVycy9zb3VyY2VNYXBcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgQkVTVElBUllfTUVUQV9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5jb25zdCBza2lwcGVkTW9uc3RlcnM6IHN0cmluZ1tdID0gW107XG5cbi8vIFNpemUgYWJicmV2aWF0aW9ucyBtYXBwaW5nXG5leHBvcnQgXG5jb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbi8vIEFsaWdubWVudCBhYmJyZXZpYXRpb25zIG1hcHBpbmdcbmNvbnN0IEFMSUdOTUVOVF9NQVA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIEw6IFwiTGF3ZnVsXCIsXG4gIE46IFwiTmV1dHJhbFwiLFxuICBDOiBcIkNoYW90aWNcIixcbiAgRzogXCJHb29kXCIsXG4gIEU6IFwiRXZpbFwiLFxuICBVOiBcIlVuYWxpZ25lZFwiXG59O1xuXG4vLyBIZWxwZXIgdG8gY2FwaXRhbGl6ZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmdcbmZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdChzdHI6IHVua25vd24pOiBzdHJpbmcge1xuICBjb25zdCBzID0gU3RyaW5nKHN0ciB8fCBcIlwiKTtcbiAgcmV0dXJuIHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U2l6ZUFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBTSVpFX01BUFthYmJyZXZdIHx8IGFiYnJldjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEFsaWdubWVudEFiYnJldihhYmJyZXY6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBhYmJyZXZcbiAgICAudHJpbSgpXG4gICAgLnNwbGl0KC9cXHMrLylcbiAgICAubWFwKGxldHRlciA9PiBBTElHTk1FTlRfTUFQW2xldHRlcl0gfHwgbGV0dGVyKVxuICAgIC5qb2luKFwiIFwiKTtcbn1cblxuY29uc3QgUkFXX05QQ1M6IHN0cmluZ1tdID0gW1xuICBcIkFianVyZXJcIiwgXCJBY29seXRlXCIsIFwiQXBwcmVudGljZSBXaXphcmRcIiwgXCJBcmNoZHJ1aWRcIiwgXCJBcmNoZXJcIiwgXCJBcmNobWFnZVwiLCBcIkFzc2Fzc2luXCIsXG4gIFwiQmFuZGl0XCIsIFwiQmFuZGl0IENhcHRhaW5cIiwgXCJCYXJkXCIsIFwiQmVyc2Vya2VyXCIsIFwiQmxhY2tndWFyZFwiLCBcIkNoYW1waW9uXCIsIFwiQ29tbW9uZXJcIixcbiAgXCJDb25qdXJlclwiLCBcIkN1bHQgRmFuYXRpY1wiLCBcIkN1bHRpc3RcIiwgXCJEaXZpbmVyXCIsIFwiRHJ1aWQgKE5QQylcIiwgXCJEcnVpZCBOUENcIiwgXCJFbmNoYW50ZXJcIixcbiAgXCJFdm9rZXJcIiwgXCJHbGFkaWF0b3JcIiwgXCJHdWFyZFwiLCBcIklsbHVzaW9uaXN0XCIsIFwiS25pZ2h0XCIsIFwiS3Jha2VuIFByaWVzdFwiLCBcIk1hZ2VcIixcbiAgXCJNYXJ0aWFsIEFydHMgQWRlcHRcIiwgXCJNYXN0ZXIgVGhpZWZcIiwgXCJOZWNyb21hbmNlclwiLCBcIk5vYmxlXCIsIFwiUHJpZXN0XCIsIFwiU2NvdXRcIiwgXCJTcHlcIixcbiAgXCJTd2FzaGJ1Y2tsZXJcIiwgXCJUaHVnXCIsIFwiVHJhbnNtdXRlclwiLCBcIlRyaWJhbCBXYXJyaW9yXCIsIFwiVmV0ZXJhblwiLCBcIldhciBQcmllc3RcIixcbiAgXCJXYXJsb2NrIG9mIHRoZSBBcmNoZmV5XCIsIFwiV2FybG9jayBvZiB0aGUgRmllbmRcIiwgXCJXYXJsb2NrIG9mIHRoZSBHcmVhdCBPbGQgT25lXCIsIFwiV2FybG9yZFwiXG5dO1xuY29uc3QgTk9STUFMSVpFRF9OUENfTkFNRVMgPSBuZXcgU2V0KFJBV19OUENTLm1hcChuID0+IG5vcm1hbGl6ZU5hbWUobikpKTtcblxuZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbmFtZS5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gY2F0ZWdvcml6ZUNyZWF0dXJlKG1vbnN0ZXI6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IHR5cGVWYWx1ZSA9IG1vbnN0ZXIudHlwZTtcbiAgY29uc3QgbmFtZSA9IG1vbnN0ZXIubmFtZTtcbiAgY29uc3QgdCA9IHR5cGVvZiB0eXBlVmFsdWUgPT09IFwic3RyaW5nXCJcbiAgICA/IHR5cGVWYWx1ZS50b0xvd2VyQ2FzZSgpXG4gICAgOiB0eXBlVmFsdWU/LnR5cGU/LnRvTG93ZXJDYXNlKCkgfHwgU3RyaW5nKHR5cGVWYWx1ZSkudG9Mb3dlckNhc2UoKTtcblxuICBjb25zdCBub3JtYWxpemVkTmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSk7XG5cbiAgaWYgKG1vbnN0ZXIuaXNOcGMgfHwgbW9uc3Rlci5pc05hbWVkQ3JlYXR1cmUpIHJldHVybiBcIlN0b3J5IE5QQ3NcIjtcbiAgaWYgKHQgPT09IFwiYmVhc3RcIikgcmV0dXJuIFwiQmVhc3RzXCI7XG4gIGlmICh0ID09PSBcImh1bWFub2lkXCIgJiYgTk9STUFMSVpFRF9OUENfTkFNRVMuaGFzKG5vcm1hbGl6ZWROYW1lKSkgcmV0dXJuIFwiTm9uLUJlYXN0c1wiO1xuICBpZiAodCA9PT0gXCJodW1hbm9pZFwiKSByZXR1cm4gXCJNb25zdGVyc1wiO1xuICByZXR1cm4gXCJNb25zdGVyc1wiO1xufVxuXG5mdW5jdGlvbiByZW5kZXJBYmlsaXRpZXNUYWJsZShzdHI6IG51bWJlciwgZGV4OiBudW1iZXIsIGNvbjogbnVtYmVyLCBpbnQ6IG51bWJlciwgd2lzOiBudW1iZXIsIGNoYTogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIFtcbiAgICBgfCBTVFIgfCBERVggfCBDT04gfCBJTlQgfCBXSVMgfCBDSEEgfGAsXG4gICAgYHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHwgLS0tIHxgLFxuICAgIGB8ICR7c3RyfSB8ICR7ZGV4fSB8ICR7Y29ufSB8ICR7aW50fSB8ICR7d2lzfSB8ICR7Y2hhfSB8YFxuICBdLmpvaW4oXCJcXG5cIik7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckVudHJ5KGVudHJ5OiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBuYW1lID0gZW50cnkubmFtZTtcbiAgbGV0IGRlc2NyaXB0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5lbnRyaWVzO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5lbnRyaWVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmVudHJpZXNdO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZGVzYykpIHtcbiAgICBkZXNjcmlwdGlvbnMgPSBlbnRyeS5kZXNjO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeS5kZXNjID09PSBcInN0cmluZ1wiKSB7XG4gICAgZGVzY3JpcHRpb25zID0gW2VudHJ5LmRlc2NdO1xuICB9XG4gIGNvbnN0IHJhdyA9IGRlc2NyaXB0aW9ucy5qb2luKFwiIFwiKTtcbiAgY29uc3QgZGVzYyA9IHJlcGxhY2U1ZVRhZ3MocmF3KTtcbiAgcmV0dXJuIGAqKioke25hbWV9LioqKiAke2Rlc2N9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmVzdGlhcnlGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gICAgaWYgKCFqc29uLm1vbnN0ZXIpIHJldHVybiBbXTtcbiAgICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG4gIFxuICAgIC8vIDEpIEZpbHRlciBvdXQgXHUyMDFDcmVmZXJlbmNlXHUyMDFEIGVudHJpZXMgd2l0aCBubyBBQyBvciBIUFxuICAgIGNvbnN0IHZhbGlkTW9uc3RlcnMgPSBqc29uLm1vbnN0ZXIuZmlsdGVyKChtOiBhbnkpID0+IHtcbiAgICBjb25zdCBhY1ZhbCA9IEFycmF5LmlzQXJyYXkobS5hYylcbiAgICAgID8gbS5hY1swXT8uYWMgPz8gbS5hY1swXVxuICAgICAgOiB0eXBlb2YgbS5hYyA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IG0uYWM/LmFjID8/IG51bGxcbiAgICAgICAgOiBtLmFjO1xuXG4gICAgY29uc3QgaHBWYWwgPSB0eXBlb2YgbS5ocCA9PT0gXCJvYmplY3RcIlxuICAgICAgPyBtLmhwPy5hdmVyYWdlID8/IG0uaHA/LmhwID8/IG51bGxcbiAgICAgIDogbS5ocDtcbiAgICAgIHJldHVybiBhY1ZhbCAhPSBudWxsICYmIGhwVmFsICE9IG51bGwgJiYgIWlzTmFOKE51bWJlcihhY1ZhbCkpICYmICFpc05hTihOdW1iZXIoaHBWYWwpKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGFsbE5hbWVzID0gbmV3IFNldChqc29uLm1vbnN0ZXIubWFwKChtOiBhbnkpID0+IG0ubmFtZSkpO1xuY29uc3QgdmFsaWROYW1lcyA9IG5ldyBTZXQodmFsaWRNb25zdGVycy5tYXAoKG06IGFueSkgPT4gbS5uYW1lKSk7XG5jb25zdCBtaXNzaW5nID0gWy4uLmFsbE5hbWVzXS5maWx0ZXIobmFtZSA9PiAhdmFsaWROYW1lcy5oYXMobmFtZSkpO1xuXG4gIFxuICAgIHJldHVybiB2YWxpZE1vbnN0ZXJzLm1hcCgobW9uc3RlcjogYW55KSA9PiB7XG4gICAgICBjb25zdCBuYW1lICAgICA9IG1vbnN0ZXIubmFtZSBhcyBzdHJpbmc7XG4gICAgICBjb25zdCBzYWZlTmFtZSA9IG5hbWUucmVwbGFjZSgvXFwvL2csIFwiLVwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgUmF3IGZpZWxkcyAmIGZvcm1hdHRpbmcgXHUyMDE0XG4gICAgICBjb25zdCByYXdTaXplICAgICAgPSBtb25zdGVyLnNpemUgfHwgXCJNXCI7XG4gICAgICBjb25zdCByYXdBbGlnbm1lbnQgPSBBcnJheS5pc0FycmF5KG1vbnN0ZXIuYWxpZ25tZW50KVxuICAgICAgICA/IG1vbnN0ZXIuYWxpZ25tZW50LmpvaW4oXCIgXCIpXG4gICAgICAgIDogbW9uc3Rlci5hbGlnbm1lbnQgfHwgXCJOXCI7XG4gICAgbGV0IHJhd1R5cGUgPSBcIlVua25vd25cIjtcblxuICAgIGlmICh0eXBlb2YgbW9uc3Rlci50eXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByYXdUeXBlID0gY2FwaXRhbGl6ZUZpcnN0KG1vbnN0ZXIudHlwZSk7XG4gICAgfSBlbHNlIGlmIChtb25zdGVyLnR5cGU/LnR5cGUpIHtcbiAgICAgIGNvbnN0IGJhc2UgPSBjYXBpdGFsaXplRmlyc3QobW9uc3Rlci50eXBlLnR5cGUpO1xuICAgICAgY29uc3QgdGFncyA9IG1vbnN0ZXIudHlwZS50YWdzPy5sZW5ndGggPyBgICgke21vbnN0ZXIudHlwZS50YWdzLm1hcChjYXBpdGFsaXplRmlyc3QpLmpvaW4oXCIsIFwiKX0pYCA6IFwiXCI7XG4gICAgICByYXdUeXBlID0gYCR7YmFzZX0ke3RhZ3N9YDtcbiAgICB9XG5cbiAgICBtb25zdGVyLl9wYXJzZWRUeXBlID0gcmF3VHlwZTtcbiAgICAgIFxuICAgIC8vIFx1MjAxNCBBQywgSFAsIENSIFx1MjAxNFxuICAgIGNvbnN0IGFjID0gQXJyYXkuaXNBcnJheShtb25zdGVyLmFjKSA/IG1vbnN0ZXIuYWNbMF0uYWMgOiBtb25zdGVyLmFjO1xuICAgIGNvbnN0IGhwID0gbW9uc3Rlci5ocD8uYXZlcmFnZSA/PyBtb25zdGVyLmhwO1xuICAgIGNvbnN0IGNyID0gbW9uc3Rlci5jcjtcblxuICAgIC8vIFNraXAgbW9uc3RlcnMgd2l0aCBubyBBQyBhbmQgSFBcbiAgICBpZiAoIWFjICYmICFocCkge1xuICAgICAgc2tpcHBlZE1vbnN0ZXJzLnB1c2gobW9uc3Rlci5uYW1lKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAgIFxuICAgICAgLy8gXHUyMDE0IEFiaWxpdGllcyBcdTIwMTRcbiAgICAgIGNvbnN0IGFiaWxpdGllcyA9IEFycmF5LmlzQXJyYXkobW9uc3Rlci5hYmlsaXR5KVxuICAgICAgICA/IG1vbnN0ZXIuYWJpbGl0eVxuICAgICAgICA6IFttb25zdGVyLnN0ciwgbW9uc3Rlci5kZXgsIG1vbnN0ZXIuY29uLCBtb25zdGVyLmludCwgbW9uc3Rlci53aXMsIG1vbnN0ZXIuY2hhXTtcbiAgICAgIGNvbnN0IFtzdHIgPSAxMCwgZGV4ID0gMTAsIGNvbiA9IDEwLCBpbnQgPSAxMCwgd2lzID0gMTAsIGNoYSA9IDEwXSA9IGFiaWxpdGllcztcbiAgXG4gICAgICAvLyBcdTIwMTQgU3BlZWQgKGhhbmRsZXMgaG92ZXIgJiBvYmplY3Qgc3BlZWRzKSBcdTIwMTRcbiAgICAgIGNvbnN0IHNwZWVkTGlzdDogc3RyaW5nW10gPSBbXTtcbiAgICAgIGlmICh0eXBlb2YgbW9uc3Rlci5zcGVlZCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBmb3IgKGNvbnN0IFttb2RlLCB2YWxdIG9mIE9iamVjdC5lbnRyaWVzKG1vbnN0ZXIuc3BlZWQpKSB7XG4gICAgICAgICAgaWYgKG1vZGUgPT09IFwiY2FuSG92ZXJcIikgY29udGludWU7XG4gICAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICYmIFwibnVtYmVyXCIgaW4gdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBudW0gID0gKHZhbCBhcyBhbnkpLm51bWJlcjtcbiAgICAgICAgICAgIGNvbnN0IGNvbmQgPSAodmFsIGFzIGFueSkuY29uZGl0aW9uID8gYCAkeyh2YWwgYXMgYW55KS5jb25kaXRpb259YCA6IFwiXCI7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke251bX0gZnQuJHtjb25kfWApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb2RlfSAke3ZhbH0gZnQuYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzcGVlZExpc3QucHVzaChgJHttb25zdGVyLnNwZWVkfSBmdC5gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNwZWVkID0gc3BlZWRMaXN0LmpvaW4oXCIsIFwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgU2Vuc2VzLCBTYXZlcywgU2tpbGxzLCBMYW5ndWFnZXMgKHlvdXIgZXhpc3RpbmcgbG9naWMpIFx1MjAxNFxuICAgICAgY29uc3Qgc2Vuc2VzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgaWYgKG1vbnN0ZXIuc2Vuc2VzKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG1vbnN0ZXIuc2Vuc2VzKSkge1xuICAgICAgICAgIG1vbnN0ZXIuc2Vuc2VzLmZvckVhY2goKHM6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2xlYW4gPSBzLnJlcGxhY2UoL15cXGQrXFxzKi8sIFwiXCIpO1xuICAgICAgICAgICAgc2Vuc2VzLnB1c2goY2FwaXRhbGl6ZUZpcnN0KGNsZWFuKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMobW9uc3Rlci5zZW5zZXMpLmZvckVhY2goKFtzZW5zZSwgdmFsXSkgPT4ge1xuICAgICAgICAgICAgc2Vuc2VzLnB1c2goYCR7Y2FwaXRhbGl6ZUZpcnN0KHNlbnNlKX0gJHt2YWx9YCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHNhdmluZ1Rocm93cyA9IG1vbnN0ZXIuc2F2ZVxuICAgICAgICA/IE9iamVjdC5rZXlzKG1vbnN0ZXIuc2F2ZSkubWFwKGsgPT4gay50b1VwcGVyQ2FzZSgpKVxuICAgICAgICA6IFtdO1xuICAgICAgY29uc3Qgc2tpbGxzID0gbW9uc3Rlci5za2lsbFxuICAgICAgICA/IE9iamVjdC5rZXlzKG1vbnN0ZXIuc2tpbGwpLm1hcChzID0+IGNhcGl0YWxpemVGaXJzdChzKSlcbiAgICAgICAgOiBbXTtcbiAgICAgIGNvbnN0IGxhbmd1YWdlcyA9IEFycmF5LmlzQXJyYXkobW9uc3Rlci5sYW5ndWFnZXMpXG4gICAgICAgID8gbW9uc3Rlci5sYW5ndWFnZXNcbiAgICAgICAgOiBtb25zdGVyLmxhbmd1YWdlc1xuICAgICAgICAgID8gW21vbnN0ZXIubGFuZ3VhZ2VzXVxuICAgICAgICAgIDogW107XG4gIFxuICAgICAgLy8gXHUyMDE0IFNvdXJjZSBzYW5pdGl6YXRpb24gXHUyMDE0XG4gICAgICBsZXQgc291cmNlID0gZ2V0RnVsbFNvdXJjZU5hbWUobW9uc3Rlci5zb3VyY2UsIGVkaXRpb25JZCk7XG4gICAgICBzb3VyY2UgICAgID0gc291cmNlLnJlcGxhY2UoLzovZywgXCIgLVwiKTtcbiAgXG4gICAgICAvLyBcdTIwMTQgQ2F0ZWdvcnkgZm9yIGZvbGRlciBcdTIwMTRcbiAgICAgIGNvbnN0IGNhdGVnb3J5ID0gY2F0ZWdvcml6ZUNyZWF0dXJlKG1vbnN0ZXIpO1xuICBcbiAgICAgIGNvbnN0IGZtICAgPSBidWlsZEZNKG1vbnN0ZXIsIEJFU1RJQVJZX01FVEFfREVGUyk7XG4gICAgICBjb25zdCB5YW1sID0gc2VyaWFsaXplRnJvbnRtYXR0ZXIoZm0pO1xuICBcbiAgICAgIC8vIFx1MjAxNCBCb2R5IFx1MjAxNFxuICAgICAgbGV0IGJvZHkgPSBgIyAke25hbWV9XFxuXFxuJHtmb3JtYXRTaXplQWJicmV2KHJhd1NpemUpfSAke3Jhd1R5cGV9LCAke2Zvcm1hdEFsaWdubWVudEFiYnJldihyYXdBbGlnbm1lbnQpfVxcblxcbmAgK1xuICAgICAgICAgICAgICAgICBgKipBcm1vciBDbGFzcyoqOiAke2FjfVxcbmAgK1xuICAgICAgICAgICAgICAgICBgKipIaXQgUG9pbnRzKio6ICR7aHB9XFxuYCArXG4gICAgICAgICAgICAgICAgIGAqKlNwZWVkKio6ICR7c3BlZWR9XFxuYCArXG4gICAgICAgICAgICAgICAgIChzYXZpbmdUaHJvd3MubGVuZ3RoID8gYCoqU2F2aW5nIFRocm93cyoqOiAke3NhdmluZ1Rocm93cy5qb2luKFwiLCBcIil9XFxuYCA6IFwiXCIpICtcbiAgICAgICAgICAgICAgICAgKHNraWxscy5sZW5ndGggICAgICAgPyBgKipTa2lsbHMqKjogJHtza2lsbHMuam9pbihcIiwgXCIpfVxcbmAgICAgICAgOiBcIlwiKSArXG4gICAgICAgICAgICAgICAgIChzZW5zZXMubGVuZ3RoICAgICAgID8gYCoqU2Vuc2VzKio6ICR7c2Vuc2VzLmpvaW4oXCIsIFwiKX1cXG5gICAgICAgIDogXCJcIikgK1xuICAgICAgICAgICAgICAgICAobGFuZ3VhZ2VzLmxlbmd0aCAgICA/IGAqKkxhbmd1YWdlcyoqOiAke2xhbmd1YWdlcy5qb2luKFwiLCBcIil9XFxuYCAgIDogXCJcIikgK1xuICAgICAgICAgICAgICAgICBgKipDaGFsbGVuZ2UqKjogJHtjcn1cXG5cXG5gICtcbiAgICAgICAgICAgICAgICAgcmVuZGVyQWJpbGl0aWVzVGFibGUoc3RyLCBkZXgsIGNvbiwgaW50LCB3aXMsIGNoYSk7XG4gIFxuICAgICAgaWYgKG1vbnN0ZXIudHJhaXQpICAgICBib2R5ICs9IGBcXG5cXG4jIyMgVHJhaXRzXFxuJHttb25zdGVyLnRyYWl0Lm1hcChyZW5kZXJFbnRyeSkuam9pbihcIlxcblxcblwiKX1gO1xuICAgICAgaWYgKG1vbnN0ZXIuYWN0aW9uKSAgICBib2R5ICs9IGBcXG5cXG4jIyMgQWN0aW9uc1xcbiR7bW9uc3Rlci5hY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5yZWFjdGlvbikgIGJvZHkgKz0gYFxcblxcbiMjIyBSZWFjdGlvbnNcXG4ke21vbnN0ZXIucmVhY3Rpb24ubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gICAgICBpZiAobW9uc3Rlci5sZWdlbmRhcnkpIGJvZHkgKz0gYFxcblxcbiMjIyBMZWdlbmRhcnkgQWN0aW9uc1xcbiR7bW9uc3Rlci5sZWdlbmRhcnkubWFwKHJlbmRlckVudHJ5KS5qb2luKFwiXFxuXFxuXCIpfWA7XG4gIFxuICAgICAgY29uc3QgY29udGVudCA9IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtib2R5fWA7XG4gIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGF0aDogICAgYCR7Y2F0ZWdvcnl9LyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgICAgY29udGVudCxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cbiIsICJpbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9ICAgICBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBnZXRGdWxsU291cmNlTmFtZSB9IGZyb20gXCIuL2hlbHBlcnMvc291cmNlTWFwXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgSVRFTV9NRVRBX0RFRlMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5cblxuLyoqIEhlbHBlciB0byBjYXBpdGFsaXplIGZpcnN0IGxldHRlciAqL1xuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0KHM6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5leHBvcnQgY29uc3QgREFNQUdFX1RZUEVfTUFQOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gIFA6IFwiUGllcmNpbmdcIixcbiAgQjogXCJCbHVkZ2VvbmluZ1wiLFxuICBTOiBcIlNsYXNoaW5nXCIsXG4gIE46IFwiTmVjcm90aWNcIixcbiAgUjogXCJSYWRpYW50XCIsXG4gIEY6IFwiRmlyZVwiLFxuICBDOiBcIkNvbGRcIixcbiAgTDogXCJMaWdodG5pbmdcIixcbiAgVDogXCJUaHVuZGVyXCIsXG4gIEE6IFwiQWNpZFwiLFxuICBIOiBcIkhlYWxpbmdcIixcbiAgVTogXCJGb3JjZVwiLFxuICBWOiBcIlBzeWNoaWNcIixcbn07XG5cbmV4cG9ydCBjb25zdCBQUk9QRVJUWV9NQVA6IFJlY29yZDxzdHJpbmcsc3RyaW5nPiA9IHtcbiAgQTogXCJBbW11bml0aW9uXCIsXG4gIEY6IFwiRmluZXNzZVwiLFxuICBIOiBcIkhlYXZ5XCIsXG4gIEw6IFwiTGlnaHRcIixcbiAgUjogXCJSZWxvYWRcIixcbiAgUzogXCJTcGVjaWFsXCIsXG4gIFwiMkhcIjogXCJUd28tSGFuZGVkXCIsXG4gIFQ6IFwiVGhyb3duXCIsXG4gIFY6IFwiVmVyc2F0aWxlXCJcbn07XG5cbmV4cG9ydCBjb25zdCBJVEVNX1RZUEVfTUFQOiBSZWNvcmQ8c3RyaW5nLHN0cmluZz4gPSB7XG4gICRHOiAgXCJHZW1cIixcbiAgQTogICBcIkFtbXVuaXRpb25cIixcbiAgQVQ6ICBcIkFydGlzYW4gVG9vbHNcIixcbiAgRVhQOiBcIkV4cGxvc2l2ZVwiLFxuICBHOiAgIFwiR2VhclwiLFxuICBHUzogIFwiR2FtZVwiLFxuICBIQTogIFwiSGVhdnkgQXJtb3JcIixcbiAgSU5TOiBcIkluc3RydW1lbnRcIixcbiAgTEE6ICBcIkxpZ2h0IEFybW9yXCIsXG4gIE06ICAgXCJXZWFwb25cIixcbiAgTUE6ICBcIk1lZGl1bSBBcm1vclwiLFxuICBNTlQ6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBQOiAgIFwiQ29uc3VtYWJsZVwiLFxuICBSOiAgIFwiUmFuZ2VkIFdlYXBvblwiLFxuICBSRDogIFwiUm9kXCIsXG4gIFJHOiAgXCJSaW5nXCIsXG4gIFM6ICAgXCJTaGllbGRcIixcbiAgU0M6ICBcIlNjcm9sbFwiLFxuICBTQ0Y6IFwiU3BlbGwgQ2FzdGluZyBGb2N1c1wiLFxuICBTSFA6IFwiU2hpcFwiLFxuICBUOiAgIFwiVG9vbFwiLFxuICBUQUg6IFwiTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBURzogIFwiVHJhZGUgR29vZHNcIixcbiAgVkVIOiBcIk1vdW50cyBhbmQgVmVoaWNsZXNcIixcbiAgV0Q6ICBcIldhbmRcIixcbn07XG5cbi8qKiBjb2RlIFx1MjE5MiBmdWxsIGZvbGRlciBwYXRoIHVuZGVyIEl0ZW1zLyAqL1xuY29uc3QgY29kZUZvbGRlck1hcDogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICBcIkFcIjogICBcIldlYXBvbnMgYW5kIEFybW9yL0FtbXVuaXRpb25cIixcbiAgXCJNXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9XZWFwb25zXCIsXG4gIFwiUlwiOiAgIFwiV2VhcG9ucyBhbmQgQXJtb3IvUmFuZ2VkIFdlYXBvbnNcIixcbiAgXCJTXCI6ICAgXCJXZWFwb25zIGFuZCBBcm1vci9TaGllbGRzXCIsXG4gIFwiTEFcIjogIFwiV2VhcG9ucyBhbmQgQXJtb3IvQXJtb3IvTGlnaHQgQXJtb3JcIixcbiAgXCJNQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9NZWRpdW0gQXJtb3JcIixcbiAgXCJIQVwiOiAgXCJXZWFwb25zIGFuZCBBcm1vci9Bcm1vci9IZWF2eSBBcm1vclwiLFxuICBcIkVYUFwiOiBcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnMvRXhwbG9zaXZlc1wiLFxuXG4gIFwiUkRcIjogIFwiTWFnaWNhbCBJdGVtcy9Sb2RzXCIsXG4gIFwiUkdcIjogIFwiTWFnaWNhbCBJdGVtcy9SaW5nc1wiLFxuICBcIlNDXCI6ICBcIk1hZ2ljYWwgSXRlbXMvU2Nyb2xsc1wiLFxuICBcIlNDRlwiOiBcIk1hZ2ljYWwgSXRlbXMvU3BlbGwgQ2FzdGluZyBGb2N1c1wiLFxuICBcIldEXCI6ICBcIk1hZ2ljYWwgSXRlbXMvV2FuZHNcIixcblxuICBcIiRHXCI6IFwiVmFsdWFibGVzL0dlbXNcIixcbiAgXCJUR1wiOiBcIlZhbHVhYmxlcy9UcmFkZSBHb29kc1wiLFxuXG4gIFwiQVRcIjogIFwiQXJ0aXNhbiBHb29kcy9Ub29sc1wiLFxuICBcIlRcIjogICBcIkFydGlzYW4gR29vZHMvVG9vbHNcIixcbiAgXCJJTlNcIjogXCJBcnRpc2FuIEdvb2RzL0luc3RydW1lbnRzXCIsXG4gIFwiR1NcIjogIFwiQXJ0aXNhbiBHb29kcy9HYW1lc1wiLFxuXG4gIFwiR1wiOiAgIFwiR2VhclwiLFxuICBcIk1OVFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBcIlRBSFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuICBcIlZFSFwiOiBcIkdlYXIvTW91bnRzIGFuZCBWZWhpY2xlc1wiLFxuXG4gIFwiUFwiOiAgIFwiQ29uc3VtYWJsZXNcIixcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUl0ZW1zRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCByYXdJdGVtczogYW55W10gPSBbXTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi5iYXNlaXRlbSkpIHJhd0l0ZW1zLnB1c2goLi4uanNvbi5iYXNlaXRlbSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24uaXRlbSkpICAgICByYXdJdGVtcy5wdXNoKC4uLmpzb24uaXRlbSk7XG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24ub2JqZWN0KSkgICByYXdJdGVtcy5wdXNoKC4uLmpzb24ub2JqZWN0KTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbi52ZWhpY2xlKSkgIHJhd0l0ZW1zLnB1c2goLi4uanNvbi52ZWhpY2xlKTtcbiAgaWYgKCFyYXdJdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBiYXNlTmFtZXMgPSBuZXcgU2V0PHN0cmluZz4oXG4gICAgQXJyYXkuaXNBcnJheShqc29uLmJhc2VpdGVtKSA/IGpzb24uYmFzZWl0ZW0ubWFwKChiOiBhbnkpID0+IGIubmFtZSkgOiBbXVxuICApO1xuICBjb25zdCBvdXQ6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgZm9yIChjb25zdCBpdCBvZiByYXdJdGVtcykge1xuICAgIGNvbnN0IG5hbWUgICAgID0gaXQubmFtZSBhcyBzdHJpbmc7XG4gICAgY29uc3Qgc2FmZU5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXC9cXFxcOl0vZywgXCItXCIpO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGZvbGRlclxuICAgIGNvbnN0IHJhd0NvZGUgPSAoaXQudHlwZSBhcyBzdHJpbmcgfHwgXCJcIikuc3BsaXQoXCJ8XCIpWzBdXG4gICAgICAgIC5zcGxpdChcInxcIilbMF0gICAgICAvLyBkcm9wIGFueXRoaW5nIGFmdGVyIFx1MjAxQ3xcdTIwMURcbiAgICAgICAgLnJlcGxhY2UoL15cXCQvLCBcIlwiKTsgLy8gc3RyaXAgbGVhZGluZyBcdTIwMUMkXHUyMDFEXG4gICAgbGV0IGZvbGRlciAgICA9IGNvZGVGb2xkZXJNYXBbcmF3Q29kZV0gPz8gXCJNaXNjZWxsYW5lb3VzXCI7XG5cbiAgICAvLyBWYXJpYW50c1xuICAgIGlmIChpdC5ib251c1dlYXBvbikge1xuICAgICAgZm9sZGVyID0gYCR7Zm9sZGVyfS9WYXJpYW50c2A7XG4gICAgfVxuICAgIC8vIE1hZ2ljYWxcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IGlzTWFnaWMgPSAhIWl0LndvbmRyb3VzIHx8ICEhaXQucmVxQXR0dW5lIHx8ICEhaXQucmVxX2F0dHVuZVxuICAgICAgICB8fCBTdHJpbmcoaXQucmFyaXR5KS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwibWFnaWNcIik7XG4gICAgICBpZiAoaXNNYWdpYykge1xuICAgICAgICBjb25zdCBbICwgLi4ucmVzdCBdID0gZm9sZGVyLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgZm9sZGVyID0gW1wiTWFnaWNhbCBJdGVtc1wiLCAuLi5yZXN0XS5qb2luKFwiL1wiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXZWFwb24gY2F0ZWdvcnkgc3ViZm9sZGVyXG4gICAgaWYgKChmb2xkZXIuc3RhcnRzV2l0aChcIldlYXBvbnMgYW5kIEFybW9yL1dlYXBvbnNcIikgfHxcbiAgICAgICAgIGZvbGRlci5zdGFydHNXaXRoKFwiV2VhcG9ucyBhbmQgQXJtb3IvUmFuZ2VkIFdlYXBvbnNcIikpICYmIGl0LndlYXBvbkNhdGVnb3J5KSB7XG4gICAgICBmb2xkZXIgPSBgJHtmb2xkZXJ9LyR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX1gO1xuICAgIH1cblxuICAgIC8vIG1ha2UgZWRpdGlvbklkIGF2YWlsYWJsZSBmb3IgdGhlIFNPVVJDRSBmaWVsZFxuKGpzb24gYXMgYW55KS5fZWRpdGlvbklkID0gZWRpdGlvbklkO1xuXG4vLyBidWlsZCBhIEZyb250bWF0dGVyIG9iamVjdCBmcm9tIHRoZSBKU09OXG5jb25zdCBmbSAgID0gYnVpbGRGTShpdCwgSVRFTV9NRVRBX0RFRlMpO1xuXG5pZiAocmF3Q29kZSA9PT0gXCJNXCIgJiYgaXQud2VhcG9uQ2F0ZWdvcnkpIHtcbiAgLy8gXHUyMDFDTVx1MjAxRCBcdTIxOTIgdXNlIHdlYXBvbkNhdGVnb3J5IChcdTIwMUNTaW1wbGVcdTIwMUQvXHUyMDFDTWFydGlhbFx1MjAxRClcbiAgZm0udHlwZSA9IGAke2NhcGl0YWxpemVGaXJzdChpdC53ZWFwb25DYXRlZ29yeSl9IFdlYXBvbmA7XG59IGVsc2UgaWYgKElURU1fVFlQRV9NQVBbcmF3Q29kZV0pIHtcbiAgLy8gYW55IG90aGVyIGNvZGUgXHUyMTkyIG1hcHBlZCBsYWJlbFxuICBmbS50eXBlID0gSVRFTV9UWVBFX01BUFtyYXdDb2RlXTtcbn1cbmlmIChBcnJheS5pc0FycmF5KGZtLmRhbWFnZVR5cGVzKSkge1xuICBmbS5kYW1hZ2VUeXBlcyA9IGZtLmRhbWFnZVR5cGVzLm1hcCgoY29kZTogc3RyaW5nKSA9PlxuICAgIERBTUFHRV9UWVBFX01BUFtjb2RlXSB8fCBjb2RlXG4gICk7XG59XG4vLyBzZXJpYWxpemUgaXQgdG8gWUFNTFxubGV0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSk7XG5cbi8vIGlmIHlvdSBzdGlsbCB3YW50IHBhY2tDb250ZW50cywgYXBwZW5kIGl0IGhlcmU6XG5pZiAoQXJyYXkuaXNBcnJheShpdC5wYWNrQ29udGVudHMpKSB7XG4gIHlhbWwgKz0gXCJcXG5wYWNrQ29udGVudHM6XCI7XG4gIGZvciAoY29uc3QgcGMgb2YgaXQucGFja0NvbnRlbnRzKSB7XG4gICAgeWFtbCArPSBgXFxuICAtIGl0ZW06IFwiJHtwYy5pdGVtfVwiXFxuICAgIHF1YW50aXR5OiAke3BjLnF1YW50aXR5fWA7XG4gIH1cbn1cbiBcbi8vIHdyYXAgaXQgaW4gdGhlIFlBTUwgZmVuY2VcbmNvbnN0IGZyb250bWF0dGVyID0gYC0tLVxcbiR7eWFtbH1cXG4tLS1gO1xuXG5cbiAgICAvLyBCb2R5IGxpbmVzXG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGluZXMucHVzaChgIyAke25hbWV9YCk7XG4gICAgbGluZXMucHVzaChcIlwiKTtcblxuICAgIC8vIFN1YnRpdGxlXG4gICAgY29uc3Qgc3VidGl0bGUgPSBpdC53ZWFwb25cbiAgICAgID8gYCR7Y2FwaXRhbGl6ZUZpcnN0KGl0LndlYXBvbkNhdGVnb3J5KX0gV2VhcG9uYFxuICAgICAgOiBpdC5hcm1vclxuICAgICAgICA/IGZvbGRlci5zcGxpdChcIi9cIikucG9wKCkgfHwgXCJBcm1vclwiXG4gICAgICAgIDogXCJcIjtcbiAgICBpZiAoc3VidGl0bGUpIGxpbmVzLnB1c2goYCMjIyAqJHtzdWJ0aXRsZX0qYCk7XG5cbiAgICAvLyBTdGF0cyBsaW5lc1xuICAgIGlmIChpdC53ZWFwb24pIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqQ2F0ZWdvcnkqKjogJHtjYXBpdGFsaXplRmlyc3QoaXQud2VhcG9uQ2F0ZWdvcnkpfWApO1xuICAgICAgbGluZXMucHVzaChgKipEYW1hZ2UqKjogJHtpdC5kbWcxID8/IFwiXCJ9JHtpdC5kbWcyID8gYCAvICR7aXQuZG1nMn1gIDogXCJcIn1gKTtcbiAgICAgIGNvbnN0IHR5cGVzQm9keSA9IChBcnJheS5pc0FycmF5KGl0LmRtZ1R5cGUpID8gaXQuZG1nVHlwZSA6IFtpdC5kbWdUeXBlXSlcbiAgICAgICAgLmZpbHRlcigodDogYW55KSA9PiBCb29sZWFuKHQpKVxuICAgICAgICAubWFwKCh0OiBzdHJpbmcpID0+IERBTUFHRV9UWVBFX01BUFt0XSB8fCB0KTtcbiAgICAgIGxpbmVzLnB1c2goYCoqRGFtYWdlIFR5cGUqKjogJHt0eXBlc0JvZHkuam9pbihcIiwgXCIpfWApO1xuICAgICAgbGluZXMucHVzaChgKipSYW5nZSoqOiAke2l0LnJhbmdlID8/IFwiXHUyMDE0XCJ9YCk7XG4gICAgICBsaW5lcy5wdXNoKGAqKlJlbG9hZCoqOiAke2l0LnJlbG9hZCA/PyBcIlx1MjAxNFwifWApO1xuICAgICAgaWYgKGl0LmFtbW9UeXBlKSBsaW5lcy5wdXNoKGAqKkFtbW8gVHlwZSoqOiAke2l0LmFtbW9UeXBlfWApO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXQucHJvcGVydHkpICYmIGl0LnByb3BlcnR5Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBwcm9wc0JvZHkgPSBpdC5wcm9wZXJ0eS5tYXAoKHA6IHN0cmluZykgPT4gUFJPUEVSVFlfTUFQW3BdIHx8IHApO1xuICAgICAgICBsaW5lcy5wdXNoKGAqKlByb3BlcnRpZXMqKjogJHtwcm9wc0JvZHkuam9pbihcIiwgXCIpfWApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXQuYXJtb3IpIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqQXJtb3IgQ2xhc3MqKjogJHtpdC5hY31gKTtcbiAgICAgIGlmIChpdC5zdGVhbHRoKSBsaW5lcy5wdXNoKGAqKlN0ZWFsdGggRGlzYWR2YW50YWdlKio6IHRydWVgKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gRGVzY3JpcHRpb24gd2l0aCBuZXN0ZWQgZW50cmllc1xuICAgIGNvbnN0IGRlc2MgPSBpdC5lbnRyaWVzID8/IGl0LmRlc2M7XG4gICAgaWYgKGRlc2MpIHtcbiAgICAgIGZvciAoY29uc3QgcCBvZiBBcnJheS5pc0FycmF5KGRlc2MpID8gZGVzYyA6IFtkZXNjXSkge1xuICAgICAgICBpZiAodHlwZW9mIHAgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIHJlcGxhY2U1ZVRhZ3MocCkuc3BsaXQoXCJcXG5cIikpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAocCAmJiB0eXBlb2YgcCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBpZiAobGluZXNbbGluZXMubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHtcbiAgICAgICAgICAgIGxpbmVzLnBvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsaW5lcy5wdXNoKGAjIyMjICR7cC5uYW1lfWApO1xuICAgICAgICAgIGNvbnN0IHN1YiA9IEFycmF5LmlzQXJyYXkocC5lbnRyaWVzKSA/IHAuZW50cmllcyA6IFtdO1xuICAgICAgICAgIGZvciAoY29uc3Qgc3Agb2Ygc3ViKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVwbGFjZTVlVGFncyhzcCkuc3BsaXQoXCJcXG5cIikpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGJvZHkgPSBsaW5lcy5qb2luKFwiXFxuXCIpO1xuXG4gICAgb3V0LnB1c2goeyBwYXRoOiBgSXRlbXMvJHtmb2xkZXJ9LyR7c2FmZU5hbWV9Lm1kYCwgY29udGVudDogYCR7ZnJvbnRtYXR0ZXJ9XFxuXFxuJHtib2R5fWAgfSk7XG4gIH1cblxuICByZXR1cm4gb3V0LnNvcnQoKGEsYikgPT4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKSk7XG59IiwgImltcG9ydCB7IGdldEZ1bGxTb3VyY2VOYW1lIH0gZnJvbSBcIi4vc291cmNlTWFwXCI7XG5pbXBvcnQgeyBmb3JtYXRTaXplQWJicmV2LCBmb3JtYXRBbGlnbm1lbnRBYmJyZXYgfSBmcm9tIFwiLi4vYmVzdGlhcnlcIjtcbmltcG9ydCB7IGZvcm1hdFJhbmdlLCBmb3JtYXRUaW1lLCBmb3JtYXREdXJhdGlvbiwgU0NIT09MX01BUCB9IGZyb20gXCIuLi9zcGVsbHNcIjtcbmltcG9ydCB7IFBST1BFUlRZX01BUCwgREFNQUdFX1RZUEVfTUFQIH0gZnJvbSBcIi4uL2l0ZW1zXCI7XG5cbmZ1bmN0aW9uIGJsYW5rVW5kZWZpbmVkKHZhbDogYW55KTogYW55IHtcbiAgcmV0dXJuIHZhbCA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHZhbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhcChzdHI6IGFueSk6IHN0cmluZyB7XG4gIGlmICh0eXBlb2Ygc3RyICE9PSBcInN0cmluZ1wiKSByZXR1cm4gXCJcIjtcbiAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbn1cblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFVuaXZlcnNhbCBmcm9udG1hdHRlciBrZXlzIFx1MjUwMFx1MjUwMFx1MjUwMCAgXG5leHBvcnQgY29uc3QgRk1fRklFTERTID0ge1xuICBBQklMSVRZX0JPTlVTRVM6ICAgIFwiYWJpbGl0eV9ib251c2VzXCIsXG4gIEFDOiAgICAgICAgICAgICAgICAgXCJBQ1wiLFxuICBBTElHTk1FTlQ6ICAgICAgICAgIFwiQWxpZ25tZW50XCIsXG4gIEFNTU9fVFlQRTogICAgICAgICAgXCJBbW1vIFR5cGVcIixcbiAgQVJNT1JfUFJPRklDSUVOQ0lFUzpcImFybW9yLXByb2ZcIixcbiAgQVRUQUNLX1RZUEU6ICAgICAgICBcImF0dGFja190eXBlXCIsXG4gIEFUVFVORU1FTlQ6ICAgICAgICAgXCJBdHR1bmVtZW50XCIsXG4gIEFUVFVORV9SRVE6ICAgICAgICAgXCJBdHR1bmVfUmVxXCIsXG4gIENBU1RJTkdfVElNRTogICAgICAgXCJjYXN0aW5nX3RpbWVcIixcbiAgQ0hBUklTTUE6ICAgICAgICAgICBcImNoYXJpc21hXCIsXG4gIENIQV9NT0Q6ICAgICAgICAgICAgXCJjaGFfbW9kXCIsXG4gIENPTkNFTlRSQVRJT046ICAgICAgXCJjb25jZW50cmF0aW9uXCIsXG4gIENPTkRJVElPTl9JTU06ICAgICAgXCJjb25kX2ltbXVuaXR5XCIsXG4gIENPTlNUSVRVVElPTjogICAgICAgXCJjb25zdGl0dXRpb25cIixcbiAgQ09OX01PRDogICAgICAgICAgICBcImNvbl9tb2RcIixcbiAgQ09TVDogICAgICAgICAgICAgICBcImNvc3RcIixcbiAgQ0hBTExFTkdFX1JBVElORzogICBcIkNSXCIsXG4gIERBTUFHRV9UWVBFOiAgICAgICAgXCJkYW1hZ2VfdHlwZVwiLFxuICBEQU1BR0VfVFlQRVM6ICAgICAgIFwiZGFtYWdlVHlwZXNcIixcbiAgREFNQUdFOiAgICAgICAgICAgICBcImRhbWFnZVwiLFxuICBEQU1BR0VfUkVTOiAgICAgICAgIFwiZG1nX3Jlc2lzdGFuY2VcIixcbiAgREFNQUdFX0lNTTogICAgICAgICBcImRtZ19pbW11bml0eVwiLFxuICBERVhURVJJVFk6ICAgICAgICAgIFwiZGV4dGVyaXR5XCIsXG4gIERFWF9NT0Q6ICAgICAgICAgICAgXCJkZXhfbW9kXCIsXG4gIERVUkFUSU9OOiAgICAgICAgICAgXCJkdXJhdGlvblwiLFxuICBSVUxFU0VUOiAgICAgICAgICAgIFwicnVsZXNldFwiLFxuICBIUDogICAgICAgICAgICAgICAgIFwiSFBcIixcbiAgSU5URUxMSUdFTkNFOiAgICAgICBcImludGVsbGlnZW5jZVwiLFxuICBJTlRfTU9EOiAgICAgICAgICAgIFwiaW50X21vZFwiLFxuICBMQU5HVUFHRVM6ICAgICAgICAgIFwibGFuZ3VhZ2VzXCIsXG4gIExFVkVMOiAgICAgICAgICAgICAgXCJsZXZlbFwiLFxuICBNQUdJQ0FMOiAgICAgICAgICAgIFwibWFnaWNhbFwiLFxuICBNQVRFUklBTDogICAgICAgICAgIFwibWF0ZXJpYWxcIixcbiAgTkFNRTogICAgICAgICAgICAgICBcIm5hbWVcIixcbiAgUFJPUEVSVElFUzogICAgICAgICBcInByb3BlcnRpZXNcIixcbiAgUkFOR0U6ICAgICAgICAgICAgICBcInJhbmdlXCIsXG4gIFJBUklUWTogICAgICAgICAgICAgXCJyYXJpdHlcIixcbiAgUkVMT0FEOiAgICAgICAgICAgICBcInJlbG9hZFwiLFxuICBSSVRVQUw6ICAgICAgICAgICAgIFwicml0dWFsXCIsXG4gIFNBVkU6ICAgICAgICAgICAgICAgXCJzYXZlXCIsXG4gIFNBVklOR19USFJPV1M6ICAgICAgXCJzYXZpbmdfdGhyb3dzXCIsXG4gIFNDSE9PTDogICAgICAgICAgICAgXCJzY2hvb2xcIixcbiAgU0VOU0VTOiAgICAgICAgICAgICBcInNlbnNlc1wiLFxuICBTSVpFOiAgICAgICAgICAgICAgIFwic2l6ZVwiLFxuICBTS0lMTFM6ICAgICAgICAgICAgIFwic2tpbGxzXCIsXG4gIFNLSUxMX0NIT0lDRV9MSVNUOiAgXCJza2lsbF9jaG9pY2VfbGlzdFwiLFxuICBTT01BVElDOiAgICAgICAgICAgIFwic29tYXRpY1wiLFxuICBTT1VSQ0U6ICAgICAgICAgICAgIFwic291cmNlXCIsXG4gIFNQRUNJRVM6ICAgICAgICAgICAgXCJzcGVjaWVzXCIsXG4gIFNQRUVEOiAgICAgICAgICAgICAgXCJzcGVlZFwiLFxuICBTVEVBTFRIX0RJU0FEVkFOVEFHRTogXCJzdGVhbHRoRGlzYWR2YW50YWdlXCIsXG4gIFNUUkVOR1RIOiAgICAgICAgICAgXCJzdHJlbmd0aFwiLFxuICBTVFJfTU9EOiAgICAgICAgICAgIFwic3RyX21vZFwiLFxuICBTVUJSQUNFUzogICAgICAgICAgIFwic3VicmFjZXNcIixcbiAgVE9PTF9QUk9GSUNJRU5DSUVTOiBcInRvb2wtcHJvZlwiLFxuICBUT09MX0NIT0lDRV9MSVNUOiAgXCJ0b29sX2Nob2ljZV9saXN0XCIsXG4gIFRSQUlUUzogICAgICAgICAgICAgXCJ0cmFpdHNcIixcbiAgVFlQRTogICAgICAgICAgICAgICBcInR5cGVcIixcbiAgVkFSSUFOVDogICAgICAgICAgICBcIlZhcmlhbnRcIixcbiAgVkVSQkFMOiAgICAgICAgICAgICBcInZlcmJhbFwiLFxuICBXRUFQT05fUFJPRklDSUVOQ0lFUzogXCJ3ZWFwb24tcHJvZlwiLFxuICBXRUlHSFQ6ICAgICAgICAgICAgIFwid2VpZ2h0XCIsXG4gIFdJU0RPTTogICAgICAgICAgICAgXCJ3aXNkb21cIixcbiAgV0lTX01PRDogICAgICAgICAgICBcIndpc19tb2RcIixcbn0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIEZNS2V5ID0ga2V5b2YgdHlwZW9mIEZNX0ZJRUxEUztcbmV4cG9ydCB0eXBlIEZyb250bWF0dGVyID0gUGFydGlhbDxSZWNvcmQ8dHlwZW9mIEZNX0ZJRUxEU1tGTUtleV0sIHVua25vd24+PjtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIERlZmluaXRpb24gb2YgYSBzaW5nbGUgZmllbGQgbWFwcGluZyBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBpbnRlcmZhY2UgRmllbGREZWYge1xuICAvKiogV2hpY2ggY2FsbFx1MjAxMHNpZ24gKGtleSBpbiBGTV9GSUVMRFMpICovXG4gIGNhbGxTaWduOiBGTUtleTtcbiAgLyoqIFdoaWNoIEpTT04gcHJvcGVydHkgdG8gcmVhZCAqL1xuICBqc29uS2V5OiAgc3RyaW5nIHwgc3RyaW5nW107XG4gIC8qKiBPcHRpb25hbCB0cmFuc2Zvcm1lcjogcmF3IEpTT04gXHUyMTkyIGZpbmFsIHZhbHVlICovXG4gIGNvbnY/OiAgICAocmF3OiBhbnksIGFsbEpzb24/OiBhbnkpID0+IHVua25vd247XG59XG5cbmNvbnN0IHVuaWZpZWRBcm1vclByb2ZzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT5cbiAgQXJyYXkuaXNBcnJheSh2YWw/LmFybW9yKSA/IHZhbC5hcm1vci5tYXAoY2FwKSA6XG4gIEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbC5tYXAoY2FwKSA6IFtdO1xuXG5jb25zdCB1bmlmaWVkV2VhcG9uUHJvZnMgPSAodmFsOiBhbnkpOiBzdHJpbmdbXSA9PlxuICBBcnJheS5pc0FycmF5KHZhbD8ud2VhcG9ucykgPyB2YWwud2VhcG9ucy5tYXAoY2FwKSA6XG4gIEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbC5tYXAoY2FwKSA6IFtdO1xuXG5cbmNvbnN0IHVuaWZpZWRTYXZlcyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgcmV0dXJuIHZhbC5tYXAoKGs6IHN0cmluZykgPT5cbiAgICAgICAgKHsgc3RyOiBcIlN0cmVuZ3RoXCIsIGRleDogXCJEZXh0ZXJpdHlcIiwgY29uOiBcIkNvbnN0aXR1dGlvblwiLFxuICAgICAgICAgIGludDogXCJJbnRlbGxpZ2VuY2VcIiwgd2lzOiBcIldpc2RvbVwiLCBjaGE6IFwiQ2hhcmlzbWFcIiB9W2tdID8/IGsudG9VcHBlckNhc2UoKSlcbiAgICAgICk7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIgJiYgdmFsICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbCkubWFwKGsgPT4gay50b1VwcGVyQ2FzZSgpKTtcbiAgfVxuICByZXR1cm4gW107XG59O1xuXG5jb25zdCB1bmlmaWVkU2tpbGxzID0gKHZhbDogYW55KTogc3RyaW5nW10gPT4ge1xuICAvLyAxKSBCZXN0aWFyeSBzdHlsZTogcGxhaW4gb2JqZWN0IG1hcHBpbmcgc2tpbGxcdTIxOTJtb2RpZmllclxuICBpZiAodmFsICYmICFBcnJheS5pc0FycmF5KHZhbCkgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IGVudHJpZXMgPSBPYmplY3QuZW50cmllcyh2YWwpO1xuICAgIGlmIChcbiAgICAgIGVudHJpZXMubGVuZ3RoID4gMCAmJlxuICAgICAgZW50cmllcy5ldmVyeSgoWywgdl0pID0+IHR5cGVvZiB2ID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2ID09PSBcIm51bWJlclwiKVxuICAgICkge1xuICAgICAgcmV0dXJuIGVudHJpZXMubWFwKChbaywgdl0pID0+IGAke2NhcChrKX0gJHt2fWAudHJpbSgpKTtcbiAgICB9XG5cbiAgICAvLyAyKSBOZXN0ZWQgb2JqZWN0IChlLmcuIHN0YXJ0aW5nUHJvZmljaWVuY2llcylcbiAgICBjb25zdCBuZXN0ZWQgPVxuICAgICAgKHZhbCBhcyBhbnkpLnNraWxscyA/P1xuICAgICAgKHZhbCBhcyBhbnkpLnNraWxsUHJvZiA/P1xuICAgICAgKHZhbCBhcyBhbnkpLnNraWxsUHJvZmljaWVuY2llcztcbiAgICByZXR1cm4gdW5pZmllZFNraWxscyhuZXN0ZWQpO1xuICB9XG5cbiAgLy8gMykgT3RoZXJ3aXNlIGV4cGVjdCBhbiBhcnJheVx1MjAyNlxuICBpZiAoIUFycmF5LmlzQXJyYXkodmFsKSkgcmV0dXJuIFtdO1xuICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICBmb3IgKGNvbnN0IGVudHJ5IG9mIHZhbCkge1xuICBpZiAoZW50cnk/LmNob29zZSkge1xuICAgIGNvbnN0IGNudCA9IGVudHJ5LmNob29zZS5jb3VudCA/PyAxO1xuICAgIG91dC5hZGQoYENob29zZSAke2NudH1gKTtcbiAgfVxuIGVsc2UgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgb3V0LmFkZChjYXAoZW50cnkpKTtcbiAgICB9IGVsc2UgaWYgKGVudHJ5Py5uYW1lICYmIHR5cGVvZiBlbnRyeS5uYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBvdXQuYWRkKGNhcChlbnRyeS5uYW1lKSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIgJiYgZW50cnkgIT09IG51bGwpIHtcbiAgICAgIE9iamVjdC5lbnRyaWVzKGVudHJ5KVxuICAgICAgICAuZmlsdGVyKChbLCB2XSkgPT4gdiA9PT0gdHJ1ZSlcbiAgICAgICAgLmZvckVhY2goKFtrXSkgPT4gb3V0LmFkZChjYXAoaykpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gWy4uLm91dF07XG59O1xuIFxuXG4vKiogU2FtZSBpZGVhIGZvciB0b29scyAoZGlzZ3Vpc2Uga2l0LCBmb3JnZXJpZXMsIGV0Yy4pICovXG5leHBvcnQgY29uc3QgdW5pZmllZFRvb2xQcm9mcyA9ICh2YWw6IGFueSk6IHN0cmluZ1tdID0+IHtcbiAgLy8gSWYgdmFsIGlzIGFuIG9iamVjdCAobGlrZSBzdGFydGluZ1Byb2ZpY2llbmNpZXMpLFxuICAvLyBwaWNrIGl0cyAudG9vbFByb2ZpY2llbmNpZXMgb3IgLnRvb2xzIGFycmF5XG4gIGxldCBlbnRyaWVzOiBhbnkgPSB2YWw7XG4gIGlmICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsLnRvb2xQcm9maWNpZW5jaWVzKSkge1xuICAgICAgZW50cmllcyA9IHZhbC50b29sUHJvZmljaWVuY2llcztcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsLnRvb2xzKSkge1xuICAgICAgZW50cmllcyA9IHZhbC50b29scztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZmFsbGJhY2sgdG8gd3JhcHBpbmcgdGhlIG9iamVjdCBpdHNlbGZcbiAgICAgIGVudHJpZXMgPSBbdmFsXTtcbiAgICB9XG4gIH1cblxuICBpZiAoIUFycmF5LmlzQXJyYXkoZW50cmllcykpIHJldHVybiBbXTtcblxuICBjb25zdCBvdXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgaWYgKGVudHJ5Py5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5jaG9vc2UuZnJvbSkpIHtcbiAgICAgIGNvbnN0IGZyb20gPSBlbnRyeS5jaG9vc2UuZnJvbS5tYXAoY2FwKS5qb2luKFwiLCBcIik7XG4gICAgICBvdXQuYWRkKGBDaG9vc2UgJHtlbnRyeS5jaG9vc2UuY291bnR9IGZyb206ICR7ZnJvbX1gKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgb3V0LmFkZChjYXAoZW50cnkpKTtcbiAgICB9ICAgICBlbHNlIGlmICh0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIgJiYgZW50cnkgIT09IG51bGwpIHtcbiAgICAgIE9iamVjdC5lbnRyaWVzKGVudHJ5KVxuICAgICAgICAuZmlsdGVyKChbLCB2XSkgPT4gdiA9PT0gdHJ1ZSB8fCB0eXBlb2YgdiA9PT0gXCJudW1iZXJcIilcbiAgICAgICAgLmZvckVhY2goKFtrLCB2XSkgPT4ge1xuICAgICAgICAgIGlmIChrLnN0YXJ0c1dpdGgoXCJhbnlcIikgJiYgdHlwZW9mIHYgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgIC8vIHN0cmlwICdhbnknLCB0aGVuIHNwbGl0IG9uIGNhbWVsQ2FzZSBhbmQgY2FwaXRhbGl6ZSBlYWNoIHdvcmRcbiAgICAgICAgICAgIGNvbnN0IHJhdyA9IGsucmVwbGFjZSgvXmFueS8sIFwiXCIpO1xuICAgICAgICAgICAgY29uc3Qgc3BhY2VkID0gcmF3XG4gICAgICAgICAgICAgIC5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxICQyXCIpXG4gICAgICAgICAgICAgIC5zcGxpdChcIiBcIilcbiAgICAgICAgICAgICAgLm1hcChjYXApXG4gICAgICAgICAgICAgIC5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgIG91dC5hZGQoYENob29zZSAke3Z9ICR7c3BhY2VkfWApO1xuICAgICAgICAgIH0gZWxzZSBpZiAodiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgb3V0LmFkZChjYXAoaykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBbLi4ub3V0XTtcbn07XG5cbiBcblxuZXhwb3J0IGNvbnN0IEFMTF9GSUVMRF9ERUZTOiBGaWVsZERlZltdID0gW1xuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgQ29yZSBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJOQU1FXCIsICBqc29uS2V5OiBcIm5hbWVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNPVVJDRVwiLCBqc29uS2V5OiBbXCJzb3VyY2VcIl0sIGNvbnY6IChyYXcsIGFsbCkgPT4ge1xuICAgICAgY29uc3Qgb3V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgICBjb25zdCBhcnIgPSBBcnJheS5pc0FycmF5KHJhdykgPyByYXcgOiBbcmF3XTtcbiAgICAgIGFyci5mb3JFYWNoKHNyYyA9PiBvdXQuYWRkKGdldEZ1bGxTb3VyY2VOYW1lKHNyYywgKGFsbCBhcyBhbnkpLl9lZGl0aW9uSWQpKSk7XG4gICAgICBmb3IgKGNvbnN0IG9zIG9mIGFsbC5vdGhlclNvdXJjZXMgPz8gW10pIG91dC5hZGQoZ2V0RnVsbFNvdXJjZU5hbWUob3Muc291cmNlLCAoYWxsIGFzIGFueSkuX2VkaXRpb25JZCkpO1xuICAgICAgZm9yIChjb25zdCByZXAgb2YgYWxsLnJlcHJpbnRlZEFzID8/IFtdKSB7XG4gICAgICAgIGNvbnN0IFssIHNyY10gPSAocmVwIGFzIHN0cmluZykuc3BsaXQoXCJ8XCIpO1xuICAgICAgICBvdXQuYWRkKGdldEZ1bGxTb3VyY2VOYW1lKHNyYywgKGFsbCBhcyBhbnkpLl9lZGl0aW9uSWQpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbLi4ub3V0XTtcbiAgfX0sXG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiQVJNT1JfUFJPRklDSUVOQ0lFU1wiLCAganNvbktleTogW1wiYXJtb3JQcm9maWNpZW5jaWVzXCIsIFwiYXJtb3JQcm9mc1wiLCBcInN0YXJ0aW5nUHJvZmljaWVuY2llc1wiXSwgY29udjogdW5pZmllZEFybW9yUHJvZnMgfSxcbiAgeyBjYWxsU2lnbjogXCJXRUFQT05fUFJPRklDSUVOQ0lFU1wiLCBqc29uS2V5OiBbXCJ3ZWFwb25Qcm9maWNpZW5jaWVzXCIsIFwid2VhcG9uUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sIGNvbnY6IHVuaWZpZWRXZWFwb25Qcm9mcyB9LFxuICB7IGNhbGxTaWduOiBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLCAgIGpzb25LZXk6IFtcInRvb2xQcm9maWNpZW5jaWVzXCIsIFwidG9vbFByb2ZzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLCBjb252OiB1bmlmaWVkVG9vbFByb2ZzIH0sXG57XG4gIGNhbGxTaWduOiBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAganNvbktleTogW1widG9vbFByb2ZpY2llbmNpZXNcIiwgXCJ0b29sUHJvZnNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgIGNvbnN0IGFyciA9IEFycmF5LmlzQXJyYXkocmF3KVxuICAgICAgPyByYXdcbiAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnRvb2xQcm9maWNpZW5jaWVzKVxuICAgICAgPyByYXcudG9vbFByb2ZpY2llbmNpZXNcbiAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnRvb2xzKVxuICAgICAgPyByYXcudG9vbHNcbiAgICAgIDogW107XG4gICAgY29uc3QgY2hvaWNlID0gYXJyLmZpbmQoKGU6IGFueSkgPT4gZT8uY2hvb3NlKTtcbiAgICByZXR1cm4gY2hvaWNlPy5jaG9vc2U/LmZyb20/Lm1hcCgoczogc3RyaW5nKSA9PiBjYXAocykpID8/IFtdO1xuICB9XG59LFxuICAgIHsgY2FsbFNpZ246IFwiU0FWSU5HX1RIUk9XU1wiLCAgICAgICAganNvbktleTogW1wic2F2ZVwiLCBcInByb2ZpY2llbmN5XCJdLCBjb252OiB1bmlmaWVkU2F2ZXMgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIlNLSUxMU1wiLFxuICAgIGpzb25LZXk6IFtcInNraWxsXCIsIFwic2tpbGxQcm9mXCIsIFwic2tpbGxQcm9maWNpZW5jaWVzXCIsIFwic3RhcnRpbmdQcm9maWNpZW5jaWVzXCJdLFxuICAgIGNvbnY6IHVuaWZpZWRTa2lsbHNcbiAgfSxcbntcbiAgY2FsbFNpZ246IFwiU0tJTExfQ0hPSUNFX0xJU1RcIixcbiAganNvbktleTogW1wic2tpbGxcIiwgXCJza2lsbFByb2ZcIiwgXCJza2lsbFByb2ZpY2llbmNpZXNcIiwgXCJzdGFydGluZ1Byb2ZpY2llbmNpZXNcIl0sXG4gIGNvbnY6IChyYXc6IGFueSkgPT4ge1xuICAgIGNvbnN0IGFyciA9IEFycmF5LmlzQXJyYXkocmF3KVxuICAgICAgPyByYXdcbiAgICAgIDogQXJyYXkuaXNBcnJheShyYXc/LnNraWxsUHJvZmljaWVuY2llcylcbiAgICAgID8gcmF3LnNraWxsUHJvZmljaWVuY2llc1xuICAgICAgOiBBcnJheS5pc0FycmF5KHJhdz8uc2tpbGxzKVxuICAgICAgPyByYXcuc2tpbGxzXG4gICAgICA6IEFycmF5LmlzQXJyYXkocmF3Py5za2lsbFByb2YpXG4gICAgICA/IHJhdy5za2lsbFByb2ZcbiAgICAgIDogW107XG4gICAgY29uc3QgY2hvaWNlID0gYXJyLmZpbmQoKGU6IGFueSkgPT4gZT8uY2hvb3NlKTtcbiAgICByZXR1cm4gY2hvaWNlPy5jaG9vc2U/LmZyb20/Lm1hcCgoczogc3RyaW5nKSA9PiBjYXAocykpID8/IFtdO1xuICB9XG59LFxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBTcGVsbHMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiTEVWRUxcIiwgICAgICAgICBqc29uS2V5OiBcImxldmVsXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJTQ0hPT0xcIiwgICAgICAgIGpzb25LZXk6IFwic2Nob29sXCIsICAgY29udjogcyA9PiBTQ0hPT0xfTUFQW3NdID8/IHMgfSxcbiAgeyBjYWxsU2lnbjogXCJDQVNUSU5HX1RJTUVcIiwgIGpzb25LZXk6IFwidGltZVwiLCAgICAgY29udjogZm9ybWF0VGltZSB9LFxuICB7IGNhbGxTaWduOiBcIlJBTkdFXCIsICAgICAgICAganNvbktleTogXCJyYW5nZVwiLCAgICBjb252OiBmb3JtYXRSYW5nZSB9LFxuICB7IGNhbGxTaWduOiBcIkRVUkFUSU9OXCIsICAgICAganNvbktleTogXCJkdXJhdGlvblwiLCBjb252OiBmb3JtYXREdXJhdGlvbiB9LFxuICB7IGNhbGxTaWduOiBcIlZFUkJBTFwiLCAgICAgICAganNvbktleTogXCJjb21wb25lbnRzXCIsIGNvbnY6IChjOmFueSkgPT4gISFjLnYgfSxcbiAgeyBjYWxsU2lnbjogXCJTT01BVElDXCIsICAgICAgIGpzb25LZXk6IFwiY29tcG9uZW50c1wiLCBjb252OiAoYzphbnkpID0+ICEhYy5zIH0sXG4gIHsgY2FsbFNpZ246IFwiTUFURVJJQUxcIiwgICAgICBqc29uS2V5OiBcImNvbXBvbmVudHNcIiwgY29udjogKGM6YW55KSA9PiAhIWMubSB9LFxuICB7IGNhbGxTaWduOiBcIkFUVEFDS19UWVBFXCIsICAganNvbktleTogXCJhdHRhY2tUeXBlXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfVFlQRVwiLCAgIGpzb25LZXk6IFwiZGFtYWdlSW5mbGljdFwiLCBjb252OiBkID0+IEFycmF5LmlzQXJyYXkoZCkgPyBkWzBdIDogZCB9LFxuICB7IGNhbGxTaWduOiBcIlJJVFVBTFwiLCAgICAgICAganNvbktleTogXCJyaXR1YWxcIiB9LFxuICB7IGNhbGxTaWduOiBcIkNPTkNFTlRSQVRJT05cIiwganNvbktleTogXCJkdXJhdGlvblwiLCBjb252OiBkcyA9PiBBcnJheS5pc0FycmF5KGRzKSAmJiBkcy5zb21lKCh4OmFueSk9PiB4LmNvbmNlbnRyYXRpb24pIH0sXG4gIHsgY2FsbFNpZ246IFwiU0FWRVwiLCAgICAgICAgICBqc29uS2V5OiBcInNhdmVBdHRyXCIgfSxcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3BlY2llcyAvIENyZWF0dXJlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJTUEVDSUVTXCIsIGpzb25LZXk6IFwibmFtZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU0laRVwiLCAgICBqc29uS2V5OiBcInNpemVcIiwgY29udjogZm9ybWF0U2l6ZUFiYnJldiB9LFxuICAgIHtcbiAgICAgIGNhbGxTaWduOiBcIlNQRUVEXCIsXG4gICAgICBqc29uS2V5OiBcInNwZWVkXCIsXG4gICAgICBjb252OiAoc3ApID0+IHtcbiAgICAgICAgaWYgKCFzcCB8fCB0eXBlb2Ygc3AgIT09IFwib2JqZWN0XCIpIHJldHVybiBbXTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNwKVxuICAgICAgICAgIC5maWx0ZXIoKFtrXSkgPT4gayAhPT0gXCJjYW5Ib3ZlclwiKVxuICAgICAgICAubWFwKChbaywgdl0pID0+IHtcbiAgICAgICAgICBjb25zdCBudW0gPSB0eXBlb2YgdiA9PT0gXCJvYmplY3RcIiAmJiB2ICE9PSBudWxsICYmIFwibnVtYmVyXCIgaW4gdiA/IHYubnVtYmVyIDogdjtcbiAgICAgICAgICByZXR1cm4gYCR7Y2FwKGspfSAke251bX0gZnQuYDtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gIH0sICBcbnsgY2FsbFNpZ246IFwiTEFOR1VBR0VTXCIsIGpzb25LZXk6IFtcImxhbmd1YWdlc1wiLCBcImxhbmd1YWdlUHJvZmljaWVuY2llc1wiXSwgY29udjogYXJyID0+IHtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gW107XG4gICAgICBjb25zdCBvdXQ6IHN0cmluZ1tdID0gW107XG4gICAgICBmb3IgKGNvbnN0IGxwIG9mIGFycikge1xuICAgICAgICBpZiAodHlwZW9mIGxwID09PSBcInN0cmluZ1wiKSBvdXQucHVzaChjYXAobHApKTtcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGxwID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBbbGFuZywgdmFsXSBvZiBPYmplY3QuZW50cmllcyhscCkpIHtcbiAgICAgICAgICAgIGlmICh2YWwpIG91dC5wdXNoKGNhcChsYW5nKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gWy4uLm5ldyBTZXQob3V0KV07XG4gIH19LFxuICB7IGNhbGxTaWduOiBcIlNFTlNFU1wiLCBqc29uS2V5OiBcInNlbnNlc1wiLCBjb252OiBzZW4gPT4ge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VuKSkgcmV0dXJuIHNlbi5tYXAoKHM6c3RyaW5nKT0+cy5yZXBsYWNlKC9eXFxkK1xccyovLFwiXCIpLnJlcGxhY2UoL14uLyxjPT5jLnRvVXBwZXJDYXNlKCkpKTtcbiAgICAgIGlmIChzZW4gJiYgdHlwZW9mIHNlbj09PVwib2JqZWN0XCIpIHJldHVybiBPYmplY3QuZW50cmllcyhzZW4pLm1hcCgoW2ssdl0pPT5gJHtrLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2suc2xpY2UoMSl9ICR7dn1gKTtcbiAgICAgIHJldHVybiBbXTtcbiAgfX0sIFxue1xuICBjYWxsU2lnbjogXCJUUkFJVFNcIixcbiAganNvbktleTogXCJlbnRyaWVzXCIsXG4gIGNvbnY6IChlbnRzOiBhbnkpOiBzdHJpbmdbXSA9PiB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGVudHMpKSByZXR1cm4gW107XG4gICAgY29uc3QgYXJyID0gZW50cyBhcyBhbnlbXTtcblxuICAgIC8vIGNvbGxlY3Qgb25seSB0aG9zZSBtYXJrZWQgYXMgZmVhdHVyZXNcbiAgICBjb25zdCBmZWF0dXJlTmFtZXMgPSBhcnJcbiAgICAgIC5maWx0ZXIoZSA9PiBlPy5kYXRhPy5pc0ZlYXR1cmUgJiYgdHlwZW9mIGUubmFtZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgIC5tYXAoZSA9PiBlLm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpLnRyaW0oKSk7XG5cbiAgICBpZiAoZmVhdHVyZU5hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiBmZWF0dXJlTmFtZXM7XG4gICAgfVxuXG4gICAgLy8gZmFsbGJhY2s6IGFueSBuYW1lZCBlbnRyeSAoZm9yIGNyZWF0dXJlcy9zcGVjaWVzKVxuICAgIHJldHVybiBhcnJcbiAgICAgIC5maWx0ZXIoZSA9PiBlICYmIHR5cGVvZiBlLm5hbWUgPT09IFwic3RyaW5nXCIpXG4gICAgICAubWFwKGUgPT4gZS5uYW1lLnJlcGxhY2UoL15GZWF0dXJlOlxccyovLCBcIlwiKS50cmltKCkpO1xuICB9XG59LFxuICB7IGNhbGxTaWduOiBcIkFDXCIsIGpzb25LZXk6IFwiYWNcIiwgY29udjogYSA9PiBBcnJheS5pc0FycmF5KGEpP2FbMF0uYWM6YSB9LFxuICB7IGNhbGxTaWduOiBcIkhQXCIsIGpzb25LZXk6IFwiaHBcIiwgY29udjogaHAgPT4gaHA/LmF2ZXJhZ2UgPz8gaHAgfSxcbiAgeyBjYWxsU2lnbjogXCJDSEFMTEVOR0VfUkFUSU5HXCIsIGpzb25LZXk6IFwiY3JcIiB9LFxuICB7IGNhbGxTaWduOiBcIlNUUkVOR1RIXCIsICAgICBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzBdOmFycj8uc3RyID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJERVhURVJJVFlcIiwgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2FyclsxXTphcnI/LmRleCA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiQ09OU1RJVFVUSU9OXCIsIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbMl06YXJyPy5jb24gPz8gMCB9LFxuICB7IGNhbGxTaWduOiBcIklOVEVMTElHRU5DRVwiLCBqc29uS2V5OiBcImFiaWxpdHlcIiwgY29udjogYXJyPT5BcnJheS5pc0FycmF5KGFycik/YXJyWzNdOmFycj8uaW50ID8/IDAgfSxcbiAgeyBjYWxsU2lnbjogXCJXSVNET01cIiwgICAgICAganNvbktleTogXCJhYmlsaXR5XCIsIGNvbnY6IGFycj0+QXJyYXkuaXNBcnJheShhcnIpP2Fycls0XTphcnI/LndpcyA/PyAwIH0sXG4gIHsgY2FsbFNpZ246IFwiQ0hBUklTTUFcIiwgICAgIGpzb25LZXk6IFwiYWJpbGl0eVwiLCBjb252OiBhcnI9PkFycmF5LmlzQXJyYXkoYXJyKT9hcnJbNV06YXJyPy5jaGEgPz8gMCB9LFxuICB7XG4gICAgY2FsbFNpZ246IFwiQUxJR05NRU5UXCIsXG4gICAganNvbktleTogXCJhbGlnbm1lbnRcIixcbiAgICBjb252OiAoYTogYW55KSA9PiB7XG4gICAgICBjb25zdCByYXcgPSBBcnJheS5pc0FycmF5KGEpID8gYS5qb2luKFwiIFwiKSA6IHR5cGVvZiBhID09PSBcInN0cmluZ1wiID8gYSA6IFN0cmluZyhhKTtcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSByYXdcbiAgICAgICAgLnJlcGxhY2UoL1xcYkFcXGIvZywgXCJBbnlcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYlVcXGIvZywgXCJVbmFsaWduZWRcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYk5cXGIvZywgXCJOZXV0cmFsXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJMXFxiL2csIFwiTGF3ZnVsXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXGJDXFxiL2csIFwiQ2hhb3RpY1wiKVxuICAgICAgICAucmVwbGFjZSgvXFxiR1xcYi9nLCBcIkdvb2RcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcYkVcXGIvZywgXCJFdmlsXCIpO1xuXG4gICAgICByZXR1cm4gZm9ybWF0QWxpZ25tZW50QWJicmV2KGNsZWFuZWQpOyAvLyByZXVzZSB5b3VyIG5vcm1hbGl6ZXIgaWYgaXQgZXhpc3RzXG4gICAgfVxuICB9LFxuICAgIHtcbiAgICBjYWxsU2lnbjogXCJUWVBFXCIsXG4gICAganNvbktleTogXCJ0eXBlXCIsXG4gICAgY29udjogKHQ6IGFueSkgPT4ge1xuICAgICAgaWYgKCF0KSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgICBpZiAodHlwZW9mIHQgPT09IFwic3RyaW5nXCIpIHJldHVybiBjYXAodCk7XG5cbiAgICAgIGlmICh0eXBlb2YgdCA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBjb25zdCBiYXNlID0gdC50eXBlID8gY2FwKHQudHlwZSkgOiBcIlVua25vd25cIjtcbiAgICAgICAgY29uc3QgdGFncyA9IEFycmF5LmlzQXJyYXkodC50YWdzKSA/IHQudGFncy5tYXAoY2FwKSA6IFtdO1xuXG4gICAgICAgIHJldHVybiB0YWdzLmxlbmd0aCA/IGAke2Jhc2V9ICgke3RhZ3Muam9pbihcIiwgXCIpfSlgIDogYmFzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH0sXG5cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgSXRlbXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIHsgY2FsbFNpZ246IFwiVFlQRVwiLCAgIGpzb25LZXk6IFwiX3BhcnNlZFR5cGVcIiB9LFxuICB7IGNhbGxTaWduOiBcIlJBUklUWVwiLCBqc29uS2V5OiBcInJhcml0eVwiLCBjb252OiByID0+IHtcbiAgICAgIGNvbnN0IHMgPSBTdHJpbmcocnx8XCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICAgIHJldHVybiBzICYmIHMhPT1cIm5vbmVcIiA/IHNbMF0udG9VcHBlckNhc2UoKStzLnNsaWNlKDEpIDogdW5kZWZpbmVkO1xuICB9fSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkNPU1RcIixcbiAgICBqc29uS2V5OiBcInZhbHVlXCIsXG4gICAgY29udjogKHJhdzogYW55KSA9PiB7XG4gICAgICBjb25zdCBzID0gU3RyaW5nKHJhdykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBsZXQgbnVtOiBudW1iZXI7XG5cbiAgICAgIC8vIGV4cGxpY2l0IGNvcHBlcj9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwiY3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgLy8gY29udmVydCB0byBncCBvbmx5IGlmIDEwMCsgY3BcbiAgICAgICAgcmV0dXJuIG51bSA+PSAxMDBcbiAgICAgICAgICA/IGAke01hdGgucm91bmQoKG51bS8xMDApICogMTAwKS8xMDB9Z3BgXG4gICAgICAgICAgOiBgJHtudW19Y3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBleHBsaWNpdCBzaWx2ZXI/XG4gICAgICBpZiAocy5lbmRzV2l0aChcInNwXCIpKSB7XG4gICAgICAgIG51bSA9IHBhcnNlRmxvYXQocyk7XG4gICAgICAgIC8vIGNvbnZlcnQgdG8gZ3Agb25seSBpZiAxMCsgc3BcbiAgICAgICAgcmV0dXJuIG51bSA+PSAxMFxuICAgICAgICAgID8gYCR7TWF0aC5yb3VuZCgobnVtLzEwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICAgIDogYCR7bnVtfXNwYDtcbiAgICAgIH1cblxuICAgICAgLy8gZXhwbGljaXQgZ29sZD9cbiAgICAgIGlmIChzLmVuZHNXaXRoKFwiZ3BcIikpIHtcbiAgICAgICAgbnVtID0gcGFyc2VGbG9hdChzKTtcbiAgICAgICAgcmV0dXJuIGAke01hdGgucm91bmQobnVtICogMTAwKS8xMDB9Z3BgO1xuICAgICAgfVxuXG4gICAgICAvLyBiYXJlIG51bWJlciBcdTIxOTIgYXNzdW1lIGNvcHBlclxuICAgICAgbnVtID0gcGFyc2VGbG9hdChzKSB8fCAwO1xuICAgICAgcmV0dXJuIG51bSA+PSAxMDBcbiAgICAgICAgPyBgJHtNYXRoLnJvdW5kKChudW0vMTAwKSAqIDEwMCkvMTAwfWdwYFxuICAgICAgICA6IGAke251bX1jcGA7XG4gICAgfVxuICB9LFxuICB7IGNhbGxTaWduOiBcIldFSUdIVFwiLCBqc29uS2V5OiBcIndlaWdodFwiIH0sXG4gIHsgY2FsbFNpZ246IFwiTUFHSUNBTFwiLCBqc29uS2V5OiBcIndvbmRyb3VzXCIsIGNvbnY6IChfdyxhbGwpID0+ICEhYWxsLndvbmRyb3VzIHx8ICEhYWxsLnJlcUF0dHVuZSB9LFxuICB7IGNhbGxTaWduOiBcIlZBUklBTlRcIiwganNvbktleTogXCJib251c1dlYXBvblwiLCBjb252OiBiID0+IHR5cGVvZiBiPT09XCJzdHJpbmdcIiAmJiBiLnN0YXJ0c1dpdGgoXCIrXCIpIH0sXG4gIHsgY2FsbFNpZ246IFwiUFJPUEVSVElFU1wiLCBqc29uS2V5OiBcInByb3BlcnR5XCIsIGNvbnY6IGFyciA9PiBBcnJheS5pc0FycmF5KGFycikgPyBhcnIubWFwKHAgPT4gUFJPUEVSVFlfTUFQW3BdIHx8IHApIDogW10gfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VcIiwganNvbktleTogXCJkbWcxXCIsIGNvbnY6IChkLGFsbCkgPT4gZCA/IGFsbC5kbWcyID8gYCR7ZH0gLyAke2FsbC5kbWcyfWAgOiBgJHtkfWAgOiB1bmRlZmluZWQgfSxcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfVFlQRVNcIiwganNvbktleTogXCJkbWdUeXBlXCIsIGNvbnY6IGR0ID0+IGR0ID09IG51bGwgPyBbXSA6IEFycmF5LmlzQXJyYXkoZHQpID8gZHQgOiBbZHRdIH0sXG4gIHsgY2FsbFNpZ246IFwiUkFOR0VcIiwganNvbktleTogXCJyYW5nZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiUkVMT0FEXCIsIGpzb25LZXk6IFwicmVsb2FkXCIgfSxcbiAgeyBjYWxsU2lnbjogXCJBTU1PX1RZUEVcIiwganNvbktleTogXCJhbW1vVHlwZVwiIH0sXG4gIHsgY2FsbFNpZ246IFwiU1RFQUxUSF9ESVNBRFZBTlRBR0VcIiwganNvbktleTogXCJzdGVhbHRoXCIgfSxcbiAge1xuICAgIGNhbGxTaWduOiBcIkFUVFVORU1FTlRcIixcbiAgICBqc29uS2V5OiBbXCJ3b25kcm91c1wiLCBcInJlcUF0dHVuZVwiLCBcInJlcV9hdHR1bmVcIiwgXCJyZXFBdHR1bmVUYWdzXCJdLFxuICAgIGNvbnY6IChfcmF3LCBhbGxKc29uKSA9PiB7XG4gICAgICBjb25zdCBqID0gYWxsSnNvbiBhcyBhbnk7XG4gICAgICBjb25zdCBoYXNUZXh0ID0gdHlwZW9mIGoucmVxQXR0dW5lID09PSBcInN0cmluZ1wiICYmIGoucmVxQXR0dW5lLnRyaW0oKSAhPT0gXCJcIjtcbiAgICAgIGNvbnN0IGhhc1RhZ3MgPSBBcnJheS5pc0FycmF5KGoucmVxQXR0dW5lVGFncykgJiYgai5yZXFBdHR1bmVUYWdzLmxlbmd0aCA+IDA7XG4gICAgICByZXR1cm4gaGFzVGV4dCB8fCBoYXNUYWdzO1xuICAgIH1cbiAgfSxcbiAge1xuICBjYWxsU2lnbjogXCJBVFRVTkVfUkVRXCIsXG4gIGpzb25LZXk6IFwicmVxQXR0dW5lVGFnc1wiLFxuICBjb252OiAodGFnczogYW55W10gPSBbXSwgX2FsbCkgPT4ge1xuICAgIGNvbnN0IG1hcExldHRlcjogUmVjb3JkPHN0cmluZyxzdHJpbmc+ID0ge1xuICAgICAgQTogXCJBbnlcIiwgVTogXCJVbmFsaWduZWRcIiwgTjogXCJOZXV0cmFsXCIsXG4gICAgICBMOiBcIkxhd2Z1bFwiLCBDOiBcIkNoYW90aWNcIiwgRzogXCJHb29kXCIsIEU6IFwiRXZpbFwiXG4gICAgfTtcbiAgICBjb25zdCByZXFzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykge1xuICAgICAgaWYgKHRhZy5jbGFzcyAmJiBBcnJheS5pc0FycmF5KHRhZy5hbGlnbm1lbnQpKSB7XG4gICAgICAgIGNvbnN0IGNscyA9IGNhcCh0YWcuY2xhc3MpO1xuICAgICAgICBmb3IgKGNvbnN0IGNvZGUgb2YgdGFnLmFsaWdubWVudCkge1xuICAgICAgICAgIHJlcXMucHVzaChgJHttYXBMZXR0ZXJbY29kZV0gfHwgY29kZX0gJHtjbHN9YCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGFnLmNsYXNzKSB7XG4gICAgICAgIHJlcXMucHVzaChjYXAodGFnLmNsYXNzKSk7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodGFnLmFsaWdubWVudCkpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb2RlIG9mIHRhZy5hbGlnbm1lbnQpIHtcbiAgICAgICAgICByZXFzLnB1c2gobWFwTGV0dGVyW2NvZGVdIHx8IGNvZGUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRhZy5iYWNrZ3JvdW5kKSB7XG4gICAgICAgIGNvbnN0IFtiZ10gPSBTdHJpbmcodGFnLmJhY2tncm91bmQpLnNwbGl0KFwifFwiKTtcbiAgICAgICAgcmVxcy5wdXNoKGJnLnNwbGl0KFwiIFwiKS5tYXAoY2FwKS5qb2luKFwiIFwiKSk7XG4gICAgICB9IGVsc2UgaWYgKHRhZy5zcGVsbGNhc3RpbmcpIHtcbiAgICAgICAgcmVxcy5wdXNoKFwiU3BlbGxjYXN0ZXJcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldChyZXFzKSk7XG4gIH1cbn0sXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBPdGhlciBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgeyBjYWxsU2lnbjogXCJEQU1BR0VfUkVTXCIsIGpzb25LZXk6IFwicmVzaXN0XCIsIGNvbnY6IHYgPT4gQXJyYXkuaXNBcnJheSh2KSA/IHYubWFwKGNhcCkgOiBbXSB9LFxuICB7IGNhbGxTaWduOiBcIlJVTEVTRVRcIiwganNvbktleTogXCJfZWRpdGlvbklkXCIgfSxcbiAgXG5dO1xuXG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBHZW5lcmljIGJ1aWxkZXIgXHUyNTAwXHUyNTAwXHUyNTAwXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRGTShqc29uOiBhbnksIGRlZnM6IEZpZWxkRGVmW10pOiBGcm9udG1hdHRlciB7XG4gIGNvbnN0IGZtOiBGcm9udG1hdHRlciA9IHt9O1xuICBmb3IgKGNvbnN0IHsgY2FsbFNpZ24sIGpzb25LZXksIGNvbnYgfSBvZiBkZWZzKSB7XG4gICAgY29uc3Qga2V5cyA9IEFycmF5LmlzQXJyYXkoanNvbktleSkgPyBqc29uS2V5IDogW2pzb25LZXldO1xuICAgIGxldCByYXc6IGFueSA9IHVuZGVmaW5lZDtcblxuICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgIGlmIChqc29uW2tleV0gIT0gbnVsbCkge1xuICAgICAgICByYXcgPSBqc29uW2tleV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyYXcgPT0gbnVsbCkgY29udGludWU7XG4gICAgY29uc3QgdmFsID0gY29udiA/IGNvbnYocmF3LCBqc29uKSA6IHJhdztcbiAgICBmbVtGTV9GSUVMRFNbY2FsbFNpZ25dXSA9IHZhbDtcbiAgfVxuICByZXR1cm4gZm07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVGcm9udG1hdHRlcihmbTogRnJvbnRtYXR0ZXIpOiBzdHJpbmcge1xuICBjb25zdCBmaWx0ZXJlZDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gIC8vIGRldGVjdCBpZiB3ZSBoYXZlIGFueSBhY3R1YWwgY2hvaWNlLWxpc3RzXG4gIGNvbnN0IGhhc1NraWxsQ2hvaWNlID0gQXJyYXkuaXNBcnJheShmbVtGTV9GSUVMRFMuU0tJTExfQ0hPSUNFX0xJU1RdKSBcbiAgICAmJiAoZm1bRk1fRklFTERTLlNLSUxMX0NIT0lDRV9MSVNUXSBhcyBhbnlbXSkubGVuZ3RoID4gMDtcbiAgY29uc3QgaGFzVG9vbENob2ljZSA9IEFycmF5LmlzQXJyYXkoZm1bRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1RdKSBcbiAgICAmJiAoZm1bRk1fRklFTERTLlRPT0xfQ0hPSUNFX0xJU1RdIGFzIGFueVtdKS5sZW5ndGggPiAwO1xuXG5cbiAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZm0pKSB7XG4gICAgLy8gMSkgbmV2ZXIgZW1pdCB1bmRlZmluZWRcbiAgICBpZiAodiA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcblxuICAgIC8vIDMpIGlmIHdlIGhhdmUgYSBza2lsbCBjaG9pY2UsIGRyb3AgdGhlIHJhdyBza2lsbHMgbGlzdFxuICAgIGlmIChoYXNTa2lsbENob2ljZSAmJiBrID09PSBGTV9GSUVMRFMuU0tJTExTKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gNCkgaWYgd2UgaGF2ZSBhIHRvb2wgY2hvaWNlLCBkcm9wIHRoZSByYXcgdG9vbC1wcm9mIGxpc3RcbiAgICBpZiAoaGFzVG9vbENob2ljZSAmJiBrID09PSBGTV9GSUVMRFMuVE9PTF9QUk9GSUNJRU5DSUVTKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBmaWx0ZXJlZFtrXSA9IHY7XG4gIH1cblxuICAvLyBlbWl0IFlBTUxcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGZpbHRlcmVkKVxuICAgIC5tYXAoKFtrLCB2XSkgPT4ge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHtcbiAgICAgICAgcmV0dXJuIGAke2t9OlxcbiR7di5tYXAoaSA9PiBgICAtICR7aX1gKS5qb2luKFwiXFxuXCIpfWA7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHYgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIGAke2t9OiBcIiR7dn1cImA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYCR7a306ICR7dn1gO1xuICAgIH0pXG4gICAgLmpvaW4oXCJcXG5cIik7XG59XG5cblxuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgU2tpbGwgaGVscGVycyBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBjb25zdCBTS0lMTF9PUFRJT05TID0gW1xuICBcIkFjcm9iYXRpY3NcIixcIkFuaW1hbCBIYW5kbGluZ1wiLFwiQXJjYW5hXCIsXCJBdGhsZXRpY3NcIixcIkRlY2VwdGlvblwiLFwiSGlzdG9yeVwiLFxuICBcIkluc2lnaHRcIixcIkludGltaWRhdGlvblwiLFwiSW52ZXN0aWdhdGlvblwiLFwiTWVkaWNpbmVcIixcIk5hdHVyZVwiLFwiUGVyY2VwdGlvblwiLFxuICBcIlBlcmZvcm1hbmNlXCIsXCJQZXJzdWFzaW9uXCIsXCJSZWxpZ2lvblwiLFwiU2xlaWdodCBvZiBIYW5kXCIsXCJTdGVhbHRoXCIsXCJTdXJ2aXZhbFwiLFxuXSBhcyBjb25zdDtcbmV4cG9ydCB0eXBlIFNraWxsT3B0aW9uID0gdHlwZW9mIFNLSUxMX09QVElPTlNbbnVtYmVyXTtcbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVTa2lsbChyYXc6IHN0cmluZyk6IFNraWxsT3B0aW9uIHwgbnVsbCB7XG4gIGNvbnN0IGxvd2VyID0gcmF3LnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gU0tJTExfT1BUSU9OUy5maW5kKHNraWxsID0+IHNraWxsLnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyKSA/PyBudWxsO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclZhbGlkU2tpbGxzKHJhd0FycjogYW55W10pOiBTa2lsbE9wdGlvbltdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KHJhd0FycikpIHJldHVybiBbXTtcbiAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8U2tpbGxPcHRpb24+KCk7XG4gIGZvciAoY29uc3QgZW50IG9mIHJhd0Fycikge1xuICAgIGxldCBjYW5kaWRhdGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikgY2FuZGlkYXRlID0gZW50O1xuICAgIGVsc2UgaWYgKGVudC5uYW1lICYmIHR5cGVvZiBlbnQubmFtZSA9PT0gXCJzdHJpbmdcIikgY2FuZGlkYXRlID0gZW50Lm5hbWU7XG4gICAgaWYgKGNhbmRpZGF0ZSkge1xuICAgICAgY29uc3Qgbm9ybSA9IG5vcm1hbGl6ZVNraWxsKGNhbmRpZGF0ZSk7XG4gICAgICBpZiAobm9ybSkgc2Vlbi5hZGQobm9ybSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBbLi4uc2Vlbl07XG59XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBXaGljaCBGTV9LRVlTIGVhY2ggcGFyc2VyIHNob3VsZCBpbmNsdWRlIFx1MjUwMFx1MjUwMFx1MjUwMFxuZXhwb3J0IGNvbnN0IFNQRUxMX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIkxFVkVMXCIsXG4gIFwiU0NIT09MXCIsXG4gIFwiQ0FTVElOR19USU1FXCIsXG4gIFwiUkFOR0VcIixcbiAgXCJEVVJBVElPTlwiLFxuICBcIlZFUkJBTFwiLFxuICBcIlNPTUFUSUNcIixcbiAgXCJNQVRFUklBTFwiLFxuICBcIkNPTkNFTlRSQVRJT05cIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJSVUxFU0VUXCIsXG5dO1xuXG5leHBvcnQgY29uc3QgU1BFQ0lFU19LRVlTOiBGTUtleVtdID0gW1xuICBcIlNQRUNJRVNcIixcbiAgXCJTSVpFXCIsXG4gIFwiU1BFRURcIixcbiAgXCJMQU5HVUFHRVNcIixcbiAgXCJUUkFJVFNcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTS0lMTF9DSE9JQ0VfTElTVFwiLFxuICBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgXCJTRU5TRVNcIixcbiAgXCJEQU1BR0VfUkVTXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IElURU1fS0VZUzogRk1LZXlbXSA9IFtcbiAgXCJOQU1FXCIsXG4gIFwiVFlQRVwiLFxuICBcIlJBUklUWVwiLFxuICBcIkNPU1RcIixcbiAgXCJXRUlHSFRcIixcbiAgXCJTT1VSQ0VcIixcbiAgXCJQUk9QRVJUSUVTXCIsXG4gIFwiREFNQUdFXCIsXG4gIFwiREFNQUdFX1RZUEVTXCIsXG4gIFwiUkFOR0VcIixcbiAgXCJSRUxPQURcIixcbiAgXCJBTU1PX1RZUEVcIixcbiAgXCJBQ1wiLFxuICBcIlNURUFMVEhfRElTQURWQU5UQUdFXCIsXG4gIFwiTUFHSUNBTFwiLFxuICBcIkFUVFVORU1FTlRcIixcbiAgXCJBVFRVTkVfUkVRXCIsXG4gIFwiUlVMRVNFVFwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IEJFU1RJQVJZX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNJWkVcIixcbiAgXCJUWVBFXCIsXG4gIFwiQUxJR05NRU5UXCIsXG4gIFwiQUNcIixcbiAgXCJIUFwiLFxuICBcIlNQRUVEXCIsXG4gIFwiQ0hBTExFTkdFX1JBVElOR1wiLFxuICBcIlNUUkVOR1RIXCIsXG4gIFwiREVYVEVSSVRZXCIsXG4gIFwiQ09OU1RJVFVUSU9OXCIsXG4gIFwiSU5URUxMSUdFTkNFXCIsXG4gIFwiV0lTRE9NXCIsXG4gIFwiQ0hBUklTTUFcIixcbiAgXCJTQVZJTkdfVEhST1dTXCIsXG4gIFwiU0tJTExTXCIsXG4gIFwiU0VOU0VTXCIsXG4gIFwiTEFOR1VBR0VTXCIsXG4gIFwiU09VUkNFXCIsXG4gIFwiUlVMRVNFVFwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IENMQVNTX0tFWVM6IEZNS2V5W10gPSBbXG4gIFwiTkFNRVwiLFxuICBcIlNPVVJDRVwiLFxuICBcIkFSTU9SX1BST0ZJQ0lFTkNJRVNcIixcbiAgXCJXRUFQT05fUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfUFJPRklDSUVOQ0lFU1wiLFxuICBcIlRPT0xfQ0hPSUNFX0xJU1RcIixcbiAgXCJTQVZJTkdfVEhST1dTXCIsXG4gIFwiU0tJTExTXCIsXG4gIFwiU0tJTExfQ0hPSUNFX0xJU1RcIixcbiAgXCJSVUxFU0VUXCIsXG5dO1xuXG5leHBvcnQgY29uc3QgQkFDS0dST1VORF9LRVlTOiBGTUtleVtdID0gW1xuICBcIk5BTUVcIixcbiAgXCJTS0lMTFNcIixcbiAgXCJTS0lMTF9DSE9JQ0VfTElTVFwiLCAgXG4gIFwiVE9PTF9QUk9GSUNJRU5DSUVTXCIsXG4gIFwiVE9PTF9DSE9JQ0VfTElTVFwiLFxuICBcIlRSQUlUU1wiLFxuICBcIlNPVVJDRVwiLFxuICBcIlJVTEVTRVRcIixcbl07XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGaWVsZCBzdWJzZXRzIGZvciBlYWNoIHBhcnNlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmV4cG9ydCBjb25zdCBTUEVMTF9NRVRBX0RFRlM6IEZpZWxkRGVmW10gICAgPSBBTExfRklFTERfREVGUy5maWx0ZXIoZGVmID0+IFNQRUxMX0tFWVMuaW5jbHVkZXMoZGVmLmNhbGxTaWduKSk7XG5leHBvcnQgY29uc3QgU1BFQ0lFU19NRVRBX0RFRlM6IEZpZWxkRGVmW10gID0gQUxMX0ZJRUxEX0RFRlMuZmlsdGVyKGRlZiA9PiBTUEVDSUVTX0tFWVMuaW5jbHVkZXMoZGVmLmNhbGxTaWduKSk7XG5leHBvcnQgY29uc3QgSVRFTV9NRVRBX0RFRlM6IEZpZWxkRGVmW10gICAgID0gQUxMX0ZJRUxEX0RFRlMuZmlsdGVyKGRlZiA9PiBJVEVNX0tFWVMuaW5jbHVkZXMoZGVmLmNhbGxTaWduKSk7XG5leHBvcnQgY29uc3QgQkVTVElBUllfTUVUQV9ERUZTOiBGaWVsZERlZltdID0gQUxMX0ZJRUxEX0RFRlMuZmlsdGVyKGRlZiA9PiBCRVNUSUFSWV9LRVlTLmluY2x1ZGVzKGRlZi5jYWxsU2lnbikpO1xuZXhwb3J0IGNvbnN0IENMQVNTX01FVEFfREVGUzogRmllbGREZWZbXSAgICA9IEFMTF9GSUVMRF9ERUZTLmZpbHRlcihkZWYgPT4gQ0xBU1NfS0VZUy5pbmNsdWRlcyhkZWYuY2FsbFNpZ24pKTtcbmV4cG9ydCBjb25zdCBCQUNLR1JPVU5EX01FVEFfREVGUzogRmllbGREZWZbXT0gQUxMX0ZJRUxEX0RFRlMuZmlsdGVyKGRlZiA9PiBCQUNLR1JPVU5EX0tFWVMuaW5jbHVkZXMoZGVmLmNhbGxTaWduKSk7XG4iLCAiaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwic3JjL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgZ2V0RnVsbFNvdXJjZU5hbWUgfSBmcm9tIFwiLi9oZWxwZXJzL3NvdXJjZU1hcFwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgU1BFTExfTUVUQV9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG5cbmV4cG9ydCBjb25zdCBTQ0hPT0xfTUFQOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBBOiBcIkFianVyYXRpb25cIixcbiAgQzogXCJDb25qdXJhdGlvblwiLFxuICBEOiBcIkRpdmluYXRpb25cIixcbiAgRTogXCJFbmNoYW50bWVudFwiLFxuICBWOiBcIkV2b2NhdGlvblwiLFxuICBJOiBcIklsbHVzaW9uXCIsXG4gIE46IFwiTmVjcm9tYW5jeVwiLFxuICBUOiBcIlRyYW5zbXV0YXRpb25cIixcbn07XG5cbmZ1bmN0aW9uIG9yZGluYWwobjogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3Qgc3VmZml4ID0gKG4gPT09IDEpID8gXCJzdFwiIDogKG4gPT09IDIpID8gXCJuZFwiIDogKG4gPT09IDMpID8gXCJyZFwiIDogXCJ0aFwiO1xuICByZXR1cm4gYCR7bn0ke3N1ZmZpeH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0UmFuZ2UocmFuZ2U6IGFueSk6IHN0cmluZyB7XG4gIGlmICghcmFuZ2UpIHJldHVybiBcIlwiO1xuXG4gIGlmICh0eXBlb2YgcmFuZ2UgPT09IFwic3RyaW5nXCIpIHJldHVybiByYW5nZTtcblxuICBpZiAocmFuZ2UudHlwZSA9PT0gXCJzcGVjaWFsXCIpIHJldHVybiBcIlNwZWNpYWxcIjtcbiAgaWYgKHJhbmdlLnR5cGUgPT09IFwicG9pbnRcIiAmJiByYW5nZS5kaXN0YW5jZSkge1xuICAgIGNvbnN0IGRpc3QgPSByYW5nZS5kaXN0YW5jZTtcbiAgICBpZiAoZGlzdC50eXBlID09PSBcInRvdWNoXCIpIHJldHVybiBcIlRvdWNoXCI7XG4gICAgaWYgKGRpc3QudHlwZSA9PT0gXCJzZWxmXCIpIHJldHVybiBcIlNlbGZcIjtcbiAgICBpZiAoZGlzdC50eXBlID09PSBcInNpZ2h0XCIpIHJldHVybiBcIlNpZ2h0XCI7XG4gICAgaWYgKGRpc3QuYW1vdW50KSByZXR1cm4gYCR7ZGlzdC5hbW91bnR9ICR7ZGlzdC50eXBlfWA7XG4gIH1cblxuICByZXR1cm4gXCJWYXJpZXNcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWUodGltZTogYW55W10pOiBzdHJpbmcge1xuICBpZiAoIUFycmF5LmlzQXJyYXkodGltZSkpIHJldHVybiBcIlwiO1xuXG4gIHJldHVybiB0aW1lLm1hcCh0ID0+IGAke3QubnVtYmVyfSAke3QudW5pdH1gKS5qb2luKFwiLCBcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREdXJhdGlvbihkdXJhdGlvbjogYW55W10pOiBzdHJpbmcge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoZHVyYXRpb24pKSByZXR1cm4gXCJcIjtcblxuICByZXR1cm4gZHVyYXRpb24ubWFwKGQgPT4ge1xuICAgIGlmIChkLnR5cGUgPT09IFwiaW5zdGFudFwiKSByZXR1cm4gXCJJbnN0YW50YW5lb3VzXCI7XG4gICAgaWYgKGQudHlwZSA9PT0gXCJ0aW1lZFwiICYmIGQuZHVyYXRpb24pIHtcbiAgICAgIHJldHVybiBgJHtkLmR1cmF0aW9uLmFtb3VudH0gJHtkLmR1cmF0aW9uLnR5cGV9JHtkLmNvbmNlbnRyYXRpb24gPyBcIiAoY29uY2VudHJhdGlvbilcIiA6IFwiXCJ9YDtcbiAgICB9XG4gICAgaWYgKGQudHlwZSA9PT0gXCJwZXJtYW5lbnRcIikgcmV0dXJuIFwiUGVybWFuZW50XCI7XG4gICAgcmV0dXJuIFwiU3BlY2lhbFwiO1xuICB9KS5qb2luKFwiLCBcIik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdENvbXBvbmVudHMoY29tcG9uZW50czogYW55KTogc3RyaW5nIHtcbiAgaWYgKCFjb21wb25lbnRzKSByZXR1cm4gXCJcIjtcblxuICBjb25zdCBvdXQgPSBbXTtcbiAgaWYgKGNvbXBvbmVudHMudikgb3V0LnB1c2goXCJWXCIpO1xuICBpZiAoY29tcG9uZW50cy5zKSBvdXQucHVzaChcIlNcIik7XG4gIGlmIChjb21wb25lbnRzLm0pIG91dC5wdXNoKFwiTVwiKTtcblxuICByZXR1cm4gb3V0LmpvaW4oXCIsIFwiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3BlbGxzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBpZiAoIWpzb24uc3BlbGwpIHJldHVybiBbXTtcblxuICAvLyBtYWtlIGVkaXRpb25JZCBhdmFpbGFibGUgZm9yIG91ciBTT1VSQ0UgY29udmVydGVyXG4gIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuICByZXR1cm4ganNvbi5zcGVsbC5tYXAoKHNwZWxsOiBhbnkpID0+IHtcbiAgICAvLyBcdTIwMTQgZ2F0aGVyIGRhdGEgZm9yIGhlYWRlci9ib2R5L2Zvb3RlciBhcyBiZWZvcmUgXHUyMDE0XG4gICAgY29uc3Qgc291cmNlcyA9IHNwZWxsLnNvdXJjZVxuICAgICAgPyBBcnJheS5pc0FycmF5KHNwZWxsLnNvdXJjZSkgPyBzcGVsbC5zb3VyY2UgOiBbc3BlbGwuc291cmNlXVxuICAgICAgOiBbXCJ1bmtub3duXCJdO1xuICAgIGNvbnN0IG5hbWUgPSBzcGVsbC5uYW1lO1xuICAgIGNvbnN0IHNjaG9vbCA9IFNDSE9PTF9NQVBbc3BlbGwuc2Nob29sXSA/PyBzcGVsbC5zY2hvb2w7XG4gICAgY29uc3QgbGV2ZWwgPSBzcGVsbC5sZXZlbDtcbiAgICBjb25zdCByYW5nZSA9IGZvcm1hdFJhbmdlKHNwZWxsLnJhbmdlKTtcbiAgICBjb25zdCBjYXN0aW5nVGltZSA9IGZvcm1hdFRpbWUoc3BlbGwudGltZSk7XG4gICAgY29uc3QgZHVyYXRpb24gPSBmb3JtYXREdXJhdGlvbihzcGVsbC5kdXJhdGlvbik7XG4gICAgY29uc3QgZm9ybWF0dGVkU291cmNlcyA9IHNvdXJjZXMubWFwKChzOiBzdHJpbmcpID0+IGdldEZ1bGxTb3VyY2VOYW1lKHMsIGVkaXRpb25JZCkpO1xuXG4gICAgY29uc3QgYXR0YWNrVHlwZSA9IHNwZWxsLmF0dGFja1R5cGUgfHwgXCJcIjtcbiAgICBjb25zdCBkYW1hZ2VUeXBlID0gc3BlbGwuZGFtYWdlSW5mbGljdD8uWzBdIHx8IFwiVGVsZXBvcnRhdGlvblwiO1xuICAgIGNvbnN0IHJpdHVhbCA9IHNwZWxsLnJpdHVhbCA9PT0gdHJ1ZTtcbiAgICBjb25zdCBjb25jZW50cmF0aW9uID0gc3BlbGwuZHVyYXRpb24/LnNvbWUoKGQ6IGFueSkgPT4gZC5jb25jZW50cmF0aW9uKSA/PyBmYWxzZTtcblxuLy8gXHUyMDE0IDIpIG5ldyBtZXRhZGF0YSBwYXRoLCBmb3IgY29tcGFyaXNvbiBvbmx5IFx1MjAxNFxuY29uc3QgRk0gICA9IGJ1aWxkRk0oc3BlbGwsIFNQRUxMX01FVEFfREVGUyk7XG5cblxuLy8gXHUyMDE0IDQpIHNlcmlhbGl6ZSB1c2luZyB5b3VyIHRyaWVkLWFuZC10cnVlIGxlZ2FjeUZNIFx1MjAxNCBcbmNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihGTSk7XG5cbiAgICAvLyBcdTIwMTQgdGl0bGUvc3VidGl0bGUgYW5kIGJvZHkgbGF5b3V0IFx1MjAxNFxuICAgIGNvbnN0IHNhZmVOYW1lID0gbmFtZS5yZXBsYWNlKC9cXC8vZywgXCItXCIpO1xuICAgIGNvbnN0IHRpdGxlID0gYCMgJHtuYW1lfWA7XG4gICAgY29uc3QgbGV2ZWxMYWJlbCA9XG4gICAgICBsZXZlbCA9PT0gMFxuICAgICAgICA/IGAke3NjaG9vbH0gQ2FudHJpcGBcbiAgICAgICAgOiBgJHtvcmRpbmFsKGxldmVsKX0tbGV2ZWwgJHtzY2hvb2x9IFNwZWxsYDtcbiAgICBjb25zdCBzdWJ0aXRsZSA9IGAjIyMgKiR7bGV2ZWxMYWJlbH0qJHtjb25jZW50cmF0aW9uID8gXCIgKihDb25jZW50cmF0aW9uKSpcIiA6IFwiXCJ9YDtcblxuICAgIGNvbnN0IGhlYWRlckxpbmVzID0gW1xuICAgICAgdGl0bGUsXG4gICAgICBzdWJ0aXRsZSxcbiAgICAgIGAqKkNhc3RpbmcgVGltZToqKiAke2Nhc3RpbmdUaW1lfWAsXG4gICAgICBgKipSYW5nZToqKiAke3JhbmdlfWAsXG4gICAgICBgKipDb21wb25lbnRzOioqICR7Zm9ybWF0Q29tcG9uZW50cyhzcGVsbC5jb21wb25lbnRzKX1gLFxuICAgICAgYCoqRHVyYXRpb246KiogJHtkdXJhdGlvbn1gLFxuICAgIF07XG5cbiAgICBjb25zdCBib2R5TGluZXMgPSBbXG4gICAgICAuLi4oKHNwZWxsLmVudHJpZXMgPz8gW10pLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkpLFxuICAgICAgLi4uKChzcGVsbC5lbnRyaWVzSGlnaGVyTGV2ZWwgPz8gW10pLm1hcCgoZTogYW55KSA9PiBmb3JtYXRFbnRyeShlKSkpLFxuICAgIF07XG5cbiAgICBjb25zdCBmb290ZXJMaW5lcyA9IFtcbiAgICAgIGAtLS1gLFxuICAgICAgYCoqU291cmNlOioqICR7Zm9ybWF0dGVkU291cmNlcy5qb2luKFwiLCBcIil9YCxcbiAgICBdO1xuXG4gICAgLy8gXHUyMDE0IGFzc2VtYmxlIHRoZSBub3RlIHdpdGggWUFNTCBmcm9udG1hdHRlciBcdTIwMTRcbiAgICByZXR1cm4ge1xuICAgICAgcGF0aDogYCR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgYC0tLVxcbiR7eWFtbH1cXG4tLS1gLFxuICAgICAgICBoZWFkZXJMaW5lcy5qb2luKFwiXFxuXCIpLFxuICAgICAgICBgYCxcbiAgICAgICAgYm9keUxpbmVzLmpvaW4oXCJcXG5cXG5cIiksXG4gICAgICAgIGBgLFxuICAgICAgICBmb290ZXJMaW5lcy5qb2luKFwiXFxuXCIpLFxuICAgICAgXS5qb2luKFwiXFxuXCIpLFxuICAgIH07XG4gIH0pO1xufVxuXG4iLCAiaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJlcGxhY2U1ZVRhZ3MgfSAgICAgICBmcm9tIFwiLi9oZWxwZXJzL3RhZ1JlcGxhY2VyXCI7XG5pbXBvcnQgeyBidWlsZEZNLCBzZXJpYWxpemVGcm9udG1hdHRlciwgRk1fRklFTERTLCBTUEVDSUVTX01FVEFfREVGUyB9IGZyb20gXCIuL2hlbHBlcnMvZnJvbnRtYXR0ZXJcIjsgXG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5cbmZ1bmN0aW9uIHNsdWcobmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIG5hbWUucmVwbGFjZSgvW1xcLzpcIl0vZywgXCItXCIpO1xufVxuXG5jb25zdCBTSVpFX01BUDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgVDogXCJUaW55XCIsXG4gIFM6IFwiU21hbGxcIixcbiAgTTogXCJNZWRpdW1cIixcbiAgTDogXCJMYXJnZVwiLFxuICBIOiBcIkh1Z2VcIixcbiAgRzogXCJHYXJnYW50dWFuXCJcbn07XG5cbmNvbnN0IEJMT0NLRURfVFJBSVRTID0gW1wiQWdlXCIsIFwiU2l6ZVwiLCBcIkxhbmd1YWdlc1wiLCBcIkNyZWF0dXJlIFR5cGVcIiwgXCJTcGVlZFwiXTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU3BlY2llc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGpzb24ucmFjZSkpIHJldHVybiBbXTtcblxuICAoanNvbiBhcyBhbnkpLl9lZGl0aW9uSWQgPSBlZGl0aW9uSWQ7XG5cbiAgY29uc3QgcmF3VmFyaWFudHMgPSAoanNvbi5yYWNlIGFzIGFueVtdKVxuICAuZmlsdGVyKHIgPT5cbiAgICAhKFwicmVwcmludGVkQXNcIiBpbiByKSAmJlxuICAgICEvXFwoKD86S2FsYWRlc2h8WmVuZGlrYXJ8QW1vbmtoZXR8SW5uaXN0cmFkfEl4YWxhbilcXCkkLy50ZXN0KHIubmFtZSlcbiAgKTtcblxuY29uc3QgYnlOYW1lID0gbmV3IE1hcDxzdHJpbmcsIGFueVtdPigpO1xuZm9yIChjb25zdCByIG9mIHJhd1ZhcmlhbnRzKSB7XG4gIGNvbnN0IGxpc3QgPSBieU5hbWUuZ2V0KHIubmFtZSkgPz8gW107XG4gIGxpc3QucHVzaChyKTtcbiAgYnlOYW1lLnNldChyLm5hbWUsIGxpc3QpO1xufVxuXG4gIGNvbnN0IG91dDogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcbiAgZm9yIChjb25zdCBbbmFtZSwgdmFyaWFudHNdIG9mIGJ5TmFtZS5lbnRyaWVzKCkpIHtcbiAgICBjb25zdCBzYWZlTmFtZSA9IHNsdWcobmFtZSk7XG4gICAgY29uc3QgcHJpbWFyeSA9IHZhcmlhbnRzLnJlZHVjZSgoYmVzdCwgY3VyKSA9PlxuICAgICAgICBPYmplY3Qua2V5cyhjdXIpLmxlbmd0aCA+IE9iamVjdC5rZXlzKGJlc3QpLmxlbmd0aCA/IGN1ciA6IGJlc3RcbiAgICAgICwgdmFyaWFudHNbMF0pO1xuXG4gICAgY29uc3QgZm0gICA9IGJ1aWxkRk0ocHJpbWFyeSwgU1BFQ0lFU19NRVRBX0RFRlMpO1xuICAgIGNvbnN0IHNlbnNlczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChwcmltYXJ5LmRhcmt2aXNpb24pIHNlbnNlcy5wdXNoKGBEYXJrdmlzaW9uICR7cHJpbWFyeS5kYXJrdmlzaW9ufSBmdC5gKTtcbiAgICBpZiAocHJpbWFyeS5ibGluZHNpZ2h0KSBzZW5zZXMucHVzaChgQmxpbmRzaWdodCAke3ByaW1hcnkuYmxpbmRzaWdodH0gZnQuYCk7XG4gICAgaWYgKHByaW1hcnkudHJlbW9yc2Vuc2UpIHNlbnNlcy5wdXNoKGBUcmVtb3JzZW5zZSAke3ByaW1hcnkudHJlbW9yc2Vuc2V9IGZ0LmApO1xuICAgIGlmIChwcmltYXJ5LnRydWVzaWdodCkgc2Vuc2VzLnB1c2goYFRydWVzaWdodCAke3ByaW1hcnkudHJ1ZXNpZ2h0fSBmdC5gKTtcbiAgICBpZiAoc2Vuc2VzLmxlbmd0aCkgZm0uc2Vuc2VzID0gc2Vuc2VzO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZm0udHJhaXRzKSkge1xuICAgICAgZm0udHJhaXRzID0gZm0udHJhaXRzLmZpbHRlcih0ID0+ICFCTE9DS0VEX1RSQUlUUy5pbmNsdWRlcyh0KSk7XG4gICAgfVxuXG4gICAgY29uc3QgeWFtbCA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtKTtcblxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxpbmVzLnB1c2goYCMgJHtuYW1lfWApO1xuICAgIGxpbmVzLnB1c2goYCMjIFN0YXRzYCk7XG5cbiAgICBjb25zdCBzaXplID0gQXJyYXkuaXNBcnJheShwcmltYXJ5LnNpemUpID8gcHJpbWFyeS5zaXplLm1hcCgoczogc3RyaW5nKSA9PiBTSVpFX01BUFtzXSB8fCBzKS5qb2luKFwiL1wiKSA6IFNJWkVfTUFQW3ByaW1hcnkuc2l6ZV0gPz8gcHJpbWFyeS5zaXplO1xuICAgIGxpbmVzLnB1c2goYCoqU2l6ZToqKiAke3NpemV9YCk7XG5cbiAgICBjb25zdCBzcGVlZFZhbCA9IHR5cGVvZiBwcmltYXJ5LnNwZWVkID09PSBcIm51bWJlclwiXG4gICAgICA/IHByaW1hcnkuc3BlZWRcbiAgICAgIDogcHJpbWFyeS5zcGVlZD8ud2FsayA/PyBwcmltYXJ5LnNwZWVkPy5iYXNlID8/IDA7XG4gICAgbGluZXMucHVzaChgKipTcGVlZDoqKiAke3NwZWVkVmFsfSBmdC4gd2Fsa2luZ2ApO1xuXG4gICAgY29uc3QgcmF3QWIgPSBwcmltYXJ5LmFiaWxpdHk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJhd0FiKSkge1xuICAgICAgICBjb25zdCBib251c2VzID0geyBzdHI6IDAsIGRleDogMCwgY29uOiAwLCBpbnQ6IDAsIHdpczogMCwgY2hhOiAwIH07XG4gICAgICAgIGxldCBjaG9vc2U6IGFueSA9IG51bGw7XG5cbiAgICAgICAgZm9yIChjb25zdCBvYmogb2YgcmF3QWIpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsXSBvZiBPYmplY3QuZW50cmllcyhvYmopKSB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSBcImNob29zZVwiKSB7XG4gICAgICAgICAgICAgICAgY2hvb3NlID0gdmFsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBib251c2VzW2tleSBhcyBrZXlvZiB0eXBlb2YgYm9udXNlc10gKz0gdmFsIGFzIG51bWJlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBhcnRzID0gT2JqZWN0LmVudHJpZXMoYm9udXNlcylcbiAgICAgICAgICAgIC5maWx0ZXIoKFssIHZdKSA9PiB2ICE9PSAwKVxuICAgICAgICAgICAgLm1hcCgoW2ssIHZdKSA9PiBgJHtrLnRvVXBwZXJDYXNlKCl9ICR7diA+PSAwID8gXCIrXCIgOiBcIlwifSR7dn1gKTtcblxuICAgICAgICBpZiAoY2hvb3NlPy5jb3VudCAmJiBjaG9vc2U/LmZyb20pIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdHMgPSBjaG9vc2UuZnJvbS5tYXAoKHM6IHN0cmluZykgPT4gcy50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgICAgIHBhcnRzLnB1c2goYENIT09TRSAke2Nob29zZS5jb3VudH0gZnJvbSAke29wdHMuam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCkgbGluZXMucHVzaChgKipBYmlsaXR5IFNjb3JlczoqKiAke3BhcnRzLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgICAgICBcblxuICAgIGNvbnN0IGxhbmdzID0gZm1bJ2xhbmd1YWdlcyddO1xuICAgIGlmIChsYW5ncyAmJiBBcnJheS5pc0FycmF5KGxhbmdzKSAmJiBsYW5ncy5sZW5ndGgpIHtcbiAgICAgIGxpbmVzLnB1c2goYCoqTGFuZ3VhZ2VzOioqICR7bGFuZ3Muam9pbignLCAnKX1gKTtcbiAgICB9XG4gICAgXG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgYWRkSWZBcnJheSA9IChsYWJlbDogc3RyaW5nLCBmaWVsZDogYW55KSA9PiB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmaWVsZCkgJiYgZmllbGQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGNvbnN0IG91dDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgICAgbGV0IGhhc0Nob2ljZSA9IGZhbHNlO1xuICAgICAgICAgIFxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgZmllbGQpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgIG91dC5wdXNoKHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMubmFtZSB8fCBzLnByb2ZpY2llbmN5KSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBzLm5hbWUgfHwgcy5wcm9maWNpZW5jeTtcbiAgICAgICAgICAgICAgICAgIGlmICh2YWwpIG91dC5wdXNoKHZhbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHZhbC5zbGljZSgxKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzLmNob29zZT8uZnJvbSkge1xuICAgICAgICAgICAgICAgICAgaGFzQ2hvaWNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gcy5jaG9vc2UuY291bnQgfHwgMTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBzLmNob29zZS5mcm9tLm1hcCgoczogc3RyaW5nKSA9PiBzLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcy5zbGljZSgxKSkuam9pbihcIiwgXCIpO1xuICAgICAgICAgICAgICAgICAgbGluZXMucHVzaChgKioke2xhYmVsfToqKiBDaG9vc2UgJHtjb3VudH0gZnJvbTogJHtsaXN0fWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoaGFzQ2hvaWNlKSBvdXQucHVzaChcIkNob2ljZVwiKTtcbiAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuXG4gICAgICAgIGNvbnN0IHJhd1NraWxscyA9IHByaW1hcnkuc2tpbGxQcm9maWNpZW5jaWVzO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyYXdTa2lsbHMpICYmIHJhd1NraWxscy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qgc2tpbGxMYWJlbHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiByYXdTa2lsbHMpIHtcbiAgICAgICAgICAgIGlmIChlbnRyeT8uY2hvb3NlPy5mcm9tKSB7XG4gICAgICAgICAgICBjb25zdCBmcm9tID0gZW50cnkuY2hvb3NlLmZyb20ubWFwKChzOiBzdHJpbmcpID0+IHMuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzLnNsaWNlKDEpKTtcbiAgICAgICAgICAgIHNraWxsTGFiZWxzLnB1c2goYENob29zZSBmcm9tOiAke2Zyb20uam9pbihcIiwgXCIpfWApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IGVudHJ5Py5wcm9maWNpZW5jeSB8fCBlbnRyeT8ubmFtZSB8fCBlbnRyeTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgc2tpbGxMYWJlbHMucHVzaCh2YWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWwuc2xpY2UoMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNraWxsTGFiZWxzLmxlbmd0aCkgbGluZXMucHVzaChgKipTa2lsbCBQcm9maWNpZW5jaWVzOioqICR7c2tpbGxMYWJlbHMuam9pbihcIjsgXCIpfWApO1xuICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgIGNvbnN0IHRvb2xQcm9mcyAgID0gZm1bRk1fRklFTERTLlRPT0xfUFJPRklDSUVOQ0lFU10gICBhcyBzdHJpbmdbXSB8IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgd2VhcG9uUHJvZnMgPSBmbVtGTV9GSUVMRFMuV0VBUE9OX1BST0ZJQ0lFTkNJRVNdIGFzIHN0cmluZ1tdIHwgdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBhcm1vclByb2ZzICA9IGZtW0ZNX0ZJRUxEUy5BUk1PUl9QUk9GSUNJRU5DSUVTXSAgYXMgc3RyaW5nW10gfCB1bmRlZmluZWQ7ICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIGlmICh0b29sUHJvZnM/Lmxlbmd0aCkgICBsaW5lcy5wdXNoKGAqKlRvb2wgUHJvZmljaWVuY2llczoqKiAgICR7dG9vbFByb2ZzLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgaWYgKHdlYXBvblByb2ZzPy5sZW5ndGgpIGxpbmVzLnB1c2goYCoqV2VhcG9uIFByb2ZpY2llbmNpZXM6KiogJHt3ZWFwb25Qcm9mcy5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIGlmIChhcm1vclByb2ZzPy5sZW5ndGgpICBsaW5lcy5wdXNoKGAqKkFybW9yIFByb2ZpY2llbmNpZXM6KiogICR7YXJtb3JQcm9mcy5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIFxuICAgICAgICAgXG5cbiAgICAgICAgbGluZXMucHVzaChgIyMgVHJhaXRzYCk7XG4gICAgICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgZm9yIChjb25zdCB0cmFpdCBvZiAoZm0udHJhaXRzIGFzIHN0cmluZ1tdIHx8IFtdKSkge1xuICAgICAgICAgIGxpbmVzLnB1c2goYCMjIyMjICR7dHJhaXR9YCk7XG4gICAgICAgICAgY29uc3QgZW50cnkgPSBwcmltYXJ5LmVudHJpZXM/LmZpbmQoXG4gICAgICAgICAgICAoZTogYW55KSA9PiB0eXBlb2YgZSAhPT0gXCJzdHJpbmdcIiAmJiBlLm5hbWUgPT09IHRyYWl0XG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoZW50cnkgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICAgICAgOyhlbnRyeS5lbnRyaWVzIGFzIGFueVtdKS5mb3JFYWNoKChzdWI6IGFueSwgaWR4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgYmxvY2s6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgaWYgKHN1Yi50eXBlID09PSBcInRhYmxlXCIpIHtcbiAgICAgICAgICAgICAgICBibG9jayA9IHJlbmRlck1hcmtkb3duVGFibGUoc3ViKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3ViLnR5cGUgPT09IFwibGlzdFwiKSB7XG4gICAgICAgICAgICAgICAgYmxvY2sgPSBzdWIuaXRlbXNcbiAgICAgICAgICAgICAgICAgIC5tYXAoKGl0ZW06IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdFx1MjAxOXMgYSBwbGFpbiBzdHJpbmcsIGp1c3QgcmVuZGVyIGl0XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgLSAke3JlcGxhY2U1ZVRhZ3MoaXRlbSkudHJpbSgpfWA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGFuIGl0ZW1TcGVsbCBvciBzaW1pbGFyIG9iamVjdDpcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBpdGVtLm5hbWU/LnRyaW0oKSA/PyBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRyeSA9IGl0ZW0uZW50cnlcbiAgICAgICAgICAgICAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3MoaXRlbS5lbnRyeSkudHJpbSgpXG4gICAgICAgICAgICAgICAgICAgICAgOiBcIlwiO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFiZWwgfHwgZW50cnlcbiAgICAgICAgICAgICAgICAgICAgICA/IGAtICR7bGFiZWx9JHtlbnRyeSA/IFwiIFwiICsgZW50cnkgOiBcIlwifWBcbiAgICAgICAgICAgICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgLmZpbHRlcihCb29sZWFuKSAvLyBkcm9wIGFueSBlbXB0eSBsaW5lc1xuICAgICAgICAgICAgICAgICAgLmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzdWIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBibG9jayA9IHJlcGxhY2U1ZVRhZ3Moc3ViKS50cmltKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGJsb2NrICYmICFzZWVuLmhhcyhibG9jaykpIHtcbiAgICAgICAgICAgICAgICBsaW5lcy5wdXNoKGJsb2NrKTtcbiAgICAgICAgICAgICAgICBzZWVuLmFkZChibG9jayk7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LmVudHJpZXMubGVuZ3RoID4gMSAmJiBpZHggPCBlbnRyeS5lbnRyaWVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICBcblxuICAgIGNvbnN0IGJvZHkgPSBsaW5lcy5qb2luKFwiXFxuXCIpO1xuICAgIG91dC5wdXNoKHtcbiAgICAgIHBhdGg6ICAgIGBTcGVjaWVzLyR7c2FmZU5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IGAtLS1cXG4ke3lhbWx9XFxuLS0tXFxuXFxuJHtib2R5fWBcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBvdXQuc29ydCgoYSwgYikgPT4gYS5wYXRoLmxvY2FsZUNvbXBhcmUoYi5wYXRoKSk7XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBQYXJzZWRNYXJrZG93bkZpbGUgfSBmcm9tIFwiLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGJ1aWxkRk0sIHNlcmlhbGl6ZUZyb250bWF0dGVyLCBDTEFTU19NRVRBX0RFRlMsIHVuaWZpZWRUb29sUHJvZnMgfSBmcm9tIFwiLi9oZWxwZXJzL2Zyb250bWF0dGVyXCI7XG5pbXBvcnQgeyByZW5kZXJNYXJrZG93blRhYmxlIH0gZnJvbSBcIi4vaGVscGVycy9tYXJrZG93blRhYmxlXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgZm9ybWF0RW50cnkgfSBmcm9tIFwiLi9oZWxwZXJzL2Zvcm1hdEVudHJ5XCI7XG5cbmZ1bmN0aW9uIGZvcm1hdEZlYXR1cmVMaW5rKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgaWdub3JlID0gW1wiQWJpbGl0eSBTY29yZSBJbXByb3ZlbWVudFwiLCBcIkFyY2hldHlwZSBGZWF0dXJlXCIsIFwiU3ViY2xhc3MgRmVhdHVyZVwiXTtcbiAgICBpZiAoaWdub3JlLnNvbWUoc3ViID0+IG5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzdWIudG9Mb3dlckNhc2UoKSkpKSB7XG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG4gIFxuICAgIGNvbnN0IGFuY2hvciA9IG5hbWVcbiAgICAgIC5yZXBsYWNlKC9bXlxcd1xcc10vZywgXCJcIikgICAgICAgICAgIC8vIHJlbW92ZSBwdW5jdHVhdGlvbiAoa2VlcCBzcGFjZXMpXG4gICAgICAucmVwbGFjZSgvLS9nLCBcIiBcIikgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGRhc2hlc1xuICAgICAgLnJlcGxhY2UoL1xccysvZywgXCIgXCIpICAgICAgICAgICAgICAvLyBub3JtYWxpemUgd2hpdGVzcGFjZVxuICAgICAgLnRyaW0oKVxuICAgICAgLnJlcGxhY2UoL1xcYlxcdy9nLCBsID0+IGwudG9VcHBlckNhc2UoKSk7IC8vIGNhcGl0YWxpemUgd29yZHNcbiAgXG4gICAgcmV0dXJuIGBbWyMke2FuY2hvcn1dXWA7XG4gIH1cbiAgXG5cbiAgXG4gIGZ1bmN0aW9uIHJlbmRlckVudHJpZXMoZW50cmllczogYW55W10pOiBzdHJpbmcge1xuICAgIHJldHVybiBlbnRyaWVzLm1hcCgoZW50cnkpID0+IHtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoZW50cnkpO1xuICAgICAgfVxuICBcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwicmVmQ2xhc3NGZWF0dXJlXCIpIHtcbiAgICAgICAgICBjb25zdCBbbmFtZV0gPSBlbnRyeS5jbGFzc0ZlYXR1cmUuc3BsaXQoXCJ8XCIpO1xuICAgICAgICAgIHJldHVybiBgKlNlZSBmZWF0dXJlOiAqKiR7bmFtZX0qKipgO1xuICAgICAgICB9XG4gIFxuICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgZW50cnkubmFtZSkge1xuICAgICAgICAgIGNvbnN0IGlubmVyID0gcmVuZGVyRW50cmllcyhlbnRyeS5lbnRyaWVzIHx8IFtdKTtcbiAgICAgICAgICByZXR1cm4gYCoqJHtlbnRyeS5uYW1lfSoqXFxuXFxuJHtpbm5lcn1gO1xuICAgICAgICB9XG4gIFxuICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gXCJpbnNldFwiICYmIGVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICBjb25zdCBpbm5lciA9IHJlbmRlckVudHJpZXMoZW50cnkuZW50cmllcyB8fCBbXSk7XG4gICAgICAgICAgcmV0dXJuIGA+ICoqJHtlbnRyeS5uYW1lfSoqXFxuPlxcbj4gJHtpbm5lci5zcGxpdChcIlxcblwiKS5qb2luKFwiXFxuPiBcIil9YDtcbiAgICAgICAgfVxuICBcbiAgICAgICAgLy8gZmFsbGJhY2tcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgICByZXR1cm4gcmVuZGVyRW50cmllcyhlbnRyeS5lbnRyaWVzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICBcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH0pLmZpbHRlcihCb29sZWFuKS5qb2luKFwiXFxuXCIpO1xuICB9XG4gIFxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2xhc3NGaWxlKFxuICBqc29uOiBhbnksXG4gIGVkaXRpb25JZDogc3RyaW5nLFxuICBmaWxlTmFtZT86IHN0cmluZ1xuKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICAvLyBtYWtlIGVkaXRpb25JZCBhdmFpbGFibGUgZm9yIGZyb250bWF0dGVyXG4gIChqc29uIGFzIGFueSkuX2VkaXRpb25JZCA9IGVkaXRpb25JZDtcblxuICAvLyB1bndyYXAgdGhlIHJlYWwgY2xhc3MgcmVjb3JkXG4gIGNvbnN0IGNscyA9IEFycmF5LmlzQXJyYXkoanNvbi5jbGFzcykgPyBqc29uLmNsYXNzWzBdIDoganNvbjtcbiAgLy8gZGVyaXZlIHRoZSBNYXJrZG93biBmaWxlbmFtZVxuICBjb25zdCBjbGFzc05hbWUgPVxuICAgIHR5cGVvZiBjbHMubmFtZSA9PT0gXCJzdHJpbmdcIlxuICAgICAgPyBjbHMubmFtZVxuICAgICAgOiBmaWxlTmFtZVxuICAgICAgPyBmaWxlTmFtZS5yZXBsYWNlKC9eY2xhc3MtLywgXCJcIikucmVwbGFjZSgvXFwuanNvbiQvLCBcIlwiKVxuICAgICAgOiBcIlVua25vd25cIjtcblxuICBjb25zdCBzdWJjbGFzc0ZpbGVzOiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuXG4gIGNvbnN0IFBST0ZfQk9OVVNfQllfTEVWRUwgPSBbXG4gICAgXCIrMlwiLCBcIisyXCIsIFwiKzJcIiwgXCIrMlwiLFxuICAgIFwiKzNcIiwgXCIrM1wiLCBcIiszXCIsIFwiKzNcIixcbiAgICBcIis0XCIsIFwiKzRcIiwgXCIrNFwiLCBcIis0XCIsXG4gICAgXCIrNVwiLCBcIis1XCIsIFwiKzVcIiwgXCIrNVwiLFxuICAgIFwiKzZcIiwgXCIrNlwiLCBcIis2XCIsIFwiKzZcIlxuICBdO1xuICBcbiAgLy8gbm9ybWFsaXplIGhpdFx1MjAxMGRpY2VcbiAgY29uc3QgaGROdW0gICA9IGNscy5oZD8ubnVtYmVyID8/IDE7XG4gIGNvbnN0IGhkRmFjZXMgPSBjbHMuaGQ/LmZhY2VzICA/PyA2O1xuICBjb25zdCBoZFN0ciAgID0gYCR7aGROdW19ZCR7aGRGYWNlc31gO1xuICBjb25zdCBoZE1heCAgID0gaGROdW0gKiBoZEZhY2VzO1xuICBjb25zdCBoZEF2ZyAgID0gTWF0aC5jZWlsKChoZEZhY2VzICsgMSkgLyAyKTtcblxuICAvLyBidWlsZCAmIG92ZXJyaWRlIGZyb250bWF0dGVyXG4gIGNvbnN0IGJhc2VGTSA9IGJ1aWxkRk0oY2xzLCBDTEFTU19NRVRBX0RFRlMpO1xuICBjb25zdCBmbSAgICAgPSB7IC4uLmJhc2VGTSwgaGQ6IGhkU3RyIH07XG4gIGNvbnN0IHlhbWwgICA9IHNlcmlhbGl6ZUZyb250bWF0dGVyKGZtKTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgVGl0bGUgJiBTb3VyY2UgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGxpbmVzLnB1c2goYCMgJHtjbGFzc05hbWV9YCk7XG4gIGlmIChjbHMuc291cmNlKSBsaW5lcy5wdXNoKGAqKlNvdXJjZToqKiAke2Nscy5zb3VyY2V9YCk7XG4gIGxpbmVzLnB1c2goYGApO1xuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBIaXQgUG9pbnRzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICBsaW5lcy5wdXNoKGAjIyBIaXQgUG9pbnRzYCk7XG4gIGxpbmVzLnB1c2goYCoqSGl0IERpY2U6KiogJHtoZFN0cn0gcGVyICR7Y2xhc3NOYW1lfSBsZXZlbGApO1xuICBsaW5lcy5wdXNoKGAqKkhpdCBQb2ludHMgYXQgMXN0IExldmVsOioqICR7aGRNYXh9ICsgeW91ciBDb25zdGl0dXRpb24gbW9kaWZpZXJgKTtcbiAgbGluZXMucHVzaChcbiAgICBgKipIaXQgUG9pbnRzIGF0IEhpZ2hlciBMZXZlbHM6KiogJHtoZFN0cn0gKG9yICR7aGRBdmd9KSArIHlvdXIgQ29uc3RpdHV0aW9uIG1vZGlmaWVyIHBlciBsZXZlbCBhZnRlciAxc3RgXG4gICk7XG5cbiAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIFByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gIGxpbmVzLnB1c2goYFxcbiMjIyBQcm9maWNpZW5jaWVzYCk7XG4gIGNvbnN0IHNwID0gY2xzLnN0YXJ0aW5nUHJvZmljaWVuY2llcyA/PyB7fTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoc3AuYXJtb3IpICAgJiYgc3AuYXJtb3IubGVuZ3RoKSAgIGxpbmVzLnB1c2goYCoqQXJtb3I6KiogJHtzcC5hcm1vci5qb2luKFwiLCBcIil9YCk7XG4gIGlmIChBcnJheS5pc0FycmF5KHNwLndlYXBvbnMpICYmIHNwLndlYXBvbnMubGVuZ3RoKSBsaW5lcy5wdXNoKGAqKldlYXBvbnM6KiogJHtzcC53ZWFwb25zLmpvaW4oXCIsIFwiKX1gKTtcbiAgY29uc3QgdG9vbExpc3QgPSB1bmlmaWVkVG9vbFByb2ZzKHNwLnRvb2xzKTtcbiAgaWYgKHRvb2xMaXN0Lmxlbmd0aCkge1xuICAgIGxpbmVzLnB1c2goYCoqVG9vbHM6KiogJHt0b29sTGlzdC5qb2luKFwiLCBcIil9YCk7XG4gIH1cbiAgY29uc3Qgc2F2ZXMgPSBBcnJheS5pc0FycmF5KGNscy5wcm9maWNpZW5jeSlcbiAgICA/IGNscy5wcm9maWNpZW5jeS5tYXAoKGs6IHN0cmluZykgPT5cbiAgICAgICAgKHsgc3RyOiBcIlN0cmVuZ3RoXCIsIGRleDogXCJEZXh0ZXJpdHlcIiwgY29uOiBcIkNvbnN0aXR1dGlvblwiLFxuICAgICAgICAgICBpbnQ6IFwiSW50ZWxsaWdlbmNlXCIsIHdpczogXCJXaXNkb21cIiwgY2hhOiBcIkNoYXJpc21hXCIgfVtrXSB8fCBrLnRvVXBwZXJDYXNlKCkpXG4gICAgICApXG4gICAgOiBbXTtcbiAgaWYgKHNhdmVzLmxlbmd0aCkgbGluZXMucHVzaChgKipTYXZpbmcgVGhyb3dzOioqICR7c2F2ZXMuam9pbihcIiwgXCIpfWApO1xuXG4gIGNvbnN0IHNraWxsQ2hvaWNlcyA9IHNwLnNraWxscyA/PyBbXTtcbiAgaWYgKHNraWxsQ2hvaWNlcy5sZW5ndGgpIHtcbiAgICBjb25zdCBza2lsbFRleHQgPSBza2lsbENob2ljZXNcbiAgICAgIC5tYXAoKHM6IGFueSkgPT5cbiAgICAgICAgcy5jaG9vc2VcbiAgICAgICAgICA/IGBDaG9vc2UgJHtzLmNob29zZS5jb3VudH0gZnJvbTogJHsgKHMuY2hvb3NlLmZyb20gYXMgc3RyaW5nW10pLm1hcChvID0+IG8ucmVwbGFjZSgvKFtBLVpdKS9nLCBcIiAkMVwiKS50cmltKCkpLmpvaW4oXCIsIFwiKSB9YFxuICAgICAgICAgIDogcy5uYW1lID8/IHNcbiAgICAgIClcbiAgICAgIC5qb2luKFwiOyBcIik7XG4gICAgbGluZXMucHVzaChgKipTa2lsbHM6KiogJHtza2lsbFRleHR9YCk7XG4gIH1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRXF1aXBtZW50IFx1MjUwMFx1MjUwMFx1MjUwMFxuICBpZiAoQXJyYXkuaXNBcnJheShjbHMuc3RhcnRpbmdFcXVpcG1lbnQpKSB7XG4gICAgbGluZXMucHVzaChgXFxuIyMjIEVxdWlwbWVudGApO1xuICAgIGNscy5zdGFydGluZ0VxdWlwbWVudFxuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiB0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgIC5mb3JFYWNoKChpdGVtOiBzdHJpbmcpID0+IGxpbmVzLnB1c2goYC0gJHtpdGVtfWApKTtcbiAgfVxuXG4gIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBDbGFzcyBQcm9ncmVzc2lvbiBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHByb2dHcm91cHMgPSBjbHMuY2xhc3NUYWJsZUdyb3VwcyA/PyBbXTtcbmNvbnN0IG1heExldmVsID0gMjA7XG5cbmxpbmVzLnB1c2goYFxcbiMjIENsYXNzIFByb2dyZXNzaW9uYCk7XG5cbmlmICghcHJvZ0dyb3Vwcy5sZW5ndGgpIHtcbiAgbGluZXMucHVzaChgKihObyBjbGFzcyB0YWJsZSBwcm92aWRlZCBmb3IgdGhpcyBjbGFzcy4pKmApO1xufSBlbHNlIHtcbiAgLy8gQnVpbGQgbGV2ZWwgXHUyMTkyIGZlYXR1cmUgbWFwXG4gIGNvbnN0IGZlYXR1cmVzQnlMZXZlbDogUmVjb3JkPG51bWJlciwgc3RyaW5nW10+ID0ge307XG4gIGZvciAoY29uc3QgZmVhdCBvZiBjbHMuY2xhc3NGZWF0dXJlcyA/PyBbXSkge1xuICAgIGNvbnN0IHJhdyA9IHR5cGVvZiBmZWF0ID09PSBcIm9iamVjdFwiICYmIGZlYXQuY2xhc3NGZWF0dXJlID8gZmVhdC5jbGFzc0ZlYXR1cmUgOiBTdHJpbmcoZmVhdCk7XG4gICAgY29uc3QgW25hbWUsLCAsbHZsU3RyXSA9IHJhdy5zcGxpdChcInxcIik7XG4gICAgY29uc3QgbHZsID0gTnVtYmVyKGx2bFN0ciA/PyAwKTtcbiAgICBpZiAoIWZlYXR1cmVzQnlMZXZlbFtsdmxdKSBmZWF0dXJlc0J5TGV2ZWxbbHZsXSA9IFtdO1xuICAgIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2gobmFtZSk7XG4gIH1cblxuICAvLyBVbmlmaWVkIGNvbExhYmVscyBhY3Jvc3MgYWxsIGdyb3Vwc1xuICBjb25zdCBhbGxMYWJlbHNTZXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgY29uc3Qgcm93TWFwczogUmVjb3JkPG51bWJlciwgUmVjb3JkPHN0cmluZywgc3RyaW5nPj4gPSB7fTtcblxuICBmb3IgKGNvbnN0IGdyb3VwIG9mIHByb2dHcm91cHMpIHtcbiAgICBjb25zdCBsYWJlbHMgPSBBcnJheS5pc0FycmF5KGdyb3VwLmNvbExhYmVscylcbiAgICAgID8gZ3JvdXAuY29sTGFiZWxzLm1hcCgobDogc3RyaW5nKSA9PiByZXBsYWNlNWVUYWdzKGwpKVxuICAgICAgOiBbXTtcbiAgICBjb25zdCByb3dzID0gQXJyYXkuaXNBcnJheShncm91cC5yb3dzKVxuICAgICAgPyBncm91cC5yb3dzXG4gICAgICA6IEFycmF5LmlzQXJyYXkoZ3JvdXAucm93c1NwZWxsUHJvZ3Jlc3Npb24pXG4gICAgICAgID8gZ3JvdXAucm93c1NwZWxsUHJvZ3Jlc3Npb25cbiAgICAgICAgOiBbXTtcblxuICAgIGlmICghbGFiZWxzLmxlbmd0aCB8fCAhcm93cy5sZW5ndGgpIGNvbnRpbnVlO1xuXG4gICAgZm9yIChsZXQgbHZsID0gMDsgbHZsIDwgcm93cy5sZW5ndGg7IGx2bCsrKSB7XG4gICAgICBjb25zdCBsZXZlbE51bSA9IGx2bCArIDE7XG4gICAgICBpZiAoIXJvd01hcHNbbGV2ZWxOdW1dKSByb3dNYXBzW2xldmVsTnVtXSA9IHt9O1xuICAgICAgY29uc3Qgcm93TWFwID0gcm93TWFwc1tsZXZlbE51bV07XG5cbiAgICAgIGNvbnN0IGNlbGxzID0gcm93c1tsdmxdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYWJlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbGFiZWwgPSBsYWJlbHNbaV07XG4gICAgICAgIGNvbnN0IGNlbGwgPSBjZWxsc1tpXTtcblxuICAgICAgICBhbGxMYWJlbHNTZXQuYWRkKGxhYmVsKTtcblxuICAgICAgICBsZXQgdmFsID0gXCJcIjtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY2VsbCkpIHtcbiAgICAgICAgICB2YWwgPSBjZWxsLmpvaW4oXCIsIFwiKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY2VsbCA9PT0gXCJvYmplY3RcIiAmJiBjZWxsICE9PSBudWxsICYmIFwidmFsdWVcIiBpbiBjZWxsKSB7XG4gICAgICAgICAgdmFsID0gU3RyaW5nKGNlbGwudmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbCA9IFN0cmluZyhjZWxsID8/IFwiXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcm93TWFwW2xhYmVsXSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG4gIC8vIE1lcmdlIGFsbCBkYXRhIGludG8gcm93c1xuICBjb25zdCBhbGxMYWJlbHMgPSBBcnJheS5mcm9tKGFsbExhYmVsc1NldCk7XG4gIGNvbnN0IG1lcmdlZExhYmVscyA9IFtcIkxldmVsXCIsIFwiUHJvZmljaWVuY3kgQm9udXNcIiwgXCJDbGFzcyBGZWF0dXJlc1wiLCAuLi5hbGxMYWJlbHNdO1xuICBjb25zdCBtZXJnZWRSb3dzOiBzdHJpbmdbXVtdID0gW107XG5cbiAgZm9yIChsZXQgbHZsID0gMTsgbHZsIDw9IG1heExldmVsOyBsdmwrKykge1xuICAgIGNvbnN0IGZlYXR1cmVMaXN0ID0gKGZlYXR1cmVzQnlMZXZlbFtsdmxdID8/IFtdKS5tYXAoZm9ybWF0RmVhdHVyZUxpbmspO1xuICAgIGNvbnN0IHJvd01hcCA9IHJvd01hcHNbbHZsXSA/PyB7fTtcbiAgICBjb25zdCByb3c6IHN0cmluZ1tdID0gW1xuICAgICAgbHZsLnRvU3RyaW5nKCksXG4gICAgICBQUk9GX0JPTlVTX0JZX0xFVkVMW2x2bCAtIDFdLFxuICAgICAgZmVhdHVyZUxpc3Quam9pbihcIiwgXCIpLnJlcGxhY2UoL1xcfC9nLCBcIiYjMTI0O1wiKSxcbiAgICAgIC4uLmFsbExhYmVscy5tYXAobGFiZWwgPT4gcm93TWFwW2xhYmVsXSA/PyBcIlwiKVxuICAgIF07XG4gICAgbWVyZ2VkUm93cy5wdXNoKHJvdyk7XG4gIH1cblxuICBsaW5lcy5wdXNoKHJlbmRlck1hcmtkb3duVGFibGUoe1xuICAgIHR5cGU6IFwidGFibGVcIixcbiAgICBjYXB0aW9uOiBcIlwiLFxuICAgIGNvbExhYmVsczogbWVyZ2VkTGFiZWxzLFxuICAgIHJvd3M6IG1lcmdlZFJvd3MsXG4gIH0pKTtcbn1cblxuICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgU3ViY2xhc3NlcyBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgY29uc3Qgc3VicyA9IEFycmF5LmlzQXJyYXkoanNvbi5zdWJjbGFzcykgPyBqc29uLnN1YmNsYXNzIDogW107XG4gIFxuICBjb25zdCBzdWJjbGFzc0ZlYXR1cmVzID0gQXJyYXkuaXNBcnJheShqc29uLnN1YmNsYXNzRmVhdHVyZSlcbiAgPyBqc29uLnN1YmNsYXNzRmVhdHVyZVxuICA6IGpzb24ubG9va3VwPy5zdWJjbGFzc0ZlYXR1cmUgPz8gW107XG5cbiAgZm9yIChjb25zdCBzYyBvZiBzdWJzKSB7XG4gICAgY29uc3Qgc3ViY2xhc3NOYW1lID0gc2MubmFtZTtcbiAgICBjb25zdCBzdWJMaW5lczogc3RyaW5nW10gPSBbXTtcbiAgXG4gICAgY29uc3QgZmVhdHVyZXNCeUxldmVsOiBSZWNvcmQ8bnVtYmVyLCBhbnlbXT4gPSB7fTtcbiAgXG4gICAgY29uc3QgaW50cm9FbnRyeSA9IHN1YmNsYXNzRmVhdHVyZXMuZmluZCgoZjogYW55KSA9PlxuICAgICAgZi5uYW1lID09PSBzYy5uYW1lICYmXG4gICAgICBmLmxldmVsID09PSAzICYmXG4gICAgICBmLnN1YmNsYXNzU2hvcnROYW1lID09PSBzYy5zaG9ydE5hbWUgJiZcbiAgICAgIGYuc3ViY2xhc3NTb3VyY2UgPT09IHNjLnNvdXJjZVxuICAgICk7XG4gICAgXG4gICAgaWYgKGludHJvRW50cnk/LmVudHJpZXM/Lmxlbmd0aCkge1xuICAgICAgc3ViTGluZXMucHVzaChmb3JtYXRFbnRyeShpbnRyb0VudHJ5LmVudHJpZXMpKTtcbiAgICB9XG5cbiAgZm9yIChjb25zdCBmZWF0IG9mIHN1YmNsYXNzRmVhdHVyZXMpIHtcbiAgICBpZiAoXG4gICAgICBmZWF0LnN1YmNsYXNzU2hvcnROYW1lID09PSBzYy5zaG9ydE5hbWUgJiZcbiAgICAgIGZlYXQuc3ViY2xhc3NTb3VyY2UgPT09IHNjLnNvdXJjZSAmJlxuICAgICAgZmVhdC5jbGFzc05hbWUgPT09IGNsYXNzTmFtZVxuICAgICkge1xuICAgICAgY29uc3QgbHZsID0gZmVhdC5sZXZlbCA/PyAwO1xuICAgICAgaWYgKCFmZWF0dXJlc0J5TGV2ZWxbbHZsXSkgZmVhdHVyZXNCeUxldmVsW2x2bF0gPSBbXTtcbiAgICAgIGZlYXR1cmVzQnlMZXZlbFtsdmxdLnB1c2goZmVhdCk7XG4gICAgfVxuICB9XG5cbiAgc3ViTGluZXMucHVzaChgIyAke3N1YmNsYXNzTmFtZX1gKTtcbiAgc3ViTGluZXMucHVzaChgKipQYXJlbnQgQ2xhc3M6KiogW1ske2NsYXNzTmFtZX1dXWApO1xuICBpZiAoc2Muc291cmNlKSBzdWJMaW5lcy5wdXNoKGAqKlNvdXJjZToqKiAke3NjLnNvdXJjZX1gKTtcbiAgXG5cbiAgLy8gU3ViY2xhc3MgcHJvZ3Jlc3Npb24gdGFibGUgKG9wdGlvbmFsKVxuICBjb25zdCBwcm9nR3JvdXBzID0gc2Muc3ViY2xhc3NUYWJsZUdyb3VwcyA/PyBbXTtcbiAgaWYgKHByb2dHcm91cHMubGVuZ3RoKSB7XG4gICAgY29uc3QgYWxsTGFiZWxzU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgY29uc3Qgcm93TWFwczogUmVjb3JkPG51bWJlciwgUmVjb3JkPHN0cmluZywgc3RyaW5nPj4gPSB7fTtcbiAgICBmb3IgKGNvbnN0IGdyb3VwIG9mIHByb2dHcm91cHMpIHtcbiAgICAgIGNvbnN0IGxhYmVscyA9IChncm91cC5jb2xMYWJlbHMgPz8gW10pLm1hcChyZXBsYWNlNWVUYWdzKTtcbiAgICAgIGNvbnN0IHJvd3MgPSBncm91cC5yb3dzID8/IGdyb3VwLnJvd3NTcGVsbFByb2dyZXNzaW9uID8/IFtdO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgcm93ID0gcm93c1tpXTtcbiAgICAgICAgaWYgKCFyb3dNYXBzW2kgKyAxXSkgcm93TWFwc1tpICsgMV0gPSB7fTtcbiAgICAgICAgcm93LmZvckVhY2goKGNlbGw6IGFueSwgajogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgY29uc3QgbGFiZWwgPSBsYWJlbHNbal07XG4gICAgICAgICAgaWYgKCFsYWJlbCkgcmV0dXJuO1xuICAgICAgICAgIGFsbExhYmVsc1NldC5hZGQobGFiZWwpO1xuICAgICAgICAgIHJvd01hcHNbaSArIDFdW2xhYmVsXSA9IHR5cGVvZiBjZWxsID09PSBcIm9iamVjdFwiICYmIFwidmFsdWVcIiBpbiBjZWxsXG4gICAgICAgICAgICA/IFN0cmluZyhjZWxsLnZhbHVlKVxuICAgICAgICAgICAgOiBTdHJpbmcoY2VsbCA/PyBcIlwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgYWxsTGFiZWxzID0gQXJyYXkuZnJvbShhbGxMYWJlbHNTZXQpO1xuICAgIGNvbnN0IG1lcmdlZExhYmVscyA9IFtcIkxldmVsXCIsIC4uLmFsbExhYmVsc107XG4gICAgY29uc3QgbWVyZ2VkUm93czogc3RyaW5nW11bXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgbHZsID0gMTsgbHZsIDw9IDIwOyBsdmwrKykge1xuICAgICAgY29uc3Qgcm93ID0gcm93TWFwc1tsdmxdID8/IHt9O1xuICAgICAgY29uc3QgZmluYWxSb3cgPSBbU3RyaW5nKGx2bCksIC4uLmFsbExhYmVscy5tYXAobGFiZWwgPT4gcm93W2xhYmVsXSA/PyBcIlwiKV07XG4gICAgICBtZXJnZWRSb3dzLnB1c2goZmluYWxSb3cpO1xuICAgIH1cblxuICAgIHN1YkxpbmVzLnB1c2goYCMjIFN1YmNsYXNzIFByb2dyZXNzaW9uYCk7XG4gICAgc3ViTGluZXMucHVzaChyZW5kZXJNYXJrZG93blRhYmxlKHtcbiAgICAgIHR5cGU6IFwidGFibGVcIixcbiAgICAgIGNhcHRpb246IFwiXCIsXG4gICAgICBjb2xMYWJlbHM6IG1lcmdlZExhYmVscyxcbiAgICAgIHJvd3M6IG1lcmdlZFJvd3MsXG4gICAgfSkpO1xuICAgIFxuICB9XG5cbiAgLy8gRmVhdHVyZXNcbiAgZm9yIChjb25zdCBsdmwgb2YgT2JqZWN0LmtleXMoZmVhdHVyZXNCeUxldmVsKS5zb3J0KChhLCBiKSA9PiArYSAtICtiKSkge1xuICAgIHN1YkxpbmVzLnB1c2goYC0tLWApO1xuICAgIHN1YkxpbmVzLnB1c2goYCMjIExldmVsICR7bHZsfWApO1xuICAgIGZvciAoY29uc3QgZmVhdCBvZiBmZWF0dXJlc0J5TGV2ZWxbK2x2bF0pIHtcbiAgICAgIHN1YkxpbmVzLnB1c2goYCMjIyAke2ZlYXQubmFtZX1gKTtcbiAgICAgIGNvbnN0IGRlc2MgPSBBcnJheS5pc0FycmF5KGZlYXQuZW50cmllcylcbiAgICAgICAgPyBmZWF0LmVudHJpZXMubWFwKGZvcm1hdEVudHJ5KS5qb2luKCdcXG5cXG4nKVxuICAgICAgICA6IGZvcm1hdEVudHJ5KGZlYXQuZW50cmllcyk7XG4gICAgICBzdWJMaW5lcy5wdXNoKGRlc2MpO1xuICAgIH1cbiAgfVxuICBcbiAgXG4gIGxldCBzdWJjbGFzc0NvbnRlbnQgPSBzdWJMaW5lcy5qb2luKFwiXFxuXFxuXCIpO1xuXG4gIC8vIENsZWFuIHVwIG9ubHkgKmV4Y2Vzc2l2ZSogYmxhbmsgbGluZXMgKDMrIFx1MjE5MiAyKVxuICBzdWJjbGFzc0NvbnRlbnQgPSBzdWJjbGFzc0NvbnRlbnQucmVwbGFjZSgvXFxuezMsfS9nLCAnXFxuXFxuJyk7XG4gIFxuICBzdWJjbGFzc0ZpbGVzLnB1c2goe1xuICAgIHBhdGg6IGBDbGFzc2VzLyR7Y2xhc3NOYW1lfS9TdWJjbGFzc2VzLyR7c3ViY2xhc3NOYW1lfS5tZGAsXG4gICAgY29udGVudDogc3ViY2xhc3NDb250ZW50XG4gIH0pO1xuICBcbiAgXG4gIFxufVxuXG4gIGlmIChzdWJzLmxlbmd0aCkge1xuICAgIGxpbmVzLnB1c2goYFxcbiMjIFN1YmNsYXNzZXNgKTtcbiAgICBmb3IgKGNvbnN0IHNjIG9mIHN1YnMpIHtcbiAgICAgICAgbGluZXMucHVzaChgLSBbW1N1YmNsYXNzZXMvJHtzYy5uYW1lLnJlcGxhY2UoL1tcXC9cXFxcXS9nLCBcIi1cIil9XV1gKTtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgZnVsbCBjbGFzcyBmZWF0dXJlIGRlZmluaXRpb25zXG5jb25zdCBhbGxGZWF0dXJlcyA9IEFycmF5LmlzQXJyYXkoanNvbi5jbGFzc0ZlYXR1cmUpID8ganNvbi5jbGFzc0ZlYXR1cmUgOiBqc29uLmxvb2t1cD8uY2xhc3NGZWF0dXJlID8/IFtdO1xuY29uc3QgZmVhdHVyZXNCeUxldmVsOiBSZWNvcmQ8bnVtYmVyLCBhbnlbXT4gPSB7fTtcblxuZm9yIChjb25zdCBlbnRyeSBvZiBhbGxGZWF0dXJlcykge1xuICBpZiAoZW50cnkuY2xhc3NOYW1lICE9PSBjbGFzc05hbWUpIGNvbnRpbnVlO1xuICBjb25zdCBsdmwgPSBlbnRyeS5sZXZlbCA/PyAwO1xuICBpZiAoIWZlYXR1cmVzQnlMZXZlbFtsdmxdKSBmZWF0dXJlc0J5TGV2ZWxbbHZsXSA9IFtdO1xuICBmZWF0dXJlc0J5TGV2ZWxbbHZsXS5wdXNoKGVudHJ5KTtcbn1cblxuZm9yIChjb25zdCBsdmwgb2YgT2JqZWN0LmtleXMoZmVhdHVyZXNCeUxldmVsKS5zb3J0KChhLCBiKSA9PiArYSAtICtiKSkge1xuICAgIGxpbmVzLnB1c2goYCMjIExldmVsICR7bHZsfWApO1xuICAgIGZvciAoY29uc3QgZmVhdCBvZiBmZWF0dXJlc0J5TGV2ZWxbK2x2bF0pIHtcbiAgICAgIGxpbmVzLnB1c2goYCMjIyAke2ZlYXQubmFtZX1gKTtcbiAgXG4gICAgICBjb25zdCBkZXNjID0gQXJyYXkuaXNBcnJheShmZWF0LmVudHJpZXMpXG4gICAgICAgID8gZmVhdC5lbnRyaWVzXG4gICAgICAgIC5maWx0ZXIoKGU6IGFueSkgPT5cbiAgICAgICAgICAgICEodHlwZW9mIGUgPT09IFwic3RyaW5nXCIgJiYgZS50cmltKCkgPT09IFwifVwiKSAmJlxuICAgICAgICAgICAgISh0eXBlb2YgZSA9PT0gXCJvYmplY3RcIiAmJiBPYmplY3Qua2V5cyhlKS5sZW5ndGggPT09IDApXG4gICAgICAgICAgKVxuICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIC5tYXAocmVwbGFjZTVlVGFncylcbiAgICAgICAgICAgIC5qb2luKCdcXG5cXG4nKVxuICAgICAgICA6ICh0eXBlb2YgZmVhdC5lbnRyaWVzID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IHJlcGxhY2U1ZVRhZ3MoZmVhdC5lbnRyaWVzKVxuICAgICAgICAgICAgOiBcIlwiKTtcbiAgXG4gICAgICBpZiAoZGVzYy50cmltKCkpIHtcbiAgICAgICAgbGluZXMucHVzaChkZXNjKTtcbiAgICAgIH1cbiAgXG4gICAgICBsaW5lcy5wdXNoKFwiXCIpOyAvLyBvbmUgYmxhbmsgbGluZSBhZnRlciBlYWNoIGZlYXR1cmVcbiAgICB9XG4gICAgbGluZXMucHVzaCgnLS0tJyk7XG4gIH1cbiAgXG4gIFxuXG4gIC8vIHN0aXRjaCwgcmVwbGFjZSB0YWdzLCByZXR1cm5cbiAgbGV0IGNvbnRlbnQgPSBgLS0tXFxuJHt5YW1sfVxcbi0tLVxcblxcbiR7bGluZXMuam9pbihcIlxcblwiKX1gO1xuICAvLyBjb21tZW50IHRoaXMgb3V0IHdoaWxlIGRlYnVnZ2luZzpcbiAgY29udGVudCA9IHJlcGxhY2U1ZVRhZ3MoY29udGVudCk7XG5cbiAgY29udGVudCA9IGNvbnRlbnRcbiAgLnJlcGxhY2UoL1xcbnszLH0vZywgJ1xcblxcbicpICAgLy8gbm8gbW9yZSB0aGFuIDIgbmV3bGluZXMgaW4gYSByb3dcbiAgLnJlcGxhY2UoL1xcbiArXFxuL2csICdcXG5cXG4nKTsgIC8vIHRyaW0gYmxhbmsgbGluZXMgd2l0aCB0cmFpbGluZyBzcGFjZXNcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHBhdGg6IGBDbGFzc2VzLyR7Y2xhc3NOYW1lfS8ke2NsYXNzTmFtZX0ubWRgLFxuICAgICAgY29udGVudCxcbiAgICB9LFxuICAgIC4uLnN1YmNsYXNzRmlsZXMsXG4gIF07XG4gIFxufVxuIiwgIi8vIHNyYy9wYXJzZXJzL3J1bGVzLnRzXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcblxuLyoqXG4gKiBQYXJzZSBhY3Rpb25zLmpzb24gaW50byBhIHNpbmdsZSBNYXJrZG93biBub3RlIHdpdGggIyMgaGVhZGVycyBmb3IgZWFjaCBhY3Rpb24sXG4gKiBoYW5kbGluZyBuZXN0ZWQgZW50cmllcywgaW5zZXRzLCBsaXN0cywgdGFibGVzLCBhbmQgYWRkaW5nIHNlcGFyYXRvcnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUFjdGlvbnNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShqc29uLmFjdGlvbikpIHJldHVybiBbXTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCBhY3Rpb24gb2YganNvbi5hY3Rpb24pIHtcbiAgICBsaW5lcy5wdXNoKGAjIyAke2FjdGlvbi5uYW1lfWApO1xuICAgIGNvbnN0IGVudHJpZXMgPSBBcnJheS5pc0FycmF5KGFjdGlvbi5lbnRyaWVzKSA/IGFjdGlvbi5lbnRyaWVzIDogW2FjdGlvbi5lbnRyaWVzXTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgIGlmICghZW50cnkpIGNvbnRpbnVlO1xuICAgICAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCBwYXJhcyA9IGVudHJ5LnNwbGl0KC9cXG57Mix9Lyk7XG4gICAgICAgIGZvciAoY29uc3QgcGFyYSBvZiBwYXJhcykge1xuICAgICAgICAgIGNvbnN0IHQgPSBwYXJhLnRyaW0oKTtcbiAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBlbnRyeS5pdGVtcykge1xuICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0ZW0pfWApO1xuICAgICAgICB9XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9IGVsc2UgaWYgKChlbnRyeS50eXBlID09PSBcImVudHJpZXNcIiB8fCBlbnRyeS50eXBlID09PSBcImluc2V0XCIpICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgbGluZXMucHVzaChgIyMjICR7ZW50cnkubmFtZX1gKTtcbiAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgZW50cnkuZW50cmllcykge1xuICAgICAgICAgIGlmICh0eXBlb2Ygc3ViID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBjb25zdCBwcyA9IHN1Yi5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwIG9mIHBzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHR0ID0gcC50cmltKCk7XG4gICAgICAgICAgICAgIGlmICh0dCkge1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0dCkpO1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHN1Yi50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KHN1Yi5pdGVtcykpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGkgb2Ygc3ViLml0ZW1zKSB7XG4gICAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGxpKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoc3ViKVxuICAgICAgICAgICAgICA/IHN1Yi5qb2luKFwiIFwiKVxuICAgICAgICAgICAgICA6IHR5cGVvZiBzdWIgPT09IFwib2JqZWN0XCJcbiAgICAgICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KHN1YilcbiAgICAgICAgICAgICAgICA6IFN0cmluZyhzdWIpO1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGVudHJ5LmNvbExhYmVscyB8fCBbXTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiBlbnRyeS5yb3dzKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpXG4gICAgICAgICAgPyBlbnRyeS5qb2luKFwiIFwiKVxuICAgICAgICAgIDogdHlwZW9mIGVudHJ5ID09PSBcIm9iamVjdFwiXG4gICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KGVudHJ5KVxuICAgICAgICAgICAgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIGFjdGlvbnNcbiAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICB9XG4gIGNvbnN0IGNsZWFuZWQgPSBsaW5lcy5yZWR1Y2U8c3RyaW5nW10+KChhY2MsIGN1cnIpID0+IHtcbiAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoY3Vycik7XG4gIH0sIFtdKTtcbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvQWN0aW9ucy5tZFwiLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSxcbiAgXTtcbn1cblxuLyoqXG4gKiBQYXJzZSBjb21iaW5lZCBjb25kaXRpb25zZGlzZWFzZXMuanNvbiBpbnRvIHR3byBNYXJrZG93biBub3RlczogQ29uZGl0aW9ucy5tZCBhbmQgRGlzZWFzZXMubWRcbiAqIGFkZGluZyBzZXBhcmF0b3JzIGJldHdlZW4gZW50cmllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ29uZGl0aW9uc0Rpc2Vhc2VzRmlsZShqc29uOiBhbnksIGVkaXRpb25JZDogc3RyaW5nKTogUGFyc2VkTWFya2Rvd25GaWxlW10ge1xuICBjb25zdCBvdXRwdXRzOiBQYXJzZWRNYXJrZG93bkZpbGVbXSA9IFtdO1xuICBjb25zdCBwcm9jZXNzSXRlbXMgPSAoaXRlbXM6IGFueVtdLCBvdXRQYXRoOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgIGxpbmVzLnB1c2goYCMjICR7aXRlbS5uYW1lfWApO1xuICAgICAgY29uc3QgZW50cmllcyA9IEFycmF5LmlzQXJyYXkoaXRlbS5lbnRyaWVzKSA/IGl0ZW0uZW50cmllcyA6IFtpdGVtLmVudHJpZXNdO1xuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIGlmICghZW50cnkpIGNvbnRpbnVlO1xuICAgICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgY29uc3QgcGFyYXMgPSBlbnRyeS5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICAgIGZvciAoY29uc3QgcGFyYSBvZiBwYXJhcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IHBhcmEudHJpbSgpO1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHQpKTtcbiAgICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHR4dCBvZiBlbnRyeS5pdGVtcykge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3ModHh0KX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcInRhYmxlXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5yb3dzKSkge1xuICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBlbnRyeS5jb2xMYWJlbHMgfHwgW107XG4gICAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICAgIGxpbmVzLnB1c2goYHwgJHtoZWFkZXJzLm1hcCgoKSA9PiBcIi0tLVwiKS5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgICAgZm9yIChjb25zdCByb3cgb2YgZW50cnkucm93cykge1xuICAgICAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5lbnRyaWVzKSkge1xuICAgICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgZW50cnkuZW50cmllcykge1xuICAgICAgICAgICAgY29uc3QgdHh0ID0gdHlwZW9mIHN1YiA9PT0gXCJzdHJpbmdcIiA/IHN1YiA6IFN0cmluZyhzdWIpO1xuICAgICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdHh0ID0gQXJyYXkuaXNBcnJheShlbnRyeSkgPyBlbnRyeS5qb2luKFwiIFwiKSA6IFN0cmluZyhlbnRyeSk7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIGl0ZW1zXG4gICAgICBsaW5lcy5wdXNoKFwiLS0tXCIpO1xuICAgIH1cbiAgICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgICBpZiAoY3VyciA9PT0gXCJcIiAmJiBhY2MubGVuZ3RoICYmIGFjY1thY2MubGVuZ3RoIC0gMV0gPT09IFwiXCIpIHJldHVybiBhY2M7XG4gICAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgICB9LCBbXSk7XG4gICAgb3V0cHV0cy5wdXNoKHsgcGF0aDogb3V0UGF0aCwgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIgfSk7XG4gIH07XG4gIHByb2Nlc3NJdGVtcyhqc29uLmNvbmRpdGlvbiB8fCBbXSwgXCJSdWxlcyBhbmQgUmVmZXJlbmNlL0NvbmRpdGlvbnMubWRcIik7XG4gIHByb2Nlc3NJdGVtcyhqc29uLmRpc2Vhc2UgfHwgW10sIFwiUnVsZXMgYW5kIFJlZmVyZW5jZS9EaXNlYXNlcy5tZFwiKTtcbiAgcmV0dXJuIG91dHB1dHM7XG59XG5cbi8qKlxuICogUGFyc2Ugc2Vuc2VzLmpzb24gaW50byBhIHNpbmdsZSBNYXJrZG93biBub3RlIHdpdGggIyMgaGVhZGVycyBmb3IgZWFjaCBzZW5zZSxcbiAqIGhhbmRsaW5nIGxpc3RzLCB0YWJsZXMsIG5lc3RlZCBlbnRyaWVzL2luc2V0cywgYW5kIHNlcGFyYXRvcnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNlbnNlc0ZpbGUoanNvbjogYW55LCBlZGl0aW9uSWQ6IHN0cmluZyk6IFBhcnNlZE1hcmtkb3duRmlsZVtdIHtcbiAgY29uc3QgaXRlbXMgPSBBcnJheS5pc0FycmF5KGpzb24uc2Vuc2UpID8ganNvbi5zZW5zZSA6IEFycmF5LmlzQXJyYXkoanNvbi5zZW5zZXMpID8ganNvbi5zZW5zZXMgOiBbXTtcbiAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCBzZW5zZSBvZiBpdGVtcykge1xuICAgIGxpbmVzLnB1c2goYCMjICR7c2Vuc2UubmFtZX1gKTtcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShzZW5zZS5lbnRyaWVzKSA/IHNlbnNlLmVudHJpZXMgOiBbc2Vuc2UuZW50cmllc107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgcGFyYXMgPSBlbnRyeS5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfSBlbHNlIGlmICgoZW50cnkudHlwZSA9PT0gXCJlbnRyaWVzXCIgfHwgZW50cnkudHlwZSA9PT0gXCJpbnNldFwiKSAmJiBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYCMjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIGVudHJ5LmVudHJpZXMpIHtcbiAgICAgICAgICBjb25zdCB0eHQgPSB0eXBlb2Ygc3ViID09PSBcInN0cmluZ1wiID8gc3ViIDogU3RyaW5nKHN1Yik7XG4gICAgICAgICAgbGluZXMucHVzaChyZXBsYWNlNWVUYWdzKHR4dCkpO1xuICAgICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJ0YWJsZVwiICYmIEFycmF5LmlzQXJyYXkoZW50cnkucm93cykpIHtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGVudHJ5LmNvbExhYmVscyB8fCBbXTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hlYWRlcnMuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGVhZGVycy5tYXAoKCkgPT4gXCItLS1cIikuam9pbihcIiB8IFwiKX0gfGApO1xuICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiBlbnRyeS5yb3dzKSB7XG4gICAgICAgICAgbGluZXMucHVzaChgfCAke3Jvdy5qb2luKFwiIHwgXCIpfSB8YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHR4dCA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkuam9pbihcIiBcIikgOiBTdHJpbmcoZW50cnkpO1xuICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3ModHh0KSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNlcGFyYXRvciBiZXR3ZWVuIHNlbnNlc1xuICAgIGxpbmVzLnB1c2goXCItLS1cIik7XG4gIH1cbiAgY29uc3QgY2xlYW5lZCA9IGxpbmVzLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VycikgPT4ge1xuICAgIGlmIChjdXJyID09PSBcIlwiICYmIGFjYy5sZW5ndGggJiYgYWNjW2FjYy5sZW5ndGggLSAxXSA9PT0gXCJcIikgcmV0dXJuIGFjYztcbiAgICByZXR1cm4gYWNjLmNvbmNhdChjdXJyKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgcGF0aDogXCJSdWxlcyBhbmQgUmVmZXJlbmNlL1NlbnNlcy5tZFwiLFxuICAgICAgY29udGVudDogY2xlYW5lZC5qb2luKFwiXFxuXCIpLnRyaW0oKSArIFwiXFxuXCIsXG4gICAgfSxcbiAgXTtcbn1cblxuLyoqXG4gKiBQYXJzZSBza2lsbHMuanNvbiBpbnRvIGEgc2luZ2xlIE1hcmtkb3duIG5vdGUgd2l0aCAjIyBoZWFkZXJzIGZvciBlYWNoIHNraWxsLFxuICogcHJlcGVuZGluZyBhbiBhYmlsaXR5IGxpbmUsIGhhbmRsaW5nIHBhcmFncmFwaHMsIGFuZCBzZXBhcmF0b3JzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTa2lsbHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGl0ZW1zID0gQXJyYXkuaXNBcnJheShqc29uLnNraWxsKVxuICAgID8ganNvbi5za2lsbFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLnNraWxscylcbiAgICA/IGpzb24uc2tpbGxzXG4gICAgOiBbXTtcbiAgaWYgKCFpdGVtcy5sZW5ndGgpIHJldHVybiBbXTtcblxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgZm9yIChjb25zdCBza2lsbCBvZiBpdGVtcykge1xuICAgIGxpbmVzLnB1c2goYCMjICR7c2tpbGwubmFtZX1gKTtcbiAgICBpZiAoc2tpbGwuYWJpbGl0eSkge1xuICAgICAgbGluZXMucHVzaChgKkFiaWxpdHk6ICR7c2tpbGwuYWJpbGl0eX0qYCk7XG4gICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgIH1cbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShza2lsbC5lbnRyaWVzKSA/IHNraWxsLmVudHJpZXMgOiBbc2tpbGwuZW50cmllc107XG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICBpZiAoIWVudHJ5KSBjb250aW51ZTtcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3QgcGFyYXMgPSBlbnRyeS5zcGxpdCgvXFxuezIsfS8pO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcmEgb2YgcGFyYXMpIHtcbiAgICAgICAgICBjb25zdCB0ID0gcGFyYS50cmltKCk7XG4gICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7XG4gICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSBcImxpc3RcIiAmJiBBcnJheS5pc0FycmF5KGVudHJ5Lml0ZW1zKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZW50cnkuaXRlbXMpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAtICR7cmVwbGFjZTVlVGFncyhpdGVtKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdHh0ID0gQXJyYXkuaXNBcnJheShlbnRyeSkgPyBlbnRyeS5qb2luKFwiIFwiKSA6IFN0cmluZyhlbnRyeSk7XG4gICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eHQpKTtcbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU2VwYXJhdG9yIGJldHdlZW4gc2tpbGxzXG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgfVxuICBjb25zdCBjbGVhbmVkID0gbGluZXMucmVkdWNlPHN0cmluZ1tdPigoYWNjLCBjdXJyKSA9PiB7XG4gICAgaWYgKGN1cnIgPT09IFwiXCIgJiYgYWNjLmxlbmd0aCAmJiBhY2NbYWNjLmxlbmd0aCAtIDFdID09PSBcIlwiKSByZXR1cm4gYWNjO1xuICAgIHJldHVybiBhY2MuY29uY2F0KGN1cnIpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICBwYXRoOiBcIlJ1bGVzIGFuZCBSZWZlcmVuY2UvU2tpbGxzLm1kXCIsXG4gICAgICBjb250ZW50OiBjbGVhbmVkLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9LFxuICBdO1xufVxuIiwgIi8vIHNyYy9wYXJzZXJzL2ZlYXRzLnRzXG5pbXBvcnQgdHlwZSB7IFBhcnNlZE1hcmtkb3duRmlsZSB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgcmVwbGFjZTVlVGFncyB9IGZyb20gXCIuL2hlbHBlcnMvdGFnUmVwbGFjZXJcIjtcblxuLyoqXG4gKiBQYXJzZSBmZWF0cy5qc29uIGludG8gb25lIE1hcmtkb3duIGZpbGUgcGVyIGZlYXQgdW5kZXIgUGxheWVyIEJ1aWxkL0ZlYXRzLFxuICogaW5jbHVkaW5nIGZyb250bWF0dGVyLCBjbGVhbmVkIHByZXJlcXVpc2l0ZXMsIGFuZCBmb3JtYXR0ZWQgZW50cmllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRmVhdHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIGNvbnN0IGZlYXRzOiBhbnlbXSA9IEFycmF5LmlzQXJyYXkoanNvbi5mZWF0KVxuICAgID8ganNvbi5mZWF0XG4gICAgOiBBcnJheS5pc0FycmF5KGpzb24uZmVhdHMpXG4gICAgPyBqc29uLmZlYXRzXG4gICAgOiBbXTtcbiAgY29uc3Qgb3V0cHV0czogUGFyc2VkTWFya2Rvd25GaWxlW10gPSBbXTtcblxuICBmZWF0cy5mb3JFYWNoKChmZWF0OiBhbnkpID0+IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIEZyb250bWF0dGVyXG4gICAgbGluZXMucHVzaChcIi0tLVwiKTtcbiAgICBpZiAoZmVhdC5zb3VyY2UpIGxpbmVzLnB1c2goYHNvdXJjZTogXCIke2ZlYXQuc291cmNlfVwiYCk7XG4gICAgbGluZXMucHVzaChcIi0tLVwiLCBcIlwiKTtcblxuICAgIC8vIFRpdGxlXG4gICAgbGluZXMucHVzaChgIyAke2ZlYXQubmFtZX1gKTtcbiAgICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gICAgLy8gUHJlcmVxdWlzaXRlc1xuICAgIGNvbnN0IHByZXJlcXM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZmVhdC5wcmVyZXF1aXNpdGUpKSB7XG4gICAgICBmZWF0LnByZXJlcXVpc2l0ZS5mb3JFYWNoKChwcjogYW55KSA9PiB7XG4gICAgICAgIGlmIChwci5sZXZlbCkgcHJlcmVxcy5wdXNoKGBMZXZlbCAke3ByLmxldmVsfWApO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwci5mZWF0KSkge1xuICAgICAgICAgIHByLmZlYXQuZm9yRWFjaCgoZjogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gZi5zcGxpdChcInxcIilbMF0ucmVwbGFjZSgvXFxiXFx3L2csIGMgPT4gYy50b1VwcGVyQ2FzZSgpKTtcbiAgICAgICAgICAgIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBbWyR7bmFtZX1dXWApO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGZlYXQuc3BlbGxjYXN0aW5nUHJlcGFyZWQpIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBTcGVsbGNhc3RlcmApO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQudG9vbFByb2ZpY2llbmNpZXMpKSB7XG4gICAgICBmZWF0LnRvb2xQcm9maWNpZW5jaWVzLmZvckVhY2goKHRwOiBhbnkpID0+IHtcbiAgICAgICAgT2JqZWN0LmVudHJpZXModHApLmZvckVhY2goKFtrZXldKSA9PiB7XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ2FueUFydGlzYW5zVG9vbCcpIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBQcm9maWNpZW50IHdpdGggYW4gYXJ0aXNhbidzIHRvb2xgKTtcbiAgICAgICAgICBlbHNlIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiBQcm9maWNpZW50IHdpdGggJHtrZXkucmVwbGFjZSgvKFtBLVpdKS9nLCcgJDEnKS50cmltKCl9YCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGZlYXQuYXJtb3JQcm9maWNpZW5jaWVzKSkge1xuICAgICAgZmVhdC5hcm1vclByb2ZpY2llbmNpZXMuZm9yRWFjaCgoYXJtOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgYXJtU3RyID0gdHlwZW9mIGFybSA9PT0gJ3N0cmluZycgPyBhcm0gOiBKU09OLnN0cmluZ2lmeShhcm0pO1xuICAgICAgICBwcmVyZXFzLnB1c2goYFByZXJlcXVpc2l0ZTogUHJvZmljaWVudCB3aXRoICR7YXJtU3RyLnJlcGxhY2UoLyhbQS1aXSkvZywnICQxJykudHJpbSgpfWApO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChmZWF0LnJhY2UpIHByZXJlcXMucHVzaChgUHJlcmVxdWlzaXRlOiAke2ZlYXQucmFjZX1gKTtcblxuICAgIGlmIChwcmVyZXFzLmxlbmd0aCkge1xuICAgICAgbGluZXMucHVzaChgKipQcmVyZXF1aXNpdGVzKipgKTtcbiAgICAgIHByZXJlcXMuZm9yRWFjaChwID0+IGxpbmVzLnB1c2goYC0gJHtwfWApKTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gRW50cmllcyByZW5kZXJpbmdcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuaXNBcnJheShmZWF0LmVudHJpZXMpID8gZmVhdC5lbnRyaWVzIDogW2ZlYXQuZW50cmllc107XG4gICAgZW50cmllcy5mb3JFYWNoKChlbnRyeTogYW55KSA9PiB7XG4gICAgICBpZiAoIWVudHJ5KSByZXR1cm47XG5cbiAgICAgIC8vIFBsYWluIHRleHRcbiAgICAgIGlmICh0eXBlb2YgZW50cnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGVudHJ5LnNwbGl0KC9cXG57Mix9LykuZm9yRWFjaChwID0+IHtcbiAgICAgICAgICBjb25zdCB0ID0gcC50cmltKCk7IGlmICh0KSB7IGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0KSk7IGxpbmVzLnB1c2goXCJcIik7IH1cbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIExpc3RcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ2xpc3QnICYmIEFycmF5LmlzQXJyYXkoZW50cnkuaXRlbXMpKSB7XG4gICAgICAgIGVudHJ5Lml0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGl0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXQpfWApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXQudHlwZSA9PT0gJ2l0ZW0nICYmIGl0Lm5hbWUpIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gKioke2l0Lm5hbWV9KipgKTtcbiAgICAgICAgICAgIGNvbnN0IHN1YnMgPSBBcnJheS5pc0FycmF5KGl0LmVudHJpZXMpID8gaXQuZW50cmllcyA6IFtpdC5lbnRyaWVzXTtcbiAgICAgICAgICAgIHN1YnMuZm9yRWFjaCgoczogYW55KSA9PiBsaW5lcy5wdXNoKGAgIC0gJHtyZXBsYWNlNWVUYWdzKHR5cGVvZiBzID09PSAnc3RyaW5nJyA/IHMgOiBKU09OLnN0cmluZ2lmeShzKSl9YCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGxpbmVzLnB1c2goXCJcIik7XG5cbiAgICAgIC8vIEluc2V0IGFzIGluZGVudGVkIGJ1bGxldFxuICAgICAgfSBlbHNlIGlmIChlbnRyeS50eXBlID09PSAnaW5zZXQnKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYC0gKiR7ZW50cnkubmFtZX0qYCk7XG4gICAgICAgIGNvbnN0IHN1YnMgPSBBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpID8gZW50cnkuZW50cmllcyA6IFtlbnRyeS5lbnRyaWVzXTtcbiAgICAgICAgc3Vicy5mb3JFYWNoKChzOiBhbnkpID0+IGxpbmVzLnB1c2goYCAgLSAke3JlcGxhY2U1ZVRhZ3Mocyl9YCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuXG4gICAgICAvLyBTZWN0aW9uIG9yIGVudHJpZXNcbiAgICAgIH0gZWxzZSBpZiAoKGVudHJ5LnR5cGUgPT09ICdzZWN0aW9uJyB8fCBlbnRyeS50eXBlID09PSAnZW50cmllcycpICYmIEFycmF5LmlzQXJyYXkoZW50cnkuZW50cmllcykpIHtcbiAgICAgICAgaWYgKGVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICBsaW5lcy5wdXNoKGAjIyAke2VudHJ5Lm5hbWV9YCk7XG4gICAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbnRyeS5lbnRyaWVzLmZvckVhY2goKHM6IGFueSkgPT4ge1xuICAgICAgICAgIGxpbmVzLnB1c2gocmVwbGFjZTVlVGFncyh0eXBlb2YgcyA9PT0gJ3N0cmluZycgPyBzIDogSlNPTi5zdHJpbmdpZnkocykpKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgLy8gVGFibGVcbiAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gJ3RhYmxlJyAmJiBBcnJheS5pc0FycmF5KGVudHJ5LnJvd3MpKSB7XG4gICAgICAgIGNvbnN0IGhkciA9IGVudHJ5LmNvbExhYmVscyB8fCBbXTtcbiAgICAgICAgbGluZXMucHVzaChgfCAke2hkci5qb2luKCcgfCAnKX0gfGApO1xuICAgICAgICBsaW5lcy5wdXNoKGB8ICR7aGRyLm1hcCgoKSA9PiAnLS0tJykuam9pbignIHwgJyl9IHxgKTtcbiAgICAgICAgZW50cnkucm93cy5mb3JFYWNoKChyb3c6IGFueVtdKSA9PiBsaW5lcy5wdXNoKGB8ICR7cm93LmpvaW4oJyB8ICcpfSB8YCkpO1xuICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgb3V0cHV0cy5wdXNoKHtcbiAgICAgIHBhdGg6IGBQbGF5ZXIgQnVpbGQvRmVhdHMvJHtmZWF0Lm5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IGxpbmVzLmpvaW4oXCJcXG5cIikudHJpbSgpICsgXCJcXG5cIixcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIG91dHB1dHM7XG59XG4iLCAiLy8gc3JjL3BhcnNlcnMvYmFja2dyb3VuZHMudHNcbmltcG9ydCB0eXBlIHsgUGFyc2VkTWFya2Rvd25GaWxlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyByZXBsYWNlNWVUYWdzIH0gZnJvbSBcIi4vaGVscGVycy90YWdSZXBsYWNlclwiO1xuaW1wb3J0IHsgcmVuZGVyTWFya2Rvd25UYWJsZSB9IGZyb20gXCIuL2hlbHBlcnMvbWFya2Rvd25UYWJsZVwiO1xuaW1wb3J0IHsgYnVpbGRGTSwgc2VyaWFsaXplRnJvbnRtYXR0ZXIsIEZNX0ZJRUxEUywgZmlsdGVyVmFsaWRTa2lsbHMsIEJBQ0tHUk9VTkRfTUVUQV9ERUZTIH0gZnJvbSBcIi4vaGVscGVycy9mcm9udG1hdHRlclwiO1xuXG4vKipcbiAqIFBhcnNlIGJhY2tncm91bmRzLmpzb24gaW50byBvbmUgTWFya2Rvd24gZmlsZSBwZXIgYmFja2dyb3VuZCB1bmRlciBQbGF5ZXIgQnVpbGQvQmFja2dyb3VuZHMsXG4gKiBleGNsdWRpbmcgYW55IFx1MjAxQ1ZhcmlhbnRcdTIwMjZcdTIwMUQgb3IgXHUyMDFDQmFsZHVyXHUyMDE5cyBHYXRlXHUyMDI2XHUyMDFEIGVudHJpZXMuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQmFja2dyb3VuZHNGaWxlKGpzb246IGFueSwgZWRpdGlvbklkOiBzdHJpbmcpOiBQYXJzZWRNYXJrZG93bkZpbGVbXSB7XG4gIC8vIHB1bGwgaW4gdGhlIGFycmF5XG4gIGNvbnN0IHJhdzogYW55W10gPSBBcnJheS5pc0FycmF5KGpzb24uYmFja2dyb3VuZClcbiAgICA/IGpzb24uYmFja2dyb3VuZFxuICAgIDogQXJyYXkuaXNBcnJheShqc29uLmJhY2tncm91bmRzKVxuICAgID8ganNvbi5iYWNrZ3JvdW5kc1xuICAgIDogW107XG5cbiAgLy8gZmlsdGVyIG91dCB1bndhbnRlZCBlbnRyaWVzXG4gIGNvbnN0IGJhY2tncm91bmRzID0gcmF3LmZpbHRlcihiZyA9PiB7XG4gICAgY29uc3Qgbm06IHN0cmluZyA9IGJnLm5hbWUgfHwgXCJcIjtcbiAgICByZXR1cm4gIW5tLnN0YXJ0c1dpdGgoXCJWYXJpYW50XCIpICYmICFubS5pbmNsdWRlcyhcIkJhbGR1cidzIEdhdGVcIik7XG4gIH0pO1xuXG4gIGNvbnN0IG91dHB1dHM6IFBhcnNlZE1hcmtkb3duRmlsZVtdID0gW107XG5cbiAgYmFja2dyb3VuZHMuZm9yRWFjaChiZyA9PiB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbi8vIFx1MjUwMFx1MjUwMFx1MjUwMCBidWlsZCBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IGZtID0gYnVpbGRGTShiZywgQkFDS0dST1VORF9NRVRBX0RFRlMpO1xuKGZtIGFzIGFueSlbXCJydWxlc2V0XCJdID0gZWRpdGlvbklkO1xuZm1bRk1fRklFTERTLlJVTEVTRVRdID0gZWRpdGlvbklkO1xuXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDAgY29sbGVjdCBvbmx5IHRoZSBlbnRyaWVzIGZsYWdnZWQgaXNGZWF0dXJlIFx1MjUwMFx1MjUwMFx1MjUwMFxuY29uc3QgZXh0cmFUcmFpdHM6IHN0cmluZ1tdID0gQXJyYXkuaXNBcnJheShiZy5lbnRyaWVzKVxuICA/IChiZy5lbnRyaWVzIGFzIGFueVtdKVxuICAgICAgLmZpbHRlcigoZTogYW55KSA9PiBlLmRhdGE/LmlzRmVhdHVyZSAmJiB0eXBlb2YgZS5uYW1lID09PSBcInN0cmluZ1wiKVxuICAgICAgLm1hcCgoZTogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBlLm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpO1xuICAgICAgICByZXR1cm4gYFtbJHtiZy5uYW1lfSMke25hbWV9XV1gO1xuICAgICAgfSlcbiAgOiBbXTtcblxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwIHNlcmlhbGl6ZSBmcm9udG1hdHRlciBcdTI1MDBcdTI1MDBcdTI1MDBcbmNvbnN0IHlhbWwgPSBzZXJpYWxpemVGcm9udG1hdHRlcihmbSk7XG5saW5lcy5wdXNoKFwiLS0tXCIsIHlhbWwsIFwiLS0tXCIsIFwiXCIpO1xuXG4gXG4gICAgLy8gdGl0bGVcbiAgICBsaW5lcy5wdXNoKGAjICR7YmcubmFtZX1gLCBcIlwiKTtcblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBza2lsbCBwcm9maWNpZW5jaWVzIFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnNraWxsUHJvZmljaWVuY2llcykgJiYgYmcuc2tpbGxQcm9maWNpZW5jaWVzLmxlbmd0aCkge1xuICAgICAgY29uc3Qgc2tpbGxzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgYmcuc2tpbGxQcm9maWNpZW5jaWVzLmZvckVhY2goKGVudDogYW55KSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgc2tpbGxzLnB1c2goY2FwKGVudCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGVudC5jaG9vc2UgJiYgQXJyYXkuaXNBcnJheShlbnQuY2hvb3NlLmZyb20pKSB7XG4gICAgICAgICAgc2tpbGxzLnB1c2goYENob29zZSAke2VudC5jaG9vc2UuYW1vdW50fSBmcm9tICR7ZW50LmNob29zZS5mcm9tLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhlbnQpXG4gICAgICAgICAgICAuZmlsdGVyKChbLCB2XSkgPT4gdiA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChba10pID0+IHNraWxscy5wdXNoKGNhcChrKSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGxpbmVzLnB1c2goYCoqU2tpbGwgUHJvZmljaWVuY2llczoqKiAke3NraWxscy5qb2luKFwiLCBcIil9YCwgXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGxhbmd1YWdlIHByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYmcubGFuZ3VhZ2VQcm9maWNpZW5jaWVzKSAmJiBiZy5sYW5ndWFnZVByb2ZpY2llbmNpZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBsYW5nczogc3RyaW5nW10gPSBbXTtcbiAgICAgIGJnLmxhbmd1YWdlUHJvZmljaWVuY2llcy5mb3JFYWNoKChlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZW50LmFueVN0YW5kYXJkKSB7XG4gICAgICAgICAgbGFuZ3MucHVzaChgJHtlbnQuYW55U3RhbmRhcmR9IG9mIHlvdXIgY2hvaWNlYCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoWywgdl0pID0+IHYgPT09IHRydWUpXG4gICAgICAgICAgICAuZm9yRWFjaCgoW2tdKSA9PiBsYW5ncy5wdXNoKGNhcChrKSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGxpbmVzLnB1c2goYCoqTGFuZ3VhZ2VzOioqICR7bGFuZ3Muam9pbihcIiwgXCIpfWAsIFwiXCIpO1xuICAgIH1cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCB0b29sIHByb2ZpY2llbmNpZXMgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGJnLnRvb2xQcm9maWNpZW5jaWVzKSAmJiBiZy50b29sUHJvZmljaWVuY2llcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgdG9vbHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgYmcudG9vbFByb2ZpY2llbmNpZXMuZm9yRWFjaCgoZW50OiBhbnkpID0+IHtcbiAgICAgICAgICAgIC8vIFx1MjAxQ0Nob29zZSBYIGZyb20gXHUyMDI2XHUyMDFEXG4gICAgICAgICAgICBpZiAoZW50LmNob29zZSAmJiBBcnJheS5pc0FycmF5KGVudC5jaG9vc2UuZnJvbSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBlbnQuY2hvb3NlLmZyb20ubWFwKGh1bWFuaXplKS5qb2luKFwiLCBcIik7XG4gICAgICAgICAgICB0b29scy5wdXNoKGBDaG9vc2UgJHtlbnQuY2hvb3NlLmNvdW50fSBmcm9tICR7bGlzdH1gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gcGxhaW4gc3RyaW5nIChyYXJlIGhlcmUsIGJ1dCBqdXN0IGluIGNhc2UpXG4gICAgICAgICAgICBpZiAodHlwZW9mIGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdG9vbHMucHVzaChodW1hbml6ZShlbnQpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gb2JqZWN0IHdpdGggYm9vbGVhbiBmbGFnczogZ2F0aGVyICphbGwqIHRydWUga2V5c1xuICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoZW50KVxuICAgICAgICAgICAgLmZpbHRlcigoW18sIHZdKSA9PiB2ID09PSB0cnVlKVxuICAgICAgICAgICAgLmZvckVhY2goKFtrXSkgPT4gdG9vbHMucHVzaChodW1hbml6ZShrKSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsaW5lcy5wdXNoKGAqKlRvb2wgUHJvZmljaWVuY2llczoqKiAke3Rvb2xzLmpvaW4oXCIsIFwiKX1gLCBcIlwiKTtcbiAgICAgICAgfVxuXG5cblxuICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBzdGFydGluZyBlcXVpcG1lbnQgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYmcuc3RhcnRpbmdFcXVpcG1lbnQpICYmIGJnLnN0YXJ0aW5nRXF1aXBtZW50Lmxlbmd0aCkge1xuICAgICAgbGluZXMucHVzaChgKipFcXVpcG1lbnQ6KipgKTtcbiAgICAgIGJnLnN0YXJ0aW5nRXF1aXBtZW50LmZvckVhY2goKGdycDogYW55KSA9PiB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGdycC5fKSkge1xuICAgICAgICAgIGdycC5fLmZvckVhY2goKGl0OiBhbnkpID0+IGxpbmVzLnB1c2goYC0gJHtmbXRJdGVtKGl0KX1gKSk7XG4gICAgICAgIH1cbiAgICAgICAgW1wiYVwiLCBcImJcIl0uZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGdycFtrZXldKSkge1xuICAgICAgICAgICAgZ3JwW2tleV0uZm9yRWFjaChpdCA9PiBsaW5lcy5wdXNoKGAtICR7Zm10SXRlbShpdCl9YCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGxpbmVzLnB1c2goXCJcIik7XG4gICAgfVxuXG4gICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIGFsbCBmZWF0dXJlICYgZW50cmllcyBibG9ja3MgXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYmcuZW50cmllcykpIHtcbiAgICAgIGJnLmVudHJpZXMuZm9yRWFjaCgoZW50cnk6IGFueSkgPT4ge1xuICAgICAgICAvLyBza2lwIHRoZSBzdW1tYXJ5IGxpc3QgYmxvY2tcbiAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09IFwibGlzdFwiICYmIGVudHJ5LnN0eWxlID09PSBcImxpc3QtaGFuZy1ub3RpdGxlXCIpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2VjdGlvbiBoZWFkZXJcbiAgICAgICAgaWYgKGVudHJ5Lm5hbWUpIHtcbmNvbnN0IGhlYWRlciA9IGVudHJ5LmRhdGE/LmlzRmVhdHVyZVxuICA/IGVudHJ5Lm5hbWUucmVwbGFjZSgvXkZlYXR1cmU6XFxzKi8sIFwiXCIpXG4gIDogZW50cnkubmFtZTtcbmxpbmVzLnB1c2goYCMjICR7aGVhZGVyfWAsIFwiXCIpOyAgICAgICAgfVxuICAgICAgICAvLyBlbnRyeSBjb250ZW50XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJ5LmVudHJpZXMpKSB7XG4gICAgICAgICAgZW50cnkuZW50cmllcy5mb3JFYWNoKChlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKHJlcGxhY2U1ZVRhZ3MoZSksIFwiXCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnR5cGUgPT09IFwibGlzdFwiICYmIEFycmF5LmlzQXJyYXkoZS5pdGVtcykpIHtcbiAgICAgICAgICAgICAgZS5pdGVtcy5mb3JFYWNoKChpdDogYW55KSA9PlxuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goYC0gJHtyZXBsYWNlNWVUYWdzKGl0LmVudHJ5ID8/IGl0KX1gKVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlLnR5cGUgPT09IFwidGFibGVcIikge1xuICAgICAgICAgICAgICBjb25zdCB0YmwgPSByZW5kZXJNYXJrZG93blRhYmxlKGUpO1xuICAgICAgICAgICAgICBpZiAodGJsKSBsaW5lcy5wdXNoKHRibCwgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkudHlwZSA9PT0gXCJsaXN0XCIgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pdGVtcykpIHtcbiAgICAgICAgICBlbnRyeS5pdGVtcy5mb3JFYWNoKChpdDogYW55KSA9PlxuICAgICAgICAgICAgbGluZXMucHVzaChgLSAke3JlcGxhY2U1ZVRhZ3MoaXQuZW50cnkgPz8gaXQpfWApXG4gICAgICAgICAgKTtcbiAgICAgICAgICBsaW5lcy5wdXNoKFwiXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBvdXRwdXRzLnB1c2goe1xuICAgICAgcGF0aDogYFBsYXllciBCdWlsZC9CYWNrZ3JvdW5kcy8ke2JnLm5hbWV9Lm1kYCxcbiAgICAgIGNvbnRlbnQ6IGxpbmVzLmpvaW4oXCJcXG5cIikudHJpbUVuZCgpICsgXCJcXG5cIixcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIG91dHB1dHM7XG59XG5cbi8vIFx1MjAxNFx1MjAxNFx1MjAxNCBoZWxwZXJzIFx1MjAxNFx1MjAxNFx1MjAxNFxuZnVuY3Rpb24gY2FwKHN0cjogc3RyaW5nKSB7XG4gIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG59XG5cblxuZnVuY3Rpb24gZm10SXRlbShpdGVtOiBhbnkpOiBzdHJpbmcge1xuICAvLyAxKSByYXcgc3RyaW5nIG9yIHRhZ2dlZCBpdGVtXG4gIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGlmIChpdGVtLmluY2x1ZGVzKFwifFwiKSkge1xuICAgICAgcmV0dXJuIHJlcGxhY2U1ZVRhZ3MoYHtAaXRlbSAke2l0ZW19fWApO1xuICAgIH1cbiAgICByZXR1cm4gcmVwbGFjZTVlVGFncyhpdGVtKTtcbiAgfVxuXG4gIC8vIDIpIHB1cmUgZ29sZC1waWVjZSBlbnRyeTogeyB2YWx1ZTogMTAgfSBvciB7IGNvbnRhaW5zVmFsdWU6IDE1MDAgfVxuICBjb25zdCBwcmljZVJhdyA9IChpdGVtLmNvbnRhaW5zVmFsdWUgPz8gaXRlbS52YWx1ZSkgYXMgbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBpZiAoXG4gICAgdHlwZW9mIHByaWNlUmF3ID09PSBcIm51bWJlclwiICYmXG4gICAgLy8gbWFrZSBzdXJlIGl0XHUyMDE5cyBub3QgYWxzbyBhbiBcdTIwMUNpdGVtXHUyMDFEIG9yIFx1MjAxQ2VxdWlwbWVudFR5cGVcdTIwMURcbiAgICAhaXRlbS5pdGVtICYmXG4gICAgIWl0ZW0uZXF1aXBtZW50VHlwZSAmJlxuICAgICFpdGVtLnNwZWNpYWxcbiAgKSB7XG4gICAgY29uc3QgZ3AgPSBwcmljZVJhdyA+PSAxMDAgPyBwcmljZVJhdyAvIDEwMCA6IHByaWNlUmF3O1xuICAgIHJldHVybiBgJHtncH0gZ3BgO1xuICB9XG5cbiAgLy8gMykgZXhwbGljaXQgaXRlbSBvYmplY3Qgd2l0aCBvcHRpb25hbCBwcmljZVxuICBpZiAoaXRlbS5pdGVtKSB7XG4gICAgY29uc3QgbGluayA9IHJlcGxhY2U1ZVRhZ3MoYHtAaXRlbSAke2l0ZW0uaXRlbX19YCk7XG4gICAgaWYgKHR5cGVvZiBwcmljZVJhdyA9PT0gXCJudW1iZXJcIikge1xuICAgICAgY29uc3QgZ3AgPSBwcmljZVJhdyA+PSAxMDAgPyBwcmljZVJhdyAvIDEwMCA6IHByaWNlUmF3O1xuICAgICAgcmV0dXJuIGAke2xpbmt9ICgke2dwfSBncClgO1xuICAgIH1cbiAgICByZXR1cm4gbGluaztcbiAgfVxuXG4gIC8vIDQpIHNwZWNpYWwtY2FzZSB0ZXh0XG4gIGlmICh0eXBlb2YgaXRlbS5zcGVjaWFsID09PSBcInN0cmluZ1wiKSB7XG4gICAgcmV0dXJuIGl0ZW0uc3BlY2lhbDtcbiAgfVxuXG4gIC8vIDUpIGtub3duIGVxdWlwbWVudFR5cGUga2V5c1xuICBpZiAoaXRlbS5lcXVpcG1lbnRUeXBlKSB7XG4gICAgc3dpdGNoIChpdGVtLmVxdWlwbWVudFR5cGUpIHtcbiAgICAgIGNhc2UgXCJ0b29sQXJ0aXNhblwiOlxuICAgICAgICByZXR1cm4gXCJPbmUgdHlwZSBvZiBhcnRpc2FuXHUyMDE5cyB0b29scyAob2YgeW91ciBjaG9pY2UpXCI7XG4gICAgICBjYXNlIFwiaW5zdHJ1bWVudE11c2ljYWxcIjpcbiAgICAgICAgcmV0dXJuIFwiT25lIHR5cGUgb2YgbXVzaWNhbCBpbnN0cnVtZW50IChvZiB5b3VyIGNob2ljZSlcIjtcbiAgICAgIGNhc2UgXCJzZXRHYW1pbmdcIjpcbiAgICAgICAgcmV0dXJuIFwiT25lIHNldCBvZiBnYW1pbmcgZGljZSAob2YgeW91ciBjaG9pY2UpXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gaHVtYW5pemUoaXRlbS5lcXVpcG1lbnRUeXBlKTtcbiAgICB9XG4gIH1cblxuICAvLyA2KSBmYWxsYmFjazogZHVtcCBhbnkgbGVmdG92ZXIgdGFnIHN5bnRheFxuICByZXR1cm4gcmVwbGFjZTVlVGFncyhKU09OLnN0cmluZ2lmeShpdGVtKSk7XG59XG5cblxuXG5mdW5jdGlvbiBodW1hbml6ZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHNwYWNlZCA9IHN0ci5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxICQyXCIpO1xuICByZXR1cm4gc3BhY2VkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3BhY2VkLnNsaWNlKDEpO1xufVxuIiwgIi8vIHNyYy9ydWxlc2V0SW5zdGFsbGVyLnRzXG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEFWQUlMQUJMRV9FRElUSU9OUyB9IGZyb20gXCIuL2VkaXRpb25zXCI7XG5cbi8vIFNUQVRJQyBpbXBvcnQgb2YgZXZlcnkgaW5zdGFsbGVyIHlvdSBzaGlwOlxuaW1wb3J0ICogYXMgZml2ZWVJbnN0YWxsZXIgZnJvbSBcIi4vcGFyc2Vycy81ZS1qc29uL2luc3RhbGxlclwiO1xuLy8gaW1wb3J0ICogYXMgYW5vdGhlckluc3RhbGxlciBmcm9tIFwiLi9wYXJzZXJzL290aGVyL2luc3RhbGxlclwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW1wb3J0UnVsZXNldERhdGEocGFyYW1zOiB7XG4gIGFwcDogQXBwO1xuICBlZGl0aW9uS2V5OiBzdHJpbmc7XG4gIHRhcmdldFBhdGg6IHN0cmluZztcbn0pIHtcbiAgY29uc3QgeyBhcHAsIGVkaXRpb25LZXksIHRhcmdldFBhdGggfSA9IHBhcmFtcztcbiAgY29uc3QgZWRpdGlvbiA9IEFWQUlMQUJMRV9FRElUSU9OUy5maW5kKChlKSA9PiBlLmlkID09PSBlZGl0aW9uS2V5KTtcbiAgaWYgKCFlZGl0aW9uKSByZXR1cm47XG4gIGlmICghZWRpdGlvbi5wYXJzZXIpIHtcbiAgICBjb25zb2xlLndhcm4oXCJObyBwYXJzZXIgZGVmaW5lZCBmb3I6XCIsIGVkaXRpb25LZXkpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGxldCBpbnN0YWxsZXJNb2R1bGU6IHsgaW1wb3J0RWRpdGlvbkRhdGE6IGFueSB9O1xuXG4gIHN3aXRjaCAoZWRpdGlvbi5wYXJzZXIpIHtcbiAgICBjYXNlIFwiNWUtanNvblwiOlxuICAgICAgaW5zdGFsbGVyTW9kdWxlID0gZml2ZWVJbnN0YWxsZXI7XG4gICAgICBicmVhaztcblxuICAgIC8vIGNhc2UgXCJvdGhlci1wYXJzZXJcIjpcbiAgICAvLyAgIGluc3RhbGxlck1vZHVsZSA9IGFub3RoZXJJbnN0YWxsZXI7XG4gICAgLy8gICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcGFyc2VyOiAke2VkaXRpb24ucGFyc2VyfWApO1xuICB9XG5cbiAgYXdhaXQgaW5zdGFsbGVyTW9kdWxlLmltcG9ydEVkaXRpb25EYXRhKHsgYXBwLCBlZGl0aW9uLCB0YXJnZXRQYXRoIH0pO1xufVxuIiwgIi8vIGN1c3RvbUluc3RhbGxNb2RhbC50c1xuaW1wb3J0IHsgQXBwLCBNb2RhbCwgc2V0SWNvbiwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgVlZ1bmRlcmxvcmVUb29sa2l0UGx1Z2luIGZyb20gJy4vbWFpbic7XG5cbmV4cG9ydCBjbGFzcyBJbnN0YWxsaW5nTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgc3VwZXIoYXBwKTtcbiAgfVxuICBvbk9wZW4oKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICB0aGlzLmNvbnRlbnRFbFxuICAgICAgLmNyZWF0ZURpdih7IHRleHQ6ICdJbnN0YWxsaW5nXHUyMDI2JywgY2xzOiAnbW9kLXF1aWV0JyB9KVxuICAgICAgLnN0eWxlLmNzc1RleHQgPVxuICAgICAgJ2ZvbnQtc3R5bGU6IGl0YWxpYzsgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDFlbTsnO1xuICB9XG4gIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgfVxufVxuXG5pbnRlcmZhY2UgVHJlZU5vZGUge1xuICBuYW1lOiBzdHJpbmc7XG4gIGZ1bGxQYXRoOiBzdHJpbmc7XG4gIGlzRm9sZGVyOiBib29sZWFuO1xuICBjaGlsZHJlbjogUmVjb3JkPHN0cmluZywgVHJlZU5vZGU+O1xufVxuXG4vKipcbiAqIFNob3dzIGEgXHUyMDFDQ3VzdG9tIEluc3RhbGxcdTIwMUQgbW9kYWwuIE9uY2UgdGhlIHVzZXIgY2xpY2tzIFx1MjAxQ0luc3RhbGwgU2VsZWN0ZWQsXHUyMDFEXG4gKiB0aGlzIGhhbmRzIGJhY2sgYW4gYXJyYXkgb2YgYHsgcGF0aCwgaXNGb2xkZXIgfWAgdG8gYHBsdWdpbi5wZXJmb3JtQ3VzdG9tSW5zdGFsbCguLi4pYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3dDdXN0b21JbnN0YWxsTW9kYWwoXG4gIGFwcDogQXBwLFxuICBwbHVnaW46IFZWdW5kZXJsb3JlVG9vbGtpdFBsdWdpblxuKSB7XG4gIC8vICgxKSBCdWlsZCBhIHF1aWNrIG1hcDogZnVsbFBhdGggXHUyMTkyIG1hbmlmZXN0S2V5IChmb3IgZGVwZW5kZW5jeSBsb29rdXBzKVxuICBjb25zdCBmdWxsUGF0aFRvS2V5OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gIGZvciAoY29uc3QgZiBvZiBwbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgZnVsbFBhdGhUb0tleVtmLnBhdGhdID0gZi5rZXk7XG4gIH1cbiAgZm9yIChjb25zdCBmIG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzKSB7XG4gICAgZnVsbFBhdGhUb0tleVtmLnBhdGhdID0gZi5rZXk7XG4gIH1cblxuICAvLyAoMikgQnVpbGQgYSBuZXN0ZWQgVHJlZU5vZGUgc3RydWN0dXJlIGZyb20gbWFuaWZlc3RDYWNoZVxuICBjb25zdCByb290OiBUcmVlTm9kZSA9IHsgbmFtZTogJycsIGZ1bGxQYXRoOiAnJywgaXNGb2xkZXI6IHRydWUsIGNoaWxkcmVuOiB7fSB9O1xuXG4gIGZ1bmN0aW9uIGVuc3VyZUZvbGRlck5vZGUoc2VnbWVudHM6IHN0cmluZ1tdKTogVHJlZU5vZGUge1xuICAgIGxldCBjdXJzb3IgPSByb290O1xuICAgIGxldCBidWlsdFNvRmFyID0gJyc7XG4gICAgZm9yIChjb25zdCBzZWcgb2Ygc2VnbWVudHMpIHtcbiAgICAgIGJ1aWx0U29GYXIgPSBidWlsdFNvRmFyID8gYCR7YnVpbHRTb0Zhcn0vJHtzZWd9YCA6IHNlZztcbiAgICAgIGlmICghY3Vyc29yLmNoaWxkcmVuW3NlZ10pIHtcbiAgICAgICAgY3Vyc29yLmNoaWxkcmVuW3NlZ10gPSB7XG4gICAgICAgICAgbmFtZTogc2VnLFxuICAgICAgICAgIGZ1bGxQYXRoOiBidWlsdFNvRmFyLFxuICAgICAgICAgIGlzRm9sZGVyOiB0cnVlLFxuICAgICAgICAgIGNoaWxkcmVuOiB7fSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGN1cnNvciA9IGN1cnNvci5jaGlsZHJlbltzZWddO1xuICAgIH1cbiAgICByZXR1cm4gY3Vyc29yO1xuICB9XG5cbiAgLy8gSW5zZXJ0IGFsbCBmb2xkZXIgZW50cmllcyBmaXJzdFxuICBmb3IgKGNvbnN0IGZvbGRlckVudHJ5IG9mIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMpIHtcbiAgICBjb25zdCBzZWdtZW50cyA9IGZvbGRlckVudHJ5LnBhdGguc3BsaXQoJy8nKTtcbiAgICBlbnN1cmVGb2xkZXJOb2RlKHNlZ21lbnRzKTtcbiAgfVxuXG4gIC8vIEluc2VydCBhbGwgZmlsZSBlbnRyaWVzIHVuZGVyIHRoZWlyIHBhcmVudCBmb2xkZXIgbm9kZXNcbiAgZm9yIChjb25zdCBmaWxlRW50cnkgb2YgcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZmlsZXMpIHtcbiAgICBjb25zdCBzZWdtZW50cyA9IGZpbGVFbnRyeS5wYXRoLnNwbGl0KCcvJyk7XG4gICAgY29uc3QgZmlsZU5hbWUgPSBzZWdtZW50cy5wb3AoKSE7XG4gICAgY29uc3QgcGFyZW50Tm9kZSA9IHNlZ21lbnRzLmxlbmd0aCA/IGVuc3VyZUZvbGRlck5vZGUoc2VnbWVudHMpIDogcm9vdDtcbiAgICBwYXJlbnROb2RlLmNoaWxkcmVuW2ZpbGVOYW1lXSA9IHtcbiAgICAgIG5hbWU6IGZpbGVOYW1lLFxuICAgICAgZnVsbFBhdGg6IGZpbGVFbnRyeS5wYXRoLFxuICAgICAgaXNGb2xkZXI6IGZhbHNlLFxuICAgICAgY2hpbGRyZW46IHt9LFxuICAgIH07XG4gIH1cblxuICAvLyAoMykgRGVmaW5lIG91ciBNb2RhbCBzdWJjbGFzc1xuICBjbGFzcyBDdXN0b21JbnN0YWxsTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBjaGVja2JveE1hcDogUmVjb3JkPHN0cmluZywgSFRNTElucHV0RWxlbWVudD4gPSB7fTtcbiAgICBwcml2YXRlIGNvbnNvbGVFbDogSFRNTEVsZW1lbnQ7ICAgICAgICAgICAgICAgIC8vIDxkaXY+IHRoYXQgaG9sZHMgXHUyMDFDZGVwZW5kZW5jeSBjb25zb2xlXHUyMDFEXG4gICAgcHJpdmF0ZSBjdXJyZW50QmF0Y2hMaW5lczogSFRNTEVsZW1lbnRbXSA9IFtdOyAgLy8gbGluZXMgZnJvbSB0aGUgbW9zdCByZWNlbnQgZGVwZW5kZW5jeSBwYXNzXG5cbiAgICAvLyBUb3BcdTIwMTBsZXZlbCBmaWx0ZXIgY2hlY2tib3hlczpcbiAgICBwcml2YXRlIHBsdWdpbkNoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByaXZhdGUgZGVtb0NoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByaXZhdGUgc2V0dGluZ3NDaGVja2JveDogSFRNTElucHV0RWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCgnQ3VzdG9tIEluc3RhbGwnKTtcbiAgICBcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uRWwgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgIGRlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQgPSAnQWxsIGNoZWNrZWQgaXRlbXMgd2lsbCBiZSBpbnN0YWxsZWQuIERlcGVuZGVuY2llcyB3aWxsIGJlIG1hbmFnZWQgYXV0b21hdGljYWxseS4nO1xuICAgICAgZGVzY3JpcHRpb25FbC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgIG1hcmdpbi10b3A6IDAuMjVlbTtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMC43NWVtO1xuICAgICAgYDtcblxuICAgICAgLy9cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCAoQSkgU0lOR0xFIFNDUk9MTEFCTEUgQk9YIEZPUiBcdTIwMUNPUFRJT05TICsgVFJFRVx1MjAxRCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICBjb25zdCBvcHRpb25zQm94ID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICBPYmplY3QuYXNzaWduKG9wdGlvbnNCb3guc3R5bGUsIHtcbiAgICAgICAgbWF4SGVpZ2h0OiAnNDgwcHgnLCAgICAgICAgICAgICAgIC8vIEVub3VnaCBzcGFjZSBmb3IgY2hlY2tib3hlcyArIHRyZWVcbiAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsICAgICAgICAgICAgICAgIC8vIEV2ZXJ5dGhpbmcgaW5zaWRlIG9wdGlvbnNCb3ggd2lsbCBzY3JvbGxcbiAgICAgICAgbWFyZ2luOiAnMC41ZW0gMCcsXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgIHBhZGRpbmc6ICcwLjVlbScsXG4gICAgICB9KTtcbiAgICBcbiAgICAgIC8vXG4gICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgKEExKSBcdTIwMUNJbmNsdWRlIFx1MjAyNlx1MjAxRCBDSEVDS0JPWEVTIEFUIFRIRSBUT1AgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAvL1xuICAgICAgLy8gV2UgY3JlYXRlIG9uZSBzbWFsbCBcdTIwMUNjaGVja2JveCBwYW5lbFx1MjAxRCB0aGF0IHNpdHMgYXQgdGhlIHRvcCBvZiBvcHRpb25zQm94LlxuICAgICAgY29uc3QgY2hlY2tib3hTZWN0aW9uID0gb3B0aW9uc0JveC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24oY2hlY2tib3hTZWN0aW9uLnN0eWxlLCB7XG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgZmxleERpcmVjdGlvbjogJ2NvbHVtbicsXG4gICAgICAgIGdhcDogJzAuNWVtJyxcbiAgICAgICAgbWFyZ2luQm90dG9tOiAnMC43NWVtJyxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy8gMSkgXHUyMDFDSW5jbHVkZSBQbHVnaW5zXHUyMDFEXG4gICAgICBjb25zdCBwbHVnaW5Sb3cgPSBjaGVja2JveFNlY3Rpb24uY3JlYXRlRGl2KCk7XG4gICAgICBwbHVnaW5Sb3cuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgIHBsdWdpblJvdy5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICB0aGlzLnBsdWdpbkNoZWNrYm94ID0gcGx1Z2luUm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgdGhpcy5wbHVnaW5DaGVja2JveC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgIHRoaXMucGx1Z2luQ2hlY2tib3guaWQgPSAndnZ1bmRlcmxvcmUtY2hlY2tib3gtcGx1Z2lucyc7XG4gICAgICB0aGlzLnBsdWdpbkNoZWNrYm94LnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuNWVtJztcbiAgICAgIHBsdWdpblJvdy5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICAgIHRleHQ6ICdDb21tdW5pdHkgUGx1Z2lucycsXG4gICAgICAgIGF0dHI6IHsgZm9yOiB0aGlzLnBsdWdpbkNoZWNrYm94LmlkIH0sXG4gICAgICB9KTtcbiAgICBcbiAgICAgIC8vIDIpIFx1MjAxQ0luY2x1ZGUgRGVtbyBGaWxlc1x1MjAxRFxuICAgICAgY29uc3QgZGVtb1JvdyA9IGNoZWNrYm94U2VjdGlvbi5jcmVhdGVEaXYoKTtcbiAgICAgIGRlbW9Sb3cuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgIGRlbW9Sb3cuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgdGhpcy5kZW1vQ2hlY2tib3ggPSBkZW1vUm93LmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JyB9KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgdGhpcy5kZW1vQ2hlY2tib3guY2hlY2tlZCA9IHRydWU7XG4gICAgICB0aGlzLmRlbW9DaGVja2JveC5pZCA9ICd2dnVuZGVybG9yZS1jaGVja2JveC1kZW1vJztcbiAgICAgIHRoaXMuZGVtb0NoZWNrYm94LnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuNWVtJztcbiAgICAgIGRlbW9Sb3cuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgICB0ZXh0OiAnVlZ1bmRlcmxvcmUgRGVtbyBGaWxlcycsXG4gICAgICAgIGF0dHI6IHsgZm9yOiB0aGlzLmRlbW9DaGVja2JveC5pZCB9LFxuICAgICAgfSk7XG4gICAgXG4gICAgICAvLyAzKSBcdTIwMUNJbmNsdWRlIFZhdWx0IFNldHRpbmdzIChob3RrZXlzLCBldGMuKVx1MjAxRFxuICAgICAgY29uc3Qgc2V0dGluZ3NSb3cgPSBjaGVja2JveFNlY3Rpb24uY3JlYXRlRGl2KCk7XG4gICAgICBzZXR0aW5nc1Jvdy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgc2V0dGluZ3NSb3cuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgdGhpcy5zZXR0aW5nc0NoZWNrYm94ID0gc2V0dGluZ3NSb3cuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICB0aGlzLnNldHRpbmdzQ2hlY2tib3guY2hlY2tlZCA9IHRydWU7XG4gICAgICB0aGlzLnNldHRpbmdzQ2hlY2tib3guaWQgPSAndnZ1bmRlcmxvcmUtY2hlY2tib3gtc2V0dGluZ3MnO1xuICAgICAgdGhpcy5zZXR0aW5nc0NoZWNrYm94LnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuNWVtJztcbiAgICAgIHNldHRpbmdzUm93LmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgICAgdGV4dDogJ1ZhdWx0IFNldHRpbmdzIChhcHBlcmFuY2UsIGhvdGtleXMsIGdyYXBoIHNldHVwLCBldGMuKScsXG4gICAgICAgIGF0dHI6IHsgZm9yOiB0aGlzLnNldHRpbmdzQ2hlY2tib3guaWQgfSxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy9cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCAoQTIpIFRISU4gRElWSURFUiBMSU5FIEJFVFdFRU4gQ0hFQ0tCT1hFUyBBTkQgVFJFRSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICBjb25zdCBkaXZpZGVyID0gb3B0aW9uc0JveC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24oZGl2aWRlci5zdHlsZSwge1xuICAgICAgICBib3JkZXJUb3A6ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuICAgICAgICBtYXJnaW46ICcwLjVlbSAwJyxcbiAgICAgIH0pO1xuICAgIFxuICAgICAgLy9cbiAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCAoQTMpIE1BTklGRVNUIFRSRUUgUkVOREVSRUQgQkVMT1cgVEhFIERJVklERVIgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAvL1xuICAgICAgY29uc3QgY29udGFpbmVyID0gb3B0aW9uc0JveC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24oY29udGFpbmVyLnN0eWxlLCB7XG4gICAgICAgIC8vIFdlIG5vIGxvbmdlciBnaXZlIHRoaXMgaW5uZXIgZGl2IGl0cyBvd24gc2Nyb2xsYmFyLlxuICAgICAgICAvLyBJbnN0ZWFkLCBjb250YWluZXIgd2lsbCBleHBhbmQgaW5zaWRlIG9wdGlvbnNCb3gsIGFuZFxuICAgICAgICAvLyBvcHRpb25zQm94IHdpbGwgc2Nyb2xsIGV2ZXJ5dGhpbmcgKGNoZWNrYm94ZXMgKyB0cmVlKSB0b2dldGhlci5cbiAgICAgICAgbWFyZ2luOiAnMCcsXG4gICAgICAgIHBhZGRpbmc6ICcwJyxcbiAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICB9KTtcbiAgICBcbiAgICAgIGNvbnN0IElOREVOVF9QWCA9IDE2O1xuICAgICAgY29uc3QgbG9va3VwRW50cnkgPSAoZnVsbFBhdGg6IHN0cmluZykgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMuZmluZCgoZikgPT4gZi5wYXRoID09PSBmdWxsUGF0aCkgfHxcbiAgICAgICAgICBwbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcy5maW5kKChmKSA9PiBmLnBhdGggPT09IGZ1bGxQYXRoKVxuICAgICAgICApO1xuICAgICAgfTtcbiAgICBcbiAgICAgIC8vIFJlcmVuZGVyIGxvZ2ljIGZvciB0aGUgdHJlZTsgaGlkZXMgb3B0aW9uYWwgaXRlbXMgaWYgdGhlIGRlbW9DaGVja2JveCBpcyB1bmNoZWNrZWRcbiAgICAgIGNvbnN0IHJlbmRlclRyZWUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICB0aGlzLmNoZWNrYm94TWFwID0ge307XG4gICAgICAgIHRoaXMuY3VycmVudEJhdGNoTGluZXMgPSBbXTtcbiAgICBcbiAgICAgICAgY29uc3QgZGVtb0FsbG93ZWQgPSB0aGlzLmRlbW9DaGVja2JveC5jaGVja2VkO1xuICAgIFxuICAgICAgICBjb25zdCByZW5kZXJOb2RlID0gKG5vZGU6IFRyZWVOb2RlLCBwYXJlbnRFbDogSFRNTEVsZW1lbnQsIGluZGVudCA9IDApID0+IHtcbiAgICAgICAgICAvLyBJZiB0aGlzIG5vZGUgY29ycmVzcG9uZHMgdG8gYSBtYW5pZmVzdCBlbnRyeTpcbiAgICAgICAgICBpZiAobm9kZS5mdWxsUGF0aCkge1xuICAgICAgICAgICAgY29uc3QgZW50cnkgPSBsb29rdXBFbnRyeShub2RlLmZ1bGxQYXRoKTtcbiAgICAgICAgICAgIGlmIChlbnRyeSAmJiBlbnRyeS5vcHRpb25hbCAmJiAhZGVtb0FsbG93ZWQpIHtcbiAgICAgICAgICAgICAgLy8gU2tpcCBvcHRpb25hbCBkZW1vIGl0ZW1zIHdoZW4gXHUyMDFDSW5jbHVkZSBEZW1vIEZpbGVzXHUyMDFEIGlzIGZhbHNlXG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgaWYgKG5vZGUuaXNGb2xkZXIpIHtcbiAgICAgICAgICAgIC8vIFx1MjUwMFx1MjUwMFx1MjUwMCBGT0xERVIgQ0FTRSBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgICAgICAgIGNvbnN0IGRldGFpbHMgPSBwYXJlbnRFbC5jcmVhdGVFbCgnZGV0YWlscycpO1xuICAgICAgICAgICAgZGV0YWlscy5vcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIGRldGFpbHMuc3R5bGUubWFyZ2luID0gJzRweCAwJztcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHN1bW1hcnkgPSBkZXRhaWxzLmNyZWF0ZUVsKCdzdW1tYXJ5Jyk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHN1bW1hcnkuc3R5bGUsIHtcbiAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgbWFyZ2luTGVmdDogYCR7aW5kZW50ICogSU5ERU5UX1BYfXB4YCxcbiAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgICAgICAgIHBhZGRpbmc6ICcycHggNnB4JyxcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdW1tYXJ5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHN1bW1hcnkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3VtbWFyeS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgICBzdW1tYXJ5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIC8vICgxKSBGb2xkZXIgY2hlY2tib3hcbiAgICAgICAgICAgIGNvbnN0IGNiID0gc3VtbWFyeS5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgIGNiLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuNWVtJztcbiAgICAgICAgICAgIGNiLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgY2Iuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgdGhpcy5jaGVja2JveE1hcFtub2RlLmZ1bGxQYXRoXSA9IGNiO1xuICAgIFxuICAgICAgICAgICAgLy8gKDIpIEZvbGRlciBpY29uXG4gICAgICAgICAgICBjb25zdCBpY29uRWwgPSBzdW1tYXJ5LmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24taWNvbicgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGljb25FbCwgJ2ZvbGRlcicpO1xuICAgICAgICAgICAgaWNvbkVsLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuM2VtJztcbiAgICAgICAgICAgIGljb25FbC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMC45KSc7XG4gICAgICAgICAgICBpY29uRWwuc3R5bGUub3BhY2l0eSA9ICcwLjc1JztcbiAgICBcbiAgICAgICAgICAgIC8vICgzKSBGb2xkZXIgbGFiZWxcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gc3VtbWFyeS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogbm9kZS5uYW1lIH0pO1xuICAgICAgICAgICAgbGFiZWwuc3R5bGUuZm9udFdlaWdodCA9ICc2MDAnO1xuICAgICAgICAgICAgbGFiZWwuc3R5bGUuZm9udFNpemUgPSAnMC45NWVtJztcbiAgICBcbiAgICAgICAgICAgIC8vICg0KSBXaGVuIGZvbGRlclx1MjAxMGNoZWNrYm94IHRvZ2dsZXM6XG4gICAgICAgICAgICBjYi5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy50b2dnbGVEZXNjZW5kYW50cyhub2RlLCBjYi5jaGVja2VkKTtcbiAgICAgICAgICAgICAgdGhpcy5lbmZvcmNlRGVwZW5kZW5jaWVzKG5vZGUuZnVsbFBhdGgsIGNiLmNoZWNrZWQpO1xuICAgICAgICAgICAgICB0aGlzLmZhZGVBbGxFeGNlcHRDdXJyZW50QmF0Y2goKTtcbiAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAvLyAoNSkgUmVjdXJzZSBpbnRvIGNoaWxkcmVuXG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbkNvbnRhaW5lciA9IGRldGFpbHMuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICBjaGlsZHJlbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSAnNHB4JztcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2hpbGROYW1lIG9mIE9iamVjdC5rZXlzKG5vZGUuY2hpbGRyZW4pLnNvcnQoKSkge1xuICAgICAgICAgICAgICByZW5kZXJOb2RlKG5vZGUuY2hpbGRyZW5bY2hpbGROYW1lXSwgY2hpbGRyZW5Db250YWluZXIsIGluZGVudCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgRklMRSBDQVNFIFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFx1MjUwMFxuICAgICAgICAgICAgY29uc3Qgcm93ID0gcGFyZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHJvdy5zdHlsZSwge1xuICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiBgJHtpbmRlbnQgKiBJTkRFTlRfUFh9cHhgLFxuICAgICAgICAgICAgICBwYWRkaW5nOiAnMnB4IDZweCcsXG4gICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgICAgICAgIG1hcmdpblRvcDogJzJweCcsXG4gICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogJzJweCcsXG4gICAgICAgICAgICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcm93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgIHJvdy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3ZlciknO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgcm93LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIC8vICgxKSBGaWxlIGNoZWNrYm94XG4gICAgICAgICAgICBjb25zdCBjYiA9IHJvdy5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgIGNiLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzAuNWVtJztcbiAgICAgICAgICAgIGNiLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgY2Iuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgdGhpcy5jaGVja2JveE1hcFtub2RlLmZ1bGxQYXRoXSA9IGNiO1xuICAgIFxuICAgICAgICAgICAgLy8gKDIpIEZpbGUgaWNvblxuICAgICAgICAgICAgY29uc3QgaWNvbkVsID0gcm93LmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24taWNvbicgfSk7XG4gICAgICAgICAgICBzZXRJY29uKGljb25FbCwgJ2RvY3VtZW50Jyk7XG4gICAgICAgICAgICBpY29uRWwuc3R5bGUubWFyZ2luUmlnaHQgPSAnMC4zZW0nO1xuICAgICAgICAgICAgaWNvbkVsLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZSgwLjgpJztcbiAgICAgICAgICAgIGljb25FbC5zdHlsZS5vcGFjaXR5ID0gJzAuNSc7XG4gICAgXG4gICAgICAgICAgICAvLyAoMykgRmlsZSBsYWJlbFxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSByb3cuY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiBub2RlLm5hbWUgfSk7XG4gICAgICAgICAgICBsYWJlbC5zdHlsZS5mb250U2l6ZSA9ICcwLjllbSc7XG4gICAgXG4gICAgICAgICAgICAvLyAoNCkgV2hlbiBmaWxlXHUyMDEwY2hlY2tib3ggdG9nZ2xlczpcbiAgICAgICAgICAgIGNiLm9uY2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmVuZm9yY2VEZXBlbmRlbmNpZXMobm9kZS5mdWxsUGF0aCwgY2IuY2hlY2tlZCk7XG4gICAgICAgICAgICAgIHRoaXMuZmFkZUFsbEV4Y2VwdEN1cnJlbnRCYXRjaCgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8vIEtpY2sgb2ZmIHJlY3Vyc2lvbiBhdCByb290XG4gICAgICAgIGZvciAoY29uc3QgdG9wTmFtZSBvZiBPYmplY3Qua2V5cyhyb290LmNoaWxkcmVuKS5zb3J0KCkpIHtcbiAgICAgICAgICByZW5kZXJOb2RlKHJvb3QuY2hpbGRyZW5bdG9wTmFtZV0sIGNvbnRhaW5lciwgMCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgXG4gICAgICAvLyBGaXJzdCBkcmF3IG9mIHRoZSB0cmVlIChiZWxvdyB0aGUgZGl2aWRlcilcbiAgICAgIHJlbmRlclRyZWUoKTtcbiAgICBcbiAgICAgIC8vXG4gICAgICAvLyBcdTI1MDBcdTI1MDBcdTI1MDAgKEIpIERFUEVOREVOQ1kgQ09OU09MRSBCRUxPVyBUSEUgU0NST0xMQUJMRSBPUFRJT05TIEJPWCBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcbiAgICAgIC8vXG4gICAgICB0aGlzLmNvbnNvbGVFbCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2N1c3RvbS1jb25zb2xlJyB9KTtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jb25zb2xlRWwuc3R5bGUsIHtcbiAgICAgICAgaGVpZ2h0OiAnMTQwcHgnLFxuICAgICAgICBtYXJnaW46ICcwLjVlbSAwJyxcbiAgICAgICAgcGFkZGluZzogJzhweCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KScsXG4gICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS1kaXZpZGVyLWNvbG9yKScsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgIGZvbnRGYW1pbHk6ICdtb25vc3BhY2UnLFxuICAgICAgICBmb250U2l6ZTogJzAuODJlbScsXG4gICAgICAgIGxpbmVIZWlnaHQ6ICcxLjRlbScsXG4gICAgICAgIGNvbG9yOiAndmFyKC0tdGV4dC1ub3JtYWwpJyxcbiAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgIHdoaXRlU3BhY2U6ICdwcmUtd3JhcCcsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gdGhpcy5jb25zb2xlRWwuY3JlYXRlRGl2KHtcbiAgICAgICAgdGV4dDogJz4gRGVwZW5kZW5jeSBlcnJvcnMgYW5kIHdhcm5pbmdzIHdpbGwgYXBwZWFyIGhlcmVcdTIwMjYnLFxuICAgICAgfSk7XG4gICAgICBPYmplY3QuYXNzaWduKHBsYWNlaG9sZGVyLnN0eWxlLCB7XG4gICAgICAgIG9wYWNpdHk6ICcwLjQnLFxuICAgICAgICBmb250U3R5bGU6ICdpdGFsaWMnLFxuICAgICAgICBtYXJnaW5Cb3R0b206ICc0cHgnLFxuICAgICAgfSk7XG4gICAgXG4gICAgICAvL1xuICAgICAgLy8gXHUyNTAwXHUyNTAwXHUyNTAwIChDKSBFVkVOVCBIQU5ETEVSUyBGT1IgVEhFIFRIUkVFIENIRUNLQk9YRVMgXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXG4gICAgICAvL1xuICAgICAgLy8gMSkgXHUyMDFDSW5jbHVkZSBQbHVnaW5zXHUyMDFEIHRvZ2dsZWRcbiAgICAgIHRoaXMucGx1Z2luQ2hlY2tib3gub25jaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFdBUk5JTkdfQ0xBU1MgPSAndnZ1bmRlcmxvcmUtd2FybmluZyc7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW5DaGVja2JveC5jaGVja2VkKSB7XG4gICAgICAgICAgLy8gSWYgY29uc29sZSBvbmx5IGhhcyB0aGUgcGxhY2Vob2xkZXIsIGNsZWFyIGl0XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5jb25zb2xlRWwuY2hpbGRyZW4ubGVuZ3RoID09PSAxICYmXG4gICAgICAgICAgICAodGhpcy5jb25zb2xlRWwuY2hpbGRyZW5bMF0gYXMgSFRNTEVsZW1lbnQpLnRleHRDb250ZW50Py5zdGFydHNXaXRoKFxuICAgICAgICAgICAgICAnPiBEZXBlbmRlbmN5IGNvbnNvbGUnXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnNvbGVFbC5lbXB0eSgpO1xuICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAvLyBBZGQgYSByZWQgd2FybmluZyBsaW5lXG4gICAgICAgICAgY29uc3Qgd2FybmluZ0xpbmUgPSB0aGlzLmNvbnNvbGVFbC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgdGV4dDpcbiAgICAgICAgICAgICAgJ1dBUk5JTkc6IFRoZSBWVnVuZGVybG9yZSBUb29sa2l0IHdpbGwgbm90IGZ1bmN0aW9uIHdpdGhvdXQgYWxsIGluY2x1ZGVkIHBsdWdpbnMhIFlvdSBwcm9iYWJseSB3YW50IHRvIHJlLWNoZWNrIHRoYXQgb25lLicsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgd2FybmluZ0xpbmUuYWRkQ2xhc3MoV0FSTklOR19DTEFTUyk7XG4gICAgICAgICAgd2FybmluZ0xpbmUuc3R5bGUuY29sb3IgPSAnI0ZGMDAwMCc7XG4gICAgXG4gICAgICAgICAgLy8gU2Nyb2xsIGNvbnNvbGUgdG8gYm90dG9tXG4gICAgICAgICAgdGhpcy5jb25zb2xlRWwuc2Nyb2xsVG9wID0gdGhpcy5jb25zb2xlRWwuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJlbW92ZSBvbmx5IG91ciB3YXJuaW5nIGxpbmVzIChsZWF2ZSBhbnkgb3RoZXIgbWVzc2FnZXMgYWxvbmUpXG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdXYXJuaW5ncyA9IHRoaXMuY29uc29sZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke1dBUk5JTkdfQ0xBU1N9YCk7XG4gICAgICAgICAgZXhpc3RpbmdXYXJuaW5ncy5mb3JFYWNoKChlbCkgPT4gZWwucmVtb3ZlKCkpO1xuICAgIFxuICAgICAgICAgIC8vIElmIGNvbnNvbGUgaXMgbm93IGVtcHR5LCByZVx1MjAxMGluc2VydCB0aGUgcGxhY2Vob2xkZXJcbiAgICAgICAgICBpZiAodGhpcy5jb25zb2xlRWwuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBwaCA9IHRoaXMuY29uc29sZUVsLmNyZWF0ZURpdih7XG4gICAgICAgICAgICAgIHRleHQ6ICc+IERlcGVuZGVuY3kgY29uc29sZSBvdXRwdXQgd2lsbCBhcHBlYXIgaGVyZVx1MjAyNicsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocGguc3R5bGUsIHtcbiAgICAgICAgICAgICAgb3BhY2l0eTogJzAuNCcsXG4gICAgICAgICAgICAgIGZvbnRTdHlsZTogJ2l0YWxpYycsXG4gICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogJzRweCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgLy8gU2Nyb2xsIHRvIGJvdHRvbSBhZ2FpblxuICAgICAgICAgIHRoaXMuY29uc29sZUVsLnNjcm9sbFRvcCA9IHRoaXMuY29uc29sZUVsLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICBcbiAgICAgIC8vIDIpIFx1MjAxQ0luY2x1ZGUgRGVtbyBGaWxlc1x1MjAxRCB0b2dnbGVkXG4gICAgICB0aGlzLmRlbW9DaGVja2JveC5vbmNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgcmVuZGVyVHJlZSgpO1xuICAgICAgfTtcbiAgICBcbiAgICAgIC8vIDMpIFx1MjAxQ0luY2x1ZGUgVmF1bHQgU2V0dGluZ3NcdTIwMUQgdG9nZ2xlZFxuICAgICAgLy8gKG5vIG5lZWQgdG8gcmUtcmVuZGVyIHRoZSB0cmVlLCBzaW5jZSB2YXVsdCBzZXR0aW5ncyBhcmVuXHUyMDE5dCBpbiB0aGUgbWFuaWZlc3QgdHJlZSlcbiAgICBcbiAgICAgIC8vXG4gICAgICBjb25zdCBidXR0b25Sb3cgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgIE9iamVjdC5hc3NpZ24oYnV0dG9uUm93LnN0eWxlLCB7XG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJywgICAvLyBwdXNoIGxlZnQgdnMgcmlnaHRcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgIHBhZGRpbmdUb3A6ICc4cHgnLFxuICAgICAgICBib3JkZXJUb3A6ICcxcHggc29saWQgdmFyKC0tZGl2aWRlci1jb2xvciknLFxuICAgICAgICBtYXJnaW5Ub3A6ICc4cHgnLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIDEpIFx1MjAxQ1Jlc2V0IFNlbGVjdGlvblx1MjAxRCBvbiB0aGUgTEVGVFxuICAgICAgY29uc3QgcmVzZXRCdG4gPSBidXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1Jlc2V0IFNlbGVjdGlvbicgfSk7XG4gICAgICByZXNldEJ0bi5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgYDtcbiAgICAgIHJlc2V0QnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIC8vIDEpIEdhdGhlciBhbnkgZXhpc3RpbmcgV0FSTklORyBsaW5lc1xuICAgICAgICBjb25zdCB3YXJuaW5ncyA9IEFycmF5LmZyb20oXG4gICAgICAgICAgdGhpcy5jb25zb2xlRWwucXVlcnlTZWxlY3RvckFsbCgnLnZ2dW5kZXJsb3JlLXdhcm5pbmcnKVxuICAgICAgICApIGFzIEhUTUxFbGVtZW50W107XG4gICAgICBcbiAgICAgICAgLy8gMikgV2lwZSBvdXQgdGhlIGNvbnNvbGUgZW50aXJlbHkgKHRoaXMgcmVtb3ZlcyBhbGwgZGVwZW5kZW5jeSBsaW5lcylcbiAgICAgICAgdGhpcy5jb25zb2xlRWwuZW1wdHkoKTtcbiAgICAgIFxuICAgICAgICAvLyAzKSBSZVx1MjAxMGFwcGVuZCBlYWNoIHBsdWdpblx1MjAxMHdhcm5pbmcgYmFjayBpbnRvIHRoZSBjb25zb2xlXG4gICAgICAgIHdhcm5pbmdzLmZvckVhY2goKHdhcm5pbmdFbCkgPT4ge1xuICAgICAgICAgIHRoaXMuY29uc29sZUVsLmFwcGVuZENoaWxkKHdhcm5pbmdFbCk7XG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICAgIC8vIDQpIFJlXHUyMDEwY2hlY2sgZXZlcnkgc2luZ2xlIG1hbmlmZXN0XHUyMDEwdHJlZSBjaGVja2JveFxuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMuY2hlY2tib3hNYXApLmZvckVhY2goKGNiKSA9PiB7XG4gICAgICAgICAgY2IuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgXG4gICAgICAvLyAyKSBDcmVhdGUgYSByaWdodFx1MjAxMGFsaWduZWQgc3ViXHUyMDEwY29udGFpbmVyIGZvciBcdTIwMUNJbnN0YWxsIFNlbGVjdGVkXHUyMDFEICsgXHUyMDFDQ2FuY2VsXHUyMDFEXG4gICAgICBjb25zdCByaWdodEdyb3VwID0gYnV0dG9uUm93LmNyZWF0ZURpdigpO1xuICAgICAgT2JqZWN0LmFzc2lnbihyaWdodEdyb3VwLnN0eWxlLCB7XG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgZ2FwOiAnMC41ZW0nLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIDJhKSBcdTIwMUNJbnN0YWxsIFNlbGVjdGVkXHUyMDFEIChwcmltYXJ5IENUQSlcbiAgICAgIGNvbnN0IGluc3RhbGxCdG4gPSByaWdodEdyb3VwLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgIHRleHQ6ICdJbnN0YWxsIFNlbGVjdGVkJyxcbiAgICAgICAgY2xzOiAnbW9kLWN0YScsXG4gICAgICB9KTtcbiAgICAgIGluc3RhbGxCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgaW5zdGFsbEJ0bi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJycpO1xuICAgICAgXG4gICAgICAgIC8vIChpKSBDbG9zZSB0aGlzIGN1c3RvbVx1MjAxMGluc3RhbGwgbW9kYWxcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgXG4gICAgICAgIC8vIChpaSkgU2hvdyBcdTIwMUNJbnN0YWxsaW5nXHUyMDI2XHUyMDFEIHBsYWNlaG9sZGVyXG4gICAgICAgIGNvbnN0IGluc3RhbGxpbmcgPSBuZXcgSW5zdGFsbGluZ01vZGFsKGFwcCk7XG4gICAgICAgIGluc3RhbGxpbmcub3BlbigpO1xuICAgICAgXG4gICAgICAgIC8vIChpaWkpIEdhdGhlciBhbGwgY2hlY2tlZCBtYW5pZmVzdCBlbnRyaWVzXG4gICAgICAgIGNvbnN0IHRvSW5zdGFsbDogeyBwYXRoOiBzdHJpbmc7IGlzRm9sZGVyOiBib29sZWFuIH1bXSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IFtmcCwgY2hlY2tib3hdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuY2hlY2tib3hNYXApKSB7XG4gICAgICAgICAgaWYgKGNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzRm9sZGVyID0gcGx1Z2luLm1hbmlmZXN0Q2FjaGUuZm9sZGVycy5zb21lKChmKSA9PiBmLnBhdGggPT09IGZwKTtcbiAgICAgICAgICAgIHRvSW5zdGFsbC5wdXNoKHsgcGF0aDogZnAsIGlzRm9sZGVyIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXG4gICAgICAgIC8vIChpdikgSWYgXHUyMDFDSW5jbHVkZSBQbHVnaW5zXHUyMDFEIGlzIGNoZWNrZWQgXHUyMTkyIHB1bGwgZG93biBgLm9ic2lkaWFuL3BsdWdpbnNgICsgYGNvbW11bml0eS1wbHVnaW5zLmpzb25gXG4gICAgICAgIC8vIChpdikgSWYgXHUyMDFDSW5jbHVkZSBQbHVnaW5zXHUyMDFEIGlzIGNoZWNrZWQgXHUyMTkyIGZldGNoIHRoZSBHaXRIdWItc2lkZSAub2JzaWRpYW4vcGx1Z2lucyBhbmQgb25seSBlbnF1ZXVlXG4vLyAgICAgdGhvc2UgZm9sZGVycy9maWxlcyB0aGF0IGFyZW5cdTIwMTl0IGFscmVhZHkgaW4gdGhlIHZhdWx0LlxuaWYgKHRoaXMucGx1Z2luQ2hlY2tib3guY2hlY2tlZCkge1xuICB0cnkge1xuICAgIGNvbnN0IGFwaVVybCA9XG4gICAgICAnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9zbGFtd2lzZTAwMDEvVlZ1bmRlcmxvcmUtVG9vbGtpdC1GdWxsL2NvbnRlbnRzLy5vYnNpZGlhbi9wbHVnaW5zP3JlZj1tYWluJztcbiAgICBjb25zdCByZXNwID0gYXdhaXQgZmV0Y2goYXBpVXJsKTtcbiAgICBpZiAocmVzcC5vaykge1xuICAgICAgY29uc3QgcGx1Z2luRmlsZXM6IEFycmF5PHsgbmFtZTogc3RyaW5nOyB0eXBlOiAnZmlsZScgfCAnZGlyJyB9PiA9IGF3YWl0IHJlc3AuanNvbigpO1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHBsdWdpbkZpbGVzKSB7XG4gICAgICAgIGNvbnN0IGxvY2FsUGF0aCA9IGAub2JzaWRpYW4vcGx1Z2lucy8ke2l0ZW0ubmFtZX1gO1xuICAgICAgICAvLyBJZiB0aGF0IHBsdWdpbiBmb2xkZXIgKG9yIGZpbGUpIGRvZXMgX25vdF8gYWxyZWFkeSBleGlzdCBpbiB0aGUgdmF1bHQsIGVucXVldWUgaXQ6XG4gICAgICAgIGNvbnN0IGV4aXN0c0xvY2FsbHkgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhsb2NhbFBhdGgpO1xuICAgICAgICBpZiAoIWV4aXN0c0xvY2FsbHkpIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZGlyJykge1xuICAgICAgICAgICAgdG9JbnN0YWxsLnB1c2goeyBwYXRoOiBsb2NhbFBhdGgsIGlzRm9sZGVyOiB0cnVlIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0b0luc3RhbGwucHVzaCh7IHBhdGg6IGxvY2FsUGF0aCwgaXNGb2xkZXI6IGZhbHNlIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBlbnVtZXJhdGUgLm9ic2lkaWFuL3BsdWdpbnMgZnJvbSBHaXRIdWI6JywgZSk7XG4gIH1cblxuICAvLyBFdmVuIGlmIGNvbW11bml0eS1wbHVnaW5zLmpzb24gYWxyZWFkeSBleGlzdHMsIHlvdSBtaWdodCB3YW50IHRvIG92ZXJ3cml0ZSBpdCxcbiAgLy8gb3IgeW91IGNhbiBhbHNvIGNoZWNrIGFkYXB0ZXIuZXhpc3RzKC4uLikgYmVmb3JlIHB1c2hpbmcgaXQuIEV4YW1wbGUgYWx3YXlzIG92ZXJ3cml0ZXM6XG4gIHRvSW5zdGFsbC5wdXNoKHsgcGF0aDogJy5vYnNpZGlhbi9jb21tdW5pdHktcGx1Z2lucy5qc29uJywgaXNGb2xkZXI6IGZhbHNlIH0pO1xufVxuXG4gICAgICBcbiAgICAgICAgLy8gKHYpIElmIFx1MjAxQ0luY2x1ZGUgVmF1bHQgU2V0dGluZ3NcdTIwMUQgaXMgY2hlY2tlZCBcdTIxOTIgYWRkIHRoZSBmb3VyIEpTT04gZmlsZXMgdW5kZXIgYC5vYnNpZGlhbi9gXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzQ2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgICAgIGNvbnN0IHZhdWx0U2V0dGluZ3NQYXRocyA9IFtcbiAgICAgICAgICAgICcub2JzaWRpYW4vYXBwLmpzb24nLFxuICAgICAgICAgICAgJy5vYnNpZGlhbi9hcHBlYXJhbmNlLmpzb24nLFxuICAgICAgICAgICAgJy5vYnNpZGlhbi9ncmFwaC5qc29uJyxcbiAgICAgICAgICAgICcub2JzaWRpYW4vaG90a2V5cy5qc29uJyxcbiAgICAgICAgICBdO1xuICAgICAgICAgIGZvciAoY29uc3QgdnMgb2YgdmF1bHRTZXR0aW5nc1BhdGhzKSB7XG4gICAgICAgICAgICB0b0luc3RhbGwucHVzaCh7IHBhdGg6IHZzLCBpc0ZvbGRlcjogZmFsc2UgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBcbiAgICAgICAgLy8gKHZpKSBQZXJmb3JtIHRoZSBhY3R1YWwgaW5zdGFsbFxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHBsdWdpbi5wZXJmb3JtQ3VzdG9tSW5zdGFsbCh0b0luc3RhbGwpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTI3NEMgcGVyZm9ybUN1c3RvbUluc3RhbGwoKSB0aHJldzonLCBlcnIpO1xuICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1Mjc0QyBDdXN0b20gaW5zdGFsbCBmYWlsZWRcdTIwMTRzZWUgY29uc29sZScpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGluc3RhbGxpbmcuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gMmIpIFx1MjAxQ0NhbmNlbFx1MjAxRCBvbiB0aGUgcmlnaHRcbiAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IHJpZ2h0R3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgICBjYW5jZWxCdG4ub25jbGljayA9ICgpID0+IHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gICAgXG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG5cbiAgICAvKiogUmVjdXJzaXZlbHkgdG9nZ2xlIGRlc2NlbmRhbnRzXHUyMDE5IGNoZWNrZWRcdTIwMTBzdGF0ZSB3aXRob3V0IGxvZ2dpbmcgZWFjaCBvbmUuICovXG4gICAgcHJpdmF0ZSB0b2dnbGVEZXNjZW5kYW50cyhub2RlOiBUcmVlTm9kZSwgY2hlY2tlZDogYm9vbGVhbikge1xuICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBPYmplY3QudmFsdWVzKG5vZGUuY2hpbGRyZW4pKSB7XG4gICAgICAgIGNvbnN0IGNiID0gdGhpcy5jaGVja2JveE1hcFtjaGlsZC5mdWxsUGF0aF07XG4gICAgICAgIGlmIChjYikgY2IuY2hlY2tlZCA9IGNoZWNrZWQ7XG4gICAgICAgIGlmIChjaGlsZC5pc0ZvbGRlcikge1xuICAgICAgICAgIHRoaXMudG9nZ2xlRGVzY2VuZGFudHMoY2hpbGQsIGNoZWNrZWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5mb3JjZSBkZXBlbmRlbmN5IGxvZ2ljIChhdXRvXHUyMDEwY2hlY2sgcHJlcmVxdWlzaXRlcywgYXV0b1x1MjAxMHVuY2hlY2sgZGVwZW5kZW50cykuXG4gICAgICogRWFjaCB0aW1lIHdlIGZsaXAgYSBib3ggXHUyMDFDYmVjYXVzZSBvZiBhIGRlcGVuZGVuY3ksXHUyMDFEIHdlIGxvZyBvbmUgbGluZSB0byB0aGUgY29uc29sZS5cbiAgICAgKi9cbiAgICBwcml2YXRlIGVuZm9yY2VEZXBlbmRlbmNpZXMoY2hhbmdlZFBhdGg6IHN0cmluZywgaXNDaGVja2VkOiBib29sZWFuKSB7XG4gICAgICBjb25zdCBjaGFuZ2VkS2V5ID0gZnVsbFBhdGhUb0tleVtjaGFuZ2VkUGF0aF07XG4gICAgICBpZiAoIWNoYW5nZWRLZXkpIHJldHVybjtcblxuICAgICAgLy8gQnVpbGQgYSBxdWljayBtYXA6IGZ1bGxQYXRoIFx1MjE5MiBkaXNwbGF5TmFtZVxuICAgICAgY29uc3QgZnVsbFBhdGhUb0Rpc3BsYXk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgIGZvciAoY29uc3QgZiBvZiBwbHVnaW4ubWFuaWZlc3RDYWNoZS5mb2xkZXJzKSB7XG4gICAgICAgIGZ1bGxQYXRoVG9EaXNwbGF5W2YucGF0aF0gPSBmLmRpc3BsYXlOYW1lID8/IGYucGF0aC5zcGxpdCgnLycpLnBvcCgpITtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgZiBvZiBwbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcykge1xuICAgICAgICBmdWxsUGF0aFRvRGlzcGxheVtmLnBhdGhdID0gZi5kaXNwbGF5TmFtZSA/PyBmLnBhdGguc3BsaXQoJy8nKS5wb3AoKSE7XG4gICAgICB9XG4gICAgICBjb25zdCBjaGFuZ2VkTmFtZSA9IGZ1bGxQYXRoVG9EaXNwbGF5W2NoYW5nZWRQYXRoXSA/PyBjaGFuZ2VkUGF0aC5zcGxpdCgnLycpLnBvcCgpITtcblxuICAgICAgLy8gU3RhcnQgYSBuZXcgXHUyMDFDYmF0Y2hcdTIwMUQ6XG4gICAgICB0aGlzLmN1cnJlbnRCYXRjaExpbmVzID0gW107XG5cbiAgICAgIGlmIChpc0NoZWNrZWQpIHtcbiAgICAgICAgLy8gXHUyNUI2IEF1dG9cdTIwMTBjaGVjayBwcmVyZXF1aXNpdGVzXG4gICAgICAgIGNvbnN0IHN0YWNrID0gW2NoYW5nZWRLZXldO1xuICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgY3VyID0gc3RhY2sucG9wKCkhO1xuICAgICAgICAgIGNvbnN0IGRlcHMgPSBwbHVnaW4ucmVxdWlyZXNHcmFwaC5nZXQoY3VyKSA/PyBbXTtcbiAgICAgICAgICBmb3IgKGNvbnN0IGRlcEtleSBvZiBkZXBzKSB7XG4gICAgICAgICAgICBjb25zdCBkZXBFbnRyeSA9XG4gICAgICAgICAgICAgIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZpbGVzLmZpbmQoKHgpID0+IHgua2V5ID09PSBkZXBLZXkpIHx8XG4gICAgICAgICAgICAgIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMuZmluZCgoeCkgPT4geC5rZXkgPT09IGRlcEtleSk7XG4gICAgICAgICAgICBpZiAoZGVwRW50cnkpIHtcbiAgICAgICAgICAgICAgY29uc3QgZGVwUGF0aCA9IGRlcEVudHJ5LnBhdGg7XG4gICAgICAgICAgICAgIGNvbnN0IGNiID0gdGhpcy5jaGVja2JveE1hcFtkZXBQYXRoXTtcbiAgICAgICAgICAgICAgaWYgKGNiICYmICFjYi5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgY2IuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVwTmFtZSA9IGZ1bGxQYXRoVG9EaXNwbGF5W2RlcFBhdGhdID8/IGRlcFBhdGguc3BsaXQoJy8nKS5wb3AoKSE7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUVsID0gdGhpcy5hcHBlbmRMb2dMaW5lKFxuICAgICAgICAgICAgICAgICAgZGVwUGF0aCxcbiAgICAgICAgICAgICAgICAgIGA+ICR7ZGVwTmFtZX0gYXV0b21hdGljYWxseSBjaGVja2VkIChyZXF1aXJlZCBieSAke2NoYW5nZWROYW1lfSlgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRCYXRjaExpbmVzLnB1c2gobGluZUVsKTtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGRlcEtleSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFx1MjVCNiBBdXRvXHUyMDEwdW5jaGVjayBkZXBlbmRlbnRzXG4gICAgICAgIGNvbnN0IGRlcGVuZGVudHNPZiA9ICh0YXJnZXRLZXk6IHN0cmluZykgPT5cbiAgICAgICAgICBBcnJheS5mcm9tKHBsdWdpbi5yZXF1aXJlc0dyYXBoLmVudHJpZXMoKSlcbiAgICAgICAgICAgIC5maWx0ZXIoKFssIGRlcHNdKSA9PiBkZXBzLmluY2x1ZGVzKHRhcmdldEtleSkpXG4gICAgICAgICAgICAubWFwKChba10pID0+IGspO1xuXG4gICAgICAgIGNvbnN0IHN0YWNrID0gW2NoYW5nZWRLZXldO1xuICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgY3VyID0gc3RhY2sucG9wKCkhO1xuICAgICAgICAgIGZvciAoY29uc3QgY2hpbGRLZXkgb2YgZGVwZW5kZW50c09mKGN1cikpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkRW50cnkgPVxuICAgICAgICAgICAgICBwbHVnaW4ubWFuaWZlc3RDYWNoZS5maWxlcy5maW5kKCh4KSA9PiB4LmtleSA9PT0gY2hpbGRLZXkpIHx8XG4gICAgICAgICAgICAgIHBsdWdpbi5tYW5pZmVzdENhY2hlLmZvbGRlcnMuZmluZCgoeCkgPT4geC5rZXkgPT09IGNoaWxkS2V5KTtcbiAgICAgICAgICAgIGlmIChjaGlsZEVudHJ5KSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNoaWxkUGF0aCA9IGNoaWxkRW50cnkucGF0aDtcbiAgICAgICAgICAgICAgY29uc3QgY2IgPSB0aGlzLmNoZWNrYm94TWFwW2NoaWxkUGF0aF07XG4gICAgICAgICAgICAgIGlmIChjYiAmJiBjYi5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgY2IuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkTmFtZSA9IGZ1bGxQYXRoVG9EaXNwbGF5W2NoaWxkUGF0aF0gPz8gY2hpbGRQYXRoLnNwbGl0KCcvJykucG9wKCkhO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVFbCA9IHRoaXMuYXBwZW5kTG9nTGluZShcbiAgICAgICAgICAgICAgICAgIGNoaWxkUGF0aCxcbiAgICAgICAgICAgICAgICAgIGA+ICR7Y2hpbGROYW1lfSBhdXRvbWF0aWNhbGx5IHVuY2hlY2tlZCAoZGVwZW5kcyBvbiAke2NoYW5nZWROYW1lfSlgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRCYXRjaExpbmVzLnB1c2gobGluZUVsKTtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGNoaWxkS2V5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmZhZGVBbGxFeGNlcHRDdXJyZW50QmF0Y2goKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBlbmQgb25lIFx1MjAxQ21vbm9cdTIwMUQgbGluZSBwbHVzIGEgdGlueSB1bmRvIGJ1dHRvbi4gUmV0dXJucyB0aGUgbmV3IDxkaXY+LlxuICAgICAqL1xuICAgIHByaXZhdGUgYXBwZW5kTG9nTGluZShmdWxsUGF0aDogc3RyaW5nLCB0ZXh0OiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG5cbiAgICAgIC8vICgyKSBCdWlsZCBhIG5ldyA8ZGl2PiBmb3IgdGhpcyBsaW5lXG4gICAgICBjb25zdCBsaW5lID0gdGhpcy5jb25zb2xlRWwuY3JlYXRlRGl2KCk7XG4gICAgICBPYmplY3QuYXNzaWduKGxpbmUuc3R5bGUsIHtcbiAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLFxuICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgbWFyZ2luOiAnMnB4IDAnLFxuICAgICAgICBvcGFjaXR5OiAnMS4wJyxcbiAgICAgICAgdHJhbnNpdGlvbjogJ29wYWNpdHkgMC4ycyBlYXNlJyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyAoMykgTGVmdDogdGhlIG1lc3NhZ2UgdGV4dFxuICAgICAgbGluZS5jcmVhdGVTcGFuKHsgdGV4dCB9KTtcblxuICAgICAgLy8gKDQpIFJpZ2h0OiBcdTIwMUN1bmRvXHUyMDFEIGJ1dHRvblxuICAgICAgY29uc3QgdW5kb0J0biA9IGxpbmUuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ3VuZG8nLCBjbHM6ICdtb2Qtc21hbGwnIH0pO1xuICAgICAgT2JqZWN0LmFzc2lnbih1bmRvQnRuLnN0eWxlLCB7XG4gICAgICAgIG1hcmdpbkxlZnQ6ICcwLjVlbScsXG4gICAgICAgIGZvbnRTaXplOiAnMC43NWVtJyxcbiAgICAgICAgcGFkZGluZzogJzJweCA0cHgnLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgIH0pO1xuICAgICAgdW5kb0J0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjYiA9IHRoaXMuY2hlY2tib3hNYXBbZnVsbFBhdGhdO1xuICAgICAgICBpZiAoY2IpIHtcbiAgICAgICAgICBjYi5jaGVja2VkID0gIWNiLmNoZWNrZWQ7XG4gICAgICAgICAgdGhpcy5lbmZvcmNlRGVwZW5kZW5jaWVzKGZ1bGxQYXRoLCBjYi5jaGVja2VkKTtcbiAgICAgICAgICB0aGlzLmZhZGVBbGxFeGNlcHRDdXJyZW50QmF0Y2goKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gKDUpIFNjcm9sbCB0aGUgY29uc29sZSB0byBib3R0b21cbiAgICAgIHRoaXMuY29uc29sZUVsLnNjcm9sbFRvcCA9IHRoaXMuY29uc29sZUVsLnNjcm9sbEhlaWdodDtcbiAgICAgIHJldHVybiBsaW5lO1xuICAgIH1cblxuICAgIC8qKiBGYWRlIG91dCBldmVyeSBjb25zb2xlIGxpbmUgdGhhdCBpcyAqbm90KiBwYXJ0IG9mIGN1cnJlbnRCYXRjaExpbmVzLiAqL1xuICAgIHByaXZhdGUgZmFkZUFsbEV4Y2VwdEN1cnJlbnRCYXRjaCgpIHtcbiAgICAgIGNvbnN0IHRvdGFsID0gdGhpcy5jb25zb2xlRWwuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5jb25zb2xlRWwuY2hpbGRyZW5baV0gYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRCYXRjaExpbmVzLmluY2x1ZGVzKGNoaWxkKSkge1xuICAgICAgICAgIGNoaWxkLnN0eWxlLm9wYWNpdHkgPSAnMS4wJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGlsZC5zdHlsZS5vcGFjaXR5ID0gJzAuNic7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyAoNCkgRmluYWxseSwgb3BlbiB0aGUgbW9kYWxcbiAgbmV3IEN1c3RvbUluc3RhbGxNb2RhbChhcHApLm9wZW4oKTtcbn1cbiIsICJpbXBvcnQgeyBWYXVsdCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tICdjcnlwdG8nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xraXRGaWxlQ2FjaGVFbnRyeSB7XG5cdGhhc2g6IHN0cmluZztcblx0Z2l0aHViUGF0aDogc3RyaW5nO1xufVxuXG5leHBvcnQgdHlwZSBUb29sa2l0RmlsZUNhY2hlID0gUmVjb3JkPHN0cmluZywgVG9vbGtpdEZpbGVDYWNoZUVudHJ5PjsgLy8gdmF1bHRQYXRoID0+IHtoYXNoLCBnaXRodWJQYXRofVxuXG5leHBvcnQgY2xhc3MgVG9vbGtpdEZpbGVDYWNoZU1hbmFnZXIge1xuXHRwcml2YXRlIHZhdWx0OiBWYXVsdDtcblx0cHJpdmF0ZSBjYWNoZTogVG9vbGtpdEZpbGVDYWNoZTtcblx0cHJpdmF0ZSBzYXZlOiAoKSA9PiBQcm9taXNlPHZvaWQ+O1xuXG5cdGNvbnN0cnVjdG9yKHZhdWx0OiBWYXVsdCwgaW5pdGlhbENhY2hlOiBUb29sa2l0RmlsZUNhY2hlIHwgdW5kZWZpbmVkLCBzYXZlQ2FsbGJhY2s6ICgpID0+IFByb21pc2U8dm9pZD4pIHtcblx0XHR0aGlzLnZhdWx0ID0gdmF1bHQ7XG5cdFx0dGhpcy5jYWNoZSA9IGluaXRpYWxDYWNoZSB8fCB7fTtcblx0XHR0aGlzLnNhdmUgPSBzYXZlQ2FsbGJhY2s7XG5cdH1cblxuXHRwcml2YXRlIGhhc2hDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIGNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShjb250ZW50KS5kaWdlc3QoJ2hleCcpO1xuXHR9XG5cblx0YXN5bmMgaXNVcFRvRGF0ZSh2YXVsdFBhdGg6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdC8vY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBDaGVja2luZyBpZiBcIiR7dmF1bHRQYXRofVwiIGlzIHVwIHRvIGRhdGUuYCk7XG5cdFxuXHRcdGNvbnN0IGVudHJ5ID0gdGhpcy5jYWNoZVt2YXVsdFBhdGhdO1xuXHRcdGlmICghZW50cnkpIHtcblx0XHRcdC8vY29uc29sZS5sb2coYFx1Mjc0QyBObyBjYWNoZWQgaGFzaCBmb3VuZCBmb3I6ICR7dmF1bHRQYXRofWApO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XG5cdFx0Y29uc3QgZXhpc3RzID0gYXdhaXQgdGhpcy52YXVsdC5hZGFwdGVyLmV4aXN0cyh2YXVsdFBhdGgpO1xuXHRcdGlmICghZXhpc3RzKSB7XG5cdFx0XHQvL2NvbnNvbGUubG9nKGBcdTI3NEMgRmlsZSBkb2VzIG5vdCBleGlzdCBpbiB2YXVsdDogJHt2YXVsdFBhdGh9YCk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcblx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy52YXVsdC5hZGFwdGVyLnJlYWQodmF1bHRQYXRoKTtcblx0XHRjb25zdCBsb2NhbEhhc2ggPSB0aGlzLmhhc2hDb250ZW50KGNvbnRlbnQpO1xuXHRcdGNvbnN0IGlzU2FtZSA9IGxvY2FsSGFzaCA9PT0gZW50cnkuaGFzaDtcblx0XG5cdFx0Ly9jb25zb2xlLmxvZyhgXHVEODNEXHVERDIyIExvY2FsIGhhc2g6ICAke2xvY2FsSGFzaH1gKTtcblx0XHQvL2NvbnNvbGUubG9nKGBcdUQ4M0RcdURDRTYgQ2FjaGVkIGhhc2g6ICR7ZW50cnkuaGFzaH1gKTtcblx0XHQvL2NvbnNvbGUubG9nKGlzU2FtZSA/IGBcdTI3MDUgRmlsZSBpcyB1cCB0byBkYXRlLmAgOiBgXHVEODNEXHVERDAxIEZpbGUgbmVlZHMgdXBkYXRlLmApO1xuXHRcblx0XHRyZXR1cm4gaXNTYW1lO1xuXHR9XG5cdFxuXG5cdGFzeW5jIHVwZGF0ZUNhY2hlKHZhdWx0UGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIGdpdGh1YlBhdGg6IHN0cmluZywgc2F2ZU5vdzogYm9vbGVhbiA9IHRydWUpIHtcblx0XHR0aGlzLmNhY2hlW3ZhdWx0UGF0aF0gPSB7XG5cdFx0XHRoYXNoOiB0aGlzLmhhc2hDb250ZW50KGNvbnRlbnQpLFxuXHRcdFx0Z2l0aHViUGF0aFxuXHRcdH07XG5cdFx0aWYgKHNhdmVOb3cpIGF3YWl0IHRoaXMuc2F2ZSgpO1xuXHR9XG5cblx0Z2V0Q2FjaGUoKTogVG9vbGtpdEZpbGVDYWNoZSB7XG5cdFx0cmV0dXJuIHRoaXMuY2FjaGU7XG5cdH1cblxuXHRnZXRUcmFja2VkRmlsZXMoKTogc3RyaW5nW10ge1xuXHRcdHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmNhY2hlKTtcblx0fVxuXG5cdGdldEdpdEh1YlBhdGgodmF1bHRQYXRoOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuXHRcdHJldHVybiB0aGlzLmNhY2hlW3ZhdWx0UGF0aF0/LmdpdGh1YlBhdGg7XG5cdH1cblxuXHRyZXNldENhY2hlKCkge1xuXHRcdHRoaXMuY2FjaGUgPSB7fTtcblx0fVxuXG5cdGFzeW5jIHJlbW92ZUZyb21DYWNoZSh2YXVsdFBhdGg6IHN0cmluZykge1xuXHRcdGRlbGV0ZSB0aGlzLmNhY2hlW3ZhdWx0UGF0aF07XG5cdFx0YXdhaXQgdGhpcy5zYXZlKCk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBub3JtYWxpemVQYXRoLCBWYXVsdCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IGRpcm5hbWUsIGJhc2VuYW1lLCBqb2luIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBwcm9taXNlcyBhcyBmcyB9IGZyb20gJ2ZzJztcblxuZXhwb3J0IGNsYXNzIEJhY2t1cE1hbmFnZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHZhdWx0OiBWYXVsdCkge31cblxuICAvKipcbiAgICogTWlycm9yIGV2ZXJ5IHZhdWx0IGZpbGUgKGV4Y2x1ZGluZyAub2JzaWRpYW4gJiBiYWNrdXBzKSBpbnRvIGEgdGltZXN0YW1wZWQgZm9sZGVyLFxuICAgKiB0aGVuIHBydW5lIHRvIGtlZXAgb25seSB0aGUgbGF0ZXN0IE4gZnVsbCBzbmFwc2hvdHMuXG4gICAqIEBwYXJhbSBsYWJlbCBPcHRpb25hbCBzdWZmaXggZm9yIHRoZSBiYWNrdXAgZm9sZGVyIG5hbWVcbiAgICogQHBhcmFtIG1heEZ1bGxCYWNrdXBzIE51bWJlciBvZiBmdWxsIHNuYXBzaG90cyB0byByZXRhaW4gKGRlZmF1bHQ6IDUpXG4gICAqL1xuICBhc3luYyBiYWNrdXBWYXVsdE1pcnJvcihsYWJlbD86IHN0cmluZywgbWF4RnVsbEJhY2t1cHM6IG51bWJlciA9IDUpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHRzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1s6Ll0vZywgJy0nKTtcbiAgICBjb25zdCB0YWcgPSBsYWJlbCA/IGAtJHtsYWJlbH1gIDogJyc7XG4gICAgY29uc3QgYmFzZSA9IG5vcm1hbGl6ZVBhdGgoYC52YXVsdC1iYWNrdXBzL2Z1bGwvJHt0c30ke3RhZ31gKTtcbiAgICBjb25zb2xlLmxvZyhgW0JhY2t1cE1hbmFnZXJdIFN0YXJ0aW5nIG1pcnJvciBiYWNrdXA6ICR7YmFzZX1gKTtcblxuICAgIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKGJhc2UpO1xuXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIHRoaXMudmF1bHQuZ2V0RmlsZXMoKSkge1xuICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKCcudmF1bHQtYmFja3Vwcy8nKSB8fCBmaWxlLnBhdGguc3RhcnRzV2l0aCgnLm9ic2lkaWFuLycpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMudmF1bHQucmVhZChmaWxlKTtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5vcm1hbGl6ZVBhdGgoYCR7YmFzZX0vJHtmaWxlLnBhdGh9YCk7XG4gICAgICBhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyhkaXJuYW1lKHRhcmdldCkpO1xuICAgICAgYXdhaXQgdGhpcy52YXVsdC5jcmVhdGUodGFyZ2V0LCBjb250ZW50KTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnW0JhY2t1cE1hbmFnZXJdIE1pcnJvciBiYWNrdXAgY29tcGxldGUuIFBydW5pbmcgb2xkIGJhY2t1cHMuLi4nKTtcbiAgICBhd2FpdCB0aGlzLnBydW5lRnVsbEJhY2t1cHMoYmFzZSwgbWF4RnVsbEJhY2t1cHMpO1xuICAgLy8gY29uc29sZS5sb2coJ1tCYWNrdXBNYW5hZ2VyXSBQcnVuaW5nIGNvbXBsZXRlLicpO1xuICAgIHJldHVybiBiYXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIExlZ2FjeSBhbGlhcyBmb3IgbWlycm9yLWJhc2VkIGJhY2t1cHNcbiAgICovXG4gIGFzeW5jIGJhY2t1cFZhdWx0VG9aaXAobGFiZWw/OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLmJhY2t1cFZhdWx0TWlycm9yKGxhYmVsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIG9sZGVzdCBmdWxsIGJhY2t1cCBmb2xkZXJzLCBrZWVwaW5nIG9ubHkgdGhlIG1vc3QgcmVjZW50IGBrZWVwYCBzbmFwc2hvdHMuXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHBydW5lRnVsbEJhY2t1cHMoY3VycmVudFBhdGg6IHN0cmluZywga2VlcDogbnVtYmVyKSB7XG4gICAgY29uc3Qgcm9vdCA9IG5vcm1hbGl6ZVBhdGgoJy52YXVsdC1iYWNrdXBzL2Z1bGwnKTtcbiAgIC8vIGNvbnNvbGUubG9nKGBbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3Vwczogcm9vdD0ke3Jvb3R9LCBrZWVwPSR7a2VlcH1gKTtcblxuICAgIC8vIGVuc3VyZSB0aGUgcm9vdCBleGlzdHNcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUZvbGRlckV4aXN0cyhyb290KTtcbiAgICBpZiAoIShhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHJvb3QpKSkge1xuICAgICAvLyBjb25zb2xlLmxvZygnW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IHJvb3QgZm9sZGVyIG5vdCBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGdldCBmb2xkZXIgbmFtZXNcbiAgICBjb25zdCBsaXN0aW5nID0gYXdhaXQgdGhpcy52YXVsdC5hZGFwdGVyLmxpc3Qocm9vdCk7XG4gICAgY29uc3QgcmF3Rm9sZGVyczogc3RyaW5nW10gPSBBcnJheS5pc0FycmF5KGxpc3RpbmcpXG4gICAgICA/IGxpc3RpbmcgYXMgc3RyaW5nW11cbiAgICAgIDogJ2ZvbGRlcnMnIGluIGxpc3RpbmdcbiAgICAgID8gKGxpc3RpbmcgYXMgYW55KS5mb2xkZXJzXG4gICAgICA6IFtdO1xuICAgIGNvbnN0IGZvbGRlcnMgPSByYXdGb2xkZXJzLm1hcChmID0+IGJhc2VuYW1lKGYpKTtcbiAgICAvL2NvbnNvbGUubG9nKCdbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3VwczogZm9sZGVycyAoYmFzZW5hbWVzKTonLCBmb2xkZXJzKTtcblxuICAgIC8vIHNvcnQgZGVzY2VuZGluZyBzbyBuZXdlc3QgZmlyc3RcbiAgICBjb25zdCBzb3J0ZWQgPSBbLi4uZm9sZGVyc10uc29ydCgoYSwgYikgPT4gYi5sb2NhbGVDb21wYXJlKGEpKTtcbiAgICAvL2NvbnNvbGUubG9nKCdbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3Vwczogc29ydGVkOicsIHNvcnRlZCk7XG5cbiAgICAvLyBjb21wdXRlIGZpbGVzeXN0ZW0gcm9vdCB0byByZW1vdmUgZnJvbVxuICAgIGNvbnN0IGFkYXB0ZXJBbnkgPSB0aGlzLnZhdWx0LmFkYXB0ZXIgYXMgYW55O1xuICAgIGNvbnN0IGZzUm9vdCA9IGFkYXB0ZXJBbnkuYmFzZVBhdGggPyBqb2luKGFkYXB0ZXJBbnkuYmFzZVBhdGgsIHJvb3QpIDogbnVsbDtcbiAgICBpZiAoIWZzUm9vdCkge1xuICAgICAgLy9jb25zb2xlLndhcm4oJ1tCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiBjYW5ub3QgZGV0ZXJtaW5lIEZTIHJvb3QsIHNraXBwaW5nIHBydW5lJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIG9sZCBzbmFwc2hvdHMgYmV5b25kIGBrZWVwYFxuICAgIGZvciAobGV0IGkgPSBrZWVwOyBpIDwgc29ydGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBuYW1lID0gc29ydGVkW2ldO1xuICAgICAgY29uc3QgdmF1bHRQYXRoID0gbm9ybWFsaXplUGF0aChgJHtyb290fS8ke25hbWV9YCk7XG4gICAgICBpZiAodmF1bHRQYXRoID09PSBjdXJyZW50UGF0aCkge1xuICAgICAgIC8vIGNvbnNvbGUubG9nKGBbQmFja3VwTWFuYWdlcl0gcHJ1bmVGdWxsQmFja3Vwczogc2tpcHBpbmcgY3VycmVudCAke25hbWV9YCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgLy9jb25zb2xlLmxvZyhgW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IHJlbW92aW5nIEZTIGZvbGRlcjogJHtuYW1lfWApO1xuICAgICAgY29uc3QgcmVtb3ZlUGF0aCA9IGpvaW4oZnNSb290LCBuYW1lKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGZzLnJtKHJlbW92ZVBhdGgsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhgW0JhY2t1cE1hbmFnZXJdIHBydW5lRnVsbEJhY2t1cHM6IHJlbW92ZWQgJHtyZW1vdmVQYXRofWApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoYFtCYWNrdXBNYW5hZ2VyXSBwcnVuZUZ1bGxCYWNrdXBzOiBmYWlsZWQgdG8gcmVtb3ZlICR7cmVtb3ZlUGF0aH1gLCBlKTtcbiAgICAgIH1cbiAgICAgIC8vIGFsc28gY2xlYW4gdXAgdmF1bHQgaW5kZXhcbiAgICAgIGNvbnN0IGFmID0gdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodmF1bHRQYXRoKTtcbiAgICAgIGlmIChhZikge1xuICAgICAgICBhd2FpdCB0aGlzLnZhdWx0LmRlbGV0ZShhZik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY3Vyc2l2ZWx5IGVuc3VyZXMgdGhhdCBhIGRpcmVjdG9yeSBleGlzdHMgaW4gdGhlIHZhdWx0LlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBlbnN1cmVGb2xkZXJFeGlzdHMoZm9sZGVyUGF0aDogc3RyaW5nKSB7XG4gICAgaWYgKCFmb2xkZXJQYXRoIHx8IChhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZvbGRlclBhdGgpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBwYXJlbnQgPSBkaXJuYW1lKGZvbGRlclBhdGgpO1xuICAgIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyRXhpc3RzKHBhcmVudCk7XG4gICAgYXdhaXQgdGhpcy52YXVsdC5jcmVhdGVGb2xkZXIo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O0FBRzNCLFlBQU0sU0FBUztBQUNmLFVBQUksQ0FBRSxNQUFNLEtBQUssSUFBSSxNQUFNLFFBQVEsT0FBTyxNQUFNLEdBQUk7QUFDbEQsY0FBTSxLQUFLLElBQUksTUFBTSxPQUFPLFFBQVEsRUFBRTtBQUFBLE1BQ3hDO0FBQ0EsV0FBSyxTQUFTLGVBQW1CO0FBQ2pDLFdBQUssU0FBUyxtQkFBbUI7QUFDakMsWUFBTSxLQUFLLGFBQWE7QUFDeEIsV0FBSyxnQkFBZ0I7QUFFckIseUJBQW1CO0FBQUEsSUFDckIsU0FBUyxLQUFLO0FBQ1osY0FBUSxNQUFNLCtCQUEwQixHQUFHO0FBQUEsSUFDN0MsVUFBRTtBQUVBLGtCQUFZLE1BQU07QUFDbEIsVUFBSSxLQUFLLFlBQWEsTUFBSyxZQUFZLFFBQVE7QUFDL0MsVUFBSTtBQUFBLFFBQ0YsbUJBQ0ksdURBQ0E7QUFBQSxNQUNOO0FBQUEsSUFDRjtBQUFBLEVBQ0Y7QUFJQTsiLAogICJuYW1lcyI6IFsiSW5zdGFsbGluZ01vZGFsIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImNhcGl0YWxpemVGaXJzdCIsICJTSVpFX01BUCIsICJvdXQiLCAicyIsICJlbnRyeSIsICJmZWF0dXJlc0J5TGV2ZWwiLCAicHJvZ0dyb3VwcyIsICJjYXAiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAicGF0aCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZnMiLCAiSW5zdGFsbGluZ01vZGFsIiwgInBhdGgiLCAiY29udGVudCJdCn0K
